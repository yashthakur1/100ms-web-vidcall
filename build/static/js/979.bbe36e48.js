(self.webpackChunk=self.webpackChunk||[]).push([[979],{5873:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{d:"M20.319 12.004c0-.272-.114-.536-.317-.73L14.228 5.5c-.229-.22-.466-.316-.712-.316-.562 0-.967.396-.967.932 0 .281.115.518.29.694l1.978 2.004 2.549 2.33-2.04-.124H4.675c-.589 0-.993.404-.993.984 0 .572.404.976.993.976h10.653l2.039-.123-2.55 2.329-1.977 2.004a.968.968 0 00-.29.694c0 .536.405.932.967.932a.99.99 0 00.694-.299l5.792-5.792c.203-.193.317-.457.317-.72z",fill:"currentColor"}))}},3988:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 5h16a1 1 0 011 1v12a1 1 0 01-1 1H4a1 1 0 01-1-1V6a1 1 0 011-1zM2 6a2 2 0 012-2h16a2 2 0 012 2v12a2 2 0 01-2 2H4a2 2 0 01-2-2V6zm3 10V8h1.765c.388 0 .715.056.984.169.276.112.502.262.675.449.174.187.296.404.368.652.079.24.118.49.118.753v.292c0 .217-.02.4-.06.55-.03.15-.082.281-.153.393-.134.21-.34.39-.616.54.284.127.493.314.628.562.134.247.201.584.201 1.01v.45c0 .704-.182 1.244-.545 1.618-.355.375-.928.562-1.718.562H5zm1.209-3.708v2.562h.52c.246 0 .435-.034.57-.101a.715.715 0 00.32-.281c.07-.12.114-.262.13-.427.016-.165.024-.345.024-.54 0-.202-.012-.378-.036-.528a.931.931 0 00-.142-.382.645.645 0 00-.32-.224 1.495 1.495 0 00-.533-.079h-.533zm0-3.213v2.202h.545c.402 0 .671-.094.805-.281.143-.195.214-.476.214-.843 0-.36-.08-.629-.237-.809-.15-.18-.427-.27-.83-.27H6.21zm5.045 0v2.494h.687c.213 0 .383-.026.51-.079a.722.722 0 00.295-.247c.064-.105.107-.232.13-.382.024-.157.036-.337.036-.54 0-.201-.012-.377-.035-.527a1.037 1.037 0 00-.142-.405c-.15-.21-.435-.314-.853-.314h-.628zM10.045 16V8h1.943c1.422 0 2.133.783 2.133 2.348 0 .472-.08.873-.237 1.203-.15.33-.419.595-.806.797L14.382 16h-1.28l-1.126-3.416h-.723V16h-1.208zm5.045-8v8h1.647c.79 0 1.363-.187 1.718-.562.363-.374.545-.914.545-1.618v-.45c0-.426-.067-.763-.201-1.01a1.284 1.284 0 00-.628-.562c.276-.15.481-.33.616-.54.07-.112.122-.243.154-.393.04-.15.059-.333.059-.55v-.292c0-.263-.04-.514-.119-.753a1.591 1.591 0 00-.367-.652 1.859 1.859 0 00-.675-.45C17.57 8.057 17.242 8 16.855 8H15.09zm1.209 6.854v-2.562h.533c.22 0 .399.026.533.079.134.045.24.12.32.224a.931.931 0 01.142.382c.024.15.035.326.035.529 0 .194-.007.374-.023.539-.016.165-.06.307-.13.427a.715.715 0 01-.32.28c-.135.068-.324.102-.57.102h-.52zm0-3.573V9.079h.497c.403 0 .68.09.83.27.157.18.236.449.236.808 0 .367-.07.648-.213.843-.134.187-.403.28-.806.28H16.3z",fill:"currentColor"}))}},370:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 13.167v2.262a1.632 1.632 0 01-1.633 1.632h-6.64L7.985 19.87a.653.653 0 01-1.045-.522V17.06H5.633A1.633 1.633 0 014 15.43V5.633A1.633 1.633 0 015.633 4h5.2c-.18.416-.322.853-.42 1.306h-4.78a.327.327 0 00-.327.327v9.796a.327.327 0 00.327.326h1.959c.36 0 .653.292.653.653v1.633l2.873-2.155a.653.653 0 01.392-.13h6.857a.327.327 0 00.327-.327v-1.843c.453-.097.89-.239 1.306-.42z",fill:"currentColor"}),h.createElement("rect",{x:12,y:2,width:10,height:10,rx:5,fill:"#2F80FF"}))}},4718:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{d:"M6.44 12c.008.308.122.589.368.817l6.838 6.68c.194.193.44.299.73.299.58 0 1.046-.457 1.046-1.037 0-.282-.115-.554-.317-.756l-6.16-5.994 6.16-6.012c.194-.202.317-.466.317-.756 0-.58-.466-1.037-1.046-1.037-.29 0-.536.106-.73.299L6.808 11.19c-.246.238-.369.501-.369.809z",fill:"currentColor"}))}},3385:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{d:"M17.542 12a1.123 1.123 0 01-.369.817l-6.838 6.68c-.193.193-.44.299-.73.299-.58 0-1.045-.457-1.045-1.037 0-.282.114-.554.316-.756l6.161-5.994-6.16-6.012a1.094 1.094 0 01-.317-.756c0-.58.466-1.037 1.046-1.037.29 0 .536.106.73.299l6.837 6.688c.246.238.37.501.37.809z",fill:"currentColor"}))}},3210:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.294 3.372a.75.75 0 01.75-.75h19.912a.75.75 0 01.75.75v13.274a.75.75 0 01-.75.75h-8.737l.07 2.482h4.02a.75.75 0 010 1.5H6.69a.75.75 0 010-1.5h4.021l.07-2.482H2.044a.75.75 0 01-.75-.75V3.372zm19.912 12.524H2.794V4.122h18.412v11.774z",fill:"currentColor"}))}},7854:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{d:"M19.567 10.38c-.465 0-.8-.352-.8-.818v-.738l.176-3.067-2.311 2.434-2.707 2.725a.737.737 0 01-.554.229c-.5 0-.87-.326-.87-.818 0-.237.08-.448.237-.606l2.716-2.707 2.435-2.312-3.076.176h-.73c-.466 0-.826-.325-.826-.8 0-.474.351-.808.826-.808h4.878c.896 0 1.415.518 1.415 1.415v4.878a.798.798 0 01-.809.817zm-9.641 9.66H5.048c-.897 0-1.424-.52-1.424-1.416v-4.878a.8.8 0 01.817-.817c.457 0 .8.351.8.817v.738l-.184 3.068 2.32-2.435 2.698-2.724a.756.756 0 01.563-.229c.492 0 .87.325.87.817a.843.843 0 01-.246.607l-2.707 2.707-2.444 2.311 3.077-.175h.738c.466 0 .826.325.826.8 0 .474-.36.808-.826.808z",fill:"currentColor"}))}},9995:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none"},N),h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 6.556a1.556 1.556 0 113.111 0 1.556 1.556 0 01-3.111 0zm5.445 0a1.556 1.556 0 113.111 0 1.556 1.556 0 01-3.111 0zm7-1.556a1.556 1.556 0 100 3.111 1.556 1.556 0 000-3.111zM5 12a1.556 1.556 0 113.111 0A1.556 1.556 0 015 12zm7-1.556a1.556 1.556 0 100 3.112 1.556 1.556 0 000-3.112zM15.89 12A1.556 1.556 0 1119 12a1.556 1.556 0 01-3.111 0zm-9.333 3.889a1.556 1.556 0 100 3.11 1.556 1.556 0 000-3.11zm3.889 1.555a1.556 1.556 0 113.11 0 1.556 1.556 0 01-3.11 0zm7-1.555a1.556 1.556 0 100 3.111 1.556 1.556 0 000-3.111z",fill:"currentColor"}))}},5408:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{d:"M5 6.5a.75.75 0 01.75-.75h12.5a.75.75 0 010 1.5H5.75A.75.75 0 015 6.5zM5 12a.75.75 0 01.75-.75h12.5a.75.75 0 010 1.5H5.75A.75.75 0 015 12zm.75 4.75a.75.75 0 000 1.5h12.5a.75.75 0 000-1.5H5.75z",fill:"currentColor"}))}},3712:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{d:"M6.193 14.89c.725 3.475 2.329 5.528 5.466 5.528 2.352 0 3.878-.956 4.927-2.876.748-1.195 1.272-2.837 1.704-4.255.23-.733.547-1.658.57-2.067.031-.462-.27-.793-.732-.824-.532-.039-.864.27-1.195.963l-1.08 2.32c-.1.232-.208.31-.331.31-.139 0-.24-.078-.24-.332l.356-8.144a.885.885 0 00-.894-.894.884.884 0 00-.887.894l-.355 5.923c-.2-.069-.416-.13-.64-.177l-.187-6.783a.885.885 0 00-.895-.894.884.884 0 00-.886.894l.187 6.698a9.593 9.593 0 00-.678.093l-.785-6.214a.882.882 0 00-.887-.887.884.884 0 00-.894.887l.72 6.72c-.232.107-.53.27-.731.401l-.908-4.716a.882.882 0 00-.886-.886.884.884 0 00-.895.886l1.056 7.432z",fill:"#FAC919"}),h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.725 15.197a1.495 1.495 0 01-.017-.096L3.652 7.67a1.5 1.5 0 01-.015-.21 2.383 2.383 0 012.7-2.368v-.038A2.383 2.383 0 018.73 2.666c.432 0 .836.114 1.184.312a2.373 2.373 0 011.866-.896c.895 0 1.67.483 2.08 1.204a2.39 2.39 0 01.883-.167 2.385 2.385 0 012.393 2.46l-.155 3.555c.389-.191.814-.266 1.25-.235a2.29 2.29 0 011.566.748c.424.474.596 1.078.56 1.665-.025.406-.165.903-.267 1.247-.082.276-.18.582-.268.858l-.1.314c-.418 1.372-.986 3.185-1.842 4.57-.62 1.122-1.43 2.05-2.504 2.689-1.087.645-2.335.928-3.718.928-1.936 0-3.536-.652-4.735-1.938-1.148-1.23-1.81-2.916-2.2-4.783zm11.86 2.345c.749-1.195 1.273-2.837 1.705-4.255l.11-.348c.21-.656.44-1.372.46-1.719.031-.462-.27-.793-.732-.824-.532-.039-.864.27-1.195.963l-1.08 2.32v.003c-.1.23-.208.306-.331.306-.139 0-.24-.077-.24-.331l.356-8.144a.885.885 0 00-.894-.894.882.882 0 00-.887.894l-.355 5.923c-.2-.069-.416-.13-.64-.177l-.187-6.783a.884.884 0 00-.894-.894.88.88 0 00-.887.894l.187 6.698a9.593 9.593 0 00-.678.093l-.785-6.214a.886.886 0 00-.224-.592.883.883 0 00-.663-.295.884.884 0 00-.894.887l.72 6.72c-.232.107-.53.27-.731.401l-.908-4.716a.882.882 0 00-.886-.886.884.884 0 00-.895.886l1.056 7.432c.725 3.475 2.329 5.528 5.466 5.528 2.352 0 3.878-.956 4.927-2.876z",fill:"#212121"}))}},6545:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.879 8.601a.75.75 0 01.072.012 4.704 4.704 0 013.684 4.593v.782a2.068 2.068 0 01-2.068 2.067h-3.295a2.068 2.068 0 01-2.068-2.067.568.568 0 00-.568-.568H9.364a.568.568 0 00-.568.568 2.068 2.068 0 01-2.068 2.067H3.433a2.068 2.068 0 01-2.068-2.067v-.782M18.879 8.6a36.435 36.435 0 00-13.83.01 4.704 4.704 0 00-3.684 4.595m3.856-3.863v.043l.065.291-.065-.334zm.142.735a3.204 3.204 0 00-2.498 3.127v.783a.568.568 0 00.568.568h3.295a.568.568 0 00.568-.568 2.068 2.068 0 012.068-2.068h5.272a2.068 2.068 0 012.068 2.068.568.568 0 00.568.568h3.295a.568.568 0 00.568-.568v-.782a3.204 3.204 0 00-2.499-3.124c-4.383-.85-8.889-.85-13.273-.003v-.002z",fill:"currentColor"}))}},4328:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none"},N),h.createElement("path",{d:"M7.003 12c0-1.123-.881-2-2.006-2A1.997 1.997 0 003 12c0 1.094.89 2 1.997 2a2.017 2.017 0 002.006-2zm6.975 0c0-1.123-.872-2-1.978-2a2 2 0 000 4c1.088 0 1.978-.906 1.978-2zM21 12c0-1.123-.881-2-1.997-2a1.999 1.999 0 00-2.006 2c0 1.094.89 2 2.006 2A2.015 2.015 0 0021 12z",fill:"currentColor"}))}},7632:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{d:"M12 20.97c5.106 0 9.308-4.2 9.308-9.307 0-5.115-4.202-9.316-9.317-9.316s-9.307 4.2-9.307 9.316c0 5.107 4.2 9.308 9.316 9.308zm-.009-12.128a1.403 1.403 0 01-1.389-1.389c0-.782.633-1.397 1.39-1.397.755 0 1.38.615 1.38 1.397 0 .756-.625 1.389-1.38 1.389zm-1.67 7.77c-.492 0-.879-.343-.879-.862 0-.466.387-.844.88-.844h1.01v-3.129h-.835c-.5 0-.879-.351-.879-.852 0-.475.378-.844.88-.844h1.8c.634 0 .959.43.959 1.099v3.726h.8c.492 0 .878.378.878.844 0 .519-.386.861-.878.861H10.32z",fill:"currentColor"}))}},4334:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{d:"M13.832 10.608L7.409 5.335A1.474 1.474 0 005 6.469v11.082a1.474 1.474 0 002.408 1.135l6.424-5.274a1.809 1.809 0 000-2.798v-.006zM15.996 5H19v14.02h-3.004V5z",fill:"currentColor"}))}},8338:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{d:"M11.875 4a7.875 7.875 0 100 15.75 7.875 7.875 0 000-15.75zM10.75 14.688a1.125 1.125 0 11-2.25 0V9.061a1.125 1.125 0 012.25 0v5.626zm4.5 0a1.125 1.125 0 11-2.25 0V9.061a1.125 1.125 0 112.25 0v5.626z",fill:"currentColor"}))}},4053:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{d:"M12 4.125a7.875 7.875 0 100 15.75 7.875 7.875 0 000-15.75zm3.572 8.57l-4.5 3.094a.84.84 0 01-.801.085.842.842 0 01-.521-.78V8.906a.844.844 0 011.322-.695l4.5 3.094a.845.845 0 010 1.39z",fill:"currentColor"}))}},6905:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{d:"M5.897 6.795h12.206a.897.897 0 000-1.795H5.897a.897.897 0 100 1.795zM18.102 8.949H12a.898.898 0 000 1.795h6.102a.897.897 0 100-1.795zM18.102 13.256H12a.898.898 0 000 1.795h6.102a.897.897 0 000-1.795zM18.103 17.205H5.897a.897.897 0 100 1.795h12.206a.897.897 0 000-1.795zM5.982 9.183a.718.718 0 00-.444.663v4.308a.718.718 0 001.227.508l2.154-2.154a.718.718 0 000-1.016L6.765 9.338a.718.718 0 00-.783-.155z",fill:"currentColor"}))}},4817:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{d:"M10.168 13.392l6.423 5.273A1.473 1.473 0 0019 17.531V6.449a1.474 1.474 0 00-2.408-1.135l-6.424 5.274a1.81 1.81 0 000 2.798v.006zM8.004 19H5V4.98h3.004V19z",fill:"currentColor"}))}},9540:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{d:"M3 16.322c0-1.433.574-2.807 1.597-3.82a5.477 5.477 0 013.855-1.583 5.576 5.576 0 012.14.433M8.452 9.727c1.842 0 3.335-1.48 3.335-3.306 0-1.825-1.493-3.305-3.335-3.305-1.843 0-3.336 1.48-3.336 3.305 0 1.826 1.493 3.306 3.336 3.306zM11.093 21.116a3.682 3.682 0 01-2.481-1.121 3.616 3.616 0 01-1.014-2.509c0-.934.363-1.832 1.014-2.508a3.681 3.681 0 012.48-1.121h6.413c.942.044 1.83.445 2.481 1.121A3.616 3.616 0 0121 17.486c0 .934-.363 1.833-1.014 2.509a3.682 3.682 0 01-2.48 1.121h-6.413zM13.063 16.314l2.423 2.4M15.486 16.314l-2.423 2.4",stroke:"currentColor",strokeWidth:1.211,strokeLinecap:"round",strokeLinejoin:"round"}))}},1745:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.7 3.195c.394-.07.8-.013 1.16.164l.007.004 14.26 7.245a1.313 1.313 0 01.718 1.162v.01a1.313 1.313 0 01-.717 1.168L5.859 20.206a1.875 1.875 0 01-2.451-2.622l3.554-5.806-3.554-5.796A1.875 1.875 0 014.7 3.195zm13.623 7.832L5.193 4.703a.375.375 0 00-.496.511l3.74 5.813h9.886zm-9.924 1.5h9.924l-13.13 6.335a.374.374 0 01-.496-.511L8.4 12.527z",fill:"currentColor"}))}},6532:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{d:"M18.987 10.81H14.11c-.896 0-1.415-.527-1.415-1.423v-4.87c0-.456.343-.817.809-.817s.8.352.8.818v.738l-.185 3.067 2.32-2.434 2.699-2.725a.764.764 0 01.562-.237c.501 0 .87.334.87.826a.858.858 0 01-.246.606l-2.707 2.707-2.434 2.312 3.067-.176h.738c.466 0 .827.325.827.8 0 .466-.352.808-.827.808zm-8.428 8.921c-.466 0-.8-.342-.8-.817v-.835l.184-3.059-2.32 2.435-2.76 2.777a.75.75 0 01-.562.238c-.492 0-.862-.334-.862-.826a.85.85 0 01.238-.607l2.768-2.768 2.444-2.312-3.076.176h-.835c-.466 0-.827-.325-.827-.791 0-.475.352-.809.827-.809h4.974c.897 0 1.415.519 1.415 1.415v4.966c0 .466-.334.817-.808.817z",fill:"currentColor"}))}},2216:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.1 2.813a.75.75 0 000 1.5 2.625 2.625 0 012.625 2.625v6h-1.5a.75.75 0 000 1.5h1.5v2.624a2.625 2.625 0 01-2.625 2.625.75.75 0 000 1.5 4.125 4.125 0 003.375-1.753 4.13 4.13 0 003.375 1.753.75.75 0 100-1.5 2.625 2.625 0 01-2.625-2.625v-2.625h1.5a.75.75 0 100-1.5h-1.5v-6a2.625 2.625 0 012.625-2.625.75.75 0 100-1.5 4.125 4.125 0 00-3.375 1.754A4.122 4.122 0 0014.1 2.813zM8.728 17.209c0 .633-.413 1.028-1.045 1.028-.633 0-1.038-.395-1.038-1.028V7.075H3.323c-.536 0-.923-.351-.923-.896 0-.536.387-.888.923-.888h8.728c.536 0 .923.352.923.888 0 .545-.387.896-.923.896H8.728V17.21z",fill:"currentColor"}))}},6907:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160),W=function(N){return h.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N),h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.815 7.497a.407.407 0 010-.576l1.802-1.802a.407.407 0 11.576.576L16.39 7.497a.407.407 0 01-.576 0zM3.129 9.93a.407.407 0 00.576.576L8.49 5.721a.407.407 0 10-.576-.576L3.13 9.93zm.038-3.263a.407.407 0 10.576.576L5.26 5.727a.407.407 0 00-.576-.576L3.167 6.667zm-.048 7.075a.407.407 0 010-.576l7.994-7.994a.407.407 0 01.576.576l-7.994 7.994a.407.407 0 01-.576 0zm10.268-7.618a.407.407 0 00.576.576l.975-.975a.407.407 0 00-.576-.576l-.975.975zM3.132 16.954a.407.407 0 010-.575l3.944-3.944a.407.407 0 11.576.576l-3.944 3.944a.407.407 0 01-.576 0zm-.01 2.66a.407.407 0 10.576.576l4.58-4.58a.407.407 0 00-.575-.576l-4.58 4.58zm13.735-10.51a.407.407 0 10.576.576l3.872-3.871a.407.407 0 10-.576-.576l-3.872 3.871zm-.019 3.821a.407.407 0 010-.576l3.905-3.905a.407.407 0 01.576.576l-3.905 3.905a.407.407 0 01-.576 0zm.306 2.344a.407.407 0 00.576.576l3.606-3.607a.407.407 0 10-.576-.575l-3.606 3.606zm1.015 2.787a.407.407 0 010-.576l2.646-2.646a.407.407 0 11.576.576l-2.646 2.646a.407.407 0 01-.576 0zm.816 1.603a.407.407 0 00.576.576l1.787-1.788a.407.407 0 00-.576-.576l-1.787 1.788zM9.865 8.815a3.415 3.415 0 114.828 4.829 3.415 3.415 0 01-4.829-4.83zm2.414.221a2.193 2.193 0 100 4.386 2.193 2.193 0 000-4.386zM9.53 17.617a3.887 3.887 0 016.62 2.404.61.61 0 101.216-.109 5.108 5.108 0 00-10.177 0 .611.611 0 001.218.109 3.887 3.887 0 011.123-2.404z",fill:"currentColor"}))}},4866:(ct,ce,D)=>{"use strict";D.d(ce,{T:()=>Pe});var h=D(1931),W=D(9130),N=D(3751),J=D(8160),be=D(6395);const je=(He,Se,ye)=>(0,h.m)(void 0,void 0,void 0,function*(){if(Se)try{yield He.setRemoteTrackEnabled(Se.id,!Se.enabled)}catch(ge){ye(ge,"remoteToggle")}}),Pe=(He,Se,ye=be.r)=>{const ge=(0,N.cw)(),se=(0,N._U)((0,W.M)(He)),ee=(0,N._U)((0,W.M)(Se)),Ce=(0,N._U)((0,W.BF)(se==null?void 0:se.id)),ne=(0,N._U)(W.AI),Ue=(ee==null?void 0:ee.enabled)?ne==null?void 0:ne.mute:ne==null?void 0:ne.unmute,Ke=(se==null?void 0:se.enabled)?ne==null?void 0:ne.mute:ne==null?void 0:ne.unmute,$e=(0,J.useCallback)(()=>(0,h.m)(void 0,void 0,void 0,function*(){yield je(ge,se,ye)}),[ge,se,ye]),Xe=(0,J.useCallback)(()=>(0,h.m)(void 0,void 0,void 0,function*(){yield je(ge,ee,ye)}),[ge,ye,ee]),Be=(0,J.useCallback)(at=>{se&&ge.setVolume(at,se.id)},[ge,se]);return{isAudioEnabled:!!(se==null?void 0:se.enabled),isVideoEnabled:!!(ee==null?void 0:ee.enabled),volume:Ce,toggleAudio:se&&Ke?$e:void 0,toggleVideo:(ee==null?void 0:ee.source)==="regular"&&Ue?Xe:void 0,setVolume:se?Be:void 0}}},871:(ct,ce,D)=>{"use strict";D.d(ce,{i:()=>Bo});var h=D(9130),W=D(8160);const N=(U,te,oe)=>U.reduce((G,de,_e)=>{const Me=Math.floor(_e/te);return Me>0&&oe||(G[Me]||(G[Me]=[]),G[Me].push(de)),G},[]),J=({elements:U,tilesInFirstPage:te,onlyOnePage:oe,isLastPageDifferentFromFirstPage:G,defaultWidth:de,defaultHeight:_e,lastPageWidth:Me,lastPageHeight:pe})=>{const ze=N(U,te,oe);return ze.map((We,Ve)=>We.map(Ne=>{const Ie=Ve===ze.length-1,wt=G&&Ie?Me:de,St=G&&Ie?pe:_e;return Object.assign(Object.assign({},Ne),{height:St,width:wt})}))};function be(U){if(U.length===0)return null;const te={};let oe=U[0],G=1;for(let de=0;de<U.length;de++){const _e=U[de];te[_e]===null?te[_e]=1:te[_e]++,te[_e]>G&&(oe=_e,G=te[_e])}return oe}const je=U=>be(U.filter(te=>{var oe,G;return((oe=te.track)===null||oe===void 0?void 0:oe.width)&&((G=te.track)===null||G===void 0?void 0:G.height)}).map(te=>{var oe,G;return(((oe=te.track)===null||oe===void 0?void 0:oe.width)||1)/(((G=te.track)===null||G===void 0?void 0:G.height)||1)})),Pe=(U,te,oe,G,de)=>{if(U<0||te<0)throw new Error("Container must have a non-negative area");if(oe<1||!Number.isInteger(oe))throw new Error("Number of shapes to place must be a positive integer");const _e=G&&de&&G/de;if(_e!==void 0&&isNaN(_e))throw new Error("Aspect ratio must be a number");let Me={area:0,cols:0,rows:0,width:0,height:0};if(_e!==void 0)for(let pe=oe;pe>0;pe+=-1){const ze=Math.ceil(oe/pe);let We,Ve;U/(pe*_e)<=te/ze?(We=U/pe,Ve=We/_e):(Ve=te/ze,We=Ve*_e);const Ne=We*Ve;Ne>Me.area&&(Me={area:Ne,width:We,height:Ve,rows:ze,cols:pe})}return Me},He=({parentWidth:U,parentHeight:te,count:oe,maxCount:G,aspectRatio:de})=>{let _e=0,Me=0,pe=0,ze=0,We=!1,Ve=0,Ne=0;const Ie=Math.min(Math.ceil(Math.sqrt(oe*(U/te)/(de.width/de.height))),G);let wt=U/Ie,St=wt/(de.width/de.height);St>te&&(St=te,wt=St/(de.height/de.width));const Nt=Math.floor(te/St);if(Me=St,_e=wt,Ve=Math.min(oe,Nt*Ie),Ne=oe%(Nt*Ie),We=Ne>0&&oe>Nt*Ie,We){let e1=U/Math.min(Math.ceil(Math.sqrt(Ne*(U/te)/(de.width/de.height))),G),t1=e1/(de.width/de.height);t1>te&&(t1=te,e1=t1/(de.height/de.width)),ze=t1,pe=e1}return{tilesInFirstPage:Ve,defaultWidth:_e,defaultHeight:Me,lastPageWidth:pe,lastPageHeight:ze,isLastPageDifferentFromFirstPage:We}},Se=({parentWidth:U,parentHeight:te,count:oe,maxCount:G,aspectRatio:de})=>{let _e=0,Me=0,pe=0,ze=0,We=!1,Ve=0,Ne=0;const{width:Ie,height:wt}=Pe(U,te,Math.min(oe,G),de.width,de.height);if(_e=Ie,Me=wt,Ve=Math.min(oe,G),Ne=oe%G,We=Ne>0&&oe>G,We){const{width:St,height:Nt}=Pe(U,te,Ne,de.width,de.height);pe=St,ze=Nt}return{tilesInFirstPage:Ve,defaultWidth:_e,defaultHeight:Me,lastPageWidth:pe,lastPageHeight:ze,isLastPageDifferentFromFirstPage:We}},ye=({parentWidth:U,parentHeight:te,count:oe,maxCount:G,aspectRatio:de})=>{let _e=0,Me=0,pe=0,ze=0,We=!1,Ve=0,Ne=0;const Ie=Math.min(Math.ceil(Math.sqrt(oe*(de.width/de.height)/(U/te))),G),wt=te/Ie,St=wt*(de.width/de.height),Nt=Math.floor(U/St);if(_e=St,Me=wt,Ve=Math.min(oe,Ie*Nt),Ne=oe%(Ie*Nt),We=Ne>0&&oe>Ie*Nt,We){const e1=te/Math.min(Math.ceil(Math.sqrt(Ne*(de.width/de.height)/(U/te))),G);ze=e1,pe=e1*(de.width/de.height)}return{tilesInFirstPage:Ve,defaultWidth:_e,defaultHeight:Me,lastPageWidth:pe,lastPageHeight:ze,isLastPageDifferentFromFirstPage:We}};function ge({count:U,parentWidth:te,parentHeight:oe,maxTileCount:G,maxRowCount:de,maxColCount:_e,aspectRatio:Me}){let pe=0,ze=0,We=0,Ve=0,Ne=!1,Ie=0;if(U===0)return{tilesInFirstPage:Ie,defaultWidth:pe,defaultHeight:ze,lastPageWidth:We,lastPageHeight:Ve,isLastPageDifferentFromFirstPage:Ne};if(G)({tilesInFirstPage:Ie,defaultWidth:pe,defaultHeight:ze,lastPageWidth:We,lastPageHeight:Ve,isLastPageDifferentFromFirstPage:Ne}=Se({parentWidth:te,parentHeight:oe,count:U,maxCount:G,aspectRatio:Me}));else if(de)({tilesInFirstPage:Ie,defaultWidth:pe,defaultHeight:ze,lastPageWidth:We,lastPageHeight:Ve,isLastPageDifferentFromFirstPage:Ne}=ye({parentWidth:te,parentHeight:oe,count:U,maxCount:de,aspectRatio:Me}));else if(_e)({tilesInFirstPage:Ie,defaultWidth:pe,defaultHeight:ze,lastPageWidth:We,lastPageHeight:Ve,isLastPageDifferentFromFirstPage:Ne}=He({parentWidth:te,parentHeight:oe,count:U,maxCount:_e,aspectRatio:Me}));else{const{width:wt,height:St}=Pe(te,oe,U,Me.width,Me.height);pe=wt,ze=St,Ie=U}return{tilesInFirstPage:Ie,defaultWidth:pe,defaultHeight:ze,lastPageWidth:We,lastPageHeight:Ve,isLastPageDifferentFromFirstPage:Ne}}const se=(U,te,oe,G=!0)=>{if(!U||!te||!oe)return[];const de=[];for(const _e of U)if(_e.videoTrack===void 0&&_e.audioTrack&&te[_e.audioTrack]?de.push({peer:_e}):_e.videoTrack&&te[_e.videoTrack]?de.push({track:te[_e.videoTrack],peer:_e}):G||de.push({peer:_e}),_e.auxiliaryTracks.length>0&&_e.auxiliaryTracks.forEach(Me=>{const pe=te[Me];(pe==null?void 0:pe.type)==="video"&&(pe==null?void 0:pe.source)==="regular"&&de.push({track:pe,peer:_e})}),oe(_e)&&_e.auxiliaryTracks.length>0){const Me=_e.auxiliaryTracks.find(pe=>{const ze=te[pe];return(ze==null?void 0:ze.type)==="video"&&(ze==null?void 0:ze.source)==="screen"});Me&&de.push({track:te[Me],peer:_e})}return de};var ee=D(3751),Ce=D(9004);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ne=function(U,te){return ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,G){oe.__proto__=G}||function(oe,G){for(var de in G)Object.prototype.hasOwnProperty.call(G,de)&&(oe[de]=G[de])},ne(U,te)};function Ue(U,te){if(typeof te!="function"&&te!==null)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");ne(U,te);function oe(){this.constructor=U}U.prototype=te===null?Object.create(te):(oe.prototype=te.prototype,new oe)}var Ke=function(){return Ke=Object.assign||function(te){for(var oe,G=1,de=arguments.length;G<de;G++){oe=arguments[G];for(var _e in oe)Object.prototype.hasOwnProperty.call(oe,_e)&&(te[_e]=oe[_e])}return te},Ke.apply(this,arguments)};function $e(U,te){var oe={};for(var G in U)Object.prototype.hasOwnProperty.call(U,G)&&te.indexOf(G)<0&&(oe[G]=U[G]);if(U!=null&&typeof Object.getOwnPropertySymbols=="function")for(var de=0,G=Object.getOwnPropertySymbols(U);de<G.length;de++)te.indexOf(G[de])<0&&Object.prototype.propertyIsEnumerable.call(U,G[de])&&(oe[G[de]]=U[G[de]]);return oe}var Xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof D.g<"u"?D.g:typeof self<"u"?self:{};function Be(U){var te=typeof U;return U!=null&&(te=="object"||te=="function")}var at=Be,ht=typeof Xe=="object"&&Xe&&Xe.Object===Object&&Xe,Je=ht,yt=Je,ot=typeof self=="object"&&self&&self.Object===Object&&self,Wt=yt||ot||Function("return this")(),s1=Wt,C1=s1,L1=function(){return C1.Date.now()},Z1=L1,W1=/\s/;function S1(U){for(var te=U.length;te--&&W1.test(U.charAt(te)););return te}var Mr=S1,J1=Mr,r1=/^\s+/;function Q1(U){return U&&U.slice(0,J1(U)+1).replace(r1,"")}var ur=Q1,F1=s1,Ft=F1.Symbol,fr=Ft,j1=fr,Vt=Object.prototype,Qt=Vt.hasOwnProperty,z1=Vt.toString,n1=j1?j1.toStringTag:void 0;function Te(U){var te=Qt.call(U,n1),oe=U[n1];try{U[n1]=void 0;var G=!0}catch{}var de=z1.call(U);return G&&(te?U[n1]=oe:delete U[n1]),de}var Qe=Te,he=Object.prototype,Le=he.toString;function Ze(U){return Le.call(U)}var ie=Ze,Ge=fr,ft=Qe,Et=ie,It="[object Null]",mt="[object Undefined]",_t=Ge?Ge.toStringTag:void 0;function ae(U){return U==null?U===void 0?mt:It:_t&&_t in Object(U)?ft(U):Et(U)}var ue=ae;function ve(U){return U!=null&&typeof U=="object"}var Ae=ve,ke=ue,pt=Ae,rt="[object Symbol]";function Pt(U){return typeof U=="symbol"||pt(U)&&ke(U)==rt}var Lt=Pt,o1=ur,a1=at,Gt=Lt,dt=0/0,$t=/^[-+]0x[0-9a-f]+$/i,zt=/^0b[01]+$/i,l1=/^0o[0-7]+$/i,er=parseInt;function Zt(U){if(typeof U=="number")return U;if(Gt(U))return dt;if(a1(U)){var te=typeof U.valueOf=="function"?U.valueOf():U;U=a1(te)?te+"":te}if(typeof U!="string")return U===0?U:+U;U=o1(U);var oe=zt.test(U);return oe||l1.test(U)?er(U.slice(2),oe?2:8):$t.test(U)?dt:+U}var Dt=Zt,hr=at,tr=Z1,U1=Dt,pr="Expected a function",rr=Math.max,Ir=Math.min;function Ut(U,te,oe){var G,de,_e,Me,pe,ze,We=0,Ve=!1,Ne=!1,Ie=!0;if(typeof U!="function")throw new TypeError(pr);te=U1(te)||0,hr(oe)&&(Ve=!!oe.leading,Ne="maxWait"in oe,_e=Ne?rr(U1(oe.maxWait)||0,te):_e,Ie="trailing"in oe?!!oe.trailing:Ie);function wt(Kt){var I1=G,h1=de;return G=de=void 0,We=Kt,Me=U.apply(h1,I1),Me}function St(Kt){return We=Kt,pe=setTimeout(t1,te),Ve?wt(Kt):Me}function Nt(Kt){var I1=Kt-ze,h1=Kt-We,sr=te-I1;return Ne?Ir(sr,_e-h1):sr}function e1(Kt){var I1=Kt-ze,h1=Kt-We;return ze===void 0||I1>=te||I1<0||Ne&&h1>=_e}function t1(){var Kt=tr();if(e1(Kt))return M1(Kt);pe=setTimeout(t1,Nt(Kt))}function M1(Kt){return pe=void 0,Ie&&G?wt(Kt):(G=de=void 0,Me)}function _1(){pe!==void 0&&clearTimeout(pe),We=0,G=ze=de=pe=void 0}function or(){return pe===void 0?Me:M1(tr())}function ir(){var Kt=tr(),I1=e1(Kt);if(G=arguments,de=this,ze=Kt,I1){if(pe===void 0)return St(ze);if(Ne)return clearTimeout(pe),pe=setTimeout(t1,te),wt(ze)}return pe===void 0&&(pe=setTimeout(t1,te)),Me}return ir.cancel=_1,ir.flush=or,ir}var f1=Ut,Pr=f1,m1=at,Ar="Expected a function";function R1(U,te,oe){var G=!0,de=!0;if(typeof U!="function")throw new TypeError(Ar);return m1(oe)&&(G="leading"in oe?!!oe.leading:G,de="trailing"in oe?!!oe.trailing:de),Pr(U,te,{leading:G,maxWait:te,trailing:de})}var N1=R1,K1=function(U,te,oe,G){switch(te){case"debounce":return f1(U,oe,G);case"throttle":return N1(U,oe,G);default:return U}},nr=function(U){return typeof U=="function"},T1=function(){return typeof window>"u"},vr=function(U){return U instanceof Element||U instanceof HTMLDocument},Zr=function(U,te,oe,G){return function(de){var _e=de.width,Me=de.height;te(function(pe){return pe.width===_e&&pe.height===Me||pe.width===_e&&!G||pe.height===Me&&!oe?pe:(U&&nr(U)&&U(_e,Me),{width:_e,height:Me})})}},gr=function(U){Ue(te,U);function te(oe){var G=U.call(this,oe)||this;G.cancelHandler=function(){G.resizeHandler&&G.resizeHandler.cancel&&(G.resizeHandler.cancel(),G.resizeHandler=null)},G.attachObserver=function(){var We=G.props,Ve=We.targetRef,Ne=We.observerOptions;if(!T1()){Ve&&Ve.current&&(G.targetRef.current=Ve.current);var Ie=G.getElement();!Ie||G.observableElement&&G.observableElement===Ie||(G.observableElement=Ie,G.resizeObserver.observe(Ie,Ne))}},G.getElement=function(){var We=G.props,Ve=We.querySelector,Ne=We.targetDomEl;if(T1())return null;if(Ve)return document.querySelector(Ve);if(Ne&&vr(Ne))return Ne;if(G.targetRef&&vr(G.targetRef.current))return G.targetRef.current;var Ie=(0,Ce.findDOMNode)(G);if(!Ie)return null;var wt=G.getRenderType();switch(wt){case"renderProp":return Ie;case"childFunction":return Ie;case"child":return Ie;case"childArray":return Ie;default:return Ie.parentElement}},G.createResizeHandler=function(We){var Ve=G.props,Ne=Ve.handleWidth,Ie=Ne===void 0?!0:Ne,wt=Ve.handleHeight,St=wt===void 0?!0:wt,Nt=Ve.onResize;if(!(!Ie&&!St)){var e1=Zr(Nt,G.setState.bind(G),Ie,St);We.forEach(function(t1){var M1=t1&&t1.contentRect||{},_1=M1.width,or=M1.height,ir=!G.skipOnMount&&!T1();ir&&e1({width:_1,height:or}),G.skipOnMount=!1})}},G.getRenderType=function(){var We=G.props,Ve=We.render,Ne=We.children;return nr(Ve)?"renderProp":nr(Ne)?"childFunction":(0,W.isValidElement)(Ne)?"child":Array.isArray(Ne)?"childArray":"parent"};var de=oe.skipOnMount,_e=oe.refreshMode,Me=oe.refreshRate,pe=Me===void 0?1e3:Me,ze=oe.refreshOptions;return G.state={width:void 0,height:void 0},G.skipOnMount=de,G.targetRef=(0,W.createRef)(),G.observableElement=null,T1()||(G.resizeHandler=K1(G.createResizeHandler,_e,pe,ze),G.resizeObserver=new window.ResizeObserver(G.resizeHandler)),G}return te.prototype.componentDidMount=function(){this.attachObserver()},te.prototype.componentDidUpdate=function(){this.attachObserver()},te.prototype.componentWillUnmount=function(){T1()||(this.resizeObserver.disconnect(),this.cancelHandler())},te.prototype.render=function(){var oe=this.props,G=oe.render,de=oe.children,_e=oe.nodeType,Me=_e===void 0?"div":_e,pe=this.state,ze=pe.width,We=pe.height,Ve={width:ze,height:We,targetRef:this.targetRef},Ne=this.getRenderType(),Ie;switch(Ne){case"renderProp":return G&&G(Ve);case"childFunction":return Ie=de,Ie(Ve);case"child":if(Ie=de,Ie.type&&typeof Ie.type=="string"){Ve.targetRef;var wt=$e(Ve,["targetRef"]);return(0,W.cloneElement)(Ie,wt)}return(0,W.cloneElement)(Ie,Ve);case"childArray":return Ie=de,Ie.map(function(St){return!!St&&(0,W.cloneElement)(St,Ve)});default:return W.createElement(Me,null)}},te}(W.PureComponent);function ko(U,te){te===void 0&&(te={});var oe=function(_e){Ue(Me,_e);function Me(){var pe=_e!==null&&_e.apply(this,arguments)||this;return pe.ref=createRef(),pe}return Me.prototype.render=function(){var pe=this.props,ze=pe.forwardedRef,We=$e(pe,["forwardedRef"]),Ve=ze??this.ref;return React.createElement(gr,Ke({},te,{targetRef:Ve}),React.createElement(U,Ke({targetRef:Ve},We)))},Me}(Component);function G(_e,Me){return React.createElement(oe,Ke({},_e,{forwardedRef:Me}))}var de=U.displayName||U.name;return G.displayName="withResizeDetector(".concat(de,")"),forwardRef(G)}var on=T1()?W.useEffect:W.useLayoutEffect;function Nn(U){U===void 0&&(U={});var te=U.skipOnMount,oe=te===void 0?!1:te,G=U.refreshMode,de=U.refreshRate,_e=de===void 0?1e3:de,Me=U.refreshOptions,pe=U.handleWidth,ze=pe===void 0?!0:pe,We=U.handleHeight,Ve=We===void 0?!0:We,Ne=U.targetRef,Ie=U.observerOptions,wt=U.onResize,St=(0,W.useRef)(oe),Nt=(0,W.useRef)(null),e1=Ne??Nt,t1=(0,W.useRef)(),M1=(0,W.useState)({width:void 0,height:void 0}),_1=M1[0],or=M1[1];return on(function(){if(!T1()){var ir=Zr(wt,or,ze,Ve),Kt=function(h1){!ze&&!Ve||h1.forEach(function(sr){var Mn=sr&&sr.contentRect||{},Ci=Mn.width,Cr=Mn.height,Kn=!St.current&&!T1();Kn&&ir({width:Ci,height:Cr}),St.current=!1})};t1.current=K1(Kt,G,_e,Me);var I1=new window.ResizeObserver(t1.current);return e1.current&&I1.observe(e1.current,Ie),function(){I1.disconnect();var h1=t1.current;h1&&h1.cancel&&h1.cancel()}}},[G,_e,Me,ze,Ve,wt,Ie,e1.current]),Ke({ref:e1},_1)}const To={width:1,height:1},Bo=({peers:U,maxTileCount:te,maxColCount:oe,maxRowCount:G,includeScreenShareForPeer:de=()=>!1,aspectRatio:_e=To,filterNonPublishingPeers:Me=!0,offsetY:pe=0})=>{const{width:ze=0,height:We=0,ref:Ve}=Nn(),Ne=(0,ee.gg)().getState(h.zK),Ie=se(U,Ne,de,Me),wt=(0,W.useMemo)(()=>_e||{width:je(Ie)||1,height:1},[_e,Ie]),St=Ie.length,{tilesInFirstPage:Nt,defaultWidth:e1,defaultHeight:t1,lastPageWidth:M1,lastPageHeight:_1,isLastPageDifferentFromFirstPage:or}=(0,W.useMemo)(()=>ge({count:St,parentWidth:Math.floor(ze),parentHeight:Math.floor(We)-Math.min(We,pe),maxTileCount:te,maxRowCount:G,maxColCount:oe,aspectRatio:wt}),[St,ze,We,te,G,oe,wt,pe]);return{pagesWithTiles:(0,W.useMemo)(()=>J({elements:Ie,tilesInFirstPage:Nt,onlyOnePage:!1,isLastPageDifferentFromFirstPage:or,defaultWidth:e1,defaultHeight:t1,lastPageWidth:M1,lastPageHeight:_1}),[Ie,Nt,or,e1,t1,M1,_1]),ref:Ve}}},4674:(ct,ce,D)=>{"use strict";D.d(ce,{I:()=>W});var h=D(9290);const W={Root:(0,h.zo)("div",{height:"2rem",display:"flex",justifyContent:"center",alignItems:"center",width:"100%","& > * + *":{marginRight:"0",marginLeft:"0.5rem"}}),Chevron:(0,h.zo)("button",{color:"$textPrimary","&:focus":{outline:"none"},"&[disabled]":{color:"$grayDefault",cursor:"not-allowed"}}),Dots:(0,h.zo)("div",{display:"flex",alignItems:"center","& > * + *":{marginRight:"0",marginLeft:"0.5rem"}}),Dot:(0,h.zo)("button",{"&:focus":{outline:"none"},borderRadius:"9999px",width:"0.5rem",height:"0.5rem",backgroundColor:"$textDisabled",variants:{active:{true:{backgroundColor:"$textPrimary"}}}})}},4892:(ct,ce,D)=>{"use strict";D.d(ce,{J:()=>J});var h=D(6811),W=D(5943),N=D(9290);const J={Root:h.J2,Content:(0,N.zo)(h.VY,Object.assign({padding:"$6",borderRadius:"$2",backgroundColor:"$bgSecondary",boxShadow:"$sm"},W.kp)),Trigger:h.xz}},8673:(ct,ce,D)=>{"use strict";D.d(ce,{E:()=>n1});var h=D(1855),W=D(5859),N=D(5939),J=D(440),be=D(1802),je=D(3118),Pe=D(8841),He=D(4135),Se=D(8224),ye=D(9600),ge=D(8160),se=D(8886),ee=Object.defineProperty,Ce=Object.defineProperties,ne=Object.getOwnPropertyDescriptors,Ue=Object.getOwnPropertySymbols,Ke=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,Xe=(Te,Qe,he)=>Qe in Te?ee(Te,Qe,{enumerable:!0,configurable:!0,writable:!0,value:he}):Te[Qe]=he,Be=(Te,Qe)=>{for(var he in Qe||(Qe={}))Ke.call(Qe,he)&&Xe(Te,he,Qe[he]);if(Ue)for(var he of Ue(Qe))$e.call(Qe,he)&&Xe(Te,he,Qe[he]);return Te},at=(Te,Qe)=>Ce(Te,ne(Qe)),ht=(Te,Qe)=>{var he={};for(var Le in Te)Ke.call(Te,Le)&&Qe.indexOf(Le)<0&&(he[Le]=Te[Le]);if(Te!=null&&Ue)for(var Le of Ue(Te))Qe.indexOf(Le)<0&&$e.call(Te,Le)&&(he[Le]=Te[Le]);return he};const[Je,yt]=(0,Pe.b)("Radio"),[ot,Wt]=Je("Radio"),s1=ge.forwardRef((Te,Qe)=>{const he=Te,{__scopeRadio:Le,"aria-labelledby":Ze,name:ie,checked:Ge=!1,required:ft,disabled:Et,value:It="on",onCheck:mt}=he,_t=ht(he,["__scopeRadio","aria-labelledby","name","checked","required","disabled","value","onCheck"]),[ae,ue]=ge.useState(null),ve=(0,He.e)(Qe,Pt=>ue(Pt)),Ae=(0,Se.t0)(ae),ke=Ze||Ae,pt=ge.useRef(!1),rt=!ae||Boolean(ae.closest("form"));return ge.createElement(ot,{scope:Le,checked:Ge,disabled:Et},ge.createElement(je.W.button,(0,se.Z)({type:"button",role:"radio","aria-checked":Ge,"aria-labelledby":ke,"data-state":Z1(Ge),"data-disabled":Et?"":void 0,disabled:Et,value:It},_t,{ref:ve,onClick:(0,ye.M)(Te.onClick,Pt=>{Ge||mt==null||mt(),rt&&(pt.current=Pt.isPropagationStopped(),pt.current||Pt.stopPropagation())})})),rt&&ge.createElement(L1,{control:ae,bubbles:!pt.current,name:ie,value:It,checked:Ge,required:ft,disabled:Et,style:{transform:"translateX(-100%)"}}))}),C1=ge.forwardRef((Te,Qe)=>{const he=Te,{__scopeRadio:Le,forceMount:Ze}=he,ie=ht(he,["__scopeRadio","forceMount"]),Ge=Wt("RadioIndicator",Le);return ge.createElement(h.z,{present:Ze||Ge.checked},ge.createElement(je.W.span,(0,se.Z)({"data-state":Z1(Ge.checked),"data-disabled":Ge.disabled?"":void 0},ie,{ref:Qe})))}),L1=Te=>{const Qe=Te,{control:he,checked:Le,bubbles:Ze=!0}=Qe,ie=ht(Qe,["control","checked","bubbles"]),Ge=ge.useRef(null),ft=(0,W.D)(Le),Et=(0,N.t)(he);return ge.useEffect(()=>{const It=Ge.current,mt=window.HTMLInputElement.prototype,_t=Object.getOwnPropertyDescriptor(mt,"checked").set;if(ft!==Le&&_t){const ae=new Event("click",{bubbles:Ze});_t.call(It,Le),It.dispatchEvent(ae)}},[ft,Le,Ze]),ge.createElement("input",(0,se.Z)({type:"radio","aria-hidden":!0,defaultChecked:Le},ie,{tabIndex:-1,ref:Ge,style:at(Be(Be({},Te.style),Et),{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))};function Z1(Te){return Te?"checked":"unchecked"}const W1=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],[S1,Mr]=(0,Pe.b)("RadioGroup",[be.Pc,yt]),J1=(0,be.Pc)(),r1=yt(),[Q1,ur]=S1("RadioGroup"),F1=ge.forwardRef((Te,Qe)=>{const he=Te,{__scopeRadioGroup:Le,name:Ze,"aria-labelledby":ie,defaultValue:Ge,value:ft,required:Et=!1,orientation:It,dir:mt="ltr",loop:_t=!0,onValueChange:ae}=he,ue=ht(he,["__scopeRadioGroup","name","aria-labelledby","defaultValue","value","required","orientation","dir","loop","onValueChange"]),ve=(0,Se.t0)(),Ae=ie||ve,ke=J1(Le),[pt,rt]=(0,J.T)({prop:ft,defaultProp:Ge,onChange:ae});return ge.createElement(Q1,{scope:Le,name:Ze,required:Et,value:pt,onValueChange:rt},ge.createElement(be.fC,(0,se.Z)({asChild:!0},ke,{orientation:It,dir:mt,loop:_t}),ge.createElement(je.W.div,(0,se.Z)({role:"radiogroup","aria-orientation":It,"aria-labelledby":Ae,dir:mt},ue,{ref:Qe}))))}),Ft=ge.forwardRef((Te,Qe)=>{const he=Te,{__scopeRadioGroup:Le,disabled:Ze}=he,ie=ht(he,["__scopeRadioGroup","disabled"]),Ge=ur("RadioGroupItem",Le),ft=J1(Le),Et=r1(Le),It=ge.useRef(null),mt=(0,He.e)(Qe,It),_t=Ge.value===ie.value,ae=ge.useRef(!1);return ge.useEffect(()=>{const ue=Ae=>{W1.includes(Ae.key)&&(ae.current=!0)},ve=()=>ae.current=!1;return document.addEventListener("keydown",ue),document.addEventListener("keyup",ve),()=>{document.removeEventListener("keydown",ue),document.removeEventListener("keyup",ve)}},[]),ge.createElement(be.ck,(0,se.Z)({asChild:!0},ft,{focusable:!Ze,active:_t}),ge.createElement(s1,(0,se.Z)({disabled:Ze,required:Ge.required,checked:_t},Et,ie,{name:Ge.name,ref:mt,onCheck:()=>Ge.onValueChange(ie.value),onKeyDown:(0,ye.M)(ue=>{ue.key==="Enter"&&ue.preventDefault()}),onFocus:(0,ye.M)(ie.onFocus,()=>{var ue;ae.current&&((ue=It.current)===null||ue===void 0||ue.click())})})))}),fr=ge.forwardRef((Te,Qe)=>{const he=Te,{__scopeRadioGroup:Le}=he,Ze=ht(he,["__scopeRadioGroup"]),ie=r1(Le);return ge.createElement(C1,(0,se.Z)({},ie,Ze,{ref:Qe}))}),j1=F1,Vt=Ft,Qt=fr;var z1=D(9290);const n1={Root:(0,z1.zo)(j1,{display:"flex",alignItems:"center"}),Item:(0,z1.zo)(Vt,{bg:"$white",width:"$8",height:"$8",border:"1px solid $brandDefault",cursor:"pointer",borderRadius:"$round","&:focus":{boxShadow:"none",outline:"none"},'&[data-state="checked"]':{borderWidth:"$space$2"}}),Indicator:(0,z1.zo)(Qt,{bg:"$brandDefault"})}},8651:(ct,ce,D)=>{"use strict";D.d(ce,{i:()=>_t});var h=D(4897),W=D(8160),N=D(8584),J=D(3118),be=D(5939),je=D(5859),Pe=D(6829),He=D(440),Se=D(8841),ye=D(4135),ge=D(9600);function se(ae,[ue,ve]){return Math.min(ve,Math.max(ue,ae))}var ee=D(8886),Ce=Object.defineProperty,ne=Object.defineProperties,Ue=Object.getOwnPropertyDescriptors,Ke=Object.getOwnPropertySymbols,$e=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,Be=(ae,ue,ve)=>ue in ae?Ce(ae,ue,{enumerable:!0,configurable:!0,writable:!0,value:ve}):ae[ue]=ve,at=(ae,ue)=>{for(var ve in ue||(ue={}))$e.call(ue,ve)&&Be(ae,ve,ue[ve]);if(Ke)for(var ve of Ke(ue))Xe.call(ue,ve)&&Be(ae,ve,ue[ve]);return ae},ht=(ae,ue)=>ne(ae,Ue(ue)),Je=(ae,ue)=>{var ve={};for(var Ae in ae)$e.call(ae,Ae)&&ue.indexOf(Ae)<0&&(ve[Ae]=ae[Ae]);if(ae!=null&&Ke)for(var Ae of Ke(ae))ue.indexOf(Ae)<0&&Xe.call(ae,Ae)&&(ve[Ae]=ae[Ae]);return ve};const yt=["PageUp","PageDown"],ot=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Wt={ltr:["ArrowDown","Home","ArrowLeft","PageDown"],rtl:["ArrowDown","Home","ArrowRight","PageDown"]},[s1,C1,L1]=(0,N.B)("Slider"),[Z1,W1]=(0,Se.b)("Slider",[L1]),[S1,Mr]=Z1("Slider"),J1=W.forwardRef((ae,ue)=>{const ve=ae,{name:Ae,min:ke=0,max:pt=100,step:rt=1,orientation:Pt="horizontal",disabled:Lt=!1,minStepsBetweenThumbs:o1=0,defaultValue:a1=[ke],value:Gt,onValueChange:dt=()=>{}}=ve,$t=Je(ve,["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange"]),[zt,l1]=W.useState(null),er=(0,ye.e)(ue,Ut=>l1(Ut)),Zt=W.useRef(new Set),Dt=W.useRef(0),hr=Pt==="horizontal",tr=!zt||Boolean(zt.closest("form")),U1=hr?ur:F1,[pr=[],rr]=(0,He.T)({prop:Gt,defaultProp:a1,onChange:Ut=>{var f1;(f1=[...Zt.current][Dt.current])===null||f1===void 0||f1.focus(),dt(Ut)}});function Ir(Ut,f1){const Pr=function(R1){return(String(R1).split(".")[1]||"").length}(rt),m1=function(R1,N1){const K1=Math.pow(10,N1);return Math.round(R1*K1)/K1}(Math.round((Ut-ke)/rt)*rt+ke,Pr),Ar=se(m1,[ke,pt]);rr((R1=[])=>{const N1=function(K1=[],nr,T1){const vr=[...K1];return vr[T1]=nr,vr.sort((Zr,gr)=>Zr-gr)}(R1,Ar,f1);return function(K1,nr){if(nr>0){const T1=function(vr){return vr.slice(0,-1).map((Zr,gr)=>vr[gr+1]-Zr)}(K1);return Math.min(...T1)>=nr}return!0}(N1,o1*rt)?(Dt.current=N1.indexOf(Ar),String(N1)===String(R1)?R1:N1):R1})}return W.createElement(S1,{scope:ae.__scopeSlider,disabled:Lt,min:ke,max:pt,valueIndexToChangeRef:Dt,thumbs:Zt.current,values:pr,orientation:Pt},W.createElement(s1.Provider,{scope:ae.__scopeSlider},W.createElement(s1.Slot,{scope:ae.__scopeSlider},W.createElement(U1,(0,ee.Z)({"aria-disabled":Lt,"data-disabled":Lt?"":void 0},$t,{ref:er,min:ke,max:pt,onSlideStart:Lt?void 0:function(Ut){Ir(Ut,function(f1,Pr){if(f1.length===1)return 0;const m1=f1.map(R1=>Math.abs(R1-Pr)),Ar=Math.min(...m1);return m1.indexOf(Ar)}(pr,Ut))},onSlideMove:Lt?void 0:function(Ut){Ir(Ut,Dt.current)},onHomeKeyDown:()=>!Lt&&Ir(ke,0),onEndKeyDown:()=>!Lt&&Ir(pt,pr.length-1),onStepKeyDown:({event:Ut,direction:f1})=>{if(!Lt){const Pr=yt.includes(Ut.key)||Ut.shiftKey&&ot.includes(Ut.key)?10:1,m1=Dt.current;Ir(pr[m1]+rt*Pr*f1,m1)}}})))),tr&&pr.map((Ut,f1)=>W.createElement(z1,{key:f1,name:Ae?Ae+(pr.length>1?"[]":""):void 0,value:Ut})))}),[r1,Q1]=Z1("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),ur=W.forwardRef((ae,ue)=>{const ve=ae,{min:Ae,max:ke,dir:pt,onSlideStart:rt,onSlideMove:Pt,onStepKeyDown:Lt}=ve,o1=Je(ve,["min","max","dir","onSlideStart","onSlideMove","onStepKeyDown"]),[a1,Gt]=W.useState(null),dt=(0,ye.e)(ue,Zt=>Gt(Zt)),$t=W.useRef(),zt=(0,Pe.g)(a1,pt),l1=zt==="ltr";function er(Zt){const Dt=$t.current||a1.getBoundingClientRect(),hr=Te([0,Dt.width],l1?[Ae,ke]:[ke,Ae]);return $t.current=Dt,hr(Zt-Dt.left)}return W.createElement(r1,{scope:ae.__scopeSlider,startEdge:l1?"left":"right",endEdge:l1?"right":"left",direction:l1?1:-1,size:"width"},W.createElement(Ft,(0,ee.Z)({"data-orientation":"horizontal"},o1,{ref:dt,style:ht(at({},o1.style),{"--radix-slider-thumb-transform":"translateX(-50%)"}),onSlideStart:Zt=>{const Dt=er(Zt.clientX);rt==null||rt(Dt)},onSlideMove:Zt=>{const Dt=er(Zt.clientX);Pt==null||Pt(Dt)},onSlideEnd:()=>$t.current=void 0,onStepKeyDown:Zt=>{const Dt=Wt[zt].includes(Zt.key);Lt==null||Lt({event:Zt,direction:Dt?-1:1})}})))}),F1=W.forwardRef((ae,ue)=>{const ve=ae,{min:Ae,max:ke,onSlideStart:pt,onSlideMove:rt,onStepKeyDown:Pt}=ve,Lt=Je(ve,["min","max","onSlideStart","onSlideMove","onStepKeyDown"]),o1=W.useRef(null),a1=(0,ye.e)(ue,o1),Gt=W.useRef();function dt($t){const zt=Gt.current||o1.current.getBoundingClientRect(),l1=Te([0,zt.height],[ke,Ae]);return Gt.current=zt,l1($t-zt.top)}return W.createElement(r1,{scope:ae.__scopeSlider,startEdge:"bottom",endEdge:"top",size:"height",direction:1},W.createElement(Ft,(0,ee.Z)({"data-orientation":"vertical"},Lt,{ref:a1,style:ht(at({},Lt.style),{"--radix-slider-thumb-transform":"translateY(50%)"}),onSlideStart:$t=>{const zt=dt($t.clientY);pt==null||pt(zt)},onSlideMove:$t=>{const zt=dt($t.clientY);rt==null||rt(zt)},onSlideEnd:()=>Gt.current=void 0,onStepKeyDown:$t=>{const zt=Wt.ltr.includes($t.key);Pt==null||Pt({event:$t,direction:zt?-1:1})}})))}),Ft=W.forwardRef((ae,ue)=>{const ve=ae,{__scopeSlider:Ae,onSlideStart:ke,onSlideMove:pt,onSlideEnd:rt,onHomeKeyDown:Pt,onEndKeyDown:Lt,onStepKeyDown:o1}=ve,a1=Je(ve,["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"]),Gt=Mr("Slider",Ae);return W.createElement(J.W.span,(0,ee.Z)({},a1,{ref:ue,onKeyDown:(0,ge.M)(ae.onKeyDown,dt=>{dt.key==="Home"?(Pt(dt),dt.preventDefault()):dt.key==="End"?(Lt(dt),dt.preventDefault()):yt.concat(ot).includes(dt.key)&&(o1(dt),dt.preventDefault())}),onPointerDown:(0,ge.M)(ae.onPointerDown,dt=>{const $t=dt.target;$t.setPointerCapture(dt.pointerId),dt.preventDefault(),Gt.thumbs.has($t)?$t.focus():ke(dt)}),onPointerMove:(0,ge.M)(ae.onPointerMove,dt=>{dt.target.hasPointerCapture(dt.pointerId)&&pt(dt)}),onPointerUp:(0,ge.M)(ae.onPointerUp,dt=>{const $t=dt.target;$t.hasPointerCapture(dt.pointerId)&&($t.releasePointerCapture(dt.pointerId),rt(dt))})}))}),fr=W.forwardRef((ae,ue)=>{const ve=ae,{__scopeSlider:Ae}=ve,ke=Je(ve,["__scopeSlider"]),pt=Mr("SliderTrack",Ae);return W.createElement(J.W.span,(0,ee.Z)({"data-disabled":pt.disabled?"":void 0,"data-orientation":pt.orientation},ke,{ref:ue}))}),j1=W.forwardRef((ae,ue)=>{const ve=ae,{__scopeSlider:Ae}=ve,ke=Je(ve,["__scopeSlider"]),pt=Mr("SliderRange",Ae),rt=Q1("SliderRange",Ae),Pt=W.useRef(null),Lt=(0,ye.e)(ue,Pt),o1=pt.values.length,a1=pt.values.map($t=>n1($t,pt.min,pt.max)),Gt=o1>1?Math.min(...a1):0,dt=100-Math.max(...a1);return W.createElement(J.W.span,(0,ee.Z)({"data-orientation":pt.orientation,"data-disabled":pt.disabled?"":void 0},ke,{ref:Lt,style:ht(at({},ae.style),{[rt.startEdge]:Gt+"%",[rt.endEdge]:dt+"%"})}))}),Vt=W.forwardRef((ae,ue)=>{const ve=C1(ae.__scopeSlider),[Ae,ke]=W.useState(null),pt=(0,ye.e)(ue,Pt=>ke(Pt)),rt=W.useMemo(()=>Ae?ve().findIndex(Pt=>Pt.ref.current===Ae):-1,[ve,Ae]);return W.createElement(Qt,(0,ee.Z)({},ae,{ref:pt,index:rt}))}),Qt=W.forwardRef((ae,ue)=>{const ve=ae,{__scopeSlider:Ae,index:ke}=ve,pt=Je(ve,["__scopeSlider","index"]),rt=Mr("SliderThumb",Ae),Pt=Q1("SliderThumb",Ae),[Lt,o1]=W.useState(null),a1=(0,ye.e)(ue,Zt=>o1(Zt)),Gt=(0,be.t)(Lt),dt=rt.values[ke],$t=dt===void 0?0:n1(dt,rt.min,rt.max),zt=function(Zt,Dt){return Dt>2?`Value ${Zt+1} of ${Dt}`:Dt===2?["Minimum","Maximum"][Zt]:void 0}(ke,rt.values.length),l1=Gt==null?void 0:Gt[Pt.size],er=l1?function(Zt,Dt,hr){const tr=Zt/2,U1=Te([0,50],[0,tr]);return(tr-U1(Dt)*hr)*hr}(l1,$t,Pt.direction):0;return W.useEffect(()=>{if(Lt)return rt.thumbs.add(Lt),()=>{rt.thumbs.delete(Lt)}},[Lt,rt.thumbs]),W.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[Pt.startEdge]:`calc(${$t}% + ${er}px)`}},W.createElement(s1.ItemSlot,{scope:ae.__scopeSlider},W.createElement(J.W.span,(0,ee.Z)({role:"slider","aria-label":ae["aria-label"]||zt,"aria-valuemin":rt.min,"aria-valuenow":dt,"aria-valuemax":rt.max,"aria-orientation":rt.orientation,"data-orientation":rt.orientation,"data-disabled":rt.disabled?"":void 0,tabIndex:rt.disabled?void 0:0},pt,{ref:a1,style:dt===void 0?{display:"none"}:ae.style,onFocus:(0,ge.M)(ae.onFocus,()=>{rt.valueIndexToChangeRef.current=ke})}))))}),z1=ae=>{const ue=ae,{value:ve}=ue,Ae=Je(ue,["value"]),ke=W.useRef(null),pt=(0,je.D)(ve);return W.useEffect(()=>{const rt=ke.current,Pt=window.HTMLInputElement.prototype,Lt=Object.getOwnPropertyDescriptor(Pt,"value").set;if(pt!==ve&&Lt){const o1=new Event("input",{bubbles:!0});Lt.call(rt,ve),rt.dispatchEvent(o1)}},[pt,ve]),W.createElement("input",(0,ee.Z)({style:{display:"none"}},Ae,{ref:ke,defaultValue:ve}))};function n1(ae,ue,ve){return 100/(ve-ue)*(ae-ue)}function Te(ae,ue){return ve=>{if(ae[0]===ae[1]||ue[0]===ue[1])return ue[0];const Ae=(ue[1]-ue[0])/(ae[1]-ae[0]);return ue[0]+Ae*(ve-ae[0])}}const Qe=J1,he=fr,Le=j1,Ze=Vt;var ie=D(455),Ge=D(9290);const ft=(0,Ge.zo)(Qe,{position:"relative",display:"flex",alignItems:"center",userSelect:"none",touchAction:"none",width:"100%",'&[data-orientation="horizontal"]':{height:20}}),Et=(0,Ge.zo)(he,{backgroundColor:"$grayDefault",position:"relative",flexGrow:1,borderRadius:"$round",cursor:"pointer",'&[data-orientation="horizontal"]':{height:3}}),It=(0,Ge.zo)(Le,{position:"absolute",backgroundColor:"$brandDefault",borderRadius:"$round",height:"100%"}),mt=(0,Ge.zo)(Ze,{all:"unset",display:"block",width:"$8",height:"$8",backgroundColor:"$brandDefault",cursor:"pointer",boxShadow:"0 2px 10px $colors$grayDefault",borderRadius:10,"&:hover":{backgroundColor:"$brandDefault"},"&:focus":{boxShadow:"none"}}),_t=ae=>{var ue,{thumbStyles:ve}=ae,Ae=(0,h._)(ae,["thumbStyles"]);return W.createElement(ft,Object.assign({},Ae),W.createElement(Et,null,W.createElement(It,null)),W.createElement(ie.u,{title:String((ue=Ae.value)===null||ue===void 0?void 0:ue[0])},W.createElement(mt,{css:ve})))};_t.displayName="Slider"},4299:(ct,ce,D)=>{"use strict";D.d(ce,{q8:()=>se});var h=D(8160),W=D(3751),N=D(9130);const J=($e,Xe="B",Be=2)=>{if($e===0)return`0 ${Xe}`;if(!$e)return"-";const at=Be<0?0:Be,ht=["","K","M","G","T","P","E","Z","Y"].map(yt=>yt+Xe);let Je=Math.floor(Math.log($e)/Math.log(1024));return Je===0&&Je++,`${parseFloat(($e/Math.pow(1024,Je)).toFixed(at))} ${ht[Je]}`};var be=D(9290);const je=(0,be.zo)("div",{backgroundColor:"$statsBg",position:"absolute",top:"0.3rem",left:"0.3rem",zIndex:10,borderRadius:"$2",padding:"5px",fontSize:"$xs",overflowY:"auto",maxHeight:"75%",maxWidth:"85%"}),Pe=(0,be.zo)("table",{}),He=(0,be.zo)("tr",{width:"100%","& > * + *":{paddingLeft:"0.5rem"},whiteSpace:"nowrap",textAlign:"left"}),Se=(0,be.zo)("td",{color:"$textPrimary",fontWeight:400}),ye=(0,be.zo)("td",{color:"$textPrimary"}),ge={Root:je,Row:He,Label:Se,Value:ye,Table:Pe};function se({videoTrackID:$e,audioTrackID:Xe,peerID:Be}){var at,ht,Je;const yt=(0,W.p5)(N.fA.trackStatsByID(Xe)),ot=(0,W.p5)(N.fA.trackStatsByID($e)),Wt=(at=(0,W._U)((0,N.hE)(Be)))===null||at===void 0?void 0:at.downlinkQuality;return yt||ot?h.createElement(ge.Root,null,h.createElement("table",null,h.createElement("tbody",null,h.createElement(ne,{show:Ue(ot==null?void 0:ot.frameWidth),label:"Width",value:(ht=ot==null?void 0:ot.frameWidth)===null||ht===void 0?void 0:ht.toString()}),h.createElement(ne,{show:Ue(ot==null?void 0:ot.frameHeight),label:"Height",value:(Je=ot==null?void 0:ot.frameHeight)===null||Je===void 0?void 0:Je.toString()}),h.createElement(ne,{show:Ue(ot==null?void 0:ot.framesPerSecond),label:"FPS",value:`${ot==null?void 0:ot.framesPerSecond} ${Ue(ot==null?void 0:ot.framesDropped)?`(${ot==null?void 0:ot.framesDropped} dropped)`:""}`}),h.createElement(ne,{show:Ke(ot==null?void 0:ot.bitrate),label:"Bitrate(V)",value:J(ot==null?void 0:ot.bitrate,"b/s")}),h.createElement(ne,{show:Ke(yt==null?void 0:yt.bitrate),label:"Bitrate(A)",value:J(yt==null?void 0:yt.bitrate,"b/s")}),h.createElement(ne,{show:Ke(Wt),label:"Downlink",value:`${Wt}`}),h.createElement(ne,{show:Ke(ot==null?void 0:ot.codec),label:"Codec(V)",value:ot==null?void 0:ot.codec}),h.createElement(ne,{show:Ke(yt==null?void 0:yt.codec),label:"Codec(A)",value:yt==null?void 0:yt.codec}),h.createElement(ee,{audioTrackStats:yt,videoTrackStats:ot})))):null}const ee=({audioTrackStats:$e,videoTrackStats:Xe})=>{var Be,at;const ht=($e==null?void 0:$e.type.includes("outbound"))||(Xe==null?void 0:Xe.type.includes("outbound")),Je=ht?$e==null?void 0:$e.remote:$e,yt=ht?Xe==null?void 0:Xe.remote:Xe;return h.createElement(h.Fragment,null,h.createElement(Ce,{label:"Packet Loss(V)",stats:yt}),h.createElement(Ce,{label:"Packet Loss(A)",stats:Je}),h.createElement(ne,{show:Ke(yt==null?void 0:yt.jitter),label:"Jitter(V)",value:(Be=yt==null?void 0:yt.jitter)===null||Be===void 0?void 0:Be.toFixed(4)}),h.createElement(ne,{show:Ke(Je==null?void 0:Je.jitter),label:"Jitter(A)",value:(at=Je==null?void 0:Je.jitter)===null||at===void 0?void 0:at.toFixed(4)}))},Ce=({stats:$e,label:Xe})=>{const Be=(($e==null?void 0:$e.packetsLostRate)?$e.packetsLostRate.toFixed(2):0)+"/s";return h.createElement(ne,{show:Ue($e==null?void 0:$e.packetsLost),label:Xe,value:`${$e==null?void 0:$e.packetsLost}(${Be})`})},ne=h.memo(({label:$e="",value:Xe="",show:Be=!0})=>h.createElement(h.Fragment,null,Be?h.createElement(ge.Row,null,h.createElement(ge.Label,null,$e),Xe===""?h.createElement(ge.Value,null):h.createElement(ge.Value,null,Xe)):null));function Ue($e){return Ke($e)&&$e!==0}function Ke($e){return $e!=null}},8414:(ct,ce,D)=>{"use strict";D.d(ce,{R:()=>ge});var h=D(6811),W=D(9290),N=D(5943),J=D(3764);const be=h.fC,je=(0,W.zo)(h.xz,Object.assign(Object.assign({position:"absolute",top:"10px",right:"10px",zIndex:20,width:"36px",height:"36px",color:"white",borderRadius:"$round",backgroundColor:"$menuBg"},J._),{"&:not([disabled]):focus":{outline:"none",boxShadow:"0 0 0 3px $colors$brandLight"}})),Pe=(0,W.zo)(h.VY,Object.assign({backgroundColor:"$menuBg",padding:"10px 0px",display:"flex",flexDirection:"column",borderRadius:"12px"},N.kp)),He={fontSize:"$sm",color:"$textPrimary",display:"flex",alignItems:"center",padding:"8px 12px",width:"100%"},Se=(0,W.zo)("button",Object.assign(Object.assign({},He),{height:"40px","&:hover":{backgroundColor:"$menuBg"},"&:focus":{outline:"none"},"& > * + *":{marginRight:"0",marginLeft:"0.5rem"}})),ye=(0,W.zo)("div",Object.assign(Object.assign({},He),{alignItems:"start",flexDirection:"column",marginBottom:"0"}));(0,W.zo)("div",{display:"flex","& > * + *":{marginRight:"0",marginLeft:"0.5rem"}});const ge={Root:be,Trigger:je,Content:Pe,ItemButton:Se,VolumeItem:ye,RemoveItem:(0,W.zo)(Se,{color:"$error",borderTop:"1px solid $borderLight"})}},8613:(ct,ce,D)=>{"use strict";D.d(ce,{d:()=>W});var h=D(9290);const W={Root:(0,h.zo)("div",{height:"100%",width:"100%",display:"flex",flexDirection:"column"}),Container:(0,h.zo)("div",{height:"100%",width:"100%",position:"relative",display:"flex",alignItems:"center",overflow:"hidden"}),View:(0,h.zo)("div",{height:"100%",width:"100%",position:"absolute",display:"flex",placeContent:"center",flexWrap:"wrap",alignItems:"center"})}},8534:(ct,ce,D)=>{"use strict";D.d(ce,{I:()=>h});const h=(W,N)=>W===N?0:W+1===N?"-100%":W-1===N?"100%":W<N?"-200%":"200%"},6811:(ct,ce,D)=>{"use strict";D.d(ce,{J2:()=>S1,fC:()=>Vt,xz:()=>z1,VY:()=>n1});var h=D(1616),W=D(789),N=D(1765),J=D(3118),be=D(1855),je=D(6874),Pe=D(6280),He=D(1632),Se=D(4593),ye=D(2064),ge=D(440),se=D(8841),ee=D(4135),Ce=D(9600),ne=D(8160),Ue=D(8886),Ke=Object.defineProperty,$e=Object.defineProperties,Xe=Object.getOwnPropertyDescriptors,Be=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable,Je=(he,Le,Ze)=>Le in he?Ke(he,Le,{enumerable:!0,configurable:!0,writable:!0,value:Ze}):he[Le]=Ze,yt=(he,Le)=>{for(var Ze in Le||(Le={}))at.call(Le,Ze)&&Je(he,Ze,Le[Ze]);if(Be)for(var Ze of Be(Le))ht.call(Le,Ze)&&Je(he,Ze,Le[Ze]);return he},ot=(he,Le)=>$e(he,Xe(Le)),Wt=(he,Le)=>{var Ze={};for(var ie in he)at.call(he,ie)&&Le.indexOf(ie)<0&&(Ze[ie]=he[ie]);if(he!=null&&Be)for(var ie of Be(he))Le.indexOf(ie)<0&&ht.call(he,ie)&&(Ze[ie]=he[ie]);return Ze};const[s1,C1]=(0,se.b)("Popover",[ye.D7]),L1=(0,ye.D7)(),[Z1,W1]=s1("Popover"),S1=he=>{const{__scopePopover:Le,children:Ze,open:ie,defaultOpen:Ge,onOpenChange:ft,modal:Et=!1}=he,It=L1(Le),mt=ne.useRef(null),[_t,ae]=ne.useState(!1),[ue=!1,ve]=(0,ge.T)({prop:ie,defaultProp:Ge,onChange:ft});return ne.createElement(ye.fC,It,ne.createElement(Z1,{scope:Le,contentId:(0,N.M)(),triggerRef:mt,open:ue,onOpenChange:ve,onOpenToggle:ne.useCallback(()=>ve(Ae=>!Ae),[ve]),hasCustomAnchor:_t,onCustomAnchorAdd:ne.useCallback(()=>ae(!0),[]),onCustomAnchorRemove:ne.useCallback(()=>ae(!1),[]),modal:Et},Ze))},Mr=null,J1=ne.forwardRef((he,Le)=>{const Ze=he,{__scopePopover:ie}=Ze,Ge=Wt(Ze,["__scopePopover"]),ft=W1("PopoverTrigger",ie),Et=L1(ie),It=(0,ee.e)(Le,ft.triggerRef),mt=ne.createElement(J.W.button,(0,Ue.Z)({type:"button","aria-haspopup":"dialog","aria-expanded":ft.open,"aria-controls":ft.contentId,"data-state":j1(ft.open)},Ge,{ref:It,onClick:(0,Ce.M)(he.onClick,ft.onOpenToggle)}));return ft.hasCustomAnchor?mt:ne.createElement(ye.ee,(0,Ue.Z)({asChild:!0},Et),mt)}),r1=ne.forwardRef((he,Le)=>{const Ze=he,{forceMount:ie}=Ze,Ge=Wt(Ze,["forceMount"]),ft=W1("PopoverContent",he.__scopePopover);return ne.createElement(be.z,{present:ie||ft.open},ft.modal?ne.createElement(Q1,(0,Ue.Z)({},Ge,{ref:Le})):ne.createElement(ur,(0,Ue.Z)({},Ge,{ref:Le})))}),Q1=ne.forwardRef((he,Le)=>{const Ze=he,{allowPinchZoom:ie,portalled:Ge=!0}=Ze,ft=Wt(Ze,["allowPinchZoom","portalled"]),Et=W1("PopoverContent",he.__scopePopover),It=ne.useRef(null),mt=(0,ee.e)(Le,It),_t=ne.useRef(!1);ne.useEffect(()=>{const ue=It.current;if(ue)return(0,h.R)(ue)},[]);const ae=Ge?Pe.h_:ne.Fragment;return ne.createElement(ae,null,ne.createElement(W.Z,{allowPinchZoom:ie},ne.createElement(F1,(0,Ue.Z)({},ft,{ref:mt,trapFocus:Et.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,Ce.M)(he.onCloseAutoFocus,ue=>{var ve;ue.preventDefault(),_t.current||(ve=Et.triggerRef.current)===null||ve===void 0||ve.focus()}),onPointerDownOutside:(0,Ce.M)(he.onPointerDownOutside,ue=>{const ve=ue.detail.originalEvent,Ae=ve.button===0&&ve.ctrlKey===!0,ke=ve.button===2||Ae;_t.current=ke},{checkForDefaultPrevented:!1}),onFocusOutside:(0,Ce.M)(he.onFocusOutside,ue=>ue.preventDefault(),{checkForDefaultPrevented:!1})}))))}),ur=ne.forwardRef((he,Le)=>{const Ze=he,{portalled:ie=!0}=Ze,Ge=Wt(Ze,["portalled"]),ft=W1("PopoverContent",he.__scopePopover),Et=ne.useRef(!1),It=ie?Pe.h_:ne.Fragment;return ne.createElement(It,null,ne.createElement(F1,(0,Ue.Z)({},Ge,{ref:Le,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:mt=>{var _t,ae;(_t=he.onCloseAutoFocus)===null||_t===void 0||_t.call(he,mt),mt.defaultPrevented||(Et.current||(ae=ft.triggerRef.current)===null||ae===void 0||ae.focus(),mt.preventDefault()),Et.current=!1},onInteractOutside:mt=>{var _t,ae;(_t=he.onInteractOutside)===null||_t===void 0||_t.call(he,mt),mt.defaultPrevented||(Et.current=!0);const ue=mt.target;((ae=ft.triggerRef.current)===null||ae===void 0?void 0:ae.contains(ue))&&mt.preventDefault()}})))}),F1=ne.forwardRef((he,Le)=>{const Ze=he,{__scopePopover:ie,trapFocus:Ge,onOpenAutoFocus:ft,onCloseAutoFocus:Et,disableOutsidePointerEvents:It,onEscapeKeyDown:mt,onPointerDownOutside:_t,onFocusOutside:ae,onInteractOutside:ue}=Ze,ve=Wt(Ze,["__scopePopover","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"]),Ae=W1("PopoverContent",ie),ke=L1(ie);return(0,je.EW)(),ne.createElement(He.M,{asChild:!0,loop:!0,trapped:Ge,onMountAutoFocus:ft,onUnmountAutoFocus:Et},ne.createElement(Se.XB,{asChild:!0,disableOutsidePointerEvents:It,onInteractOutside:ue,onEscapeKeyDown:mt,onPointerDownOutside:_t,onFocusOutside:ae,onDismiss:()=>Ae.onOpenChange(!1)},ne.createElement(ye.VY,(0,Ue.Z)({"data-state":j1(Ae.open),role:"dialog",id:Ae.contentId},ke,ve,{ref:Le,style:ot(yt({},ve.style),{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)"})}))))}),Ft=null,fr=null;function j1(he){return he?"open":"closed"}const Vt=S1,Qt=null,z1=J1,n1=r1,Te=null,Qe=null},108:ct=>{/*!
 * Pusher JavaScript Library v7.0.6
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(D,h){ct.exports=h()})(window,function(){return function(ce){var D={};function h(W){if(D[W])return D[W].exports;var N=D[W]={i:W,l:!1,exports:{}};return ce[W].call(N.exports,N,N.exports,h),N.l=!0,N.exports}return h.m=ce,h.c=D,h.d=function(W,N,J){h.o(W,N)||Object.defineProperty(W,N,{enumerable:!0,get:J})},h.r=function(W){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(W,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(W,"__esModule",{value:!0})},h.t=function(W,N){if(N&1&&(W=h(W)),N&8||N&4&&typeof W=="object"&&W&&W.__esModule)return W;var J=Object.create(null);if(h.r(J),Object.defineProperty(J,"default",{enumerable:!0,value:W}),N&2&&typeof W!="string")for(var be in W)h.d(J,be,function(je){return W[je]}.bind(null,be));return J},h.n=function(W){var N=W&&W.__esModule?function(){return W.default}:function(){return W};return h.d(N,"a",N),N},h.o=function(W,N){return Object.prototype.hasOwnProperty.call(W,N)},h.p="",h(h.s=2)}([function(ce,D,h){"use strict";var W=this&&this.__extends||function(){var se=function(ee,Ce){return se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ne,Ue){ne.__proto__=Ue}||function(ne,Ue){for(var Ke in Ue)Ue.hasOwnProperty(Ke)&&(ne[Ke]=Ue[Ke])},se(ee,Ce)};return function(ee,Ce){se(ee,Ce);function ne(){this.constructor=ee}ee.prototype=Ce===null?Object.create(Ce):(ne.prototype=Ce.prototype,new ne)}}();Object.defineProperty(D,"__esModule",{value:!0});var N=256,J=function(){function se(ee){ee===void 0&&(ee="="),this._paddingCharacter=ee}return se.prototype.encodedLength=function(ee){return this._paddingCharacter?(ee+2)/3*4|0:(ee*8+5)/6|0},se.prototype.encode=function(ee){for(var Ce="",ne=0;ne<ee.length-2;ne+=3){var Ue=ee[ne]<<16|ee[ne+1]<<8|ee[ne+2];Ce+=this._encodeByte(Ue>>>3*6&63),Ce+=this._encodeByte(Ue>>>2*6&63),Ce+=this._encodeByte(Ue>>>1*6&63),Ce+=this._encodeByte(Ue>>>0*6&63)}var Ke=ee.length-ne;if(Ke>0){var Ue=ee[ne]<<16|(Ke===2?ee[ne+1]<<8:0);Ce+=this._encodeByte(Ue>>>3*6&63),Ce+=this._encodeByte(Ue>>>2*6&63),Ke===2?Ce+=this._encodeByte(Ue>>>1*6&63):Ce+=this._paddingCharacter||"",Ce+=this._paddingCharacter||""}return Ce},se.prototype.maxDecodedLength=function(ee){return this._paddingCharacter?ee/4*3|0:(ee*6+7)/8|0},se.prototype.decodedLength=function(ee){return this.maxDecodedLength(ee.length-this._getPaddingLength(ee))},se.prototype.decode=function(ee){if(ee.length===0)return new Uint8Array(0);for(var Ce=this._getPaddingLength(ee),ne=ee.length-Ce,Ue=new Uint8Array(this.maxDecodedLength(ne)),Ke=0,$e=0,Xe=0,Be=0,at=0,ht=0,Je=0;$e<ne-4;$e+=4)Be=this._decodeChar(ee.charCodeAt($e+0)),at=this._decodeChar(ee.charCodeAt($e+1)),ht=this._decodeChar(ee.charCodeAt($e+2)),Je=this._decodeChar(ee.charCodeAt($e+3)),Ue[Ke++]=Be<<2|at>>>4,Ue[Ke++]=at<<4|ht>>>2,Ue[Ke++]=ht<<6|Je,Xe|=Be&N,Xe|=at&N,Xe|=ht&N,Xe|=Je&N;if($e<ne-1&&(Be=this._decodeChar(ee.charCodeAt($e)),at=this._decodeChar(ee.charCodeAt($e+1)),Ue[Ke++]=Be<<2|at>>>4,Xe|=Be&N,Xe|=at&N),$e<ne-2&&(ht=this._decodeChar(ee.charCodeAt($e+2)),Ue[Ke++]=at<<4|ht>>>2,Xe|=ht&N),$e<ne-3&&(Je=this._decodeChar(ee.charCodeAt($e+3)),Ue[Ke++]=ht<<6|Je,Xe|=Je&N),Xe!==0)throw new Error("Base64Coder: incorrect characters for decoding");return Ue},se.prototype._encodeByte=function(ee){var Ce=ee;return Ce+=65,Ce+=25-ee>>>8&0-65-26+97,Ce+=51-ee>>>8&26-97-52+48,Ce+=61-ee>>>8&52-48-62+43,Ce+=62-ee>>>8&62-43-63+47,String.fromCharCode(Ce)},se.prototype._decodeChar=function(ee){var Ce=N;return Ce+=(42-ee&ee-44)>>>8&-N+ee-43+62,Ce+=(46-ee&ee-48)>>>8&-N+ee-47+63,Ce+=(47-ee&ee-58)>>>8&-N+ee-48+52,Ce+=(64-ee&ee-91)>>>8&-N+ee-65+0,Ce+=(96-ee&ee-123)>>>8&-N+ee-97+26,Ce},se.prototype._getPaddingLength=function(ee){var Ce=0;if(this._paddingCharacter){for(var ne=ee.length-1;ne>=0&&ee[ne]===this._paddingCharacter;ne--)Ce++;if(ee.length<4||Ce>2)throw new Error("Base64Coder: incorrect padding")}return Ce},se}();D.Coder=J;var be=new J;function je(se){return be.encode(se)}D.encode=je;function Pe(se){return be.decode(se)}D.decode=Pe;var He=function(se){W(ee,se);function ee(){return se!==null&&se.apply(this,arguments)||this}return ee.prototype._encodeByte=function(Ce){var ne=Ce;return ne+=65,ne+=25-Ce>>>8&0-65-26+97,ne+=51-Ce>>>8&26-97-52+48,ne+=61-Ce>>>8&52-48-62+45,ne+=62-Ce>>>8&62-45-63+95,String.fromCharCode(ne)},ee.prototype._decodeChar=function(Ce){var ne=N;return ne+=(44-Ce&Ce-46)>>>8&-N+Ce-45+62,ne+=(94-Ce&Ce-96)>>>8&-N+Ce-95+63,ne+=(47-Ce&Ce-58)>>>8&-N+Ce-48+52,ne+=(64-Ce&Ce-91)>>>8&-N+Ce-65+0,ne+=(96-Ce&Ce-123)>>>8&-N+Ce-97+26,ne},ee}(J);D.URLSafeCoder=He;var Se=new He;function ye(se){return Se.encode(se)}D.encodeURLSafe=ye;function ge(se){return Se.decode(se)}D.decodeURLSafe=ge,D.encodedLength=function(se){return be.encodedLength(se)},D.maxDecodedLength=function(se){return be.maxDecodedLength(se)},D.decodedLength=function(se){return be.decodedLength(se)}},function(ce,D,h){"use strict";Object.defineProperty(D,"__esModule",{value:!0});var W="utf8: invalid string",N="utf8: invalid source encoding";function J(Pe){for(var He=new Uint8Array(be(Pe)),Se=0,ye=0;ye<Pe.length;ye++){var ge=Pe.charCodeAt(ye);ge<128?He[Se++]=ge:ge<2048?(He[Se++]=192|ge>>6,He[Se++]=128|ge&63):ge<55296?(He[Se++]=224|ge>>12,He[Se++]=128|ge>>6&63,He[Se++]=128|ge&63):(ye++,ge=(ge&1023)<<10,ge|=Pe.charCodeAt(ye)&1023,ge+=65536,He[Se++]=240|ge>>18,He[Se++]=128|ge>>12&63,He[Se++]=128|ge>>6&63,He[Se++]=128|ge&63)}return He}D.encode=J;function be(Pe){for(var He=0,Se=0;Se<Pe.length;Se++){var ye=Pe.charCodeAt(Se);if(ye<128)He+=1;else if(ye<2048)He+=2;else if(ye<55296)He+=3;else if(ye<=57343){if(Se>=Pe.length-1)throw new Error(W);Se++,He+=4}else throw new Error(W)}return He}D.encodedLength=be;function je(Pe){for(var He=[],Se=0;Se<Pe.length;Se++){var ye=Pe[Se];if(ye&128){var ge=void 0;if(ye<224){if(Se>=Pe.length)throw new Error(N);var se=Pe[++Se];if((se&192)!==128)throw new Error(N);ye=(ye&31)<<6|se&63,ge=128}else if(ye<240){if(Se>=Pe.length-1)throw new Error(N);var se=Pe[++Se],ee=Pe[++Se];if((se&192)!==128||(ee&192)!==128)throw new Error(N);ye=(ye&15)<<12|(se&63)<<6|ee&63,ge=2048}else if(ye<248){if(Se>=Pe.length-2)throw new Error(N);var se=Pe[++Se],ee=Pe[++Se],Ce=Pe[++Se];if((se&192)!==128||(ee&192)!==128||(Ce&192)!==128)throw new Error(N);ye=(ye&15)<<18|(se&63)<<12|(ee&63)<<6|Ce&63,ge=65536}else throw new Error(N);if(ye<ge||ye>=55296&&ye<=57343)throw new Error(N);if(ye>=65536){if(ye>1114111)throw new Error(N);ye-=65536,He.push(String.fromCharCode(55296|ye>>10)),ye=56320|ye&1023}}He.push(String.fromCharCode(ye))}return He.join("")}D.decode=je},function(ce,D,h){ce.exports=h(3).default},function(ce,D,h){"use strict";h.r(D);var W=function(){function x(w,E){this.lastId=0,this.prefix=w,this.name=E}return x.prototype.create=function(w){this.lastId++;var E=this.lastId,I=this.prefix+E,O=this.name+"["+E+"]",A=!1,Q=function(){A||(w.apply(null,arguments),A=!0)};return this[E]=Q,{number:E,id:I,name:O,callback:Q}},x.prototype.remove=function(w){delete this[w.number]},x}(),N=new W("_pusher_script_","Pusher.ScriptReceivers"),J={VERSION:"7.0.6",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,cluster:"mt1",cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},be=J,je=function(){function x(w){this.options=w,this.receivers=w.receivers||N,this.loading={}}return x.prototype.load=function(w,E,I){var O=this;if(O.loading[w]&&O.loading[w].length>0)O.loading[w].push(I);else{O.loading[w]=[I];var A=vt.createScriptRequest(O.getPath(w,E)),Q=O.receivers.create(function(xe){if(O.receivers.remove(Q),O.loading[w]){var et=O.loading[w];delete O.loading[w];for(var xt=function(x1){x1||A.cleanup()},c1=0;c1<et.length;c1++)et[c1](xe,xt)}});A.send(Q)}},x.prototype.getRoot=function(w){var E,I=vt.getDocument().location.protocol;return w&&w.useTLS||I==="https:"?E=this.options.cdn_https:E=this.options.cdn_http,E.replace(/\/*$/,"")+"/"+this.options.version},x.prototype.getPath=function(w,E){return this.getRoot(E)+"/"+w+this.options.suffix+".js"},x}(),Pe=je,He=new W("_pusher_dependencies","Pusher.DependenciesReceivers"),Se=new Pe({cdn_http:be.cdn_http,cdn_https:be.cdn_https,version:be.VERSION,suffix:be.dependency_suffix,receivers:He}),ye={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/authenticating_users"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},ge=function(x){var w="See:",E=ye.urls[x];if(!E)return"";var I;return E.fullUrl?I=E.fullUrl:E.path&&(I=ye.baseUrl+E.path),I?w+" "+I:""},se={buildLogSuffix:ge},ee=function(){var x=function(w,E){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,O){I.__proto__=O}||function(I,O){for(var A in O)O.hasOwnProperty(A)&&(I[A]=O[A])},x(w,E)};return function(w,E){x(w,E);function I(){this.constructor=w}w.prototype=E===null?Object.create(E):(I.prototype=E.prototype,new I)}}(),Ce=function(x){ee(w,x);function w(E){var I=this.constructor,O=x.call(this,E)||this;return Object.setPrototypeOf(O,I.prototype),O}return w}(Error),ne=function(x){ee(w,x);function w(E){var I=this.constructor,O=x.call(this,E)||this;return Object.setPrototypeOf(O,I.prototype),O}return w}(Error),Ue=function(x){ee(w,x);function w(E){var I=this.constructor,O=x.call(this,E)||this;return Object.setPrototypeOf(O,I.prototype),O}return w}(Error),Ke=function(x){ee(w,x);function w(E){var I=this.constructor,O=x.call(this,E)||this;return Object.setPrototypeOf(O,I.prototype),O}return w}(Error),$e=function(x){ee(w,x);function w(E){var I=this.constructor,O=x.call(this,E)||this;return Object.setPrototypeOf(O,I.prototype),O}return w}(Error),Xe=function(x){ee(w,x);function w(E){var I=this.constructor,O=x.call(this,E)||this;return Object.setPrototypeOf(O,I.prototype),O}return w}(Error),Be=function(x){ee(w,x);function w(E){var I=this.constructor,O=x.call(this,E)||this;return Object.setPrototypeOf(O,I.prototype),O}return w}(Error),at=function(x){ee(w,x);function w(E,I){var O=this.constructor,A=x.call(this,I)||this;return A.status=E,Object.setPrototypeOf(A,O.prototype),A}return w}(Error),ht=function(x,w,E){var I=this,O;O=vt.createXHR(),O.open("POST",I.options.authEndpoint,!0),O.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var A in this.authOptions.headers)O.setRequestHeader(A,this.authOptions.headers[A]);return O.onreadystatechange=function(){if(O.readyState===4)if(O.status===200){var Q=void 0,xe=!1;try{Q=JSON.parse(O.responseText),xe=!0}catch{E(new at(200,"JSON returned from auth endpoint was invalid, yet status code was 200. Data was: "+O.responseText),{auth:""})}xe&&E(null,Q)}else{var et=se.buildLogSuffix("authenticationEndpoint");E(new at(O.status,"Unable to retrieve auth string from auth endpoint - "+("received status: "+O.status+" from "+I.options.authEndpoint+". ")+("Clients must be authenticated to join private or presence channels. "+et)),{auth:""})}},O.send(this.composeQuery(w)),O},Je=ht;function yt(x){return Mr(W1(x))}for(var ot=String.fromCharCode,Wt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s1={},C1=0,L1=Wt.length;C1<L1;C1++)s1[Wt.charAt(C1)]=C1;var Z1=function(x){var w=x.charCodeAt(0);return w<128?x:w<2048?ot(192|w>>>6)+ot(128|w&63):ot(224|w>>>12&15)+ot(128|w>>>6&63)+ot(128|w&63)},W1=function(x){return x.replace(/[^\x00-\x7F]/g,Z1)},S1=function(x){var w=[0,2,1][x.length%3],E=x.charCodeAt(0)<<16|(x.length>1?x.charCodeAt(1):0)<<8|(x.length>2?x.charCodeAt(2):0),I=[Wt.charAt(E>>>18),Wt.charAt(E>>>12&63),w>=2?"=":Wt.charAt(E>>>6&63),w>=1?"=":Wt.charAt(E&63)];return I.join("")},Mr=window.btoa||function(x){return x.replace(/[\s\S]{1,3}/g,S1)},J1=function(){function x(w,E,I,O){var A=this;this.clear=E,this.timer=w(function(){A.timer&&(A.timer=O(A.timer))},I)}return x.prototype.isRunning=function(){return this.timer!==null},x.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},x}(),r1=J1,Q1=function(){var x=function(w,E){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,O){I.__proto__=O}||function(I,O){for(var A in O)O.hasOwnProperty(A)&&(I[A]=O[A])},x(w,E)};return function(w,E){x(w,E);function I(){this.constructor=w}w.prototype=E===null?Object.create(E):(I.prototype=E.prototype,new I)}}();function ur(x){window.clearTimeout(x)}function F1(x){window.clearInterval(x)}var Ft=function(x){Q1(w,x);function w(E,I){return x.call(this,setTimeout,ur,E,function(O){return I(),null})||this}return w}(r1),fr=function(x){Q1(w,x);function w(E,I){return x.call(this,setInterval,F1,E,function(O){return I(),O})||this}return w}(r1),j1={now:function(){return Date.now?Date.now():new Date().valueOf()},defer:function(x){return new Ft(0,x)},method:function(x){for(var w=[],E=1;E<arguments.length;E++)w[E-1]=arguments[E];var I=Array.prototype.slice.call(arguments,1);return function(O){return O[x].apply(O,I.concat(arguments))}}},Vt=j1;function Qt(x){for(var w=[],E=1;E<arguments.length;E++)w[E-1]=arguments[E];for(var I=0;I<w.length;I++){var O=w[I];for(var A in O)O[A]&&O[A].constructor&&O[A].constructor===Object?x[A]=Qt(x[A]||{},O[A]):x[A]=O[A]}return x}function z1(){for(var x=["Pusher"],w=0;w<arguments.length;w++)typeof arguments[w]=="string"?x.push(arguments[w]):x.push(ve(arguments[w]));return x.join(" : ")}function n1(x,w){var E=Array.prototype.indexOf;if(x===null)return-1;if(E&&x.indexOf===E)return x.indexOf(w);for(var I=0,O=x.length;I<O;I++)if(x[I]===w)return I;return-1}function Te(x,w){for(var E in x)Object.prototype.hasOwnProperty.call(x,E)&&w(x[E],E,x)}function Qe(x){var w=[];return Te(x,function(E,I){w.push(I)}),w}function he(x){var w=[];return Te(x,function(E){w.push(E)}),w}function Le(x,w,E){for(var I=0;I<x.length;I++)w.call(E||window,x[I],I,x)}function Ze(x,w){for(var E=[],I=0;I<x.length;I++)E.push(w(x[I],I,x,E));return E}function ie(x,w){var E={};return Te(x,function(I,O){E[O]=w(I)}),E}function Ge(x,w){w=w||function(O){return!!O};for(var E=[],I=0;I<x.length;I++)w(x[I],I,x,E)&&E.push(x[I]);return E}function ft(x,w){var E={};return Te(x,function(I,O){(w&&w(I,O,x,E)||Boolean(I))&&(E[O]=I)}),E}function Et(x){var w=[];return Te(x,function(E,I){w.push([I,E])}),w}function It(x,w){for(var E=0;E<x.length;E++)if(w(x[E],E,x))return!0;return!1}function mt(x,w){for(var E=0;E<x.length;E++)if(!w(x[E],E,x))return!1;return!0}function _t(x){return ie(x,function(w){return typeof w=="object"&&(w=ve(w)),encodeURIComponent(yt(w.toString()))})}function ae(x){var w=ft(x,function(I){return I!==void 0}),E=Ze(Et(_t(w)),Vt.method("join","=")).join("&");return E}function ue(x){var w=[],E=[];return function I(O,A){var Q,xe,et;switch(typeof O){case"object":if(!O)return null;for(Q=0;Q<w.length;Q+=1)if(w[Q]===O)return{$ref:E[Q]};if(w.push(O),E.push(A),Object.prototype.toString.apply(O)==="[object Array]")for(et=[],Q=0;Q<O.length;Q+=1)et[Q]=I(O[Q],A+"["+Q+"]");else{et={};for(xe in O)Object.prototype.hasOwnProperty.call(O,xe)&&(et[xe]=I(O[xe],A+"["+JSON.stringify(xe)+"]"))}return et;case"number":case"string":case"boolean":return O}}(x,"$")}function ve(x){try{return JSON.stringify(x)}catch{return JSON.stringify(ue(x))}}var Ae=function(){function x(){this.globalLog=function(w){window.console&&window.console.log&&window.console.log(w)}}return x.prototype.debug=function(){for(var w=[],E=0;E<arguments.length;E++)w[E]=arguments[E];this.log(this.globalLog,w)},x.prototype.warn=function(){for(var w=[],E=0;E<arguments.length;E++)w[E]=arguments[E];this.log(this.globalLogWarn,w)},x.prototype.error=function(){for(var w=[],E=0;E<arguments.length;E++)w[E]=arguments[E];this.log(this.globalLogError,w)},x.prototype.globalLogWarn=function(w){window.console&&window.console.warn?window.console.warn(w):this.globalLog(w)},x.prototype.globalLogError=function(w){window.console&&window.console.error?window.console.error(w):this.globalLogWarn(w)},x.prototype.log=function(w){for(var E=[],I=1;I<arguments.length;I++)E[I-1]=arguments[I];var O=z1.apply(this,arguments);if(No.log)No.log(O);else if(No.logToConsole){var A=w.bind(this);A(O)}},x}(),ke=new Ae,pt=function(x,w,E){this.authOptions.headers!==void 0&&ke.warn("To send headers with the auth request, you must use AJAX, rather than JSONP.");var I=x.nextAuthCallbackID.toString();x.nextAuthCallbackID++;var O=x.getDocument(),A=O.createElement("script");x.auth_callbacks[I]=function(et){E(null,et)};var Q="Pusher.auth_callbacks['"+I+"']";A.src=this.options.authEndpoint+"?callback="+encodeURIComponent(Q)+"&"+this.composeQuery(w);var xe=O.getElementsByTagName("head")[0]||O.documentElement;xe.insertBefore(A,xe.firstChild)},rt=pt,Pt=function(){function x(w){this.src=w}return x.prototype.send=function(w){var E=this,I="Error loading "+E.src;E.script=document.createElement("script"),E.script.id=w.id,E.script.src=E.src,E.script.type="text/javascript",E.script.charset="UTF-8",E.script.addEventListener?(E.script.onerror=function(){w.callback(I)},E.script.onload=function(){w.callback(null)}):E.script.onreadystatechange=function(){(E.script.readyState==="loaded"||E.script.readyState==="complete")&&w.callback(null)},E.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(E.errorScript=document.createElement("script"),E.errorScript.id=w.id+"_error",E.errorScript.text=w.name+"('"+I+"');",E.script.async=E.errorScript.async=!1):E.script.async=!0;var O=document.getElementsByTagName("head")[0];O.insertBefore(E.script,O.firstChild),E.errorScript&&O.insertBefore(E.errorScript,E.script.nextSibling)},x.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},x}(),Lt=Pt,o1=function(){function x(w,E){this.url=w,this.data=E}return x.prototype.send=function(w){if(!this.request){var E=ae(this.data),I=this.url+"/"+w.number+"?"+E;this.request=vt.createScriptRequest(I),this.request.send(w)}},x.prototype.cleanup=function(){this.request&&this.request.cleanup()},x}(),a1=o1,Gt=function(x,w){return function(E,I){var O="http"+(w?"s":"")+"://",A=O+(x.host||x.options.host)+x.options.path,Q=vt.createJSONPRequest(A,E),xe=vt.ScriptReceivers.create(function(et,xt){N.remove(xe),Q.cleanup(),xt&&xt.host&&(x.host=xt.host),I&&I(et,xt)});Q.send(xe)}},dt={name:"jsonp",getAgent:Gt},$t=dt;function zt(x,w,E){var I=x+(w.useTLS?"s":""),O=w.useTLS?w.hostTLS:w.hostNonTLS;return I+"://"+O+E}function l1(x,w){var E="/app/"+x,I="?protocol="+be.PROTOCOL+"&client=js&version="+be.VERSION+(w?"&"+w:"");return E+I}var er={getInitial:function(x,w){var E=(w.httpPath||"")+l1(x,"flash=false");return zt("ws",w,E)}},Zt={getInitial:function(x,w){var E=(w.httpPath||"/pusher")+l1(x);return zt("http",w,E)}},Dt={getInitial:function(x,w){return zt("http",w,w.httpPath||"/pusher")},getPath:function(x,w){return l1(x)}},hr=function(){function x(){this._callbacks={}}return x.prototype.get=function(w){return this._callbacks[U1(w)]},x.prototype.add=function(w,E,I){var O=U1(w);this._callbacks[O]=this._callbacks[O]||[],this._callbacks[O].push({fn:E,context:I})},x.prototype.remove=function(w,E,I){if(!w&&!E&&!I){this._callbacks={};return}var O=w?[U1(w)]:Qe(this._callbacks);E||I?this.removeCallback(O,E,I):this.removeAllCallbacks(O)},x.prototype.removeCallback=function(w,E,I){Le(w,function(O){this._callbacks[O]=Ge(this._callbacks[O]||[],function(A){return E&&E!==A.fn||I&&I!==A.context}),this._callbacks[O].length===0&&delete this._callbacks[O]},this)},x.prototype.removeAllCallbacks=function(w){Le(w,function(E){delete this._callbacks[E]},this)},x}(),tr=hr;function U1(x){return"_"+x}var pr=function(){function x(w){this.callbacks=new tr,this.global_callbacks=[],this.failThrough=w}return x.prototype.bind=function(w,E,I){return this.callbacks.add(w,E,I),this},x.prototype.bind_global=function(w){return this.global_callbacks.push(w),this},x.prototype.unbind=function(w,E,I){return this.callbacks.remove(w,E,I),this},x.prototype.unbind_global=function(w){return w?(this.global_callbacks=Ge(this.global_callbacks||[],function(E){return E!==w}),this):(this.global_callbacks=[],this)},x.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},x.prototype.emit=function(w,E,I){for(var O=0;O<this.global_callbacks.length;O++)this.global_callbacks[O](w,E);var A=this.callbacks.get(w),Q=[];if(I?Q.push(E,I):E&&Q.push(E),A&&A.length>0)for(var O=0;O<A.length;O++)A[O].fn.apply(A[O].context||window,Q);else this.failThrough&&this.failThrough(w,E);return this},x}(),rr=pr,Ir=function(){var x=function(w,E){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,O){I.__proto__=O}||function(I,O){for(var A in O)O.hasOwnProperty(A)&&(I[A]=O[A])},x(w,E)};return function(w,E){x(w,E);function I(){this.constructor=w}w.prototype=E===null?Object.create(E):(I.prototype=E.prototype,new I)}}(),Ut=function(x){Ir(w,x);function w(E,I,O,A,Q){var xe=x.call(this)||this;return xe.initialize=vt.transportConnectionInitializer,xe.hooks=E,xe.name=I,xe.priority=O,xe.key=A,xe.options=Q,xe.state="new",xe.timeline=Q.timeline,xe.activityTimeout=Q.activityTimeout,xe.id=xe.timeline.generateUniqueID(),xe}return w.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},w.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},w.prototype.connect=function(){var E=this;if(this.socket||this.state!=="initialized")return!1;var I=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(I,this.options)}catch(O){return Vt.defer(function(){E.onError(O),E.changeState("closed")}),!1}return this.bindListeners(),ke.debug("Connecting",{transport:this.name,url:I}),this.changeState("connecting"),!0},w.prototype.close=function(){return this.socket?(this.socket.close(),!0):!1},w.prototype.send=function(E){var I=this;return this.state==="open"?(Vt.defer(function(){I.socket&&I.socket.send(E)}),!0):!1},w.prototype.ping=function(){this.state==="open"&&this.supportsPing()&&this.socket.ping()},w.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},w.prototype.onError=function(E){this.emit("error",{type:"WebSocketError",error:E}),this.timeline.error(this.buildTimelineMessage({error:E.toString()}))},w.prototype.onClose=function(E){E?this.changeState("closed",{code:E.code,reason:E.reason,wasClean:E.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},w.prototype.onMessage=function(E){this.emit("message",E)},w.prototype.onActivity=function(){this.emit("activity")},w.prototype.bindListeners=function(){var E=this;this.socket.onopen=function(){E.onOpen()},this.socket.onerror=function(I){E.onError(I)},this.socket.onclose=function(I){E.onClose(I)},this.socket.onmessage=function(I){E.onMessage(I)},this.supportsPing()&&(this.socket.onactivity=function(){E.onActivity()})},w.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},w.prototype.changeState=function(E,I){this.state=E,this.timeline.info(this.buildTimelineMessage({state:E,params:I})),this.emit(E,I)},w.prototype.buildTimelineMessage=function(E){return Qt({cid:this.id},E)},w}(rr),f1=Ut,Pr=function(){function x(w){this.hooks=w}return x.prototype.isSupported=function(w){return this.hooks.isSupported(w)},x.prototype.createConnection=function(w,E,I,O){return new f1(this.hooks,w,E,I,O)},x}(),m1=Pr,Ar=new m1({urls:er,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(vt.getWebSocketAPI())},isSupported:function(){return Boolean(vt.getWebSocketAPI())},getSocket:function(x){return vt.createWebSocket(x)}}),R1={urls:Zt,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},N1=Qt({getSocket:function(x){return vt.HTTPFactory.createStreamingSocket(x)}},R1),K1=Qt({getSocket:function(x){return vt.HTTPFactory.createPollingSocket(x)}},R1),nr={isSupported:function(){return vt.isXHRSupported()}},T1=new m1(Qt({},N1,nr)),vr=new m1(Qt({},K1,nr)),Zr={ws:Ar,xhr_streaming:T1,xhr_polling:vr},gr=Zr,ko=new m1({file:"sockjs",urls:Dt,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(x,w){return new window.SockJS(x,null,{js_path:Se.getPath("sockjs",{useTLS:w.useTLS}),ignore_null_origin:w.ignoreNullOrigin})},beforeOpen:function(x,w){x.send(JSON.stringify({path:w}))}}),on={isSupported:function(x){var w=vt.isXDRSupported(x.useTLS);return w}},Nn=new m1(Qt({},N1,on)),To=new m1(Qt({},K1,on));gr.xdr_streaming=Nn,gr.xdr_polling=To,gr.sockjs=ko;var Bo=gr,U=function(){var x=function(w,E){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,O){I.__proto__=O}||function(I,O){for(var A in O)O.hasOwnProperty(A)&&(I[A]=O[A])},x(w,E)};return function(w,E){x(w,E);function I(){this.constructor=w}w.prototype=E===null?Object.create(E):(I.prototype=E.prototype,new I)}}(),te=function(x){U(w,x);function w(){var E=x.call(this)||this,I=E;return window.addEventListener!==void 0&&(window.addEventListener("online",function(){I.emit("online")},!1),window.addEventListener("offline",function(){I.emit("offline")},!1)),E}return w.prototype.isOnline=function(){return window.navigator.onLine===void 0?!0:window.navigator.onLine},w}(rr),oe=new te,G=function(){function x(w,E,I){this.manager=w,this.transport=E,this.minPingDelay=I.minPingDelay,this.maxPingDelay=I.maxPingDelay,this.pingDelay=void 0}return x.prototype.createConnection=function(w,E,I,O){var A=this;O=Qt({},O,{activityTimeout:this.pingDelay});var Q=this.transport.createConnection(w,E,I,O),xe=null,et=function(){Q.unbind("open",et),Q.bind("closed",xt),xe=Vt.now()},xt=function(c1){if(Q.unbind("closed",xt),c1.code===1002||c1.code===1003)A.manager.reportDeath();else if(!c1.wasClean&&xe){var x1=Vt.now()-xe;x1<2*A.maxPingDelay&&(A.manager.reportDeath(),A.pingDelay=Math.max(x1/2,A.minPingDelay))}};return Q.bind("open",et),Q},x.prototype.isSupported=function(w){return this.manager.isAlive()&&this.transport.isSupported(w)},x}(),de=G,_e={decodeMessage:function(x){try{var w=JSON.parse(x.data),E=w.data;if(typeof E=="string")try{E=JSON.parse(w.data)}catch{}var I={event:w.event,channel:w.channel,data:E};return w.user_id&&(I.user_id=w.user_id),I}catch(O){throw{type:"MessageParseError",error:O,data:x.data}}},encodeMessage:function(x){return JSON.stringify(x)},processHandshake:function(x){var w=_e.decodeMessage(x);if(w.event==="pusher:connection_established"){if(!w.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:w.data.socket_id,activityTimeout:w.data.activity_timeout*1e3}}else{if(w.event==="pusher:error")return{action:this.getCloseAction(w.data),error:this.getCloseError(w.data)};throw"Invalid handshake"}},getCloseAction:function(x){return x.code<4e3?x.code>=1002&&x.code<=1004?"backoff":null:x.code===4e3?"tls_only":x.code<4100?"refused":x.code<4200?"backoff":x.code<4300?"retry":"refused"},getCloseError:function(x){return x.code!==1e3&&x.code!==1001?{type:"PusherError",data:{code:x.code,message:x.reason||x.message}}:null}},Me=_e,pe=function(){var x=function(w,E){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,O){I.__proto__=O}||function(I,O){for(var A in O)O.hasOwnProperty(A)&&(I[A]=O[A])},x(w,E)};return function(w,E){x(w,E);function I(){this.constructor=w}w.prototype=E===null?Object.create(E):(I.prototype=E.prototype,new I)}}(),ze=function(x){pe(w,x);function w(E,I){var O=x.call(this)||this;return O.id=E,O.transport=I,O.activityTimeout=I.activityTimeout,O.bindListeners(),O}return w.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},w.prototype.send=function(E){return this.transport.send(E)},w.prototype.send_event=function(E,I,O){var A={event:E,data:I};return O&&(A.channel=O),ke.debug("Event sent",A),this.send(Me.encodeMessage(A))},w.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},w.prototype.close=function(){this.transport.close()},w.prototype.bindListeners=function(){var E=this,I={message:function(A){var Q;try{Q=Me.decodeMessage(A)}catch(xe){E.emit("error",{type:"MessageParseError",error:xe,data:A.data})}if(Q!==void 0){switch(ke.debug("Event recd",Q),Q.event){case"pusher:error":E.emit("error",{type:"PusherError",data:Q.data});break;case"pusher:ping":E.emit("ping");break;case"pusher:pong":E.emit("pong");break}E.emit("message",Q)}},activity:function(){E.emit("activity")},error:function(A){E.emit("error",A)},closed:function(A){O(),A&&A.code&&E.handleCloseEvent(A),E.transport=null,E.emit("closed")}},O=function(){Te(I,function(A,Q){E.transport.unbind(Q,A)})};Te(I,function(A,Q){E.transport.bind(Q,A)})},w.prototype.handleCloseEvent=function(E){var I=Me.getCloseAction(E),O=Me.getCloseError(E);O&&this.emit("error",O),I&&this.emit(I,{action:I,error:O})},w}(rr),We=ze,Ve=function(){function x(w,E){this.transport=w,this.callback=E,this.bindListeners()}return x.prototype.close=function(){this.unbindListeners(),this.transport.close()},x.prototype.bindListeners=function(){var w=this;this.onMessage=function(E){w.unbindListeners();var I;try{I=Me.processHandshake(E)}catch(O){w.finish("error",{error:O}),w.transport.close();return}I.action==="connected"?w.finish("connected",{connection:new We(I.id,w.transport),activityTimeout:I.activityTimeout}):(w.finish(I.action,{error:I.error}),w.transport.close())},this.onClosed=function(E){w.unbindListeners();var I=Me.getCloseAction(E)||"backoff",O=Me.getCloseError(E);w.finish(I,{error:O})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},x.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},x.prototype.finish=function(w,E){this.callback(Qt({transport:this.transport,action:w},E))},x}(),Ne=Ve,Ie=function(){function x(w,E){this.channel=w;var I=E.authTransport;if(typeof vt.getAuthorizers()[I]>"u")throw"'"+I+"' is not a recognized auth transport";this.type=I,this.options=E,this.authOptions=E.auth||{}}return x.prototype.composeQuery=function(w){var E="socket_id="+encodeURIComponent(w)+"&channel_name="+encodeURIComponent(this.channel.name);for(var I in this.authOptions.params)E+="&"+encodeURIComponent(I)+"="+encodeURIComponent(this.authOptions.params[I]);return E},x.prototype.authorize=function(w,E){x.authorizers=x.authorizers||vt.getAuthorizers(),x.authorizers[this.type].call(this,vt,w,E)},x}(),wt=Ie,St=function(){function x(w,E){this.timeline=w,this.options=E||{}}return x.prototype.send=function(w,E){this.timeline.isEmpty()||this.timeline.send(vt.TimelineTransport.getAgent(this,w),E)},x}(),Nt=St,e1=function(){var x=function(w,E){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,O){I.__proto__=O}||function(I,O){for(var A in O)O.hasOwnProperty(A)&&(I[A]=O[A])},x(w,E)};return function(w,E){x(w,E);function I(){this.constructor=w}w.prototype=E===null?Object.create(E):(I.prototype=E.prototype,new I)}}(),t1=function(x){e1(w,x);function w(E,I){var O=x.call(this,function(A,Q){ke.debug("No callbacks on "+E+" for "+A)})||this;return O.name=E,O.pusher=I,O.subscribed=!1,O.subscriptionPending=!1,O.subscriptionCancelled=!1,O}return w.prototype.authorize=function(E,I){return I(null,{auth:""})},w.prototype.trigger=function(E,I){if(E.indexOf("client-")!==0)throw new Ce("Event '"+E+"' does not start with 'client-'");if(!this.subscribed){var O=se.buildLogSuffix("triggeringClientEvents");ke.warn("Client event triggered before channel 'subscription_succeeded' event . "+O)}return this.pusher.send_event(E,I,this.name)},w.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},w.prototype.handleEvent=function(E){var I=E.event,O=E.data;if(I==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(E);else if(I.indexOf("pusher_internal:")!==0){var A={};this.emit(I,O,A)}},w.prototype.handleSubscriptionSucceededEvent=function(E){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",E.data)},w.prototype.subscribe=function(){var E=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(I,O){I?(E.subscriptionPending=!1,ke.error(I.toString()),E.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:I.message},I instanceof at?{status:I.status}:{}))):E.pusher.send_event("pusher:subscribe",{auth:O.auth,channel_data:O.channel_data,channel:E.name})}))},w.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},w.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},w.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},w}(rr),M1=t1,_1=function(){var x=function(w,E){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,O){I.__proto__=O}||function(I,O){for(var A in O)O.hasOwnProperty(A)&&(I[A]=O[A])},x(w,E)};return function(w,E){x(w,E);function I(){this.constructor=w}w.prototype=E===null?Object.create(E):(I.prototype=E.prototype,new I)}}(),or=function(x){_1(w,x);function w(){return x!==null&&x.apply(this,arguments)||this}return w.prototype.authorize=function(E,I){var O=P1.createAuthorizer(this,this.pusher.config);return O.authorize(E,I)},w}(M1),ir=or,Kt=function(){function x(){this.reset()}return x.prototype.get=function(w){return Object.prototype.hasOwnProperty.call(this.members,w)?{id:w,info:this.members[w]}:null},x.prototype.each=function(w){var E=this;Te(this.members,function(I,O){w(E.get(O))})},x.prototype.setMyID=function(w){this.myID=w},x.prototype.onSubscription=function(w){this.members=w.presence.hash,this.count=w.presence.count,this.me=this.get(this.myID)},x.prototype.addMember=function(w){return this.get(w.user_id)===null&&this.count++,this.members[w.user_id]=w.user_info,this.get(w.user_id)},x.prototype.removeMember=function(w){var E=this.get(w.user_id);return E&&(delete this.members[w.user_id],this.count--),E},x.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},x}(),I1=Kt,h1=function(){var x=function(w,E){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,O){I.__proto__=O}||function(I,O){for(var A in O)O.hasOwnProperty(A)&&(I[A]=O[A])},x(w,E)};return function(w,E){x(w,E);function I(){this.constructor=w}w.prototype=E===null?Object.create(E):(I.prototype=E.prototype,new I)}}(),sr=function(x){h1(w,x);function w(E,I){var O=x.call(this,E,I)||this;return O.members=new I1,O}return w.prototype.authorize=function(E,I){var O=this;x.prototype.authorize.call(this,E,function(A,Q){if(!A){if(Q=Q,Q.channel_data===void 0){var xe=se.buildLogSuffix("authenticationEndpoint");ke.error("Invalid auth response for channel '"+O.name+"',"+("expected 'channel_data' field. "+xe)),I("Invalid auth response");return}var et=JSON.parse(Q.channel_data);O.members.setMyID(et.user_id)}I(A,Q)})},w.prototype.handleEvent=function(E){var I=E.event;if(I.indexOf("pusher_internal:")===0)this.handleInternalEvent(E);else{var O=E.data,A={};E.user_id&&(A.user_id=E.user_id),this.emit(I,O,A)}},w.prototype.handleInternalEvent=function(E){var I=E.event,O=E.data;switch(I){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(E);break;case"pusher_internal:member_added":var A=this.members.addMember(O);this.emit("pusher:member_added",A);break;case"pusher_internal:member_removed":var Q=this.members.removeMember(O);Q&&this.emit("pusher:member_removed",Q);break}},w.prototype.handleSubscriptionSucceededEvent=function(E){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(E.data),this.emit("pusher:subscription_succeeded",this.members))},w.prototype.disconnect=function(){this.members.reset(),x.prototype.disconnect.call(this)},w}(ir),Mn=sr,Ci=h(1),Cr=h(0),Kn=function(){var x=function(w,E){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,O){I.__proto__=O}||function(I,O){for(var A in O)O.hasOwnProperty(A)&&(I[A]=O[A])},x(w,E)};return function(w,E){x(w,E);function I(){this.constructor=w}w.prototype=E===null?Object.create(E):(I.prototype=E.prototype,new I)}}(),mi=function(x){Kn(w,x);function w(E,I,O){var A=x.call(this,E,I)||this;return A.key=null,A.nacl=O,A}return w.prototype.authorize=function(E,I){var O=this;x.prototype.authorize.call(this,E,function(A,Q){if(A){I(A,Q);return}var xe=Q.shared_secret;if(!xe){I(new Error("No shared_secret key in auth payload for encrypted channel: "+O.name),null);return}O.key=Object(Cr.decode)(xe),delete Q.shared_secret,I(null,Q)})},w.prototype.trigger=function(E,I){throw new $e("Client events are not currently supported for encrypted channels")},w.prototype.handleEvent=function(E){var I=E.event,O=E.data;if(I.indexOf("pusher_internal:")===0||I.indexOf("pusher:")===0){x.prototype.handleEvent.call(this,E);return}this.handleEncryptedEvent(I,O)},w.prototype.handleEncryptedEvent=function(E,I){var O=this;if(!this.key){ke.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!I.ciphertext||!I.nonce){ke.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+I);return}var A=Object(Cr.decode)(I.ciphertext);if(A.length<this.nacl.secretbox.overheadLength){ke.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+A.length);return}var Q=Object(Cr.decode)(I.nonce);if(Q.length<this.nacl.secretbox.nonceLength){ke.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+Q.length);return}var xe=this.nacl.secretbox.open(A,Q,this.key);if(xe===null){ke.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,function(et,xt){if(et){ke.error("Failed to make a request to the authEndpoint: "+xt+". Unable to fetch new key, so dropping encrypted event");return}if(xe=O.nacl.secretbox.open(A,Q,O.key),xe===null){ke.error("Failed to decrypt event with new key. Dropping encrypted event");return}O.emit(E,O.getDataToEmit(xe))});return}this.emit(E,this.getDataToEmit(xe))},w.prototype.getDataToEmit=function(E){var I=Object(Ci.decode)(E);try{return JSON.parse(I)}catch{return I}},w}(ir),Cn=mi,sn=function(){var x=function(w,E){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,O){I.__proto__=O}||function(I,O){for(var A in O)O.hasOwnProperty(A)&&(I[A]=O[A])},x(w,E)};return function(w,E){x(w,E);function I(){this.constructor=w}w.prototype=E===null?Object.create(E):(I.prototype=E.prototype,new I)}}(),bt=function(x){sn(w,x);function w(E,I){var O=x.call(this)||this;O.state="initialized",O.connection=null,O.key=E,O.options=I,O.timeline=O.options.timeline,O.usingTLS=O.options.useTLS,O.errorCallbacks=O.buildErrorCallbacks(),O.connectionCallbacks=O.buildConnectionCallbacks(O.errorCallbacks),O.handshakeCallbacks=O.buildHandshakeCallbacks(O.errorCallbacks);var A=vt.getNetwork();return A.bind("online",function(){O.timeline.info({netinfo:"online"}),(O.state==="connecting"||O.state==="unavailable")&&O.retryIn(0)}),A.bind("offline",function(){O.timeline.info({netinfo:"offline"}),O.connection&&O.sendActivityCheck()}),O.updateStrategy(),O}return w.prototype.connect=function(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},w.prototype.send=function(E){return this.connection?this.connection.send(E):!1},w.prototype.send_event=function(E,I,O){return this.connection?this.connection.send_event(E,I,O):!1},w.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},w.prototype.isUsingTLS=function(){return this.usingTLS},w.prototype.startConnecting=function(){var E=this,I=function(O,A){O?E.runner=E.strategy.connect(0,I):A.action==="error"?(E.emit("error",{type:"HandshakeError",error:A.error}),E.timeline.error({handshakeError:A.error})):(E.abortConnecting(),E.handshakeCallbacks[A.action](A))};this.runner=this.strategy.connect(0,I)},w.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},w.prototype.disconnectInternally=function(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var E=this.abandonConnection();E.close()}},w.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},w.prototype.retryIn=function(E){var I=this;this.timeline.info({action:"retry",delay:E}),E>0&&this.emit("connecting_in",Math.round(E/1e3)),this.retryTimer=new Ft(E||0,function(){I.disconnectInternally(),I.connect()})},w.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},w.prototype.setUnavailableTimer=function(){var E=this;this.unavailableTimer=new Ft(this.options.unavailableTimeout,function(){E.updateState("unavailable")})},w.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},w.prototype.sendActivityCheck=function(){var E=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new Ft(this.options.pongTimeout,function(){E.timeline.error({pong_timed_out:E.options.pongTimeout}),E.retryIn(0)})},w.prototype.resetActivityCheck=function(){var E=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new Ft(this.activityTimeout,function(){E.sendActivityCheck()}))},w.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},w.prototype.buildConnectionCallbacks=function(E){var I=this;return Qt({},E,{message:function(O){I.resetActivityCheck(),I.emit("message",O)},ping:function(){I.send_event("pusher:pong",{})},activity:function(){I.resetActivityCheck()},error:function(O){I.emit("error",O)},closed:function(){I.abandonConnection(),I.shouldRetry()&&I.retryIn(1e3)}})},w.prototype.buildHandshakeCallbacks=function(E){var I=this;return Qt({},E,{connected:function(O){I.activityTimeout=Math.min(I.options.activityTimeout,O.activityTimeout,O.connection.activityTimeout||1/0),I.clearUnavailableTimer(),I.setConnection(O.connection),I.socket_id=I.connection.id,I.updateState("connected",{socket_id:I.socket_id})}})},w.prototype.buildErrorCallbacks=function(){var E=this,I=function(O){return function(A){A.error&&E.emit("error",{type:"WebSocketError",error:A.error}),O(A)}};return{tls_only:I(function(){E.usingTLS=!0,E.updateStrategy(),E.retryIn(0)}),refused:I(function(){E.disconnect()}),backoff:I(function(){E.retryIn(1e3)}),retry:I(function(){E.retryIn(0)})}},w.prototype.setConnection=function(E){this.connection=E;for(var I in this.connectionCallbacks)this.connection.bind(I,this.connectionCallbacks[I]);this.resetActivityCheck()},w.prototype.abandonConnection=function(){if(!!this.connection){this.stopActivityCheck();for(var E in this.connectionCallbacks)this.connection.unbind(E,this.connectionCallbacks[E]);var I=this.connection;return this.connection=null,I}},w.prototype.updateState=function(E,I){var O=this.state;if(this.state=E,O!==E){var A=E;A==="connected"&&(A+=" with new socket ID "+I.socket_id),ke.debug("State changed",O+" -> "+A),this.timeline.info({state:E,params:I}),this.emit("state_change",{previous:O,current:E}),this.emit(E,I)}},w.prototype.shouldRetry=function(){return this.state==="connecting"||this.state==="connected"},w}(rr),$r=bt,Xn=function(){function x(){this.channels={}}return x.prototype.add=function(w,E){return this.channels[w]||(this.channels[w]=Vo(w,E)),this.channels[w]},x.prototype.all=function(){return he(this.channels)},x.prototype.find=function(w){return this.channels[w]},x.prototype.remove=function(w){var E=this.channels[w];return delete this.channels[w],E},x.prototype.disconnect=function(){Te(this.channels,function(w){w.disconnect()})},x}(),Gn=Xn;function Vo(x,w){if(x.indexOf("private-encrypted-")===0){if(w.config.nacl)return P1.createEncryptedChannel(x,w,w.config.nacl);var E="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",I=se.buildLogSuffix("encryptedChannelSupport");throw new $e(E+". "+I)}else return x.indexOf("private-")===0?P1.createPrivateChannel(x,w):x.indexOf("presence-")===0?P1.createPresenceChannel(x,w):P1.createChannel(x,w)}var ll={createChannels:function(){return new Gn},createConnectionManager:function(x,w){return new $r(x,w)},createChannel:function(x,w){return new M1(x,w)},createPrivateChannel:function(x,w){return new ir(x,w)},createPresenceChannel:function(x,w){return new Mn(x,w)},createEncryptedChannel:function(x,w,E){return new Cn(x,w,E)},createTimelineSender:function(x,w){return new Nt(x,w)},createAuthorizer:function(x,w){return w.authorizer?w.authorizer(x,w):new wt(x,w)},createHandshake:function(x,w){return new Ne(x,w)},createAssistantToTheTransportManager:function(x,w,E){return new de(x,w,E)}},P1=ll,cl=function(){function x(w){this.options=w||{},this.livesLeft=this.options.lives||1/0}return x.prototype.getAssistant=function(w){return P1.createAssistantToTheTransportManager(this,w,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},x.prototype.isAlive=function(){return this.livesLeft>0},x.prototype.reportDeath=function(){this.livesLeft-=1},x}(),Do=cl,dl=function(){function x(w,E){this.strategies=w,this.loop=Boolean(E.loop),this.failFast=Boolean(E.failFast),this.timeout=E.timeout,this.timeoutLimit=E.timeoutLimit}return x.prototype.isSupported=function(){return It(this.strategies,Vt.method("isSupported"))},x.prototype.connect=function(w,E){var I=this,O=this.strategies,A=0,Q=this.timeout,xe=null,et=function(xt,c1){c1?E(null,c1):(A=A+1,I.loop&&(A=A%O.length),A<O.length?(Q&&(Q=Q*2,I.timeoutLimit&&(Q=Math.min(Q,I.timeoutLimit))),xe=I.tryStrategy(O[A],w,{timeout:Q,failFast:I.failFast},et)):E(!0))};return xe=this.tryStrategy(O[A],w,{timeout:Q,failFast:this.failFast},et),{abort:function(){xe.abort()},forceMinPriority:function(xt){w=xt,xe&&xe.forceMinPriority(xt)}}},x.prototype.tryStrategy=function(w,E,I,O){var A=null,Q=null;return I.timeout>0&&(A=new Ft(I.timeout,function(){Q.abort(),O(!0)})),Q=w.connect(E,function(xe,et){xe&&A&&A.isRunning()&&!I.failFast||(A&&A.ensureAborted(),O(xe,et))}),{abort:function(){A&&A.ensureAborted(),Q.abort()},forceMinPriority:function(xe){Q.forceMinPriority(xe)}}},x}(),an=dl,jo=function(){function x(w){this.strategies=w}return x.prototype.isSupported=function(){return It(this.strategies,Vt.method("isSupported"))},x.prototype.connect=function(w,E){return mn(this.strategies,w,function(I,O){return function(A,Q){if(O[I].error=A,A){Wr(O)&&E(!0);return}Le(O,function(xe){xe.forceMinPriority(Q.transport.priority)}),E(null,Q)}})},x}(),Yn=jo;function mn(x,w,E){var I=Ze(x,function(O,A,Q,xe){return O.connect(w,E(A,xe))});return{abort:function(){Le(I,Ao)},forceMinPriority:function(O){Le(I,function(A){A.forceMinPriority(O)})}}}function Wr(x){return mt(x,function(w){return Boolean(w.error)})}function Ao(x){!x.error&&!x.aborted&&(x.abort(),x.aborted=!0)}var In=function(){function x(w,E,I){this.strategy=w,this.transports=E,this.ttl=I.ttl||1800*1e3,this.usingTLS=I.useTLS,this.timeline=I.timeline}return x.prototype.isSupported=function(){return this.strategy.isSupported()},x.prototype.connect=function(w,E){var I=this.usingTLS,O=Pn(I),A=[this.strategy];if(O&&O.timestamp+this.ttl>=Vt.now()){var Q=this.transports[O.transport];Q&&(this.timeline.info({cached:!0,transport:O.transport,latency:O.latency}),A.push(new an([Q],{timeout:O.latency*2+1e3,failFast:!0})))}var xe=Vt.now(),et=A.pop().connect(w,function xt(c1,x1){c1?(Wo(I),A.length>0?(xe=Vt.now(),et=A.pop().connect(w,xt)):E(c1)):(qn(I,x1.transport.name,Vt.now()-xe),E(null,x1))});return{abort:function(){et.abort()},forceMinPriority:function(xt){w=xt,et&&et.forceMinPriority(xt)}}},x}(),_i=In;function Zo(x){return"pusherTransport"+(x?"TLS":"NonTLS")}function Pn(x){var w=vt.getLocalStorage();if(w)try{var E=w[Zo(x)];if(E)return JSON.parse(E)}catch{Wo(x)}return null}function qn(x,w,E){var I=vt.getLocalStorage();if(I)try{I[Zo(x)]=ve({timestamp:Vt.now(),transport:w,latency:E})}catch{}}function Wo(x){var w=vt.getLocalStorage();if(w)try{delete w[Zo(x)]}catch{}}var le=function(){function x(w,E){var I=E.delay;this.strategy=w,this.options={delay:I}}return x.prototype.isSupported=function(){return this.strategy.isSupported()},x.prototype.connect=function(w,E){var I=this.strategy,O,A=new Ft(this.options.delay,function(){O=I.connect(w,E)});return{abort:function(){A.ensureAborted(),O&&O.abort()},forceMinPriority:function(Q){w=Q,O&&O.forceMinPriority(Q)}}},x}(),Jn=le,ul=function(){function x(w,E,I){this.test=w,this.trueBranch=E,this.falseBranch=I}return x.prototype.isSupported=function(){var w=this.test()?this.trueBranch:this.falseBranch;return w.isSupported()},x.prototype.connect=function(w,E){var I=this.test()?this.trueBranch:this.falseBranch;return I.connect(w,E)},x}(),Qn=ul,Hs=function(){function x(w){this.strategy=w}return x.prototype.isSupported=function(){return this.strategy.isSupported()},x.prototype.connect=function(w,E){var I=this.strategy.connect(w,function(O,A){A&&I.abort(),E(O,A)});return I},x}(),Os=Hs;function $n(x){return function(){return x.isSupported()}}var wi=function(x,w,E){var I={};function O(Gs,lo,wl,bl,Ys){var qs=E(x,Gs,lo,wl,bl,Ys);return I[Gs]=qs,qs}var A=Object.assign({},w,{hostNonTLS:x.wsHost+":"+x.wsPort,hostTLS:x.wsHost+":"+x.wssPort,httpPath:x.wsPath}),Q=Object.assign({},A,{useTLS:!0}),xe=Object.assign({},w,{hostNonTLS:x.httpHost+":"+x.httpPort,hostTLS:x.httpHost+":"+x.httpsPort,httpPath:x.httpPath}),et={loop:!0,timeout:15e3,timeoutLimit:6e4},xt=new Do({lives:2,minPingDelay:1e4,maxPingDelay:x.activityTimeout}),c1=new Do({lives:2,minPingDelay:1e4,maxPingDelay:x.activityTimeout}),x1=O("ws","ws",3,A,xt),mr=O("wss","ws",3,Q,xt),On=O("sockjs","sockjs",1,xe),Ko=O("xhr_streaming","xhr_streaming",1,xe,c1),ml=O("xdr_streaming","xdr_streaming",1,xe,c1),kn=O("xhr_polling","xhr_polling",1,xe),_l=O("xdr_polling","xdr_polling",1,xe),zs=new an([x1],et),Us=new an([mr],et),Ns=new an([On],et),Xo=new an([new Qn($n(Ko),Ko,ml)],et),Ks=new an([new Qn($n(kn),kn,_l)],et),Xs=new an([new Qn($n(Xo),new Yn([Xo,new Jn(Ks,{delay:4e3})]),Ks)],et),ao=new Qn($n(Xs),Xs,Ns),Tn;return w.useTLS?Tn=new Yn([zs,new Jn(ao,{delay:2e3})]):Tn=new Yn([zs,new Jn(Us,{delay:2e3}),new Jn(ao,{delay:5e3})]),new _i(new Os(new Qn($n(x1),Tn,ao)),I,{ttl:18e5,timeline:w.timeline,useTLS:w.useTLS})},bi=wi,w1=function(){var x=this;x.timeline.info(x.buildTimelineMessage({transport:x.name+(x.options.useTLS?"s":"")})),x.hooks.isInitialized()?x.changeState("initialized"):x.hooks.file?(x.changeState("initializing"),Se.load(x.hooks.file,{useTLS:x.options.useTLS},function(w,E){x.hooks.isInitialized()?(x.changeState("initialized"),E(!0)):(w&&x.onError(w),x.onClose(),E(!1))})):x.onClose()},b1={getRequest:function(x){var w=new window.XDomainRequest;return w.ontimeout=function(){x.emit("error",new ne),x.close()},w.onerror=function(E){x.emit("error",E),x.close()},w.onprogress=function(){w.responseText&&w.responseText.length>0&&x.onChunk(200,w.responseText)},w.onload=function(){w.responseText&&w.responseText.length>0&&x.onChunk(200,w.responseText),x.emit("finished",200),x.close()},w},abortRequest:function(x){x.ontimeout=x.onerror=x.onprogress=x.onload=null,x.abort()}},xi=b1,yi=function(){var x=function(w,E){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,O){I.__proto__=O}||function(I,O){for(var A in O)O.hasOwnProperty(A)&&(I[A]=O[A])},x(w,E)};return function(w,E){x(w,E);function I(){this.constructor=w}w.prototype=E===null?Object.create(E):(I.prototype=E.prototype,new I)}}(),ks=256*1024,Ts=function(x){yi(w,x);function w(E,I,O){var A=x.call(this)||this;return A.hooks=E,A.method=I,A.url=O,A}return w.prototype.start=function(E){var I=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){I.close()},vt.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(E)},w.prototype.close=function(){this.unloader&&(vt.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},w.prototype.onChunk=function(E,I){for(;;){var O=this.advanceBuffer(I);if(O)this.emit("chunk",{status:E,data:O});else break}this.isBufferTooLong(I)&&this.emit("buffer_too_long")},w.prototype.advanceBuffer=function(E){var I=E.slice(this.position),O=I.indexOf(`
`);return O!==-1?(this.position+=O+1,I.slice(0,O)):null},w.prototype.isBufferTooLong=function(E){return this.position===E.length&&E.length>ks},w}(rr),fl=Ts,eo;(function(x){x[x.CONNECTING=0]="CONNECTING",x[x.OPEN=1]="OPEN",x[x.CLOSED=3]="CLOSED"})(eo||(eo={}));var X1=eo,hl=1,Bs=function(){function x(w,E){this.hooks=w,this.session=Si(1e3)+"/"+ln(8),this.location=Fo(E),this.readyState=X1.CONNECTING,this.openStream()}return x.prototype.send=function(w){return this.sendRaw(JSON.stringify([w]))},x.prototype.ping=function(){this.hooks.sendHeartbeat(this)},x.prototype.close=function(w,E){this.onClose(w,E,!0)},x.prototype.sendRaw=function(w){if(this.readyState===X1.OPEN)try{return vt.createSocketRequest("POST",Li(Ei(this.location,this.session))).start(w),!0}catch{return!1}else return!1},x.prototype.reconnect=function(){this.closeStream(),this.openStream()},x.prototype.onClose=function(w,E,I){this.closeStream(),this.readyState=X1.CLOSED,this.onclose&&this.onclose({code:w,reason:E,wasClean:I})},x.prototype.onChunk=function(w){if(w.status===200){this.readyState===X1.OPEN&&this.onActivity();var E,I=w.data.slice(0,1);switch(I){case"o":E=JSON.parse(w.data.slice(1)||"{}"),this.onOpen(E);break;case"a":E=JSON.parse(w.data.slice(1)||"[]");for(var O=0;O<E.length;O++)this.onEvent(E[O]);break;case"m":E=JSON.parse(w.data.slice(1)||"null"),this.onEvent(E);break;case"h":this.hooks.onHeartbeat(this);break;case"c":E=JSON.parse(w.data.slice(1)||"[]"),this.onClose(E[0],E[1],!0);break}}},x.prototype.onOpen=function(w){this.readyState===X1.CONNECTING?(w&&w.hostname&&(this.location.base=to(this.location.base,w.hostname)),this.readyState=X1.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},x.prototype.onEvent=function(w){this.readyState===X1.OPEN&&this.onmessage&&this.onmessage({data:w})},x.prototype.onActivity=function(){this.onactivity&&this.onactivity()},x.prototype.onError=function(w){this.onerror&&this.onerror(w)},x.prototype.openStream=function(){var w=this;this.stream=vt.createSocketRequest("POST",Li(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(E){w.onChunk(E)}),this.stream.bind("finished",function(E){w.hooks.onFinished(w,E)}),this.stream.bind("buffer_too_long",function(){w.reconnect()});try{this.stream.start()}catch(E){Vt.defer(function(){w.onError(E),w.onClose(1006,"Could not start streaming",!1)})}},x.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},x}();function Fo(x){var w=/([^\?]*)\/*(\??.*)/.exec(x);return{base:w[1],queryString:w[2]}}function Ei(x,w){return x.base+"/"+w+"/xhr_send"}function Li(x){var w=x.indexOf("?")===-1?"?":"&";return x+w+"t="+ +new Date+"&n="+hl++}function to(x,w){var E=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(x);return E[1]+w+E[3]}function Si(x){return Math.floor(Math.random()*x)}function ln(x){for(var w=[],E=0;E<x;E++)w.push(Si(32).toString(32));return w.join("")}var zo=Bs,pl={getReceiveURL:function(x,w){return x.base+"/"+w+"/xhr_streaming"+x.queryString},onHeartbeat:function(x){x.sendRaw("[]")},sendHeartbeat:function(x){x.sendRaw("[]")},onFinished:function(x,w){x.onClose(1006,"Connection interrupted ("+w+")",!1)}},Vs=pl,vl={getReceiveURL:function(x,w){return x.base+"/"+w+"/xhr"+x.queryString},onHeartbeat:function(){},sendHeartbeat:function(x){x.sendRaw("[]")},onFinished:function(x,w){w===200?x.reconnect():x.onClose(1006,"Connection interrupted ("+w+")",!1)}},Ds=vl,Ri={getRequest:function(x){var w=vt.getXHRAPI(),E=new w;return E.onreadystatechange=E.onprogress=function(){switch(E.readyState){case 3:E.responseText&&E.responseText.length>0&&x.onChunk(E.status,E.responseText);break;case 4:E.responseText&&E.responseText.length>0&&x.onChunk(E.status,E.responseText),x.emit("finished",E.status),x.close();break}},E},abortRequest:function(x){x.onreadystatechange=null,x.abort()}},js=Ri,Mi={createStreamingSocket:function(x){return this.createSocket(Vs,x)},createPollingSocket:function(x){return this.createSocket(Ds,x)},createSocket:function(x,w){return new zo(x,w)},createXHR:function(x,w){return this.createRequest(js,x,w)},createRequest:function(x,w,E){return new fl(x,w,E)}},Ii=Mi;Ii.createXDR=function(x,w){return this.createRequest(xi,x,w)};var Pi=Ii,$i={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:N,DependenciesReceivers:He,getDefaultStrategy:bi,Transports:Bo,transportConnectionInitializer:w1,HTTPFactory:Pi,TimelineTransport:$t,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(x){var w=this;window.Pusher=x;var E=function(){w.onDocumentBody(x.ready)};window.JSON?E():Se.load("json2",{},E)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:Je,jsonp:rt}},onDocumentBody:function(x){var w=this;document.body?x():setTimeout(function(){w.onDocumentBody(x)},0)},createJSONPRequest:function(x,w){return new a1(x,w)},createScriptRequest:function(x){return new Lt(x)},getLocalStorage:function(){try{return window.localStorage}catch{return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){var x=this.getXHRAPI();return new x},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return oe},createWebSocket:function(x){var w=this.getWebSocketAPI();return new w(x)},createSocketRequest:function(x,w){if(this.isXHRSupported())return this.HTTPFactory.createXHR(x,w);if(this.isXDRSupported(w.indexOf("https:")===0))return this.HTTPFactory.createXDR(x,w);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var x=this.getXHRAPI();return Boolean(x)&&new x().withCredentials!==void 0},isXDRSupported:function(x){var w=x?"https:":"http:",E=this.getProtocol();return Boolean(window.XDomainRequest)&&E===w},addUnloadListener:function(x){window.addEventListener!==void 0?window.addEventListener("unload",x,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",x)},removeUnloadListener:function(x){window.addEventListener!==void 0?window.removeEventListener("unload",x,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",x)}},vt=$i,ro;(function(x){x[x.ERROR=3]="ERROR",x[x.INFO=6]="INFO",x[x.DEBUG=7]="DEBUG"})(ro||(ro={}));var no=ro,Hi=function(){function x(w,E,I){this.key=w,this.session=E,this.events=[],this.options=I||{},this.sent=0,this.uniqueID=0}return x.prototype.log=function(w,E){w<=this.options.level&&(this.events.push(Qt({},E,{timestamp:Vt.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},x.prototype.error=function(w){this.log(no.ERROR,w)},x.prototype.info=function(w){this.log(no.INFO,w)},x.prototype.debug=function(w){this.log(no.DEBUG,w)},x.prototype.isEmpty=function(){return this.events.length===0},x.prototype.send=function(w,E){var I=this,O=Qt({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],w(O,function(A,Q){A||I.sent++,E&&E(A,Q)}),!0},x.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},x}(),cn=Hi,Hn=function(){function x(w,E,I,O){this.name=w,this.priority=E,this.transport=I,this.options=O||{}}return x.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},x.prototype.connect=function(w,E){var I=this;if(this.isSupported()){if(this.priority<w)return oo(new Ue,E)}else return oo(new Be,E);var O=!1,A=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),Q=null,xe=function(){A.unbind("initialized",xe),A.connect()},et=function(){Q=P1.createHandshake(A,function(mr){O=!0,x1(),E(null,mr)})},xt=function(mr){x1(),E(mr)},c1=function(){x1();var mr;mr=ve(A),E(new Ke(mr))},x1=function(){A.unbind("initialized",xe),A.unbind("open",et),A.unbind("error",xt),A.unbind("closed",c1)};return A.bind("initialized",xe),A.bind("open",et),A.bind("error",xt),A.bind("closed",c1),A.initialize(),{abort:function(){O||(x1(),Q?Q.close():A.close())},forceMinPriority:function(mr){O||I.priority<mr&&(Q?Q.close():A.close())}}},x}(),gl=Hn;function oo(x,w){return Vt.defer(function(){w(x)}),{abort:function(){},forceMinPriority:function(){}}}var io=vt.Transports,As=function(x,w,E,I,O,A){var Q=io[E];if(!Q)throw new Xe(E);var xe=(!x.enabledTransports||n1(x.enabledTransports,w)!==-1)&&(!x.disabledTransports||n1(x.disabledTransports,w)===-1),et;return xe?(O=Object.assign({ignoreNullOrigin:x.ignoreNullOrigin},O),et=new gl(w,I,A?A.getAssistant(Q):Q,O)):et=Oi,et},Oi={isSupported:function(){return!1},connect:function(x,w){var E=Vt.defer(function(){w(new Be)});return{abort:function(){E.ensureAborted()},forceMinPriority:function(){}}}};function Cl(x){var w={activityTimeout:x.activityTimeout||be.activityTimeout,authEndpoint:x.authEndpoint||be.authEndpoint,authTransport:x.authTransport||be.authTransport,cluster:x.cluster||be.cluster,httpPath:x.httpPath||be.httpPath,httpPort:x.httpPort||be.httpPort,httpsPort:x.httpsPort||be.httpsPort,pongTimeout:x.pongTimeout||be.pongTimeout,statsHost:x.statsHost||be.stats_host,unavailableTimeout:x.unavailableTimeout||be.unavailableTimeout,wsPath:x.wsPath||be.wsPath,wsPort:x.wsPort||be.wsPort,wssPort:x.wssPort||be.wssPort,enableStats:Ti(x),httpHost:Zs(x),useTLS:Fs(x),wsHost:Ws(x)};return"auth"in x&&(w.auth=x.auth),"authorizer"in x&&(w.authorizer=x.authorizer),"disabledTransports"in x&&(w.disabledTransports=x.disabledTransports),"enabledTransports"in x&&(w.enabledTransports=x.enabledTransports),"ignoreNullOrigin"in x&&(w.ignoreNullOrigin=x.ignoreNullOrigin),"timelineParams"in x&&(w.timelineParams=x.timelineParams),"nacl"in x&&(w.nacl=x.nacl),w}function Zs(x){return x.httpHost?x.httpHost:x.cluster?"sockjs-"+x.cluster+".pusher.com":be.httpHost}function Ws(x){return x.wsHost?x.wsHost:x.cluster?ki(x.cluster):ki(be.cluster)}function ki(x){return"ws-"+x+".pusher.com"}function Fs(x){return vt.getProtocol()==="https:"?!0:x.forceTLS!==!1}function Ti(x){return"enableStats"in x?x.enableStats:"disableStats"in x?!x.disableStats:!1}var Uo=function(){function x(w,E){var I=this;if(so(w),E=E||{},!E.cluster&&!(E.wsHost||E.httpHost)){var O=se.buildLogSuffix("javascriptQuickStart");ke.warn("You should always specify a cluster when connecting. "+O)}"disableStats"in E&&ke.warn("The disableStats option is deprecated in favor of enableStats"),this.key=w,this.config=Cl(E),this.channels=P1.createChannels(),this.global_emitter=new rr,this.sessionID=Math.floor(Math.random()*1e9),this.timeline=new cn(this.key,this.sessionID,{cluster:this.config.cluster,features:x.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:no.INFO,version:be.VERSION}),this.config.enableStats&&(this.timelineSender=P1.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+vt.TimelineTransport.name}));var A=function(Q){return vt.getDefaultStrategy(I.config,Q,As)};this.connection=P1.createConnectionManager(this.key,{getStrategy:A,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",function(){I.subscribeAll(),I.timelineSender&&I.timelineSender.send(I.connection.isUsingTLS())}),this.connection.bind("message",function(Q){var xe=Q.event,et=xe.indexOf("pusher_internal:")===0;if(Q.channel){var xt=I.channel(Q.channel);xt&&xt.handleEvent(Q)}et||I.global_emitter.emit(Q.event,Q.data)}),this.connection.bind("connecting",function(){I.channels.disconnect()}),this.connection.bind("disconnected",function(){I.channels.disconnect()}),this.connection.bind("error",function(Q){ke.warn(Q)}),x.instances.push(this),this.timeline.info({instances:x.instances.length}),x.isReady&&this.connect()}return x.ready=function(){x.isReady=!0;for(var w=0,E=x.instances.length;w<E;w++)x.instances[w].connect()},x.getClientFeatures=function(){return Qe(ft({ws:vt.Transports.ws},function(w){return w.isSupported({})}))},x.prototype.channel=function(w){return this.channels.find(w)},x.prototype.allChannels=function(){return this.channels.all()},x.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var w=this.connection.isUsingTLS(),E=this.timelineSender;this.timelineSenderTimer=new fr(6e4,function(){E.send(w)})}},x.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},x.prototype.bind=function(w,E,I){return this.global_emitter.bind(w,E,I),this},x.prototype.unbind=function(w,E,I){return this.global_emitter.unbind(w,E,I),this},x.prototype.bind_global=function(w){return this.global_emitter.bind_global(w),this},x.prototype.unbind_global=function(w){return this.global_emitter.unbind_global(w),this},x.prototype.unbind_all=function(w){return this.global_emitter.unbind_all(),this},x.prototype.subscribeAll=function(){var w;for(w in this.channels.channels)this.channels.channels.hasOwnProperty(w)&&this.subscribe(w)},x.prototype.subscribe=function(w){var E=this.channels.add(w,this);return E.subscriptionPending&&E.subscriptionCancelled?E.reinstateSubscription():!E.subscriptionPending&&this.connection.state==="connected"&&E.subscribe(),E},x.prototype.unsubscribe=function(w){var E=this.channels.find(w);E&&E.subscriptionPending?E.cancelSubscription():(E=this.channels.remove(w),E&&E.subscribed&&E.unsubscribe())},x.prototype.send_event=function(w,E,I){return this.connection.send_event(w,E,I)},x.prototype.shouldUseTLS=function(){return this.config.useTLS},x.instances=[],x.isReady=!1,x.logToConsole=!1,x.Runtime=vt,x.ScriptReceivers=vt.ScriptReceivers,x.DependenciesReceivers=vt.DependenciesReceivers,x.auth_callbacks=vt.auth_callbacks,x}(),No=D.default=Uo;function so(x){if(x==null)throw"You must pass your app key when you instantiate Pusher."}vt.setup(Uo)}])})},5683:(ct,ce,D)=>{"use strict";D.d(ce,{f:()=>N});var h=D(8160);function W(J){var be=J.freeze,je=J.children,Pe=(0,h.useRef)({}).current;if(be&&!Pe.promise)throw Pe.promise=new Promise(function(He){Pe.resolve=He}),Pe.promise;if(be)throw Pe.promise;return Pe.promise&&(Pe.resolve(),Pe.promise=void 0),h.createElement(h.Fragment,null,je)}function N(J){var be=J.freeze,je=J.children,Pe=J.placeholder,He=Pe===void 0?null:Pe;return h.createElement(h.Suspense,{fallback:He},h.createElement(W,{freeze:be},je))}},6118:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>He});var h=D(8160),W=D(8523),N=D.n(W),J=D(4168),be=J.jU?h.useLayoutEffect:h.useEffect;const je=be;var Pe=function(Se,ye,ge){ge===void 0&&(ge={});var se=ge.video,ee=ge.onClose,Ce=ee===void 0?J.ZT:ee,ne=(0,h.useState)(ye),Ue=ne[0],Ke=ne[1];return je(function(){if(!!ye&&!!Se.current){var $e=function(){(se==null?void 0:se.current)&&(0,J.S1)(se.current,"webkitendfullscreen",$e),Ce()},Xe=function(){if(N().isEnabled){var Be=N().isFullscreen;Ke(Be),Be||Ce()}};if(N().isEnabled){try{N().request(Se.current),Ke(!0)}catch(Be){Ce(Be),Ke(!1)}N().on("change",Xe)}else se&&se.current&&se.current.webkitEnterFullscreen?(se.current.webkitEnterFullscreen(),(0,J.on)(se.current,"webkitendfullscreen",$e),Ke(!0)):(Ce(),Ke(!1));return function(){if(Ke(!1),N().isEnabled)try{N().off("change",Xe),N().exit()}catch{}else se&&se.current&&se.current.webkitExitFullscreen&&((0,J.S1)(se.current,"webkitendfullscreen",$e),se.current.webkitExitFullscreen())}}},[ye,se,Se]),Ue};const He=Pe},3738:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>W});var h=D(8160);function W(N){var J=(0,h.useRef)();return(0,h.useEffect)(function(){J.current=N}),J.current}},2843:(ct,ce,D)=>{"use strict";D.d(ce,{Z:()=>J});var h=D(8160),W=function(be,je){return typeof je=="boolean"?je:!be},N=function(be){return(0,h.useReducer)(W,be)};const J=N},8523:ct=>{/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/(function(){"use strict";var ce=typeof window<"u"&&typeof window.document<"u"?window.document:{},D=ct.exports,h=function(){for(var J,be=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],je=0,Pe=be.length,He={};je<Pe;je++)if(J=be[je],J&&J[1]in ce){for(je=0;je<J.length;je++)He[be[0][je]]=J[je];return He}return!1}(),W={change:h.fullscreenchange,error:h.fullscreenerror},N={request:function(J,be){return new Promise(function(je,Pe){var He=function(){this.off("change",He),je()}.bind(this);this.on("change",He),J=J||ce.documentElement;var Se=J[h.requestFullscreen](be);Se instanceof Promise&&Se.then(He).catch(Pe)}.bind(this))},exit:function(){return new Promise(function(J,be){if(!this.isFullscreen){J();return}var je=function(){this.off("change",je),J()}.bind(this);this.on("change",je);var Pe=ce[h.exitFullscreen]();Pe instanceof Promise&&Pe.then(je).catch(be)}.bind(this))},toggle:function(J,be){return this.isFullscreen?this.exit():this.request(J,be)},onchange:function(J){this.on("change",J)},onerror:function(J){this.on("error",J)},on:function(J,be){var je=W[J];je&&ce.addEventListener(je,be,!1)},off:function(J,be){var je=W[J];je&&ce.removeEventListener(je,be,!1)},raw:h};if(!h){D?ct.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(N,{isFullscreen:{get:function(){return Boolean(ce[h.fullscreenElement])}},element:{enumerable:!0,get:function(){return ce[h.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(ce[h.fullscreenEnabled])}}}),D?ct.exports=N:window.screenfull=N})()},4696:(ct,ce,D)=>{"use strict";D.d(ce,{Dr:()=>Qh});var h=D(8160),W={0:"Invalid value for configuration 'enforceActions', expected 'never', 'always' or 'observed'",1:function(n,o){return"Cannot apply '"+n+"' to '"+o.toString()+"': Field not found."},5:"'keys()' can only be used on observable objects, arrays, sets and maps",6:"'values()' can only be used on observable objects, arrays, sets and maps",7:"'entries()' can only be used on observable objects, arrays and maps",8:"'set()' can only be used on observable objects, arrays and maps",9:"'remove()' can only be used on observable objects, arrays and maps",10:"'has()' can only be used on observable objects, arrays and maps",11:"'get()' can only be used on observable objects, arrays and maps",12:"Invalid annotation",13:"Dynamic observable objects cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)",14:"Intercept handlers should return nothing or a change object",15:"Observable arrays cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)",16:"Modification exception: the internal structure of an observable array was changed.",17:function(n,o){return"[mobx.array] Index out of bounds, "+n+" is larger than "+o},18:"mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js",19:function(n){return"Cannot initialize from classes that inherit from Map: "+n.constructor.name},20:function(n){return"Cannot initialize map from "+n},21:function(n){return"Cannot convert to map from '"+n+"'"},22:"mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js",23:"It is not possible to get index atoms from arrays",24:function(n){return"Cannot obtain administration from "+n},25:function(n,o){return"the entry '"+n+"' does not exist in the observable map '"+o+"'"},26:"please specify a property",27:function(n,o){return"no observable property '"+n.toString()+"' found on the observable object '"+o+"'"},28:function(n){return"Cannot obtain atom from "+n},29:"Expecting some object",30:"invalid action stack. did you forget to finish an action?",31:"missing option for computed: get",32:function(n,o){return"Cycle detected in computation "+n+": "+o},33:function(n){return"The setter of computed value '"+n+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"},34:function(n){return"[ComputedValue '"+n+"'] It is not possible to assign a new value to a computed value."},35:"There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`",36:"isolateGlobalState should be called before MobX is running any reactions",37:function(n){return"[mobx] `observableArray."+n+"()` mutates the array in-place, which is not allowed inside a derivation. Use `array.slice()."+n+"()` instead"},38:"'ownKeys()' can only be used on observable objects",39:"'defineProperty()' can only be used on observable objects"},N={};function J(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];if(!1)var l;throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(o.length?" "+o.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var be={};function je(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof D.g<"u"?D.g:typeof self<"u"?self:be}var Pe=Object.assign,He=Object.getOwnPropertyDescriptor,Se=Object.defineProperty,ye=Object.prototype,ge=[];Object.freeze(ge);var se={};Object.freeze(se);var ee=typeof Proxy<"u",Ce=Object.toString();function ne(){ee||J("Proxy not available")}function Ue(e){}function Ke(){return++le.mobxGuid}function $e(e){var n=!1;return function(){if(!n)return n=!0,e.apply(this,arguments)}}var Xe=function(){};function Be(e){return typeof e=="function"}function at(e){var n=typeof e;switch(n){case"string":case"symbol":case"number":return!0}return!1}function ht(e){return e!==null&&typeof e=="object"}function Je(e){if(!ht(e))return!1;var n=Object.getPrototypeOf(e);if(n==null)return!0;var o=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return typeof o=="function"&&o.toString()===Ce}function yt(e){var n=e==null?void 0:e.constructor;return n?n.name==="GeneratorFunction"||n.displayName==="GeneratorFunction":!1}function ot(e,n,o){Se(e,n,{enumerable:!1,writable:!0,configurable:!0,value:o})}function Wt(e,n,o){Se(e,n,{enumerable:!1,writable:!1,configurable:!0,value:o})}function s1(e,n){var o="isMobX"+e;return n.prototype[o]=!0,function(s){return ht(s)&&s[o]===!0}}function C1(e){return e instanceof Map}function L1(e){return e instanceof Set}var Z1=typeof Object.getOwnPropertySymbols<"u";function W1(e){var n=Object.keys(e);if(!Z1)return n;var o=Object.getOwnPropertySymbols(e);return o.length?[].concat(n,o.filter(function(s){return ye.propertyIsEnumerable.call(e,s)})):n}var S1=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Z1?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function Mr(e){return typeof e=="string"?e:typeof e=="symbol"?e.toString():new String(e).toString()}function J1(e){return e===null?null:typeof e=="object"?""+e:e}function r1(e,n){return ye.hasOwnProperty.call(e,n)}var Q1=Object.getOwnPropertyDescriptors||function(n){var o={};return S1(n).forEach(function(s){o[s]=He(n,s)}),o};function ur(e,n){for(var o=0;o<n.length;o++){var s=n[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function F1(e,n,o){return n&&ur(e.prototype,n),o&&ur(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ft(){return Ft=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},Ft.apply(this,arguments)}function fr(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,j1(e,n)}function j1(e,n){return j1=Object.setPrototypeOf||function(s,l){return s.__proto__=l,s},j1(e,n)}function Vt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qt(e,n){if(!!e){if(typeof e=="string")return z1(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return z1(e,n)}}function z1(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,s=new Array(n);o<n;o++)s[o]=e[o];return s}function n1(e,n){var o=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(o)return(o=o.call(e)).next.bind(o);if(Array.isArray(e)||(o=Qt(e))||n&&e&&typeof e.length=="number"){o&&(e=o);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Te=Symbol("mobx-stored-annotations");function Qe(e){function n(o,s){he(o,s,e)}return Object.assign(n,e)}function he(e,n,o){if(r1(e,Te)||ot(e,Te,Ft({},e[Te])),!1)var s;Le(e,o,n),Lt(o)||(e[Te][n]=o)}function Le(e,n,o){if(!1)var s,l,c}function Ze(e){return r1(e,Te)||ot(e,Te,Ft({},e[Te])),e[Te]}var ie=Symbol("mobx administration"),Ge=function(){function e(o){o===void 0&&(o="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=bt.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=o}var n=e.prototype;return n.onBO=function(){this.onBOL&&this.onBOL.forEach(function(s){return s()})},n.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(s){return s()})},n.reportObserved=function(){return xi(this)},n.reportChanged=function(){w1(),yi(this),b1()},n.toString=function(){return this.name_},e}(),ft=s1("Atom",Ge);function Et(e,n,o){n===void 0&&(n=Xe),o===void 0&&(o=Xe);var s=new Ge(e);return n!==Xe&&Fs(s,n),o!==Xe&&Ti(s,o),s}function It(e,n){return e===n}function mt(e,n){return na(e,n)}function _t(e,n){return na(e,n,1)}function ae(e,n){return Object.is?Object.is(e,n):e===n?e!==0||1/e===1/n:e!==e&&n!==n}var ue={identity:It,structural:mt,default:ae,shallow:_t};function ve(e,n,o){return Tn(e)?e:Array.isArray(e)?pe.array(e,{name:o}):Je(e)?pe.object(e,void 0,{name:o}):C1(e)?pe.map(e,{name:o}):L1(e)?pe.set(e,{name:o}):typeof e=="function"&&!oo(e)&&!kn(e)?yt(e)?On(e):Hn(o,e):e}function Ae(e,n,o){if(e==null||V1(e)||ar(e)||B1(e)||G1(e))return e;if(Array.isArray(e))return pe.array(e,{name:o,deep:!1});if(Je(e))return pe.object(e,void 0,{name:o,deep:!1});if(C1(e))return pe.map(e,{name:o,deep:!1});if(L1(e))return pe.set(e,{name:o,deep:!1})}function ke(e){return e}function pt(e,n){return na(e,n)?n:e}var rt="override",Pt=Qe({annotationType_:rt,make_:o1,extend_:a1});function Lt(e){return e.annotationType_===rt}function o1(e,n){return 0}function a1(e,n,o,s){J("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function Gt(e,n){return{annotationType_:e,options_:n,make_:dt,extend_:$t}}function dt(e,n,o,s){var l;if((l=this.options_)!=null&&l.bound)return this.extend_(e,n,o,!1)===null?0:1;if(s===e.target_)return this.extend_(e,n,o,!1)===null?0:2;if(oo(o.value))return 1;var c=l1(e,this,n,o,!1);return Se(s,n,c),2}function $t(e,n,o,s){var l=l1(e,this,n,o);return e.defineProperty_(n,l,s)}function zt(e,n,o,s){var l=n.annotationType_,c=s.value}function l1(e,n,o,s,l){var c,d,C,g,m,_,y;l===void 0&&(l=le.safeDescriptors),zt(e,n,o,s);var L=s.value;if((c=n.options_)!=null&&c.bound){var S;L=L.bind((S=e.proxy_)!=null?S:e.target_)}return{value:_1((d=(C=n.options_)==null?void 0:C.name)!=null?d:o.toString(),L,(g=(m=n.options_)==null?void 0:m.autoAction)!=null?g:!1,(_=n.options_)!=null&&_.bound?(y=e.proxy_)!=null?y:e.target_:void 0),configurable:l?e.isPlainObject_:!0,enumerable:!1,writable:!l}}function er(e,n){return{annotationType_:e,options_:n,make_:Zt,extend_:Dt}}function Zt(e,n,o,s){var l;if(s===e.target_)return this.extend_(e,n,o,!1)===null?0:2;if((l=this.options_)!=null&&l.bound&&(!r1(e.target_,n)||!kn(e.target_[n]))&&this.extend_(e,n,o,!1)===null)return 0;if(kn(o.value))return 1;var c=tr(e,this,n,o,!1,!1);return Se(s,n,c),2}function Dt(e,n,o,s){var l,c=tr(e,this,n,o,(l=this.options_)==null?void 0:l.bound);return e.defineProperty_(n,c,s)}function hr(e,n,o,s){var l=n.annotationType_,c=s.value}function tr(e,n,o,s,l,c){c===void 0&&(c=le.safeDescriptors),hr(e,n,o,s);var d=s.value;if(kn(d)||(d=On(d)),l){var C;d=d.bind((C=e.proxy_)!=null?C:e.target_),d.isMobXFlow=!0}return{value:d,configurable:c?e.isPlainObject_:!0,enumerable:!1,writable:!c}}function U1(e,n){return{annotationType_:e,options_:n,make_:pr,extend_:rr}}function pr(e,n,o){return this.extend_(e,n,o,!1)===null?0:1}function rr(e,n,o,s){return Ir(e,this,n,o),e.defineComputedProperty_(n,Ft({},this.options_,{get:o.get,set:o.set}),s)}function Ir(e,n,o,s){var l=n.annotationType_,c=s.get}function Ut(e,n){return{annotationType_:e,options_:n,make_:f1,extend_:Pr}}function f1(e,n,o){return this.extend_(e,n,o,!1)===null?0:1}function Pr(e,n,o,s){var l,c;return m1(e,this,n,o),e.defineObservableProperty_(n,o.value,(l=(c=this.options_)==null?void 0:c.enhancer)!=null?l:ve,s)}function m1(e,n,o,s){var l=n.annotationType_}var Ar="true",R1=N1();function N1(e){return{annotationType_:Ar,options_:e,make_:K1,extend_:nr}}function K1(e,n,o,s){var l,c;if(o.get)return Ie.make_(e,n,o,s);if(o.set){var d=_1(n.toString(),o.set);return s===e.target_?e.defineProperty_(n,{configurable:le.safeDescriptors?e.isPlainObject_:!0,set:d})===null?0:2:(Se(s,n,{configurable:!0,set:d}),2)}if(s!==e.target_&&typeof o.value=="function"){var C;if(yt(o.value)){var g,m=(g=this.options_)!=null&&g.autoBind?On.bound:On;return m.make_(e,n,o,s)}var _=(C=this.options_)!=null&&C.autoBind?Hn.bound:Hn;return _.make_(e,n,o,s)}var y=((l=this.options_)==null?void 0:l.deep)===!1?pe.ref:pe;if(typeof o.value=="function"&&(c=this.options_)!=null&&c.autoBind){var L;o.value=o.value.bind((L=e.proxy_)!=null?L:e.target_)}return y.make_(e,n,o,s)}function nr(e,n,o,s){var l,c;if(o.get)return Ie.extend_(e,n,o,s);if(o.set)return e.defineProperty_(n,{configurable:le.safeDescriptors?e.isPlainObject_:!0,set:_1(n.toString(),o.set)},s);if(typeof o.value=="function"&&(l=this.options_)!=null&&l.autoBind){var d;o.value=o.value.bind((d=e.proxy_)!=null?d:e.target_)}var C=((c=this.options_)==null?void 0:c.deep)===!1?pe.ref:pe;return C.extend_(e,n,o,s)}var T1="observable",vr="observable.ref",Zr="observable.shallow",gr="observable.struct",ko={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(ko);function on(e){return e||ko}var Nn=Ut(T1),To=Ut(vr,{enhancer:ke}),Bo=Ut(Zr,{enhancer:Ae}),U=Ut(gr,{enhancer:pt}),te=Qe(Nn);function oe(e){return e.deep===!0?ve:e.deep===!1?ke:de(e.defaultDecorator)}function G(e){var n;return e?(n=e.defaultDecorator)!=null?n:N1(e):void 0}function de(e){var n,o;return e&&(n=(o=e.options_)==null?void 0:o.enhancer)!=null?n:ve}function _e(e,n,o){if(at(n)){he(e,n,Nn);return}return Tn(e)?e:Je(e)?pe.object(e,n,o):Array.isArray(e)?pe.array(e,n):C1(e)?pe.map(e,n):L1(e)?pe.set(e,n):typeof e=="object"&&e!==null?e:pe.box(e,n)}Object.assign(_e,te);var Me={box:function(n,o){var s=on(o);return new Cr(n,oe(s),s.name,!0,s.equals)},array:function(n,o){var s=on(o);return(le.useProxies===!1||s.proxy===!1?gc:ac)(n,oe(s),s.name)},map:function(n,o){var s=on(o);return new Rl(n,oe(s),s.name)},set:function(n,o){var s=on(o);return new Pl(n,oe(s),s.name)},object:function(n,o,s){return E(le.useProxies===!1||(s==null?void 0:s.proxy)===!1?qo({},s):nc({},s),n,o)},ref:Qe(To),shallow:Qe(Bo),deep:te,struct:Qe(U)},pe=Pe(_e,Me),ze="computed",We="computed.struct",Ve=U1(ze),Ne=U1(We,{equals:ue.structural}),Ie=function(n,o){if(at(o))return he(n,o,Ve);if(Je(n))return Qe(U1(ze,n));var s=Je(o)?o:{};return s.get=n,s.name||(s.name=n.name||""),new Cn(s)};Object.assign(Ie,Ve),Ie.struct=Qe(Ne);var wt,St,Nt=0,e1=1,t1=(wt=(St=He(function(){},"name"))==null?void 0:St.configurable)!=null?wt:!1,M1={value:"action",configurable:!0,writable:!1,enumerable:!1};function _1(e,n,o,s){o===void 0&&(o=!1);function l(){return or(e,o,n,s||this,arguments)}return l.isMobxAction=!0,t1&&(M1.value=e,Object.defineProperty(l,"name",M1)),l}function or(e,n,o,s,l){var c=ir(e,n,s,l);try{return o.apply(s,l)}catch(d){throw c.error_=d,d}finally{Kt(c)}}function ir(e,n,o,s){var l=!1,c=0;if(!1)var d;var C=le.trackingDerivation,g=!n||!C;w1();var m=le.allowStateChanges;g&&(mn(),m=h1(!0));var _=Ao(!0),y={runAsAction_:g,prevDerivation_:C,prevAllowStateChanges_:m,prevAllowStateReads_:_,notifySpy_:l,startTime_:c,actionId_:e1++,parentActionId_:Nt};return Nt=y.actionId_,y}function Kt(e){Nt!==e.actionId_&&J(30),Nt=e.parentActionId_,e.error_!==void 0&&(le.suppressReactionErrors=!0),sr(e.prevAllowStateChanges_),In(e.prevAllowStateReads_),b1(),e.runAsAction_&&Wr(e.prevDerivation_),le.suppressReactionErrors=!1}function I1(e,n){var o=h1(e);try{return n()}finally{sr(o)}}function h1(e){var n=le.allowStateChanges;return le.allowStateChanges=e,n}function sr(e){le.allowStateChanges=e}var Mn,Ci="create";Mn=Symbol.toPrimitive;var Cr=function(e,n){fr(o,e);function o(l,c,d,C,g){var m;return d===void 0&&(d="ObservableValue"),C===void 0&&(C=!0),g===void 0&&(g=ue.default),m=e.call(this,d)||this,m.enhancer=void 0,m.name_=void 0,m.equals=void 0,m.hasUnreportedChange_=!1,m.interceptors_=void 0,m.changeListeners_=void 0,m.value_=void 0,m.dehancer=void 0,m.enhancer=c,m.name_=d,m.equals=g,m.value_=c(l,void 0,d),m}var s=o.prototype;return s.dehanceValue=function(c){return this.dehancer!==void 0?this.dehancer(c):c},s.set=function(c){var d=this.value_;if(c=this.prepareNewValue_(c),c!==le.UNCHANGED){var C=ln();this.setNewValue_(c)}},s.prepareNewValue_=function(c){if(P1(this),_r(this)){var d=wr(this,{object:this,type:Fr,newValue:c});if(!d)return le.UNCHANGED;c=d.newValue}return c=this.enhancer(c,this.value_,this.name_),this.equals(this.value_,c)?le.UNCHANGED:c},s.setNewValue_=function(c){var d=this.value_;this.value_=c,this.reportChanged(),Hr(this)&&Or(this,{type:Fr,object:this,newValue:c,oldValue:d})},s.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},s.intercept_=function(c){return Go(this,c)},s.observe_=function(c,d){return d&&c({observableKind:"value",debugObjectName:this.name_,object:this,type:Fr,newValue:this.value_,oldValue:void 0}),Yo(this,c)},s.raw=function(){return this.value_},s.toJSON=function(){return this.get()},s.toString=function(){return this.name_+"["+this.value_+"]"},s.valueOf=function(){return J1(this.get())},s[n]=function(){return this.valueOf()},o}(Ge,Mn),Kn=null,mi;mi=Symbol.toPrimitive;var Cn=function(e){function n(s){this.dependenciesState_=bt.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=bt.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Xn(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=$r.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,s.get||J(31),this.derivation=s.get,this.name_=s.name||"ComputedValue",s.set&&(this.setter_=_1("ComputedValue-setter",s.set)),this.equals_=s.equals||(s.compareStructural||s.struct?ue.structural:ue.default),this.scope_=s.context,this.requiresReaction_=s.requiresReaction,this.keepAlive_=!!s.keepAlive}var o=n.prototype;return o.onBecomeStale_=function(){Ts(this)},o.onBO=function(){this.onBOL&&this.onBOL.forEach(function(l){return l()})},o.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(l){return l()})},o.get=function(){if(this.isComputing_&&J(32,this.name_,this.derivation),le.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)Vo(this)&&(this.warnAboutUntrackedRead_(),w1(),this.value_=this.computeValue_(!1),b1());else if(xi(this),Vo(this)){var l=le.trackingContext;this.keepAlive_&&!l&&(le.trackingContext=this),this.trackAndCompute()&&ks(this),le.trackingContext=l}var c=this.value_;if(Gn(c))throw c.cause;return c},o.set=function(l){if(this.setter_){this.isRunningSetter_&&J(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,l)}finally{this.isRunningSetter_=!1}}else J(34,this.name_)},o.trackAndCompute=function(){var l=this.value_,c=this.dependenciesState_===bt.NOT_TRACKING_,d=this.computeValue_(!0),C=c||Gn(l)||Gn(d)||!this.equals_(l,d);return C&&(this.value_=d),C},o.computeValue_=function(l){this.isComputing_=!0;var c=h1(!1),d;if(l)d=Do(this,this.derivation,this.scope_);else if(le.disableErrorBoundaries===!0)d=this.derivation.call(this.scope_);else try{d=this.derivation.call(this.scope_)}catch(C){d=new Xn(C)}return sr(c),this.isComputing_=!1,d},o.suspend_=function(){this.keepAlive_||(jo(this),this.value_=void 0)},o.observe_=function(l,c){var d=this,C=!0,g=void 0;return io(function(){var m=d.get();if(!C||c){var _=mn();l({observableKind:"computed",debugObjectName:d.name_,type:Fr,object:d,newValue:m,oldValue:g}),Wr(_)}C=!1,g=m})},o.warnAboutUntrackedRead_=function(){},o.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},o.valueOf=function(){return J1(this.get())},o[e]=function(){return this.valueOf()},n}(mi),sn=s1("ComputedValue",Cn),bt;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(bt||(bt={}));var $r;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})($r||($r={}));var Xn=function(n){this.cause=void 0,this.cause=n};function Gn(e){return e instanceof Xn}function Vo(e){switch(e.dependenciesState_){case bt.UP_TO_DATE_:return!1;case bt.NOT_TRACKING_:case bt.STALE_:return!0;case bt.POSSIBLY_STALE_:{for(var n=Ao(!0),o=mn(),s=e.observing_,l=s.length,c=0;c<l;c++){var d=s[c];if(sn(d)){if(le.disableErrorBoundaries)d.get();else try{d.get()}catch{return Wr(o),In(n),!0}if(e.dependenciesState_===bt.STALE_)return Wr(o),In(n),!0}}return _i(e),Wr(o),In(n),!1}}}function ll(){return le.trackingDerivation!==null}function P1(e){return;var n}function cl(e){}function Do(e,n,o){var s=Ao(!0);_i(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++le.runId;var l=le.trackingDerivation;le.trackingDerivation=e,le.inBatch++;var c;if(le.disableErrorBoundaries===!0)c=n.call(o);else try{c=n.call(o)}catch(d){c=new Xn(d)}return le.inBatch--,le.trackingDerivation=l,an(e),In(s),c}function dl(e){}function an(e){for(var n=e.observing_,o=e.observing_=e.newObserving_,s=bt.UP_TO_DATE_,l=0,c=e.unboundDepsCount_,d=0;d<c;d++){var C=o[d];C.diffValue_===0&&(C.diffValue_=1,l!==d&&(o[l]=C),l++),C.dependenciesState_>s&&(s=C.dependenciesState_)}for(o.length=l,e.newObserving_=null,c=n.length;c--;){var g=n[c];g.diffValue_===0&&wi(g,e),g.diffValue_=0}for(;l--;){var m=o[l];m.diffValue_===1&&(m.diffValue_=0,$n(m,e))}s!==bt.UP_TO_DATE_&&(e.dependenciesState_=s,e.onBecomeStale_())}function jo(e){var n=e.observing_;e.observing_=[];for(var o=n.length;o--;)wi(n[o],e);e.dependenciesState_=bt.NOT_TRACKING_}function Yn(e){var n=mn();try{return e()}finally{Wr(n)}}function mn(){var e=le.trackingDerivation;return le.trackingDerivation=null,e}function Wr(e){le.trackingDerivation=e}function Ao(e){var n=le.allowStateReads;return le.allowStateReads=e,n}function In(e){le.allowStateReads=e}function _i(e){if(e.dependenciesState_!==bt.UP_TO_DATE_){e.dependenciesState_=bt.UP_TO_DATE_;for(var n=e.observing_,o=n.length;o--;)n[o].lowestObserverState_=bt.UP_TO_DATE_}}var Zo=null,Pn=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},qn=!0,Wo=!1,le=function(){var e=je();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(qn=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new Pn().version&&(qn=!1),qn?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new Pn):(setTimeout(function(){Wo||J(35)},1),new Pn)}();function Jn(){if((le.pendingReactions.length||le.inBatch||le.isRunningReactions)&&J(36),Wo=!0,qn){var e=je();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),le=new Pn}}function ul(){return le}function Qn(){var e=new Pn;for(var n in e)Zo.indexOf(n)===-1&&(le[n]=e[n]);le.allowStateChanges=!le.enforceActions}function Hs(e){return e.observers_&&e.observers_.size>0}function Os(e){return e.observers_}function $n(e,n){e.observers_.add(n),e.lowestObserverState_>n.dependenciesState_&&(e.lowestObserverState_=n.dependenciesState_)}function wi(e,n){e.observers_.delete(n),e.observers_.size===0&&bi(e)}function bi(e){e.isPendingUnobservation_===!1&&(e.isPendingUnobservation_=!0,le.pendingUnobservations.push(e))}function w1(){le.inBatch++}function b1(){if(--le.inBatch===0){Ei();for(var e=le.pendingUnobservations,n=0;n<e.length;n++){var o=e[n];o.isPendingUnobservation_=!1,o.observers_.size===0&&(o.isBeingObserved_&&(o.isBeingObserved_=!1,o.onBUO()),o instanceof Cn&&o.suspend_())}le.pendingUnobservations=[]}}function xi(e){var n=le.trackingDerivation;return n!==null?(n.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=n.runId_,n.newObserving_[n.unboundDepsCount_++]=e,!e.isBeingObserved_&&le.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),!0):(e.observers_.size===0&&le.inBatch>0&&bi(e),!1)}function yi(e){e.lowestObserverState_!==bt.STALE_&&(e.lowestObserverState_=bt.STALE_,e.observers_.forEach(function(n){n.dependenciesState_===bt.UP_TO_DATE_&&n.onBecomeStale_(),n.dependenciesState_=bt.STALE_}))}function ks(e){e.lowestObserverState_!==bt.STALE_&&(e.lowestObserverState_=bt.STALE_,e.observers_.forEach(function(n){n.dependenciesState_===bt.POSSIBLY_STALE_?n.dependenciesState_=bt.STALE_:n.dependenciesState_===bt.UP_TO_DATE_&&(e.lowestObserverState_=bt.UP_TO_DATE_)}))}function Ts(e){e.lowestObserverState_===bt.UP_TO_DATE_&&(e.lowestObserverState_=bt.POSSIBLY_STALE_,e.observers_.forEach(function(n){n.dependenciesState_===bt.UP_TO_DATE_&&(n.dependenciesState_=bt.POSSIBLY_STALE_,n.onBecomeStale_())}))}function fl(e,n){if(console.log("[mobx.trace] '"+e.name_+"' is invalidated due to a change in: '"+n.name_+"'"),e.isTracing_===$r.BREAK){var o=[];eo(I(e),o,1),new Function(`debugger;
/*
Tracing '`+e.name_+`'

You are entering this break point because derivation '`+e.name_+"' is being traced and '"+n.name_+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(e instanceof Cn?e.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+o.join(`
`)+`
*/
    `)()}}function eo(e,n,o){if(n.length>=1e3){n.push("(and many more)");return}n.push(""+"	".repeat(o-1)+e.name),e.dependencies&&e.dependencies.forEach(function(s){return eo(s,n,o+1)})}var X1=function(){function e(o,s,l,c){o===void 0&&(o="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=bt.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=$r.NONE,this.name_=o,this.onInvalidate_=s,this.errorHandler_=l,this.requiresObservable_=c}var n=e.prototype;return n.onBecomeStale_=function(){this.schedule_()},n.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,le.pendingReactions.push(this),Ei())},n.isScheduled=function(){return this.isScheduled_},n.runReaction_=function(){if(!this.isDisposed_){w1(),this.isScheduled_=!1;var s=le.trackingContext;if(le.trackingContext=this,Vo(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(l){this.reportExceptionInDerivation_(l)}}le.trackingContext=s,b1()}},n.track=function(s){if(!this.isDisposed_){w1();var l=ln(),c;this.isRunning_=!0;var d=le.trackingContext;le.trackingContext=this;var C=Do(this,s,void 0);le.trackingContext=d,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&jo(this),Gn(C)&&this.reportExceptionInDerivation_(C.cause),b1()}},n.reportExceptionInDerivation_=function(s){var l=this;if(this.errorHandler_){this.errorHandler_(s,this);return}if(le.disableErrorBoundaries)throw s;var c="[mobx] uncaught error in '"+this+"'";le.suppressReactionErrors||console.error(c,s),le.globalReactionErrorHandlers.forEach(function(d){return d(s,l)})},n.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(w1(),jo(this),b1()))},n.getDisposer_=function(){var s=this.dispose.bind(this);return s[ie]=this,s},n.toString=function(){return"Reaction["+this.name_+"]"},n.trace=function(s){s===void 0&&(s=!1),Q9(this,s)},e}();function hl(e){return le.globalReactionErrorHandlers.push(e),function(){var n=le.globalReactionErrorHandlers.indexOf(e);n>=0&&le.globalReactionErrorHandlers.splice(n,1)}}var Bs=100,Fo=function(n){return n()};function Ei(){le.inBatch>0||le.isRunningReactions||Fo(Li)}function Li(){le.isRunningReactions=!0;for(var e=le.pendingReactions,n=0;e.length>0;){++n===Bs&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var o=e.splice(0),s=0,l=o.length;s<l;s++)o[s].runReaction_()}le.isRunningReactions=!1}var to=s1("Reaction",X1);function Si(e){var n=Fo;Fo=function(s){return e(function(){return n(s)})}}function ln(){return!1}function zo(e){return;for(var n,o,s;o<s;o++)n[o](e)}function pl(e){return;var n}var Vs={type:"report-end",spyReportEnd:!0};function vl(e){}function Ds(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var Ri="action",js="action.bound",Mi="autoAction",Ii="autoAction.bound",Pi="<unnamed action>",$i=Gt(Ri),vt=Gt(js,{bound:!0}),ro=Gt(Mi,{autoAction:!0}),no=Gt(Ii,{autoAction:!0,bound:!0});function Hi(e){var n=function(s,l){if(Be(s))return _1(s.name||Pi,s,e);if(Be(l))return _1(s,l,e);if(at(l))return he(s,l,e?ro:$i);if(at(s))return Qe(Gt(e?Mi:Ri,{name:s,autoAction:e}))};return n}var cn=Hi(!1);Object.assign(cn,$i);var Hn=Hi(!0);Object.assign(Hn,ro),cn.bound=Qe(vt),Hn.bound=Qe(no);function gl(e){return or(e.name||Pi,!1,e,this,void 0)}function oo(e){return Be(e)&&e.isMobxAction===!0}function io(e,n){var o,s;n===void 0&&(n=se);var l=(o=(s=n)==null?void 0:s.name)!=null?o:"Autorun",c=!n.scheduler&&!n.delay,d;if(c)d=new X1(l,function(){this.track(m)},n.onError,n.requiresObservable);else{var C=Oi(n),g=!1;d=new X1(l,function(){g||(g=!0,C(function(){g=!1,d.isDisposed_||d.track(m)}))},n.onError,n.requiresObservable)}function m(){e(d)}return d.schedule_(),d.getDisposer_()}var As=function(n){return n()};function Oi(e){return e.scheduler?e.scheduler:e.delay?function(n){return setTimeout(n,e.delay)}:As}function Cl(e,n,o){var s;o===void 0&&(o=se);var l=(s=o.name)!=null?s:"Reaction",c=cn(l,o.onError?Zs(o.onError,n):n),d=!o.scheduler&&!o.delay,C=Oi(o),g=!0,m=!1,_,y,L=o.compareStructural?ue.structural:o.equals||ue.default,S=new X1(l,function(){g||d?R():m||(m=!0,C(R))},o.onError,o.requiresObservable);function R(){if(m=!1,!S.isDisposed_){var $=!1;S.track(function(){var k=I1(!1,function(){return e(S)});$=g||!L(_,k),y=_,_=k}),(g&&o.fireImmediately||!g&&$)&&c(_,y,S),g=!1}}return S.schedule_(),S.getDisposer_()}function Zs(e,n){return function(){try{return n.apply(this,arguments)}catch(o){e.call(this,o)}}}var Ws="onBO",ki="onBUO";function Fs(e,n,o){return Uo(Ws,e,n,o)}function Ti(e,n,o){return Uo(ki,e,n,o)}function Uo(e,n,o,s){var l=typeof s=="function"?zr(n,o):zr(n),c=Be(s)?s:o,d=e+"L";return l[d]?l[d].add(c):l[d]=new Set([c]),function(){var C=l[d];C&&(C.delete(c),C.size===0&&delete l[d])}}var No="never",so="always",x="observed";function w(e){e.isolateGlobalState===!0&&Jn();var n=e.useProxies,o=e.enforceActions;if(n!==void 0&&(le.useProxies=n===so?!0:n===No?!1:typeof Proxy<"u"),n==="ifavailable"&&(le.verifyProxies=!0),o!==void 0){var s=o===so?so:o===x;le.enforceActions=s,le.allowStateChanges=!(s===!0||s===so)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(l){l in e&&(le[l]=!!e[l])}),le.allowStateReads=!le.observableRequiresReaction,e.reactionScheduler&&Si(e.reactionScheduler)}function E(e,n,o,s){var l=Q1(n),c=qo(e,s)[ie];w1();try{S1(l).forEach(function(d){c.extend_(d,l[d],o&&d in o?o[d]:!0)})}finally{b1()}return e}function I(e,n){return O(zr(e,n))}function O(e){var n={name:e.name_};return e.observing_&&e.observing_.length>0&&(n.dependencies=xe(e.observing_).map(O)),n}function A(e,n){return Q(zr(e,n))}function Q(e){var n={name:e.name_};return Hs(e)&&(n.observers=Array.from(Os(e)).map(Q)),n}function xe(e){return Array.from(new Set(e))}var et=0;function xt(){this.message="FLOW_CANCELLED"}xt.prototype=Object.create(Error.prototype);function c1(e){return e instanceof xt}var x1=er("flow"),mr=er("flow.bound",{bound:!0}),On=Object.assign(function(n,o){if(at(o))return he(n,o,x1);var s=n,l=s.name||"<unnamed flow>",c=function(){var C=this,g=arguments,m=++et,_=cn(l+" - runid: "+m+" - init",s).apply(C,g),y,L=void 0,S=new Promise(function(R,$){var k=0;y=$;function T(z){L=void 0;var j;try{j=cn(l+" - runid: "+m+" - yield "+k++,_.next).call(_,z)}catch(X){return $(X)}Z(j)}function H(z){L=void 0;var j;try{j=cn(l+" - runid: "+m+" - yield "+k++,_.throw).call(_,z)}catch(X){return $(X)}Z(j)}function Z(z){if(Be(z==null?void 0:z.then)){z.then(Z,$);return}return z.done?R(z.value):(L=Promise.resolve(z.value),L.then(T,H))}T(void 0)});return S.cancel=cn(l+" - runid: "+m+" - cancel",function(){try{L&&Ko(L);var R=_.return(void 0),$=Promise.resolve(R.value);$.then(Xe,Xe),Ko($),y(new xt)}catch(k){y(k)}}),S};return c.isMobXFlow=!0,c},x1);On.bound=Qe(mr);function Ko(e){Be(e.cancel)&&e.cancel()}function ml(e){return e}function kn(e){return(e==null?void 0:e.isMobXFlow)===!0}function _l(e,n,o){var s;return B1(e)||ar(e)||Kn(e)?s=bn(e):V1(e)&&(s=bn(e,n)),s.dehancer=typeof n=="function"?n:o,function(){s.dehancer=void 0}}function zs(e,n,o){return Be(o)?Ns(e,n,o):Us(e,n)}function Us(e,n){return bn(e).intercept_(n)}function Ns(e,n,o){return bn(e,n).intercept_(o)}function Xo(e,n){if(n===void 0)return sn(e);if(V1(e)===!1||!e[ie].values_.has(n))return!1;var o=zr(e,n);return sn(o)}function Ks(e){return Xo(e)}function Xs(e,n){return Xo(e,n)}function ao(e,n){return e?n!==void 0?V1(e)?e[ie].values_.has(n):!1:V1(e)||!!e[ie]||ft(e)||to(e)||sn(e):!1}function Tn(e){return ao(e)}function Gs(e,n){return ao(e,n)}function lo(e){if(V1(e))return e[ie].keys_();if(B1(e)||G1(e))return Array.from(e.keys());if(ar(e))return e.map(function(n,o){return o});J(5)}function wl(e){if(V1(e))return lo(e).map(function(n){return e[n]});if(B1(e))return lo(e).map(function(n){return e.get(n)});if(G1(e))return Array.from(e.values());if(ar(e))return e.slice();J(6)}function bl(e){if(V1(e))return lo(e).map(function(n){return[n,e[n]]});if(B1(e))return lo(e).map(function(n){return[n,e.get(n)]});if(G1(e))return Array.from(e.entries());if(ar(e))return e.map(function(n,o){return[o,n]});J(7)}function Ys(e,n,o){if(arguments.length===2&&!G1(e)){w1();var s=n;try{for(var l in s)Ys(e,l,s[l])}finally{b1()}return}V1(e)?e[ie].set_(n,o):B1(e)?e.set(n,o):G1(e)?e.add(n):ar(e)?(typeof n!="number"&&(n=parseInt(n,10)),n<0&&J("Invalid index: '"+n+"'"),w1(),n>=e.length&&(e.length=n+1),e[n]=o,b1()):J(8)}function qs(e,n){V1(e)?e[ie].delete_(n):B1(e)||G1(e)?e.delete(n):ar(e)?(typeof n!="number"&&(n=parseInt(n,10)),e.splice(n,1)):J(9)}function G9(e,n){if(V1(e))return e[ie].has_(n);if(B1(e))return e.has(n);if(G1(e))return e.has(n);if(ar(e))return n>=0&&n<e.length;J(10)}function ip(e,n){if(!!G9(e,n)){if(V1(e))return e[ie].get_(n);if(B1(e))return e.get(n);if(ar(e))return e[n];J(11)}}function sp(e,n,o){if(V1(e))return e[ie].defineProperty_(n,o);J(39)}function Y9(e){if(V1(e))return e[ie].ownKeys_();J(38)}function ap(e,n,o,s){return Be(o)?J9(e,n,o,s):q9(e,n,o)}function q9(e,n,o){return bn(e).observe_(n,o)}function J9(e,n,o,s){return bn(e,n).observe_(o,s)}function Bi(e,n,o){return e.set(n,o),o}function co(e,n){if(e==null||typeof e!="object"||e instanceof Date||!Tn(e))return e;if(Kn(e)||sn(e))return co(e.get(),n);if(n.has(e))return n.get(e);if(ar(e)){var o=Bi(n,e,new Array(e.length));return e.forEach(function(d,C){o[C]=co(d,n)}),o}if(G1(e)){var s=Bi(n,e,new Set);return e.forEach(function(d){s.add(co(d,n))}),s}if(B1(e)){var l=Bi(n,e,new Map);return e.forEach(function(d,C){l.set(C,co(d,n))}),l}else{var c=Bi(n,e,{});return Y9(e).forEach(function(d){ye.propertyIsEnumerable.call(e,d)&&(c[d]=co(e[d],n))}),c}}function lp(e,n){return co(e,new Map)}function Q9(){J("trace() is not available in production builds");for(var e=!1,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];typeof o[o.length-1]=="boolean"&&(e=o.pop());var l=ec(o);if(!l)return J("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");l.isTracing_===$r.NONE&&console.log("[mobx.trace] '"+l.name_+"' tracing enabled"),l.isTracing_=e?$r.BREAK:$r.LOG}function ec(e){switch(e.length){case 0:return le.trackingDerivation;case 1:return zr(e[0]);case 2:return zr(e[0],e[1])}}function dn(e,n){n===void 0&&(n=void 0),w1();try{return e.apply(n)}finally{b1()}}function cp(e,n,o){return arguments.length===1||n&&typeof n=="object"?tc(e,n):xl(e,n,o||{})}function xl(e,n,o){var s;if(typeof o.timeout=="number"){var l=new Error("WHEN_TIMEOUT");s=setTimeout(function(){if(!d[ie].isDisposed_)if(d(),o.onError)o.onError(l);else throw l},o.timeout)}o.name="When";var c=_1("When-effect",n),d=io(function(C){var g=I1(!1,e);g&&(C.dispose(),s&&clearTimeout(s),c())},o);return d}function tc(e,n){var o,s=new Promise(function(l,c){var d=xl(e,l,Ft({},n,{onError:c}));o=function(){d(),c(new Error("WHEN_CANCELLED"))}});return s.cancel=o,s}function uo(e){return e[ie]}var rc={has:function(n,o){return uo(n).has_(o)},get:function(n,o){return uo(n).get_(o)},set:function(n,o,s){var l;return at(o)?(l=uo(n).set_(o,s,!0))!=null?l:!0:!1},deleteProperty:function(n,o){var s;return at(o)?(s=uo(n).delete_(o,!0))!=null?s:!0:!1},defineProperty:function(n,o,s){var l;return(l=uo(n).defineProperty_(o,s))!=null?l:!0},ownKeys:function(n){return uo(n).ownKeys_()},preventExtensions:function(n){J(13)}};function nc(e,n){var o,s;return ne(),e=qo(e,n),(s=(o=e[ie]).proxy_)!=null?s:o.proxy_=new Proxy(e,rc)}function _r(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function Go(e,n){var o=e.interceptors_||(e.interceptors_=[]);return o.push(n),$e(function(){var s=o.indexOf(n);s!==-1&&o.splice(s,1)})}function wr(e,n){var o=mn();try{for(var s=[].concat(e.interceptors_||[]),l=0,c=s.length;l<c&&(n=s[l](n),n&&!n.type&&J(14),!!n);l++);return n}finally{Wr(o)}}function Hr(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function Yo(e,n){var o=e.changeListeners_||(e.changeListeners_=[]);return o.push(n),$e(function(){var s=o.indexOf(n);s!==-1&&o.splice(s,1)})}function Or(e,n){var o=mn(),s=e.changeListeners_;if(!!s){s=s.slice();for(var l=0,c=s.length;l<c;l++)s[l](n);Wr(o)}}function oc(e,n,o){var s=qo(e,o)[ie];w1();try{var l;(l=n)!=null||(n=Ze(e)),S1(n).forEach(function(c){return s.make_(c,n[c])})}finally{b1()}return e}var Js=null;function dp(e,n,o){if(Je(e))return E(e,e,n,o);var s=qo(e,o)[ie];if(!e[Js]){var l=Object.getPrototypeOf(e),c=new Set([].concat(S1(e),S1(l)));c.delete("constructor"),c.delete(ie),ot(l,Js,c)}w1();try{e[Js].forEach(function(d){return s.make_(d,n&&d in n?n[d]:!0)})}finally{b1()}return e}var yl="splice",Fr="update",ic=1e4,sc={get:function(n,o){var s=n[ie];return o===ie?s:o==="length"?s.getArrayLength_():typeof o=="string"&&!isNaN(o)?s.get_(parseInt(o)):r1(Vi,o)?Vi[o]:n[o]},set:function(n,o,s){var l=n[ie];return o==="length"&&l.setArrayLength_(s),typeof o=="symbol"||isNaN(o)?n[o]=s:l.set_(parseInt(o),s),!0},preventExtensions:function(){J(15)}},Qs=function(){function e(o,s,l,c){o===void 0&&(o="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=l,this.legacyMode_=c,this.atom_=new Ge(o),this.enhancer_=function(d,C){return s(d,C,"ObservableArray[..]")}}var n=e.prototype;return n.dehanceValue_=function(s){return this.dehancer!==void 0?this.dehancer(s):s},n.dehanceValues_=function(s){return this.dehancer!==void 0&&s.length>0?s.map(this.dehancer):s},n.intercept_=function(s){return Go(this,s)},n.observe_=function(s,l){return l===void 0&&(l=!1),l&&s({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Yo(this,s)},n.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},n.setArrayLength_=function(s){(typeof s!="number"||isNaN(s)||s<0)&&J("Out of range: "+s);var l=this.values_.length;if(s!==l)if(s>l){for(var c=new Array(s-l),d=0;d<s-l;d++)c[d]=void 0;this.spliceWithArray_(l,0,c)}else this.spliceWithArray_(s,l-s)},n.updateArrayLength_=function(s,l){s!==this.lastKnownLength_&&J(16),this.lastKnownLength_+=l,this.legacyMode_&&l>0&&Dl(s+l+1)},n.spliceWithArray_=function(s,l,c){var d=this;P1(this.atom_);var C=this.values_.length;if(s===void 0?s=0:s>C?s=C:s<0&&(s=Math.max(0,C+s)),arguments.length===1?l=C-s:l==null?l=0:l=Math.max(0,Math.min(l,C-s)),c===void 0&&(c=ge),_r(this)){var g=wr(this,{object:this.proxy_,type:yl,index:s,removedCount:l,added:c});if(!g)return ge;l=g.removedCount,c=g.added}if(c=c.length===0?c:c.map(function(y){return d.enhancer_(y,void 0)}),this.legacyMode_){var m=c.length-l;this.updateArrayLength_(C,m)}var _=this.spliceItemsIntoValues_(s,l,c);return(l!==0||c.length!==0)&&this.notifyArraySplice_(s,c,_),this.dehanceValues_(_)},n.spliceItemsIntoValues_=function(s,l,c){if(c.length<ic){var d;return(d=this.values_).splice.apply(d,[s,l].concat(c))}else{var C=this.values_.slice(s,s+l),g=this.values_.slice(s+l);this.values_.length+=c.length-l;for(var m=0;m<c.length;m++)this.values_[s+m]=c[m];for(var _=0;_<g.length;_++)this.values_[s+c.length+_]=g[_];return C}},n.notifyArrayChildUpdate_=function(s,l,c){var d=!this.owned_&&ln(),C=Hr(this),g=C||d?{observableKind:"array",object:this.proxy_,type:Fr,debugObjectName:this.atom_.name_,index:s,newValue:l,oldValue:c}:null;this.atom_.reportChanged(),C&&Or(this,g)},n.notifyArraySplice_=function(s,l,c){var d=!this.owned_&&ln(),C=Hr(this),g=C||d?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:yl,index:s,removed:c,added:l,removedCount:c.length,addedCount:l.length}:null;this.atom_.reportChanged(),C&&Or(this,g)},n.get_=function(s){if(s<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[s]);console.warn("[mobx.array] Attempt to read an array index ("+s+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},n.set_=function(s,l){var c=this.values_;if(s<c.length){P1(this.atom_);var d=c[s];if(_r(this)){var C=wr(this,{type:Fr,object:this.proxy_,index:s,newValue:l});if(!C)return;l=C.newValue}l=this.enhancer_(l,d);var g=l!==d;g&&(c[s]=l,this.notifyArrayChildUpdate_(s,l,d))}else s===c.length?this.spliceWithArray_(s,0,[l]):J(17,s,c.length)},e}();function ac(e,n,o,s){o===void 0&&(o="ObservableArray"),s===void 0&&(s=!1),ne();var l=new Qs(o,n,s,!1);Wt(l.values_,ie,l);var c=new Proxy(l.values_,sc);if(l.proxy_=c,e&&e.length){var d=h1(!0);l.spliceWithArray_(0,0,e),sr(d)}return c}var Vi={clear:function(){return this.splice(0)},replace:function(n){var o=this[ie];return o.spliceWithArray_(0,o.values_.length,n)},toJSON:function(){return this.slice()},splice:function(n,o){for(var s=arguments.length,l=new Array(s>2?s-2:0),c=2;c<s;c++)l[c-2]=arguments[c];var d=this[ie];switch(arguments.length){case 0:return[];case 1:return d.spliceWithArray_(n);case 2:return d.spliceWithArray_(n,o)}return d.spliceWithArray_(n,o,l)},spliceWithArray:function(n,o,s){return this[ie].spliceWithArray_(n,o,s)},push:function(){for(var n=this[ie],o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return n.spliceWithArray_(n.values_.length,0,s),n.values_.length},pop:function(){return this.splice(Math.max(this[ie].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var n=this[ie],o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return n.spliceWithArray_(0,0,s),n.values_.length},reverse:function(){return le.trackingDerivation&&J(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){le.trackingDerivation&&J(37,"sort");var n=this.slice();return n.sort.apply(n,arguments),this.replace(n),this},remove:function(n){var o=this[ie],s=o.dehanceValues_(o.values_).indexOf(n);return s>-1?(this.splice(s,1),!0):!1}};p1("concat",un),p1("flat",un),p1("includes",un),p1("indexOf",un),p1("join",un),p1("lastIndexOf",un),p1("slice",un),p1("toString",un),p1("toLocaleString",un),p1("every",_n),p1("filter",_n),p1("find",_n),p1("findIndex",_n),p1("flatMap",_n),p1("forEach",_n),p1("map",_n),p1("some",_n),p1("reduce",El),p1("reduceRight",El);function p1(e,n){typeof Array.prototype[e]=="function"&&(Vi[e]=n(e))}function un(e){return function(){var n=this[ie];n.atom_.reportObserved();var o=n.dehanceValues_(n.values_);return o[e].apply(o,arguments)}}function _n(e){return function(n,o){var s=this,l=this[ie];l.atom_.reportObserved();var c=l.dehanceValues_(l.values_);return c[e](function(d,C){return n.call(o,d,C,s)})}}function El(e){return function(){var n=this,o=this[ie];o.atom_.reportObserved();var s=o.dehanceValues_(o.values_),l=arguments[0];return arguments[0]=function(c,d,C){return l(c,d,C,n)},s[e].apply(s,arguments)}}var lc=s1("ObservableArrayAdministration",Qs);function ar(e){return ht(e)&&lc(e[ie])}var Ll,Sl,cc={},wn="add",Di="delete";Ll=Symbol.iterator,Sl=Symbol.toStringTag;var Rl=function(e,n){function o(l,c,d){var C=this;c===void 0&&(c=ve),d===void 0&&(d="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[ie]=cc,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=c,this.name_=d,Be(Map)||J(18),this.keysAtom_=Et("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,I1(!0,function(){C.merge(l)})}var s=o.prototype;return s.has_=function(c){return this.data_.has(c)},s.has=function(c){var d=this;if(!le.trackingDerivation)return this.has_(c);var C=this.hasMap_.get(c);if(!C){var g=C=new Cr(this.has_(c),ke,"ObservableMap.key?",!1);this.hasMap_.set(c,g),Ti(g,function(){return d.hasMap_.delete(c)})}return C.get()},s.set=function(c,d){var C=this.has_(c);if(_r(this)){var g=wr(this,{type:C?Fr:wn,object:this,newValue:d,name:c});if(!g)return this;d=g.newValue}return C?this.updateValue_(c,d):this.addValue_(c,d),this},s.delete=function(c){var d=this;if(P1(this.keysAtom_),_r(this)){var C=wr(this,{type:Di,object:this,name:c});if(!C)return!1}if(this.has_(c)){var g=ln(),m=Hr(this),_=m||g?{observableKind:"map",debugObjectName:this.name_,type:Di,object:this,oldValue:this.data_.get(c).value_,name:c}:null;return dn(function(){var y;d.keysAtom_.reportChanged(),(y=d.hasMap_.get(c))==null||y.setNewValue_(!1);var L=d.data_.get(c);L.setNewValue_(void 0),d.data_.delete(c)}),m&&Or(this,_),!0}return!1},s.updateValue_=function(c,d){var C=this.data_.get(c);if(d=C.prepareNewValue_(d),d!==le.UNCHANGED){var g=ln(),m=Hr(this),_=m||g?{observableKind:"map",debugObjectName:this.name_,type:Fr,object:this,oldValue:C.value_,name:c,newValue:d}:null;C.setNewValue_(d),m&&Or(this,_)}},s.addValue_=function(c,d){var C=this;P1(this.keysAtom_),dn(function(){var y,L=new Cr(d,C.enhancer_,"ObservableMap.key",!1);C.data_.set(c,L),d=L.value_,(y=C.hasMap_.get(c))==null||y.setNewValue_(!0),C.keysAtom_.reportChanged()});var g=ln(),m=Hr(this),_=m||g?{observableKind:"map",debugObjectName:this.name_,type:wn,object:this,name:c,newValue:d}:null;m&&Or(this,_)},s.get=function(c){return this.has(c)?this.dehanceValue_(this.data_.get(c).get()):this.dehanceValue_(void 0)},s.dehanceValue_=function(c){return this.dehancer!==void 0?this.dehancer(c):c},s.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},s.values=function(){var c=this,d=this.keys();return Jo({next:function(){var g=d.next(),m=g.done,_=g.value;return{done:m,value:m?void 0:c.get(_)}}})},s.entries=function(){var c=this,d=this.keys();return Jo({next:function(){var g=d.next(),m=g.done,_=g.value;return{done:m,value:m?void 0:[_,c.get(_)]}}})},s[e]=function(){return this.entries()},s.forEach=function(c,d){for(var C=n1(this),g;!(g=C()).done;){var m=g.value,_=m[0],y=m[1];c.call(d,y,_,this)}},s.merge=function(c){var d=this;return B1(c)&&(c=new Map(c)),dn(function(){Je(c)?W1(c).forEach(function(C){return d.set(C,c[C])}):Array.isArray(c)?c.forEach(function(C){var g=C[0],m=C[1];return d.set(g,m)}):C1(c)?(c.constructor!==Map&&J(19,c),c.forEach(function(C,g){return d.set(g,C)})):c!=null&&J(20,c)}),this},s.clear=function(){var c=this;dn(function(){Yn(function(){for(var d=n1(c.keys()),C;!(C=d()).done;){var g=C.value;c.delete(g)}})})},s.replace=function(c){var d=this;return dn(function(){for(var C=dc(c),g=new Map,m=!1,_=n1(d.data_.keys()),y;!(y=_()).done;){var L=y.value;if(!C.has(L)){var S=d.delete(L);if(S)m=!0;else{var R=d.data_.get(L);g.set(L,R)}}}for(var $=n1(C.entries()),k;!(k=$()).done;){var T=k.value,H=T[0],Z=T[1],z=d.data_.has(H);if(d.set(H,Z),d.data_.has(H)){var j=d.data_.get(H);g.set(H,j),z||(m=!0)}}if(!m)if(d.data_.size!==g.size)d.keysAtom_.reportChanged();else for(var X=d.data_.keys(),F=g.keys(),q=X.next(),fe=F.next();!q.done;){if(q.value!==fe.value){d.keysAtom_.reportChanged();break}q=X.next(),fe=F.next()}d.data_=g}),this},s.toString=function(){return"[object ObservableMap]"},s.toJSON=function(){return Array.from(this)},s.observe_=function(c,d){return Yo(this,c)},s.intercept_=function(c){return Go(this,c)},F1(o,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:n,get:function(){return"Map"}}]),o}(Ll,Sl),B1=s1("ObservableMap",Rl);function dc(e){if(C1(e)||B1(e))return e;if(Array.isArray(e))return new Map(e);if(Je(e)){var n=new Map;for(var o in e)n.set(o,e[o]);return n}else return J(21,e)}var Ml,Il,uc={};Ml=Symbol.iterator,Il=Symbol.toStringTag;var Pl=function(e,n){function o(l,c,d){c===void 0&&(c=ve),d===void 0&&(d="ObservableSet"),this.name_=void 0,this[ie]=uc,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=d,Be(Set)||J(22),this.atom_=Et(this.name_),this.enhancer_=function(C,g){return c(C,g,d)},l&&this.replace(l)}var s=o.prototype;return s.dehanceValue_=function(c){return this.dehancer!==void 0?this.dehancer(c):c},s.clear=function(){var c=this;dn(function(){Yn(function(){for(var d=n1(c.data_.values()),C;!(C=d()).done;){var g=C.value;c.delete(g)}})})},s.forEach=function(c,d){for(var C=n1(this),g;!(g=C()).done;){var m=g.value;c.call(d,m,m,this)}},s.add=function(c){var d=this;if(P1(this.atom_),_r(this)){var C=wr(this,{type:wn,object:this,newValue:c});if(!C)return this}if(!this.has(c)){dn(function(){d.data_.add(d.enhancer_(c,void 0)),d.atom_.reportChanged()});var g=!1,m=Hr(this),_=m||g?{observableKind:"set",debugObjectName:this.name_,type:wn,object:this,newValue:c}:null;m&&Or(this,_)}return this},s.delete=function(c){var d=this;if(_r(this)){var C=wr(this,{type:Di,object:this,oldValue:c});if(!C)return!1}if(this.has(c)){var g=!1,m=Hr(this),_=m||g?{observableKind:"set",debugObjectName:this.name_,type:Di,object:this,oldValue:c}:null;return dn(function(){d.atom_.reportChanged(),d.data_.delete(c)}),m&&Or(this,_),!0}return!1},s.has=function(c){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(c))},s.entries=function(){var c=0,d=Array.from(this.keys()),C=Array.from(this.values());return Jo({next:function(){var m=c;return c+=1,m<C.length?{value:[d[m],C[m]],done:!1}:{done:!0}}})},s.keys=function(){return this.values()},s.values=function(){this.atom_.reportObserved();var c=this,d=0,C=Array.from(this.data_.values());return Jo({next:function(){return d<C.length?{value:c.dehanceValue_(C[d++]),done:!1}:{done:!0}}})},s.replace=function(c){var d=this;return G1(c)&&(c=new Set(c)),dn(function(){Array.isArray(c)?(d.clear(),c.forEach(function(C){return d.add(C)})):L1(c)?(d.clear(),c.forEach(function(C){return d.add(C)})):c!=null&&J("Cannot initialize set from "+c)}),this},s.observe_=function(c,d){return Yo(this,c)},s.intercept_=function(c){return Go(this,c)},s.toJSON=function(){return Array.from(this)},s.toString=function(){return"[object ObservableSet]"},s[e]=function(){return this.values()},F1(o,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:n,get:function(){return"Set"}}]),o}(Ml,Il),G1=s1("ObservableSet",Pl),$l=Object.create(null),Hl="remove",Ol=function(){function e(o,s,l,c){s===void 0&&(s=new Map),c===void 0&&(c=R1),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=o,this.values_=s,this.name_=l,this.defaultAnnotation_=c,this.keysAtom_=new Ge("ObservableObject.keys"),this.isPlainObject_=Je(this.target_)}var n=e.prototype;return n.getObservablePropValue_=function(s){return this.values_.get(s).get()},n.setObservablePropValue_=function(s,l){var c=this.values_.get(s);if(c instanceof Cn)return c.set(l),!0;if(_r(this)){var d=wr(this,{type:Fr,object:this.proxy_||this.target_,name:s,newValue:l});if(!d)return null;l=d.newValue}if(l=c.prepareNewValue_(l),l!==le.UNCHANGED){var C=Hr(this),g=!1,m=C||g?{type:Fr,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:c.value_,name:s,newValue:l}:null;c.setNewValue_(l),C&&Or(this,m)}return!0},n.get_=function(s){return le.trackingDerivation&&!r1(this.target_,s)&&this.has_(s),this.target_[s]},n.set_=function(s,l,c){return c===void 0&&(c=!1),r1(this.target_,s)?this.values_.has(s)?this.setObservablePropValue_(s,l):c?Reflect.set(this.target_,s,l):(this.target_[s]=l,!0):this.extend_(s,{value:l,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,c)},n.has_=function(s){if(!le.trackingDerivation)return s in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var l=this.pendingKeys_.get(s);return l||(l=new Cr(s in this.target_,ke,"ObservableObject.key?",!1),this.pendingKeys_.set(s,l)),l.get()},n.make_=function(s,l){if(l===!0&&(l=this.defaultAnnotation_),l!==!1){if(Bl(this,l,s),!(s in this.target_)){var c;if((c=this.target_[Te])!=null&&c[s])return;J(1,l.annotationType_,this.name_+"."+s.toString())}for(var d=this.target_;d&&d!==ye;){var C=He(d,s);if(C){var g=l.make_(this,s,C,d);if(g===0)return;if(g===1)break}d=Object.getPrototypeOf(d)}Tl(this,l,s)}},n.extend_=function(s,l,c,d){if(d===void 0&&(d=!1),c===!0&&(c=this.defaultAnnotation_),c===!1)return this.defineProperty_(s,l,d);Bl(this,c,s);var C=c.extend_(this,s,l,d);return C&&Tl(this,c,s),C},n.defineProperty_=function(s,l,c){c===void 0&&(c=!1);try{w1();var d=this.delete_(s);if(!d)return d;if(_r(this)){var C=wr(this,{object:this.proxy_||this.target_,name:s,type:wn,newValue:l.value});if(!C)return null;var g=C.newValue;l.value!==g&&(l=Ft({},l,{value:g}))}if(c){if(!Reflect.defineProperty(this.target_,s,l))return!1}else Se(this.target_,s,l);this.notifyPropertyAddition_(s,l.value)}finally{b1()}return!0},n.defineObservableProperty_=function(s,l,c,d){d===void 0&&(d=!1);try{w1();var C=this.delete_(s);if(!C)return C;if(_r(this)){var g=wr(this,{object:this.proxy_||this.target_,name:s,type:wn,newValue:l});if(!g)return null;l=g.newValue}var m=kl(s),_={configurable:le.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:m.get,set:m.set};if(d){if(!Reflect.defineProperty(this.target_,s,_))return!1}else Se(this.target_,s,_);var y=new Cr(l,c,"ObservableObject.key",!1);this.values_.set(s,y),this.notifyPropertyAddition_(s,y.value_)}finally{b1()}return!0},n.defineComputedProperty_=function(s,l,c){c===void 0&&(c=!1);try{w1();var d=this.delete_(s);if(!d)return d;if(_r(this)){var C=wr(this,{object:this.proxy_||this.target_,name:s,type:wn,newValue:void 0});if(!C)return null}l.name||(l.name="ObservableObject.key"),l.context=this.proxy_||this.target_;var g=kl(s),m={configurable:le.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:g.get,set:g.set};if(c){if(!Reflect.defineProperty(this.target_,s,m))return!1}else Se(this.target_,s,m);this.values_.set(s,new Cn(l)),this.notifyPropertyAddition_(s,void 0)}finally{b1()}return!0},n.delete_=function(s,l){if(l===void 0&&(l=!1),!r1(this.target_,s))return!0;if(_r(this)){var c=wr(this,{object:this.proxy_||this.target_,name:s,type:Hl});if(!c)return null}try{var d,C;w1();var g=Hr(this),m=!1,_=this.values_.get(s),y=void 0;if(!_&&(g||m)){var L;y=(L=He(this.target_,s))==null?void 0:L.value}if(l){if(!Reflect.deleteProperty(this.target_,s))return!1}else delete this.target_[s];if(_&&(this.values_.delete(s),_ instanceof Cr&&(y=_.value_),yi(_)),this.keysAtom_.reportChanged(),(d=this.pendingKeys_)==null||(C=d.get(s))==null||C.set(s in this.target_),g||m){var S={type:Hl,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:y,name:s};g&&Or(this,S)}}finally{b1()}return!0},n.observe_=function(s,l){return Yo(this,s)},n.intercept_=function(s){return Go(this,s)},n.notifyPropertyAddition_=function(s,l){var c,d,C=Hr(this),g=!1;if(C||g){var m=C||g?{type:wn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:s,newValue:l}:null;C&&Or(this,m)}(c=this.pendingKeys_)==null||(d=c.get(s))==null||d.set(!0),this.keysAtom_.reportChanged()},n.ownKeys_=function(){return this.keysAtom_.reportObserved(),S1(this.target_)},n.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function qo(e,n){var o;if(r1(e,ie))return e;var s=(o=n==null?void 0:n.name)!=null?o:"ObservableObject",l=new Ol(e,new Map,String(s),G(n));return ot(e,ie,l),e}var fc=s1("ObservableObjectAdministration",Ol);function kl(e){return $l[e]||($l[e]={get:function(){return this[ie].getObservablePropValue_(e)},set:function(o){return this[ie].setObservablePropValue_(e,o)}})}function V1(e){return ht(e)?fc(e[ie]):!1}function Tl(e,n,o){var s;(s=e.target_[Te])==null||delete s[o]}function Bl(e,n,o){if(!1)var s,l,c}var ea=0,Vl=function(){};function hc(e,n){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,n):e.prototype.__proto__!==void 0?e.prototype.__proto__=n:e.prototype=n}hc(Vl,Array.prototype);var ta=function(e,n,o){fr(s,e);function s(c,d,C,g){var m;C===void 0&&(C="ObservableArray"),g===void 0&&(g=!1),m=e.call(this)||this;var _=new Qs(C,d,g,!0);if(_.proxy_=Vt(m),Wt(Vt(m),ie,_),c&&c.length){var y=h1(!0);m.spliceWithArray(0,0,c),sr(y)}return m}var l=s.prototype;return l.concat=function(){this[ie].atom_.reportObserved();for(var d=arguments.length,C=new Array(d),g=0;g<d;g++)C[g]=arguments[g];return Array.prototype.concat.apply(this.slice(),C.map(function(m){return ar(m)?m.slice():m}))},l[o]=function(){var c=this,d=0;return Jo({next:function(){return d<c.length?{value:c[d++],done:!1}:{done:!0,value:void 0}}})},F1(s,[{key:"length",get:function(){return this[ie].getArrayLength_()},set:function(d){this[ie].setArrayLength_(d)}},{key:n,get:function(){return"Array"}}]),s}(Vl,Symbol.toStringTag,Symbol.iterator);Object.entries(Vi).forEach(function(e){var n=e[0],o=e[1];n!=="concat"&&ot(ta.prototype,n,o)});function pc(e){return{enumerable:!1,configurable:!0,get:function(){return this[ie].get_(e)},set:function(o){this[ie].set_(e,o)}}}function vc(e){Se(ta.prototype,""+e,pc(e))}function Dl(e){if(e>ea){for(var n=ea;n<e+100;n++)vc(n);ea=e}}Dl(1e3);function gc(e,n,o){return new ta(e,n,o)}function zr(e,n){if(typeof e=="object"&&e!==null){if(ar(e))return n!==void 0&&J(23),e[ie].atom_;if(G1(e))return e[ie];if(B1(e)){if(n===void 0)return e.keysAtom_;var o=e.data_.get(n)||e.hasMap_.get(n);return o||J(25,n,ra(e)),o}if(V1(e)){if(!n)return J(26);var s=e[ie].values_.get(n);return s||J(27,n,ra(e)),s}if(ft(e)||sn(e)||to(e))return e}else if(Be(e)&&to(e[ie]))return e[ie];J(28)}function bn(e,n){if(e||J(29),n!==void 0)return bn(zr(e,n));if(ft(e)||sn(e)||to(e)||B1(e)||G1(e))return e;if(e[ie])return e[ie];J(24,e)}function ra(e,n){var o;if(n!==void 0)o=zr(e,n);else{if(oo(e))return e.name;V1(e)||B1(e)||G1(e)?o=bn(e):o=zr(e)}return o.name_}var jl=ye.toString;function na(e,n,o){return o===void 0&&(o=-1),oa(e,n,o)}function oa(e,n,o,s,l){if(e===n)return e!==0||1/e===1/n;if(e==null||n==null)return!1;if(e!==e)return n!==n;var c=typeof e;if(c!=="function"&&c!=="object"&&typeof n!="object")return!1;var d=jl.call(e);if(d!==jl.call(n))return!1;switch(d){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:+e==0?1/+e===1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(n);case"[object Map]":case"[object Set]":o>=0&&o++;break}e=Al(e),n=Al(n);var C=d==="[object Array]";if(!C){if(typeof e!="object"||typeof n!="object")return!1;var g=e.constructor,m=n.constructor;if(g!==m&&!(Be(g)&&g instanceof g&&Be(m)&&m instanceof m)&&"constructor"in e&&"constructor"in n)return!1}if(o===0)return!1;o<0&&(o=-1),s=s||[],l=l||[];for(var _=s.length;_--;)if(s[_]===e)return l[_]===n;if(s.push(e),l.push(n),C){if(_=e.length,_!==n.length)return!1;for(;_--;)if(!oa(e[_],n[_],o-1,s,l))return!1}else{var y=Object.keys(e),L;if(_=y.length,Object.keys(n).length!==_)return!1;for(;_--;)if(L=y[_],!(r1(n,L)&&oa(e[L],n[L],o-1,s,l)))return!1}return s.pop(),l.pop(),!0}function Al(e){return ar(e)?e.slice():C1(e)||B1(e)||L1(e)||G1(e)?Array.from(e.entries()):e}function Jo(e){return e[Symbol.iterator]=Cc,e}function Cc(){return this}function up(e){return e instanceof Object&&typeof e.annotationType_=="string"&&Be(e.make_)&&Be(e.extend_)}if(["Symbol","Map","Set"].forEach(function(e){var n=je();typeof n[e]>"u"&&J("MobX requires global '"+e+"' to be available or polyfilled")}),typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Ds,extras:{getDebugName:ra},$mobx:ie}),!h.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!oc)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var mc=D(9004);function _c(e){e()}function wc(e){e||(e=_c),w({reactionScheduler:e})}var fp=function(){return!0};function bc(e){return I(e)}var Zl=typeof FinalizationRegistry>"u"?void 0:FinalizationRegistry;function Wl(e){var n={reaction:e,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+xc};return n}var xc=1e4,yc=1e4;function Ec(e){var n=new Map,o=1,s=new e(function(c){var d=n.get(c);d&&(d.reaction.dispose(),n.delete(c))});return{addReactionToTrack:function(l,c,d){var C=o++;return s.register(d,C,l),l.current=Wl(c),l.current.finalizationRegistryCleanupToken=C,n.set(C,l.current),l.current},recordReactionAsCommitted:function(l){s.unregister(l),l.current&&l.current.finalizationRegistryCleanupToken&&n.delete(l.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}var Lc=function(e){var n=typeof Symbol=="function"&&Symbol.iterator,o=n&&e[n],s=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};function Sc(){var e=new Set,n;function o(){n&&(clearTimeout(n),C())}function s(){var g,m;if(e.size>0){try{for(var _=Lc(e),y=_.next();!y.done;y=_.next()){var L=y.value,S=L.current;S&&(S.reaction.dispose(),L.current=null)}}catch(R){g={error:R}}finally{try{y&&!y.done&&(m=_.return)&&m.call(_)}finally{if(g)throw g.error}}e.clear()}n&&(clearTimeout(n),n=void 0)}function l(){n===void 0&&(n=setTimeout(C,yc))}function c(g){e.add(g),l()}function d(g){e.delete(g)}function C(){n=void 0;var g=Date.now();e.forEach(function(m){var _=m.current;_&&g>=_.cleanAt&&(_.reaction.dispose(),m.current=null,e.delete(m))}),e.size>0&&l()}return{addReactionToTrack:function(g,m,_){return g.current=Wl(m),c(g),g.current},recordReactionAsCommitted:d,forceCleanupTimerToRunNowForTests:o,resetCleanupScheduleForTests:s}}var ji=Zl?Ec(Zl):Sc(),Rc=ji.addReactionToTrack,Mc=ji.recordReactionAsCommitted,hp=ji.resetCleanupScheduleForTests,pp=ji.forceCleanupTimerToRunNowForTests,Fl=!1;function vp(e){Fl=e}function zl(){return Fl}var Ul=function(e,n){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),l,c=[],d;try{for(;(n===void 0||n-- >0)&&!(l=s.next()).done;)c.push(l.value)}catch(C){d={error:C}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(d)throw d.error}}return c};function Nl(e){return"observer".concat(e)}var Ic=function(){function e(){}return e}();function Pc(){return new Ic}function Kl(e,n){if(n===void 0&&(n="observed"),zl())return e();var o=Ul(h.useState(Pc),1),s=o[0],l=Ul(h.useState(),2),c=l[1],d=function(){return c([])},C=h.useRef(null);if(!C.current)var g=new X1(Nl(n),function(){m.mounted?d():m.changedBeforeMount=!0}),m=Rc(C,g,s);var _=C.current.reaction;h.useDebugValue(_,bc),h.useEffect(function(){return Mc(C),C.current?(C.current.mounted=!0,C.current.changedBeforeMount&&(C.current.changedBeforeMount=!1,d())):(C.current={reaction:new X1(Nl(n),function(){d()}),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},d()),function(){C.current.reaction.dispose(),C.current=null}},[]);var y,L;if(_.track(function(){try{y=e()}catch(S){L=S}}),L)throw L;return y}var gp=!0,Xl=typeof Symbol=="function"&&Symbol.for,Gl=Xl?Symbol.for("react.forward_ref"):typeof h.forwardRef=="function"&&(0,h.forwardRef)(function(e){return null}).$$typeof,Yl=Xl?Symbol.for("react.memo"):typeof h.memo=="function"&&(0,h.memo)(function(e){return null}).$$typeof;function i1(e,n){var o;if(Yl&&e.$$typeof===Yl)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if(zl())return e;var s=(o=n==null?void 0:n.forwardRef)!==null&&o!==void 0?o:!1,l=e,c=e.displayName||e.name;if(Gl&&e.$$typeof===Gl&&(s=!0,l=e.render,typeof l!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var d=function(C,g){return Kl(function(){return l(C,g)},c)};return c!==""&&(d.displayName=c),e.contextTypes&&(d.contextTypes=e.contextTypes),s&&(d=(0,h.forwardRef)(d)),d=(0,h.memo)(d),Hc(e,d),d}var $c={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function Hc(e,n){Object.keys(e).forEach(function(o){$c[o]||Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(e,o))})}function ia(e){var n=e.children,o=e.render,s=n||o;return typeof s!="function"?null:Kl(s)}ia.displayName="Observer";function Cp(e,n,o,s,l){var c=n==="children"?"render":"children",d=typeof e[n]=="function",C=typeof e[c]=="function";return d&&C?new Error("MobX Observer: Do not use children and render in the same time in`"+o):d||C?null:new Error("Invalid prop `"+l+"` of type `"+typeof e[n]+"` supplied to `"+o+"`, expected `function`.")}function mp(e,n){return useState(function(){return observable(e(),n,{autoBind:!0})})[0]}var Oc=function(e,n){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),l,c=[],d;try{for(;(n===void 0||n-- >0)&&!(l=s.next()).done;)c.push(l.value)}catch(C){d={error:C}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(d)throw d.error}}return c};function _p(e){var n=Oc(useState(function(){return observable(e,{},{deep:!1})}),1),o=n[0];return runInAction(function(){Object.assign(o,e)}),o}function wp(e,n){var o=n&&useAsObservableSource(n);return useState(function(){return observable(e(o),void 0,{autoBind:!0})})[0]}wc(mc.unstable_batchedUpdates);function bp(e,n){return n===void 0&&(n="observed"),useObserverOriginal(e,n)}function xp(e){enableStaticRendering(e)}function kc(e,n,o){return Math.max(n,Math.min(e,o))}const Yt={toVector(e,n){return e===void 0&&(e=n),Array.isArray(e)?e:[e,e]},add(e,n){return[e[0]+n[0],e[1]+n[1]]},sub(e,n){return[e[0]-n[0],e[1]-n[1]]},addTo(e,n){e[0]+=n[0],e[1]+=n[1]},subTo(e,n){e[0]-=n[0],e[1]-=n[1]}};function ql(e,n,o){return n===0||Math.abs(n)===1/0?Math.pow(e,o*5):e*n*o/(n+o*e)}function Jl(e,n,o,s=.15){return s===0?kc(e,n,o):e<n?-ql(n-e,o-n,s)+n:e>o?+ql(e-o,o-n,s)+o:e}function Tc(e,[n,o],[s,l]){const[[c,d],[C,g]]=e;return[Jl(n,c,d,s),Jl(o,C,g,l)]}function d1(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function Ql(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),o.push.apply(o,s)}return o}function v1(e){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?Ql(Object(o),!0).forEach(function(s){d1(e,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Ql(Object(o)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(o,s))})}return e}const e0={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function t0(e){return e?e[0].toUpperCase()+e.slice(1):""}function Bc(e,n="",o=!1){const s=e0[e],l=s&&s[n]||n;return"on"+t0(e)+t0(l)+(o?"Capture":"")}const Vc=["gotpointercapture","lostpointercapture"];function Dc(e){let n=e.substring(2).toLowerCase();const o=!!~n.indexOf("passive");o&&(n=n.replace("passive",""));const s=Vc.includes(n)?"capturecapture":"capture",l=!!~n.indexOf(s);return l&&(n=n.replace("capture","")),{device:n,capture:l,passive:o}}function jc(e,n=""){const o=e0[e],s=o&&o[n]||n;return e+s}function sa(e){return"touches"in e}function Ac(e){return Array.from(e.touches).filter(n=>{var o,s;return n.target===e.currentTarget||((o=e.currentTarget)===null||o===void 0||(s=o.contains)===null||s===void 0?void 0:s.call(o,n.target))})}function Zc(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function r0(e){return sa(e)?Zc(e)[0]:e}function aa(e,n){const o=n.clientX-e.clientX,s=n.clientY-e.clientY,l=(n.clientX+e.clientX)/2,c=(n.clientY+e.clientY)/2,d=Math.hypot(o,s);return{angle:-(Math.atan2(o,s)*180)/Math.PI,distance:d,origin:[l,c]}}function Wc(e){return Ac(e).map(n=>n.identifier)}function n0(e,n){const[o,s]=Array.from(e.touches).filter(l=>n.includes(l.identifier));return aa(o,s)}function la(e){const n=r0(e);return sa(e)?n.identifier:n.pointerId}function fo(e){const n=r0(e);return[n.clientX,n.clientY]}const o0=40,i0=800;function s0(e){let{deltaX:n,deltaY:o,deltaMode:s}=e;return s===1?(n*=o0,o*=o0):s===2&&(n*=i0,o*=i0),[n,o]}function Fc(e){var n,o;const{scrollX:s,scrollY:l,scrollLeft:c,scrollTop:d}=e.currentTarget;return[(n=s??c)!==null&&n!==void 0?n:0,(o=l??d)!==null&&o!==void 0?o:0]}function zc(e){const n={};if("buttons"in e&&(n.buttons=e.buttons),"shiftKey"in e){const{shiftKey:o,altKey:s,metaKey:l,ctrlKey:c}=e;Object.assign(n,{shiftKey:o,altKey:s,metaKey:l,ctrlKey:c})}return n}function Ai(e,...n){return typeof e=="function"?e(...n):e}function Uc(){}function Nc(...e){return e.length===0?Uc:e.length===1?e[0]:function(){let n;for(const o of e)n=o.apply(this,arguments)||n;return n}}function a0(e,n){return Object.assign({},n,e||{})}const Kc=32;class l0{constructor(n,o,s){this.ctrl=n,this.args=o,this.key=s,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(n){this.ctrl.state[this.key]=n}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:n,shared:o,ingKey:s,args:l}=this;o[s]=n._active=n.active=n._blocked=n._force=!1,n._step=[!1,!1],n.intentional=!1,n._movement=[0,0],n._distance=[0,0],n._direction=[0,0],n._delta=[0,0],n._bounds=[[-1/0,1/0],[-1/0,1/0]],n.args=l,n.axis=void 0,n.memo=void 0,n.elapsedTime=0,n.direction=[0,0],n.distance=[0,0],n.overflow=[0,0],n._movementBound=[!1,!1],n.velocity=[0,0],n.movement=[0,0],n.delta=[0,0],n.timeStamp=0}start(n){const o=this.state,s=this.config;o._active||(this.reset(),this.computeInitial(),o._active=!0,o.target=n.target,o.currentTarget=n.currentTarget,o.lastOffset=s.from?Ai(s.from,o):o.offset,o.offset=o.lastOffset),o.startTime=o.timeStamp=n.timeStamp}computeValues(n){const o=this.state;o._values=n,o.values=this.config.transform(n)}computeInitial(){const n=this.state;n._initial=n._values,n.initial=n.values}compute(n){const{state:o,config:s,shared:l}=this;o.args=this.args;let c=0;if(n&&(o.event=n,s.preventDefault&&n.cancelable&&o.event.preventDefault(),o.type=n.type,l.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,l.locked=!!document.pointerLockElement,Object.assign(l,zc(n)),l.down=l.pressed=l.buttons%2===1||l.touches>0,c=n.timeStamp-o.timeStamp,o.timeStamp=n.timeStamp,o.elapsedTime=o.timeStamp-o.startTime),o._active){const z=o._delta.map(Math.abs);Yt.addTo(o._distance,z)}const[d,C]=o._movement,[g,m]=s.threshold,{_step:_,values:y}=o;if(s.hasCustomTransform?(_[0]===!1&&(_[0]=Math.abs(d)>=g&&y[0]),_[1]===!1&&(_[1]=Math.abs(C)>=m&&y[1])):(_[0]===!1&&(_[0]=Math.abs(d)>=g&&Math.sign(d)*g),_[1]===!1&&(_[1]=Math.abs(C)>=m&&Math.sign(C)*m)),o.intentional=_[0]!==!1||_[1]!==!1,!o.intentional)return;const L=[0,0];if(s.hasCustomTransform){const[z,j]=y;L[0]=_[0]!==!1?z-_[0]:0,L[1]=_[1]!==!1?j-_[1]:0}else L[0]=_[0]!==!1?d-_[0]:0,L[1]=_[1]!==!1?C-_[1]:0;if(this.intent&&this.intent(L),(o._active&&!o._blocked||o.active)&&(o.first=o._active&&!o.active,o.last=!o._active&&o.active,o.active=l[this.ingKey]=o._active,n)){o.first&&("bounds"in s&&(o._bounds=Ai(s.bounds,o)),this.setup&&this.setup()),o.movement=L;const z=o.offset;if(this.computeOffset(),!o.last||c>Kc){o.delta=Yt.sub(o.offset,z);const j=o.delta.map(Math.abs);Yt.addTo(o.distance,j),o.direction=o.delta.map(Math.sign),o._direction=o._delta.map(Math.sign),!o.first&&c>0&&(o.velocity=[j[0]/c,j[1]/c])}}const[S,R]=o.offset,[[$,k],[T,H]]=o._bounds;o.overflow=[S<$?-1:S>k?1:0,R<T?-1:R>H?1:0],o._movementBound[0]=o.overflow[0]?o._movementBound[0]===!1?o._movement[0]:o._movementBound[0]:!1,o._movementBound[1]=o.overflow[1]?o._movementBound[1]===!1?o._movement[1]:o._movementBound[1]:!1;const Z=o._active?s.rubberband||[0,0]:[0,0];o.offset=Tc(o._bounds,o.offset,Z),this.computeMovement()}emit(){const n=this.state,o=this.shared,s=this.config;if(n._active||this.clean(),(n._blocked||!n.intentional)&&!n._force&&!s.triggerAllEvents)return;const l=this.handler(v1(v1(v1({},o),n),{},{[this.aliasKey]:n.values}));l!==void 0&&(n.memo=l)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Xc([e,n]){const o=Math.abs(e)-Math.abs(n);if(o>0)return"x";if(o<0)return"y"}function Gc(e,n){switch(n){case"x":e[1]=0;break;case"y":e[0]=0;break}}class Qo extends l0{constructor(...n){super(...n);d1(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Yt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Yt.sub(this.state.offset,this.state.lastOffset)}intent(n){this.state.axis=this.state.axis||Xc(n),this.state._blocked=(this.config.lockDirection||!!this.config.axis)&&!this.state.axis||!!this.config.axis&&this.config.axis!==this.state.axis,!this.state._blocked&&(this.config.axis||this.config.lockDirection)&&Gc(n,this.state.axis)}}const Yc=e=>e,c0=.15,d0={enabled(e=!0){return e},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[c0,c0];case!1:return[0,0];default:return Yt.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return Yt.toVector(e)},transform(e,n,o){const s=e||o.shared.transform;return this.hasCustomTransform=!!s,s||Yc},threshold(e){return Yt.toVector(e,0)}},Bn=v1(v1({},d0),{},{axis(e,n,{axis:o}){if(this.lockDirection=o==="lock",!this.lockDirection)return o},bounds(e={}){if(typeof e=="function")return c=>Bn.bounds(e(c));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:n=-1/0,right:o=1/0,top:s=-1/0,bottom:l=1/0}=e;return[[n,o],[s,l]]}}),Zi=10,u0={ArrowRight:(e=1)=>[Zi*e,0],ArrowLeft:(e=1)=>[-Zi*e,0],ArrowUp:(e=1)=>[0,-Zi*e],ArrowDown:(e=1)=>[0,Zi*e]};class qc extends Qo{constructor(...n){super(...n);d1(this,"ingKey","dragging")}reset(){super.reset();const n=this.state;n._pointerId=void 0,n._pointerActive=!1,n._keyboardActive=!1,n._preventScroll=!1,n._delayed=!1,n.swipe=[0,0],n.tap=!1,n.canceled=!1,n.cancel=this.cancel.bind(this)}setup(){const n=this.state;if(n._bounds instanceof HTMLElement){const o=n._bounds.getBoundingClientRect(),s=n.currentTarget.getBoundingClientRect(),l={left:o.left-s.left+n.offset[0],right:o.right-s.right+n.offset[0],top:o.top-s.top+n.offset[1],bottom:o.bottom-s.bottom+n.offset[1]};n._bounds=Bn.bounds(l)}}cancel(){const n=this.state;n.canceled||(n.canceled=!0,n._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(n){const o=this.config,s=this.state;n.buttons!=null&&(Array.isArray(o.pointerButtons)?!o.pointerButtons.includes(n.buttons):o.pointerButtons!==-1&&o.pointerButtons!==n.buttons)||(this.ctrl.setEventIds(n),o.pointerCapture&&n.target.setPointerCapture(n.pointerId),!s._pointerActive&&(this.start(n),this.setupPointer(n),s._pointerId=la(n),s._pointerActive=!0,this.computeValues(fo(n)),this.computeInitial(),o.preventScroll?this.setupScrollPrevention(n):o.delay>0?this.setupDelayTrigger(n):this.startPointerDrag(n)))}startPointerDrag(n){const o=this.state;o._active=!0,o._preventScroll=!0,o._delayed=!1,this.compute(n),this.emit()}pointerMove(n){const o=this.state,s=this.config;if(!o._pointerActive||o.type===n.type&&n.timeStamp===o.timeStamp)return;const l=la(n);if(o._pointerId!==void 0&&l!==o._pointerId)return;const c=fo(n);if(document.pointerLockElement===n.target?o._delta=[n.movementX,n.movementY]:(o._delta=Yt.sub(c,o._values),this.computeValues(c)),Yt.addTo(o._movement,o._delta),this.compute(n),o._delayed){this.timeoutStore.remove("dragDelay"),o.active=!1,this.startPointerDrag(n);return}if(s.preventScroll&&!o._preventScroll)if(o.axis)if(o.axis===s.preventScrollAxis||s.preventScrollAxis==="xy"){o._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(n);return}else return;this.emit()}pointerUp(n){this.ctrl.setEventIds(n);try{this.config.pointerCapture&&n.target.hasPointerCapture(n.pointerId)&&n.target.releasePointerCapture(n.pointerId)}catch{}const o=this.state,s=this.config;if(!o._pointerActive)return;const l=la(n);if(o._pointerId!==void 0&&l!==o._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(n);const[c,d]=o._distance;if(o.tap=c<=s.tapsThreshold&&d<=s.tapsThreshold,o.tap&&s.filterTaps)o._force=!0;else{const[C,g]=o.direction,[m,_]=o.velocity,[y,L]=o.movement,[S,R]=s.swipe.velocity,[$,k]=s.swipe.distance,T=s.swipe.duration;o.elapsedTime<T&&(Math.abs(m)>S&&Math.abs(y)>$&&(o.swipe[0]=C),Math.abs(_)>R&&Math.abs(L)>k&&(o.swipe[1]=g))}this.emit()}pointerClick(n){this.state.tap||(n.preventDefault(),n.stopPropagation())}setupPointer(n){const o=this.config;let s=o.device;o.pointerLock&&n.currentTarget.requestPointerLock(),o.pointerCapture||(this.eventStore.add(this.sharedConfig.window,s,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(n){this.state._preventScroll&&n.cancelable&&n.preventDefault()}setupScrollPrevention(n){Jc(n),this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1}),this.eventStore.add(this.sharedConfig.window,"touch","end",this.clean.bind(this),{passive:!1}),this.eventStore.add(this.sharedConfig.window,"touch","cancel",this.clean.bind(this),{passive:!1}),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScroll,n)}setupDelayTrigger(n){this.state._delayed=!0,this.timeoutStore.add("dragDelay",this.startPointerDrag.bind(this),this.config.delay,n)}keyDown(n){const o=u0[n.key];if(o){const s=this.state,l=n.shiftKey?10:n.altKey?.1:1;s._delta=o(l),this.start(n),s._keyboardActive=!0,Yt.addTo(s._movement,s._delta),this.compute(n),this.emit()}}keyUp(n){n.key in u0&&(this.state._keyboardActive=!1,this.setActive(),this.compute(n),this.emit())}bind(n){const o=this.config.device;n(o,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(n(o,"change",this.pointerMove.bind(this)),n(o,"end",this.pointerUp.bind(this)),n(o,"cancel",this.pointerUp.bind(this)),n("lostPointerCapture","",this.pointerUp.bind(this))),n("key","down",this.keyDown.bind(this)),n("key","up",this.keyUp.bind(this)),this.config.filterTaps&&n("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function Jc(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const ei=typeof window<"u"&&window.document&&window.document.createElement;function Qc(){return ei&&"ontouchstart"in window}function f0(){return Qc()||ei&&window.navigator.maxTouchPoints>1}function e5(){return ei&&"onpointerdown"in window}function t5(){return ei&&"exitPointerLock"in window.document}function r5(){try{return"constructor"in GestureEvent}catch{return!1}}const br={isBrowser:ei,gesture:r5(),touch:f0(),touchscreen:f0(),pointer:e5(),pointerLock:t5()},n5=250,o5=180,i5=.5,s5=50,a5=250,l5=v1(v1({},Bn),{},{pointerLock(e,n,{pointer:{lock:o=!1,touch:s=!1}={}}){return this.useTouch=s&&br.touch,o&&br.pointerLock},device(e,n){return this.useTouch?"touch":this.pointerLock?"mouse":br.pointer?"pointer":br.touch?"touch":"mouse"},preventScroll(e=!1,n,{preventScrollAxis:o="y"}){return o&&(this.preventScrollAxis=o),br.touchscreen?typeof e=="number"?e:e?n5:!1:!1},pointerCapture(e,n,{pointer:{capture:o=!0,buttons:s=1}={}}){return this.pointerButtons=s,!this.pointerLock&&this.device==="pointer"&&o},threshold(e,n,{filterTaps:o=!1,tapsThreshold:s=3,axis:l=void 0}){const c=Yt.toVector(e,o?s:l?1:0);return this.filterTaps=o,this.tapsThreshold=s,c},swipe({velocity:e=i5,distance:n=s5,duration:o=a5}={}){return{velocity:this.transform(Yt.toVector(e)),distance:this.transform(Yt.toVector(n)),duration:o}},delay(e=0){switch(e){case!0:return o5;case!1:return 0;default:return e}}}),c5=30,d5=36;class u5 extends l0{constructor(...n){super(...n);d1(this,"ingKey","pinching"),d1(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const n=this.state;n._touchIds=[],n.canceled=!1,n.cancel=this.cancel.bind(this),n.turns=0}computeOffset(){const{type:n,movement:o,lastOffset:s}=this.state;n==="wheel"?this.state.offset=Yt.add(o,s):this.state.offset=[(1+o[0])*s[0],o[1]+s[1]]}computeMovement(){const{offset:n,lastOffset:o}=this.state;this.state.movement=[n[0]/o[0],n[1]-o[1]]}intent(n){const o=this.state;if(!o.axis){const s=Math.abs(n[0])*c5-Math.abs(n[1]);s<0?o.axis="angle":s>0&&(o.axis="scale")}this.config.lockDirection&&(o.axis==="scale"?n[1]=0:o.axis==="angle"&&(n[0]=0))}cancel(){const n=this.state;n.canceled||setTimeout(()=>{n.canceled=!0,n._active=!1,this.compute(),this.emit()},0)}touchStart(n){this.ctrl.setEventIds(n);const o=this.state,s=this.ctrl.touchIds;if(o._active&&o._touchIds.every(c=>s.has(c))||s.size<2)return;this.start(n),o._touchIds=Array.from(s).slice(0,2);const l=n0(n,o._touchIds);this.pinchStart(n,l)}pointerStart(n){if(n.buttons!=null&&n.buttons%2!==1)return;this.ctrl.setEventIds(n),n.target.setPointerCapture(n.pointerId);const o=this.state,s=o._pointerEvents,l=this.ctrl.pointerIds;if(o._active&&Array.from(s.keys()).every(d=>l.has(d))||(s.size<2&&s.set(n.pointerId,n),o._pointerEvents.size<2))return;this.start(n);const c=aa(...Array.from(s.values()));this.pinchStart(n,c)}pinchStart(n,o){const s=this.state;s.origin=o.origin,this.computeValues([o.distance,o.angle]),this.computeInitial(),this.compute(n),this.emit()}touchMove(n){if(!this.state._active)return;const o=n0(n,this.state._touchIds);this.pinchMove(n,o)}pointerMove(n){const o=this.state._pointerEvents;if(o.has(n.pointerId)&&o.set(n.pointerId,n),!this.state._active)return;const s=aa(...Array.from(o.values()));this.pinchMove(n,s)}pinchMove(n,o){const s=this.state,l=s._values[1],c=o.angle-l;let d=0;Math.abs(c)>270&&(d+=Math.sign(c)),this.computeValues([o.distance,o.angle-360*d]),s.origin=o.origin,s.turns=d,s._movement=[s._values[0]/s._initial[0]-1,s._values[1]-s._initial[1]],this.compute(n),this.emit()}touchEnd(n){this.ctrl.setEventIds(n),!!this.state._active&&this.state._touchIds.some(o=>!this.ctrl.touchIds.has(o))&&(this.state._active=!1,this.compute(n),this.emit())}pointerEnd(n){const o=this.state;this.ctrl.setEventIds(n);try{n.target.releasePointerCapture(n.pointerId)}catch{}o._pointerEvents.has(n.pointerId)&&o._pointerEvents.delete(n.pointerId),!!o._active&&o._pointerEvents.size<2&&(o._active=!1,this.compute(n),this.emit())}gestureStart(n){n.cancelable&&n.preventDefault();const o=this.state;o._active||(this.start(n),this.computeValues([n.scale,n.rotation]),o.origin=[n.clientX,n.clientY],this.compute(n),this.emit())}gestureMove(n){if(n.cancelable&&n.preventDefault(),!this.state._active)return;const o=this.state;this.computeValues([n.scale,n.rotation]),o.origin=[n.clientX,n.clientY];const s=o._movement;o._movement=[n.scale-1,n.rotation],o._delta=Yt.sub(o._movement,s),this.compute(n),this.emit()}gestureEnd(n){!this.state._active||(this.state._active=!1,this.compute(n),this.emit())}wheel(n){!n.ctrlKey||(this.state._active?this.wheelChange(n):this.wheelStart(n),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(n){this.start(n),this.wheelChange(n)}wheelChange(n){"uv"in n||n.cancelable&&n.preventDefault();const s=this.state;s._delta=[-s0(n)[1]/d5*s.offset[0],0],Yt.addTo(s._movement,s._delta),this.state.origin=[n.clientX,n.clientY],this.compute(n),this.emit()}wheelEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(n){const o=this.config.device;o?(n(o,"start",this[o+"Start"].bind(this)),n(o,"change",this[o+"Move"].bind(this)),n(o,"end",this[o+"End"].bind(this)),n(o,"cancel",this[o+"End"].bind(this))):n("wheel","",this.wheel.bind(this),{passive:!1})}}const f5=v1(v1({},d0),{},{useTouch(e,n,{pointer:{touch:o=!1}={}}){return o&&br.touch},device(e,n,o){if(o.shared.target&&!br.touch&&br.gesture)return"gesture";if(this.useTouch)return"touch";if(br.touchscreen){if(br.pointer)return"pointer";if(br.touch)return"touch"}},bounds(e,n,{scaleBounds:o={},angleBounds:s={}}){const l=d=>{const C=a0(Ai(o,d),{min:-1/0,max:1/0});return[C.min,C.max]},c=d=>{const C=a0(Ai(s,d),{min:-1/0,max:1/0});return[C.min,C.max]};return typeof o!="function"&&typeof s!="function"?[l(),c()]:d=>[l(d),c(d)]},threshold(e,n,o){return this.lockDirection=o.axis==="lock",Yt.toVector(e,this.lockDirection?[.1,3]:0)}});class h5 extends Qo{constructor(...n){super(...n);d1(this,"ingKey","moving")}move(n){this.config.mouseOnly&&n.pointerType!=="mouse"||(this.state._active?this.moveChange(n):this.moveStart(n),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(n){this.start(n),this.computeValues(fo(n)),this.compute(n),this.computeInitial(),this.emit()}moveChange(n){if(!this.state._active)return;const o=fo(n),s=this.state;s._delta=Yt.sub(o,s._values),Yt.addTo(s._movement,s._delta),this.computeValues(o),this.compute(n),this.emit()}moveEnd(n){!this.state._active||(this.state._active=!1,this.compute(n),this.emit())}bind(n){n("pointer","change",this.move.bind(this)),n("pointer","leave",this.moveEnd.bind(this))}}const p5=v1(v1({},Bn),{},{mouseOnly:(e=!0)=>e});class v5 extends Qo{constructor(...n){super(...n);d1(this,"ingKey","scrolling")}scroll(n){this.state._active||this.start(n),this.scrollChange(n),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(n){n.cancelable&&n.preventDefault();const o=this.state,s=Fc(n);o._delta=Yt.sub(s,o._values),Yt.addTo(o._movement,o._delta),this.computeValues(s),this.compute(n),this.emit()}scrollEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(n){n("scroll","",this.scroll.bind(this))}}const g5=Bn;class C5 extends Qo{constructor(...n){super(...n);d1(this,"ingKey","wheeling")}wheel(n){this.state._active||this.start(n),this.wheelChange(n),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(n){const o=this.state;o._delta=s0(n),Yt.addTo(o._movement,o._delta);const[s,l]=o.overflow,[c,d]=o._delta,[C,g]=o._direction;(s<0&&c>0&&C<0||s>0&&c<0&&C>0)&&(o._movement[0]=o._movementBound[0]),(l<0&&d>0&&g<0||l>0&&d<0&&g>0)&&(o._movement[1]=o._movementBound[1]),this.compute(n),this.emit()}wheelEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(n){n("wheel","",this.wheel.bind(this))}}const m5=Bn;class _5 extends Qo{constructor(...n){super(...n);d1(this,"ingKey","hovering")}enter(n){this.config.mouseOnly&&n.pointerType!=="mouse"||(this.start(n),this.computeValues(fo(n)),this.compute(n),this.emit())}leave(n){if(this.config.mouseOnly&&n.pointerType!=="mouse")return;const o=this.state;if(!o._active)return;o._active=!1;const s=fo(n);o._movement=o._delta=Yt.sub(s,o._values),this.computeValues(s),this.compute(n),o.delta=o.movement,this.emit()}bind(n){n("pointer","enter",this.enter.bind(this)),n("pointer","leave",this.leave.bind(this))}}const w5=v1(v1({},Bn),{},{mouseOnly:(e=!0)=>e}),ca=new Map,da=new Map;function b5(e){ca.set(e.key,e.engine),da.set(e.key,e.resolver)}const x5={key:"drag",engine:qc,resolver:l5},y5={key:"hover",engine:_5,resolver:w5},E5={key:"move",engine:h5,resolver:p5},L5={key:"pinch",engine:u5,resolver:f5},S5={key:"scroll",engine:v5,resolver:g5},R5={key:"wheel",engine:C5,resolver:m5};function M5(e,n){if(e==null)return{};var o={},s=Object.keys(e),l,c;for(c=0;c<s.length;c++)l=s[c],!(n.indexOf(l)>=0)&&(o[l]=e[l]);return o}function I5(e,n){if(e==null)return{};var o=M5(e,n),s,l;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(l=0;l<c.length;l++)s=c[l],!(n.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,s)||(o[s]=e[s]))}return o}const P5={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=br.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:n=!1}={}){return{passive:e,capture:n}},transform(e){return e}},$5=["target","eventOptions","window","enabled","transform"];function Wi(e={},n){const o={};for(const[s,l]of Object.entries(n))switch(typeof l){case"function":o[s]=l.call(o,e[s],s,e);break;case"object":o[s]=Wi(e[s],l);break;case"boolean":l&&(o[s]=e[s]);break}return o}function H5(e,n){const o=e,{target:s,eventOptions:l,window:c,enabled:d,transform:C}=o,g=I5(o,$5),m={shared:Wi({target:s,eventOptions:l,window:c,enabled:d,transform:C},P5)};if(n){const _=da.get(n);m[n]=Wi(v1({shared:m.shared},g),_)}else for(const _ in g){const y=da.get(_);y&&(m[_]=Wi(v1({shared:m.shared},g[_]),y))}return m}class h0{constructor(n){d1(this,"_listeners",[]),this._ctrl=n}add(n,o,s,l,c){const d=jc(o,s),C=v1(v1({},this._ctrl.config.shared.eventOptions),c);n.addEventListener(d,l,C),this._listeners.push(()=>n.removeEventListener(d,l,C))}clean(){this._listeners.forEach(n=>n()),this._listeners=[]}}class O5{constructor(){d1(this,"_timeouts",new Map)}add(n,o,s=140,...l){this.remove(n),this._timeouts.set(n,window.setTimeout(o,s,...l))}remove(n){const o=this._timeouts.get(n);o&&window.clearTimeout(o)}clean(){this._timeouts.forEach(n=>void window.clearTimeout(n)),this._timeouts.clear()}}class k5{constructor(n){d1(this,"gestures",new Set),d1(this,"_targetEventStore",new h0(this)),d1(this,"gestureEventStores",{}),d1(this,"gestureTimeoutStores",{}),d1(this,"handlers",{}),d1(this,"config",{}),d1(this,"pointerIds",new Set),d1(this,"touchIds",new Set),d1(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),T5(this,n)}setEventIds(n){sa(n)?this.touchIds=new Set(Wc(n)):"pointerId"in n&&(n.type==="pointerup"||n.type==="pointercancel"?this.pointerIds.delete(n.pointerId):n.type==="pointerdown"&&this.pointerIds.add(n.pointerId))}applyHandlers(n,o){this.handlers=n,this.nativeHandlers=o}applyConfig(n,o){this.config=H5(n,o)}clean(){this._targetEventStore.clean();for(const n of this.gestures)this.gestureEventStores[n].clean(),this.gestureTimeoutStores[n].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...n){const o=this.config.shared,s=o.eventOptions,l={};let c;if(o.target&&(c=o.target(),!c))return;const d=B5(l,s,!!c);if(o.enabled){for(const C of this.gestures)if(this.config[C].enabled){const g=ca.get(C);new g(this,n,C).bind(d)}for(const C in this.nativeHandlers)d(C,"",g=>this.nativeHandlers[C](v1(v1({},this.state.shared),{},{event:g,args:n})),void 0,!0)}for(const C in l)l[C]=Nc(...l[C]);if(!c)return l;for(const C in l){const{device:g,capture:m,passive:_}=Dc(C);this._targetEventStore.add(c,g,"",l[C],{capture:m,passive:_})}}}function ho(e,n){e.gestures.add(n),e.gestureEventStores[n]=new h0(e),e.gestureTimeoutStores[n]=new O5}function T5(e,n){n.drag&&ho(e,"drag"),n.wheel&&ho(e,"wheel"),n.scroll&&ho(e,"scroll"),n.move&&ho(e,"move"),n.pinch&&ho(e,"pinch"),n.hover&&ho(e,"hover")}const B5=(e,n,o)=>(s,l,c,d={},C=!1)=>{var g,m;const _=(g=d.capture)!==null&&g!==void 0?g:n.capture,y=(m=d.passive)!==null&&m!==void 0?m:n.passive;let L=C?s:Bc(s,l,_);o&&y&&(L+="Passive"),e[L]=e[L]||[],e[L].push(c)},V5=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function D5(e){const n={},o={},s=new Set;for(let l in e)V5.test(l)?(s.add(RegExp.lastMatch),o[l]=e[l]):n[l]=e[l];return[o,n,s]}function po(e,n,o,s,l,c){if(!e.has(o)||!ca.has(s))return;const d=o+"Start",C=o+"End",g=m=>{let _;return m.first&&d in n&&n[d](m),o in n&&(_=n[o](m)),m.last&&C in n&&n[C](m),_};l[s]=g,c[s]=c[s]||{}}function j5(e,n){const[o,s,l]=D5(e),c={};return po(l,o,"onDrag","drag",c,n),po(l,o,"onWheel","wheel",c,n),po(l,o,"onScroll","scroll",c,n),po(l,o,"onPinch","pinch",c,n),po(l,o,"onMove","move",c,n),po(l,o,"onHover","hover",c,n),{handlers:c,config:n,nativeHandlers:s}}function Vn(e,n={},o,s){const l=h.useMemo(()=>new k5(e),[]);if(l.applyHandlers(e,s),l.applyConfig(n,o),h.useEffect(l.effect.bind(l)),h.useEffect(()=>l.clean.bind(l),[]),n.target===void 0)return l.bind.bind(l)}function yp(e,n={}){return registerAction(dragAction),Vn({drag:e},n,"drag")}function Ep(e,n={}){return registerAction(pinchAction),Vn({pinch:e},n,"pinch")}function Lp(e,n={}){return registerAction(wheelAction),Vn({wheel:e},n,"wheel")}function Sp(e,n={}){return registerAction(scrollAction),Vn({scroll:e},n,"scroll")}function Rp(e,n={}){return registerAction(moveAction),Vn({move:e},n,"move")}function Mp(e,n={}){return registerAction(hoverAction),Vn({hover:e},n,"hover")}function A5(e){return e.forEach(b5),function(o,s={}){const{handlers:l,nativeHandlers:c,config:d}=j5(o,s);return Vn(l,d,void 0,c)}}function Z5(e,n={}){return A5([x5,L5,S5,R5,E5,y5])(e,n)}var W5=Object.defineProperty,F5=(e,n,o)=>n in e?W5(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,it=(e,n,o)=>(F5(e,typeof n!="symbol"?n+"":n,o),o),nt=class{static clamp(e,n,o){return Math.max(n,typeof o<"u"?Math.min(e,o):e)}static clampV(e,n,o){return e.map(s=>o?nt.clamp(s,n,o):nt.clamp(s,n))}static cross(e,n,o){return(n[0]-e[0])*(o[1]-e[1])-(o[0]-e[0])*(n[1]-e[1])}static snap(e,n=1){return[Math.round(e[0]/n)*n,Math.round(e[1]/n)*n]}},M=nt;it(M,"neg",e=>[-e[0],-e[1]]),it(M,"add",(e,n)=>[e[0]+n[0],e[1]+n[1]]),it(M,"addScalar",(e,n)=>[e[0]+n,e[1]+n]),it(M,"sub",(e,n)=>[e[0]-n[0],e[1]-n[1]]),it(M,"subScalar",(e,n)=>[e[0]-n,e[1]-n]),it(M,"vec",(e,n)=>[n[0]-e[0],n[1]-e[1]]),it(M,"mul",(e,n)=>[e[0]*n,e[1]*n]),it(M,"mulV",(e,n)=>[e[0]*n[0],e[1]*n[1]]),it(M,"div",(e,n)=>[e[0]/n,e[1]/n]),it(M,"divV",(e,n)=>[e[0]/n[0],e[1]/n[1]]),it(M,"per",e=>[e[1],-e[0]]),it(M,"dpr",(e,n)=>e[0]*n[0]+e[1]*n[1]),it(M,"cpr",(e,n)=>e[0]*n[1]-n[0]*e[1]),it(M,"len2",e=>e[0]*e[0]+e[1]*e[1]),it(M,"len",e=>Math.hypot(e[0],e[1])),it(M,"pry",(e,n)=>nt.dpr(e,n)/nt.len(n)),it(M,"uni",e=>nt.div(e,nt.len(e))),it(M,"normalize",e=>nt.uni(e)),it(M,"tangent",(e,n)=>nt.uni(nt.sub(e,n))),it(M,"dist2",(e,n)=>nt.len2(nt.sub(e,n))),it(M,"dist",(e,n)=>Math.hypot(e[1]-n[1],e[0]-n[0])),it(M,"fastDist",(e,n)=>{const o=[n[0]-e[0],n[1]-e[1]],s=[Math.abs(o[0]),Math.abs(o[1])];let l=1/Math.max(s[0],s[1]);return l=l*(1.29289-(s[0]+s[1])*l*.29289),[o[0]*l,o[1]*l]}),it(M,"ang",(e,n)=>Math.atan2(nt.cpr(e,n),nt.dpr(e,n))),it(M,"angle",(e,n)=>Math.atan2(n[1]-e[1],n[0]-e[0])),it(M,"med",(e,n)=>nt.mul(nt.add(e,n),.5)),it(M,"rot",(e,n=0)=>[e[0]*Math.cos(n)-e[1]*Math.sin(n),e[0]*Math.sin(n)+e[1]*Math.cos(n)]),it(M,"rotWith",(e,n,o=0)=>{if(o===0)return e;const s=Math.sin(o),l=Math.cos(o),c=e[0]-n[0],d=e[1]-n[1],C=c*l-d*s,g=c*s+d*l;return[C+n[0],g+n[1]]}),it(M,"isEqual",(e,n)=>e[0]===n[0]&&e[1]===n[1]),it(M,"lrp",(e,n,o)=>nt.add(e,nt.mul(nt.sub(n,e),o))),it(M,"int",(e,n,o,s,l=1)=>{const c=(nt.clamp(o,s)-o)/(s-o);return nt.add(nt.mul(e,1-c),nt.mul(n,l))}),it(M,"ang3",(e,n,o)=>{const s=nt.vec(n,e),l=nt.vec(n,o);return nt.ang(s,l)}),it(M,"abs",e=>[Math.abs(e[0]),Math.abs(e[1])]),it(M,"rescale",(e,n)=>{const o=nt.len(e);return[n*e[0]/o,n*e[1]/o]}),it(M,"isLeft",(e,n,o)=>(n[0]-e[0])*(o[1]-e[1])-(o[0]-e[0])*(n[1]-e[1])),it(M,"clockwise",(e,n,o)=>nt.isLeft(e,n,o)>0),it(M,"toFixed",e=>e.map(n=>Math.round(n*100)/100)),it(M,"nearestPointOnLineThroughPoint",(e,n,o)=>nt.add(e,nt.mul(n,nt.pry(nt.sub(o,e),n)))),it(M,"distanceToLineThroughPoint",(e,n,o)=>nt.dist(o,nt.nearestPointOnLineThroughPoint(e,n,o))),it(M,"nearestPointOnLineSegment",(e,n,o,s=!0)=>{const l=nt.uni(nt.sub(n,e)),c=nt.add(e,nt.mul(l,nt.pry(nt.sub(o,e),l)));if(s){if(c[0]<Math.min(e[0],n[0]))return e[0]<n[0]?e:n;if(c[0]>Math.max(e[0],n[0]))return e[0]>n[0]?e:n;if(c[1]<Math.min(e[1],n[1]))return e[1]<n[1]?e:n;if(c[1]>Math.max(e[1],n[1]))return e[1]>n[1]?e:n}return c}),it(M,"distanceToLineSegment",(e,n,o,s=!0)=>nt.dist(o,nt.nearestPointOnLineSegment(e,n,o,s))),it(M,"nudge",(e,n,o)=>nt.isEqual(e,n)?e:nt.add(e,nt.mul(nt.uni(nt.sub(n,e)),o))),it(M,"nudgeAtAngle",(e,n,o)=>[Math.cos(n)*o+e[0],Math.sin(n)*o+e[1]]),it(M,"toPrecision",(e,n=4)=>[+e[0].toPrecision(n),+e[1].toPrecision(n)]),it(M,"pointsBetween",(e,n,o=6)=>Array.from(Array(o)).map((s,l)=>{const c=l/(o-1),d=Math.min(1,.5+Math.abs(.5-c));return[...nt.lrp(e,n,c),d]})),it(M,"slope",(e,n)=>e[0]===n[0]?NaN:(e[1]-n[1])/(e[0]-n[0])),it(M,"max",(...e)=>[Math.max(...e.map(n=>n[0])),Math.max(...e.map(n=>n[1]))]),it(M,"min",(...e)=>[Math.max(...e.map(n=>n[0])),Math.max(...e.map(n=>n[1]))]);var re=M,p0=function(){if(typeof Map<"u")return Map;function e(n,o){var s=-1;return n.some(function(l,c){return l[0]===o?(s=c,!0):!1}),s}return function(){function n(){this.__entries__=[]}return Object.defineProperty(n.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),n.prototype.get=function(o){var s=e(this.__entries__,o),l=this.__entries__[s];return l&&l[1]},n.prototype.set=function(o,s){var l=e(this.__entries__,o);~l?this.__entries__[l][1]=s:this.__entries__.push([o,s])},n.prototype.delete=function(o){var s=this.__entries__,l=e(s,o);~l&&s.splice(l,1)},n.prototype.has=function(o){return!!~e(this.__entries__,o)},n.prototype.clear=function(){this.__entries__.splice(0)},n.prototype.forEach=function(o,s){s===void 0&&(s=null);for(var l=0,c=this.__entries__;l<c.length;l++){var d=c[l];o.call(s,d[1],d[0])}},n}()}(),ua=typeof window<"u"&&typeof document<"u"&&window.document===document,Fi=function(){return typeof D.g<"u"&&D.g.Math===Math?D.g:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),z5=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Fi):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),U5=2;function N5(e,n){var o=!1,s=!1,l=0;function c(){o&&(o=!1,e()),s&&C()}function d(){z5(c)}function C(){var g=Date.now();if(o){if(g-l<U5)return;s=!0}else o=!0,s=!1,setTimeout(d,n);l=g}return C}var K5=20,X5=["top","right","bottom","left","width","height","size","weight"],G5=typeof MutationObserver<"u",Y5=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=N5(this.refresh.bind(this),K5)}return e.prototype.addObserver=function(n){~this.observers_.indexOf(n)||this.observers_.push(n),this.connected_||this.connect_()},e.prototype.removeObserver=function(n){var o=this.observers_,s=o.indexOf(n);~s&&o.splice(s,1),!o.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var n=this.updateObservers_();n&&this.refresh()},e.prototype.updateObservers_=function(){var n=this.observers_.filter(function(o){return o.gatherActive(),o.hasActive()});return n.forEach(function(o){return o.broadcastActive()}),n.length>0},e.prototype.connect_=function(){!ua||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),G5?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!ua||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(n){var o=n.propertyName,s=o===void 0?"":o,l=X5.some(function(c){return!!~s.indexOf(c)});l&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),v0=function(e,n){for(var o=0,s=Object.keys(n);o<s.length;o++){var l=s[o];Object.defineProperty(e,l,{value:n[l],enumerable:!1,writable:!1,configurable:!0})}return e},vo=function(e){var n=e&&e.ownerDocument&&e.ownerDocument.defaultView;return n||Fi},g0=Ui(0,0,0,0);function zi(e){return parseFloat(e)||0}function C0(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return n.reduce(function(s,l){var c=e["border-"+l+"-width"];return s+zi(c)},0)}function q5(e){for(var n=["top","right","bottom","left"],o={},s=0,l=n;s<l.length;s++){var c=l[s],d=e["padding-"+c];o[c]=zi(d)}return o}function J5(e){var n=e.getBBox();return Ui(0,0,n.width,n.height)}function Q5(e){var n=e.clientWidth,o=e.clientHeight;if(!n&&!o)return g0;var s=vo(e).getComputedStyle(e),l=q5(s),c=l.left+l.right,d=l.top+l.bottom,C=zi(s.width),g=zi(s.height);if(s.boxSizing==="border-box"&&(Math.round(C+c)!==n&&(C-=C0(s,"left","right")+c),Math.round(g+d)!==o&&(g-=C0(s,"top","bottom")+d)),!t3(e)){var m=Math.round(C+c)-n,_=Math.round(g+d)-o;Math.abs(m)!==1&&(C-=m),Math.abs(_)!==1&&(g-=_)}return Ui(l.left,l.top,C,g)}var e3=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof vo(e).SVGGraphicsElement}:function(e){return e instanceof vo(e).SVGElement&&typeof e.getBBox=="function"}}();function t3(e){return e===vo(e).document.documentElement}function r3(e){return ua?e3(e)?J5(e):Q5(e):g0}function n3(e){var n=e.x,o=e.y,s=e.width,l=e.height,c=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,d=Object.create(c.prototype);return v0(d,{x:n,y:o,width:s,height:l,top:o,right:n+s,bottom:l+o,left:n}),d}function Ui(e,n,o,s){return{x:e,y:n,width:o,height:s}}var o3=function(){function e(n){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ui(0,0,0,0),this.target=n}return e.prototype.isActive=function(){var n=r3(this.target);return this.contentRect_=n,n.width!==this.broadcastWidth||n.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var n=this.contentRect_;return this.broadcastWidth=n.width,this.broadcastHeight=n.height,n},e}(),i3=function(){function e(n,o){var s=n3(o);v0(this,{target:n,contentRect:s})}return e}(),s3=function(){function e(n,o,s){if(this.activeObservations_=[],this.observations_=new p0,typeof n!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=n,this.controller_=o,this.callbackCtx_=s}return e.prototype.observe=function(n){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(n instanceof vo(n).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;o.has(n)||(o.set(n,new o3(n)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(n){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(n instanceof vo(n).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;!o.has(n)||(o.delete(n),o.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var n=this;this.clearActive(),this.observations_.forEach(function(o){o.isActive()&&n.activeObservations_.push(o)})},e.prototype.broadcastActive=function(){if(!!this.hasActive()){var n=this.callbackCtx_,o=this.activeObservations_.map(function(s){return new i3(s.target,s.broadcastRect())});this.callback_.call(n,o,n),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),m0=typeof WeakMap<"u"?new WeakMap:new p0,_0=function(){function e(n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var o=Y5.getInstance(),s=new s3(n,o,this);m0.set(this,s)}return e}();["observe","unobserve","disconnect"].forEach(function(e){_0.prototype[e]=function(){var n;return(n=m0.get(this))[e].apply(n,arguments)}});var a3=function(){return typeof Fi.ResizeObserver<"u"?Fi.ResizeObserver:_0}();const l3=a3;var c3=Object.defineProperty,d3=Object.defineProperties,u3=Object.getOwnPropertyDescriptors,w0=Object.getOwnPropertySymbols,f3=Object.prototype.hasOwnProperty,h3=Object.prototype.propertyIsEnumerable,b0=(e,n,o)=>n in e?c3(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,fa=(e,n)=>{for(var o in n||(n={}))f3.call(n,o)&&b0(e,o,n[o]);if(w0)for(var o of w0(n))h3.call(n,o)&&b0(e,o,n[o]);return e},ha=(e,n)=>d3(e,u3(n));function Ot(e,...n){return{didIntersect:n.length>0,message:e,points:n}}function xn(e,n,o=0){const s=[e[0]+n[0]/2,e[1]+n[1]/2],l=M.rotWith(e,s,o),c=M.rotWith(M.add(e,[n[0],0]),s,o),d=M.rotWith(M.add(e,n),s,o),C=M.rotWith(M.add(e,[0,n[1]]),s,o);return[["top",[l,c]],["right",[c,d]],["bottom",[d,C]],["left",[C,l]]]}function p3(e,n,o){if(o===e||o===n)return!0;const s=Math.PI*2,l=(n-e+s)%s,c=(o-e+s)%s;return l<=Math.PI!=c>l}function v3(e,n){const o=M.slope(e[0],e[1]),s=M.slope(n[0],n[1]);if(o===s)return;if(Number.isNaN(o)&&!Number.isNaN(s))return[e[0][0],(e[0][0]-n[0][0])*s+n[0][1]];if(Number.isNaN(s)&&!Number.isNaN(o))return[n[0][0],(n[0][0]-e[0][0])*o+e[0][1]];const l=(o*e[0][0]-s*n[0][0]+n[0][1]-e[0][1])/(o-s),c=s*(l-n[0][0])+n[0][1];return[l,c]}function Ip(e,n,o,s){const l=o[0]-e[0],c=o[1]-e[1],d=s[0]*n[1]-s[1]*n[0],C=(c*s[0]-l*s[1])/d,g=(c*n[0]-l*n[1])/d;if(C<0||g<0)return Ot("miss");const m=n[1]/n[0],_=s[1]/s[0],y=e[1]-m*e[0],S=(o[1]-_*o[0]-y)/(m-_),R=m*S+y;return Number.isFinite(S)?Ot("intersection",[S,R]):Ot("parallel")}function ti(e,n,o,s){const[l,c]=e,[d,C]=n,[g,m]=o,[_,y]=s;if(C/d!==(y-m)/(_-g)){const L=d*(y-m)-C*(_-g);if(L!==0){const S=((c-m)*(_-g)-(l-g)*(y-m))/L,R=((c-m)*d-(l-g)*C)/L;if(S>=0&&R>=0&&R<=1)return Ot("intersection",[l+S*d,c+S*C])}}return Ot("no intersection")}function x0(e,n,o,s,l=0){return _3(o,s,l,e,n)}function pa(e,n,o,s,l,c){const d=e,C=M.mul(n,999999999);return go(d,C,o,s,l,c)}function Ni(e,n,o,s=0){const{minX:l,minY:c,width:d,height:C}=o;return x0(e,n,[l,c],[d,C],s)}function Pp(e,n,o,s){return ti(o,s,e,n)}function ri(e,n,o,s){const l=M.sub(e,o),c=M.sub(s,o),d=M.sub(n,e),C=c[0]*l[1]-c[1]*l[0],g=d[0]*l[1]-d[1]*l[0],m=c[1]*d[0]-c[0]*d[1];if(C===0||g===0)return Ot("coincident");if(m===0)return Ot("parallel");if(m!==0){const _=C/m,y=g/m;if(0<=_&&_<=1&&0<=y&&y<=1)return Ot("intersection",M.add(e,M.mul(d,_)))}return Ot("no intersection")}function g3(e,n,o,s){return y0(o,s,e,n)}function C3(e,n,o,s,l,c){const d=M.angle(o,l),C=M.angle(o,c),g=R3(o,s,s,0,e,n);if(!g.didIntersect)return Ot("no intersection");const m=g.points.filter(_=>p3(d,C,M.angle(o,_)));return m.length===0?Ot("no intersection"):Ot("intersection",...m)}function va(e,n,o,s){const l=(n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]),c=2*((n[0]-e[0])*(e[0]-o[0])+(n[1]-e[1])*(e[1]-o[1])),d=o[0]*o[0]+o[1]*o[1]+e[0]*e[0]+e[1]*e[1]-2*(o[0]*e[0]+o[1]*e[1])-s*s,C=c*c-4*l*d;if(C<0)return Ot("outside");if(C===0)return Ot("tangent");const g=Math.sqrt(C),m=(-c+g)/(2*l),_=(-c-g)/(2*l);if((m<0||m>1)&&(_<0||_>1))return m<0&&_<0||m>1&&_>1?Ot("outside"):Ot("inside");const y=[];return 0<=m&&m<=1&&y.push(M.lrp(e,n,m)),0<=_&&_<=1&&y.push(M.lrp(e,n,_)),Ot("intersection",...y)}function go(e,n,o,s,l,c=0){if(s===0||l===0||M.isEqual(e,n))return Ot("no intersection");s=s<0?s:-s,l=l<0?l:-l,e=M.sub(M.rotWith(e,o,-c),o),n=M.sub(M.rotWith(n,o,-c),o);const d=M.sub(n,e),C=d[0]*d[0]/s/s+d[1]*d[1]/l/l,g=2*e[0]*d[0]/s/s+2*e[1]*d[1]/l/l,m=e[0]*e[0]/s/s+e[1]*e[1]/l/l-1,_=[],y=g*g-4*C*m;if(y===0)_.push(-g/2/C);else if(y>0){const S=Math.sqrt(y);_.push((-g+S)/2/C),_.push((-g-S)/2/C)}const L=_.filter(S=>S>=0&&S<=1).map(S=>M.add(o,M.add(e,M.mul(M.sub(n,e),S)))).map(S=>M.rotWith(S,o,c));return Ot("intersection",...L)}function ga(e,n,o){return P3(o,e,n)}function ni(e,n,o){const s=[];for(let l=1;l<o.length;l++){const c=ri(e,n,o[l-1],o[l]);c&&s.push(...c.points)}return s.length===0?Ot("no intersection"):Ot("intersection",...o)}function m3(e,n,o){const s=[];for(let l=1;l<o.length+1;l++){const c=ri(e,n,o[l-1],o[l%o.length]);c&&s.push(...c.points)}return s.length===0?Ot("no intersection"):Ot("intersection",...o)}function _3(e,n,o,s,l){return xn(e,n,o).reduce((d,[C,[g,m]])=>{const _=ti(s,l,g,m);return _&&d.push(Ot(C,..._.points)),d},[]).filter(d=>d.didIntersect)}function y0(e,n,o,s){return xn(e,n).reduce((c,[d,[C,g]])=>{const m=ri(o,s,C,g);return m&&c.push(Ot(d,...m.points)),c},[]).filter(c=>c.didIntersect)}function Ca(e,n,o,s){return xn(e,n).reduce((c,[d,[C,g]])=>{const m=y0(o,s,C,g);return c.push(...m.map(_=>Ot(`${d} ${_.message}`,..._.points))),c},[]).filter(c=>c.didIntersect)}function w3(e,n,o,s,l,c){return xn(e,n).reduce((C,[g,[m,_]])=>{const y=y3(o,s,l,c,m,_);return y&&C.push(ha(fa({},y),{message:g})),C},[]).filter(C=>C.didIntersect)}function E0(e,n,o,s){return xn(e,n).reduce((c,[d,[C,g]])=>{const m=va(C,g,o,s);return m&&c.push(ha(fa({},m),{message:d})),c},[]).filter(c=>c.didIntersect)}function b3(e,n,o,s,l,c=0){return xn(e,n).reduce((C,[g,[m,_]])=>{const y=go(m,_,o,s,l,c);return y&&C.push(ha(fa({},y),{message:g})),C},[]).filter(C=>C.didIntersect)}function $p(e,n,o){const{minX:s,minY:l,width:c,height:d}=o;return Ca(e,n,[s,l],[c,d])}function ma(e,n,o){return xn(e,n).reduce((l,[c,[d,C]])=>{const g=ni(d,C,o);return g.didIntersect&&l.push(Ot(c,...g.points)),l},[]).filter(l=>l.didIntersect)}function x3(e,n,o){return xn(e,n).reduce((l,[c,[d,C]])=>{const g=m3(d,C,o);return g.didIntersect&&l.push(Ot(c,...g.points)),l},[]).filter(l=>l.didIntersect)}function y3(e,n,o,s,l,c){return C3(l,c,e,n,o,s)}function L0(e,n,o,s,l,c){return w3(l,c,e,n,o,s)}function E3(e,n,o,s,l){const{minX:c,minY:d,width:C,height:g}=l;return L0(e,n,o,s,[c,d],[C,g])}function L3(e,n,o,s){return va(o,s,e,n)}function S3(e,n,o,s){let l=o[0]-e[0],c=o[1]-e[1];const d=Math.sqrt(l*l+c*c),C=(d*d-s*s+n*n)/(2*d),g=Math.sqrt(n*n-C*C);return l/=d,c/=d,Ot("intersection",[e[0]+l*C-c*g,e[1]+c*C+l*g],[e[0]+l*C+c*g,e[1]+c*C-l*g])}function S0(e,n,o,s){return E0(o,s,e,n)}function Hp(e,n,o){const{minX:s,minY:l,width:c,height:d}=o;return S0(e,n,[s,l],[c,d])}function Op(e,n,o,s,l,c){return pa(l,c,e,n,o,s)}function R3(e,n,o,s=0,l,c){return n===o?va(l,c,e,n):go(l,c,e,n,o,s)}function R0(e,n,o,s=0,l,c){return n===o?E0(l,c,e,n):b3(l,c,e,n,o,s)}function M3(e,n,o,s,l,c,d,C){return Ot("no intersection")}function kp(e,n,o,s,l,c){return M3(e,n,o,s,l,c,c,0)}function I3(e,n,o,s,l){const{minX:c,minY:d,width:C,height:g}=l;return R0(e,n,o,s,[c,d],[C,g])}function Tp(e,n,o){const{minX:s,minY:l,width:c,height:d}=e;return x0(n,o,[s,l],[c,d])}function P3(e,n,o){const{minX:s,minY:l,width:c,height:d}=e;return g3(n,o,[s,l],[c,d])}function Bp(e,n,o){const{minX:s,minY:l,width:c,height:d}=e;return Ca(n,o,[s,l],[c,d])}function $3(e,n){return Ca([e.minX,e.minY],[e.width,e.height],[n.minX,n.minY],[n.width,n.height])}function Vp(e,n,o,s,l){const{minX:c,minY:d,width:C,height:g}=e;return L0(n,o,s,l,[c,d],[C,g])}function Dp(e,n,o){const{minX:s,minY:l,width:c,height:d}=e;return S0(n,o,[s,l],[c,d])}function jp(e,n,o,s,l=0){const{minX:c,minY:d,width:C,height:g}=e;return R0(n,o,s,l,[c,d],[C,g])}function M0(e,n){return O3(n,e)}function H3(e,n){return I0(n,e)}function Ap(e,n,o){return ni(n,o,e)}function Zp(e,n,o){return ma(n,o,e)}function O3(e,n){return ma([n.minX,n.minY],[n.width,n.height],e)}function Wp(e,n,o){return ni(n,o,e)}function Fp(e,n,o){return ma(n,o,e)}function I0(e,n){return x3([n.minX,n.minY],[n.width,n.height],e)}function zp(e,n,o){return k3(o,!0).reduce((l,[c,d],C)=>{const g=ti(e,n,c,d);return g&&l.push(Ot(C.toString(),...g.points)),l},[]).filter(l=>l.didIntersect)}function k3(e,n=!1){const o=[];for(let s=1;s<e.length;s++)o.push([e[s-1],e[s]]);return n&&o.push([e[e.length-1],e[0]]),o}var T3=Object.defineProperty,B3=Object.defineProperties,V3=Object.getOwnPropertyDescriptors,Ki=Object.getOwnPropertySymbols,P0=Object.prototype.hasOwnProperty,$0=Object.prototype.propertyIsEnumerable,_a=(e,n,o)=>n in e?T3(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,Rt=(e,n)=>{for(var o in n||(n={}))P0.call(n,o)&&_a(e,o,n[o]);if(Ki)for(var o of Ki(n))$0.call(n,o)&&_a(e,o,n[o]);return e},kr=(e,n)=>B3(e,V3(n)),Co=(e,n)=>{var o={};for(var s in e)P0.call(e,s)&&n.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&Ki)for(var s of Ki(e))n.indexOf(s)<0&&$0.call(e,s)&&(o[s]=e[s]);return o},Tt=(e,n,o)=>(_a(e,typeof n!="symbol"?n+"":n,o),o),wa=h.createContext({});function D1(){return h.useContext(wa)}function D3(e,n){const o=h.useRef(void 0),s=h.useRef(void 0),l=h.useRef([0,0]),{inputs:c,bounds:d,callbacks:C}=D1();h.useEffect(()=>{const L=S=>S.preventDefault();return document.addEventListener("gesturestart",L),document.addEventListener("gesturechange",L),()=>{document.removeEventListener("gesturestart",L),document.removeEventListener("gesturechange",L)}},[]);const g=h.useCallback(({event:L})=>{var S,R,$,k;if(L.preventDefault(),c.isPinching)return;const{offset:T}=j3(L);if((L.altKey||L.ctrlKey||L.metaKey)&&L.buttons===0){const j=[...(R=(S=c.pointer)==null?void 0:S.point)!=null?R:[d.width/2,d.height/2],T[1]],X=c.pan(j,L);($=C.onZoom)==null||$.call(C,kr(Rt({},X),{delta:j}),L);return}const H=M.mul(L.shiftKey?[T[1],0]:[...T],.5);if(M.isEqual(H,[0,0]))return;const Z=c.pan(H,L);(k=C.onPan)==null||k.call(C,Z,L)},[C,c,d]),m=h.useCallback(({origin:L,event:S})=>{var R;if(S instanceof WheelEvent)return;const $=n.current;if(!$||!(S.target===$||$.contains(S.target)))return;const k=c.pinch(L,L);c.isPinching=!0,(R=C.onPinchStart)==null||R.call(C,k,S),s.current=k.point,o.current=k.origin,l.current=[0,0]},[C,c,d]),_=h.useCallback(({origin:L,offset:S,event:R})=>{var $;if(R instanceof WheelEvent)return;const k=n.current;if(!(R.target===k||(k==null?void 0:k.contains(R.target)))||!o.current)return;const T=c.pinch(L,o.current),H=M.sub(T.delta,l.current);l.current=T.delta,($=C.onPinch)==null||$.call(C,kr(Rt({},T),{point:T.point,origin:o.current,delta:[...H,S[0]]}),R),s.current=L},[C,c,d]),y=h.useCallback(({origin:L,event:S})=>{var R;const $=n.current;if(!(S.target===$||($==null?void 0:$.contains(S.target))))return;const k=c.pinch(L,L);c.isPinching=!1,(R=C.onPinchEnd)==null||R.call(C,k,S),s.current=void 0,o.current=void 0,l.current=[0,0]},[]);Z5({onWheel:g,onPinchStart:m,onPinch:_,onPinchEnd:y},{target:n,eventOptions:{passive:!1},pinch:{from:e,scaleBounds:()=>({from:c.zoom,max:5,min:.1})}})}var H0=10,O0=40,k0=800;function j3(e){let n=0,o=0,s=0,l=0;return"detail"in e&&(o=e.detail),"wheelDelta"in e&&(o=-e.wheelDelta/120),"wheelDeltaY"in e&&(o=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(n=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(n=o,o=0),s="deltaX"in e?e.deltaX:n*H0,l="deltaY"in e?e.deltaY:o*H0,(s||l)&&e.deltaMode&&(e.deltaMode==1?(s*=O0,l*=O0):(s*=k0,l*=k0)),s&&!n&&(n=s<1?-1:1),l&&!o&&(o=l<1?-1:1),{spin:[n,o],offset:[s,l]}}var A3=(e=>(e.TransformSelected="transform_selected",e.TranslateSelected="translate_selected",e.TransformAll="transform_all",e.TranslateAll="translate_all",e))(A3||{}),Z3=(e=>(e.Top="top_edge",e.Right="right_edge",e.Bottom="bottom_edge",e.Left="left_edge",e))(Z3||{}),fn=(e=>(e.TopLeft="top_left_corner",e.TopRight="top_right_corner",e.BottomRight="bottom_right_corner",e.BottomLeft="bottom_left_corner",e))(fn||{}),W3=(e=>(e.minX="minX",e.midX="midX",e.maxX="maxX",e.minY="minY",e.midY="midY",e.maxY="maxY",e))(W3||{});String.prototype.replaceAll||(String.prototype.replaceAll=function(e,n){return Object.prototype.toString.call(e).toLowerCase()==="[object regexp]"?this.replace(e,n):this.replace(new RegExp(e,"g"),n)});var Xi=Math.PI*2,g1=class{static lerp(e,n,o){return o=g1.clamp(o,0,1),e*(1-o)+n*o}static lerpColor(e,n,o=.5){function s(g){const m=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(g);return[parseInt(m[1],16),parseInt(m[2],16),parseInt(m[3],16)]}function l(g){return"#"+((1<<24)+(g[0]<<16)+(g[1]<<8)+g[2]).toString(16).slice(1)}const c=s(e)||[0,0,0],d=s(n)||[0,0,0],C=c.slice();for(let g=0;g<3;g++)C[g]=Math.round(C[g]+o*(d[g]-c[g]));return l(C)}static modulate(e,n,o,s=!1){const[l,c]=n,[d,C]=o,g=d+(e-l)/(c-l)*(C-d);return s?d<C?Math.max(Math.min(g,C),d):Math.max(Math.min(g,d),C):g}static clamp(e,n,o){return Math.max(n,typeof o<"u"?Math.min(e,o):e)}static deepClone(e){if(e===null)return e;if(Array.isArray(e))return[...e];if(typeof e=="object"){const n=Rt({},e);return Object.keys(n).forEach(o=>n[o]=typeof e[o]=="object"?g1.deepClone(e[o]):e[o]),n}return e}static rng(e=""){let n=0,o=0,s=0,l=0;function c(){const d=n^n<<11;return n=o,o=s,s=l,l^=(l>>>19^d^d>>>8)>>>0,l/4294967296}for(let d=0;d<e.length+64;d++)n^=e.charCodeAt(d)|0,c();return c}static pointsToLineSegments(e,n=!1){const o=[];for(let s=1;s<e.length;s++)o.push([e[s-1],e[s]]);return n&&o.push([e[e.length-1],e[0]]),o}static getRectangleSides(e,n,o=0){const s=[e[0]+n[0]/2,e[1]+n[1]/2],l=M.rotWith(e,s,o),c=M.rotWith(M.add(e,[n[0],0]),s,o),d=M.rotWith(M.add(e,n),s,o),C=M.rotWith(M.add(e,[0,n[1]]),s,o);return[["top",[l,c]],["right",[c,d]],["bottom",[d,C]],["left",[C,l]]]}static circleFromThreePoints(e,n,o){const[s,l]=e,[c,d]=n,[C,g]=o,m=s*(d-g)-l*(c-C)+c*g-C*d,_=(s*s+l*l)*(g-d)+(c*c+d*d)*(l-g)+(C*C+g*g)*(d-l),y=(s*s+l*l)*(c-C)+(c*c+d*d)*(C-s)+(C*C+g*g)*(s-c),L=-_/(2*m),S=-y/(2*m);return[L,S,Math.hypot(L-s,S-l)]}static perimeterOfEllipse(e,n){const o=Math.pow(e-n,2)/Math.pow(e+n,2);return Math.PI*(e+n)*(1+3*o/(10+Math.sqrt(4-3*o)))}static shortAngleDist(e,n){const o=Math.PI*2,s=(n-e)%o;return 2*s%o-s}static longAngleDist(e,n){return Math.PI*2-g1.shortAngleDist(e,n)}static lerpAngles(e,n,o){return e+g1.shortAngleDist(e,n)*o}static angleDelta(e,n){return g1.shortAngleDist(e,n)}static getSweep(e,n,o){return g1.angleDelta(M.angle(e,n),M.angle(e,o))}static clampRadians(e){return(Math.PI*2+e)%(Math.PI*2)}static snapAngleToSegments(e,n){const o=Math.PI*2/n;return Math.floor((g1.clampRadians(e)+o/2)/o)*o}static isAngleBetween(e,n,o){if(o===e||o===n)return!0;const s=(n-e+Xi)%Xi,l=(o-e+Xi)%Xi;return s<=Math.PI!=l>s}static degreesToRadians(e){return e*Math.PI/180}static radiansToDegrees(e){return e*180/Math.PI}static getArcLength(e,n,o,s){const l=g1.getSweep(e,o,s);return n*(2*Math.PI)*(l/(2*Math.PI))}static getSweepFlag(e,n,o){const s=M.angle(e,o);return(M.angle(e,n)-s+3*Math.PI)%(2*Math.PI)-Math.PI>0?0:1}static getLargeArcFlag(e,n,o){const s=M.angle(o,e),c=(M.angle(o,n)-s+3*Math.PI)%(2*Math.PI)-Math.PI;return Math.abs(c)>Math.PI/2?0:1}static getArcDashOffset(e,n,o,s,l){const c=g1.getSweepFlag(e,o,s),d=g1.getArcLength(e,n,o,s);return-(c<0?d:2*Math.PI*e[2]-d)/2+l}static getEllipseDashOffset(e,n){return-(2*Math.PI*e[2])/2+-n}static pointInCircle(e,n,o){return M.dist(e,n)<=o}static pointInEllipse(e,n,o,s,l=0){l=l||0;const c=Math.cos(l),d=Math.sin(l),C=M.sub(e,n),g=c*C[0]+d*C[1],m=d*C[0]-c*C[1];return g*g/(o*o)+m*m/(s*s)<=1}static pointInRect(e,n){return!(e[0]<n[0]||e[0]>e[0]+n[0]||e[1]<n[1]||e[1]>e[1]+n[1])}static pointInPolygon(e,n){let o=0;return n.forEach((s,l)=>{const c=n[(l+1)%n.length];s[1]<=e[1]?c[1]>e[1]&&M.cross(s,c,e)>0&&(o+=1):c[1]<=e[1]&&M.cross(s,c,e)<0&&(o-=1)}),o!==0}static pointInBounds(e,n){return!(e[0]<n.minX||e[0]>n.maxX||e[1]<n.minY||e[1]>n.maxY)}static pointInPolyline(e,n,o=3){for(let s=1;s<n.length;s++)if(M.distanceToLineSegment(n[s-1],n[s],e)<o)return!0;return!1}static getBoundsSides(e){return this.getRectangleSides([e.minX,e.minY],[e.width,e.height])}static expandBounds(e,n){return{minX:e.minX-n,minY:e.minY-n,maxX:e.maxX+n,maxY:e.maxY+n,width:e.width+n*2,height:e.height+n*2}}static boundsCollide(e,n){return!(e.maxX<n.minX||e.minX>n.maxX||e.maxY<n.minY||e.minY>n.maxY)}static boundsContain(e,n){return e.minX<n.minX&&e.minY<n.minY&&e.maxY>n.maxY&&e.maxX>n.maxX}static boundsContained(e,n){return g1.boundsContain(n,e)}static boundsAreEqual(e,n){return!(n.maxX!==e.maxX||n.minX!==e.minX||n.maxY!==e.maxY||n.minY!==e.minY)}static getBoundsFromPoints(e,n=0){let o=1/0,s=1/0,l=-1/0,c=-1/0;if(e.length<2)o=0,s=0,l=1,c=1;else for(const[d,C]of e)o=Math.min(d,o),s=Math.min(C,s),l=Math.max(d,l),c=Math.max(C,c);return n!==0?g1.getBoundsFromPoints(e.map(d=>M.rotWith(d,[(o+l)/2,(s+c)/2],n))):{minX:o,minY:s,maxX:l,maxY:c,width:Math.max(1,l-o),height:Math.max(1,c-s)}}static centerBounds(e,n){const o=this.getBoundsCenter(e),s=n[0]-o[0],l=n[1]-o[1];return this.translateBounds(e,[s,l])}static snapBoundsToGrid(e,n){const o=Math.round(e.minX/n)*n,s=Math.round(e.minY/n)*n,l=Math.round(e.maxX/n)*n,c=Math.round(e.maxY/n)*n;return{minX:o,minY:s,maxX:l,maxY:c,width:Math.max(1,l-o),height:Math.max(1,c-s)}}static translateBounds(e,n){return{minX:e.minX+n[0],minY:e.minY+n[1],maxX:e.maxX+n[0],maxY:e.maxY+n[1],width:e.width,height:e.height}}static rotateBounds(e,n,o){const[s,l]=M.rotWith([e.minX,e.minY],n,o),[c,d]=M.rotWith([e.maxX,e.maxY],n,o);return{minX:s,minY:l,maxX:c,maxY:d,width:e.width,height:e.height}}static getRotatedEllipseBounds(e,n,o,s,l=0){const c=Math.cos(l),d=Math.sin(l),C=Math.hypot(o*c,s*d),g=Math.hypot(o*d,s*c);return{minX:e+o-C,minY:n+s-g,maxX:e+o+C,maxY:n+s+g,width:C*2,height:g*2}}static getExpandedBounds(e,n){const o=Math.min(e.minX,n.minX),s=Math.min(e.minY,n.minY),l=Math.max(e.maxX,n.maxX),c=Math.max(e.maxY,n.maxY),d=Math.abs(l-o),C=Math.abs(c-s);return{minX:o,minY:s,maxX:l,maxY:c,width:d,height:C}}static getCommonBounds(e){if(e.length<2)return e[0];let n=e[0];for(let o=1;o<e.length;o++)n=g1.getExpandedBounds(n,e[o]);return n}static getRotatedCorners(e,n=0){const o=[e.minX+e.width/2,e.minY+e.height/2];return[[e.minX,e.minY],[e.maxX,e.minY],[e.maxX,e.maxY],[e.minX,e.maxY]].map(s=>M.rotWith(s,o,n))}static getTransformedBoundingBox(e,n,o,s=0,l=!1){const[c,d]=[e.minX,e.minY],[C,g]=[e.maxX,e.maxY];let[m,_]=[e.minX,e.minY],[y,L]=[e.maxX,e.maxY];if(n==="center")return{minX:m+o[0],minY:_+o[1],maxX:y+o[0],maxY:L+o[1],width:y-m,height:L-_,scaleX:1,scaleY:1};const[S,R]=M.rot(o,-s);switch(n){case"top_edge":case"top_left_corner":case"top_right_corner":{_+=R;break}case"bottom_edge":case"bottom_left_corner":case"bottom_right_corner":{L+=R;break}}switch(n){case"left_edge":case"top_left_corner":case"bottom_left_corner":{m+=S;break}case"right_edge":case"top_right_corner":case"bottom_right_corner":{y+=S;break}}const $=C-c,k=g-d,T=(y-m)/$,H=(L-_)/k,Z=T<0,z=H<0,j=Math.abs(y-m),X=Math.abs(L-_);if(l){const F=$/k,q=F<j/X,fe=j*(H<0?1:-1)*(1/F),Ee=X*(T<0?1:-1)*F;switch(n){case"top_left_corner":{q?_=L+fe:m=y+Ee;break}case"top_right_corner":{q?_=L+fe:y=m-Ee;break}case"bottom_right_corner":{q?L=_-fe:y=m-Ee;break}case"bottom_left_corner":{q?L=_-fe:m=y+Ee;break}case"bottom_edge":case"top_edge":{const qe=(m+y)/2,we=X*F;m=qe-we/2,y=qe+we/2;break}case"left_edge":case"right_edge":{const qe=(_+L)/2,we=j/F;_=qe-we/2,L=qe+we/2;break}}}if(s%(Math.PI*2)!==0){let F=[0,0];const q=M.med([c,d],[C,g]),fe=M.med([m,_],[y,L]);switch(n){case"top_left_corner":{F=M.sub(M.rotWith([y,L],fe,s),M.rotWith([C,g],q,s));break}case"top_right_corner":{F=M.sub(M.rotWith([m,L],fe,s),M.rotWith([c,g],q,s));break}case"bottom_right_corner":{F=M.sub(M.rotWith([m,_],fe,s),M.rotWith([c,d],q,s));break}case"bottom_left_corner":{F=M.sub(M.rotWith([y,_],fe,s),M.rotWith([C,d],q,s));break}case"top_edge":{F=M.sub(M.rotWith(M.med([m,L],[y,L]),fe,s),M.rotWith(M.med([c,g],[C,g]),q,s));break}case"left_edge":{F=M.sub(M.rotWith(M.med([y,_],[y,L]),fe,s),M.rotWith(M.med([C,d],[C,g]),q,s));break}case"bottom_edge":{F=M.sub(M.rotWith(M.med([m,_],[y,_]),fe,s),M.rotWith(M.med([c,d],[C,d]),q,s));break}case"right_edge":{F=M.sub(M.rotWith(M.med([m,_],[m,L]),fe,s),M.rotWith(M.med([c,d],[c,g]),q,s));break}}[m,_]=M.sub([m,_],F),[y,L]=M.sub([y,L],F)}return y<m&&([y,m]=[m,y]),L<_&&([L,_]=[_,L]),{minX:m,minY:_,maxX:y,maxY:L,width:y-m,height:L-_,scaleX:(y-m)/(C-c||1)*(Z?-1:1),scaleY:(L-_)/(g-d||1)*(z?-1:1)}}static getTransformAnchor(e,n,o){let s=e;switch(e){case"top_left_corner":{n&&o?s="bottom_right_corner":n?s="top_right_corner":o?s="bottom_left_corner":s="bottom_right_corner";break}case"top_right_corner":{n&&o?s="bottom_left_corner":n?s="top_left_corner":o?s="bottom_right_corner":s="bottom_left_corner";break}case"bottom_right_corner":{n&&o?s="top_left_corner":n?s="bottom_left_corner":o?s="top_right_corner":s="top_left_corner";break}case"bottom_left_corner":{n&&o?s="top_right_corner":n?s="bottom_right_corner":o?s="top_left_corner":s="top_right_corner";break}}return s}static getRelativeTransformedBoundingBox(e,n,o,s,l){const c=(s?n.maxX-o.maxX:o.minX-n.minX)/n.width,d=(l?n.maxY-o.maxY:o.minY-n.minY)/n.height,C=o.width/n.width,g=o.height/n.height,m=e.minX+e.width*c,_=e.minY+e.height*d,y=e.width*C,L=e.height*g;return{minX:m,minY:_,maxX:m+y,maxY:_+L,width:y,height:L}}static getRotatedSize(e,n){const o=M.div(e,2),s=[[0,0],[e[0],0],e,[0,e[1]]].map(c=>M.rotWith(c,o,n)),l=g1.getBoundsFromPoints(s);return[l.width,l.height]}static getBoundsCenter(e){return[e.minX+e.width/2,e.minY+e.height/2]}static getBoundsWithCenter(e){const n=g1.getBoundsCenter(e);return kr(Rt({},e),{midX:n[0],midY:n[1]})}static getCommonTopLeft(e){const n=[1/0,1/0];return e.forEach(o=>{n[0]=Math.min(n[0],o[0]),n[1]=Math.min(n[1],o[1])}),n}static getFromCache(e,n,o){let s=e.get(n);if(s===void 0&&(e.set(n,o()),s=e.get(n),s===void 0))throw Error("Cache did not include item!");return s}static uniqueId(e=""){return e?((Number(e)^Math.random()*16)>>Number(e)/4).toString(16):`${1e7}-${1e3}-${4e3}-${8e3}-${1e11}`.replace(/[018]/g,g1.uniqueId)}static rotateArray(e,n){return e.map((o,s)=>e[(s+n)%e.length])}static debounce(e,n=0){let o;return function(...s){clearTimeout(o),o=setTimeout(()=>e.apply(s),n)}}static getSvgPathFromStroke(e,n=!0){if(!e.length)return"";const o=e.length-1;return e.reduce((s,l,c,d)=>(c===o?n&&s.push("Z"):s.push(l,M.med(l,d[c+1])),s),["M",e[0],"Q"]).join(" ").replaceAll(this.TRIM_NUMBERS,"$1")}static getPerfectDashProps(e,n,o,s=1,l=!0){let c,d,C;if(o.toLowerCase()==="dashed")c=n*2,C=1,d=l?(c/2).toString():"0";else if(o.toLowerCase()==="dotted")c=n/100,C=100,d="0";else return{strokeDasharray:"none",strokeDashoffset:"none"};let g=Math.floor(e/c/(2*C));g-=g%s,g=Math.max(g,4);const m=Math.max(c,(e-g*c)/(l?g:g-1));return{strokeDasharray:[c,m].join(" "),strokeDashoffset:d}}static isMobileSize(){return typeof window>"u"?!1:window.innerWidth<768}static isMobileSafari(){if(typeof window>"u")return!1;const e=window.navigator.userAgent,n=!!e.match(/iPad/i)||!!e.match(/iPhone/i),o=!!e.match(/WebKit/i);return n&&o&&!e.match(/CriOS/i)}static throttle(e,n){let o,s;return function(...l){return o||(o=!0,setTimeout(()=>o=!1,n),s=e(...l)),s}}static isDarwin(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}static metaKey(e){return g1.isDarwin()?e.metaKey:e.ctrlKey}},B=g1;Tt(B,"getSnapPoints",(e,n,o)=>{const s=Rt({},e),l=[0,0],c=[],d={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},C=["midX","minX","maxX"],g=["midY","minY","maxY"],m=n.map(R=>{const $=C.flatMap((T,H)=>C.map((Z,z)=>{const j=s[T]-R[Z],X=Math.abs(j);return{f:T,t:Z,gap:j,distance:X,isCareful:H===0||H+z===3}})),k=g.flatMap((T,H)=>g.map((Z,z)=>{const j=s[T]-R[Z],X=Math.abs(j);return{f:T,t:Z,gap:j,distance:X,isCareful:H===0||H+z===3}}));return[R,$,k]});let _=1/0,y=1/0,L=1/0,S=1/0;return m.forEach(([R,$,k])=>{$.forEach(T=>{T.distance<o&&T.distance<L&&(L=T.distance,_=T.gap)}),k.forEach(T=>{T.distance<o&&T.distance<S&&(S=T.distance,y=T.gap)})}),m.forEach(([R,$,k])=>{_!==1/0&&$.forEach(T=>{Math.abs(T.gap-_)<2&&(d[T.f]=kr(Rt({},d[T.f]),{isSnapped:!0,to:R[T.t],B:R,distance:T.distance}))}),y!==1/0&&k.forEach(T=>{Math.abs(T.gap-y)<2&&(d[T.f]=kr(Rt({},d[T.f]),{isSnapped:!0,to:R[T.t],B:R,distance:T.distance}))})}),l[0]=_===1/0?0:_,l[1]=y===1/0?0:y,s.minX-=l[0],s.midX-=l[0],s.maxX-=l[0],s.minY-=l[1],s.midY-=l[1],s.maxY-=l[1],C.forEach(R=>{const $=d[R];if(!$.isSnapped)return;const{id:k,B:T}=$,H=s[k];c.push(k==="minX"?[[H,s.midY],[H,T.minY],[H,T.maxY]]:[[H,s.minY],[H,s.maxY],[H,T.minY],[H,T.maxY]])}),g.forEach(R=>{const $=d[R];if(!$.isSnapped)return;const{id:k,B:T}=$,H=s[k];c.push(k==="midY"?[[s.midX,H],[T.minX,H],[T.maxX,H]]:[[s.minX,H],[s.maxX,H],[T.minX,H],[T.maxX,H]])}),{offset:l,snapLines:c}}),Tt(B,"deepMerge",(e,n)=>{const o=Rt({},e),s=Object.entries(n);for(const[l,c]of s)o[l]=c===Object(c)&&!Array.isArray(c)?g1.deepMerge(o[l],c):c;return o}),Tt(B,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var Ur=B;function F3(){const{callbacks:e}=D1();(0,h.useEffect)(()=>{function n(){var o;(o=e.onShapeBlur)==null||o.call(e)}return Ur.isMobileSafari()?(document.addEventListener("focusout",n),()=>document.removeEventListener("focusout",n)):()=>null},[e])}function z3(){const{callbacks:e,inputs:n}=D1();return h.useMemo(()=>({onPointerDown:o=>{var s,l;if(o.dead||(o.dead=!0,!n.pointerIsValid(o))||o.button!==0&&o.button!==1||!n.pointerIsValid(o))return;o.currentTarget.setPointerCapture(o.pointerId);const c=n.pointerDown(o,"canvas");(o.button===0||o.button===1)&&((s=e.onPointCanvas)==null||s.call(e,c,o),(l=e.onPointerDown)==null||l.call(e,c,o))},onPointerMove:o=>{var s,l;if(o.dead||(o.dead=!0,!n.pointerIsValid(o)))return;const c=n.pointerMove(o,"canvas");o.currentTarget.hasPointerCapture(o.pointerId)&&((s=e.onDragCanvas)==null||s.call(e,c,o)),(l=e.onPointerMove)==null||l.call(e,c,o)},onPointerUp:o=>{var s,l,c,d;if(o.dead||(o.dead=!0,o.button!==0&&o.button!==1)||(n.activePointer=void 0,!n.pointerIsValid(o)))return;const C=n.isDoubleClick(),g=n.pointerUp(o,"canvas");o.currentTarget.hasPointerCapture(o.pointerId)&&((s=o.currentTarget)==null||s.releasePointerCapture(o.pointerId)),C&&!(g.altKey||g.metaKey)&&((l=e.onDoubleClickCanvas)==null||l.call(e,g,o)),(c=e.onReleaseCanvas)==null||c.call(e,g,o),(d=e.onPointerUp)==null||d.call(e,g,o)},onDrop:e.onDrop,onDragOver:e.onDragOver}),[e,n])}function U3(e){const{rPageState:n,rSelectionBounds:o,callbacks:s,inputs:l}=h.useContext(wa);return h.useMemo(()=>({onPointerDown:c=>{var d,C,g,m,_,y,L;if(c.dead||(c.dead=!0,!l.pointerIsValid(c))||!l.pointerIsValid(c))return;if(c.button===2){(d=s.onRightPointShape)==null||d.call(s,l.pointerDown(c,e),c);return}if(c.button!==0)return;const S=l.pointerDown(c,e);if((C=c.currentTarget)==null||C.setPointerCapture(c.pointerId),o.current&&B.pointInBounds(S.point,o.current)&&!n.current.selectedIds.includes(e)){(g=s.onPointBounds)==null||g.call(s,l.pointerDown(c,"bounds"),c),(m=s.onPointShape)==null||m.call(s,S,c),(_=s.onPointerDown)==null||_.call(s,S,c);return}(y=s.onPointShape)==null||y.call(s,S,c),(L=s.onPointerDown)==null||L.call(s,S,c)},onPointerUp:c=>{var d,C,g,m;if(c.dead||(c.dead=!0,c.button!==0)||(l.activePointer=void 0,!l.pointerIsValid(c)))return;const _=l.isDoubleClick(),y=l.pointerUp(c,e);c.currentTarget.hasPointerCapture(c.pointerId)&&((d=c.currentTarget)==null||d.releasePointerCapture(c.pointerId)),_&&!(y.altKey||y.metaKey)&&((C=s.onDoubleClickShape)==null||C.call(s,y,c)),(g=s.onReleaseShape)==null||g.call(s,y,c),(m=s.onPointerUp)==null||m.call(s,y,c)},onPointerMove:c=>{var d,C;if(c.dead||(c.dead=!0,!l.pointerIsValid(c))||l.pointer&&c.pointerId!==l.pointer.pointerId)return;const g=l.pointerMove(c,e);c.currentTarget.hasPointerCapture(c.pointerId)&&((d=s.onDragShape)==null||d.call(s,g,c)),(C=s.onPointerMove)==null||C.call(s,g,c)},onPointerEnter:c=>{var d;if(!l.pointerIsValid(c))return;const C=l.pointerEnter(c,e);(d=s.onHoverShape)==null||d.call(s,C,c)},onPointerLeave:c=>{var d;if(!l.pointerIsValid(c))return;const C=l.pointerEnter(c,e);(d=s.onUnhoverShape)==null||d.call(s,C,c)}}),[l,s,e])}function T0(e,n,o,s,l,c=!1,d=!1,C){const g={shape:e,asset:e.assetId?l[e.assetId]:void 0,meta:C,isChildOfSelected:d,isGhost:e.isGhost||c,isEditing:s.editingId===e.id,isBinding:s.bindingTargetId===e.id,isSelected:s.selectedIds.includes(e.id),isHovered:s.hoveredId===e.id||e.children!==void 0&&(s.hoveredId&&e.children.includes(s.hoveredId)||e.children.some(m=>s.selectedIds.includes(m)))};n.push(g),e.children&&(g.children=[],e.children.map(m=>o[m]).sort((m,_)=>m.childIndex-_.childIndex).forEach(m=>T0(m,g.children,o,s,l,g.isGhost,g.isSelected||g.isChildOfSelected,C)))}function N3(e,n){return B.boundsContain(n,e)||B.boundsCollide(n,e)}function K3(e,n,o,s){const{callbacks:l,shapeUtils:c,bounds:d}=D1(),C=h.useRef(),g=h.useRef(-1),m=h.useRef(new Set),_=h.useRef(new Set),{selectedIds:y,camera:L}=n,[S,R]=M.sub(M.div([0,0],L.zoom),L.point),[$,k]=M.sub(M.div([d.width,d.height],L.zoom),L.point),T={minX:S,minY:R,maxX:$,maxY:k,height:$-S,width:k-R},H=_.current,Z=m.current;H.clear(),Z.clear(),Object.values(e.shapes).filter(F=>c[F.type].isStateful||y.includes(F.id)||N3(c[F.type].getBounds(F),T)).forEach(F=>{if(F.parentId===e.id){Z.add(F.id),H.add(F);return}Z.add(F.parentId),H.add(e.shapes[F.parentId])}),H.size!==g.current&&(C.current&&clearTimeout(C.current),C.current=requestAnimationFrame(()=>{var F;(F=l.onRenderCountChange)==null||F.call(l,Array.from(Z.values()))}),g.current=H.size);const j=n.bindingId?e.bindings[n.bindingId].toId:void 0,X=[];return H.forEach(F=>T0(F,X,e.shapes,kr(Rt({},n),{bindingTargetId:j}),o,F.isGhost,!1,s)),X.sort((F,q)=>F.shape.childIndex-q.shape.childIndex),X}var ba=new Map;function X3(e,n){return Object.keys(n).reduce((o,s)=>{const l=n[s];return l?o+`${`--${e}-${s}`}: ${l};
`:o},"")}function G3(e,n,o=":root"){h.useLayoutEffect(()=>{const s=document.createElement("style"),l=X3(e,n);return s.setAttribute("id",`${e}-theme`),s.setAttribute("data-selector",o),s.innerHTML=`
        ${o} {
          ${l}
        }
      `,document.head.appendChild(s),()=>{s&&document.head.contains(s)&&document.head.removeChild(s)}},[e,n,o])}function Y3(e,n){h.useLayoutEffect(()=>{if(ba.get(e))return()=>{};const o=document.createElement("style");return o.innerHTML=n,o.setAttribute("id",e),document.head.appendChild(o),ba.set(e,o),()=>{o&&document.head.contains(o)&&(document.head.removeChild(o),ba.delete(e))}},[e,n])}var q3=(e,...n)=>e.reduce((o,s,l)=>o+s+(l<n.length?n[l]:""),""),J3={accent:"rgb(255, 0, 0)",brushFill:"rgba(0,0,0,.05)",brushStroke:"rgba(0,0,0,.25)",selectStroke:"rgb(66, 133, 244)",selectFill:"rgba(65, 132, 244, 0.05)",binding:"rgba(65, 132, 244, 0.12)",background:"rgb(248, 249, 250)",foreground:"rgb(51, 51, 51)",grid:"rgba(144, 144, 144, 1)"},Q3=q3`
  @font-face {
    font-family: 'Recursive';
    font-style: normal;
    font-weight: 500;
    font-display: swap;
    src: url(https://fonts.gstatic.com/s/recursive/v23/8vI-7wMr0mhh-RQChyHEH06TlXhq_gukbYrFMk1QuAIcyEwG_X-dpEfaE5YaERmK-CImKsvxvU-MXGX2fSqasNfUlTGZnI14ZeY.woff2)
      format('woff2');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
      U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
  }

  @font-face {
    font-family: 'Recursive';
    font-style: normal;
    font-weight: 700;
    font-display: swap;
    src: url(https://fonts.gstatic.com/s/recursive/v23/8vI-7wMr0mhh-RQChyHEH06TlXhq_gukbYrFMk1QuAIcyEwG_X-dpEfaE5YaERmK-CImKsvxvU-MXGX2fSqasNfUlTGZnI14ZeY.woff2)
      format('woff2');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
      U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
  }

  @font-face {
    font-family: 'Recursive Mono';
    font-style: normal;
    font-weight: 420;
    font-display: swap;
    src: url(https://fonts.gstatic.com/s/recursive/v23/8vI-7wMr0mhh-RQChyHEH06TlXhq_gukbYrFMk1QuAIcyEwG_X-dpEfaE5YaERmK-CImqvTxvU-MXGX2fSqasNfUlTGZnI14ZeY.woff2)
      format('woff2');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
      U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
  }

  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: calc(64px * max(1, var(--tl-scale)));
    --tl-performance-all: auto;
    --tl-performance-selected: auto;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    z-index: 100;
    overflow: hidden;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
  }

  .tl-container * {
    box-sizing: border-box;
  }

  .tl-overlay {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
    will-change: var(--tl-performance-all);
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden;
    padding: var(--tl-padding);
    overflow: hidden;
    contain: layout style size;
  }

  .tl-positioned-selected {
    will-change: var(--tl-performance-selected);
  }

  .tl-inner-div {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-stroke-hitarea {
    fill: none;
    stroke: transparent;
    stroke-width: calc(24px * var(--tl-scale));
    pointer-events: stroke;
    stroke-linecap: round;
    stroke-linejoin: round;
  }

  .tl-fill-hitarea {
    fill: transparent;
    stroke: transparent;
    stroke-width: calc(24px * var(--tl-scale));
    pointer-events: all;
    stroke-linecap: round;
    stroke-linejoin: round;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-cursor-ns {
    cursor: ns-resize;
  }

  .tl-cursor-ew {
    cursor: ew-resize;
  }

  .tl-cursor-nesw {
    cursor: nesw-resize;
  }

  .tl-cursor-nwse {
    cursor: nwse-resize;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
    cursor: grab;
  }

  .tl-binding {
    fill: var(--tl-selectFill);
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user {
    left: calc(-15px * var(--tl-scale));
    top: calc(-15px * var(--tl-scale));
    height: calc(35px * var(--tl-scale));
    width: calc(35px * var(--tl-scale));
    transform: scale(var(--tl-scale));
    pointer-events: none;
    will-change: transform;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-editing {
    stroke-width: calc(2.5px * min(5, var(--tl-scale)));
  }

  .tl-performance {
    will-change: transform, contents;
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-center {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
    contain: layout style size;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle:hover .tl-handle-bg {
    fill: var(--tl-selectFill);
  }

  .tl-handle:hover .tl-handle-bg > * {
    stroke: var(--tl-selectFill);
  }

  .tl-handle:active .tl-handle-bg {
    cursor: grabbing;
    fill: var(--tl-selectFill);
  }

  .tl-handle:active .tl-handle-bg > * {
    stroke: var(--tl-selectFill);
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    pointer-events: all;
    r: calc(16px / max(1, var(--tl-zoom)));
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }
`;function e7(e,n){const o=h.useMemo(()=>Rt(Rt({},J3),e),[e]);G3("tl",o,n),Y3("tl-canvas",Q3)}function mo(e){const{callbacks:n,inputs:o}=D1(),s=h.useCallback(g=>{var m,_,y;if(g.dead||(g.dead=!0,g.button!==0)||!o.pointerIsValid(g))return;const L=o.pointerDown(g,e);o.isDoubleClick()&&!(L.altKey||L.metaKey)&&((m=n.onDoubleClickBoundsHandle)==null||m.call(n,L,g)),(_=n.onPointBoundsHandle)==null||_.call(n,L,g),(y=n.onPointerDown)==null||y.call(n,L,g)},[o,n,e]),l=h.useCallback(g=>{var m,_;if(g.dead||(g.dead=!0,g.button!==0)||!o.pointerIsValid(g))return;const y=o.pointerUp(g,e);(m=n.onReleaseBoundsHandle)==null||m.call(n,y,g),(_=n.onPointerUp)==null||_.call(n,y,g)},[o,n,e]),c=h.useCallback(g=>{var m,_;if(g.dead||(g.dead=!0,!o.pointerIsValid(g)))return;g.currentTarget.hasPointerCapture(g.pointerId)&&((m=n.onDragBoundsHandle)==null||m.call(n,o.pointerMove(g,e),g));const y=o.pointerMove(g,e);(_=n.onPointerMove)==null||_.call(n,y,g)},[o,n,e]),d=h.useCallback(g=>{var m;!o.pointerIsValid(g)||(m=n.onHoverBoundsHandle)==null||m.call(n,o.pointerEnter(g,e),g)},[o,n,e]),C=h.useCallback(g=>{var m;!o.pointerIsValid(g)||(m=n.onUnhoverBoundsHandle)==null||m.call(n,o.pointerEnter(g,e),g)},[o,n,e]);return{onPointerDown:s,onPointerUp:l,onPointerEnter:d,onPointerMove:c,onPointerLeave:C}}function t7(e,n,o){const s=h.useRef(),l=h.useRef();h.useLayoutEffect(()=>io(()=>{const{zoom:c,point:d}=o.camera,C=c!==s.current,g=d!==l.current;if(s.current=c,l.current=d,C||g){const m=e.current;if(n&&"current"in n){const _=n.current;C&&_&&_.style.setProperty("--tl-zoom",c.toString()),m&&m.style.setProperty("transform",`scale(${c}) translateX(${d[0]}px) translateY(${d[1]}px)`)}}}),[o])}function B0(e,n){return[(e[0]+n.point[0])*n.zoom,(e[1]+n.point[1])*n.zoom]}function xa(e,n){return e[n.type]}function r7(e,n,o){const{rSelectionBounds:s}=D1(),{selectedIds:l}=n,c=h.useRef();let d,C=0,g=!1,m=!1;if(l.length===1){const y=l[0],L=e.shapes[y];C=L.rotation||0,g=L.isLocked||!1;const S=xa(o,L);d=S.hideBounds?void 0:S.getBounds(L)}else if(l.length>1){const y=l.map(L=>e.shapes[L]);C=0,g=y.every(L=>L.isLocked),d=y.reduce((L,S,R)=>R===0?xa(o,S).getRotatedBounds(S):Ur.getExpandedBounds(L,xa(o,S).getRotatedBounds(S)),{})}if(d){const[y,L]=B0([d.minX,d.minY],n.camera),[S,R]=B0([d.maxX,d.maxY],n.camera);m=!!Object.values(e.bindings).find($=>l.includes($.toId)||l.includes($.fromId)),s.current={minX:y,minY:L,maxX:S,maxY:R,width:S-y,height:R-L}}else s.current=null;const _=c.current;return!_||!d?c.current=d:d&&_.minX===d.minX&&_.minY===d.minY&&_.maxX===d.maxX&&_.maxY===d.maxY&&(d=c.current),{bounds:d,rotation:C,isLocked:g,isLinked:m}}function n7(e){const{inputs:n,callbacks:o}=D1();return h.useMemo(()=>({onPointerDown:s=>{var l,c,d;if(s.dead||(s.dead=!0,!n.pointerIsValid(s))||s.button!==0||!n.pointerIsValid(s))return;(l=s.currentTarget)==null||l.setPointerCapture(s.pointerId);const C=n.pointerDown(s,e);(c=o.onPointHandle)==null||c.call(o,C,s),(d=o.onPointerDown)==null||d.call(o,C,s)},onPointerUp:s=>{var l,c,d,C;if(s.dead||(s.dead=!0,s.button!==0)||!n.pointerIsValid(s))return;const g=n.isDoubleClick(),m=n.pointerUp(s,e);s.currentTarget.hasPointerCapture(s.pointerId)&&((l=s.currentTarget)==null||l.releasePointerCapture(s.pointerId),g&&!(m.altKey||m.metaKey)&&((c=o.onDoubleClickHandle)==null||c.call(o,m,s)),(d=o.onReleaseHandle)==null||d.call(o,m,s)),(C=o.onPointerUp)==null||C.call(o,m,s)},onPointerMove:s=>{var l,c;if(s.dead||(s.dead=!0,!n.pointerIsValid(s)))return;const d=n.pointerMove(s,e);s.currentTarget.hasPointerCapture(s.pointerId)&&((l=o.onDragHandle)==null||l.call(o,d,s)),(c=o.onPointerMove)==null||c.call(o,d,s)},onPointerEnter:s=>{var l;if(!n.pointerIsValid(s))return;const c=n.pointerEnter(s,e);(l=o.onHoverHandle)==null||l.call(o,c,s)},onPointerLeave:s=>{var l;if(!n.pointerIsValid(s))return;const c=n.pointerEnter(s,e);(l=o.onUnhoverHandle)==null||l.call(o,c,s)}}),[n,o,e])}function o7(e){const{bounds:n}=D1();h.useEffect(()=>{const o=c=>{c.preventDefault()},s=c=>{const d=c.touches[0].pageX,C=c.touches[0].radiusX||0;(d-C<10||d+C>n.width-10)&&c.preventDefault()},l=e.current;return l?(l.addEventListener("touchstart",o),l.addEventListener("gestureend",o),l.addEventListener("gesturechange",o),l.addEventListener("gesturestart",o),l.addEventListener("touchstart",s),()=>{l&&(l.removeEventListener("touchstart",o),l.removeEventListener("gestureend",o),l.removeEventListener("gesturechange",o),l.removeEventListener("gesturestart",o),l.removeEventListener("touchstart",s))}):()=>{}},[e,n.width])}function i7(){const{callbacks:e,inputs:n}=D1();return h.useMemo(()=>({onPointerDown:o=>{var s,l,c,d;if(o.dead||(o.dead=!0,!n.pointerIsValid(o)))return;if(o.button===2){(s=e.onRightPointBounds)==null||s.call(e,n.pointerDown(o,"bounds"),o);return}if(o.button!==0)return;(l=o.currentTarget)==null||l.setPointerCapture(o.pointerId);const C=n.pointerDown(o,"bounds");(c=e.onPointBounds)==null||c.call(e,C,o),(d=e.onPointerDown)==null||d.call(e,C,o)},onPointerUp:o=>{var s,l,c,d;if(o.dead||(o.dead=!0,o.button!==0)||(n.activePointer=void 0,!n.pointerIsValid(o)))return;const C=n.isDoubleClick(),g=n.pointerUp(o,"bounds");o.currentTarget.hasPointerCapture(o.pointerId)&&((s=o.currentTarget)==null||s.releasePointerCapture(o.pointerId)),C&&!(g.altKey||g.metaKey)&&((l=e.onDoubleClickBounds)==null||l.call(e,g,o)),(c=e.onReleaseBounds)==null||c.call(e,g,o),(d=e.onPointerUp)==null||d.call(e,g,o)},onPointerMove:o=>{var s,l;if(o.dead||(o.dead=!0,!n.pointerIsValid(o)))return;o.currentTarget.hasPointerCapture(o.pointerId)&&((s=e.onDragBounds)==null||s.call(e,n.pointerMove(o,"bounds"),o));const c=n.pointerMove(o,"bounds");(l=e.onPointerMove)==null||l.call(e,c,o)},onPointerEnter:o=>{var s;!n.pointerIsValid(o)||(s=e.onHoverBounds)==null||s.call(e,n.pointerEnter(o,"bounds"),o)},onPointerLeave:o=>{var s;!n.pointerIsValid(o)||(s=e.onUnhoverBounds)==null||s.call(e,n.pointerEnter(o,"bounds"),o)}}),[n,e])}function V0(e,n=0){const o=h.useRef(null);return h.useLayoutEffect(()=>io(()=>{const s=o.current,l=`
    translate(
      calc(${e.minX}px - var(--tl-padding)),
      calc(${e.minY}px - var(--tl-padding))
    )
    rotate(${n+(e.rotation||0)}rad)`;s.style.setProperty("transform",l),s.style.setProperty("width",`calc(${Math.floor(e.width)}px + (var(--tl-padding) * 2))`),s.style.setProperty("height",`calc(${Math.floor(e.height)}px + (var(--tl-padding) * 2))`)}),[e,n]),o}function s7(){const{inputs:e,callbacks:n}=D1();h.useEffect(()=>{const o=l=>{var c;(c=n.onKeyDown)==null||c.call(n,l.key,e.keydown(l),l)},s=l=>{var c;e.keyup(l),(c=n.onKeyUp)==null||c.call(n,l.key,e.keyup(l),l)};return window.addEventListener("keydown",o),window.addEventListener("keyup",s),()=>{window.removeEventListener("keydown",o),window.removeEventListener("keyup",s)}},[e,n])}function a7(e,n){const o=h.useRef("idle"),s=h.useRef(n),l=h.useRef([]),c=h.useRef(performance.now()),d=h.useRef(0),C=h.useRef(0),[g]=h.useState(()=>new l7),m=h.useCallback(_=>{const y=performance.now();function L(){const S=(performance.now()-y)/_.duration;if(S<=1){const $=e.current;if(!$)return;const k=_.curve?g.getSplinePoint(S+_.start):re.lrp(_.from,_.to,S);$.style.setProperty("transform",`translate(${k[0]}px, ${k[1]}px)`),d.current=requestAnimationFrame(L);return}const R=l.current.shift();R?(o.current="animating",m(R)):(o.current="idle",C.current=setTimeout(()=>{o.current="stopped"},250))}L()},[g]);h.useLayoutEffect(()=>{const _=performance.now();o.current==="stopped"&&(c.current=_,s.current=n,g.clear()),g.addPoint(n);const y={distance:g.totalLength,curve:g.points.length>3,start:g.points.length-3,from:s.current,to:n,timeStamp:_,duration:Math.min(_-c.current,300)};switch(s.current=n,c.current=_,o.current){case"stopped":{s.current=n,o.current="idle";break}case"idle":{o.current="animating",m(y);break}case"animating":{l.current.push(y);break}}return()=>clearTimeout(C.current)},[n,g])}var l7=class{constructor(){Tt(this,"points",[]),Tt(this,"lengths",[]),Tt(this,"totalLength",0),Tt(this,"prev")}addPoint(e){if(this.prev){const n=re.dist(this.prev,e);this.lengths.push(n),this.totalLength+=n,this.points.push(e)}this.prev=e}getSplinePoint(e){const{points:n}=this,o=n.length-1,s=Math.trunc(e),l=Math.min(s+1,o),c=Math.min(l+1,o),d=Math.min(c+1,o),C=l-1;e=e-s;const g=e*e,m=g*e,_=-m+2*g-e,y=3*m-5*g+2,L=-3*m+4*g+e,S=m-g;return[.5*(n[C][0]*_+n[l][0]*y+n[c][0]*L+n[d][0]*S),.5*(n[C][1]*_+n[l][1]*y+n[c][1]*L+n[d][1]*S)]}clear(){this.points=[],this.totalLength=0}};function c7(e,n){h.useLayoutEffect(()=>{if(n&&"current"in n){const o=n==null?void 0:n.current;if(!o)return;switch(e){case"transform_selected":{o.style.setProperty("--tl-performance-all","auto"),o.style.setProperty("--tl-performance-selected","transform, contents");break}case"transform_all":{o.style.setProperty("--tl-performance-all","transform, contents"),o.style.setProperty("--tl-performance-selected","transform, contents");break}case"translate_selected":{o.style.setProperty("--tl-performance-all","auto"),o.style.setProperty("--tl-performance-selected","transform");break}case"translate_all":{o.style.setProperty("--tl-performance-all","transform"),o.style.setProperty("--tl-performance-selected","transform");break}default:o.style.setProperty("--tl-performance-all","auto"),o.style.setProperty("--tl-performance-selected","auto")}}},[e])}var oi=i1(function(n){var o=n,{id:s,bounds:l,rotation:c=0,isGhost:d=!1,isSelected:C=!1,children:g}=o,m=Co(o,["id","bounds","rotation","isGhost","isSelected","children"]);const _=V0(l,c);return h.createElement("div",Rt({id:s,ref:_,className:`tl-positioned${d?" tl-ghost":""}${C?" tl-positioned-selected":""}`,"aria-label":"container","data-testid":"container"},m),g)}),d7=i1(function({brush:n}){return h.createElement(oi,{bounds:n,rotation:0},h.createElement(xr,null,h.createElement("rect",{className:"tl-brush",opacity:1,x:0,y:0,width:n.width,height:n.height,"aria-label":"brush"})))}),u7=i1(function({bounds:n,isLocked:o,isHidden:s}){return h.createElement("rect",{className:["tl-bounds-center",o?"tl-dashed":""].join(" "),x:-1,y:-1,width:n.width+2,height:n.height+2,opacity:s?0:1,pointerEvents:"none","aria-label":"center handle"})}),f7=i1(function({bounds:n,targetSize:o,size:s,isHidden:l}){const c=mo("rotate");return h.createElement("g",{cursor:"grab",opacity:l?0:1},h.createElement("circle",Rt({className:"tl-transparent","aria-label":"rotate handle transparent",cx:n.width/2,cy:s*-2,r:o,pointerEvents:l?"none":"all"},c)),h.createElement("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:n.width/2,cy:s*-2,r:s/2,pointerEvents:"none"}))}),h7={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},Gi=i1(function({size:n,targetSize:o,isHidden:s,corner:l,bounds:c}){const d=mo(l),C=l==="top_left_corner"||l==="top_right_corner",g=l==="top_left_corner"||l==="bottom_left_corner";return h.createElement("g",{opacity:s?0:1},h.createElement("rect",Rt({className:"tl-transparent "+(s?"":h7[l]),"aria-label":"corner transparent",x:(g?-1:c.width+1)-o,y:(C?-1:c.height+1)-o,width:o*2,height:o*2,pointerEvents:s?"none":"all"},d)),h.createElement("rect",{className:"tl-corner-handle","aria-label":"corner handle",x:(g?-1:c.width+1)-n/2,y:(C?-1:c.height+1)-n/2,width:n,height:n,pointerEvents:"none"}))});function p7({size:e,bounds:n,isHidden:o}){const s=mo("left"),l=mo("center"),c=mo("right");return h.createElement("g",{cursor:"grab",transform:`translate(${n.width/2-e*4}, ${n.height+e*2})`,"aria-label":"link handle"},h.createElement("g",{className:"tl-transparent",pointerEvents:o?"none":"all"},h.createElement("rect",Rt({x:0,y:0,width:e*2,height:e*2},s)),h.createElement("rect",Rt({x:e*3,y:0,width:e*2,height:e*2},l)),h.createElement("rect",Rt({x:e*6,y:0,width:e*2,height:e*2},c))),h.createElement("g",{className:"tl-rotate-handle",transform:`translate(${e/2}, ${e/2})`,"aria-label":"link rotate handle"},h.createElement("path",{d:`M 0,${e/2} L ${e},${e} ${e},0 Z`,pointerEvents:"none",opacity:o?0:1}),h.createElement("path",{transform:`translate(${e*3}, 0)`,d:`M 0,0 L ${e},0 ${e/2},${e} Z`,pointerEvents:"none",opacity:o?0:1}),h.createElement("path",{transform:`translate(${e*6}, 0)`,d:`M ${e},${e/2} L 0,0 0,${e} Z`,pointerEvents:"none",opacity:o?0:1})))}var v7={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},Yi=i1(function({size:n,isHidden:o,bounds:s,edge:l}){const c=mo(l),d=l==="top_edge"||l==="bottom_edge",C=l==="right_edge"||l==="bottom_edge",{height:g,width:m}=s;return h.createElement("rect",Rt({pointerEvents:o?"none":"all",className:"tl-transparent tl-edge-handle "+(o?"":v7[l]),"aria-label":`${l} handle`,opacity:o?0:1,x:d?n/2:(C?m+1:-1)-n/2,y:d?(C?g+1:-1)-n/2:n/2,width:d?Math.max(0,m+1-n):n,height:d?n:Math.max(0,g+1-n)},c))}),g7={right:0,bottomRight:45,bottom:90,bottomLeft:135,left:180,topLeft:225,top:270,topRight:315},yn=i1(function({bounds:n,side:o,targetSize:s,size:l}){const c=s*2,d={left:-c,topLeft:-c,bottomLeft:-c,right:n.width,topRight:n.width,bottomRight:n.width,top:n.width/2-c/2,bottom:n.width/2-c/2}[o],C={left:n.height/2-c/2,right:n.height/2-c/2,top:-c*2,topLeft:-c,topRight:-c,bottom:n.height,bottomLeft:n.height,bottomRight:n.height}[o],{callbacks:g,inputs:m}=D1(),_=h.useCallback(y=>{var L;y.stopPropagation();const S=m.pointerDown(y,o);(L=g.onShapeClone)==null||L.call(g,S,y)},[g.onShapeClone]);return h.createElement("g",{className:"tl-clone-target",transform:`translate(${d}, ${C})`,"aria-label":"clone button"},h.createElement("rect",{className:"tl-transparent",width:s*2,height:s*2}),h.createElement("g",{className:"tl-clone-button-target",onPointerDown:_,transform:`translate(${s}, ${s}) rotate(${g7[o]})`},h.createElement("circle",{className:"tl-transparent ",r:s}),h.createElement("path",{className:"tl-clone-button",d:`M -${l/2},-${l/2} L ${l/2},0 -${l/2},${l/2} Z`,strokeLinejoin:"round"})))});function C7({targetSize:e,size:n,bounds:o}){return h.createElement(h.Fragment,null,h.createElement(yn,{targetSize:e,size:n,bounds:o,side:"top"}),h.createElement(yn,{targetSize:e,size:n,bounds:o,side:"right"}),h.createElement(yn,{targetSize:e,size:n,bounds:o,side:"bottom"}),h.createElement(yn,{targetSize:e,size:n,bounds:o,side:"left"}),h.createElement(yn,{targetSize:e,size:n,bounds:o,side:"topLeft"}),h.createElement(yn,{targetSize:e,size:n,bounds:o,side:"topRight"}),h.createElement(yn,{targetSize:e,size:n,bounds:o,side:"bottomLeft"}),h.createElement(yn,{targetSize:e,size:n,bounds:o,side:"bottomRight"}))}var xr=h.forwardRef(function(n,o){var s=n,{id:l,className:c="",children:d}=s,C=Co(s,["id","className","children"]);return h.createElement(ia,null,()=>h.createElement("svg",Rt({ref:o,className:`tl-positioned-svg ${c}`},C),h.createElement("g",{id:l,className:"tl-centered-g"},d)))}),m7=i1(function({zoom:n,bounds:o,viewportWidth:s,rotation:l,isHidden:c,isLocked:d,hideCloneHandles:C,hideResizeHandles:g,hideRotateHandle:m,hideBindingHandles:_}){const y=(s<768?16:8)/n,L=8/n,S=Math.min(o.width,o.height)*n,R=!m&&!c&&!d&&S>32,$=!c&&!d&&S>24,k=!c&&!d&&S>20,T=!C&&S>24,H=!g&&!d;return h.createElement(oi,{bounds:o,rotation:l},h.createElement(xr,null,h.createElement(u7,{bounds:o,isLocked:d,isHidden:c}),H&&h.createElement(h.Fragment,null,h.createElement(Yi,{targetSize:y,size:L,bounds:o,edge:"top_edge",isHidden:!$}),h.createElement(Yi,{targetSize:y,size:L,bounds:o,edge:"right_edge",isHidden:!$}),h.createElement(Yi,{targetSize:y,size:L,bounds:o,edge:"bottom_edge",isHidden:!$}),h.createElement(Yi,{targetSize:y,size:L,bounds:o,edge:"left_edge",isHidden:!$}),h.createElement(Gi,{targetSize:y,size:L,bounds:o,isHidden:c||!k,corner:"top_left_corner"}),h.createElement(Gi,{targetSize:y,size:L,bounds:o,isHidden:c||!k,corner:"top_right_corner"}),h.createElement(Gi,{targetSize:y,size:L,bounds:o,isHidden:c||!k,corner:"bottom_right_corner"}),h.createElement(Gi,{targetSize:y,size:L,bounds:o,isHidden:c||!k,corner:"bottom_left_corner"})),R&&h.createElement(f7,{targetSize:y,size:L,bounds:o,isHidden:!$}),T&&h.createElement(C7,{bounds:o,targetSize:y,size:L}),!_&&h.createElement(p7,{targetSize:y,size:L,bounds:o,isHidden:!$})))}),_7=i1(function({bounds:n,rotation:o,isHidden:s}){const l=i7();return h.createElement(oi,{bounds:n,rotation:o},h.createElement(xr,null,h.createElement("rect",Rt({className:"tl-bounds-bg","aria-label":"bounds bg",width:n.width,height:n.height,opacity:s?0:1},l))))}),w7=i1(function({id:n,point:o}){const s=n7(n);return h.createElement(oi,{bounds:Ur.translateBounds({minX:0,minY:0,maxX:0,maxY:0,width:0,height:0},o)},h.createElement(xr,null,h.createElement("g",Rt({className:"tl-handle","aria-label":"handle"},s),h.createElement("circle",{className:"tl-handle-bg",pointerEvents:"all"}),h.createElement("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4}))))}),b7=i1(function({shape:n,zoom:o}){if(n.handles===void 0)return null;let s=null;const l=Object.values(n.handles).reduce((c,d)=>{const C=M.add(d.point,n.point);return(!s||M.dist(C,s)*o>=32)&&(c.push(d),s=C),c},[]);return l.length===1?null:h.createElement(h.Fragment,null,l.map(c=>h.createElement(w7,{key:n.id+"_"+c.id,id:c.id,point:M.add(c.point,n.point)})))}),x7=i1(function(n){const o=n.utils.getRef(n.shape);return h.createElement(n.utils.Component,Rt({ref:o},n))}),y7=h.memo(x7,(e,n)=>e.isHovered!==n.isHovered||e.isSelected!==n.isSelected||e.isEditing!==n.isEditing||e.isBinding!==n.isBinding||e.isGhost!==n.isGhost||e.meta!==n.meta?!1:n.shape!==e.shape?!n.utils.shouldRender(n.shape,e.shape):!0),E7=i1(function(n){var o=n,{shape:s,utils:l,meta:c}=o,d=Co(o,["shape","utils","meta"]);const{callbacks:C}=D1(),g=l.getBounds(s),m=U3(s.id);return h.createElement(oi,{id:s.id,bounds:g,rotation:s.rotation,"data-shape":s.type,isGhost:d.isGhost,isSelected:d.isSelected},h.createElement(y7,Rt({shape:s,utils:l,meta:c,events:m,bounds:g,onShapeChange:C.onShapeChange,onShapeBlur:C.onShapeBlur},d)))}),L7=i1(function e(n){var o=n,{shape:s,utils:l,meta:c,children:d}=o,C=Co(o,["shape","utils","meta","children"]);return h.createElement(h.Fragment,null,h.createElement(E7,Rt({shape:s,utils:l[s.type],meta:c},C)),d&&d.map(g=>h.createElement(e,Rt({key:g.shape.id,utils:l},g))))}),ya=i1(function({isHovered:n=!1,isSelected:o=!1,isEditing:s=!1,shape:l,user:c,meta:d}){const{shapeUtils:C}=D1(),g=C[l.type],m=g.getBounds(l),_=V0(m,l.rotation);return h.createElement("div",{ref:_,draggable:!1,className:["tl-indicator","tl-absolute",o&&!c?"tl-selected":"tl-hovered",s?"tl-editing":""].join(" ")},h.createElement("svg",{width:"100%",height:"100%"},h.createElement("g",{className:"tl-centered-g",stroke:c==null?void 0:c.color},h.createElement(g.Indicator,{shape:l,meta:d,user:c,bounds:m,isSelected:o,isHovered:n}))))}),S7=i1(function({page:n,pageState:o,assets:s,hideBounds:l,hideHandles:c,hideIndicators:d,hideBindingHandles:C,hideCloneHandles:g,hideRotateHandle:m,hideResizeHandles:_,meta:y}){const{bounds:L,shapeUtils:S}=D1(),R=K3(n,o,s,y),{bounds:$,isLinked:k,isLocked:T,rotation:H}=r7(n,o,S),{selectedIds:Z,hoveredId:z,editingId:j,camera:{zoom:X}}=o;let F=d,q=!0,fe=!1,Ee;const qe=Z.map(we=>n.shapes[we]);if(qe.length===1){const we=qe[0];fe=j===we.id,fe&&(F=!0);const Re=S[we.type];q=g||!Re.showCloneHandles,we.handles!==void 0&&!fe&&(Ee=we)}return h.createElement(h.Fragment,null,$&&h.createElement(_7,{bounds:$,rotation:H,isHidden:l}),R.map(we=>h.createElement(L7,Rt({key:we.shape.id,utils:S},we))),!F&&qe.map(we=>h.createElement(ya,{key:"selected_"+we.id,shape:we,meta:y,isSelected:!0,isEditing:fe})),!F&&z&&z!==j&&h.createElement(ya,{key:"hovered_"+z,shape:n.shapes[z],meta:y,isHovered:!0}),$&&h.createElement(m7,{zoom:X,bounds:$,viewportWidth:L.width,isLocked:T,rotation:H,isHidden:l,hideRotateHandle:m,hideResizeHandles:_,hideBindingHandles:C||!k,hideCloneHandles:q}),!c&&Ee&&h.createElement(b7,{shape:Ee,zoom:X}))});function R7({user:e}){const n=h.useRef(null);return a7(n,e.point),h.createElement("svg",{ref:n,className:"tl-absolute tl-user tl-counter-scaled",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 35 35",fill:"none",fillRule:"evenodd"},h.createElement("g",{fill:"rgba(0,0,0,.2)",transform:"translate(1,1)"},h.createElement("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),h.createElement("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})),h.createElement("g",{fill:"white"},h.createElement("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),h.createElement("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})),h.createElement("g",{fill:e.color},h.createElement("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),h.createElement("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"})))}function M7({userId:e,users:n}){return h.createElement(h.Fragment,null,Object.values(n).filter(o=>o&&o.id!==e).map(o=>h.createElement(R7,{key:o.id,user:o})))}function I7(e,n){const{inputs:o,callbacks:s}=D1(),l=h.useRef(!1),c=h.useCallback(()=>{var d,C;if(l.current){const g=(d=e.current)==null?void 0:d.getBoundingClientRect();if(g){const m={minX:g.left,maxX:g.left+g.width,minY:g.top,maxY:g.top+g.height,width:g.width,height:g.height};o.bounds=m,n(m),(C=s.onBoundsChange)==null||C.call(s,m)}}else l.current=!0},[e,o,s.onBoundsChange]);h.useEffect(()=>{const d=B.debounce(c,100);return window.addEventListener("scroll",d),window.addEventListener("resize",d),()=>{window.removeEventListener("scroll",d),window.removeEventListener("resize",d)}},[]),h.useEffect(()=>{const d=new l3(C=>{o.isPinching||C[0].contentRect&&c()});return e.current&&d.observe(e.current),()=>{d.disconnect()}},[e,o]),h.useEffect(()=>{c()},[e])}var P7=250,u1=class{constructor(){Tt(this,"pointer"),Tt(this,"keyboard"),Tt(this,"keys",{}),Tt(this,"isPinching",!1),Tt(this,"bounds",{minX:0,maxX:640,minY:0,maxY:480,width:640,height:480}),Tt(this,"zoom",1),Tt(this,"pointerUpTime",0),Tt(this,"activePointer"),Tt(this,"panStart",e=>{var n,o;const{shiftKey:s,ctrlKey:l,metaKey:c,altKey:d}=e,C={target:"wheel",pointerId:((n=this.pointer)==null?void 0:n.pointerId)||0,origin:((o=this.pointer)==null?void 0:o.origin)||[0,0],delta:[0,0],pressure:.5,point:u1.getPoint(e,this.bounds),shiftKey:s,ctrlKey:l,metaKey:c,altKey:d,spaceKey:this.keys[" "]};return this.pointer=C,C}),Tt(this,"pan",(e,n)=>{if(!this.pointer||this.pointer.target!=="wheel")return this.panStart(n);const{shiftKey:o,ctrlKey:s,metaKey:l,altKey:c}=n,d=this.pointer,C=u1.getPoint(n,this.bounds),g=kr(Rt({},d),{target:"wheel",delta:e,point:C,shiftKey:o,ctrlKey:s,metaKey:l,altKey:c,spaceKey:this.keys[" "]});return this.pointer=g,g}),Tt(this,"keydown",e=>{var n,o;const{shiftKey:s,ctrlKey:l,metaKey:c,altKey:d}=e;return this.keys[e.key]=!0,{point:((n=this.pointer)==null?void 0:n.point)||[0,0],origin:((o=this.pointer)==null?void 0:o.origin)||[0,0],key:e.key,keys:Object.keys(this.keys),shiftKey:s,ctrlKey:l,metaKey:B.isDarwin()?c:l,altKey:d}}),Tt(this,"keyup",e=>{var n,o;const{shiftKey:s,ctrlKey:l,metaKey:c,altKey:d}=e;return delete this.keys[e.key],{point:((n=this.pointer)==null?void 0:n.point)||[0,0],origin:((o=this.pointer)==null?void 0:o.origin)||[0,0],key:e.key,keys:Object.keys(this.keys),shiftKey:s,ctrlKey:l,metaKey:B.isDarwin()?c:l,altKey:d}})}pointerIsValid(e){if("pointerId"in e&&this.activePointer&&this.activePointer!==e.pointerId)return!1;if("touches"in e){const n=e.changedTouches[0];if(this.activePointer&&this.activePointer!==n.identifier)return!1}return!0}touchStart(e,n){const{shiftKey:o,ctrlKey:s,metaKey:l,altKey:c}=e,d=e.changedTouches[0];this.activePointer=d.identifier;const C={target:n,pointerId:d.identifier,origin:u1.getPoint(d,this.bounds),delta:[0,0],point:u1.getPoint(d,this.bounds),pressure:u1.getPressure(d),shiftKey:o,ctrlKey:s,metaKey:B.isDarwin()?l:s,altKey:c,spaceKey:this.keys[" "]};return this.pointer=C,C}touchEnd(e,n){const{shiftKey:o,ctrlKey:s,metaKey:l,altKey:c}=e,d=e.changedTouches[0],C={target:n,pointerId:d.identifier,origin:u1.getPoint(d,this.bounds),delta:[0,0],point:u1.getPoint(d,this.bounds),pressure:u1.getPressure(d),shiftKey:o,ctrlKey:s,metaKey:B.isDarwin()?l:s,altKey:c,spaceKey:this.keys[" "]};return this.pointer=C,this.activePointer=void 0,C}touchMove(e,n){const{shiftKey:o,ctrlKey:s,metaKey:l,altKey:c}=e,d=e.changedTouches[0],C=this.pointer,g=u1.getPoint(d,this.bounds),m=(C==null?void 0:C.point)?M.sub(g,C.point):[0,0],_=kr(Rt({origin:g},C),{target:n,pointerId:d.identifier,point:g,delta:m,pressure:u1.getPressure(d),shiftKey:o,ctrlKey:s,metaKey:B.isDarwin()?l:s,altKey:c,spaceKey:this.keys[" "]});return this.pointer=_,_}pointerDown(e,n){const{shiftKey:o,ctrlKey:s,metaKey:l,altKey:c}=e,d=u1.getPoint(e,this.bounds);this.activePointer=e.pointerId;const C={target:n,pointerId:e.pointerId,origin:d,point:d,delta:[0,0],pressure:u1.getPressure(e),shiftKey:o,ctrlKey:s,metaKey:B.isDarwin()?l:s,altKey:c,spaceKey:this.keys[" "]};return this.pointer=C,C}pointerEnter(e,n){const{shiftKey:o,ctrlKey:s,metaKey:l,altKey:c}=e,d=u1.getPoint(e,this.bounds),C={target:n,pointerId:e.pointerId,origin:d,delta:[0,0],point:d,pressure:u1.getPressure(e),shiftKey:o,ctrlKey:s,metaKey:B.isDarwin()?l:s,altKey:c,spaceKey:this.keys[" "]};return this.pointer=C,C}pointerMove(e,n){const{shiftKey:o,ctrlKey:s,metaKey:l,altKey:c}=e,d=this.pointer,C=u1.getPoint(e,this.bounds),g=(d==null?void 0:d.point)?M.sub(C,d.point):[0,0],m=kr(Rt({origin:C},d),{target:n,pointerId:e.pointerId,point:C,delta:g,pressure:u1.getPressure(e),shiftKey:o,ctrlKey:s,metaKey:B.isDarwin()?l:s,altKey:c,spaceKey:this.keys[" "]});return this.pointer=m,m}pointerUp(e,n){const{shiftKey:o,ctrlKey:s,metaKey:l,altKey:c}=e,d=this.pointer,C=u1.getPoint(e,this.bounds),g=(d==null?void 0:d.point)?M.sub(C,d.point):[0,0];this.activePointer=void 0;const m=kr(Rt({origin:C},d),{target:n,pointerId:e.pointerId,point:C,delta:g,pressure:u1.getPressure(e),shiftKey:o,ctrlKey:s,metaKey:B.isDarwin()?l:s,altKey:c,spaceKey:this.keys[" "]});return this.pointer=m,this.pointerUpTime=performance.now(),m}isDoubleClick(){if(!this.pointer)return!1;const{origin:e,point:n}=this.pointer,o=performance.now()-this.pointerUpTime<P7&&M.dist(e,n)<4;return o&&(this.activePointer=void 0),o}clear(){this.pointer=void 0}resetDoubleClick(){this.pointerUpTime=0}pinch(e,n){const{shiftKey:o,ctrlKey:s,metaKey:l,altKey:c}=this.keys,d=M.sub(n,e),C={pointerId:0,target:"pinch",origin:n,delta:d,point:M.sub(M.toFixed(e),[this.bounds.minX,this.bounds.minY]),pressure:.5,shiftKey:o,ctrlKey:s,metaKey:B.isDarwin()?l:s,altKey:c,spaceKey:this.keys[" "]};return this.pointer=C,C}reset(){this.pointerUpTime=0,this.pointer=void 0,this.keyboard=void 0,this.activePointer=void 0,this.keys={}}static getPoint(e,n){return[+e.clientX.toFixed(2)-n.minX,+e.clientY.toFixed(2)-n.minY]}static getPressure(e){return"pressure"in e&&+e.pressure.toFixed(2)||.5}static commandKey(){return B.isDarwin()?"\u2318":"Ctrl"}},$7=new u1;function H7({userId:e,users:n,meta:o,page:s}){const{shapeUtils:l}=D1();return h.createElement(h.Fragment,null,Object.values(n).filter(Boolean).filter(c=>c.id!==e&&c.selectedIds.length>0).map(c=>{const d=c.selectedIds.map(g=>s.shapes[g]).filter(Boolean);if(d.length===0)return null;const C=Ur.getCommonBounds(d.map(g=>l[g.type].getBounds(g)));return h.createElement(h.Fragment,{key:c.id+"_shapes"},h.createElement("div",{className:"tl-absolute tl-user-indicator-bounds",style:{backgroundColor:c.color+"0d",borderColor:c.color+"78",transform:`translate(${C.minX}px, ${C.minY}px)`,width:C.width,height:C.height,pointerEvents:"none"}}),d.map(g=>h.createElement(ya,{key:`${c.id}_${g.id}_indicator`,shape:g,user:c,meta:o,isHovered:!0})))}))}var O7=i1(function({snapLines:n}){return h.createElement(h.Fragment,null,n.map((o,s)=>h.createElement(k7,{key:s,snapLine:o})))}),k7=i1(function({snapLine:n}){const o=Ur.getBoundsFromPoints(n);return h.createElement(h.Fragment,null,h.createElement("line",{className:"tl-snap-line",x1:o.minX,y1:o.minY,x2:o.maxX,y2:o.maxY}),n.map(([s,l],c)=>h.createElement("use",{key:c,href:"#tl-snap-point",x:s,y:l})))}),D0=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]];function T7({grid:e,camera:n}){return h.createElement("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},h.createElement("defs",null,D0.map(([o,s,l],c)=>{const d=l*e*n.zoom,C=n.point[0]*n.zoom,g=n.point[1]*n.zoom,m=C>0?C%d:d+C%d,_=g>0?g%d:d+g%d,y=n.zoom<s?Ur.modulate(n.zoom,[o,s],[0,1]):1;return h.createElement("pattern",{key:`grid-pattern-${c}`,id:`grid-${c}`,width:d,height:d,patternUnits:"userSpaceOnUse"},h.createElement("circle",{className:"tl-grid-dot",cx:m,cy:_,r:1,opacity:y}))})),D0.map((o,s)=>h.createElement("rect",{key:`grid-rect-${s}`,width:"100%",height:"100%",fill:`url(#grid-${s})`})))}var B7=i1(function({camera:{zoom:n,point:o},children:s}){const l=2.5/n;return h.createElement("svg",{className:"tl-overlay"},h.createElement("defs",null,h.createElement("g",{id:"tl-snap-point"},h.createElement("path",{className:"tl-snap-point",d:`M ${-l},${-l} L ${l},${l} M ${-l},${l} L ${l},${-l}`}))),h.createElement("g",{transform:`scale(${n}) translate(${o})`},s))}),V7=i1(function({id:n,page:o,pageState:s,assets:l,snapLines:c,grid:d,users:C,userId:g,meta:m,performanceMode:_,externalContainerRef:y,hideHandles:L,hideBounds:S,hideIndicators:R,hideBindingHandles:$,hideCloneHandles:k,hideResizeHandles:T,hideRotateHandle:H,hideGrid:Z,onBoundsChange:z}){const j=h.useRef(null),X=h.useRef(null),F=h.useRef(null);$7.zoom=s.camera.zoom,I7(j,z),D3(s.camera.zoom,y||j),F3(),o7(j),t7(F,X,s),c7(_,X),s7();const q=z3();return h.createElement("div",{id:n,className:"tl-container",ref:X},h.createElement("div",Rt({id:"canvas",className:"tl-absolute tl-canvas",ref:j},q),!Z&&d&&h.createElement(T7,{grid:d,camera:s.camera}),h.createElement("div",{ref:F,className:"tl-absolute tl-layer","data-testid":"layer"},h.createElement(S7,{page:o,pageState:s,assets:l,hideBounds:S,hideIndicators:R,hideHandles:L,hideBindingHandles:$,hideCloneHandles:k,hideResizeHandles:T,hideRotateHandle:H,meta:m}),C&&g&&h.createElement(H7,{userId:g,users:C,page:o,meta:m}),s.brush&&h.createElement(d7,{brush:s.brush}),C&&h.createElement(M7,{userId:g,users:C})),h.createElement(B7,{camera:s.camera},c&&h.createElement(O7,{snapLines:c}))))}),D7=i1(function(n){var o=n,{id:s="tl",shapeUtils:l,page:c,pageState:d,assets:C=j7,users:g,userId:m,theme:_,meta:y,snapLines:L,grid:S,containerRef:R,performanceMode:$,hideHandles:k=!1,hideIndicators:T=!1,hideCloneHandles:H=!1,hideBindingHandles:Z=!1,hideResizeHandles:z=!1,hideRotateHandles:j=!1,hideBounds:X=!1,hideGrid:F=!0}=o,q=Co(o,["id","shapeUtils","page","pageState","assets","users","userId","theme","meta","snapLines","grid","containerRef","performanceMode","hideHandles","hideIndicators","hideCloneHandles","hideBindingHandles","hideResizeHandles","hideRotateHandles","hideBounds","hideGrid"]);e7(_,"#"+s);const fe=h.useRef(null),Ee=h.useRef(d);h.useEffect(()=>{Ee.current=d},[d]);const[qe,we]=h.useState(()=>({callbacks:q,shapeUtils:l,rSelectionBounds:fe,rPageState:Ee,bounds:{minX:0,minY:0,maxX:1/0,maxY:1/0,width:1/0,height:1/0},inputs:new u1})),Re=h.useCallback(Ct=>{we(kt=>kr(Rt({},kt),{bounds:Ct}))},[]);return h.createElement(wa.Provider,{value:qe},h.createElement(V7,{id:s,page:c,pageState:d,assets:C,snapLines:L,grid:S,users:g,userId:m,externalContainerRef:R,hideBounds:X,hideIndicators:T,hideHandles:k,hideCloneHandles:H,hideBindingHandles:Z,hideRotateHandle:j,hideResizeHandles:z,hideGrid:F,onBoundsChange:Re,performanceMode:$,meta:y}))}),j7={},qi=h.forwardRef(function(n,o){var s=n,{children:l,className:c=""}=s,d=Co(s,["children","className"]);return h.createElement(ia,null,()=>h.createElement("div",Rt({ref:o,className:`tl-positioned-div ${c}`,draggable:!1},d),h.createElement("div",{className:"tl-inner-div"},l)))}),Ea=class{constructor(){Tt(this,"refMap",new Map),Tt(this,"boundsCache",new WeakMap),Tt(this,"showCloneHandles",!1),Tt(this,"hideBounds",!1),Tt(this,"isStateful",!1),Tt(this,"shouldRender",(e,n)=>!0),Tt(this,"getRef",e=>(this.refMap.has(e.id)||this.refMap.set(e.id,h.createRef()),this.refMap.get(e.id))),Tt(this,"hitTestBounds",(e,n)=>{const o=this.getBounds(e),s=Ur.getRotatedCorners(o,e.rotation);return s.every(l=>Ur.pointInBounds(l,n))||I0(s,n).length>0}),Tt(this,"getRotatedBounds",e=>Ur.getBoundsFromPoints(Ur.getRotatedCorners(this.getBounds(e),e.rotation)))}};Tt(Ea,"Component",e=>h.forwardRef(e)),Tt(Ea,"Indicator",e=>e);/**
 * String.prototype.replaceAll() polyfill
 * https://gomakethings.com/how-to-replace-a-section-of-a-string-with-another-one-with-vanilla-js/
 * @author Chris Ferdinandi
 * @license MIT
 */var _o=D(7807);function A7(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var n;return new Promise(function(o){var s=function(){return indexedDB.databases().finally(o)};n=setInterval(s,100),s()}).finally(function(){return clearInterval(n)})}const Z7=A7;function Y1(e){return new Promise((n,o)=>{e.oncomplete=e.onsuccess=()=>n(e.result),e.onabort=e.onerror=()=>o(e.error)})}function W7(e,n){const o=Z7().then(()=>{const s=indexedDB.open(e);return s.onupgradeneeded=()=>s.result.createObjectStore(n),Y1(s)});return(s,l)=>o.then(c=>l(c.transaction(n,s).objectStore(n)))}let La;function Tr(){return La||(La=W7("keyval-store","keyval")),La}function Sa(e,n=Tr()){return n("readonly",o=>Y1(o.get(e)))}function Ji(e,n,o=Tr()){return o("readwrite",s=>(s.put(n,e),Y1(s.transaction)))}function Up(e,n=Tr()){return n("readwrite",o=>(e.forEach(s=>o.put(s[1],s[0])),Y1(o.transaction)))}function Np(e,n=Tr()){return n("readonly",o=>Promise.all(e.map(s=>Y1(o.get(s)))))}function Kp(e,n,o=Tr()){return o("readwrite",s=>new Promise((l,c)=>{s.get(e).onsuccess=function(){try{s.put(n(this.result),e),l(Y1(s.transaction))}catch(d){c(d)}}}))}function Xp(e,n=Tr()){return n("readwrite",o=>(o.delete(e),Y1(o.transaction)))}function Gp(e,n=Tr()){return n("readwrite",o=>(e.forEach(s=>o.delete(s)),Y1(o.transaction)))}function Yp(e=Tr()){return e("readwrite",n=>(n.clear(),Y1(n.transaction)))}function Ra(e,n){return e.openCursor().onsuccess=function(){!this.result||(n(this.result),this.result.continue())},Y1(e.transaction)}function qp(e=Tr()){return e("readonly",n=>{if(n.getAllKeys)return Y1(n.getAllKeys());const o=[];return Ra(n,s=>o.push(s.key)).then(()=>o)})}function Jp(e=Tr()){return e("readonly",n=>{if(n.getAll)return Y1(n.getAll());const o=[];return Ra(n,s=>o.push(s.value)).then(()=>o)})}function Qp(e=Tr()){return e("readonly",n=>{if(n.getAll&&n.getAllKeys)return Promise.all([Y1(n.getAllKeys()),Y1(n.getAll())]).then(([s,l])=>s.map((c,d)=>[c,l[d]]));const o=[];return e("readonly",s=>Ra(s,l=>o.push([l.key,l.value])).then(()=>o))})}function j0(e,n,o,s=l=>l){return e*s(.5-n*(.5-o))}function F7(e){return[-e[0],-e[1]]}function Br(e,n){return[e[0]+n[0],e[1]+n[1]]}function yr(e,n){return[e[0]-n[0],e[1]-n[1]]}function Vr(e,n){return[e[0]*n,e[1]*n]}function z7(e,n){return[e[0]/n,e[1]/n]}function ii(e){return[e[1],-e[0]]}function U7(e,n){return e[0]*n[0]+e[1]*n[1]}function N7(e,n){return e[0]===n[0]&&e[1]===n[1]}function K7(e){return Math.hypot(e[0],e[1])}function X7(e){return e[0]*e[0]+e[1]*e[1]}function A0(e,n){return X7(yr(e,n))}function Z0(e){return z7(e,K7(e))}function G7(e,n){return Math.hypot(e[1]-n[1],e[0]-n[0])}function si(e,n,o){let s=Math.sin(o),l=Math.cos(o),c=e[0]-n[0],d=e[1]-n[1],C=c*l-d*s,g=c*s+d*l;return[C+n[0],g+n[1]]}function Ma(e,n,o){return Br(e,Vr(yr(n,e),o))}function W0(e,n,o){return Br(e,Vr(n,o))}var{min:wo,PI:Y7}=Math,F0=.275,ai=Y7+1e-4;function Ia(e,n={}){let{size:o=16,smoothing:s=.5,thinning:l=.5,simulatePressure:c=!0,easing:d=Oe=>Oe,start:C={},end:g={},last:m=!1}=n,{cap:_=!0,taper:y=0,easing:L=Oe=>Oe*(2-Oe)}=C,{cap:S=!0,taper:R=0,easing:$=Oe=>--Oe*Oe*Oe+1}=g;if(e.length===0||o<=0)return[];let k=e[e.length-1].runningLength,T=Math.pow(o*s,2),H=[],Z=[],z=e.slice(0,10).reduce((Oe,ut)=>{let me=ut.pressure;if(c){let st=wo(1,ut.distance/o),E1=wo(1,1-st);me=wo(1,Oe+(E1-Oe)*(st*F0))}return(Oe+me)/2},e[0].pressure),j=j0(o,l,e[e.length-1].pressure,d),X,F=e[0].vector,q=e[0].point,fe=q,Ee=q,qe=fe;for(let Oe=0;Oe<e.length;Oe++){let{pressure:ut}=e[Oe],{point:me,vector:st,distance:E1,runningLength:k1}=e[Oe];if(Oe<e.length-1&&k-k1<3)continue;if(l){if(c){let nn=wo(1,E1/o),Oo=wo(1,1-nn);ut=wo(1,z+(Oo-z)*(nn*F0))}j=j0(o,l,ut,d)}else j=o/2;X===void 0&&(X=j);let Un=k1<y?L(k1/y):1,gi=k-k1<R?$((k-k1)/R):1;if(j=Math.max(.01,j*Math.min(Un,gi)),Oe===e.length-1){let nn=Vr(ii(st),j);H.push(yr(me,nn)),Z.push(Br(me,nn));continue}let A1=e[Oe+1].vector,gn=U7(st,A1);if(gn<0){let nn=Vr(ii(F),j);for(let Oo=1/13,$s=0;$s<=1;$s+=Oo)Ee=si(yr(me,nn),me,ai*$s),H.push(Ee),qe=si(Br(me,nn),me,ai*-$s),Z.push(qe);q=Ee,fe=qe;continue}let Ho=Vr(ii(Ma(A1,st,gn)),j);Ee=yr(me,Ho),(Oe<=1||A0(q,Ee)>T)&&(H.push(Ee),q=Ee),qe=Br(me,Ho),(Oe<=1||A0(fe,qe)>T)&&(Z.push(qe),fe=qe),z=ut,F=st}let we=e[0].point.slice(0,2),Re=e.length>1?e[e.length-1].point.slice(0,2):Br(e[0].point,[1,1]),Ct=[],kt=[];if(e.length===1){if(!(y||R)||m){let Oe=W0(we,Z0(ii(yr(we,Re))),-(X||j)),ut=[];for(let me=1/13,st=me;st<=1;st+=me)ut.push(si(Oe,we,ai*2*st));return ut}}else{if(!(y||R&&e.length===1))if(_)for(let ut=1/13,me=ut;me<=1;me+=ut){let st=si(Z[0],we,ai*me);Ct.push(st)}else{let ut=yr(H[0],Z[0]),me=Vr(ut,.5),st=Vr(ut,.51);Ct.push(yr(we,me),yr(we,st),Br(we,st),Br(we,me))}let Oe=ii(F7(e[e.length-1].vector));if(R||y&&e.length===1)kt.push(Re);else if(S){let ut=W0(Re,Oe,j);for(let me=1/29,st=me;st<1;st+=me)kt.push(si(ut,Re,ai*3*st))}else kt.push(Br(Re,Vr(Oe,j)),Br(Re,Vr(Oe,j*.99)),yr(Re,Vr(Oe,j*.99)),yr(Re,Vr(Oe,j)))}return H.concat(kt,Z.reverse(),Ct)}function bo(e,n={}){var o;let{streamline:s=.5,size:l=16,last:c=!1}=n;if(e.length===0)return[];let d=.15+(1-s)*.85,C=Array.isArray(e[0])?e:e.map(({x:S,y:R,pressure:$=.5})=>[S,R,$]);if(C.length===2){let S=C[1];C=C.slice(0,-1);for(let R=1;R<5;R++)C.push(Ma(C[0],S,R/4))}C.length===1&&(C=[...C,[...Br(C[0],[1,1]),...C[0].slice(2)]]);let g=[{point:[C[0][0],C[0][1]],pressure:C[0][2]>=0?C[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],m=!1,_=0,y=g[0],L=C.length-1;for(let S=1;S<C.length;S++){let R=c&&S===L?C[S].slice(0,2):Ma(y.point,C[S],d);if(N7(y.point,R))continue;let $=G7(R,y.point);if(_+=$,S<L&&!m){if(_<l)continue;m=!0}y={point:R,pressure:C[S][2]>=0?C[S][2]:.5,vector:Z0(yr(y.point,R)),distance:$,runningLength:_},g.push(y)}return g[0].vector=((o=g[1])==null?void 0:o.vector)||[0,0],g}function q7(e,n={}){return Ia(bo(e,n),n)}var Qi=q7;function J7(e){let n;const o=new Set,s=(m,_)=>{const y=typeof m=="function"?m(n):m;if(y!==n){const L=n;n=_?y:Object.assign({},n,y),o.forEach(S=>S(n,L))}},l=()=>n,c=(m,_=l,y=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let L=_(n);function S(){const R=_(n);if(!y(L,R)){const $=L;m(L=R,$)}}return o.add(S),()=>o.delete(S)},g={setState:s,getState:l,subscribe:(m,_,y)=>_||y?c(m,_,y):(o.add(m),()=>o.delete(m)),destroy:()=>o.clear()};return n=e(s,l,g),g}var Q7=D(3403);/*!
 * hotkeys-js v3.8.7
 * A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies.
 * 
 * Copyright (c) 2021 kenny wong <wowohoo@qq.com>
 * http://jaywcjlove.github.io/hotkeys
 * 
 * Licensed under the MIT license.
 */var Pa=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function $a(e,n,o){e.addEventListener?e.addEventListener(n,o,!1):e.attachEvent&&e.attachEvent("on".concat(n),function(){o(window.event)})}function z0(e,n){for(var o=n.slice(0,n.length-1),s=0;s<o.length;s++)o[s]=e[o[s].toLowerCase()];return o}function U0(e){typeof e!="string"&&(e=""),e=e.replace(/\s/g,"");for(var n=e.split(","),o=n.lastIndexOf("");o>=0;)n[o-1]+=",",n.splice(o,1),o=n.lastIndexOf("");return n}function e4(e,n){for(var o=e.length>=n.length?e:n,s=e.length>=n.length?n:e,l=!0,c=0;c<o.length;c++)s.indexOf(o[c])===-1&&(l=!1);return l}for(var N0={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":Pa?173:189,"=":Pa?61:187,";":Pa?59:186,"'":222,"[":219,"]":221,"\\":220},Dn={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},K0={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},$1={16:!1,18:!1,17:!1,91:!1},y1={},es=1;es<20;es++)N0["f".concat(es)]=111+es;var qt=[],X0="all",G0=[],ts=function(n){return N0[n.toLowerCase()]||Dn[n.toLowerCase()]||n.toUpperCase().charCodeAt(0)};function Y0(e){X0=e||"all"}function li(){return X0||"all"}function t4(){return qt.slice(0)}function r4(e){var n=e.target||e.srcElement,o=n.tagName,s=!0;return(n.isContentEditable||(o==="INPUT"||o==="TEXTAREA"||o==="SELECT")&&!n.readOnly)&&(s=!1),s}function n4(e){return typeof e=="string"&&(e=ts(e)),qt.indexOf(e)!==-1}function o4(e,n){var o,s;e||(e=li());for(var l in y1)if(Object.prototype.hasOwnProperty.call(y1,l))for(o=y1[l],s=0;s<o.length;)o[s].scope===e?o.splice(s,1):s++;li()===e&&Y0(n||"all")}function i4(e){var n=e.keyCode||e.which||e.charCode,o=qt.indexOf(n);if(o>=0&&qt.splice(o,1),e.key&&e.key.toLowerCase()==="meta"&&qt.splice(0,qt.length),(n===93||n===224)&&(n=91),n in $1){$1[n]=!1;for(var s in Dn)Dn[s]===n&&(hn[s]=!1)}}function s4(e){if(!e)Object.keys(y1).forEach(function(d){return delete y1[d]});else if(Array.isArray(e))e.forEach(function(d){d.key&&Ha(d)});else if(typeof e=="object")e.key&&Ha(e);else if(typeof e=="string"){for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];var l=o[0],c=o[1];typeof l=="function"&&(c=l,l=""),Ha({key:e,scope:l,method:c,splitKey:"+"})}}var Ha=function(n){var o=n.key,s=n.scope,l=n.method,c=n.splitKey,d=c===void 0?"+":c,C=U0(o);C.forEach(function(g){var m=g.split(d),_=m.length,y=m[_-1],L=y==="*"?"*":ts(y);if(!!y1[L]){s||(s=li());var S=_>1?z0(Dn,m):[];y1[L]=y1[L].map(function(R){var $=l?R.method===l:!0;return $&&R.scope===s&&e4(R.mods,S)?{}:R})}})};function q0(e,n,o){var s;if(n.scope===o||n.scope==="all"){s=n.mods.length>0;for(var l in $1)Object.prototype.hasOwnProperty.call($1,l)&&(!$1[l]&&n.mods.indexOf(+l)>-1||$1[l]&&n.mods.indexOf(+l)===-1)&&(s=!1);(n.mods.length===0&&!$1[16]&&!$1[18]&&!$1[17]&&!$1[91]||s||n.shortcut==="*")&&n.method(e,n)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function J0(e){var n=y1["*"],o=e.keyCode||e.which||e.charCode;if(!!hn.filter.call(this,e)){if((o===93||o===224)&&(o=91),qt.indexOf(o)===-1&&o!==229&&qt.push(o),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(S){var R=K0[S];e[S]&&qt.indexOf(R)===-1?qt.push(R):!e[S]&&qt.indexOf(R)>-1?qt.splice(qt.indexOf(R),1):S==="metaKey"&&e[S]&&qt.length===3&&(e.ctrlKey||e.shiftKey||e.altKey||(qt=qt.slice(qt.indexOf(R))))}),o in $1){$1[o]=!0;for(var s in Dn)Dn[s]===o&&(hn[s]=!0);if(!n)return}for(var l in $1)Object.prototype.hasOwnProperty.call($1,l)&&($1[l]=e[K0[l]]);e.getModifierState&&!(e.altKey&&!e.ctrlKey)&&e.getModifierState("AltGraph")&&(qt.indexOf(17)===-1&&qt.push(17),qt.indexOf(18)===-1&&qt.push(18),$1[17]=!0,$1[18]=!0);var c=li();if(n)for(var d=0;d<n.length;d++)n[d].scope===c&&(e.type==="keydown"&&n[d].keydown||e.type==="keyup"&&n[d].keyup)&&q0(e,n[d],c);if(o in y1){for(var C=0;C<y1[o].length;C++)if((e.type==="keydown"&&y1[o][C].keydown||e.type==="keyup"&&y1[o][C].keyup)&&y1[o][C].key){for(var g=y1[o][C],m=g.splitKey,_=g.key.split(m),y=[],L=0;L<_.length;L++)y.push(ts(_[L]));y.sort().join("")===qt.sort().join("")&&q0(e,g,c)}}}}function a4(e){return G0.indexOf(e)>-1}function hn(e,n,o){qt=[];var s=U0(e),l=[],c="all",d=document,C=0,g=!1,m=!0,_="+";for(o===void 0&&typeof n=="function"&&(o=n),Object.prototype.toString.call(n)==="[object Object]"&&(n.scope&&(c=n.scope),n.element&&(d=n.element),n.keyup&&(g=n.keyup),n.keydown!==void 0&&(m=n.keydown),typeof n.splitKey=="string"&&(_=n.splitKey)),typeof n=="string"&&(c=n);C<s.length;C++)e=s[C].split(_),l=[],e.length>1&&(l=z0(Dn,e)),e=e[e.length-1],e=e==="*"?"*":ts(e),e in y1||(y1[e]=[]),y1[e].push({keyup:g,keydown:m,scope:c,mods:l,shortcut:s[C],method:o,key:s[C],splitKey:_});typeof d<"u"&&!a4(d)&&window&&(G0.push(d),$a(d,"keydown",function(y){J0(y)}),$a(window,"focus",function(){qt=[]}),$a(d,"keyup",function(y){J0(y),i4(y)}))}var Oa={setScope:Y0,getScope:li,deleteScope:o4,getPressedKeyCodes:t4,isPressed:n4,filter:r4,unbind:s4};for(var ka in Oa)Object.prototype.hasOwnProperty.call(Oa,ka)&&(hn[ka]=Oa[ka]);if(typeof window<"u"){var l4=window.hotkeys;hn.noConflict=function(e){return e&&window.hotkeys===hn&&(window.hotkeys=l4),hn},window.hotkeys=hn}const ci=hn;function ev(){return hotkeys.isPressed}ci.filter=function(){return!0};var Q0=function(n,o){var s=n.target,l=s&&s.tagName;return Boolean(l&&o&&o.includes(l))},c4=function(n){return Q0(n,["INPUT","TEXTAREA","SELECT"])};function Fe(e,n,o,s){o instanceof Array&&(s=o,o=void 0);var l=o||{},c=l.enableOnTags,d=l.filter,C=l.keyup,g=l.keydown,m=l.filterPreventDefault,_=m===void 0?!0:m,y=l.enabled,L=y===void 0?!0:y,S=l.enableOnContentEditable,R=S===void 0?!1:S,$=(0,h.useRef)(null),k=(0,h.useCallback)(function(T,H){var Z;return d&&!d(T)?!_:c4(T)&&!Q0(T,c)||(Z=T.target)!=null&&Z.isContentEditable&&!R?!0:$.current===null||document.activeElement===$.current?(n(T,H),!0):!1},s?[$,c,d].concat(s):[$,c,d]);return(0,h.useEffect)(function(){if(!L){ci.unbind(e,k);return}return C&&g!==!0&&(o.keydown=!1),ci(e,o||{},k),function(){return ci.unbind(e,k)}},[k,e,L]),$}var tv=ci.isPressed,Ht=D(863);function lt(e,n){if(e==null)return{};var o={},s=Object.keys(e),l,c;for(c=0;c<s.length;c++)l=s[c],!(n.indexOf(l)>=0)&&(o[l]=e[l]);return o}var rv=null,nv=null,ov=null,iv=null,sv=null,av=null,d4=["color"],e2=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,d4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M9 3C9 2.44772 8.55229 2 8 2H7C6.44772 2 6 2.44772 6 3L6 14H1.5C1.22386 14 1 14.2239 1 14.5C1 14.7761 1.22386 15 1.5 15L6 15H9H13.5C13.7761 15 14 14.7761 14 14.5C14 14.2239 13.7761 14 13.5 14H9V3Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),u4=["color"],t2=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,u4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M1.99988 6C1.44759 6 0.999877 6.44772 0.999877 7L0.999877 8C0.999877 8.55228 1.44759 9 1.99988 9L6.99988 9L6.99988 13.5C6.99988 13.7761 7.22374 14 7.49988 14C7.77602 14 7.99988 13.7761 7.99988 13.5L7.99988 9L12.9999 9C13.5522 9 13.9999 8.55228 13.9999 8L13.9999 7C13.9999 6.44772 13.5522 6 12.9999 6L7.99988 6L7.99988 1.5C7.99988 1.22386 7.77602 1 7.49988 1C7.22373 1 6.99988 1.22386 6.99988 1.5L6.99988 6L1.99988 6Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),f4=["color"],r2=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,f4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M6.99988 1C6.44759 1 5.99988 1.44772 5.99988 2V7H1.49988C1.22374 7 0.999878 7.22386 0.999878 7.5C0.999878 7.77614 1.22374 8 1.49988 8H5.99988V13C5.99988 13.5523 6.44759 14 6.99988 14H7.99988C8.55216 14 8.99988 13.5523 8.99988 13V8H13.4999C13.776 8 13.9999 7.77614 13.9999 7.5C13.9999 7.22386 13.776 7 13.4999 7H8.99988V2C8.99988 1.44772 8.55216 1 7.99988 1L6.99988 1Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),h4=["color"],n2=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,h4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M0.499995 0.999995C0.223855 0.999995 -5.58458e-07 1.22385 -5.46388e-07 1.49999L-2.18554e-08 13.4999C-9.78492e-09 13.776 0.223855 13.9999 0.499995 13.9999C0.776136 13.9999 0.999991 13.776 0.999991 13.4999L0.999991 8.99993L12 8.99993C12.5523 8.99993 13 8.55222 13 7.99993L13 6.99994C13 6.44766 12.5523 5.99995 12 5.99995L0.999991 5.99995L0.999991 1.49999C0.999991 1.22385 0.776135 0.999995 0.499995 0.999995Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),p4=["color"],o2=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,p4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M14.4999 1C14.2237 1 13.9999 1.22386 13.9999 1.5L13.9999 6L2.99988 6C2.44759 6 1.99988 6.44772 1.99988 7L1.99988 8C1.99988 8.55228 2.44759 9 2.99988 9L13.9999 9L13.9999 13.5C13.9999 13.7761 14.2237 14 14.4999 14C14.776 14 14.9999 13.7761 14.9999 13.5L14.9999 9L14.9999 6L14.9999 1.5C14.9999 1.22386 14.776 1 14.4999 1Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),v4=["color"],i2=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,v4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M1.5 0C1.22386 0 1 0.223858 1 0.5C1 0.776142 1.22386 1 1.5 1H6V12C6 12.5523 6.44772 13 7 13H8C8.55228 13 9 12.5523 9 12V1H13.5C13.7761 1 14 0.776142 14 0.5C14 0.223858 13.7761 0 13.5 0H9H6H1.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),lv=null,cv=null,g4=["color"],C4=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,g4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M8.8914 2.1937C9.1158 2.35464 9.16725 2.66701 9.00631 2.89141L2.47388 12H13.5C13.7761 12 14 12.2239 14 12.5C14 12.7762 13.7761 13 13.5 13H1.5C1.31254 13 1.14082 12.8952 1.0552 12.7284C0.969578 12.5616 0.984438 12.361 1.09369 12.2086L8.19369 2.30862C8.35462 2.08422 8.667 2.03277 8.8914 2.1937ZM11.1 6.50001C11.1 6.22387 11.3238 6.00001 11.6 6.00001C11.8761 6.00001 12.1 6.22387 12.1 6.50001C12.1 6.77615 11.8761 7.00001 11.6 7.00001C11.3238 7.00001 11.1 6.77615 11.1 6.50001ZM10.4 4.00001C10.1239 4.00001 9.90003 4.22387 9.90003 4.50001C9.90003 4.77615 10.1239 5.00001 10.4 5.00001C10.6762 5.00001 10.9 4.77615 10.9 4.50001C10.9 4.22387 10.6762 4.00001 10.4 4.00001ZM12.1 8.50001C12.1 8.22387 12.3238 8.00001 12.6 8.00001C12.8761 8.00001 13.1 8.22387 13.1 8.50001C13.1 8.77615 12.8761 9.00001 12.6 9.00001C12.3238 9.00001 12.1 8.77615 12.1 8.50001ZM13.4 10C13.1239 10 12.9 10.2239 12.9 10.5C12.9 10.7761 13.1239 11 13.4 11C13.6762 11 13.9 10.7761 13.9 10.5C13.9 10.2239 13.6762 10 13.4 10Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),dv=null,uv=null,fv=null,hv=null,pv=null,vv=null,m4=["color"],_4=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,m4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M7.5 2C7.77614 2 8 2.22386 8 2.5L8 11.2929L11.1464 8.14645C11.3417 7.95118 11.6583 7.95118 11.8536 8.14645C12.0488 8.34171 12.0488 8.65829 11.8536 8.85355L7.85355 12.8536C7.75979 12.9473 7.63261 13 7.5 13C7.36739 13 7.24021 12.9473 7.14645 12.8536L3.14645 8.85355C2.95118 8.65829 2.95118 8.34171 3.14645 8.14645C3.34171 7.95118 3.65829 7.95118 3.85355 8.14645L7 11.2929L7 2.5C7 2.22386 7.22386 2 7.5 2Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),gv=null,Cv=null,mv=null,_v=null,wv=null,bv=null,w4=["color"],b4=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,w4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M3.64645 11.3536C3.45118 11.1583 3.45118 10.8417 3.64645 10.6465L10.2929 4L6 4C5.72386 4 5.5 3.77614 5.5 3.5C5.5 3.22386 5.72386 3 6 3L11.5 3C11.6326 3 11.7598 3.05268 11.8536 3.14645C11.9473 3.24022 12 3.36739 12 3.5L12 9.00001C12 9.27615 11.7761 9.50001 11.5 9.50001C11.2239 9.50001 11 9.27615 11 9.00001V4.70711L4.35355 11.3536C4.15829 11.5488 3.84171 11.5488 3.64645 11.3536Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),x4=["color"],y4=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,x4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M7.14645 2.14645C7.34171 1.95118 7.65829 1.95118 7.85355 2.14645L11.8536 6.14645C12.0488 6.34171 12.0488 6.65829 11.8536 6.85355C11.6583 7.04882 11.3417 7.04882 11.1464 6.85355L8 3.70711L8 12.5C8 12.7761 7.77614 13 7.5 13C7.22386 13 7 12.7761 7 12.5L7 3.70711L3.85355 6.85355C3.65829 7.04882 3.34171 7.04882 3.14645 6.85355C2.95118 6.65829 2.95118 6.34171 3.14645 6.14645L7.14645 2.14645Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),E4=["color"],L4=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,E4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M2.5 2H12.5C12.7761 2 13 2.22386 13 2.5V12.5C13 12.7761 12.7761 13 12.5 13H2.5C2.22386 13 2 12.7761 2 12.5V2.5C2 2.22386 2.22386 2 2.5 2ZM1 2.5C1 1.67157 1.67157 1 2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5ZM7.5 4C7.77614 4 8 3.77614 8 3.5C8 3.22386 7.77614 3 7.5 3C7.22386 3 7 3.22386 7 3.5C7 3.77614 7.22386 4 7.5 4ZM8 5.5C8 5.77614 7.77614 6 7.5 6C7.22386 6 7 5.77614 7 5.5C7 5.22386 7.22386 5 7.5 5C7.77614 5 8 5.22386 8 5.5ZM7.5 8C7.77614 8 8 7.77614 8 7.5C8 7.22386 7.77614 7 7.5 7C7.22386 7 7 7.22386 7 7.5C7 7.77614 7.22386 8 7.5 8ZM10 7.5C10 7.77614 9.77614 8 9.5 8C9.22386 8 9 7.77614 9 7.5C9 7.22386 9.22386 7 9.5 7C9.77614 7 10 7.22386 10 7.5ZM11.5 8C11.7761 8 12 7.77614 12 7.5C12 7.22386 11.7761 7 11.5 7C11.2239 7 11 7.22386 11 7.5C11 7.77614 11.2239 8 11.5 8Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),xv=null,yv=null,Ev=null,Lv=null,Sv=null,Rv=null,Mv=null,Iv=null,Pv=null,$v=null,Hv=null,Ov=null,kv=null,Tv=null,Bv=null,Vv=null,Dv=null,jv=null,Av=null,Zv=null,Wv=null,Fv=null,zv=null,Uv=null,Nv=null,Kv=null,Xv=null,Gv=null,Yv=null,qv=null,Jv=null,Qv=null,eg=null,tg=null,rg=null,ng=null,og=null,ig=null,sg=null,ag=null,S4=["color"],R4=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,S4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M12.5 2H2.5C2.22386 2 2 2.22386 2 2.5V12.5C2 12.7761 2.22386 13 2.5 13H12.5C12.7761 13 13 12.7761 13 12.5V2.5C13 2.22386 12.7761 2 12.5 2ZM2.5 1C1.67157 1 1 1.67157 1 2.5V12.5C1 13.3284 1.67157 14 2.5 14H12.5C13.3284 14 14 13.3284 14 12.5V2.5C14 1.67157 13.3284 1 12.5 1H2.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),lg=null,cg=null,dg=null,ug=null,fg=null,hg=null,pg=null,vg=null,gg=null,Cg=null,mg=null,_g=null,wg=null,bg=null,xg=null,yg=null,Eg=null,Lg=null,Sg=null,Rg=null,Mg=null,Ig=null,Pg=null,$g=null,Hg=null,Og=null,M4=["color"],Ta=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,M4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),kg=null,Tg=null,Bg=null,Vg=null,Dg=null,jg=null,Ag=null,Zg=null,I4=["color"],P4=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,I4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Wg=null,Fg=null,$4=["color"],H4=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,$4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M0.877075 7.49991C0.877075 3.84222 3.84222 0.877075 7.49991 0.877075C11.1576 0.877075 14.1227 3.84222 14.1227 7.49991C14.1227 11.1576 11.1576 14.1227 7.49991 14.1227C3.84222 14.1227 0.877075 11.1576 0.877075 7.49991ZM7.49991 1.82708C4.36689 1.82708 1.82708 4.36689 1.82708 7.49991C1.82708 10.6329 4.36689 13.1727 7.49991 13.1727C10.6329 13.1727 13.1727 10.6329 13.1727 7.49991C13.1727 4.36689 10.6329 1.82708 7.49991 1.82708Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),zg=null,Ug=null,O4=["color"],k4=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,O4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H11.5C12.3284 14 13 13.3284 13 12.5V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM11 2V2.25C11 2.66421 10.6642 3 10.25 3H4.75C4.33579 3 4 2.66421 4 2.25V2H3.5C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V2.5C12 2.22386 11.7761 2 11.5 2H11Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Ng=null,Kg=null,Xg=null,Gg=null,Yg=null,qg=null,Jg=null,Qg=null,eC=null,tC=null,rC=null,nC=null,oC=null,iC=null,sC=null,aC=null,lC=null,cC=null,dC=null,uC=null,fC=null,hC=null,pC=null,vC=null,gC=null,CC=null,mC=null,_C=null,wC=null,bC=null,xC=null,yC=null,T4=["color"],B4=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,T4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M1 9.50006C1 10.3285 1.67157 11.0001 2.5 11.0001H4L4 10.0001H2.5C2.22386 10.0001 2 9.7762 2 9.50006L2 2.50006C2 2.22392 2.22386 2.00006 2.5 2.00006L9.5 2.00006C9.77614 2.00006 10 2.22392 10 2.50006V4.00002H5.5C4.67158 4.00002 4 4.67159 4 5.50002V12.5C4 13.3284 4.67158 14 5.5 14H12.5C13.3284 14 14 13.3284 14 12.5V5.50002C14 4.67159 13.3284 4.00002 12.5 4.00002H11V2.50006C11 1.67163 10.3284 1.00006 9.5 1.00006H2.5C1.67157 1.00006 1 1.67163 1 2.50006V9.50006ZM5 5.50002C5 5.22388 5.22386 5.00002 5.5 5.00002H12.5C12.7761 5.00002 13 5.22388 13 5.50002V12.5C13 12.7762 12.7761 13 12.5 13H5.5C5.22386 13 5 12.7762 5 12.5V5.50002Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),EC=null,LC=null,SC=null,RC=null,MC=null,IC=null,PC=null,$C=null,HC=null,OC=null,kC=null,TC=null,BC=null,VC=null,DC=null,jC=null,AC=null,ZC=null,WC=null,FC=null,zC=null,UC=null,NC=null,KC=null,XC=null,GC=null,YC=null,qC=null,JC=null,QC=null,V4=["color"],s2=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,V4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M3.29227 0.048984C3.47033 -0.032338 3.67946 -0.00228214 3.8274 0.125891L12.8587 7.95026C13.0134 8.08432 13.0708 8.29916 13.0035 8.49251C12.9362 8.68586 12.7578 8.81866 12.5533 8.82768L9.21887 8.97474L11.1504 13.2187C11.2648 13.47 11.1538 13.7664 10.9026 13.8808L8.75024 14.8613C8.499 14.9758 8.20255 14.8649 8.08802 14.6137L6.15339 10.3703L3.86279 12.7855C3.72196 12.934 3.50487 12.9817 3.31479 12.9059C3.1247 12.8301 3 12.6461 3 12.4414V0.503792C3 0.308048 3.11422 0.130306 3.29227 0.048984ZM4 1.59852V11.1877L5.93799 9.14425C6.05238 9.02363 6.21924 8.96776 6.38319 8.99516C6.54715 9.02256 6.68677 9.12965 6.75573 9.2809L8.79056 13.7441L10.0332 13.178L8.00195 8.71497C7.93313 8.56376 7.94391 8.38824 8.03072 8.24659C8.11753 8.10494 8.26903 8.01566 8.435 8.00834L11.2549 7.88397L4 1.59852Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),em=null,tm=null,rm=null,nm=null,om=null,im=null,sm=null,am=null,lm=null,cm=null,dm=null,um=null,fm=null,hm=null,pm=null,vm=null,gm=null,Cm=null,mm=null,_m=null,D4=["color"],j4=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,D4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:s}))}),A4=["color"],Z4=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,A4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),wm=null,bm=null,xm=null,ym=null,Em=null,Lm=null,Sm=null,Rm=null,Mm=null,Im=null,Pm=null,$m=null,Hm=null,Om=null,km=null,Tm=null,Bm=null,Vm=null,Dm=null,jm=null,Am=null,Zm=null,Wm=null,Fm=null,zm=null,Um=null,Nm=null,Km=null,Xm=null,Gm=null,Ym=null,qm=null,Jm=null,Qm=null,e_=null,t_=null,r_=null,n_=null,W4=["color"],F4=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,W4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M3 1C2.44771 1 2 1.44772 2 2V13C2 13.5523 2.44772 14 3 14H10.5C10.7761 14 11 13.7761 11 13.5C11 13.2239 10.7761 13 10.5 13H3V2L10.5 2C10.7761 2 11 1.77614 11 1.5C11 1.22386 10.7761 1 10.5 1H3ZM12.6036 4.89645C12.4083 4.70118 12.0917 4.70118 11.8964 4.89645C11.7012 5.09171 11.7012 5.40829 11.8964 5.60355L13.2929 7H6.5C6.22386 7 6 7.22386 6 7.5C6 7.77614 6.22386 8 6.5 8H13.2929L11.8964 9.39645C11.7012 9.59171 11.7012 9.90829 11.8964 10.1036C12.0917 10.2988 12.4083 10.2988 12.6036 10.1036L14.8536 7.85355C15.0488 7.65829 15.0488 7.34171 14.8536 7.14645L12.6036 4.89645Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),o_=null,i_=null,s_=null,a_=null,l_=null,c_=null,d_=null,u_=null,f_=null,h_=null,p_=null,v_=null,g_=null,C_=null,m_=null,__=null,w_=null,b_=null,x_=null,y_=null,E_=null,L_=null,S_=null,R_=null,M_=null,I_=null,P_=null,$_=null,H_=null,O_=null,k_=null,T_=null,B_=null,V_=null,D_=null,j_=null,A_=null,Z_=null,W_=null,F_=null,z4=["color"],U4=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,z4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M7.49933 0.25C3.49635 0.25 0.25 3.49593 0.25 7.50024C0.25 10.703 2.32715 13.4206 5.2081 14.3797C5.57084 14.446 5.70302 14.2222 5.70302 14.0299C5.70302 13.8576 5.69679 13.4019 5.69323 12.797C3.67661 13.235 3.25112 11.825 3.25112 11.825C2.92132 10.9874 2.44599 10.7644 2.44599 10.7644C1.78773 10.3149 2.49584 10.3238 2.49584 10.3238C3.22353 10.375 3.60629 11.0711 3.60629 11.0711C4.25298 12.1788 5.30335 11.8588 5.71638 11.6732C5.78225 11.205 5.96962 10.8854 6.17658 10.7043C4.56675 10.5209 2.87415 9.89918 2.87415 7.12104C2.87415 6.32925 3.15677 5.68257 3.62053 5.17563C3.54576 4.99226 3.29697 4.25521 3.69174 3.25691C3.69174 3.25691 4.30015 3.06196 5.68522 3.99973C6.26337 3.83906 6.8838 3.75895 7.50022 3.75583C8.1162 3.75895 8.73619 3.83906 9.31523 3.99973C10.6994 3.06196 11.3069 3.25691 11.3069 3.25691C11.7026 4.25521 11.4538 4.99226 11.3795 5.17563C11.8441 5.68257 12.1245 6.32925 12.1245 7.12104C12.1245 9.9063 10.4292 10.5192 8.81452 10.6985C9.07444 10.9224 9.30633 11.3648 9.30633 12.0413C9.30633 13.0102 9.29742 13.7922 9.29742 14.0299C9.29742 14.2239 9.42828 14.4496 9.79591 14.3788C12.6746 13.4179 14.75 10.7025 14.75 7.50024C14.75 3.49593 11.5036 0.25 7.49933 0.25Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),z_=null,U_=null,N_=null,K_=null,N4=["color"],K4=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,N4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M1.44995 0.949951C1.31734 0.949951 1.19016 1.00263 1.0964 1.0964C1.00263 1.19017 0.949951 1.31735 0.949951 1.44995L0.949966 3.44995C0.949969 3.7261 1.17383 3.94995 1.44997 3.94995C1.72611 3.94995 1.94997 3.72609 1.94997 3.44995L1.94995 1.94995H3.44997C3.72611 1.94995 3.94997 1.72609 3.94997 1.44995C3.94997 1.17381 3.72611 0.949951 3.44997 0.949951H1.44995ZM5.94995 0.949951C5.67381 0.949951 5.44995 1.17381 5.44995 1.44995C5.44995 1.72609 5.67381 1.94995 5.94995 1.94995H8.94995C9.22609 1.94995 9.44995 1.72609 9.44995 1.44995C9.44995 1.17381 9.22609 0.949951 8.94995 0.949951H5.94995ZM5.44995 13.45C5.44995 13.1738 5.67381 12.95 5.94995 12.95H8.94995C9.22609 12.95 9.44995 13.1738 9.44995 13.45C9.44995 13.7261 9.22609 13.95 8.94995 13.95H5.94995C5.67381 13.95 5.44995 13.7261 5.44995 13.45ZM1.94995 5.94995C1.94995 5.67381 1.72609 5.44995 1.44995 5.44995C1.17381 5.44995 0.949951 5.67381 0.949951 5.94995V8.94995C0.949951 9.22609 1.17381 9.44995 1.44995 9.44995C1.72609 9.44995 1.94995 9.22609 1.94995 8.94995V5.94995ZM13.45 5.44995C13.7261 5.44995 13.95 5.67381 13.95 5.94995V8.94995C13.95 9.22609 13.7261 9.44995 13.45 9.44995C13.1738 9.44995 12.95 9.22609 12.95 8.94995V5.94995C12.95 5.67381 13.1738 5.44995 13.45 5.44995ZM11.45 0.949951C11.1738 0.949951 10.95 1.17381 10.95 1.44995C10.95 1.72609 11.1738 1.94995 11.45 1.94995H12.9499V3.44995C12.9499 3.72609 13.1738 3.94995 13.4499 3.94995C13.7261 3.94995 13.9499 3.72609 13.9499 3.44995V1.44995C13.9499 1.17381 13.7252 0.949951 13.449 0.949951H11.45ZM1.44995 10.95C1.72609 10.95 1.94995 11.1738 1.94995 11.45V12.95H3.44997C3.72611 12.95 3.94997 13.1738 3.94997 13.45C3.94997 13.7261 3.72611 13.95 3.44997 13.95H1.44995C1.17381 13.95 0.949951 13.7261 0.949951 13.45V11.45C0.949951 11.1738 1.17381 10.95 1.44995 10.95ZM13.95 11.45C13.95 11.1738 13.7261 10.95 13.45 10.95C13.1738 10.9499 12.95 11.1738 12.95 11.4499L12.9491 12.95H11.45C11.1738 12.95 10.95 13.1738 10.95 13.45C10.95 13.7261 11.1738 13.95 11.45 13.95H13.4499C13.7261 13.95 13.9499 13.7261 13.9499 13.45L13.95 11.45Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),X_=null,G_=null,Y_=null,q_=null,X4=["color"],G4=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,X4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M1.5 3C1.22386 3 1 3.22386 1 3.5C1 3.77614 1.22386 4 1.5 4H13.5C13.7761 4 14 3.77614 14 3.5C14 3.22386 13.7761 3 13.5 3H1.5ZM1 7.5C1 7.22386 1.22386 7 1.5 7H13.5C13.7761 7 14 7.22386 14 7.5C14 7.77614 13.7761 8 13.5 8H1.5C1.22386 8 1 7.77614 1 7.5ZM1 11.5C1 11.2239 1.22386 11 1.5 11H13.5C13.7761 11 14 11.2239 14 11.5C14 11.7761 13.7761 12 13.5 12H1.5C1.22386 12 1 11.7761 1 11.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),J_=null,Q_=null,ew=null,tw=null,rw=null,nw=null,ow=null,iw=null,sw=null,aw=null,lw=null,cw=null,dw=null,uw=null,fw=null,hw=null,pw=null,vw=null,gw=null,Cw=null,mw=null,_w=null,ww=null,bw=null,xw=null,yw=null,Ew=null,Lw=null,Sw=null,Rw=null,Mw=null,Iw=null,Pw=null,$w=null,Hw=null,Ow=null,kw=null,Tw=null,Bw=null,Vw=null,Dw=null,jw=null,Aw=null,Zw=null,Ww=null,Fw=null,zw=null,Uw=null,Nw=null,Kw=null,Xw=null,Gw=null,Yw=null,qw=null,Jw=null,Qw=null,eb=null,tb=null,rb=null,nb=null,ob=null,ib=null,sb=null,ab=null,lb=null,cb=null,Y4=["color"],q4=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,Y4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),J4=["color"],Q4=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,J4);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M7.4986 0C6.3257 0 5.36107 0.38943 4.73753 1.19361C4.23745 1.83856 4 2.68242 4 3.63325H5C5 2.84313 5.19691 2.23312 5.5278 1.80636C5.91615 1.30552 6.55152 1 7.4986 1C8.35683 1 8.96336 1.26502 9.35846 1.68623C9.75793 2.11211 10 2.76044 10 3.63601V6H3C2.44772 6 2 6.44772 2 7V13C2 13.5523 2.44772 14 3 14H12C12.5523 14 13 13.5523 13 13V7C13 6.44771 12.5523 6 12 6H11V3.63601C11 2.58135 10.7065 1.66167 10.0878 1.0021C9.46477 0.337871 8.57061 0 7.4986 0ZM3 7H12V13H3V7Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),db=null,ub=null,fb=null,hb=null,pb=null,vb=null,gb=null,Cb=null,mb=null,_b=null,wb=null,bb=null,xb=null,yb=null,Eb=null,Lb=null,Sb=null,Rb=null,Mb=null,Ib=null,Pb=null,$b=null,ed=["color"],td=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,ed);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M5 1.5C5 1.22386 4.77614 1 4.5 1C4.22386 1 4 1.22386 4 1.5L4 7C4 7.01671 4.00082 7.03323 4.00242 7.04952C2.86009 7.28022 2 8.28967 2 9.5C2 10.7103 2.86009 11.7198 4.00242 11.9505C4.00082 11.9668 4 11.9833 4 12V13.5C4 13.7761 4.22386 14 4.5 14C4.77614 14 5 13.7761 5 13.5V12C5 11.9833 4.99918 11.9668 4.99758 11.9505C6.1399 11.7198 7 10.7103 7 9.5C7 8.28967 6.1399 7.28022 4.99758 7.04952C4.99918 7.03323 5 7.01671 5 7L5 1.5ZM11 1.5C11 1.22386 10.7761 1 10.5 1C10.2239 1 10 1.22386 10 1.5V3C10 3.01671 10.0008 3.03323 10.0024 3.04952C8.8601 3.28022 8 4.28967 8 5.5C8 6.71033 8.8601 7.71978 10.0024 7.95048C10.0008 7.96677 10 7.98329 10 8V13.5C10 13.7761 10.2239 14 10.5 14C10.7761 14 11 13.7761 11 13.5V8C11 7.98329 10.9992 7.96677 10.9976 7.95048C12.1399 7.71978 13 6.71033 13 5.5C13 4.28967 12.1399 3.28022 10.9976 3.04952C10.9992 3.03323 11 3.01671 11 3V1.5ZM4.5 8C3.67157 8 3 8.67157 3 9.5C3 10.3284 3.67157 11 4.5 11C5.32843 11 6 10.3284 6 9.5C6 8.67157 5.32843 8 4.5 8ZM9 5.5C9 4.67157 9.67157 4 10.5 4C11.3284 4 12 4.67157 12 5.5C12 6.32843 11.3284 7 10.5 7C9.67157 7 9 6.32843 9 5.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Hb=null,Ob=null,kb=null,Tb=null,Bb=null,Vb=null,Db=null,jb=null,Ab=null,Zb=null,Wb=null,Fb=null,zb=null,Ub=null,Nb=null,Kb=null,Xb=null,Gb=null,Yb=null,qb=null,Jb=null,Qb=null,rd=["color"],nd=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,rd);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M11.8536 1.14645C11.6583 0.951184 11.3417 0.951184 11.1465 1.14645L3.71455 8.57836C3.62459 8.66832 3.55263 8.77461 3.50251 8.89155L2.04044 12.303C1.9599 12.491 2.00189 12.709 2.14646 12.8536C2.29103 12.9981 2.50905 13.0401 2.69697 12.9596L6.10847 11.4975C6.2254 11.4474 6.3317 11.3754 6.42166 11.2855L13.8536 3.85355C14.0488 3.65829 14.0488 3.34171 13.8536 3.14645L11.8536 1.14645ZM4.42166 9.28547L11.5 2.20711L12.7929 3.5L5.71455 10.5784L4.21924 11.2192L3.78081 10.7808L4.42166 9.28547Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),od=["color"],id=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,od);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M12.1464 1.14645C12.3417 0.951184 12.6583 0.951184 12.8535 1.14645L14.8535 3.14645C15.0488 3.34171 15.0488 3.65829 14.8535 3.85355L10.9109 7.79618C10.8349 7.87218 10.7471 7.93543 10.651 7.9835L6.72359 9.94721C6.53109 10.0435 6.29861 10.0057 6.14643 9.85355C5.99425 9.70137 5.95652 9.46889 6.05277 9.27639L8.01648 5.34897C8.06455 5.25283 8.1278 5.16507 8.2038 5.08907L12.1464 1.14645ZM12.5 2.20711L8.91091 5.79618L7.87266 7.87267L8.12731 8.12732L10.2038 7.08907L13.7929 3.5L12.5 2.20711ZM9.99998 2L8.99998 3H4.9C4.47171 3 4.18056 3.00039 3.95552 3.01877C3.73631 3.03668 3.62421 3.06915 3.54601 3.10899C3.35785 3.20487 3.20487 3.35785 3.10899 3.54601C3.06915 3.62421 3.03669 3.73631 3.01878 3.95552C3.00039 4.18056 3 4.47171 3 4.9V11.1C3 11.5283 3.00039 11.8194 3.01878 12.0445C3.03669 12.2637 3.06915 12.3758 3.10899 12.454C3.20487 12.6422 3.35785 12.7951 3.54601 12.891C3.62421 12.9309 3.73631 12.9633 3.95552 12.9812C4.18056 12.9996 4.47171 13 4.9 13H11.1C11.5283 13 11.8194 12.9996 12.0445 12.9812C12.2637 12.9633 12.3758 12.9309 12.454 12.891C12.6422 12.7951 12.7951 12.6422 12.891 12.454C12.9309 12.3758 12.9633 12.2637 12.9812 12.0445C12.9996 11.8194 13 11.5283 13 11.1V6.99998L14 5.99998V11.1V11.1207C14 11.5231 14 11.8553 13.9779 12.1259C13.9549 12.407 13.9057 12.6653 13.782 12.908C13.5903 13.2843 13.2843 13.5903 12.908 13.782C12.6653 13.9057 12.407 13.9549 12.1259 13.9779C11.8553 14 11.5231 14 11.1207 14H11.1H4.9H4.87934C4.47686 14 4.14468 14 3.87409 13.9779C3.59304 13.9549 3.33469 13.9057 3.09202 13.782C2.7157 13.5903 2.40973 13.2843 2.21799 12.908C2.09434 12.6653 2.04506 12.407 2.0221 12.1259C1.99999 11.8553 1.99999 11.5231 2 11.1207V11.1206V11.1V4.9V4.87935V4.87932V4.87931C1.99999 4.47685 1.99999 4.14468 2.0221 3.87409C2.04506 3.59304 2.09434 3.33469 2.21799 3.09202C2.40973 2.71569 2.7157 2.40973 3.09202 2.21799C3.33469 2.09434 3.59304 2.04506 3.87409 2.0221C4.14468 1.99999 4.47685 1.99999 4.87932 2H4.87935H4.9H9.99998Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),ex=null,tx=null,rx=null,nx=null,ox=null,ix=null,sd=["color"],ad=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,sd);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M13.5 13.95C13.7485 13.95 13.95 13.7485 13.95 13.5C13.95 13.2514 13.7485 13.05 13.5 13.05L1.49995 13.05C1.25142 13.05 1.04995 13.2514 1.04995 13.5C1.04995 13.7485 1.25142 13.95 1.49995 13.95L13.5 13.95ZM11.0681 7.5683C11.2439 7.39257 11.2439 7.10764 11.0681 6.93191C10.8924 6.75617 10.6075 6.75617 10.4317 6.93191L7.94993 9.41371L7.94993 1.49998C7.94993 1.25146 7.74846 1.04998 7.49993 1.04998C7.2514 1.04998 7.04993 1.25146 7.04993 1.49998L7.04993 9.41371L4.56813 6.93191C4.39239 6.75617 4.10746 6.75617 3.93173 6.93191C3.75599 7.10764 3.75599 7.39257 3.93173 7.5683L7.18173 10.8183C7.35746 10.994 7.64239 10.994 7.81812 10.8183L11.0681 7.5683Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),sx=null,ax=null,lx=null,cx=null,ld=["color"],cd=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,ld);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M1.50005 1.05005C1.25152 1.05005 1.05005 1.25152 1.05005 1.50005C1.05005 1.74858 1.25152 1.95005 1.50005 1.95005L13.5 1.95005C13.7486 1.95005 13.95 1.74858 13.95 1.50005C13.95 1.25152 13.7486 1.05005 13.5 1.05005H1.50005ZM3.93188 7.43169C3.75614 7.60743 3.75614 7.89236 3.93188 8.06809C4.10761 8.24383 4.39254 8.24383 4.56827 8.06809L7.05007 5.58629V13.5C7.05007 13.7485 7.25155 13.95 7.50007 13.95C7.7486 13.95 7.95007 13.7485 7.95007 13.5L7.95007 5.58629L10.4319 8.06809C10.6076 8.24383 10.8925 8.24383 11.0683 8.06809C11.244 7.89235 11.244 7.60743 11.0683 7.43169L7.81827 4.18169C7.64254 4.00596 7.35761 4.00596 7.18188 4.18169L3.93188 7.43169Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),dx=null,ux=null,dd=["color"],ud=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,dd);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M8 2.75C8 2.47386 7.77614 2.25 7.5 2.25C7.22386 2.25 7 2.47386 7 2.75V7H2.75C2.47386 7 2.25 7.22386 2.25 7.5C2.25 7.77614 2.47386 8 2.75 8H7V12.25C7 12.5261 7.22386 12.75 7.5 12.75C7.77614 12.75 8 12.5261 8 12.25V8H12.25C12.5261 8 12.75 7.77614 12.75 7.5C12.75 7.22386 12.5261 7 12.25 7H8V2.75Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),fx=null,hx=null,px=null,vx=null,gx=null,Cx=null,mx=null,_x=null,wx=null,bx=null,xx=null,yx=null,Ex=null,Lx=null,Sx=null,Rx=null,Mx=null,Ix=null,Px=null,$x=null,fd=["color"],hd=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,fd);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M7.59664 2.93628C7.76085 3.06401 8.00012 2.94698 8.00012 2.73895V1.99998C9.98143 2 11.1848 2.3637 11.9105 3.08945C12.6363 3.81522 13 5.0186 13 6.99998C13 7.27613 13.2239 7.49998 13.5 7.49998C13.7761 7.49998 14 7.27613 14 6.99998C14 4.9438 13.6325 3.39719 12.6176 2.38234C11.6028 1.36752 10.0562 0.999999 8.00012 0.999984V0.261266C8.00012 0.0532293 7.76085 -0.0637944 7.59664 0.063928L6.00384 1.30277C5.87516 1.40286 5.87516 1.59735 6.00384 1.69744L7.59664 2.93628ZM9.5 5H2.5C2.22386 5 2 5.22386 2 5.5V12.5C2 12.7761 2.22386 13 2.5 13H9.5C9.77614 13 10 12.7761 10 12.5V5.5C10 5.22386 9.77614 5 9.5 5ZM2.5 4C1.67157 4 1 4.67157 1 5.5V12.5C1 13.3284 1.67157 14 2.5 14H9.5C10.3284 14 11 13.3284 11 12.5V5.5C11 4.67157 10.3284 4 9.5 4H2.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Hx=null,Ox=null,kx=null,Tx=null,Bx=null,Vx=null,Dx=null,jx=null,Ax=null,Zx=null,Wx=null,Fx=null,zx=null,Ux=null,Nx=null,Kx=null,Xx=null,Gx=null,Yx=null,qx=null,Jx=null,Qx=null,ey=null,ty=null,ry=null,ny=null,oy=null,iy=null,sy=null,ay=null,ly=null,cy=null,dy=null,uy=null,fy=null,hy=null,py=null,vy=null,gy=null,Cy=null,my=null,_y=null,pd=["color"],a2=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,pd);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M14.4999 0.999992C14.2237 0.999992 13.9999 1.22385 13.9999 1.49999L13.9999 13.4999C13.9999 13.776 14.2237 13.9999 14.4999 13.9999C14.776 13.9999 14.9999 13.776 14.9999 13.4999L14.9999 1.49999C14.9999 1.22385 14.776 0.999992 14.4999 0.999992ZM0.499996 0.999992C0.223856 0.999992 -9.78509e-09 1.22385 -2.18556e-08 1.49999L4.07279e-07 13.4999C3.95208e-07 13.776 0.223855 13.9999 0.499996 13.9999C0.776136 13.9999 0.999992 13.776 0.999992 13.4999L0.999992 1.49999C0.999992 1.22385 0.776136 0.999992 0.499996 0.999992ZM1.99998 6.99994C1.99998 6.44766 2.44769 5.99995 2.99998 5.99995L5.99995 5.99995C6.55223 5.99995 6.99994 6.44766 6.99994 6.99994L6.99994 7.99993C6.99994 8.55221 6.55223 8.99992 5.99995 8.99992L2.99998 8.99992C2.4477 8.99992 1.99998 8.55221 1.99998 7.99993L1.99998 6.99994ZM8.99993 5.99995C8.44765 5.99995 7.99993 6.44766 7.99993 6.99994L7.99993 7.99993C7.99993 8.55221 8.44765 8.99992 8.99993 8.99992L11.9999 8.99992C12.5522 8.99992 12.9999 8.55221 12.9999 7.99993L12.9999 6.99994C12.9999 6.44766 12.5522 5.99995 11.9999 5.99995L8.99993 5.99995Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),vd=["color"],l2=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,vd);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M0.999878 0.5C0.999878 0.223858 1.22374 0 1.49988 0H13.4999C13.776 0 13.9999 0.223858 13.9999 0.5C13.9999 0.776142 13.776 1 13.4999 1H1.49988C1.22374 1 0.999878 0.776142 0.999878 0.5ZM7 2C6.44772 2 6 2.44772 6 3V6C6 6.55228 6.44772 7 7 7H8C8.55228 7 9 6.55228 9 6V3C9 2.44772 8.55228 2 8 2H7ZM7 8C6.44772 8 6 8.44771 6 9V12C6 12.5523 6.44772 13 7 13H8C8.55228 13 9 12.5523 9 12V9C9 8.44772 8.55228 8 8 8H7ZM1.49988 14C1.22374 14 0.999878 14.2239 0.999878 14.5C0.999878 14.7761 1.22374 15 1.49988 15H13.4999C13.776 15 13.9999 14.7761 13.9999 14.5C13.9999 14.2239 13.776 14 13.4999 14H1.49988Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),wy=null,by=null,xy=null,yy=null,Ey=null,Ly=null,Sy=null,Ry=null,gd=["color"],Cd=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,gd);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M1 1H1.5H13.5H14V1.5V13.5V14H13.5H1.5H1V13.5V1.5V1ZM2 2V13H13V2H2Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),My=null,Iy=null,Py=null,$y=null,Hy=null,Oy=null,ky=null,Ty=null,By=null,Vy=null,Dy=null,jy=null,md=["color"],c2=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,md);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M14.4999 0.999992C14.2237 0.999992 13.9999 1.22385 13.9999 1.49999L13.9999 5.99995L0.999992 5.99995L0.999992 1.49999C0.999992 1.22385 0.776136 0.999992 0.499996 0.999992C0.223856 0.999992 -9.78509e-09 1.22385 -2.18556e-08 1.49999L4.07279e-07 13.4999C3.95208e-07 13.776 0.223855 13.9999 0.499996 13.9999C0.776136 13.9999 0.999992 13.776 0.999992 13.4999L0.999992 8.99992L13.9999 8.99992L13.9999 13.4999C13.9999 13.776 14.2237 13.9999 14.4999 13.9999C14.776 13.9999 14.9999 13.776 14.9999 13.4999L14.9999 1.49999C14.9999 1.22385 14.776 0.999992 14.4999 0.999992Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),_d=["color"],d2=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,_d);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M0.999878 0.5C0.999878 0.223858 1.22374 0 1.49988 0H13.4999C13.776 0 13.9999 0.223858 13.9999 0.5C13.9999 0.776142 13.776 1 13.4999 1H6H1.49988C1.22374 1 0.999878 0.776142 0.999878 0.5ZM9 14V1L6 1V14H1.49988C1.22374 14 0.999878 14.2239 0.999878 14.5C0.999878 14.7761 1.22374 15 1.49988 15H13.4999C13.776 15 13.9999 14.7761 13.9999 14.5C13.9999 14.2239 13.776 14 13.4999 14H9Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Ay=null,Zy=null,Wy=null,Fy=null,zy=null,Uy=null,Ny=null,Ky=null,Xy=null,Gy=null,Yy=null,qy=null,wd=["color"],bd=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,wd);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M3.94993 2.95002L3.94993 4.49998C3.94993 4.74851 3.74845 4.94998 3.49993 4.94998C3.2514 4.94998 3.04993 4.74851 3.04993 4.49998V2.50004C3.04993 2.45246 3.05731 2.40661 3.07099 2.36357C3.12878 2.18175 3.29897 2.05002 3.49993 2.05002H11.4999C11.6553 2.05002 11.7922 2.12872 11.8731 2.24842C11.9216 2.32024 11.9499 2.40682 11.9499 2.50002L11.9499 2.50004V4.49998C11.9499 4.74851 11.7485 4.94998 11.4999 4.94998C11.2514 4.94998 11.0499 4.74851 11.0499 4.49998V2.95002H8.04993V12.05H9.25428C9.50281 12.05 9.70428 12.2515 9.70428 12.5C9.70428 12.7486 9.50281 12.95 9.25428 12.95H5.75428C5.50575 12.95 5.30428 12.7486 5.30428 12.5C5.30428 12.2515 5.50575 12.05 5.75428 12.05H6.94993V2.95002H3.94993Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Jy=null,Qy=null,xd=["color"],yd=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,xd);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M2 4.5C2 4.22386 2.22386 4 2.5 4H12.5C12.7761 4 13 4.22386 13 4.5C13 4.77614 12.7761 5 12.5 5H2.5C2.22386 5 2 4.77614 2 4.5ZM4 7.5C4 7.22386 4.22386 7 4.5 7H10.5C10.7761 7 11 7.22386 11 7.5C11 7.77614 10.7761 8 10.5 8H4.5C4.22386 8 4 7.77614 4 7.5ZM3 10.5C3 10.2239 3.22386 10 3.5 10H11.5C11.7761 10 12 10.2239 12 10.5C12 10.7761 11.7761 11 11.5 11H3.5C3.22386 11 3 10.7761 3 10.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Ed=["color"],Ld=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,Ed);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M2.5 4C2.22386 4 2 4.22386 2 4.5C2 4.77614 2.22386 5 2.5 5H12.5C12.7761 5 13 4.77614 13 4.5C13 4.22386 12.7761 4 12.5 4H2.5ZM2 7.5C2 7.22386 2.22386 7 2.5 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H2.5C2.22386 8 2 7.77614 2 7.5ZM2 10.5C2 10.2239 2.22386 10 2.5 10H12.5C12.7761 10 13 10.2239 13 10.5C13 10.7761 12.7761 11 12.5 11H2.5C2.22386 11 2 10.7761 2 10.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Sd=["color"],Rd=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,Sd);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M2 4.5C2 4.22386 2.22386 4 2.5 4H12.5C12.7761 4 13 4.22386 13 4.5C13 4.77614 12.7761 5 12.5 5H2.5C2.22386 5 2 4.77614 2 4.5ZM2 7.5C2 7.22386 2.22386 7 2.5 7H7.5C7.77614 7 8 7.22386 8 7.5C8 7.77614 7.77614 8 7.5 8H2.5C2.22386 8 2 7.77614 2 7.5ZM2 10.5C2 10.2239 2.22386 10 2.5 10H10.5C10.7761 10 11 10.2239 11 10.5C11 10.7761 10.7761 11 10.5 11H2.5C2.22386 11 2 10.7761 2 10.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),eE=null,tE=null,Md=["color"],Id=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,Md);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M2 4.5C2 4.22386 2.22386 4 2.5 4H12.5C12.7761 4 13 4.22386 13 4.5C13 4.77614 12.7761 5 12.5 5H2.5C2.22386 5 2 4.77614 2 4.5ZM7 7.5C7 7.22386 7.22386 7 7.5 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H7.5C7.22386 8 7 7.77614 7 7.5ZM4 10.5C4 10.2239 4.22386 10 4.5 10H12.5C12.7761 10 13 10.2239 13 10.5C13 10.7761 12.7761 11 12.5 11H4.5C4.22386 11 4 10.7761 4 10.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),rE=null,nE=null,oE=null,iE=null,sE=null,aE=null,lE=null,cE=null,dE=null,uE=null,fE=null,hE=null,pE=null,vE=null,gE=null,CE=null,mE=null,_E=null,wE=null,bE=null,xE=null,yE=null,EE=null,LE=null,SE=null,RE=null,ME=null,IE=null,PE=null,$E=null,HE=null,OE=null,kE=null,TE=null,Pd=["color"],$d=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,Pd);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M7.23336 4.69629C7.23336 2.96884 8.63335 1.56857 10.36 1.56857C11.3736 1.56857 12.183 2.04804 12.7254 2.74385C13.3079 2.62467 13.8557 2.40913 14.3513 2.11508C14.1559 2.72598 13.7424 3.2396 13.2033 3.56463C13.2038 3.56568 13.2042 3.56674 13.2047 3.56779C13.7334 3.50361 14.2364 3.36302 14.7048 3.15546L14.7037 3.15715C14.3667 3.66183 13.9431 4.10736 13.4561 4.47034C13.4823 4.64672 13.4956 4.82427 13.4956 5.00079C13.4956 8.6871 10.6873 12.9746 5.52122 12.9746C3.93906 12.9746 2.46544 12.511 1.22505 11.7152C0.992632 11.5661 0.925108 11.2568 1.07423 11.0244C1.0874 11.0038 1.10183 10.9846 1.11734 10.9666C1.20582 10.8202 1.37438 10.7309 1.5554 10.7522C2.47066 10.8601 3.38568 10.7485 4.19219 10.3962C3.39226 10.0434 2.77129 9.35975 2.50204 8.51974C2.45359 8.3686 2.48835 8.20311 2.59351 8.08422C2.59716 8.0801 2.60087 8.07606 2.60464 8.0721C1.96391 7.50819 1.55973 6.68208 1.55973 5.76143V5.72759C1.55973 5.56814 1.64411 5.42059 1.78155 5.33974C1.82671 5.31317 1.87537 5.29511 1.92532 5.28558C1.70549 4.86154 1.58116 4.37984 1.58116 3.86958C1.58116 3.40165 1.58384 2.81192 1.91332 2.28081C1.98718 2.16175 2.10758 2.08915 2.2364 2.07195C2.42588 2.01237 2.64087 2.06969 2.77406 2.23302C3.86536 3.57126 5.44066 4.49583 7.23366 4.73961L7.23336 4.69629ZM5.52122 11.9746C4.73387 11.9746 3.97781 11.8435 3.27248 11.6023C4.13012 11.4538 4.95307 11.1159 5.66218 10.5602C5.81211 10.4427 5.87182 10.2435 5.81126 10.0629C5.7507 9.88234 5.583 9.75943 5.39255 9.75607C4.68968 9.74366 4.06712 9.39716 3.67793 8.86845C3.86828 8.85306 4.05428 8.82039 4.23445 8.77167C4.43603 8.71716 4.57363 8.53114 4.56674 8.32243C4.55985 8.11372 4.41029 7.93718 4.20555 7.89607C3.42694 7.73977 2.79883 7.16764 2.56169 6.42174C2.76255 6.47025 2.97102 6.4991 3.18482 6.5061C3.38563 6.51267 3.56646 6.38533 3.62795 6.19405C3.68943 6.00277 3.61666 5.79391 3.44963 5.68224C2.86523 5.29155 2.48116 4.62464 2.48116 3.86958C2.48116 3.70213 2.48352 3.55268 2.49355 3.41719C3.85115 4.79913 5.70873 5.68931 7.77588 5.79338C7.93225 5.80126 8.08328 5.73543 8.18395 5.61553C8.28463 5.49562 8.32332 5.33548 8.28851 5.18284C8.25255 5.02517 8.23336 4.86284 8.23336 4.69629C8.23336 3.52085 9.18591 2.56857 10.36 2.56857C11.5943 2.56857 12.4956 3.71208 12.4956 5.00079C12.4956 8.25709 10.0202 11.9746 5.52122 11.9746Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),BE=null,VE=null,DE=null,jE=null,AE=null,ZE=null,WE=null,FE=null,zE=null,UE=null,Hd=["color"],Od=(0,h.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=lt(e,Hd);return(0,h.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,h.createElement)("path",{d:"M7.49998 1L6.92321 2.00307L1.17498 12L0.599976 13H1.7535H13.2464H14.4L13.825 12L8.07674 2.00307L7.49998 1ZM7.49998 3.00613L2.3285 12H12.6714L7.49998 3.00613Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),NE=null,KE=null,XE=null,GE=null,YE=null,qE=null,JE=null,QE=null,eL=null,tL=null,rL=null,nL=null,oL=null,iL=null,sL=null,aL=null,rs=D(4867),kd=D(8210),xo=D(9600),Nr=D(3688),u2=D(4135),f2=D(8841),H1=D(8886),h2=Object.getOwnPropertySymbols,Td=Object.prototype.hasOwnProperty,Bd=Object.prototype.propertyIsEnumerable,jn=(e,n)=>{var o={};for(var s in e)Td.call(e,s)&&n.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&h2)for(var s of h2(e))n.indexOf(s)<0&&Bd.call(e,s)&&(o[s]=e[s]);return o};const[Vd,lL]=(0,f2.b)("AlertDialog",[Nr.p8]),An=(0,Nr.p8)(),Dd=e=>{const n=e,{__scopeAlertDialog:o}=n,s=jn(n,["__scopeAlertDialog"]),l=An(o);return h.createElement(Nr.fC,(0,H1.Z)({},l,s,{modal:!0}))},jd=h.forwardRef((e,n)=>{const o=e,{__scopeAlertDialog:s}=o,l=jn(o,["__scopeAlertDialog"]),c=An(s);return h.createElement(Nr.xz,(0,H1.Z)({},c,l,{ref:n}))}),Ad=e=>{const n=e,{__scopeAlertDialog:o}=n,s=jn(n,["__scopeAlertDialog"]),l=An(o);return h.createElement(Nr.h_,(0,H1.Z)({},l,s))},Zd=h.forwardRef((e,n)=>{const o=e,{__scopeAlertDialog:s}=o,l=jn(o,["__scopeAlertDialog"]),c=An(s);return h.createElement(Nr.aV,(0,H1.Z)({},c,l,{ref:n}))}),[Wd,Fd]=Vd("AlertDialogContent"),zd=h.forwardRef((e,n)=>{const o=e,{__scopeAlertDialog:s,children:l}=o,c=jn(o,["__scopeAlertDialog","children"]),d=An(s),C=h.useRef(null),g=(0,u2.e)(n,C),m=h.useRef(null);return h.createElement(Nr.jm,{contentName:"AlertDialogContent",titleName:Ud,docsSlug:"alert-dialog"},h.createElement(Wd,{scope:s,cancelRef:m},h.createElement(Nr.VY,(0,H1.Z)({role:"alertdialog"},d,c,{ref:g,onOpenAutoFocus:(0,xo.M)(c.onOpenAutoFocus,_=>{var y;_.preventDefault(),(y=m.current)===null||y===void 0||y.focus({preventScroll:!0})}),onPointerDownOutside:_=>_.preventDefault(),onInteractOutside:_=>_.preventDefault()}),h.createElement(kd.A4,null,l),!1)))}),Ud="AlertDialogTitle",cL=null,dL=null,Nd=h.forwardRef((e,n)=>{const o=e,{__scopeAlertDialog:s}=o,l=jn(o,["__scopeAlertDialog"]),c=An(s);return h.createElement(Nr.x8,(0,H1.Z)({},c,l,{ref:n}))}),Kd=h.forwardRef((e,n)=>{const o=e,{__scopeAlertDialog:s}=o,l=jn(o,["__scopeAlertDialog"]),{cancelRef:c}=Fd("AlertDialogCancel",s),d=An(s),C=(0,u2.e)(n,c);return h.createElement(Nr.x8,(0,H1.Z)({},d,l,{ref:C}))}),Xd=Dd,Gd=jd,Yd=Ad,qd=Zd,Jd=zd,Qd=Nd,e8=Kd,uL=null,fL=null;var t8=D(3084),Kr=D(2486),r8=D(3118),n8=Object.defineProperty,o8=Object.defineProperties,i8=Object.getOwnPropertyDescriptors,ns=Object.getOwnPropertySymbols,p2=Object.prototype.hasOwnProperty,v2=Object.prototype.propertyIsEnumerable,g2=(e,n,o)=>n in e?n8(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,os=(e,n)=>{for(var o in n||(n={}))p2.call(n,o)&&g2(e,o,n[o]);if(ns)for(var o of ns(n))v2.call(n,o)&&g2(e,o,n[o]);return e},C2=(e,n)=>o8(e,i8(n)),yo=(e,n)=>{var o={};for(var s in e)p2.call(e,s)&&n.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&ns)for(var s of ns(e))n.indexOf(s)<0&&v2.call(e,s)&&(o[s]=e[s]);return o};const[m2,hL]=(0,f2.b)("ContextMenu",[Kr.Wf]),Zn=(0,Kr.Wf)(),[_2,Ba]=m2("ContextMenu"),s8=e=>{const{__scopeContextMenu:n,children:o,onOpenChange:s,dir:l,modal:c=!0}=e,[d,C]=h.useState(!1),g=l8("ContextMenu",n),m=Zn(n),_=(0,t8.W)(s),y=h.useCallback(L=>{C(L),_(L)},[_]);return g.isInsideContent?h.createElement(_2,{scope:n,isRootMenu:!1,open:d,onOpenChange:y,modal:c},h.createElement(Kr.Tr,(0,H1.Z)({},m,{open:d,onOpenChange:y}),o)):h.createElement(_2,{scope:n,isRootMenu:!0,open:d,onOpenChange:y,modal:c},h.createElement(Kr.fC,(0,H1.Z)({},m,{dir:l,open:d,onOpenChange:y,modal:c}),o))},a8=h.forwardRef((e,n)=>{const o=e,{__scopeContextMenu:s}=o,l=yo(o,["__scopeContextMenu"]),c=Ba("ContextMenuTrigger",s),d=Zn(s),C=h.useRef({x:0,y:0}),g=h.useRef({getBoundingClientRect:()=>DOMRect.fromRect(os({width:0,height:0},C.current))}),m=h.useRef(0),_=h.useCallback(()=>window.clearTimeout(m.current),[]),y=L=>{C.current={x:L.clientX,y:L.clientY},c.onOpenChange(!0)};return h.useEffect(()=>_,[_]),h.createElement(w2,{scope:s,isInsideContent:!1},h.createElement(Kr.ee,(0,H1.Z)({},d,{virtualRef:g})),h.createElement(r8.W.span,(0,H1.Z)({},l,{ref:n,style:os({WebkitTouchCallout:"none"},e.style),onContextMenu:(0,xo.M)(e.onContextMenu,L=>{_(),L.preventDefault(),y(L)}),onPointerDown:(0,xo.M)(e.onPointerDown,is(L=>{_(),m.current=window.setTimeout(()=>y(L),700)})),onPointerMove:(0,xo.M)(e.onPointerMove,is(_)),onPointerCancel:(0,xo.M)(e.onPointerCancel,is(_)),onPointerUp:(0,xo.M)(e.onPointerUp,is(_))})))}),[w2,l8]=m2("ContextMenuContent",{isInsideContent:!1}),c8=h.forwardRef((e,n)=>{const o=e,{__scopeContextMenu:s}=o,l=yo(o,["__scopeContextMenu"]),c=Ba("ContextMenuContent",s),d=Zn(s),C=C2(os({},l),{style:C2(os({},e.style),{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)"})});return h.createElement(w2,{scope:s,isInsideContent:!0},c.isRootMenu?h.createElement(d8,(0,H1.Z)({__scopeContextMenu:s},C,{ref:n})):h.createElement(Kr.VY,(0,H1.Z)({},d,C,{ref:n})))}),d8=h.forwardRef((e,n)=>{const o=e,{__scopeContextMenu:s}=o,l=yo(o,["__scopeContextMenu"]),c=Ba("ContextMenuContent",s),d=Zn(s),C=h.useRef(!1);return h.createElement(Kr.VY,(0,H1.Z)({},d,l,{ref:n,portalled:!0,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:g=>{var m;(m=e.onCloseAutoFocus)===null||m===void 0||m.call(e,g),!g.defaultPrevented&&C.current&&g.preventDefault(),C.current=!1},onInteractOutside:g=>{var m;(m=e.onInteractOutside)===null||m===void 0||m.call(e,g),g.defaultPrevented||c.modal||(C.current=!0)}}))}),pL=null,vL=null,b2=h.forwardRef((e,n)=>{const o=e,{__scopeContextMenu:s}=o,l=yo(o,["__scopeContextMenu"]),c=Zn(s);return h.createElement(Kr.ck,(0,H1.Z)({},c,l,{ref:n}))}),u8=h.forwardRef((e,n)=>{const o=e,{__scopeContextMenu:s}=o,l=yo(o,["__scopeContextMenu"]),c=Zn(s);return h.createElement(Kr.fF,(0,H1.Z)({},c,l,{ref:n}))}),gL=null,CL=null,mL=null,_L=null,wL=null,f8=h.forwardRef((e,n)=>{const o=e,{__scopeContextMenu:s}=o,l=yo(o,["__scopeContextMenu"]),c=Zn(s);return h.createElement(Kr.Eh,(0,H1.Z)({},c,l,{ref:n}))});function is(e){return n=>n.pointerType!=="mouse"?e(n):void 0}const ss=s8,h8=a8,as=c8,bL=null,xL=null,yL=null,EL=null,LL=null,SL=null,RL=null,ML=null,IL=null,PL=null;var x2=Object.defineProperty,p8=Object.defineProperties,v8=Object.getOwnPropertyDescriptors,g8=Object.getOwnPropertyNames,ls=Object.getOwnPropertySymbols,y2=Object.prototype.hasOwnProperty,E2=Object.prototype.propertyIsEnumerable,Va=(e,n,o)=>n in e?x2(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,V=(e,n)=>{for(var o in n||(n={}))y2.call(n,o)&&Va(e,o,n[o]);if(ls)for(var o of ls(n))E2.call(n,o)&&Va(e,o,n[o]);return e},Y=(e,n)=>p8(e,v8(n)),Xr=(e,n)=>{var o={};for(var s in e)y2.call(e,s)&&n.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&ls)for(var s of ls(e))n.indexOf(s)<0&&E2.call(e,s)&&(o[s]=e[s]);return o},Dr=(e,n)=>function(){return e&&(n=(0,e[g8(e)[0]])(e=0)),n},Wn=(e,n)=>{for(var o in n)x2(e,o,{get:n[o],enumerable:!0})},b=(e,n,o)=>(Va(e,typeof n!="symbol"?n+"":n,o),o),tt=(e,n,o)=>new Promise((s,l)=>{var c=g=>{try{C(o.next(g))}catch(m){l(m)}},d=g=>{try{C(o.throw(g))}catch(m){l(m)}},C=g=>g.done?s(g.value):Promise.resolve(g.value).then(c,d);C((o=o.apply(e,n)).next())}),L2,di,cs=Dr({"src/state/data/browser-fs-access/supported.js"(){L2=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.location+""}catch{return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),di=L2}}),S2={};Wn(S2,{default:()=>R2});var R2,C8=Dr({"src/state/data/browser-fs-access/legacy/file-open.js"(){R2=(...e)=>tt(void 0,[...e],function*(n=[{}]){return Array.isArray(n)||(n=[n]),new Promise((o,s)=>{const l=document.createElement("input");l.type="file";const c=[...n.map(m=>m.mimeTypes||[]).join(),n.map(m=>m.extensions||[]).join()].join();l.multiple=n[0].multiple||!1,l.accept=c||"";const d=()=>g(s),C=m=>{typeof g=="function"&&g(),o(m)},g=n[0].legacySetup&&n[0].legacySetup(C,d,l);l.addEventListener("change",()=>{C(l.multiple?Array.from(l.files):l.files[0])}),l.click()})})}}),M2={};Wn(M2,{default:()=>P2});var I2,P2,m8=Dr({"src/state/data/browser-fs-access/fs-access/file-open.js"(){I2=e=>tt(void 0,null,function*(){const n=yield e.getFile();return n.handle=e,n}),P2=(...e)=>tt(void 0,[...e],function*(n=[{}]){Array.isArray(n)||(n=[n]);const o=[];n.forEach((c,d)=>{o[d]={description:c.description||"",accept:{}},c.mimeTypes?c.mimeTypes.map(C=>{o[d].accept[C]=c.extensions||[]}):o[d].accept["*/*"]=c.extensions||[]});const s=yield window.showOpenFilePicker({id:n[0].id,startIn:n[0].startIn,types:o,multiple:n[0].multiple||!1,excludeAcceptAllOption:n[0].excludeAcceptAllOption||!1}),l=yield Promise.all(s.map(I2));return n[0].multiple?l:l[0]})}});function _8(...e){return tt(this,null,function*(){return(yield $2).default(...e)})}var $2,w8=Dr({"src/state/data/browser-fs-access/file-open.js"(){cs(),$2=di?Promise.resolve().then(()=>(m8(),M2)):Promise.resolve().then(()=>(C8(),S2))}}),H2={};Wn(H2,{default:()=>O2});var O2,b8=Dr({"src/state/data/browser-fs-access/legacy/directory-open.js"(){O2=(...e)=>tt(void 0,[...e],function*(n=[{}]){return Array.isArray(n)||(n=[n]),n[0].recursive=n[0].recursive||!1,new Promise((o,s)=>{const l=document.createElement("input");l.type="file",l.webkitdirectory=!0;const c=()=>C(s),d=g=>{typeof C=="function"&&C(),o(g)},C=n[0].legacySetup&&n[0].legacySetup(d,c,l);l.addEventListener("change",()=>{let g=Array.from(l.files);n[0].recursive?n[0].recursive&&n[0].skipDirectory&&(g=g.filter(m=>m.webkitRelativePath.split("/").every(y=>!n[0].skipDirectory({name:y,kind:"directory"})))):g=g.filter(m=>m.webkitRelativePath.split("/").length===2),d(g)}),l.click()})})}}),k2={};Wn(k2,{default:()=>T2});var Da,T2,x8=Dr({"src/state/data/browser-fs-access/fs-access/directory-open.js"(){Da=(e,n,...o)=>tt(void 0,[e,n,...o],function*(s,l,c=s.name,d){const C=[],g=[];for(const m of s.values()){const _=`${c}/${m.name}`;m.kind==="file"?g.push(yield m.getFile().then(y=>(y.directoryHandle=s,Object.defineProperty(y,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>_})))):m.kind==="directory"&&l&&(!d||!d(m))&&C.push(yield Da(m,l,_,d))}return[...(yield Promise.all(C)).flat(),...yield Promise.all(g)]}),T2=(...e)=>tt(void 0,[...e],function*(n={}){n.recursive=n.recursive||!1;const o=yield window.showDirectoryPicker({id:n.id,startIn:n.startIn});return Da(o,n.recursive,void 0,n.skipDirectory)})}});function y8(...e){return tt(this,null,function*(){return(yield B2).default(...e)})}var B2,E8=Dr({"src/state/data/browser-fs-access/directory-open.js"(){cs(),B2=di?Promise.resolve().then(()=>(x8(),k2)):Promise.resolve().then(()=>(b8(),H2))}}),V2={};Wn(V2,{default:()=>D2});function L8(e,n){return tt(this,null,function*(){const o=e.getReader(),s=new ReadableStream({start(c){return d();function d(){return tt(this,null,function*(){return o.read().then(({done:C,value:g})=>{if(C){c.close();return}return c.enqueue(g),d()})})}}}),l=new Response(s);return o.releaseLock(),new Blob([yield l.blob()],{type:n})})}var D2,S8=Dr({"src/state/data/browser-fs-access/legacy/file-save.js"(){D2=(e,...n)=>tt(void 0,[e,...n],function*(o,s={}){Array.isArray(s)&&(s=s[0]);const l=document.createElement("a");let c=o;"body"in o&&(c=yield L8(o.body,o.headers.get("content-type"))),l.download=s.fileName||"Untitled",l.href=URL.createObjectURL(c);const d=()=>g(reject),C=()=>{typeof g=="function"&&g()},g=s.legacySetup&&s.legacySetup(C,d,l);return l.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(l.href),30*1e3),C(null)}),l.click(),null})}}),j2={};Wn(j2,{default:()=>A2});var A2,R8=Dr({"src/state/data/browser-fs-access/fs-access/file-save.js"(){A2=(e,...n)=>tt(void 0,[e,...n],function*(o,s=[{}],l=null,c=!1){Array.isArray(s)||(s=[s]),s[0].fileName=s[0].fileName||"Untitled";const d=[];if(s.forEach((m,_)=>{d[_]={description:m.description||"",accept:{}},m.mimeTypes?(_===0&&(o.type?m.mimeTypes.push(o.type):o.headers&&o.headers.get("content-type")&&m.mimeTypes.push(o.headers.get("content-type"))),m.mimeTypes.map(y=>{d[_].accept[y]=m.extensions||[]})):o.type&&(d[_].accept[o.type]=m.extensions||[])}),l)try{yield l.getFile()}catch(m){if(l=null,c)throw m}const C=l||(yield window.showSaveFilePicker({suggestedName:s[0].fileName,id:s[0].id,startIn:s[0].startIn,types:d,excludeAcceptAllOption:s[0].excludeAcceptAllOption||!1})),g=yield C.createWritable();return"stream"in o?(yield o.stream().pipeTo(g),C):"body"in o?(yield o.body.pipeTo(g),C):(yield g.write(blob),yield g.close(),C)})}});function M8(...e){return tt(this,null,function*(){return(yield Z2).default(...e)})}var Z2,I8=Dr({"src/state/data/browser-fs-access/file-save.js"(){cs(),Z2=di?Promise.resolve().then(()=>(R8(),j2)):Promise.resolve().then(()=>(S8(),V2))}}),ds={};Wn(ds,{directoryOpen:()=>y8,fileOpen:()=>_8,fileSave:()=>M8,supported:()=>di});var us=Dr({"src/state/data/browser-fs-access/index.js"(){w8(),E8(),I8(),cs()}}),{styled:De,createTheme:P8}=(0,_o.Th)({themeMap:V({},_o.E6),theme:{colors:{bounds:"rgba(65, 132, 244, 1.000)",boundsBg:"rgba(65, 132, 244, 0.05)",hover:"#ececec",overlay:"rgba(0, 0, 0, 0.15)",overlayContrast:"rgba(255, 255, 255, 0.15)",panel:"#fefefe",panelContrast:"#ffffff",selected:"rgba(66, 133, 244, 1.000)",selectedContrast:"#fefefe",sponsor:"#ec6cb9",sponsorContrast:"#ec6cb944",text:"#333333",tooltip:"#1d1d1d",tooltipContrast:"#ffffff",warn:"rgba(255, 100, 100, 1)"},shadows:{2:"0px 1px 1px rgba(0, 0, 0, 0.14)",3:"0px 2px 3px rgba(0, 0, 0, 0.14)",4:"0px 4px 5px -1px rgba(0, 0, 0, 0.14)",8:"0px 12px 17px rgba(0, 0, 0, 0.14)",12:"0px 12px 17px rgba(0, 0, 0, 0.14)",24:"0px 24px 38px rgba(0, 0, 0, 0.14)",key:"1px 1px rgba(0,0,0,1)",panel:`0px 0px 16px -1px rgba(0, 0, 0, 0.05), 
        0px 0px 16px -8px rgba(0, 0, 0, 0.05), 
        0px 0px 16px -12px rgba(0, 0, 0, 0.12),
        0px 0px 2px 0px rgba(0, 0, 0, 0.08)`},space:{0:"2px",1:"3px",2:"4px",3:"8px",4:"12px",5:"16px"},fontSizes:{0:"10px",1:"12px",2:"13px",3:"16px",4:"18px"},fonts:{ui:'"Recursive", system-ui, sans-serif',body:'"Recursive", system-ui, sans-serif',mono:'"Recursive Mono", monospace'},fontWeights:{},lineHeights:{},letterSpacings:{},sizes:{},borderWidths:{0:"$1"},borderStyles:{},radii:{0:"2px",1:"4px",2:"8px",3:"12px",4:"16px"},zIndices:{},transitions:{}},media:{micro:"(max-width: 370px)",sm:"(min-width: 640px)",md:"(min-width: 768px)",lg:"(min-width: 1024px)"},utils:{zStrokeWidth:()=>e=>Array.isArray(e)?{strokeWidth:`calc(${e[0]}px / var(--camera-zoom))`}:{strokeWidth:`calc(${e}px / var(--camera-zoom))`}}}),$8=P8({colors:{bounds:"rgba(38, 150, 255, 1.000)",boundsBg:"rgba(38, 150, 255, 0.05)",hover:"#444A50",overlay:"rgba(0, 0, 0, 0.15)",overlayContrast:"rgba(255, 255, 255, 0.15)",panel:"#363D44",panelContrast:"#49555f",selected:"rgba(38, 150, 255, 1.000)",selectedContrast:"#fefefe",text:"#f8f9fa",tooltip:"#1d1d1d",tooltipContrast:"#ffffff"},shadows:{2:"0px 1px 1px rgba(0, 0, 0, 0.24)",3:"0px 2px 3px rgba(0, 0, 0, 0.24)",4:"0px 4px 5px -1px rgba(0, 0, 0, 0.24)",8:"0px 12px 17px rgba(0, 0, 0, 0.24)",12:"0px 12px 17px rgba(0, 0, 0, 0.24)",24:"0px 24px 38px rgba(0, 0, 0, 0.24)",panel:`0px 0px 16px -1px rgba(0, 0, 0, 0.05), 
      0px 0px 16px -8px rgba(0, 0, 0, 0.09), 
      0px 0px 16px -12px rgba(0, 0, 0, 0.2)`}}),H8=class{constructor(){b(this,"onPinchStart"),b(this,"onPinchEnd"),b(this,"onPinch"),b(this,"onKeyDown"),b(this,"onKeyUp"),b(this,"onPointerMove"),b(this,"onPointerUp"),b(this,"onPan"),b(this,"onZoom"),b(this,"onPointerDown"),b(this,"onPointCanvas"),b(this,"onDoubleClickCanvas"),b(this,"onRightPointCanvas"),b(this,"onDragCanvas"),b(this,"onReleaseCanvas"),b(this,"onPointShape"),b(this,"onDoubleClickShape"),b(this,"onRightPointShape"),b(this,"onDragShape"),b(this,"onHoverShape"),b(this,"onUnhoverShape"),b(this,"onReleaseShape"),b(this,"onPointBounds"),b(this,"onDoubleClickBounds"),b(this,"onRightPointBounds"),b(this,"onDragBounds"),b(this,"onHoverBounds"),b(this,"onUnhoverBounds"),b(this,"onReleaseBounds"),b(this,"onPointBoundsHandle"),b(this,"onDoubleClickBoundsHandle"),b(this,"onRightPointBoundsHandle"),b(this,"onDragBoundsHandle"),b(this,"onHoverBoundsHandle"),b(this,"onUnhoverBoundsHandle"),b(this,"onReleaseBoundsHandle"),b(this,"onPointHandle"),b(this,"onDoubleClickHandle"),b(this,"onRightPointHandle"),b(this,"onDragHandle"),b(this,"onHoverHandle"),b(this,"onUnhoverHandle"),b(this,"onReleaseHandle"),b(this,"onShapeBlur"),b(this,"onShapeClone")}},O8=(e=>(e.Idle="idle",e.Connecting="connecting",e.Connected="connected",e.Disconnected="disconnected",e))(O8||{}),k8=(e=>(e.Transform="transform",e.Translate="translate",e.TransformSingle="transformSingle",e.Brush="brush",e.Arrow="arrow",e.Draw="draw",e.Erase="erase",e.Rotate="rotate",e.Handle="handle",e.Grid="grid",e))(k8||{}),T8=(e=>(e.Idle="idle",e.PointingHandle="pointingHandle",e.PointingBounds="pointingBounds",e.PointingBoundsHandle="pointingBoundsHandle",e.TranslatingLabel="translatingLabel",e.TranslatingHandle="translatingHandle",e.Translating="translating",e.Transforming="transforming",e.Rotating="rotating",e.Pinching="pinching",e.Brushing="brushing",e.Creating="creating",e.EditingText="editing-text",e))(T8||{}),B8=(e=>(e.Backward="backward",e.Forward="forward",e.ToFront="toFront",e.ToBack="toBack",e))(B8||{}),V8=(e=>(e.Top="top",e.CenterVertical="centerVertical",e.Bottom="bottom",e.Left="left",e.CenterHorizontal="centerHorizontal",e.Right="right",e))(V8||{}),D8=(e=>(e.Horizontal="horizontal",e.Vertical="vertical",e))(D8||{}),j8=(e=>(e.Horizontal="horizontal",e.Vertical="vertical",e))(j8||{}),A8=(e=>(e.Horizontal="horizontal",e.Vertical="vertical",e))(A8||{}),Z8=(e=>(e.Sticky="sticky",e.Ellipse="ellipse",e.Rectangle="rectangle",e.Triangle="triangle",e.Draw="draw",e.Arrow="arrow",e.Line="line",e.Text="text",e.Group="group",e.Image="image",e.Video="video",e))(Z8||{}),W8=(e=>(e.Arrow="arrow",e))(W8||{}),F8=(e=>(e.White="white",e.LightGray="lightGray",e.Gray="gray",e.Black="black",e.Green="green",e.Cyan="cyan",e.Blue="blue",e.Indigo="indigo",e.Violet="violet",e.Red="red",e.Orange="orange",e.Yellow="yellow",e))(F8||{}),W2=(e=>(e.Small="small",e.Medium="medium",e.Large="large",e))(W2||{}),F2=(e=>(e.Draw="draw",e.Solid="solid",e.Dashed="dashed",e.Dotted="dotted",e))(F2||{}),z8=(e=>(e.Small="small",e.Medium="medium",e.Large="large",e.ExtraLarge="extraLarge",e))(z8||{}),z2=(e=>(e.Start="start",e.Middle="middle",e.End="end",e.Justify="justify",e))(z2||{}),U2=(e=>(e.Script="script",e.Sans="sans",e.Serif="erif",e.Mono="mono",e))(U2||{}),U8=(e=>(e.Image="image",e.Video="video",e))(U8||{}),N8=(e=>(e.PNG="png",e.JPG="jpeg",e.WEBP="webp",e.PDF="pdf",e.SVG="svg",e.JSON="json",e))(N8||{});function En(e,n){const{version:o=0}=e;if("assets"in e){const s=new Set;Object.values(e.pages).forEach(l=>Object.values(l.shapes).forEach(c=>{c.assetId&&s.add(c.assetId)})),Object.keys(e.assets).forEach(l=>{s.has(l)||delete e.assets[l]})}return o===n||(o<14&&Object.values(e.pages).forEach(s=>{Object.values(s.shapes).filter(l=>l.type==="text").forEach(l=>l.style.font==="script")}),o<=13&&Object.values(e.pages).forEach(s=>{Object.values(s.bindings).forEach(l=>{Object.assign(l,l.meta)}),Object.values(s.shapes).forEach(l=>{Object.entries(l.style).forEach(([c,d])=>{typeof d=="string"&&(l.style[c]=d.toLowerCase())}),l.type==="arrow"&&l.decorations&&Object.entries(l.decorations).forEach(([c,d])=>{d==="Arrow"&&(l.decorations=Y(V({},l.decorations),{[c]:"arrow"}))})})}),o<=13.1&&(e.name="New Document"),o<15&&(e.assets={}),Object.values(e.pages).forEach(s=>{Object.values(s.shapes).forEach(l=>{o<15.2&&(l.type==="image"||l.type==="video")&&(l.style.isFilled=!0),o<15.3&&(l.type==="rectangle"||l.type==="triangle"||l.type==="ellipse"||l.type==="arrow")&&(l.label=l.text||"",l.labelPoint=[.5,.5])})}),Object.values(e.pageStates).forEach(s=>{s.selectedIds=s.selectedIds.filter(l=>e.pages[s.id].shapes[l]!==void 0),s.bindingId=void 0,s.editingId=void 0,s.hoveredId=void 0,s.pointedId=void 0}),e.version=n),e}var fs="-0.03em",K8=1.3,Eo=8,hs=16,q1=16,Er=32,ps=128,ja=5,Aa=10,lr=.3,Lo=3,Za=[.5,.5],$L=Math.PI*2,vs={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e*e:-1+(4-2*e)*e,easeInCubic:e=>e*e*e,easeOutCubic:e=>--e*e*e+1,easeInOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1- --e*e*e*e,easeInOutQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1+--e*e*e*e*e,easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e<=0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e>=1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e<=0?0:e>=1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2},N2=["#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467","#FF802B"],X8=typeof Window>"u"?!1:/^((?!chrome|android).)*safari/i.test(navigator.userAgent),K2=[".png",".svg",".jpg",".jpeg",".gif"],X2=X8?[]:[".mp4",".webm"],G2={mode:"readwrite"},G8=e=>tt(void 0,null,function*(){return(yield e.queryPermission(G2))==="granted"||(yield e.requestPermission(G2))==="granted"});function Y8(){return tt(this,null,function*(){if(typeof Window>"u"||!("_location"in Window))return;const e=yield Sa(`Tldraw_file_handle_${window.location.origin}`);return e||null})}function Y2(e){return tt(this,null,function*(){return Ji(`Tldraw_file_handle_${window.location.origin}`,e)})}function q2(e,n){return tt(this,null,function*(){const o={name:e.name||"New Document",fileHandle:n??null,document:e,assets:{}},s=JSON.stringify(o,null,2),l=new Blob([s],{type:"application/vnd.Tldraw+json"});if(n&&!(yield G8(n)))return null;const C=yield(yield Promise.resolve().then(()=>(us(),ds))).fileSave(l,{fileName:`${o.name}.tldr`,description:"Tldraw File",extensions:[".tldr"]},n);return yield Y2(C),C})}function q8(){return tt(this,null,function*(){var e;const s=yield(yield Promise.resolve().then(()=>(us(),ds))).fileOpen({description:"Tldraw File",extensions:[".tldr"],multiple:!1});if(!s)return null;const l=yield new Promise(C=>{const g=new FileReader;g.onloadend=()=>{g.readyState===FileReader.DONE&&C(g.result)},g.readAsText(s,"utf8")}),c=JSON.parse(l),d=(e=s.handle)!=null?e:null;return yield Y2(d),{fileHandle:d,document:c.document}})}function J8(){return tt(this,null,function*(){return(yield Promise.resolve().then(()=>(us(),ds))).fileOpen({description:"Image or Video",extensions:[...K2,...X2],multiple:!1})})}function Q8(e){return new Promise((n,o)=>{if(e){const s=new FileReader;s.readAsDataURL(e),s.onload=()=>n(s.result),s.onerror=l=>o(l),s.onabort=l=>o(l)}})}function eu(e){return new Promise((n,o)=>{const s=new Image;s.onload=()=>n([s.width,s.height]),s.onerror=()=>o(new Error("Could not get image size")),s.src=e})}function tu(e){return new Promise((n,o)=>{const s=document.createElement("video");s.onloadedmetadata=()=>n([s.videoWidth,s.videoHeight]),s.onerror=()=>o(new Error("Could not get video size")),s.src=e})}us();var J2="#fafafa",Wa="#343d45",So={white:"#f0f1f3",lightGray:"#c6cbd1",gray:"#788492",black:"#1d1d1d",green:"#36b24d",cyan:"#0e98ad",blue:"#1c7ed6",indigo:"#4263eb",violet:"#7746f1",red:"#ff2133",orange:"#ff9433",yellow:"#ffc936"},ru={light:Y(V({},Object.fromEntries(Object.entries(So).map(([e,n])=>[e,B.lerpColor(n,J2,.45)]))),{white:"#ffffff",black:"#3d3d3d"}),dark:Y(V({},Object.fromEntries(Object.entries(So).map(([e,n])=>[e,B.lerpColor(B.lerpColor(n,"#999999",.3),Wa,.4)]))),{white:"#1d1d1d",black:"#bbbbbb"})},ui={light:Y(V({},So),{white:"#1d1d1d"}),dark:Y(V({},Object.fromEntries(Object.entries(So).map(([e,n])=>[e,B.lerpColor(n,Wa,.1)]))),{white:"#cecece",black:"#cecece"})},Fa={light:Y(V({},Object.fromEntries(Object.entries(So).map(([e,n])=>[e,B.lerpColor(n,J2,.82)]))),{white:"#fefefe"}),dark:Y(V({},Object.fromEntries(Object.entries(So).map(([e,n])=>[e,B.lerpColor(n,Wa,.82)]))),{white:"rgb(30,33,37)",black:"#1e1e1f"})},nu={small:2,medium:3.5,large:5},ou={small:28,medium:48,large:96,auto:"auto"},iu={script:'"Caveat Brush"',sans:'"Source Sans Pro", sans-serif',erif:'"Crimson Pro", serif',mono:'"Source Code Pro", monospace'},su={script:1,sans:1,erif:1,mono:1},au={small:24,medium:36,large:48,auto:"auto"};function lu(e){return nu[e]}function Q2(e,n="script"){return ou[e]*su[n]}function za(e="script"){return iu[e]}function cu(e){return au[e]}function Ln(e){const n=Q2(e.size,e.font),o=za(e.font),{scale:s=1}=e;return`${n*s}px/1 ${o}`}function du(e){const n=cu(e.size),o=za(e.font),{scale:s=1}=e;return`${n*s}px/1 ${o}`}function e9(e,n=!1){const{color:o}=e,s=n?"dark":"light",l=o==="white"||o==="black"?"yellow":o;return{fill:ru[s][l],stroke:ui[s][l],color:n?"#1d1d1d":"#0d0d0d"}}function jt(e,n){const{color:o,size:s,isFilled:l}=e,c=lu(s),d=n?"dark":"light";return{stroke:ui[d][o],fill:l?Fa[d][o]:"none",strokeWidth:c}}var Gr={color:"black",size:"small",isFilled:!1,dash:"draw",scale:1},Ua=Y(V({},Gr),{font:"script",textAlign:"middle"}),uu={start:"left",middle:"center",end:"right",justify:"justify"};function t9(e="start"){return uu[e]}function Na(e,n,o){const s=Q2(n.size,n.font),l=document.createElementNS("http://www.w3.org/2000/svg","g"),c=e.split(`
`).map((d,C)=>{const g=document.createElementNS("http://www.w3.org/2000/svg","text");return g.textContent=d,g.setAttribute("y",K8*s*(.5+C)+""),l.appendChild(g),g});switch(l.setAttribute("font-size",s+""),l.setAttribute("font-family",za(n.font).slice(1,-1)),l.setAttribute("text-align",t9(n.textAlign)),n.textAlign){case"middle":{l.setAttribute("text-align","center"),l.setAttribute("text-anchor","middle"),c.forEach(d=>d.setAttribute("x",o.width/2+""));break}case"end":{l.setAttribute("text-align","right"),l.setAttribute("text-anchor","end"),c.forEach(d=>d.setAttribute("x",o.width+""));break}case"start":l.setAttribute("text-anchor","start"),l.setAttribute("alignment-baseline","central")}return l}var Sn;function fu(){var e;(e=document.getElementById("__textLabelMeasure"))==null||e.remove();const n=document.createElement("pre");return n.id="__textLabelMeasure",Object.assign(n.style,{whiteSpace:"pre",width:"auto",border:"1px solid transparent",padding:"4px",margin:"0px",letterSpacing:fs,opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",pointerEvents:"none",userSelect:"none",alignmentBaseline:"mathematical",dominantBaseline:"mathematical"}),n.tabIndex=-1,document.body.appendChild(n),n}typeof window<"u"&&(Sn=fu());var r9="",n9="",Ka=[0,0];function gs(e,n){if(!e)return[16,32];if(!Sn)return[10,10];if(Sn.parent||document.body.appendChild(Sn),e===r9&&n===n9)return Ka;r9=e,n9=n,Sn.textContent=`${e}`,Sn.style.font=n;const o=Sn.offsetWidth||1,s=Sn.offsetHeight||1;return Ka=[o,s],Ka}function Ro(e,n){const o=B.getFromCache(n,e,()=>{const[s,l]=e.size;return{minX:0,maxX:s,minY:0,maxY:l,width:s,height:l}});return B.translateBounds(o,e.point)}function Cs(e,n,{initialShape:o,transformOrigin:s,scaleX:l,scaleY:c}){if(e.rotation||o.isAspectRatioLocked){const d=re.toFixed(re.mul(o.size,Math.min(Math.abs(l),Math.abs(c)))),C=re.toFixed([n.minX+(n.width-e.size[0])*(l<0?1-s[0]:s[0]),n.minY+(n.height-e.size[1])*(c<0?1-s[1]:s[1])]),g=l<0&&c>=0||c<0&&l>=0?o.rotation?-o.rotation:0:o.rotation;return{size:d,point:C,rotation:g}}else return{point:re.toFixed([n.minX,n.minY]),size:re.toFixed([n.width,n.height])}}function ms(e,n){return{size:re.toFixed([n.width,n.height]),point:re.toFixed([n.minX,n.minY])}}var o9="  ",cr=class{static insertTextFirefox(e,n){e.setRangeText(n,e.selectionStart||0,e.selectionEnd||0,"end"),e.dispatchEvent(new InputEvent("input",{data:n,inputType:"insertText",isComposing:!1}))}static insert(e,n){const o=e.ownerDocument,s=o.activeElement;s!==e&&e.focus(),o.execCommand("insertText",!1,n)||cr.insertTextFirefox(e,n),s===o.body?e.blur():s instanceof HTMLElement&&s!==e&&s.focus()}static set(e,n){e.select(),cr.insert(e,n)}static getSelection(e){const{selectionStart:n,selectionEnd:o}=e;return e.value.slice(n||void 0,o||void 0)}static wrapSelection(e,n,o){const{selectionStart:s,selectionEnd:l}=e,c=cr.getSelection(e);cr.insert(e,n+c+(o??n)),e.selectionStart=(s||0)+n.length,e.selectionEnd=(l||0)+n.length}static replace(e,n,o){let s=0;e.value.replace(n,(...l)=>{const c=s+l[l.length-2],d=l[0].length;e.selectionStart=c,e.selectionEnd=c+d;const C=typeof o=="string"?o:o(...l);return cr.insert(e,C),e.selectionStart=c,s+=C.length-d,C})}static findLineEnd(e,n){const o=e.lastIndexOf(`
`,n-1)+1;return e.charAt(o)!=="	"?n:o+1}static indent(e){var n;const{selectionStart:o,selectionEnd:s,value:l}=e,c=l.slice(o,s),d=(n=/\n/g.exec(c))==null?void 0:n.length;if(d&&d>0){const C=l.lastIndexOf(`
`,o-1)+1,g=e.value.slice(C,s-1),m=g.replace(/^|\n/g,`$&${o9}`),_=m.length-g.length;e.setSelectionRange(C,s-1),cr.insert(e,m),e.setSelectionRange(o+1,s+_)}else cr.insert(e,o9)}static unindent(e){const{selectionStart:n,selectionEnd:o,value:s}=e,l=s.lastIndexOf(`
`,n-1)+1,c=cr.findLineEnd(s,o),d=e.value.slice(l,c),C=d.replace(/(^|\n)(\t| {1,2})/g,"$1"),g=d.length-C.length;e.setSelectionRange(l,c),cr.insert(e,C);const m=/\t| {1,2}/.exec(s.slice(l,n)),_=m?m[0].length:0,y=n-_;e.setSelectionRange(n-_,Math.max(y,o-g))}},_s=e=>e.stopPropagation();function i9(e){return h.useCallback(o=>{switch(o.metaKey&&o.stopPropagation(),o.key){case"Meta":{o.stopPropagation();break}case"z":{o.metaKey&&(o.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1),o.preventDefault());break}case"Escape":{o.currentTarget.blur();break}case"Enter":{(o.ctrlKey||o.metaKey)&&o.currentTarget.blur();break}case"Tab":{o.preventDefault(),o.shiftKey?cr.unindent(o.currentTarget):cr.indent(o.currentTarget),e(K.normalizeText(o.currentTarget.value));break}}},[e])}var ws=h.memo(function({font:n,text:o,color:s,offsetX:l=0,offsetY:c=0,scale:d=1,isEditing:C=!1,onBlur:g,onChange:m}){const _=h.useRef(null),y=h.useRef(!1),L=gs(o,n),S=h.useRef(o),R=h.useCallback(z=>{S.current=K.normalizeText(z.currentTarget.value),m(S.current)},[m]),$=i9(m),k=h.useCallback(z=>{z.currentTarget.setSelectionRange(0,0),g==null||g()},[g]),T=h.useCallback(z=>{!C||!y.current||document.activeElement===z.currentTarget&&z.currentTarget.select()},[C]),H=h.useCallback(z=>{C&&z.stopPropagation()},[C]);h.useEffect(()=>{C?(S.current=o,requestAnimationFrame(()=>{y.current=!0;const z=_.current;z&&(z.focus(),z.select())})):g==null||g()},[C,g]);const Z=h.useRef(null);return h.useLayoutEffect(()=>{const z=Z.current;!z||(z.style.transform=`scale(${d}, ${d}) translate(${l}px, ${c}px)`,z.style.width=L[0]+"px",z.style.height=L[1]+"px")},[L,c,l,d]),h.createElement(hu,null,h.createElement(pu,{ref:Z,hasText:!!o,isEditing:C,style:{font:n,color:s}},C?h.createElement(vu,{ref:_,style:{font:n,color:s},name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:S.current,color:s,onFocus:T,onChange:R,onKeyDown:$,onBlur:k,onPointerDown:H,onContextMenu:_s}):o,"\u200B"))}),hu=De("div",{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",userSelect:"none",variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:lr}}}}),s9={whiteSpace:"pre-wrap",overflowWrap:"break-word"},pu=De("div",V({position:"absolute",padding:"4px",zIndex:1,minHeight:1,minWidth:1,lineHeight:1,letterSpacing:fs,outline:0,fontWeight:"500",textAlign:"center",backfaceVisibility:"hidden",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",variants:{hasText:{false:{pointerEvents:"none"},true:{pointerEvents:"all"}},isEditing:{false:{userSelect:"none"},true:{background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text"}}}},s9)),vu=De("textarea",V({position:"absolute",top:0,left:0,zIndex:1,width:"100%",height:"100%",border:"none",padding:"4px",resize:"none",textAlign:"inherit",minHeight:"inherit",minWidth:"inherit",lineHeight:"inherit",letterSpacing:"inherit",outline:0,fontWeight:"inherit",overflow:"hidden",backfaceVisibility:"hidden",display:"inline-block",pointerEvents:"all",background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text",fontSmooth:"always",WebkitFontSmoothing:"subpixel-antialiased",MozOsxFontSmoothing:"auto"},s9)),Bt=class extends Ea{constructor(){super(...arguments);b(this,"canBind",!1),b(this,"canEdit",!1),b(this,"canClone",!1),b(this,"isAspectRatioLocked",!1),b(this,"hideResizeHandles",!1),b(this,"bindingDistance",q1),b(this,"hitTestPoint",(e,n)=>B.pointInBounds(n,this.getRotatedBounds(e))),b(this,"hitTestLineSegment",(e,n,o)=>{const s=B.getBoundsFromPoints([n,o]),l=this.getBounds(e);return B.boundsContain(l,s)||e.rotation?ni(n,o,B.getRotatedCorners(this.getBounds(e))).didIntersect:ga(n,o,this.getBounds(e)).length>0}),b(this,"create",e=>(this.refMap.set(e.id,h.createRef()),this.getShape(e))),b(this,"getCenter",e=>B.getBoundsCenter(this.getBounds(e))),b(this,"getExpandedBounds",e=>B.expandBounds(this.getBounds(e),this.bindingDistance)),b(this,"getBindingPoint",(e,n,o,s,l,c)=>{const d=this.getBounds(e),C=this.getExpandedBounds(e);if(!B.pointInBounds(o,C))return;const g=Ni(s,l,C).filter($=>$.didIntersect).map($=>$.points[0]);if(!g.length)return;const m=this.getCenter(e),_=g.sort(($,k)=>M.dist(k,s)-M.dist($,s))[0],y=M.med(o,_);let L,S;c?(L=M.dist(o,m)<q1/2?m:o,S=0):(M.distanceToLineSegment(o,y,m)<q1/2?L=m:L=y,B.pointInBounds(o,d)?S=this.bindingDistance:S=Math.max(this.bindingDistance,B.getBoundsSides(d).map($=>M.distanceToLineSegment($[1][0],$[1][1],o)).sort(($,k)=>$-k)[0]));const R=M.divV(M.sub(L,[C.minX,C.minY]),[C.width,C.height]);return{point:M.clampV(R,0,1),distance:S}}),b(this,"mutate",(e,n)=>n),b(this,"transform",(e,n,o)=>Y(V({},e),{point:[n.minX,n.minY]})),b(this,"transformSingle",(e,n,o)=>this.transform(e,n,o)),b(this,"updateChildren"),b(this,"onChildrenChange"),b(this,"onHandleChange"),b(this,"onRightPointHandle"),b(this,"onDoubleClickHandle"),b(this,"onDoubleClickBoundsHandle"),b(this,"onSessionComplete"),b(this,"getSvgElement",e=>{var n;const o=(n=document.getElementById(e.id+"_svg"))==null?void 0:n.cloneNode(!0);if(!!o){if("label"in e&&e.label!==void 0){const s=e,l=document.createElementNS("http://www.w3.org/2000/svg","g"),c=this.getBounds(e),d=Na(s.label,e.style,c);d.setAttribute("fill",jt(e.style).stroke);const C=Ln(e.style),g=gs(s.label,C);return d.setAttribute("transform-origin","top left"),d.setAttribute("transform",`translate(${(c.width-g[0])/2}, ${(c.height-g[1])/2})`),l.appendChild(o),l.appendChild(d),l}return o}})}};function gu(e,n,o){const s=jt(n),l=B.rng(e),c=s.strokeWidth,d=Math.max(0,o[0]),C=Math.max(0,o[1]),g=Array.from(Array(4)).map(()=>[l()*c*.75,l()*c*.75]),m=re.add([c/2,c/2],g[0]),_=re.add([d-c/2,c/2],g[1]),y=re.add([d-c/2,C-c/2],g[2]),L=re.add([c/2,C-c/2],g[3]),S=Math.round(Math.abs(l()*2*4)),R=Math.min(d/2,c*2),$=Math.min(C/2,c*2),k=Math.max(8,Math.floor(d/16)),T=Math.max(8,Math.floor(C/16)),H=B.rotateArray([re.pointsBetween(re.add(m,[R,0]),re.sub(_,[R,0]),k),re.pointsBetween(re.add(_,[0,$]),re.sub(y,[0,$]),T),re.pointsBetween(re.sub(y,[R,0]),re.add(L,[R,0]),k),re.pointsBetween(re.sub(L,[0,$]),re.add(m,[0,$]),T)],S);return{points:[...H.flat(),...H[0]].slice(5,Math.floor((S%2===0?k:T)/-2)+3)}}function a9(e,n,o){const{points:s}=gu(e,n,o),{strokeWidth:l}=jt(n);return{points:s,options:{size:l,thinning:.65,streamline:.3,smoothing:1,simulatePressure:!1,last:!0}}}function Cu(e,n,o){const{points:s,options:l}=a9(e,n,o),c=Qi(s,l);return B.getSvgPathFromStroke(c)}function l9(e,n,o){const{points:s,options:l}=a9(e,n,o),c=bo(s,l);return B.getSvgPathFromStroke(c.map(d=>d.point.slice(0,2)),!1)}var mu=h.memo(function({id:n,style:o,size:s,isSelected:l,isDarkMode:c}){const{isFilled:d}=o,{stroke:C,strokeWidth:g,fill:m}=jt(o,c),_=Cu(n,o,s),y=l9(n,o,s);return h.createElement(h.Fragment,null,h.createElement("path",{className:o.isFilled||l?"tl-fill-hitarea":"tl-stroke-hitarea",d:y}),d&&h.createElement("path",{d:y,fill:m,pointerEvents:"none"}),h.createElement("path",{d:_,fill:C,stroke:C,strokeWidth:g,pointerEvents:"none"}))}),_u=h.memo(function({id:n,style:o,size:s,isSelected:l,isDarkMode:c}){const{stroke:d,strokeWidth:C,fill:g}=jt(o,c),m=1+C*1.618,_=Math.max(0,s[0]-m/2),y=Math.max(0,s[1]-m/2),S=[[[m/2,m/2],[_,m/2],_-m/2],[[_,m/2],[_,y],y-m/2],[[_,y],[m/2,y],_-m/2],[[m/2,y],[m/2,m/2],y-m/2]].map(([R,$,k],T)=>{const{strokeDasharray:H,strokeDashoffset:Z}=B.getPerfectDashProps(k,C*1.618,o.dash);return h.createElement("line",{key:n+"_"+T,x1:R[0],y1:R[1],x2:$[0],y2:$[1],strokeDasharray:H,strokeDashoffset:Z})});return h.createElement(h.Fragment,null,h.createElement("rect",{className:l||o.isFilled?"tl-fill-hitarea":"tl-stroke-hitarea",x:m/2,y:m/2,width:_,height:y,strokeWidth:q1}),o.isFilled&&h.createElement("rect",{x:m/2,y:m/2,width:_,height:y,fill:g,pointerEvents:"none"}),h.createElement("g",{pointerEvents:"none",stroke:d,strokeWidth:m,strokeLinecap:"round"},S))});function wu({strokeWidth:e,size:n}){return h.createElement("rect",{className:"tl-binding-indicator",x:e,y:e,width:Math.max(0,n[0]-e/2),height:Math.max(0,n[1]-e/2),strokeWidth:q1*2})}var bu=class extends Bt{constructor(){super(...arguments);b(this,"type","rectangle"),b(this,"canBind",!0),b(this,"canClone",!0),b(this,"canEdit",!0),b(this,"getShape",e=>B.deepMerge({id:"id",type:"rectangle",name:"Rectangle",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:Gr,label:"",labelPoint:[.5,.5]},e)),b(this,"Component",Bt.Component(({shape:e,isEditing:n,isBinding:o,isSelected:s,isGhost:l,meta:c,bounds:d,events:C,onShapeBlur:g,onShapeChange:m},_)=>{const{id:y,size:L,style:S,label:R="",labelPoint:$=Za}=e,k=Ln(S),T=jt(S,c.isDarkMode),H=S.dash==="draw"?mu:_u,Z=h.useCallback(z=>m==null?void 0:m({id:y,label:z}),[m]);return h.createElement(xu,V({ref:_},C),h.createElement(ws,{isEditing:n,onChange:Z,onBlur:g,font:k,text:R,color:T.stroke,offsetX:($[0]-.5)*d.width,offsetY:($[1]-.5)*d.height}),h.createElement(xr,{id:e.id+"_svg",opacity:l?lr:1},o&&h.createElement(wu,{strokeWidth:T.strokeWidth,size:L}),h.createElement(H,{id:y,style:S,size:L,isSelected:s,isDarkMode:c.isDarkMode})))})),b(this,"Indicator",Bt.Indicator(({shape:e})=>{const{id:n,style:o,size:s}=e,c=jt(o,!1).strokeWidth;return o.dash==="draw"?h.createElement("path",{d:l9(n,o,s)}):h.createElement("rect",{x:c,y:c,rx:1,ry:1,width:Math.max(1,s[0]-c*2),height:Math.max(1,s[1]-c*2)})})),b(this,"getBounds",e=>Ro(e,this.boundsCache)),b(this,"shouldRender",(e,n)=>n.size!==e.size||n.style!==e.style||n.label!==e.label),b(this,"transform",Cs),b(this,"transformSingle",ms)}},xu=De("div",{width:"100%",height:"100%"}),bs=Math.PI*2,Lr=class{static inwardEdgeNormal(e){const n=re.sub(e[1],e[0]),o=re.len2(n);return[-n[0]/o,n[1]/o]}static outwardEdgeNormal(e){return re.neg(Lr.inwardEdgeNormal(e))}static isReflexVertex(e,n){const o=e.length,s=e[(n+o-1)%o],l=e[n],c=e[(n+1)%o];return Lr.leftSide(s,c,l)<0}static getEdges(e){return e.map((n,o)=>[n,e[(o+1)%e.length]])}static edgesIntersection([e,n],[o,s]){const l=(s[1]-o[1])*(n[0]-e[0])-(s[0]-o[0])*(n[1]-e[1]);if(l==0)return null;const c=((s[0]-o[0])*(e[1]-o[1])-(s[1]-o[1])*(e[0]-o[0]))/l,d=((n[0]-e[0])*(e[1]-o[1])-(n[1]-e[1])*(e[0]-o[0]))/l;return c<0||d<0||c>1||d>1?null:[e[0]+c*(n[0]-e[0]),e[1]+c*(n[1]-e[1])]}static appendArc(e,n,o,s,l,c=!1){const d=[...e];let C=Math.atan2(s[1]-n[1],s[0]-n[0]),g=Math.atan2(l[1]-n[1],l[0]-n[0]);C<0&&(C+=bs),g<0&&(g+=bs);const m=5,_=C>g?C-g:C+bs-g,y=(c?-_:bs-_)/m;d.push(s);for(let L=1;L<m;++L){const S=C+y*L;d.push([n[0]+Math.cos(S)*o,n[1]+Math.sin(S)*o])}return d.push(l),d}static createOffsetEdge(e,n){return e.map(o=>re.add(o,n))}static getOffsetPolygon(e,n=0){const o=Lr.getEdges(e),s=o.map(c=>Lr.createOffsetEdge(c,re.mul(Lr.outwardEdgeNormal(c),n))),l=[];for(let c=0;c<s.length;c++){const d=s[c],C=s[(c+s.length-1)%s.length],g=Lr.edgesIntersection(C,d);g?l.push(g):Lr.appendArc(l,o[c][0],n,C[1],d[0],!1)}return l}static createPaddingPolygon(e,n=0){const o=e.map(l=>Lr.createOffsetEdge(l,Lr.inwardEdgeNormal(l))),s=[];for(let l=0;l<o.length;l++){const c=o[l],d=o[(l+o.length-1)%o.length],C=Lr.edgesIntersection(d,c);C?s.push(C):Lr.appendArc(s,e[l][0],n,d[1],c[0],!0)}return s}},yu=Lr;b(yu,"leftSide",re.isLeft);function Eu(e,n){if(e.length<3)throw Error("Polygon must have at least 3 points");const o=e.length;return e.map((s,l)=>[s,e[(l+1)%o]]).map(([s,l])=>{const c=re.mul(re.per(re.uni(re.sub(l,s))),n);return[re.add(s,c),re.add(l,c)]}).map((s,l,c)=>{const d=v3(s,c[(l+1)%c.length]);if(d===void 0)throw Error("Expected an intersection");return d})}function Fn(e,n=0,o=0){const[s,l]=e;let c=[[s/2,0],[s,l],[0,l]];return n&&(c=Eu(c,n)),o&&(c=c.map(d=>re.rotWith(d,[s/2,l/2],o))),c}function c9(e){const[n,o]=e,s=[[n/2,0],[n,o],[0,o]];return[(s[0][0]+s[1][0]+s[2][0])/3,(s[0][1]+s[1][1]+s[2][1])/3]}function Lu(e,n,o){const[s,l]=n,c=B.rng(e),d=Array.from(Array(3)).map(()=>[c()*o*.75,c()*o*.75]),C=[re.add([s/2,0],d[0]),re.add([s,l],d[1]),re.add([0,l],d[2])],g=Math.round(Math.abs(c()*2*3)),m=B.rotateArray([re.pointsBetween(C[0],C[1],32),re.pointsBetween(C[1],C[2],32),re.pointsBetween(C[2],C[0],32)],g);return{points:[...m.flat(),...m[0]]}}function d9(e,n,o){const{strokeWidth:s}=jt(o),{points:l}=Lu(e,n,s);return{points:l,options:{size:s,thinning:.65,streamline:.3,smoothing:1,simulatePressure:!1,last:!0}}}function Su(e,n,o){const{points:s,options:l}=d9(e,n,o),c=Qi(s,l);return B.getSvgPathFromStroke(c)}function Ru(e,n,o){const{points:s,options:l}=d9(e,n,o),c=bo(s,l);return B.getSvgPathFromStroke(c.map(d=>d.point.slice(0,2)),!1)}var Mu=h.memo(function({id:n,size:o,style:s,isSelected:l,isDarkMode:c}){const{stroke:d,strokeWidth:C,fill:g}=jt(s,c),m=Su(n,o,s),_=Ru(n,o,s);return h.createElement(h.Fragment,null,h.createElement("path",{className:s.isFilled||l?"tl-fill-hitarea":"tl-stroke-hitarea",d:_}),s.isFilled&&h.createElement("path",{d:_,fill:g,pointerEvents:"none"}),h.createElement("path",{d:m,fill:d,stroke:d,strokeWidth:C,pointerEvents:"none"}))}),Iu=h.memo(function({id:n,size:o,style:s,isSelected:l,isDarkMode:c}){const{stroke:d,strokeWidth:C,fill:g}=jt(s,c),m=1+C*1.618,_=Fn(o),L=B.pointsToLineSegments(_,!0).map(([R,$],k)=>{const{strokeDasharray:T,strokeDashoffset:H}=B.getPerfectDashProps(re.dist(R,$),C*1.618,s.dash);return h.createElement("line",{key:n+"_"+k,x1:R[0],y1:R[1],x2:$[0],y2:$[1],stroke:d,strokeWidth:m,strokeLinecap:"round",strokeDasharray:T,strokeDashoffset:H})}),S=_.join();return h.createElement(h.Fragment,null,h.createElement("polygon",{className:s.isFilled||l?"tl-fill-hitarea":"tl-stroke-hitarea",points:S}),s.isFilled&&h.createElement("polygon",{fill:g,points:S,pointerEvents:"none"}),h.createElement("g",{pointerEvents:"stroke"},L))});function Pu({size:e}){const n=Fn(e).join();return h.createElement("polygon",{className:"tl-binding-indicator",points:n,strokeWidth:q1*2})}var $u=class extends Bt{constructor(){super(...arguments);b(this,"type","triangle"),b(this,"canBind",!0),b(this,"canClone",!0),b(this,"canEdit",!0),b(this,"getShape",e=>B.deepMerge({id:"id",type:"triangle",name:"Triangle",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:Gr,label:"",labelPoint:[.5,.5]},e)),b(this,"Component",Bt.Component(({shape:e,bounds:n,isBinding:o,isEditing:s,isSelected:l,isGhost:c,meta:d,events:C,onShapeChange:g,onShapeBlur:m},_)=>{const{id:y,label:L="",size:S,style:R,labelPoint:$=Za}=e,k=Ln(R),T=jt(R,d.isDarkMode),H=R.dash==="draw"?Mu:Iu,Z=h.useCallback(j=>g==null?void 0:g({id:y,label:j}),[g]),z=h.useMemo(()=>{const j=re.div(S,2);return(c9(S)[1]-j[1])*.72},[S]);return h.createElement(Hu,V({ref:_},C),h.createElement(ws,{font:k,text:L,color:T.stroke,offsetX:($[0]-.5)*n.width,offsetY:z+($[1]-.5)*n.height,isEditing:s,onChange:Z,onBlur:m}),h.createElement(xr,{id:e.id+"_svg",opacity:c?lr:1},o&&h.createElement(Pu,{size:S}),h.createElement(H,{id:y,style:R,size:S,isSelected:l,isDarkMode:d.isDarkMode})))})),b(this,"Indicator",Bt.Indicator(({shape:e})=>{const{size:n}=e;return h.createElement("polygon",{points:Fn(n).join()})})),b(this,"shouldRender",(e,n)=>n.size!==e.size||n.style!==e.style||n.label!==e.label),b(this,"getBounds",e=>Ro(e,this.boundsCache)),b(this,"getExpandedBounds",e=>B.getBoundsFromPoints(Fn(e.size,this.bindingDistance).map(n=>re.add(n,e.point)))),b(this,"hitTestLineSegment",(e,n,o)=>ni(n,o,this.getPoints(e)).didIntersect),b(this,"hitTestBounds",(e,n)=>B.boundsContained(this.getBounds(e),n)||H3(n,this.getPoints(e)).length>0),b(this,"getBindingPoint",(e,n,o,s,l,c)=>{const d=this.getExpandedBounds(e);if(!B.pointInBounds(o,d))return;const C=Fn(e.size).map(T=>re.add(T,e.point)),g=Fn(e.size,this.bindingDistance).map(T=>re.add(T,e.point)),m=B.pointsToLineSegments(C,!0).map(([T,H])=>re.distanceToLineSegment(T,H,o)).sort((T,H)=>T-H)[0];if(!(B.pointInPolygon(o,g)||m<this.bindingDistance))return;const _=B.pointsToLineSegments(g.concat([g[0]])).map(T=>ti(s,l,T[0],T[1])).filter(T=>T.didIntersect).flatMap(T=>T.points);if(!_.length)return;const y=re.add(c9(e.size),e.point),L=_.sort((T,H)=>re.dist(H,s)-re.dist(T,s))[0],S=re.med(o,L);let R,$;c?(R=re.dist(o,y)<q1/2?y:o,$=0):(re.distanceToLineSegment(o,S,y)<q1/2?R=y:R=S,B.pointInPolygon(o,C)?$=this.bindingDistance:$=Math.max(this.bindingDistance,m));const k=re.divV(re.sub(R,[d.minX,d.minY]),[d.width,d.height]);return{point:re.clampV(k,0,1),distance:$}}),b(this,"transform",Cs),b(this,"transformSingle",ms)}getPoints(e){const{rotation:n=0,point:[o,s],size:[l,c]}=e;return[[o+l/2,s],[o,s+c],[o+l,s+c]].map(d=>re.rotWith(d,this.getCenter(e),n))}},Hu=De("div",{width:"100%",height:"100%"});function u9(e,n,o){const{strokeWidth:s}=jt(o),l=B.rng(e),c=n[0]+l()*s*2,d=n[1]+l()*s*2,C=B.perimeterOfEllipse(c,d),g=[],m=Math.PI+Math.PI*l(),_=Math.abs(l()),y=Math.max(16,C/10);for(let L=0;L<y;L++){const S=vs.easeInOutSine(L/(y+1)),R=m*2+Math.PI*(2+_)*S,$=Math.cos(R),k=Math.sin(R);g.push([c*$+n[0],d*k+n[1],S+.5+l()/2])}return bo(g,{size:1+s*2,thinning:.618,end:{taper:C/8},start:{taper:C/12},streamline:0,simulatePressure:!0})}function Ou(e,n,o){const{strokeWidth:s}=jt(o),l=B.rng(e),c=n[0]+l()*s*2,d=n[1]+l()*s*2,C=B.perimeterOfEllipse(c,d);return B.getSvgPathFromStroke(Ia(u9(e,n,o),{size:2+s*2,thinning:.618,end:{taper:C/8},start:{taper:C/12},streamline:0,simulatePressure:!0}))}function f9(e,n,o){return B.getSvgPathFromStroke(u9(e,n,o).map(s=>s.point.slice(0,2)),!1)}var ku=h.memo(function({id:n,radius:o,style:s,isSelected:l,isDarkMode:c}){const{stroke:d,strokeWidth:C,fill:g}=jt(s,c),m=Ou(n,o,s);return h.createElement(h.Fragment,null,h.createElement("ellipse",{className:s.isFilled||l?"tl-fill-hitarea":"tl-stroke-hitarea",cx:o[0],cy:o[1],rx:o[0],ry:o[1]}),s.isFilled&&h.createElement("path",{d:f9(n,o,s),stroke:"none",fill:g,pointerEvents:"none"}),h.createElement("path",{d:m,fill:d,stroke:d,strokeWidth:C,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round"}))}),Tu=h.memo(function({radius:n,style:o,isSelected:s,isDarkMode:l}){const{stroke:c,strokeWidth:d,fill:C}=jt(o,l),g=1+d*1.618,m=Math.max(0,n[0]-g/2),_=Math.max(0,n[1]-g/2),y=B.perimeterOfEllipse(m,_),{strokeDasharray:L,strokeDashoffset:S}=B.getPerfectDashProps(y<64?y*2:y,d*1.618,o.dash,4);return h.createElement(h.Fragment,null,h.createElement("ellipse",{className:o.isFilled||s?"tl-fill-hitarea":"tl-stroke-hitarea",cx:n[0],cy:n[1],rx:n[0],ry:n[1]}),h.createElement("ellipse",{cx:n[0],cy:n[1],rx:m,ry:_,fill:C,stroke:c,strokeWidth:g,strokeDasharray:L,strokeDashoffset:S,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round"}))}),Bu=class extends Bt{constructor(){super(...arguments);b(this,"type","ellipse"),b(this,"canBind",!0),b(this,"canClone",!0),b(this,"canEdit",!0),b(this,"getShape",e=>B.deepMerge({id:"id",type:"ellipse",name:"Ellipse",parentId:"page",childIndex:1,point:[0,0],radius:[1,1],rotation:0,style:Gr,label:"",labelPoint:[.5,.5]},e)),b(this,"Component",Bt.Component(({shape:e,isGhost:n,isSelected:o,isBinding:s,isEditing:l,meta:c,bounds:d,events:C,onShapeChange:g,onShapeBlur:m},_)=>{const{id:y,radius:L,style:S,label:R="",labelPoint:$=Za}=e,k=Ln(e.style),T=jt(S,c.isDarkMode),H=T.strokeWidth,Z=1+H*1.618,z=Math.max(0,L[0]-Z/2),j=Math.max(0,L[1]-Z/2),X=S.dash==="draw"?ku:Tu,F=h.useCallback(q=>g==null?void 0:g({id:y,label:q}),[g]);return h.createElement(Vu,V({ref:_},C),h.createElement(ws,{isEditing:l,onChange:F,onBlur:m,font:k,text:R,color:T.stroke,offsetX:($[0]-.5)*d.width,offsetY:($[1]-.5)*d.height}),h.createElement(xr,{id:e.id+"_svg",opacity:n?lr:1},s&&h.createElement("ellipse",{className:"tl-binding-indicator",cx:L[0],cy:L[1],rx:z,ry:j,strokeWidth:this.bindingDistance}),h.createElement(X,{id:y,radius:L,style:S,isSelected:o,isDarkMode:c.isDarkMode})))})),b(this,"Indicator",Bt.Indicator(({shape:e})=>{const{id:n,radius:o,style:s}=e,c=jt(s).strokeWidth,d=1+c*1.618,C=Math.max(0,o[0]-d/2),g=Math.max(0,o[1]-d/2);return s.dash==="draw"?h.createElement("path",{d:f9(n,o,s)}):h.createElement("ellipse",{cx:o[0],cy:o[1],rx:C,ry:g})})),b(this,"hitTestPoint",(e,n)=>B.pointInBounds(n,this.getRotatedBounds(e))&&B.pointInEllipse(n,this.getCenter(e),e.radius[0],e.radius[1],e.rotation||0)),b(this,"hitTestLineSegment",(e,n,o)=>go(n,o,this.getCenter(e),e.radius[0],e.radius[1],e.rotation||0).didIntersect),b(this,"getBounds",e=>B.getFromCache(this.boundsCache,e,()=>B.getRotatedEllipseBounds(e.point[0],e.point[1],e.radius[0],e.radius[1],0))),b(this,"getRotatedBounds",e=>B.getRotatedEllipseBounds(e.point[0],e.point[1],e.radius[0],e.radius[1],e.rotation)),b(this,"hitTestBounds",(e,n)=>{const o=this.getBounds(e);return B.boundsContained(o,n)||I3(this.getCenter(e),e.radius[0],e.radius[1],e.rotation||0,n).length>0}),b(this,"shouldRender",(e,n)=>n.radius!==e.radius||n.style!==e.style||n.label!==e.label),b(this,"getCenter",e=>M.add(e.point,e.radius)),b(this,"getBindingPoint",(e,n,o,s,l,c)=>{{const d=this.getExpandedBounds(e),C=this.getCenter(e);let g,m;if(!B.pointInEllipse(o,C,e.radius[0]+this.bindingDistance,e.radius[1]+this.bindingDistance))return;if(c)M.dist(o,this.getCenter(e))<12?g=[.5,.5]:g=M.divV(M.sub(o,[d.minX,d.minY]),[d.width,d.height]),m=0;else{let _=pa(s,l,C,e.radius[0],e.radius[1],e.rotation||0).points.sort((L,S)=>M.dist(L,s)-M.dist(S,s))[0];if(_||(_=go(o,C,C,e.radius[0],e.radius[1],e.rotation||0).points.sort((L,S)=>M.dist(L,o)-M.dist(S,o))[0]),!_)return;const y=M.med(o,_);if(M.distanceToLineSegment(o,y,this.getCenter(e))<12?g=[.5,.5]:g=M.divV(M.sub(y,[d.minX,d.minY]),[d.width,d.height]),B.pointInEllipse(o,C,e.radius[0],e.radius[1],e.rotation||0))m=this.bindingDistance/2;else{const L=go(o,C,C,e.radius[0],e.radius[1],e.rotation||0).points[0];if(!L)return;m=Math.max(this.bindingDistance/2,M.dist(o,L))}}return{point:g,distance:m}}}),b(this,"transform",(e,n,{scaleX:o,scaleY:s,initialShape:l})=>{const{rotation:c=0}=l;return{point:[n.minX,n.minY],radius:[n.width/2,n.height/2],rotation:o<0&&s>=0||s<0&&o>=0?-(c||0):c||0}}),b(this,"transformSingle",(e,n)=>({point:M.toFixed([n.minX,n.minY]),radius:M.div([n.width,n.height],2)}))}},Vu=De("div",{width:"100%",height:"100%"});function Du(e,n,o,s){return["M",e[0],e[1],"A",o[2],o[2],0,0,s<0?0:1,n[0],n[1]].join(" ")}function Xa(e,n){const{start:o,end:s}=e,l=re.dist(o.point,s.point),c=re.med(o.point,s.point),d=l/2*n,C=re.uni(re.vec(o.point,s.point));return re.toFixed(Math.abs(d)<10?c:re.add(c,re.mul(re.per(C),d)))}function ju(e,n,o,s,l,c){const d=B.rng(e),C=jt(n).strokeWidth,g=l?re.nudge(o,s,C):o,m=c?re.nudge(s,o,C):s,_=Qi([g,m],{size:C,thinning:.618+d()*.2,easing:vs.easeOutQuad,simulatePressure:!0,streamline:0,last:!0});return B.getSvgPathFromStroke(_)}function Au(e,n,o,s,l,c,d,C,g,m){const _=B.rng(e),y=jt(n).strokeWidth,L=l?re.rotWith(o,d,y/g):o,S=c?re.rotWith(s,d,-(y/g)):s,R=re.angle(d,L),$=re.angle(d,S),k=[],T=8+Math.floor(Math.abs(g)/20*1+_()/2);for(let Z=0;Z<T;Z++){const z=m(Z/T),j=B.lerpAngles(R,$,z);k.push(re.toFixed(re.nudgeAtAngle(d,j,C)))}const H=Qi([L,...k,S],{size:1+y,thinning:.618+_()*.2,easing:vs.easeOutQuad,simulatePressure:!1,streamline:0,last:!0});return B.getSvgPathFromStroke(H)}function Mo(e,n,o){return B.circleFromThreePoints(e,o,n)}function Ga(e,n,o,s,l){const c=S3(e,n*.618,o,s).points;if(!c)return K.warn("Could not find an intersection for the arrow head."),{left:e,right:e};const d=l?c[0]:c[1],C=d?re.nudge(re.rotWith(d,e,Math.PI/6),e,n*-.382):e,g=d?re.nudge(re.rotWith(d,e,-Math.PI/6),e,n*-.382):e;return{left:C,right:g}}function Ya(e,n,o){const s=L3(e,o,e,n).points;if(!s)return K.warn("Could not find an intersection for the arrow head."),{left:e,right:e};const l=s[0],c=l?re.rotWith(l,e,Math.PI/6):e,d=l?re.rotWith(l,e,-Math.PI/6):e;return{left:c,right:d}}function h9(e,n,o,s,l){const{left:c,right:d}=Ga(e,n,o,s,l);return`M ${c} L ${e} ${d}`}function p9(e,n,o){const{left:s,right:l}=Ya(e,n,o);return`M ${s} L ${e} ${l}`}function Zu(e,n,o,s,l,c){const{strokeWidth:d}=jt(e,!1),C=re.dist(n,s),g=Math.min(C/3,d*8),m=[];if(re.dist(o,re.toFixed(re.med(n,s)))<1)m.push(`M ${n} L ${s}`),l&&m.push(p9(n,s,g)),c&&m.push(p9(s,n,g));else{const y=Mo(n,o,s),L=[y[0],y[1]],S=y[2],R=ys(L,S,n,s);m.push(`M ${n} A ${S} ${S} 0 0 ${R>0?"1":"0"} ${s}`),l&&m.push(h9(n,g,L,S,R<0)),c&&m.push(h9(s,g,L,S,R>=0))}return m.join(" ")}function xs(e,n,o){if(re.dist2(n,re.med(e,o))<=4)return[e,o];const s=[],l=Mo(e,n,o),c=[l[0],l[1]],d=l[2],C=re.angle(c,e),g=re.angle(c,o);for(let m=1/20;m<1;m+=1/20){const _=B.lerpAngles(C,g,m);s.push(re.nudgeAtAngle(c,_,d))}return s}function Wu(e,n,o){if(o===e||o===n)return!0;const s=Math.PI*2,l=(n-e+s)%s,c=(o-e+s)%s;return l<=Math.PI!=c>l}function ys(e,n,o,s){const l=B.getSweep(e,o,s);return n*(2*Math.PI)*(l/(2*Math.PI))}function Es({left:e,middle:n,right:o,stroke:s,strokeWidth:l}){return h.createElement("g",null,h.createElement("path",{className:"tl-stroke-hitarea",d:`M ${e} L ${n} ${o}`}),h.createElement("path",{d:`M ${e} L ${n} ${o}`,fill:"none",stroke:s,strokeWidth:l,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"}))}var Fu=h.memo(function({id:n,style:o,start:s,end:l,decorationStart:c,decorationEnd:d,isDraw:C,isDarkMode:g}){const m=re.dist(s,l);if(m<2)return null;const _=jt(o,g),{strokeWidth:y}=_,L=1+y*1.618,S=C?ju(n,o,s,l,c,d):"M"+re.toFixed(s)+"L"+re.toFixed(l),{strokeDasharray:R,strokeDashoffset:$}=B.getPerfectDashProps(m,y*1.618,o.dash,2,!1),k=Math.min(m/3,y*8),T=c?Ya(s,l,k):null,H=d?Ya(l,s,k):null;return h.createElement(h.Fragment,null,h.createElement("path",{className:"tl-stroke-hitarea",d:S}),h.createElement("path",{d:S,fill:_.stroke,stroke:_.stroke,strokeWidth:C?L/2:L,strokeDasharray:R,strokeDashoffset:$,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"stroke"}),T&&h.createElement(Es,{left:T.left,middle:s,right:T.right,stroke:_.stroke,strokeWidth:L}),H&&h.createElement(Es,{left:H.left,middle:l,right:H.right,stroke:_.stroke,strokeWidth:L}))}),zu=h.memo(function({id:n,style:o,start:s,bend:l,end:c,arrowBend:d,decorationStart:C,decorationEnd:g,isDraw:m,isDarkMode:_}){const y=re.dist(s,c);if(y<2)return null;const L=jt(o,_),{strokeWidth:S}=L,R=1+S*1.618,$=Mo(s,l,c),k=[$[0],$[1]],T=$[2],H=ys(k,T,s,c),Z=B.rng(n),z=vs[Z()>0?"easeInOutSine":"easeInOutCubic"],j=m?Au(n,o,s,c,C,g,k,T,H,z):Du(s,c,$,d),{strokeDasharray:X,strokeDashoffset:F}=B.getPerfectDashProps(Math.abs(H),R,o.dash,2,!1),q=Math.min(y/3,S*8),fe=C?Ga(s,q,k,T,H<0):null,Ee=g?Ga(c,q,k,T,H>=0):null;return h.createElement(h.Fragment,null,h.createElement("path",{className:"tl-stroke-hitarea",d:j}),h.createElement("path",{d:j,fill:m?L.stroke:"none",stroke:L.stroke,strokeWidth:m?0:R,strokeDasharray:X,strokeDashoffset:F,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"}),fe&&h.createElement(Es,{left:fe.left,middle:s,right:fe.right,stroke:L.stroke,strokeWidth:R}),Ee&&h.createElement(Es,{left:Ee.left,middle:c,right:Ee.right,stroke:L.stroke,strokeWidth:R}))});function Uu({id:e,bounds:n,labelSize:o,offset:s,scale:l=1}){return h.createElement("defs",null,h.createElement("mask",{id:e+"_clip"},h.createElement("rect",{x:-100,y:-100,width:n.width+200,height:n.height+200,fill:"white"}),h.createElement("rect",{x:n.width/2-o[0]/2*l+((s==null?void 0:s[0])||0),y:n.height/2-o[1]/2*l+((s==null?void 0:s[1])||0),width:o[0]*l,height:o[1]*l,rx:4*l,ry:4*l,fill:"black",opacity:Math.max(l,.8)})))}var Nu=class extends Bt{constructor(){super(...arguments);b(this,"type","arrow"),b(this,"hideBounds",!0),b(this,"canEdit",!0),b(this,"pathCache",new WeakMap),b(this,"getShape",e=>{var n,o,s,l;return V({id:"id",type:"arrow",name:"Arrow",parentId:"page",childIndex:1,point:[0,0],rotation:0,bend:0,handles:{start:V({id:"start",index:0,point:[0,0],canBind:!0},(n=e.handles)==null?void 0:n.start),end:V({id:"end",index:1,point:[1,1],canBind:!0},(o=e.handles)==null?void 0:o.end),bend:V({id:"bend",index:2,point:[.5,.5]},(s=e.handles)==null?void 0:s.bend)},decorations:(l=e.decorations)!=null?l:{end:"arrow"},style:V(Y(V({},Gr),{isFilled:!1}),e.style),label:"",labelPoint:[.5,.5]},e)}),b(this,"Component",Bt.Component(({shape:e,isEditing:n,isGhost:o,meta:s,events:l,onShapeChange:c,onShapeBlur:d},C)=>{const{id:g,label:m="",handles:{start:_,bend:y,end:L},decorations:S={},style:R}=e,$=M.dist(y.point,M.toFixed(M.med(_.point,L.point)))<1,k=Ln(R),T=jt(R,s.isDarkMode),H=m||n?gs(m,k):[0,0],Z=this.getBounds(e),z=h.useMemo(()=>{const{start:fe,bend:Ee,end:qe}=e.handles;if($)return M.dist(fe.point,qe.point);const we=Mo(fe.point,Ee.point,qe.point),Re=we.slice(0,2),Ct=we[2],kt=ys(Re,Ct,fe.point,qe.point);return Math.abs(kt)},[e.handles]),j=Math.max(.5,Math.min(1,Math.max(z/(H[1]+128),z/(H[0]+128)))),X=h.useMemo(()=>{const fe=this.getBounds(e);return M.sub(e.handles.bend.point,M.toFixed([fe.width/2,fe.height/2]))},[e,j]),F=h.useCallback(fe=>{c==null||c({id:g,label:fe})},[c]),q=$?Fu:zu;return h.createElement(Ku,V({ref:C},l),h.createElement(ws,{font:k,text:m,color:T.stroke,offsetX:X[0],offsetY:X[1],scale:j,isEditing:n,onChange:F,onBlur:d}),h.createElement(xr,{id:e.id+"_svg"},h.createElement("defs",null,h.createElement("mask",{id:e.id+"_clip"},h.createElement("rect",{x:-100,y:-100,width:Z.width+200,height:Z.height+200,fill:"white"}),h.createElement("rect",{x:Z.width/2-H[0]/2*j+X[0],y:Z.height/2-H[1]/2*j+X[1],width:H[0]*j,height:H[1]*j,rx:4*j,ry:4*j,fill:"black",opacity:1}))),h.createElement("g",{pointerEvents:"none",opacity:o?lr:1,mask:m||n?`url(#${e.id}_clip)`:""},h.createElement(q,{id:g,style:R,start:_.point,end:L.point,bend:y.point,arrowBend:e.bend,decorationStart:S==null?void 0:S.start,decorationEnd:S==null?void 0:S.end,isDraw:R.dash==="draw",isDarkMode:s.isDarkMode}))))})),b(this,"Indicator",Bt.Indicator(({shape:e,bounds:n})=>{const{style:o,decorations:s,label:l,handles:{start:c,bend:d,end:C}}=e,g=Ln(o),m=l?gs(l,g):[0,0],_=M.dist(d.point,M.toFixed(M.med(c.point,C.point)))<1,y=h.useMemo(()=>{const{start:R,bend:$,end:k}=e.handles;if(_)return M.dist(R.point,k.point);const T=Mo(R.point,$.point,k.point),H=T.slice(0,2),Z=T[2],z=ys(H,Z,R.point,k.point);return Math.abs(z)},[e.handles]),L=Math.max(.5,Math.min(1,Math.max(y/(m[1]+128),y/(m[0]+128)))),S=h.useMemo(()=>{const R=this.getBounds(e);return M.sub(e.handles.bend.point,[R.width/2,R.height/2])},[e,L]);return h.createElement(h.Fragment,null,h.createElement(Uu,{id:e.id,scale:L,offset:S,bounds:n,labelSize:m}),h.createElement("path",{d:Zu(o,c.point,d.point,C.point,s==null?void 0:s.start,s==null?void 0:s.end),mask:l?`url(#${e.id}_clip)`:""}),l&&h.createElement("rect",{x:n.width/2-m[0]/2*L+S[0],y:n.height/2-m[1]/2*L+S[1],width:m[0]*L,height:m[1]*L,rx:4*L,ry:4*L,fill:"transparent"}))})),b(this,"getBounds",e=>{const n=B.getFromCache(this.boundsCache,e,()=>{const{handles:{start:o,bend:s,end:l}}=e;return B.getBoundsFromPoints(xs(o.point,s.point,l.point))});return B.translateBounds(n,e.point)}),b(this,"getRotatedBounds",e=>{const{handles:{start:n,bend:o,end:s}}=e;let l=xs(n.point,o.point,s.point);const{minX:c,minY:d,maxX:C,maxY:g}=B.getBoundsFromPoints(l);return e.rotation!==0&&(l=l.map(m=>M.rotWith(m,[(c+C)/2,(d+g)/2],e.rotation||0))),B.translateBounds(B.getBoundsFromPoints(l),e.point)}),b(this,"getCenter",e=>{const{start:n,end:o}=e.handles;return M.add(e.point,M.med(n.point,o.point))}),b(this,"shouldRender",(e,n)=>n.decorations!==e.decorations||n.handles!==e.handles||n.style!==e.style||n.label!==e.label),b(this,"hitTestPoint",(e,n)=>{const{handles:{start:o,bend:s,end:l}}=e,c=M.sub(n,e.point),d=xs(o.point,s.point,l.point);for(let C=1;C<d.length;C++)if(M.distanceToLineSegment(d[C-1],d[C],c)<1)return!0;return!1}),b(this,"hitTestLineSegment",(e,n,o)=>{const{handles:{start:s,bend:l,end:c}}=e,d=M.sub(n,e.point),C=M.sub(o,e.point),g=xs(s.point,l.point,c.point);for(let m=1;m<g.length;m++)if(ri(g[m-1],g[m],d,C).didIntersect)return!0;return!1}),b(this,"hitTestBounds",(e,n)=>{const{start:o,end:s,bend:l}=e.handles,c=M.add(e.point,o.point),d=M.add(e.point,s.point);if(B.pointInBounds(c,n)||B.pointInBounds(d,n))return!0;if(M.isEqual(M.med(o.point,s.point),l.point))return ga(c,d,n).length>0;{const[C,g,m]=Mo(o.point,l.point,s.point),_=M.add(e.point,[C,g]);return E3(_,m,c,d,n).length>0}}),b(this,"transform",(e,n,{initialShape:o,scaleX:s,scaleY:l})=>{const c=this.getBounds(o),d=["start","end"],C=V({},o.handles);d.forEach(k=>{const[T,H]=C[k].point,Z=T/c.width,z=H/c.height;C[k]=Y(V({},C[k]),{point:[n.width*(s<0?1-Z:Z),n.height*(l<0?1-z:z)]})});const{start:g,bend:m,end:_}=C,y=M.dist(g.point,_.point),L=M.med(g.point,_.point),S=y/2*o.bend,R=M.uni(M.vec(g.point,_.point)),$=M.add(L,M.mul(M.per(R),S));return C.bend=Y(V({},m),{point:M.toFixed(Math.abs(S)<10?L:$)}),{point:M.toFixed([n.minX,n.minY]),handles:C}}),b(this,"onDoubleClickHandle",(e,n)=>{var o,s;switch(n){case"bend":return{bend:0,handles:Y(V({},e.handles),{bend:Y(V({},e.handles.bend),{point:Xa(e.handles,e.bend)})})};case"start":return{decorations:Y(V({},e.decorations),{start:((o=e.decorations)==null?void 0:o.start)?void 0:"arrow"})};case"end":return{decorations:Y(V({},e.decorations),{end:((s=e.decorations)==null?void 0:s.end)?void 0:"arrow"})}}return this}),b(this,"onHandleChange",(e,n)=>{let o=B.deepMerge(e.handles,n),s=e.bend;if(o=B.deepMerge(o,{start:{point:M.toFixed(o.start.point)},end:{point:M.toFixed(o.end.point)}}),M.isEqual(o.start.point,o.end.point))return;if("bend"in n){const{start:g,end:m,bend:_}=o,y=M.dist(g.point,m.point),L=M.med(g.point,m.point),S=M.angle(g.point,m.point),R=M.uni(M.vec(g.point,m.point)),$=M.add(L,M.mul(M.per(R),y/2)),k=M.sub(L,M.mul(M.per(R),y/2)),T=M.nearestPointOnLineSegment($,k,_.point,!0),H=M.dist(L,T);s=B.clamp(H/(y/2),-.99,.99);const Z=M.angle(g.point,T);M.isEqual(L,Xa(o,s))?s=0:Wu(S,S+Math.PI,Z)&&(s*=-1)}const l={point:e.point,bend:s,handles:Y(V({},o),{bend:Y(V({},o.bend),{point:Xa(o,s)})})},c=e.point,d=this.getBounds(V({},l)),C=M.sub([d.minX,d.minY],c);if(!M.isEqual(C,[0,0])&&(Object.values(l.handles).forEach(g=>{g.point=M.toFixed(M.sub(g.point,C))}),l.point=M.toFixed(M.add(l.point,C)),M.isEqual(l.point,[0,0])))throw Error("here!");return l})}},Ku=De("div",{width:"100%",height:"100%"}),Xu=class extends Bt{constructor(){super(...arguments);b(this,"type","group"),b(this,"canBind",!0),b(this,"getShape",e=>B.deepMerge({id:"id",type:"group",name:"Group",parentId:"page",childIndex:1,point:[0,0],size:[100,100],rotation:0,children:[],style:Gr},e)),b(this,"Component",Bt.Component(({shape:e,isBinding:n,isGhost:o,isHovered:s,isSelected:l,events:c},d)=>{const{id:C,size:g}=e,m=2,_=Math.max(0,g[0]-m/2),y=Math.max(0,g[1]-m/2),S=[[[m/2,m/2],[_,m/2],_-m/2],[[_,m/2],[_,y],y-m/2],[[_,y],[m/2,y],_-m/2],[[m/2,y],[m/2,m/2],y-m/2]].map(([R,$],k)=>h.createElement("line",{key:C+"_"+k,x1:R[0],y1:R[1],x2:$[0],y2:$[1]}));return h.createElement(xr,V({ref:d},c),n&&h.createElement("rect",{className:"tl-binding-indicator",strokeWidth:this.bindingDistance}),h.createElement("g",{opacity:o?lr:1},h.createElement("rect",{x:0,y:0,width:g[0],height:g[1],fill:"transparent",pointerEvents:"all"}),h.createElement(v9,{stroke:"black",opacity:s||l?1:0,strokeLinecap:"round",pointerEvents:"stroke"},S)))})),b(this,"Indicator",Bt.Indicator(({shape:e})=>{const{id:n,size:o}=e,s=2,l=Math.max(0,o[0]-s/2),c=Math.max(0,o[1]-s/2),C=[[[s/2,s/2],[l,s/2],l-s/2],[[l,s/2],[l,c],c-s/2],[[l,c],[s/2,c],l-s/2],[[s/2,c],[s/2,s/2],c-s/2]].map(([g,m],_)=>h.createElement("line",{key:n+"_"+_,x1:g[0],y1:g[1],x2:m[0],y2:m[1]}));return h.createElement(v9,{strokeLinecap:"round",pointerEvents:"stroke"},C)})),b(this,"getBounds",e=>Ro(e,this.boundsCache)),b(this,"shouldRender",(e,n)=>n.size!==e.size||n.style!==e.style)}},v9=De("g",{strokeWidth:"calc(1.5px * var(--tl-scale))",strokeDasharray:"calc(1px * var(--tl-scale)), calc(3px * var(--tl-scale))"}),Gu=class extends Bt{constructor(){super(...arguments);b(this,"type","sticky"),b(this,"canBind",!0),b(this,"canEdit",!0),b(this,"canClone",!0),b(this,"hideResizeHandles",!0),b(this,"showCloneHandles",!0),b(this,"getShape",e=>B.deepMerge({id:"id",type:"sticky",name:"Sticky",parentId:"page",childIndex:1,point:[0,0],size:[200,200],text:"",rotation:0,style:Ua},e)),b(this,"Component",Bt.Component(({shape:e,meta:n,events:o,isGhost:s,isBinding:l,isEditing:c,onShapeBlur:d,onShapeChange:C},g)=>{const m=du(e.style),{color:_,fill:y}=e9(e.style,n.isDarkMode),L=h.useRef(null),S=h.useRef(null),R=h.useRef(null),$=h.useRef(e.text),k=h.useRef(!1),T=h.useCallback(F=>{F.stopPropagation()},[]),H=h.useCallback(F=>{$.current=K.normalizeText(F.currentTarget.value),C==null||C({id:e.id,type:e.type,text:$.current})},[C]),Z=h.useCallback(F=>{if(F.key!=="Escape"){if(F.key==="Tab"&&e.text.length===0){F.preventDefault();return}if(!(F.key==="Meta"||F.metaKey))F.stopPropagation();else if(F.key==="z"&&F.metaKey){F.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1),F.stopPropagation(),F.preventDefault();return}F.key==="Tab"&&(F.preventDefault(),F.shiftKey?cr.unindent(F.currentTarget):cr.indent(F.currentTarget),$.current=K.normalizeText(F.currentTarget.value),C==null||C(Y(V({},e),{text:$.current})))}},[e,C]),z=h.useCallback(F=>{F.currentTarget.setSelectionRange(0,0),d==null||d()},[]),j=h.useCallback(F=>{!c||!k.current||F.currentTarget.select()},[c]);h.useEffect(()=>{if(c){$.current=e.text,k.current=!0;const F=S.current;F.focus(),F.select()}},[c]),h.useEffect(()=>{const F=R.current,{size:q}=e,{offsetHeight:fe}=F,Ee=qa-Yr*2,qe=q[1]-Yr*2;if(fe===qe)return;if(fe>Ee){C==null||C({id:e.id,size:[q[0],fe+Yr*2]});return}if(fe<Ee&&q[1]>qa){C==null||C({id:e.id,size:[q[0],qa]});return}const we=S.current;we==null||we.focus()},[e.text,e.size[1],e.style]);const X={font:m,color:_,textShadow:n.isDarkMode?"0.5px 0.5px 2px rgba(255, 255, 255,.25)":"0.5px 0.5px 2px rgba(255, 255, 255,.5)"};return h.createElement(qi,V({ref:g},o),h.createElement(Yu,{ref:L,isDarkMode:n.isDarkMode,isGhost:s,style:V({backgroundColor:y},X)},l&&h.createElement("div",{className:"tl-binding-indicator",style:{position:"absolute",top:-this.bindingDistance,left:-this.bindingDistance,width:`calc(100% + ${this.bindingDistance*2}px)`,height:`calc(100% + ${this.bindingDistance*2}px)`,backgroundColor:"var(--tl-selectFill)"}}),h.createElement(qu,{ref:R,isEditing:c,alignment:e.style.textAlign},c?$.current:e.text,"\u200B"),c&&h.createElement(Ju,{ref:S,onPointerDown:T,value:c?$.current:e.text,onChange:H,onKeyDown:Z,onFocus:j,onBlur:z,tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,spellCheck:!0,alignment:e.style.textAlign,onContextMenu:_s})))})),b(this,"Indicator",Bt.Indicator(({shape:e})=>{const{size:[n,o]}=e;return h.createElement("rect",{x:0,y:0,rx:3,ry:3,width:Math.max(1,n),height:Math.max(1,o)})})),b(this,"getBounds",e=>Ro(e,this.boundsCache)),b(this,"shouldRender",(e,n)=>n.size!==e.size||n.style!==e.style||n.text!==e.text),b(this,"transform",(e,n,{scaleX:o,scaleY:s,transformOrigin:l})=>({point:M.toFixed([n.minX+(n.width-e.size[0])*(o<0?1-l[0]:l[0]),n.minY+(n.height-e.size[1])*(s<0?1-l[1]:l[1])])})),b(this,"transformSingle",e=>e),b(this,"getSvgElement",e=>{const n=this.getBounds(e),o=B.expandBounds(n,-Yr),s=Na(e.text,e.style,o),l=e9(e.style);s.setAttribute("fill",l.color),s.setAttribute("transform",`translate(${Yr}, ${Yr})`);const c=document.createElementNS("http://www.w3.org/2000/svg","g"),d=document.createElementNS("http://www.w3.org/2000/svg","rect");return d.setAttribute("width",n.width+""),d.setAttribute("height",n.height+""),d.setAttribute("fill",l.fill),d.setAttribute("rx","3"),d.setAttribute("ry","3"),c.appendChild(d),c.appendChild(s),c})}},Yr=16,qa=200,Yu=De("div",{pointerEvents:"all",position:"relative",backgroundColor:"rgba(255, 220, 100)",fontFamily:"sans-serif",height:"100%",width:"100%",padding:Yr+"px",borderRadius:"3px",perspective:"800px",variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:lr}},isDarkMode:{true:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.3), 1px 1px 4px rgba(0,0,0,.3), 1px 1px 2px rgba(0,0,0,.3)"},false:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.2), 1px 1px 4px rgba(0,0,0,.16),  1px 1px 2px rgba(0,0,0,.16)"}}}}),g9={whiteSpace:"pre-wrap",overflowWrap:"break-word"},qu=De("div",V({position:"absolute",top:Yr,left:Yr,width:`calc(100% - ${Yr*2}px)`,height:"fit-content",font:"inherit",pointerEvents:"none",userSelect:"none",variants:{isEditing:{true:{opacity:1},false:{opacity:1}},alignment:{start:{textAlign:"left"},middle:{textAlign:"center"},end:{textAlign:"right"},justify:{textAlign:"justify"}}}},g9)),Ju=De("textarea",Y(V({width:"100%",height:"100%",border:"none",overflow:"hidden",background:"none",outline:"none",textAlign:"left",font:"inherit",padding:0,color:"transparent",verticalAlign:"top",resize:"none",caretColor:"black"},g9),{variants:{alignment:{start:{textAlign:"left"},middle:{textAlign:"center"},end:{textAlign:"right"},justify:{textAlign:"justify"}}}})),Qu=class extends Bt{constructor(){super(...arguments);b(this,"type","text"),b(this,"isAspectRatioLocked",!0),b(this,"canEdit",!0),b(this,"canBind",!0),b(this,"canClone",!0),b(this,"bindingDistance",q1/2),b(this,"getShape",e=>B.deepMerge({id:"id",type:"text",name:"Text",parentId:"page",childIndex:1,point:[0,0],rotation:0,text:" ",style:Ua},e)),b(this,"texts",new Map),b(this,"Component",Bt.Component(({shape:e,isBinding:n,isGhost:o,isEditing:s,onShapeBlur:l,onShapeChange:c,meta:d,events:C},g)=>{const{text:m,style:_}=e,y=jt(_,d.isDarkMode),L=Ln(e.style),S=h.useRef(null),R=h.useRef(!1),$=h.useCallback(j=>{let X=[0,0];const F=K.normalizeText(j.currentTarget.value),q=this.getBounds(e);this.texts.set(e.id,F);const fe=this.getBounds(Y(V({},e),{text:F}));switch(e.style.textAlign){case"start":break;case"middle":{X=M.div([fe.width-q.width,0],2);break}case"end":{X=[fe.width-q.width,0];break}}c==null||c(Y(V({},e),{id:e.id,point:M.sub(e.point,X),text:F}))},[e.id,e.point]),k=h.useCallback(j=>{this.texts.set(e.id,K.normalizeText(j)),c==null||c({id:e.id,text:this.texts.get(e.id)})},[e.id]),T=i9(k),H=h.useCallback(j=>{j.currentTarget.setSelectionRange(0,0),l==null||l()},[]),Z=h.useCallback(j=>{!s||!R.current||document.activeElement===j.currentTarget&&j.currentTarget.select()},[s]),z=h.useCallback(j=>{s&&j.stopPropagation()},[s]);return h.useEffect(()=>{s?(this.texts.set(e.id,m),requestAnimationFrame(()=>{R.current=!0;const j=S.current;j&&(j.focus(),j.select())})):l==null||l()},[s]),h.createElement(qi,V({ref:g},C),h.createElement(t6,{isGhost:o,isEditing:s,onPointerDown:z},h.createElement(r6,{style:{font:L,color:y.stroke,textAlign:t9(_.textAlign)}},n&&h.createElement("div",{className:"tl-binding-indicator",style:{position:"absolute",top:-this.bindingDistance,left:-this.bindingDistance,width:`calc(100% + ${this.bindingDistance*2}px)`,height:`calc(100% + ${this.bindingDistance*2}px)`,backgroundColor:"var(--tl-selectFill)"}}),s?h.createElement(n6,{ref:S,style:{font:L,color:y.stroke},name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:m,color:y.stroke,onFocus:Z,onChange:$,onKeyDown:T,onBlur:H,onPointerDown:z,onContextMenu:_s}):m,"\u200B")))})),b(this,"Indicator",Bt.Indicator(({shape:e})=>{const{width:n,height:o}=this.getBounds(e);return h.createElement("rect",{x:0,y:0,width:n,height:o})})),b(this,"getBounds",e=>{const n=B.getFromCache(this.boundsCache,e,()=>{var o;if(!Rn)return{minX:0,minY:0,maxX:10,maxY:10,width:10,height:10};Rn.parentNode||document.body.appendChild(Rn),Rn.textContent=(o=this.texts.get(e.id))!=null?o:e.text,Rn.style.font=Ln(e.style);const s=Rn.offsetWidth||1,l=Rn.offsetHeight||1;return{minX:0,maxX:s,minY:0,maxY:l,width:s,height:l}});return B.translateBounds(n,e.point)}),b(this,"shouldRender",(e,n)=>n.text!==e.text||n.style.scale!==e.style.scale||n.style!==e.style),b(this,"transform",(e,n,{initialShape:o,scaleX:s,scaleY:l})=>{const{rotation:c=0,style:{scale:d=1}}=o,C=d*Math.abs(Math.min(s,l));return{point:[n.minX,n.minY],rotation:s<0&&l>=0||l<0&&s>=0?-(c||0):c,style:Y(V({},o.style),{scale:C})}}),b(this,"transformSingle",(e,n,{initialShape:o,scaleX:s,scaleY:l})=>{const{style:{scale:c=1}}=o;return{point:M.toFixed([n.minX,n.minY]),style:Y(V({},o.style),{scale:c*Math.max(Math.abs(l),Math.abs(s))})}}),b(this,"onDoubleClickBoundsHandle",e=>{const n=this.getCenter(e),o=this.getCenter(Y(V({},e),{style:Y(V({},e.style),{scale:1})}));return{style:Y(V({},e.style),{scale:1}),point:M.toFixed(M.add(e.point,M.sub(n,o)))}}),b(this,"getSvgElement",e=>{const n=this.getBounds(e),o=Na(e.text,e.style,n);return o.setAttribute("fill",jt(e.style).stroke),o})}},Rn;function e6(){var e;(e=document.getElementById("__textMeasure"))==null||e.remove();const n=document.createElement("pre");return n.id="__textMeasure",Object.assign(n.style,{whiteSpace:"pre",width:"auto",border:"1px solid transparent",padding:"4px",margin:"0px",letterSpacing:fs,opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",pointerEvents:"none",userSelect:"none",alignmentBaseline:"mathematical",dominantBaseline:"mathematical"}),n.tabIndex=-1,document.body.appendChild(n),n}typeof window<"u"&&(Rn=e6());var t6=De("div",{width:"100%",height:"100%",variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:lr}},isEditing:{false:{pointerEvents:"all",userSelect:"all"},true:{pointerEvents:"none",userSelect:"none"}}}}),C9={whiteSpace:"pre-wrap",overflowWrap:"break-word"},r6=De("div",V({position:"absolute",width:"100%",height:"100%",padding:"4px",zIndex:1,minHeight:1,minWidth:1,lineHeight:1,letterSpacing:fs,outline:0,fontWeight:"500",backfaceVisibility:"hidden",userSelect:"none",pointerEvents:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",isEditing:{false:{},true:{pointerEvents:"all",background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text"}}},C9)),n6=De("textarea",V({position:"absolute",top:0,left:0,zIndex:1,width:"100%",height:"100%",border:"none",padding:"4px",resize:"none",textAlign:"inherit",minHeight:"inherit",minWidth:"inherit",lineHeight:"inherit",letterSpacing:"inherit",outline:0,fontWeight:"inherit",overflow:"hidden",backfaceVisibility:"hidden",display:"inline-block",pointerEvents:"all",background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text"},C9)),o6={easing:e=>Math.sin(e*Math.PI/2),simulatePressure:!0},i6={easing:e=>e*e,simulatePressure:!1};function Ja(e){const n=jt(e.style);return Y(V({size:1+n.strokeWidth*1.5,thinning:.65,streamline:.65,smoothing:.65},e.points[1][2]===.5?o6:i6),{last:e.isComplete})}function s6(e){return e.points.length<2?"":B.getSvgPathFromStroke(bo(e.points,Ja(e)).map(n=>n.point))}function m9(e,n){return bo(e.points,n)}function a6(e){if(e.points.length<2)return"";const n=Ja(e),o=m9(e,n);return B.getSvgPathFromStroke(Ia(o,n))}function _9(e){const{points:n}=e;if(n.length<2)return"M 0 0 L 0 0";const o=Ja(e),s=m9(e,o).map(d=>d.point.slice(0,2)),l=n[n.length-1].slice(0,2);return re.isEqual(s[0],l)||s.push(l),B.getSvgPathFromStroke(s,!1)}var l6=class extends Bt{constructor(){super(...arguments);b(this,"type","draw"),b(this,"pointsBoundsCache",new WeakMap([])),b(this,"shapeBoundsCache",new Map),b(this,"rotatedCache",new WeakMap([])),b(this,"pointCache",{}),b(this,"canClone",!0),b(this,"getShape",e=>B.deepMerge({id:"id",type:"draw",name:"Draw",parentId:"page",childIndex:1,point:[0,0],rotation:0,style:Gr,points:[],isComplete:!1},e)),b(this,"Component",Bt.Component(({shape:e,meta:n,isSelected:o,isGhost:s,events:l},c)=>{const{points:d,style:C,isComplete:g}=e,m=h.useMemo(()=>s6(e),[d,C.size]),_=h.useMemo(()=>C.dash==="draw"?a6(e):_9(e),[d,C.size,C.dash,g]),y=jt(C,n.isDarkMode),{stroke:L,fill:S,strokeWidth:R}=y,$=this.getBounds(e);if($.width<=R/2&&$.height<=R/2){const j=1+R;return h.createElement(xr,V({ref:c,id:e.id+"_svg"},l),h.createElement("circle",{r:j,fill:L,stroke:L,pointerEvents:"all",opacity:s?lr:1}))}const T=C.isFilled&&d.length>3&&M.dist(d[0],d[d.length-1])<R*2;if(e.style.dash==="draw")return h.createElement(xr,V({ref:c,id:e.id+"_svg"},l),h.createElement("g",{opacity:s?lr:1},h.createElement("path",{className:T||o?"tl-fill-hitarea":"tl-stroke-hitarea",d:_}),T&&h.createElement("path",{d:m,stroke:"none",fill:S,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"}),h.createElement("path",{d:_,fill:L,stroke:L,strokeWidth:R/2,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"})));const H={draw:"none",solid:"none",dotted:`0.1 ${R*4}`,dashed:`${R*4} ${R*4}`}[C.dash],Z={draw:"none",solid:"none",dotted:"0",dashed:"0"}[C.dash],z=1+R*1.5;return h.createElement(xr,V({ref:c,id:e.id+"_svg"},l),h.createElement("g",{opacity:s?lr:1},h.createElement("path",{className:T&&o?"tl-fill-hitarea":"tl-stroke-hitarea",d:_}),h.createElement("path",{d:_,fill:T?S:"none",stroke:"none",strokeWidth:Math.min(4,R*2),strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"}),h.createElement("path",{d:_,fill:"none",stroke:L,strokeWidth:z,strokeDasharray:H,strokeDashoffset:Z,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"})))})),b(this,"Indicator",Bt.Indicator(({shape:e})=>{const{points:n}=e,o=h.useMemo(()=>_9(e),[n]),s=this.getBounds(e);return s.width<4&&s.height<4?h.createElement("circle",{x:s.width/2,y:s.height/2,r:1}):h.createElement("path",{d:o})})),b(this,"transform",(e,n,{initialShape:o,scaleX:s,scaleY:l})=>{const c=B.getFromCache(this.boundsCache,o,()=>B.getBoundsFromPoints(o.points)),d=o.points.map(([m,_,y])=>[n.width*(s<0?1-m/c.width:m/c.width),n.height*(l<0?1-_/c.height:_/c.height),y]),C=B.getBoundsFromPoints(e.points),g=M.sub([n.minX,n.minY],[C.minX,C.minY]);return{points:d,point:g}}),b(this,"getBounds",e=>{const n=!this.pointsBoundsCache.has(e.points),o=this.pointCache[e.id]!==e.point;if(n){const s=B.getBoundsFromPoints(e.points);this.pointsBoundsCache.set(e.points,s),this.shapeBoundsCache.set(e.id,B.translateBounds(s,e.point)),this.pointCache[e.id]=e.point}else o&&!n&&(this.pointCache[e.id]=e.point,this.shapeBoundsCache.set(e.id,B.translateBounds(this.pointsBoundsCache.get(e.points),e.point)));return this.shapeBoundsCache.get(e.id)}),b(this,"shouldRender",(e,n)=>n.points!==e.points||n.style!==e.style||n.isComplete!==e.isComplete),b(this,"hitTestPoint",(e,n)=>{const o=M.sub(n,e.point);return B.pointInPolyline(o,e.points)}),b(this,"hitTestLineSegment",(e,n,o)=>{const{points:s,point:l}=e,c=M.sub(n,l),d=M.sub(o,l),C=this.getBounds(e);if(s.length<=2)return M.distanceToLineSegment(n,o,e.point)<4;if(ga(c,d,C)){for(let g=1;g<s.length;g++)if(ri(s[g-1],s[g],c,d).didIntersect)return!0}return!1}),b(this,"hitTestBounds",(e,n)=>{if(!e.rotation){const l=this.getBounds(e);return B.boundsContain(n,l)||(B.boundsContain(l,n)||$3(l,n).length>0)&&M0(B.translateBounds(n,M.neg(e.point)),e.points).length>0}const o=this.getRotatedBounds(e),s=B.getFromCache(this.rotatedCache,e,()=>{const l=B.getBoundsCenter(B.getBoundsFromPoints(e.points));return e.points.map(c=>M.rotWith(c,l,e.rotation||0))});return B.boundsContain(n,o)||M0(B.translateBounds(n,M.neg(e.point)),s).length>0})}},c6=class extends Bt{constructor(){super(...arguments);b(this,"type","image"),b(this,"canBind",!0),b(this,"canClone",!0),b(this,"isAspectRatioLocked",!0),b(this,"showCloneHandles",!0),b(this,"getShape",e=>B.deepMerge({id:"image",type:"image",name:"Image",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:Y(V({},Gr),{isFilled:!0}),assetId:"assetId"},e)),b(this,"Component",Bt.Component(({shape:e,asset:n={src:""},isBinding:o,isGhost:s,meta:l,events:c,onShapeChange:d},C)=>{const{size:g,style:m}=e,_=h.useRef(null),y=h.useRef(null);return h.useLayoutEffect(()=>{const L=y.current;if(!L)return;const[S,R]=g;L.style.width=`${S}px`,L.style.height=`${R}px`},[g]),h.createElement(qi,V({ref:C},c),o&&h.createElement("div",{className:"tl-binding-indicator",style:{position:"absolute",top:`calc(${-this.bindingDistance}px * var(--tl-zoom))`,left:`calc(${-this.bindingDistance}px * var(--tl-zoom))`,width:`calc(100% + ${this.bindingDistance*2}px * var(--tl-zoom))`,height:`calc(100% + ${this.bindingDistance*2}px * var(--tl-zoom))`,backgroundColor:"var(--tl-selectFill)"}}),h.createElement(d6,{ref:y,isDarkMode:l.isDarkMode,isFilled:m.isFilled,isGhost:s},h.createElement(u6,{id:e.id+"_image",ref:_,src:n.src,alt:"tl_image_asset",draggable:!1})))})),b(this,"Indicator",Bt.Indicator(({shape:e})=>{const{size:[n,o]}=e;return h.createElement("rect",{x:0,y:0,rx:2,ry:2,width:Math.max(1,n),height:Math.max(1,o)})})),b(this,"getBounds",e=>Ro(e,this.boundsCache)),b(this,"shouldRender",(e,n)=>n.size!==e.size||n.style!==e.style),b(this,"transform",Cs),b(this,"transformSingle",ms),b(this,"getSvgElement",e=>{const n=this.getBounds(e),o=document.createElementNS("http://www.w3.org/2000/svg","image");return o.setAttribute("width",`${n.width}`),o.setAttribute("height",`${n.height}`),o.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),o})}},d6=(0,_o.zo)("div",{pointerEvents:"all",position:"relative",fontFamily:"sans-serif",fontSize:"2em",height:"100%",width:"100%",borderRadius:"3px",perspective:"800px",overflow:"hidden",p:{userSelect:"none"},img:{userSelect:"none"},variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:lr}},isFilled:{true:{},false:{}},isDarkMode:{true:{},false:{}}},compoundVariants:[{isFilled:!0,isDarkMode:!0,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.3), 1px 1px 4px rgba(0,0,0,.3), 1px 1px 2px rgba(0,0,0,.3)"}},{isFilled:!0,isDarkMode:!1,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.2), 1px 1px 4px rgba(0,0,0,.16),  1px 1px 2px rgba(0,0,0,.16)"}}]}),u6=(0,_o.zo)("img",{position:"absolute",top:0,left:0,width:"100%",height:"100%",maxWidth:"100%",minWidth:"100%",pointerEvents:"none",objectFit:"cover",userSelect:"none",borderRadius:2}),f6=class extends Bt{constructor(){super(...arguments);b(this,"type","video"),b(this,"canBind",!0),b(this,"canEdit",!0),b(this,"canClone",!0),b(this,"isAspectRatioLocked",!0),b(this,"showCloneHandles",!0),b(this,"isStateful",!0),b(this,"getShape",e=>B.deepMerge({id:"video",type:"video",name:"Video",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:Gr,assetId:"assetId",isPlaying:!0,currentTime:0},e)),b(this,"Component",Bt.Component(({shape:e,asset:n={src:""},isBinding:o,isEditing:s,isGhost:l,meta:c,events:d,onShapeChange:C},g)=>{const m=h.useRef(null),_=h.useRef(null),{currentTime:y=0,size:L,isPlaying:S,style:R}=e;h.useLayoutEffect(()=>{const H=_.current;if(!H)return;const[Z,z]=L;H.style.width=`${Z}px`,H.style.height=`${z}px`},[L]),h.useLayoutEffect(()=>{const H=m.current;!H||(S?H.play():H.pause())},[S]),h.useLayoutEffect(()=>{const H=m.current;!H||y!==H.currentTime&&(H.currentTime=y)},[y]);const $=h.useCallback(()=>{C==null||C({id:e.id,isPlaying:!0})},[]),k=h.useCallback(()=>{C==null||C({id:e.id,isPlaying:!1})},[]),T=h.useCallback(()=>{const H=m.current;!H||!s||C==null||C({id:e.id,currentTime:H.currentTime})},[s]);return h.createElement(qi,V({ref:g},d),o&&h.createElement("div",{className:"tl-binding-indicator",style:{position:"absolute",top:-this.bindingDistance,left:-this.bindingDistance,width:`calc(100% + ${this.bindingDistance*2}px)`,height:`calc(100% + ${this.bindingDistance*2}px)`,backgroundColor:"var(--tl-selectFill)"}}),h.createElement(h6,{ref:_,isDarkMode:c.isDarkMode,isGhost:l,isFilled:R.isFilled},h.createElement(p6,{ref:m,id:e.id+"_video",muted:!0,loop:!0,playsInline:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:s,autoPlay:S,onPlay:$,onPause:k,onTimeUpdate:T},h.createElement("source",{src:n.src}))))})),b(this,"Indicator",Bt.Indicator(({shape:e})=>{const{size:[n,o]}=e;return h.createElement("rect",{x:0,y:0,rx:2,ry:2,width:Math.max(1,n),height:Math.max(1,o)})})),b(this,"getBounds",e=>Ro(e,this.boundsCache)),b(this,"shouldRender",(e,n)=>n.size!==e.size||n.style!==e.style||n.isPlaying!==e.isPlaying),b(this,"getSvgElement",e=>{const n=this.getBounds(e),o=document.createElementNS("http://www.w3.org/2000/svg","image");return o.setAttribute("width",`${n.width}`),o.setAttribute("height",`${n.height}`),o.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),o}),b(this,"transform",Cs),b(this,"transformSingle",ms)}},h6=(0,_o.zo)("div",{pointerEvents:"all",position:"relative",fontFamily:"sans-serif",fontSize:"2em",height:"100%",width:"100%",borderRadius:"3px",perspective:"800px",overflow:"hidden",p:{userSelect:"none"},img:{userSelect:"none"},variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:lr}},isFilled:{true:{},false:{}},isDarkMode:{true:{},false:{}}},compoundVariants:[{isFilled:!0,isDarkMode:!0,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.3), 1px 1px 4px rgba(0,0,0,.3), 1px 1px 2px rgba(0,0,0,.3)"}},{isFilled:!0,isDarkMode:!1,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.2), 1px 1px 4px rgba(0,0,0,.16),  1px 1px 2px rgba(0,0,0,.16)"}}]}),p6=(0,_o.zo)("video",{position:"absolute",top:0,left:0,width:"100%",height:"100%",maxWidth:"100%",minWidth:"100%",pointerEvents:"none",objectFit:"cover",userSelect:"none",borderRadius:2}),w9=new bu,b9=new $u,x9=new Bu,y9=new l6,Qa=new Nu,v6=new Qu,g6=new Xu,el=new Gu,C6=new c6,m6=new f6,Io={rectangle:w9,triangle:b9,ellipse:x9,draw:y9,arrow:Qa,text:v6,group:g6,sticky:el,image:C6,video:m6},_6=e=>typeof e=="string"?Io[e]:Io[e.type];function qr(e){if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(typeof e=="object")if(typeof e[Symbol.iterator]=="function"){const n=[];if(e.length>0)for(const o of e)n.push(qr(o));return n}else{const n=Object.keys(e),o={};if(n.length>0)for(const s of n)o[s]=qr(e[s]);return o}return e}var E9=!1,Ye=class{static getShapeUtil(e){return _6(e)}static getSelectedShapes(e,n){const o=Ye.getPage(e,n);return Ye.getSelectedIds(e,n).map(l=>o.shapes[l])}static screenToWorld(e,n){const o=Ye.getPageState(e,e.appState.currentPageId).camera;return M.sub(M.div(n,o.zoom),o.point)}static getCameraZoom(e){return B.clamp(e,.1,5)}static getPage(e,n){return e.document.pages[n]}static getPageState(e,n){return e.document.pageStates[n]}static getSelectedIds(e,n){return Ye.getPageState(e,n).selectedIds}static getShapes(e,n){return Object.values(Ye.getPage(e,n).shapes)}static getCamera(e,n){return Ye.getPageState(e,n).camera}static getShape(e,n,o){return Ye.getPage(e,o).shapes[n]}static getCenter(e){return Ye.getShapeUtil(e).getCenter(e)}static getBounds(e){return Ye.getShapeUtil(e).getBounds(e)}static getRotatedBounds(e){return Ye.getShapeUtil(e).getRotatedBounds(e)}static getSelectedBounds(e){return B.getCommonBounds(Ye.getSelectedShapes(e,e.appState.currentPageId).map(n=>Ye.getShapeUtil(n).getBounds(n)))}static getParentId(e,n,o){return Ye.getShape(e,n,o).parentId}static getDocumentBranch(e,n,o){const s=Ye.getShape(e,n,o);return s.children===void 0?[n]:[n,...s.children.flatMap(l=>Ye.getDocumentBranch(e,l,o))]}static getSelectedBranchSnapshot(e,n,o){const s=Ye.getPage(e,n),l=Ye.getSelectedIds(e,n).flatMap(c=>Ye.getDocumentBranch(e,c,n).map(d=>s.shapes[d])).filter(c=>!c.isLocked).map(B.deepClone);return o!==void 0?l.map(c=>V({id:c.id},o(c))):l}static getSelectedShapeSnapshot(e,n,o){const s=Ye.getSelectedShapes(e,n).filter(l=>!l.isLocked).map(B.deepClone);return o!==void 0?s.map(l=>V({id:l.id},o(l))):s}static getAllEffectedShapeIds(e,n,o){const s=Ye.getPage(e,o),l=new Set(n);return n.forEach(c=>{const d=s.shapes[c];function C(m){m.children!==void 0&&m.children.filter(_=>!l.has(_)).forEach(_=>{l.add(_),C(s.shapes[_])})}C(d);function g(m){const _=m.parentId;_!==s.id&&(l.has(_)||(l.add(_),g(s.shapes[_])))}g(d),l.forEach(m=>{Object.values(s.bindings).filter(_=>_.fromId===m||_.toId===m).forEach(_=>l.add(_.fromId===m?_.toId:_.fromId))})}),Array.from(l.values())}static getLinkedShapeIds(e,n,o,s=!0){const l=Ye.getSelectedIds(e,n),c=Ye.getPage(e,n),d=new Set(l),C=new Set,g=[...l],m=new Set(Object.values(c.shapes).filter(_=>{var y;return _.type==="arrow"&&(_.handles.start.bindingId||((y=_.handles)==null?void 0:y.end.bindingId))}));for(;g.length;){const _=g.pop();if(!(_&&m.size))break;C.has(_)||(C.add(_),m.forEach(y=>{var L,S;const{handles:{start:{bindingId:R},end:{bindingId:$}}}=y,k=R?c.bindings[R]:null,T=$?c.bindings[$]:null;let H=!1;k&&k.toId===_?(o==="center"?H=!0:((L=y.decorations)==null?void 0:L.start)&&T?H=o==="left":H=o==="right",H&&(s&&d.add(y.id),d.add(_),T&&(d.add(T.toId),g.push(T.toId)))):T&&T.toId===_&&(o==="center"?H=!0:((S=y.decorations)==null?void 0:S.end)&&k?H=o==="left":H=o==="right",H&&(s&&d.add(y.id),d.add(_),k&&(d.add(k.toId),g.push(k.toId)))),(!k||d.has(k.toId))&&(!T||d.has(T.toId))&&m.delete(y)}))}return Array.from(d.values())}static getChildIndexAbove(e,n,o){const s=e.document.pages[o],l=s.shapes[n];let c;if(l.parentId===s.id)c=Object.values(s.shapes).filter(g=>g.parentId===s.id).sort((g,m)=>g.childIndex-m.childIndex);else{const g=s.shapes[l.parentId];if(!g.children)throw Error("No children in parent!");c=g.children.map(m=>s.shapes[m]).sort((m,_)=>m.childIndex-_.childIndex)}const d=c.indexOf(l),C=c[d+1];return C?C.childIndex:l.childIndex+1}static getBeforeShape(e,n){return Object.fromEntries(Object.keys(n).map(o=>[o,e[o]]))}static mutateShapes(e,n,o,s){const l={},c={};n.forEach((C,g)=>{const m=Ye.getShape(e,C,s);if(m.isLocked)return;const _=o(m,g);_&&(l[C]=Ye.getBeforeShape(m,_),c[C]=_)});const d=B.deepMerge(e,{document:{pages:{[e.appState.currentPageId]:{shapes:c}}}});return{before:l,after:c,data:d}}static createShapes(e,n,o){const s={document:{pages:{[o]:{shapes:V({},Object.fromEntries(n.flatMap(c=>{const d=[[c.id,void 0]];if(c.parentId!==o){const C=Ye.getShape(e,c.parentId,o);if(!C.children)throw Error("No children in parent!");d.push([C.id,{children:C.children}])}return d})))}}}},l={document:{pages:{[o]:{shapes:{shapes:V({},Object.fromEntries(n.flatMap(c=>{const d=[[c.id,c]];if(c.parentId!==o){const C=Ye.getShape(e,c.parentId,o);if(!C.children)throw Error("No children in parent!");d.push([C.id,{children:[...C.children,c.id]}])}return d})))}}}}};return{before:s,after:l}}static deleteShapes(e,n,o){o=o||e.appState.currentPageId;const s=Ye.getPage(e,o),l=typeof n[0]=="string"?n:n.map(C=>C.id),c={document:{pages:{[o]:{shapes:V({},Object.fromEntries(l.flatMap(C=>{const g=s.shapes[C],m=[[g.id,g]];if(g.parentId!==o){const _=s.shapes[g.parentId];if(!_.children)throw Error("No children in parent!");m.push([_.id,{children:_.children}])}return m}))),bindings:V({},Object.fromEntries(Object.values(s.bindings).filter(C=>l.includes(C.fromId)||l.includes(C.toId)).map(C=>[C.id,C])))}}}},d={document:{pages:{[o]:{shapes:V({},Object.fromEntries(l.flatMap(C=>{const g=s.shapes[C],m=[[g.id,void 0]];if(g.parentId!==s.id){const _=s.shapes[g.parentId];if(!_.children)throw Error("No children in parent!");m.push([_.id,{children:_.children.filter(y=>y!==g.id)}])}return m})))}}}};return{before:c,after:d}}static onSessionComplete(e){var n,o;const s=(o=(n=Ye.getShapeUtil(e)).onSessionComplete)==null?void 0:o.call(n,e);return s?V(V({},e),s):e}static onChildrenChange(e,n,o){var s,l;if(!n.children)return;const c=(l=(s=Ye.getShapeUtil(n)).onChildrenChange)==null?void 0:l.call(s,n,n.children.map(d=>Ye.getShape(e,d,o)));return c?V(V({},n),c):n}static updateArrowBindings(e,n){var o,s,l,c,d,C;const g={start:qr(n.handles.start),end:qr(n.handles.end)};let m={isBound:!1,handle:n.handles.start,point:M.add(n.handles.start.point,n.point)},_={isBound:!1,handle:n.handles.end,point:M.add(n.handles.end.point,n.point)};if(n.handles.start.bindingId){const y=((o=n.decorations)==null?void 0:o.start)!==void 0,L=n.handles.start,S=e.bindings[n.handles.start.bindingId];if(!S)throw Error("Could not find a binding to match the start handle's bindingId");const R=e.shapes[S.toId],$=Ye.getShapeUtil(R),k=$.getBounds(R),T=$.getExpandedBounds(R),H=y?B.expandBounds(k,S.distance):k,{minX:Z,minY:z,width:j,height:X}=T,F=M.add([Z,z],M.mulV([j,X],M.rotWith(S.point,[.5,.5],R.rotation||0)));m={isBound:!0,hasDecoration:y,binding:S,handle:L,point:F,util:$,target:R,bounds:k,expandedBounds:T,intersectBounds:H,center:$.getCenter(R)}}if(n.handles.end.bindingId){const y=((s=n.decorations)==null?void 0:s.end)!==void 0,L=n.handles.end,S=e.bindings[n.handles.end.bindingId];if(!S)throw Error("Could not find a binding to match the end handle's bindingId");const R=e.shapes[S.toId],$=Ye.getShapeUtil(R),k=$.getBounds(R),T=$.getExpandedBounds(R),H=y?B.expandBounds(k,S.distance):k,{minX:Z,minY:z,width:j,height:X}=T,F=M.add([Z,z],M.mulV([j,X],M.rotWith(S.point,[.5,.5],R.rotation||0)));_={isBound:!0,hasDecoration:y,binding:S,handle:L,point:F,util:$,target:R,bounds:k,expandedBounds:T,intersectBounds:H,center:$.getCenter(R)}}for(const y of["end","start"]){const L=y==="start"?m:_,S=y==="start"?_:m;if(L.isBound)if(!L.binding.distance)g[y].point=M.sub(L.point,n.point);else{const R=M.uni(M.sub(L.point,S.point));switch(L.target.type){case"ellipse":{const $=pa(S.point,R,L.center,L.target.radius[0]+(L.hasDecoration?L.binding.distance:0),L.target.radius[1]+(L.hasDecoration?L.binding.distance:0),L.target.rotation||0).points.sort((k,T)=>M.dist(k,S.point)-M.dist(T,S.point));$[0]!==void 0&&(g[y].point=M.toFixed(M.sub($[0],n.point)));break}case"triangle":{const $=L.target.point,k=Fn(L.target.size,L.hasDecoration?q1:0,L.target.rotation).map(H=>M.add(H,$)),T=B.pointsToLineSegments(k,!0).map(([H,Z])=>ti(S.point,R,H,Z)).filter(H=>H.didIntersect).flatMap(H=>H.points).sort((H,Z)=>M.dist(H,S.point)-M.dist(Z,S.point));T[0]!==void 0&&(g[y].point=M.toFixed(M.sub(T[0],n.point)));break}default:{const $=Ni(S.point,R,L.intersectBounds,L.target.rotation).filter(T=>T.didIntersect).map(T=>T.points[0]).sort((T,H)=>M.dist(T,S.point)-M.dist(H,S.point));if(!$[0])continue;let k;if(S.isBound&&(k=Ni(S.point,R,S.intersectBounds,S.target.rotation).filter(H=>H.didIntersect).map(H=>H.points[0]).sort((H,Z)=>M.dist(H,S.point)-M.dist(Z,S.point))[0]),S.isBound&&($.length<2||k&&$[0]&&Math.ceil(M.dist($[0],k))<q1*2.5||B.boundsContain(L.expandedBounds,S.expandedBounds)||B.boundsCollide(L.expandedBounds,S.expandedBounds))){const T=M.uni(M.sub(S.point,L.point)),H=Ni(L.point,T,L.bounds,L.target.rotation).filter(Z=>Z.didIntersect).map(Z=>Z.points[0]);if(!H[0])continue;g[y].point=M.toFixed(M.sub(H[0],n.point)),g[y==="start"?"end":"start"].point=M.toFixed(M.add(M.sub(H[0],n.point),M.mul(T,Math.min(M.dist(H[0],S.point),q1*2.5*(B.boundsContain(S.bounds,L.intersectBounds)?-1:1)))))}else if(!S.isBound&&($[0]&&M.dist($[0],S.point)<q1*2.5||B.pointInBounds(S.point,L.intersectBounds))){const T=M.uni(M.sub(L.center,S.point));return(c=(l=Ye.getShapeUtil(n)).onHandleChange)==null?void 0:c.call(l,n,{[y]:Y(V({},n.handles[y]),{point:M.toFixed(M.add(M.sub(S.point,n.point),M.mul(T,q1*2.5)))})})}else $[0]&&(g[y].point=M.toFixed(M.sub($[0],n.point)))}}}}return(C=(d=Ye.getShapeUtil(n)).onHandleChange)==null?void 0:C.call(d,n,g)}static transform(e,n,o){const s=Ye.getShapeUtil(e).transform(e,n,o);return s?V(V({},e),s):e}static transformSingle(e,n,o){const s=Ye.getShapeUtil(e).transformSingle(e,n,o);return s?V(V({},e),s):e}static getRotatedShapeMutation(e,n,o,s){var l,c;const d=M.sub(n,e.point),C=M.rotWith(n,o,s),g=M.toFixed(M.sub(C,d));if(e.handles!==void 0)return(c=(l=this.getShapeUtil(e)).onHandleChange)==null?void 0:c.call(l,Y(V({},e),{point:g}),Object.fromEntries(Object.entries(e.handles).map(([y,L])=>{const S=M.toFixed(M.rotWith(L.point,d,s));return[y,Y(V({},L),{point:S})]})));const m=B.clampRadians((e.rotation||0)+s);return{point:g,rotation:m}}static updateParents(e,n,o){const s=Ye.getPage(e,n);if(o.length===0)return;const{shapes:l}=Ye.getPage(e,n),c=Array.from(new Set(o.map(d=>l[d].parentId).values())).filter(d=>d!==s.id);for(const d of c){const C=l[d];if(!C.children)throw Error("A shape is parented to a shape without a children array.");Ye.onChildrenChange(e,C,n)}Ye.updateParents(e,n,c)}static getBinding(e,n,o){return Ye.getPage(e,o).bindings[n]}static getBindings(e,n){const o=Ye.getPage(e,n);return Object.values(o.bindings)}static getBindableShapeIds(e){return Ye.getShapes(e,e.appState.currentPageId).filter(n=>Ye.getShapeUtil(n).canBind).sort((n,o)=>o.childIndex-n.childIndex).map(n=>n.id)}static getBindingsWithShapeIds(e,n,o){return Array.from(new Set(Ye.getBindings(e,o).filter(s=>n.includes(s.toId)||n.includes(s.fromId))).values())}static getRelatedBindings(e,n,o){const s=new Set(n),l=Ye.getPage(e,o),c=Object.values(l.bindings),d=new Set(c.filter(m=>s.has(m.toId)||s.has(m.fromId)));let C=d.size,g=-1;for(;g!==0;)d.forEach(m=>{const _=m.fromId;for(const y of c)y.fromId===_&&d.add(y),y.toId===_&&d.add(y)}),g=d.size-C,C=d.size;return Array.from(d.values())}static normalizeText(e){return e.replace(Ye.fixNewLines,`
`).split(`
`).map(n=>n||" ").join(`
`)}static assertShapeHasProperty(e,n){if(e[n]===void 0)throw new Error}static warn(e){E9&&console.warn(e)}static error(e){E9&&console.error(e)}},K=Ye;b(K,"copyStringToClipboard",e=>{try{navigator.clipboard.writeText(e)}catch{const o=document.createElement("textarea");o.setAttribute("position","fixed"),o.setAttribute("top","0"),o.setAttribute("readonly","true"),o.setAttribute("contenteditable","true"),o.style.position="fixed",o.value=e,document.body.appendChild(o),o.focus(),o.select();try{const s=document.createRange();s.selectNodeContents(o);const l=window.getSelection();l&&(l.removeAllRanges(),l.addRange(s),o.setSelectionRange(0,o.value.length))}catch{}finally{document.body.removeChild(o)}}}),b(K,"flattenShape",(e,n)=>{var o;return[n,...((o=n.children)!=null?o:[]).map(s=>Ye.getShape(e,s,e.appState.currentPageId)).sort((s,l)=>s.childIndex-l.childIndex).flatMap(s=>Ye.flattenShape(e,s))]}),b(K,"flattenPage",(e,n)=>Object.values(e.document.pages[n].shapes).sort((o,s)=>o.childIndex-s.childIndex).reduce((o,s)=>[...o,...Ye.flattenShape(e,s)],[])),b(K,"getTopChildIndex",(e,n)=>{const o=Ye.getShapes(e,n);return o.length===0?1:o.filter(s=>s.parentId===n).sort((s,l)=>l.childIndex-s.childIndex)[0].childIndex+1}),b(K,"fixNewLines",/\r?\n|\r/g);function w6(e,n,o){const{currentPageId:s}=e,l=n.map(L=>e.getShape(L)),c=l.map(L=>({id:L.id,point:[...L.point],bounds:K.getBounds(L)})),d=B.getCommonBounds(c.map(({bounds:L})=>L)),C=d.minX+d.width/2,g=d.minY+d.height/2,m=Object.fromEntries(c.map(({id:L,point:S,bounds:R})=>[L,{prev:S,next:{centerVertical:[S[0],g-R.height/2],centerHorizontal:[C-R.width/2,S[1]],top:[S[0],d.minY],bottom:[S[0],d.maxY-R.height],left:[d.minX,S[1]],right:[d.maxX-R.width,S[1]]}[o]}])),{before:_,after:y}=K.mutateShapes(e.state,n,L=>m[L.id]?{point:m[L.id].next}:L,s);return l.forEach(L=>{if(L.type==="group"){const S=M.sub(y[L.id].point,_[L.id].point);L.children.forEach(R=>{const $=e.getShape(R);_[$.id]={point:$.point},y[$.id]={point:M.add($.point,S)}}),delete _[L.id],delete y[L.id]}}),{id:"align",before:{document:{pages:{[s]:{shapes:_}},pageStates:{[s]:{selectedIds:n}}}},after:{document:{pages:{[s]:{shapes:y}},pageStates:{[s]:{selectedIds:n}}}}}}function b6(e,n){return{id:"change_page",before:{appState:{currentPageId:e.currentPageId}},after:{appState:{currentPageId:n}}}}function x6(e,n,o=B.uniqueId()){const{currentPageId:s}=e,l=Object.values(e.state.document.pages).sort((m,_)=>(_.childIndex||0)-(m.childIndex||0))[0],c=(l==null?void 0:l.childIndex)?(l==null?void 0:l.childIndex)+1:1,C={id:o,name:"New Page",childIndex:c,shapes:{},bindings:{}},g={id:o,selectedIds:[],camera:{point:n,zoom:1},editingId:void 0,bindingId:void 0,hoveredId:void 0,pointedId:void 0};return{id:"create_page",before:{appState:{currentPageId:s},document:{pages:{[o]:void 0},pageStates:{[o]:void 0}}},after:{appState:{currentPageId:C.id},document:{pages:{[o]:C},pageStates:{[o]:g}}}}}function L9(e,n,o=[]){const{currentPageId:s}=e,l={},c={};n.forEach(g=>{l[g.id]=void 0,c[g.id]=g});const d={},C={};return o.forEach(g=>{d[g.id]=void 0,C[g.id]=g}),{id:"create",before:{document:{pages:{[s]:{shapes:l,bindings:d}},pageStates:{[s]:{selectedIds:[...e.selectedIds]}}}},after:{document:{pages:{[s]:{shapes:c,bindings:C}},pageStates:{[s]:{selectedIds:n.map(g=>g.id)}}}}}}function y6(e,n){const{currentPageId:o,document:{pages:s,pageStates:l}}=e,c=Object.values(s).sort((g,m)=>(g.childIndex||0)-(m.childIndex||0)),d=c.findIndex(g=>g.id===n);let C;return n===o?d===c.length-1?C=c[c.length-2].id:C=c[d+1].id:C=o,{id:"delete_page",before:{appState:{currentPageId:n},document:{pages:{[n]:V({},s[n])},pageStates:{[n]:V({},l[n])}}},after:{appState:{currentPageId:C},document:{pages:{[n]:void 0},pageStates:{[n]:void 0}}}}}function E6(e,n,o){const s={shapes:{},bindings:{}},l={shapes:{},bindings:{}},c=[],d=new Set,C=new Set;n.filter(m=>!K.getShape(e,m,o).isLocked).forEach(m=>{d.add(m);const _=K.getShape(e,m,o);s.shapes[m]=_,l.shapes[m]=void 0,_.children!==void 0&&_.children.forEach(y=>{d.add(y);const L=K.getShape(e,y,o);s.shapes[y]=L,l.shapes[y]=void 0}),_.parentId!==o&&c.push(K.getShape(e,_.parentId,o)),_.assetId&&C.add(_.assetId)}),c.forEach(m=>{var _;n.includes(m.id)||(d.add(m.id),s.shapes[m.id]={children:m.children},l.shapes[m.id]={children:m.children.filter(y=>!n.includes(y))},((_=l.shapes[m.id])==null?void 0:_.children.length)===0&&(l.shapes[m.id]=void 0,s.shapes[m.id]=K.getShape(e,m.id,o)))});const g=K.getPage(e,o);return Object.values(g.bindings).filter(m=>d.has(m.fromId)||d.has(m.toId)).forEach(m=>{for(const _ of[m.toId,m.fromId])if(l.shapes[_]===void 0){s.bindings[m.id]=m,l.bindings[m.id]=void 0;const y=g.shapes[_];y&&y.handles&&Object.values(y.handles).filter(L=>L.bindingId===m.id).forEach(L=>{var S,R,$,k,T,H;s.shapes[_]=Y(V({},s.shapes[_]),{handles:Y(V({},(S=s.shapes[_])==null?void 0:S.handles),{[L.id]:Y(V({},($=(R=s.shapes[_])==null?void 0:R.handles)==null?void 0:$[L.id]),{bindingId:m.id})})}),d.has(_)||(l.shapes[_]=Y(V({},l.shapes[_]),{handles:Y(V({},(k=l.shapes[_])==null?void 0:k.handles),{[L.id]:Y(V({},(H=(T=l.shapes[_])==null?void 0:T.handles)==null?void 0:H[L.id]),{bindingId:void 0})})}))})}}),Object.values(e.document.pages).flatMap(m=>Object.values(m.shapes)).forEach(m=>{"assetId"in m&&m.assetId&&!d.has(m.id)&&C.delete(m.assetId)}),{before:s,after:l,assetsToRemove:Array.from(C)}}var L6=(e,n)=>{const o=V({},e);return n.forEach(s=>o[s]=void 0),o};function S9(e,n,o=e.currentPageId){const{pageState:s,selectedIds:l,document:{assets:c}}=e,{before:d,after:C,assetsToRemove:g}=E6(e.state,n,o),m=L6(c,g);return{id:"delete",before:{document:{assets:c,pages:{[o]:d},pageStates:{[o]:{selectedIds:[...e.selectedIds]}}}},after:{document:{assets:m,pages:{[o]:C},pageStates:{[o]:{selectedIds:l.filter(_=>!n.includes(_)),hoveredId:s.hoveredId&&n.includes(s.hoveredId)?void 0:s.hoveredId}}}}}}function S6(e,n,o){const{currentPageId:s}=e,l=n.map(g=>e.getShape(g)),c=Object.fromEntries(R6(l,o).map(g=>[g.id,g])),{before:d,after:C}=K.mutateShapes(e.state,n.filter(g=>c[g]!==void 0),g=>({point:c[g.id].next}),s);return l.forEach(g=>{if(g.type==="group"){const m=re.sub(C[g.id].point,d[g.id].point);g.children.forEach(_=>{const y=e.getShape(_);d[y.id]={point:y.point},C[y.id]={point:re.add(y.point,m)}}),delete d[g.id],delete C[g.id]}}),{id:"distribute",before:{document:{pages:{[s]:{shapes:d}},pageStates:{[s]:{selectedIds:n}}}},after:{document:{pages:{[s]:{shapes:C}},pageStates:{[s]:{selectedIds:n}}}}}}function R6(e,n){const o=e.map(d=>{const C=K.getShapeUtil(d);return{id:d.id,point:[...d.point],bounds:C.getBounds(d),center:C.getCenter(d)}}),s=o.length,l=B.getCommonBounds(o.map(({bounds:d})=>d)),c=[];switch(n){case"horizontal":{const d=o.reduce((C,g)=>C+g.bounds.width,0);if(d>l.width){const C=o.sort((L,S)=>L.bounds.minX-S.bounds.minX)[0],g=o.sort((L,S)=>S.bounds.maxX-L.bounds.maxX)[0],m=o.filter(L=>L!==C&&L!==g).sort((L,S)=>L.center[0]-S.center[0]),_=(g.center[0]-C.center[0])/(s-1),y=C.center[0]+_;m.forEach(({id:L,point:S,bounds:R},$)=>{c.push({id:L,prev:S,next:[y+_*$-R.width/2,R.minY]})})}else{const C=o.sort((_,y)=>_.center[0]-y.center[0]);let g=l.minX;const m=(l.width-d)/(s-1);C.forEach(({id:_,point:y,bounds:L})=>{c.push({id:_,prev:y,next:[g,L.minY]}),g+=L.width+m})}break}case"vertical":{const d=o.reduce((C,g)=>C+g.bounds.height,0);if(d>l.height){const C=o.sort((L,S)=>L.bounds.minY-S.bounds.minY)[0],g=o.sort((L,S)=>S.bounds.maxY-L.bounds.maxY)[0],m=o.filter(L=>L!==C&&L!==g).sort((L,S)=>L.center[1]-S.center[1]),_=(g.center[1]-C.center[1])/(s-1),y=C.center[1]+_;m.forEach(({id:L,point:S,bounds:R},$)=>{c.push({id:L,prev:S,next:[R.minX,y+_*$-R.height/2]})})}else{const C=o.sort((_,y)=>_.center[1]-y.center[1]);let g=l.minY;const m=(l.height-d)/(s-1);C.forEach(({id:_,point:y,bounds:L})=>{c.push({id:_,prev:y,next:[L.minX,g]}),g+=L.height+m})}break}}return c}function M6(e,n){const o=B.uniqueId(),{currentPageId:s,page:l,pageState:{camera:c}}=e,d=Y(V({},l),{id:o,name:l.name+" Copy",shapes:Object.fromEntries(Object.entries(l.shapes).map(([C,g])=>[C,Y(V({},g),{parentId:g.parentId===n?o:g.parentId})]))});return{id:"duplicate_page",before:{appState:{currentPageId:s},document:{pages:{[o]:void 0},pageStates:{[o]:void 0}}},after:{appState:{currentPageId:o},document:{pages:{[o]:d},pageStates:{[o]:Y(V({},l),{id:o,selectedIds:[],camera:V({},c),editingId:void 0,bindingId:void 0,hoveredId:void 0,pointedId:void 0})}}}}}function I6(e,n,o){const{selectedIds:s,currentPageId:l,page:c,shapes:d}=e,C={shapes:{},bindings:{}},g={shapes:{},bindings:{}},m={},_=n.map(S=>e.getShape(S)).filter(S=>!n.includes(S.parentId));_.forEach(S=>{const R=B.uniqueId();if(C.shapes[R]=void 0,g.shapes[R]=Y(V({},B.deepClone(S)),{id:R,childIndex:K.getChildIndexAbove(e.state,S.id,l)}),S.children&&(g.shapes[R].children=[]),S.parentId!==l){const $=e.getShape(S.parentId);C.shapes[$.id]=Y(V({},C.shapes[$.id]),{children:$.children}),g.shapes[$.id]=Y(V({},g.shapes[$.id]),{children:[...(g.shapes[$.id]||$).children,R]})}m[S.id]=R}),_.forEach(S=>{S.children&&S.children.forEach(R=>{var $,k;const T=e.getShape(R),H=B.uniqueId(),Z=m[S.id];C.shapes[H]=void 0,g.shapes[H]=Y(V({},B.deepClone(T)),{id:H,parentId:Z,childIndex:K.getChildIndexAbove(e.state,T.id,l)}),m[R]=H,(k=($=g.shapes[m[S.id]])==null?void 0:$.children)==null||k.push(H)})});const y=new Set(Object.keys(m));Object.values(c.bindings).filter(S=>y.has(S.fromId)||y.has(S.toId)).forEach(S=>{if(y.has(S.fromId))if(y.has(S.toId)){const R=B.uniqueId(),$=Y(V({},B.deepClone(S)),{id:R,fromId:m[S.fromId],toId:m[S.toId]});C.bindings[R]=void 0,g.bindings[R]=$;const k=g.shapes[$.fromId];Object.values(k.handles).forEach(T=>{T.bindingId===S.id&&(T.bindingId=R)})}else{const R=g.shapes[m[S.fromId]];Object.values(R.handles).forEach($=>{$.bindingId===S.id&&($.bindingId=void 0)})}});const L=Object.values(g.shapes);if(o){const S=B.getCommonBounds(L.map($=>K.getBounds($))),R=B.getBoundsCenter(S);L.forEach($=>{!$.point||($.point=M.sub(o,M.sub(R,$.point)))})}else{const S=[16,16];L.forEach(R=>{!R.point||(R.point=M.add(R.point,S))})}return L.forEach(S=>{S.isLocked&&(S.isLocked=!1)}),{id:"duplicate",before:{document:{pages:{[l]:C},pageStates:{[l]:{selectedIds:s}}}},after:{document:{pages:{[l]:g},pageStates:{[l]:{selectedIds:Array.from(y.values()).map(S=>m[S])}}}}}}function R9(e,n,o){const{selectedIds:s,currentPageId:l,shapes:c}=e,d=c.map(_=>K.getBounds(_)),C=B.getCommonBounds(d),{before:g,after:m}=K.mutateShapes(e.state,n,_=>{const y=K.getBounds(_);switch(o){case"horizontal":{const L=B.getRelativeTransformedBoundingBox(C,C,y,!0,!1);return K.getShapeUtil(_).transform(_,L,{type:fn.TopLeft,scaleX:-1,scaleY:1,initialShape:_,transformOrigin:[.5,.5]})}case"vertical":{const L=B.getRelativeTransformedBoundingBox(C,C,y,!1,!0);return K.getShapeUtil(_).transform(_,L,{type:fn.TopLeft,scaleX:1,scaleY:-1,initialShape:_,transformOrigin:[.5,.5]})}}},l);return{id:"flip",before:{document:{pages:{[l]:{shapes:g}},pageStates:{[l]:{selectedIds:s}}}},after:{document:{pages:{[l]:{shapes:m}},pageStates:{[l]:{selectedIds:n}}}}}}function P6(e,n,o,s){var l,c;if(n.length<2)return;const d={},C={},g={},m={},_=[...n],y=[],L=[],S=[];for(const j of n){const X=e.getShape(j);if(!X.isLocked)if(X.children===void 0)y.push(X);else{const F=X.children.filter(q=>!e.getShape(q).isLocked);S.push(X),_.push(...F),y.push(...F.map(q=>e.getShape(q)).filter(Boolean))}}if(y.every(j=>j.parentId===y[0].parentId)&&y[0].parentId!==s&&((l=e.getShape(y[0].parentId).children)==null?void 0:l.length)===_.length)return;const R=K.flattenPage(e.state,s),$=Object.fromEntries(y.map(j=>[j.id,R.indexOf(j)])),k=y.sort((j,X)=>$[j.id]-$[X.id]),T=s,H=(k.filter(j=>j.parentId===s)[0]||k[0]).childIndex,Z=B.getCommonBounds(y.map(j=>K.getBounds(j)));for(d[o]=void 0,C[o]=K.getShapeUtil("group").create({id:o,childIndex:H,parentId:T,point:[Z.minX,Z.minY],size:[Z.width,Z.height],children:k.map(j=>j.id)}),k.forEach((j,X)=>{if(j.parentId!==s){const F=e.getShape(j.parentId);S.push(F)}d[j.id]=Y(V({},d[j.id]),{parentId:j.parentId,childIndex:j.childIndex}),C[j.id]=Y(V({},C[j.id]),{parentId:o,childIndex:X+1})});S.length>0;){const j=S.pop();if(!j)break;const X=(((c=d[j.id])==null?void 0:c.children)||j.children).filter(F=>F&&!(_.includes(F)||L.includes(F)));X.length===0?(d[j.id]=j,C[j.id]=void 0,j.parentId!==s&&(L.push(j.id),S.push(e.getShape(j.parentId)))):(d[j.id]=Y(V({},d[j.id]),{children:j.children}),C[j.id]=Y(V({},C[j.id]),{children:X}))}const{bindings:z}=e;return z.forEach(j=>{for(const X of[j.toId,j.fromId])if(C[X]===void 0){g[j.id]=j,m[j.id]=void 0;const F=e.getShape(X);F.handles&&Object.values(F.handles).filter(q=>q.bindingId===j.id).forEach(q=>{var fe,Ee;d[X]=Y(V({},d[X]),{handles:Y(V({},(fe=d[X])==null?void 0:fe.handles),{[q.id]:{bindingId:j.id}})}),L.includes(X)||(C[X]=Y(V({},C[X]),{handles:Y(V({},(Ee=C[X])==null?void 0:Ee.handles),{[q.id]:{bindingId:void 0}})}))})}}),{id:"group",before:{document:{pages:{[s]:{shapes:d,bindings:g}},pageStates:{[s]:{selectedIds:n}}}},after:{document:{pages:{[s]:{shapes:C,bindings:g}},pageStates:{[s]:{selectedIds:[o]}}}}}}function $6(e,n,o,s,l){const{page:c}=e,d={before:{shapes:{},bindings:{}},after:{shapes:{},bindings:{}}},C={before:{shapes:{},bindings:{}},after:{shapes:{},bindings:{}}},g=new Set,m=new Set;n.map(H=>e.getShape(H,s)).filter(H=>!H.isLocked).forEach(H=>{g.add(H.id),m.add(H),H.children!==void 0&&H.children.forEach(Z=>{g.add(Z),m.add(e.getShape(Z,s))})});const _=K.getTopChildIndex(e.state,l),y=Array.from(m.values());y.forEach((H,Z)=>{if(d.before.shapes[H.id]=H,d.after.shapes[H.id]=void 0,C.before.shapes[H.id]=void 0,C.after.shapes[H.id]=H,!g.has(H.parentId)&&(C.after.shapes[H.id]=Y(V({},H),{parentId:l,childIndex:_+Z}),H.parentId!==s)){const z=e.getShape(H.parentId,s);d.before.shapes[z.id]={children:z.children},d.after.shapes[z.id]={children:z.children.filter(j=>j!==H.id)}}}),Object.values(c.bindings).filter(H=>g.has(H.fromId)||g.has(H.toId)).forEach(H=>{d.before.bindings[H.id]=H,d.after.bindings[H.id]=void 0;const Z=e.getShape(H.fromId,s);if(g.has(H.fromId)&&g.has(H.toId))C.before.bindings[H.id]=void 0,C.after.bindings[H.id]=H;else if(g.has(H.fromId)){const j=e.getShape(H.fromId,s),F=Object.values(Z.handles).find(fe=>fe.bindingId===H.id).id,q=C.after.shapes[j.id];q.handles=Y(V({},q.handles),{[F]:Y(V({},q.handles[F]),{bindingId:void 0})})}else{const j=e.getShape(H.fromId,s),X=Object.values(Z.handles).find(F=>F.bindingId===H.id);d.before.shapes[j.id]={handles:{[X.id]:{bindingId:H.id}}},d.after.shapes[j.id]={handles:{[X.id]:{bindingId:void 0}}}}});const L=e.state.document.pageStates[l],S=B.getCommonBounds(y.map(H=>K.getBounds(H))),R=K.getCameraZoom(o.width<o.height?(o.width-128)/S.width:(o.height-128)/S.height),$=(o.width-S.width*R)/2/R,k=(o.height-S.height*R)/2/R,T=M.toFixed(M.add([-S.minX,-S.minY],[$,k]));return{id:"move_to_page",before:{appState:{currentPageId:s},document:{pages:{[s]:d.before,[l]:C.before},pageStates:{[s]:{selectedIds:n},[l]:{selectedIds:L.selectedIds,camera:L.camera}}}},after:{appState:{currentPageId:l},document:{pages:{[s]:d.after,[l]:C.after},pageStates:{[s]:{selectedIds:[]},[l]:{selectedIds:n,camera:{zoom:R,point:T}}}}}}}function Ls(e,n,o){const{currentPageId:s,page:l}=e,c=new Set(n.map(_=>e.getShape(_).parentId));let d={before:{},after:{}},C,g,m;return Array.from(c.values()).forEach(_=>{let y=[];if(_===l.id)y=Object.values(l.shapes).sort((R,$)=>R.childIndex-$.childIndex);else{const R=e.getShape(_);if(!R.children)throw Error("No children in parent!");y=R.children.map($=>e.getShape($)).sort(($,k)=>$.childIndex-k.childIndex)}const L=y.map(R=>R.id),S=n.filter(R=>L.includes(R)).map(R=>L.indexOf(R)).sort((R,$)=>R-$);if(S.length!==L.length)switch(o){case"toBack":{for(let R=0;R<L.length;R++)if(!S.includes(R)){C=R;break}g=y[C].childIndex,m=g/(S.length+1),d=K.mutateShapes(e.state,S.map(R=>y[R].id).reverse(),(R,$)=>({childIndex:g-($+1)*m}),s);break}case"toFront":{for(let R=L.length-1;R>=0;R--)if(!S.includes(R)){C=R;break}g=y[C].childIndex,m=1,d=K.mutateShapes(e.state,S.map(R=>y[R].id),(R,$)=>({childIndex:g+($+1)}),s);break}case"backward":{const R={};for(let $=L.length-1;$>=0;$--)if(S.includes($)){for(let k=$;k>=0;k--)if(!S.includes(k)){const T=y[k].childIndex;let H,Z;k===0?(H=T/2,Z=T/2/($-k+1)):(H=y[k-1].childIndex,Z=(T-H)/($-k+1),H+=Z);for(let z=0;z<$-k;z++)R[y[k+z+1].id]=H+Z*z;break}}Object.values(R).length>0&&(d=K.mutateShapes(e.state,S.map($=>y[$].id),$=>({childIndex:R[$.id]}),s));break}case"forward":{const R={};for(let $=0;$<L.length;$++)if(S.includes($)){for(let k=$;k<L.length;k++)if(!S.includes(k)){g=y[k].childIndex;const T=k===L.length-1?1:(y[k+1].childIndex-g)/(k-$+1);for(let H=0;H<k-$;H++)R[y[$+H].id]=g+T*(H+1);break}}Object.values(R).length>0&&(d=K.mutateShapes(e.state,S.map($=>y[$].id),$=>({childIndex:R[$.id]}),s));break}}}),{id:"move",before:{document:{pages:{[s]:{shapes:d.before}},pageStates:{[s]:{selectedIds:n}}}},after:{document:{pages:{[s]:{shapes:d.after}},pageStates:{[s]:{selectedIds:n}}}}}}function H6(e,n,o){const{page:s}=e;return{id:"rename_page",before:{document:{pages:{[n]:{name:s.name}}}},after:{document:{pages:{[n]:{name:o}}}}}}function M9(e,n,o){const{currentPageId:s}=e,{before:l,after:c}=K.mutateShapes(e.state,n,d=>{var C,g;return(g=(C=e.getShapeUtil(d)).onDoubleClickBoundsHandle)==null?void 0:g.call(C,d)},o);return{id:"reset_bounds",before:{document:{pages:{[s]:{shapes:l}},pageStates:{[s]:{selectedIds:n}}}},after:{document:{pages:{[s]:{shapes:c}},pageStates:{[s]:{selectedIds:n}}}}}}var O6=Math.PI*2;function k6(e,n,o=-O6/4){const{currentPageId:s}=e,l={},c={},d=n.flatMap(g=>{const m=e.getShape(g);return m.children?m.children.map(_=>e.getShape(_)):m}).filter(g=>!g.isLocked),C=B.getBoundsCenter(B.getCommonBounds(d.map(g=>K.getBounds(g))));return d.forEach(g=>{const m=K.getRotatedShapeMutation(g,K.getCenter(g),C,o);!m||(l[g.id]=K.getBeforeShape(g,m),c[g.id]=m)}),{id:"rotate",before:{document:{pages:{[s]:{shapes:l}},pageStates:{[s]:{selectedIds:n}}}},after:{document:{pages:{[s]:{shapes:c}},pageStates:{[s]:{selectedIds:n}}}}}}function T6(e,n,o){const{currentPageId:s,selectedIds:l}=e,c=n.map(y=>e.getShape(y)),d=c.map(y=>K.getBounds(y)),C=B.getCommonBounds(d),g=n.flatMap(y=>{const L=e.getShape(y);return L.children?L.children:L.id}).filter(y=>!e.getShape(y).isLocked),{before:m,after:_}=K.mutateShapes(e.state,g,y=>{const L=K.getBounds(y);switch(o){case"horizontal":{const S=Y(V({},L),{minX:C.minX,maxX:C.maxX,width:C.width});return K.getShapeUtil(y).transformSingle(y,S,{type:fn.TopLeft,scaleX:S.width/L.width,scaleY:1,initialShape:y,transformOrigin:[.5,.5]})}case"vertical":{const S=Y(V({},L),{minY:C.minY,maxY:C.maxY,height:C.height});return K.getShapeUtil(y).transformSingle(y,S,{type:fn.TopLeft,scaleX:1,scaleY:S.height/L.height,initialShape:y,transformOrigin:[.5,.5]})}}},s);return c.forEach(y=>{y.type==="group"&&(delete m[y.id],delete _[y.id])}),{id:"stretch",before:{document:{pages:{[s]:{shapes:m}},pageStates:{[s]:{selectedIds:l}}}},after:{document:{pages:{[s]:{shapes:_}},pageStates:{[s]:{selectedIds:n}}}}}}function B6(e,n,o){const{currentPageId:s,selectedIds:l}=e,c=n.flatMap(g=>K.getDocumentBranch(e.state,g,s)).filter(g=>!e.getShape(g).isLocked),d={},C={};return c.map(g=>e.getShape(g)).filter(g=>!g.isLocked).forEach(g=>{d[g.id]={style:V({},Object.fromEntries(Object.keys(o).map(m=>[m,g.style[m]])))},C[g.id]={style:o},g.type==="text"&&(d[g.id].point=g.point,C[g.id].point=M.toFixed(M.add(g.point,M.sub(e.getShapeUtil(g).getCenter(g),e.getShapeUtil(g).getCenter(Y(V({},g),{style:V(V({},g.style),o)}))))))}),{id:"style",before:{document:{pages:{[s]:{shapes:d}},pageStates:{[s]:{selectedIds:l}}},appState:{currentStyle:V({},e.appState.currentStyle)}},after:{document:{pages:{[s]:{shapes:C}},pageStates:{[s]:{selectedIds:n}}},appState:{currentStyle:o}}}}function V6(e,n,o){const{currentPageId:s,selectedIds:l}=e,c=Object.fromEntries(n.map(C=>{var g;return[C,{decorations:{[o]:(g=e.getShape(C).decorations)==null?void 0:g[o]}}]})),d=Object.fromEntries(n.filter(C=>!e.getShape(C).isLocked).map(C=>{var g;return[C,{decorations:{[o]:((g=e.getShape(C).decorations)==null?void 0:g[o])?void 0:"arrow"}}]}));return{id:"toggle_decorations",before:{document:{pages:{[s]:{shapes:c}},pageStates:{[s]:{selectedIds:l}}}},after:{document:{pages:{[s]:{shapes:d}},pageStates:{[s]:{selectedIds:n}}}}}}function tl(e,n,o){const{currentPageId:s}=e,l=n.map(g=>e.getShape(g)).filter(g=>o==="isLocked"?!0:!g.isLocked),c=l.every(g=>g[o]),d={},C={};return l.forEach(g=>{d[g.id]={[o]:g[o]},C[g.id]={[o]:!c}}),{id:"toggle",before:{document:{pages:{[s]:{shapes:d}},pageStates:{[s]:{selectedIds:n}}}},after:{document:{pages:{[s]:{shapes:C}},pageStates:{[s]:{selectedIds:n}}}}}}function D6(e,n,o){const{currentPageId:s,selectedIds:l}=e;e.rotationInfo.selectedIds=[...l];const c={shapes:{},bindings:{}},d={shapes:{},bindings:{}},C=n.flatMap(_=>{const y=e.getShape(_);return y.children?y.children:y.id}).filter(_=>!e.getShape(_).isLocked),g=K.mutateShapes(e.state,C,_=>({point:M.toFixed(M.add(_.point,o))}),s);return c.shapes=g.before,d.shapes=g.after,K.getBindings(e.state,s).filter(_=>n.includes(_.fromId)&&!n.includes(_.toId)).forEach(_=>{c.bindings[_.id]=_,d.bindings[_.id]=void 0;for(const y of[_.toId,_.fromId]){const L=e.getShape(y);!L.handles||Object.values(L.handles).filter(S=>S.bindingId===_.id).forEach(S=>{var R,$;c.shapes[y]=Y(V({},c.shapes[y]),{handles:Y(V({},(R=c.shapes[y])==null?void 0:R.handles),{[S.id]:{bindingId:_.id}})}),d.shapes[y]=Y(V({},d.shapes[y]),{handles:Y(V({},($=d.shapes[y])==null?void 0:$.handles),{[S.id]:{bindingId:void 0}})})})}}),{id:"translate",before:{document:{pages:{[s]:c},pageStates:{[s]:{selectedIds:n}}}},after:{document:{pages:{[s]:d},pageStates:{[s]:{selectedIds:n}}}}}}function j6(e,n,o,s){const{bindings:l}=e,c={},d={},C={},g={},m=n,_=n.filter(y=>!o.find(L=>L.id===y));return o.filter(y=>!y.isLocked).forEach(y=>{const L=[],S=[];c[y.id]=y,d[y.id]=void 0,y.children.forEach(H=>{_.push(H);const Z=e.getShape(H,s);L.push(Z)});const R=y.childIndex,k=(K.getChildIndexAbove(e.state,y.id,s)-R)/L.length;L.sort((H,Z)=>H.childIndex-Z.childIndex).forEach((H,Z)=>{c[H.id]={parentId:H.parentId,childIndex:H.childIndex},d[H.id]={parentId:s,childIndex:R+k*Z}}),l.filter(H=>H.toId===y.id||H.fromId===y.id).forEach(H=>{for(const Z of[H.toId,H.fromId])if(d[Z]===void 0){C[H.id]=H,g[H.id]=void 0;const z=e.getShape(Z,s);z.handles&&Object.values(z.handles).filter(j=>j.bindingId===H.id).forEach(j=>{var X,F;c[Z]=Y(V({},c[Z]),{handles:Y(V({},(X=c[Z])==null?void 0:X.handles),{[j.id]:{bindingId:H.id}})}),S.includes(Z)||(d[Z]=Y(V({},d[Z]),{handles:Y(V({},(F=d[Z])==null?void 0:F.handles),{[j.id]:{bindingId:void 0}})}))})}})}),{id:"ungroup",before:{document:{pages:{[s]:{shapes:c,bindings:C}},pageStates:{[s]:{selectedIds:m}}}},after:{document:{pages:{[s]:{shapes:d,bindings:C}},pageStates:{[s]:{selectedIds:_}}}}}}function A6(e,n,o){const s=n.map(c=>c.id),l=K.mutateShapes(e.state,s.filter(c=>!e.getShape(c,o).isLocked),(c,d)=>n[d],o);return{id:"update",before:{document:{pages:{[o]:{shapes:l.before}}}},after:{document:{pages:{[o]:{shapes:l.after}}}}}}function Z6(e,n,o){const{currentPageId:s,selectedIds:l}=e,c=n.map(m=>e.getShape(m)).filter(m=>o.isLocked?!0:!m.isLocked),d={},C={},g=Object.keys(o);return c.forEach(m=>{d[m.id]=Object.fromEntries(g.map(_=>[_,m[_]])),C[m.id]=o}),{id:"set_props",before:{document:{pages:{[s]:{shapes:d}},pageStates:{[s]:{selectedIds:l}}}},after:{document:{pages:{[s]:{shapes:C}},pageStates:{[s]:{selectedIds:l}}}}}}var Jr=class{constructor(e){this.app=e}},W6=class extends Jr{constructor(e,n,o,s=!1){super(e);b(this,"type","arrow"),b(this,"performanceMode"),b(this,"status","translatingHandle"),b(this,"newStartBindingId",B.uniqueId()),b(this,"draggedBindingId",B.uniqueId()),b(this,"didBind",!1),b(this,"initialShape"),b(this,"handleId"),b(this,"bindableShapeIds"),b(this,"initialBinding"),b(this,"startBindingShapeId"),b(this,"isCreate"),b(this,"start",()=>{}),b(this,"update",()=>{var y,L,S;const{initialShape:R}=this,{currentPoint:$,shiftKey:k,altKey:T,metaKey:H,currentGrid:Z,settings:{showGrid:z}}=this.app,j=this.app.getShape(R.id);if(j.isLocked)return;const X=j.handles,F=this.handleId;if(!X[F].canBind)return;let q=M.sub($,X[F].point);if(k){const me=X[F==="start"?"end":"start"].point,st=X[F].point,E1=M.toFixed(M.sub(M.add(st,q),j.point)),k1=M.angle(me,E1),Un=M.rotWith(E1,me,B.snapAngleToSegments(k1,24)-k1);q=M.add(q,M.sub(Un,E1))}const fe=M.sub(M.add(X[F].point,q),j.point),Ee=Y(V({},X[F]),{point:z?M.snap(fe,Z):M.toFixed(fe),bindingId:void 0}),qe=Io.arrow,we=(y=qe.onHandleChange)==null?void 0:y.call(qe,j,{[F]:Ee});if(!we)return;const Re={shape:B.deepMerge(j,we),bindings:{}};let Ct;const kt=Re.shape.handles[this.handleId],Oe=Re.shape.handles[this.handleId==="start"?"end":"start"];if(this.startBindingShapeId){let me;const st=this.app.page.shapes[this.startBindingShapeId],E1=K.getShapeUtil(st),k1=E1.getCenter(st),Un=Re.shape.handles.start,gi=Re.shape.handles.end,A1=M.add(Un.point,Re.shape.point);M.isEqual(A1,k1)&&A1[1]++;const gn=k1,Ho=E1.hitTestPoint(st,$),nn=M.uni(M.sub(A1,gn)),Oo=this.app.getBinding(this.newStartBindingId)!==void 0;!H&&!E1.hitTestPoint(st,M.add(Re.shape.point,gi.point))&&(me=this.findBindingPoint(j,st,"start",this.newStartBindingId,k1,gn,nn,Ho)),me&&!Oo?(this.didBind=!0,Re.bindings[this.newStartBindingId]=me,Re.shape=B.deepMerge(Re.shape,{handles:{start:{bindingId:me.id}}})):!me&&Oo&&(this.didBind=!1,Re.bindings[this.newStartBindingId]=void 0,Re.shape=B.deepMerge(R,{handles:{start:{bindingId:void 0}}}))}if(!H){const me=M.add(Oe.point,Re.shape.point),st=M.add(kt.point,Re.shape.point),E1=M.uni(M.sub(st,me)),k1=M.add(Re.shape.point,Re.shape.handles.start.point),Un=M.add(Re.shape.point,Re.shape.handles.end.point),gi=this.bindableShapeIds.map(A1=>this.app.page.shapes[A1]).sort((A1,gn)=>gn.childIndex-A1.childIndex).filter(A1=>{const gn=K.getShapeUtil(A1);return![k1,Un].every(Ho=>gn.hitTestPoint(A1,Ho))});for(const A1 of gi)if(Ct=this.findBindingPoint(j,A1,this.handleId,this.draggedBindingId,st,me,E1,T),Ct)break}if(Ct)this.didBind=!0,Re.bindings[this.draggedBindingId]=Ct,Re.shape=B.deepMerge(Re.shape,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}});else{this.didBind=this.didBind||!1;const me=j.handles[this.handleId].bindingId;me!==void 0&&(Re.bindings[me]=void 0,Re.shape=B.deepMerge(Re.shape,{handles:{[this.handleId]:{bindingId:void 0}}}))}const ut=(S=(L=K.getShapeUtil(Re.shape)).onHandleChange)==null?void 0:S.call(L,Re.shape,Re.shape.handles);return{document:{pages:{[this.app.currentPageId]:{shapes:{[j.id]:V(V({},Re.shape),ut??{})},bindings:Re.bindings}},pageStates:{[this.app.currentPageId]:{bindingId:Re.shape.handles[F].bindingId}}}}}),b(this,"cancel",()=>{const{initialShape:y,initialBinding:L,newStartBindingId:S,draggedBindingId:R}=this,$=K.onSessionComplete(this.app.page.shapes[y.id]),k=this.isCreate||M.dist($.handles.start.point,$.handles.end.point)<4,T={};return T[R]=void 0,L&&(T[L.id]=k?void 0:L),S&&(T[S]=void 0),{document:{pages:{[this.app.currentPageId]:{shapes:{[y.id]:k?void 0:y},bindings:T}},pageStates:{[this.app.currentPageId]:{selectedIds:k?[]:[y.id],bindingId:void 0,hoveredId:void 0,editingId:void 0}}}}}),b(this,"complete",()=>{const{initialShape:y,initialBinding:L,newStartBindingId:S,startBindingShapeId:R,handleId:$}=this,k=K.onSessionComplete(this.app.page.shapes[y.id]),T=k.handles[$].bindingId,H=M.dist(k.handles.start.point,k.handles.end.point);if(!(T||L)&&H<4)return this.cancel();const Z={},z={};return L&&(Z[L.id]=this.isCreate?void 0:L,z[L.id]=void 0),T&&(Z[T]=void 0,z[T]=this.app.page.bindings[T]),R&&(Z[S]=void 0,z[S]=this.app.page.bindings[S]),{id:"arrow",before:{document:{pages:{[this.app.currentPageId]:{shapes:{[y.id]:this.isCreate?void 0:y},bindings:Z}},pageStates:{[this.app.currentPageId]:{selectedIds:this.isCreate?[]:[y.id],bindingId:void 0,hoveredId:void 0,editingId:void 0}}}},after:{document:{pages:{[this.app.currentPageId]:{shapes:{[y.id]:k},bindings:z}},pageStates:{[this.app.currentPageId]:{selectedIds:[y.id],bindingId:void 0,hoveredId:void 0,editingId:void 0}}}}}}),b(this,"findBindingPoint",(y,L,S,R,$,k,T,H)=>{const z=K.getShapeUtil(L.type).getBindingPoint(L,y,$,k,T,H);if(!!z)return{id:R,type:"arrow",fromId:y.id,toId:L.id,handleId:S,point:M.toFixed(z.point),distance:z.distance}});var l,c,d;this.isCreate=s;const{currentPageId:C}=e.state.appState,g=e.state.document.pages[C];this.handleId=o,this.initialShape=qr(g.shapes[n]),this.bindableShapeIds=K.getBindableShapeIds(e.state).filter(y=>!(y===this.initialShape.id||y===this.initialShape.parentId));const m=(l=this.initialShape.handles[o==="start"?"end":"start"])==null?void 0:l.bindingId;if(m){const y=(c=g.bindings[m])==null?void 0:c.toId;y&&(this.bindableShapeIds=this.bindableShapeIds.filter(L=>L!==y))}const{originPoint:_}=this.app;if(this.isCreate)this.startBindingShapeId=(d=this.bindableShapeIds.map(y=>g.shapes[y]).filter(y=>B.pointInBounds(_,K.getShapeUtil(y).getBounds(y))).sort((y,L)=>L.childIndex-y.childIndex)[0])==null?void 0:d.id,this.startBindingShapeId&&this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1);else{const y=this.initialShape.handles[this.handleId].bindingId;y?this.initialBinding=g.bindings[y]:this.initialShape.handles[this.handleId].bindingId=void 0}}},F6=class extends Jr{constructor(e){super(e);b(this,"type","brush"),b(this,"performanceMode"),b(this,"status","brushing"),b(this,"initialSelectedIds"),b(this,"shapesToTest"),b(this,"start",()=>{}),b(this,"update",()=>{const{initialSelectedIds:o,shapesToTest:s,app:{originPoint:l,currentPoint:c}}=this,d=B.getBoundsFromPoints([l,c]),C=new Set,g=new Set(o);s.forEach(({id:L,selectId:S})=>{const{metaKey:R}=this.app,$=this.app.getShape(L);if(!C.has(S)){const k=this.app.getShapeUtil($);(R?B.boundsContain(d,k.getBounds($)):k.hitTestBounds($,d))?(C.add(S),g.has(S)||g.add(S)):g.has(S)&&g.delete(S)}});const m=this.app.selectedIds,y=g.size!==m.length||m.some(L=>!g.has(L))?Array.from(g.values()):m;return{document:{pageStates:{[this.app.currentPageId]:{brush:d,selectedIds:y}}}}}),b(this,"cancel",()=>({document:{pageStates:{[this.app.currentPageId]:{brush:null,selectedIds:Array.from(this.initialSelectedIds.values())}}}})),b(this,"complete",()=>({document:{pageStates:{[this.app.currentPageId]:{brush:null,selectedIds:[...this.app.selectedIds]}}}}));const{currentPageId:n}=e;this.initialSelectedIds=new Set(this.app.selectedIds),this.shapesToTest=this.app.shapes.filter(o=>!(o.isLocked||o.isHidden||o.parentId!==n||this.initialSelectedIds.has(o.id)||this.initialSelectedIds.has(o.parentId))).map(o=>({id:o.id,bounds:this.app.getShapeUtil(o).getBounds(o),selectId:o.id})),this.update()}},z6=class extends Jr{constructor(e,n){super(e);b(this,"type","draw"),b(this,"performanceMode"),b(this,"status","creating"),b(this,"topLeft"),b(this,"points"),b(this,"initialShape"),b(this,"lastAdjustedPoint"),b(this,"shiftedPoints",[]),b(this,"shapeId"),b(this,"isLocked"),b(this,"isExtending"),b(this,"lockedDirection"),b(this,"start",()=>{var g;const m=this.app.originPoint,_=[0,0,(g=m[2])!=null?g:.5];this.points.push(_);const y=[Math.min(this.topLeft[0],m[0]),Math.min(this.topLeft[1],m[1])],L=M.sub(y,m);return this.topLeft=y,this.shiftedPoints=this.points.map(S=>M.toFixed(M.sub(S,L)).concat(S[2])),{document:{pages:{[this.app.currentPageId]:{shapes:{[this.shapeId]:{point:this.topLeft,points:this.shiftedPoints}}}},pageStates:{[this.app.currentPageId]:{selectedIds:[this.shapeId]}}}}}),b(this,"update",()=>{const{shapeId:g}=this,{currentPoint:m,originPoint:_,shiftKey:y}=this.app;if(!this.lockedDirection&&this.points.length>1){const S=B.getBoundsFromPoints(this.points);(S.width>8||S.height>8)&&(this.lockedDirection=S.width>S.height?"horizontal":"vertical")}if(y){if(!this.isLocked&&this.points.length>2){if(!this.lockedDirection){const R=B.getBoundsFromPoints(this.points);this.lockedDirection=R.width>R.height?"horizontal":"vertical"}this.isLocked=!0;const S=[...this.lastAdjustedPoint];this.lockedDirection==="vertical"?S[0]=0:S[1]=0,this.points.push(S.concat(m[2]))}}else this.isLocked&&(this.isLocked=!1);this.isLocked&&(this.lockedDirection==="vertical"?m[0]=_[0]:m[1]=_[1]);const L=this.addPoint(m);if(!!L)return{document:{pages:{[this.app.currentPageId]:{shapes:{[g]:L}}},pageStates:{[this.app.currentPageId]:{selectedIds:[g]}}}}}),b(this,"cancel",()=>{const{shapeId:g}=this,m=this.app.currentPageId;return{document:{pages:{[m]:{shapes:{[g]:this.isExtending?this.initialShape:void 0}}},pageStates:{[m]:{selectedIds:[]}}}}}),b(this,"complete",()=>{const{shapeId:g}=this,m=this.app.currentPageId,_=this.app.getShape(g);return{id:"create_draw",before:{document:{pages:{[m]:{shapes:{[g]:this.isExtending?this.initialShape:void 0}}},pageStates:{[m]:{selectedIds:[]}}}},after:{document:{pages:{[m]:{shapes:{[g]:Y(V({},_),{point:M.toFixed(_.point),points:_.points.map(y=>M.toFixed(y)),isComplete:!0})}}},pageStates:{[this.app.currentPageId]:{selectedIds:[]}}}}}}),b(this,"addPoint",g=>{const{originPoint:m}=this.app,_=M.toFixed(M.sub(g,m)).concat(g[2]);if(M.isEqual(this.lastAdjustedPoint,_))return;this.points.push(_),this.lastAdjustedPoint=_;const y=[...this.topLeft],L=[Math.min(this.topLeft[0],g[0]),Math.min(this.topLeft[1],g[1])],S=M.sub(L,m);let R;return y[0]!==L[0]||y[1]!==L[1]?(this.topLeft=L,R=this.points.map($=>M.toFixed(M.sub($,S)).concat($[2]))):R=[...this.shiftedPoints,M.sub(_,S).concat(_[2])],this.shiftedPoints=R,{point:this.topLeft,points:R}});var o;const{originPoint:s}=this.app;this.shapeId=n,this.initialShape=this.app.getShape(n),this.topLeft=[...this.initialShape.point];const l=[0,0,(o=s[2])!=null?o:.5],c=M.sub(s,this.topLeft),d=this.initialShape.points.map(g=>M.sub(g,c).concat(g[2]));this.isExtending=d.length>0;const C=[];if(this.isExtending){const g=d[d.length-1];C.push(g,g);const m=Math.ceil(M.dist(g,l)/16);for(let _=0;_<m;_++){const y=_/(m-1);C.push(M.lrp(g,l,y).concat(g[2]))}}else C.push(l);this.points=[...d,...C],this.shiftedPoints=this.points.map(g=>M.add(g,c).concat(g[2])),this.lastAdjustedPoint=this.points[this.points.length-1]}},U6=class extends Jr{constructor(e,n,o,s="move_handle"){super(e);b(this,"type","handle"),b(this,"performanceMode"),b(this,"status","translatingHandle"),b(this,"commandId"),b(this,"topLeft"),b(this,"shiftKey",!1),b(this,"initialShape"),b(this,"handleId"),b(this,"start",()=>{}),b(this,"update",()=>{var c,d;const{initialShape:C,app:{currentPageId:g,currentPoint:m,shiftKey:_,altKey:y,metaKey:L}}=this,S=this.app.getShape(C.id);if(S.isLocked)return;const R=S.handles,$=this.handleId,k=M.sub(m,R[$].point),T=Y(V({},R[$]),{point:M.sub(M.add(R[$].point,k),S.point)}),H=(d=(c=K.getShapeUtil(S)).onHandleChange)==null?void 0:d.call(c,S,{[$]:T});if(!!H)return{document:{pages:{[g]:{shapes:{[S.id]:H}}}}}}),b(this,"cancel",()=>{const{initialShape:c,app:{currentPageId:d}}=this;return{document:{pages:{[d]:{shapes:{[c.id]:c}}}}}}),b(this,"complete",()=>{const{initialShape:c,app:{currentPageId:d}}=this;return{id:this.commandId,before:{document:{pages:{[d]:{shapes:{[c.id]:c}}}}},after:{document:{pages:{[d]:{shapes:{[c.id]:K.onSessionComplete(this.app.getShape(this.initialShape.id))}}}}}}});const{originPoint:l}=e;this.topLeft=[...l],this.handleId=o,this.initialShape=this.app.getShape(n),this.commandId=s}},N6=class extends Jr{constructor(e){super(e);b(this,"type","rotate"),b(this,"status","transforming"),b(this,"performanceMode"),b(this,"delta",[0,0]),b(this,"commonBoundsCenter"),b(this,"initialAngle"),b(this,"initialShapes"),b(this,"changes",{}),b(this,"start",()=>{}),b(this,"update",()=>{const{commonBoundsCenter:c,initialShapes:d,app:{currentPageId:C,currentPoint:g,shiftKey:m}}=this,_={};let y=M.angle(c,g)-this.initialAngle;return m&&(y=B.snapAngleToSegments(y,24)),d.forEach(({center:L,shape:S})=>{const{rotation:R=0}=S;let $=0;m&&($=B.snapAngleToSegments(R,24)-R);const k=K.getRotatedShapeMutation(S,L,c,m?y+$:y);k&&(_[S.id]=k)}),this.changes=_,{document:{pages:{[C]:{shapes:_}}}}}),b(this,"cancel",()=>{const{initialShapes:c,app:{currentPageId:d}}=this,C={};return c.forEach(({shape:g})=>C[g.id]=g),{document:{pages:{[d]:{shapes:C}}}}}),b(this,"complete",()=>{const{initialShapes:c,app:{currentPageId:d}}=this,C={},g=this.changes;return c.forEach(({shape:{id:m,point:_,rotation:y,handles:L}})=>{C[m]={point:_,rotation:y,handles:L}}),{id:"rotate",before:{document:{pages:{[d]:{shapes:C}}}},after:{document:{pages:{[d]:{shapes:g}}}}}});const{app:{currentPageId:n,pageState:o,originPoint:s}}=this,l=K.getSelectedBranchSnapshot(e.state,n).filter(c=>!c.isLocked);if(l.length===0)throw Error("No selected shapes!");if(e.rotationInfo.selectedIds===o.selectedIds){if(e.rotationInfo.center===void 0)throw Error("We should have a center for rotation!");this.commonBoundsCenter=e.rotationInfo.center}else this.commonBoundsCenter=B.getBoundsCenter(B.getCommonBounds(l.map(K.getBounds))),e.rotationInfo.selectedIds=o.selectedIds,e.rotationInfo.center=this.commonBoundsCenter;this.initialShapes=l.filter(c=>c.children===void 0).map(c=>({shape:c,center:this.app.getShapeUtil(c).getCenter(c)})),this.initialAngle=M.angle(this.commonBoundsCenter,s)}},K6=class extends Jr{constructor(e,n=fn.BottomRight,o=!1){super(e);this.transformType=n,this.isCreate=o,b(this,"type","transform"),b(this,"performanceMode"),b(this,"status","transforming"),b(this,"scaleX",1),b(this,"scaleY",1),b(this,"initialShapes"),b(this,"initialShapeIds"),b(this,"initialSelectedIds"),b(this,"shapeBounds"),b(this,"hasUnlockedShapes"),b(this,"isAllAspectRatioLocked"),b(this,"initialCommonBounds"),b(this,"snapInfo",{state:"empty"}),b(this,"prevPoint",[0,0]),b(this,"speed",1),b(this,"start",()=>{this.snapInfo={state:"ready",bounds:this.app.shapes.filter(d=>!this.initialShapeIds.includes(d.id)).map(d=>B.getBoundsWithCenter(K.getRotatedBounds(d)))}}),b(this,"update",()=>{const{transformType:d,shapeBounds:C,initialCommonBounds:g,isAllAspectRatioLocked:m,app:{currentPageId:_,pageState:{camera:y},viewport:L,currentPoint:S,previousPoint:R,originPoint:$,shiftKey:k,altKey:T,metaKey:H,currentGrid:Z,settings:{isSnapping:z,showGrid:j}}}=this,X={},F=T?M.mul(M.sub(S,$),2):M.sub(S,$);let q=B.getTransformedBoundingBox(g,d,F,0,k||m);T&&(q=V(V({},q),B.centerBounds(q,B.getBoundsCenter(g)))),j&&(q=V(V({},q),B.snapBoundsToGrid(q,Z)));const Ee=M.dist(S,R)-this.speed;this.speed=this.speed+Ee*(Ee>1?.5:.15);let qe=[];if((z&&!H||!z&&H)&&this.speed*y.zoom<Aa&&this.snapInfo.state==="ready"){const we=B.getSnapPoints(B.getBoundsWithCenter(q),this.snapInfo.bounds.filter(Re=>B.boundsContain(L,Re)||B.boundsCollide(L,Re)),ja/y.zoom);we&&(qe=we.snapLines,q=B.getTransformedBoundingBox(g,d,M.sub(F,we.offset),0,k||m))}return this.scaleX=q.scaleX,this.scaleY=q.scaleY,C.forEach(({initialShape:we,initialShapeBounds:Re,transformOrigin:Ct})=>{let kt=B.getRelativeTransformedBoundingBox(q,g,Re,this.scaleX<0,this.scaleY<0);j&&(kt=B.snapBoundsToGrid(kt,Z));const Oe=K.transform(this.app.getShape(we.id),kt,{type:this.transformType,initialShape:we,scaleX:this.scaleX,scaleY:this.scaleY,transformOrigin:Ct});X[we.id]=Oe}),{appState:{snapLines:qe},document:{pages:{[_]:{shapes:X}}}}}),b(this,"cancel",()=>{const{shapeBounds:d,app:{currentPageId:C}}=this,g={};return this.isCreate?d.forEach(m=>g[m.initialShape.id]=void 0):d.forEach(m=>g[m.initialShape.id]=m.initialShape),{appState:{snapLines:[]},document:{pages:{[C]:{shapes:g}},pageStates:{[C]:{selectedIds:this.isCreate?[]:d.map(m=>m.initialShape.id)}}}}}),b(this,"complete",()=>{const{isCreate:d,shapeBounds:C,hasUnlockedShapes:g,app:{currentPageId:m}}=this;if(!g)return;const _={},y={};let L,S;return d?(L=[],S=[],C.forEach(({initialShape:R})=>{_[R.id]=void 0,y[R.id]=this.app.getShape(R.id)})):(L=this.initialSelectedIds,S=this.initialSelectedIds,C.forEach(({initialShape:R})=>{_[R.id]=R,y[R.id]=this.app.getShape(R.id)})),{id:"transform",before:{appState:{snapLines:[]},document:{pages:{[m]:{shapes:_}},pageStates:{[m]:{selectedIds:L,hoveredId:void 0,editingId:void 0}}}},after:{appState:{snapLines:[]},document:{pages:{[m]:{shapes:y}},pageStates:{[m]:{selectedIds:S,hoveredId:void 0,editingId:void 0}}}}}}),this.initialSelectedIds=[...this.app.selectedIds],this.app.rotationInfo.selectedIds=[...this.initialSelectedIds],this.initialShapes=K.getSelectedBranchSnapshot(this.app.state,this.app.currentPageId).filter(d=>!d.isLocked),this.initialShapeIds=this.initialShapes.map(d=>d.id),this.hasUnlockedShapes=this.initialShapes.length>0,this.isAllAspectRatioLocked=this.initialShapes.every(d=>d.isAspectRatioLocked||K.getShapeUtil(d).isAspectRatioLocked);const s=Object.fromEntries(this.initialShapes.map(d=>[d.id,K.getBounds(d)])),l=Object.values(s);this.initialCommonBounds=B.getCommonBounds(l);const c=B.getBoundsFromPoints(l.map(B.getBoundsCenter));this.shapeBounds=this.initialShapes.map(d=>{const C=s[d.id],g=B.getBoundsCenter(C),m=(g[0]-c.minX)/c.width,_=(g[1]-c.minY)/c.height;return{initialShape:d,initialShapeBounds:C,transformOrigin:[m,_]}})}},X6=class extends Jr{constructor(e,n,o,s=!1){super(e);b(this,"type","transformSingle"),b(this,"status","transforming"),b(this,"performanceMode"),b(this,"transformType"),b(this,"scaleX",1),b(this,"scaleY",1),b(this,"isCreate"),b(this,"initialShape"),b(this,"initialShapeBounds"),b(this,"initialCommonBounds"),b(this,"snapInfo",{state:"empty"}),b(this,"prevPoint",[0,0]),b(this,"speed",1),b(this,"start",()=>{this.snapInfo={state:"ready",bounds:this.app.shapes.filter(c=>c.id!==this.initialShape.id).map(c=>B.getBoundsWithCenter(K.getRotatedBounds(c)))}}),b(this,"update",()=>{const{transformType:c,initialShape:d,initialShapeBounds:C,app:{settings:{isSnapping:g,showGrid:m},currentPageId:_,pageState:{camera:y},viewport:L,currentPoint:S,previousPoint:R,originPoint:$,currentGrid:k,shiftKey:T,altKey:H,metaKey:Z}}=this;if(d.isLocked)return;const z={},j=H?M.mul(M.sub(S,$),2):M.sub(S,$),X=this.app.getShape(d.id),F=K.getShapeUtil(X);let q=B.getTransformedBoundingBox(C,c,j,X.rotation,T||X.isAspectRatioLocked||F.isAspectRatioLocked);H&&(q=V(V({},q),B.centerBounds(q,B.getBoundsCenter(C)))),m&&(q=V(V({},q),B.snapBoundsToGrid(q,k)));const Ee=M.dist(S,R)-this.speed;this.speed=this.speed+Ee*(Ee>1?.5:.15);let qe=[];if((g&&!Z||!g&&Z)&&!d.rotation&&this.speed*y.zoom<Aa&&this.snapInfo.state==="ready"){const Re=B.getSnapPoints(B.getBoundsWithCenter(q),this.snapInfo.bounds.filter(Ct=>B.boundsContain(L,Ct)||B.boundsCollide(L,Ct)),ja/y.zoom);Re&&(qe=Re.snapLines,q=B.getTransformedBoundingBox(C,c,M.sub(j,Re.offset),X.rotation,T||X.isAspectRatioLocked||F.isAspectRatioLocked))}const we=K.getShapeUtil(X).transformSingle(X,q,{initialShape:d,type:this.transformType,scaleX:q.scaleX,scaleY:q.scaleY,transformOrigin:[.5,.5]});return we&&(z[X.id]=we),m&&we&&we.point&&(we.point=M.snap(we.point,k)),{appState:{snapLines:qe},document:{pages:{[_]:{shapes:z}}}}}),b(this,"cancel",()=>{const{initialShape:c,app:{currentPageId:d}}=this,C={};return this.isCreate?C[c.id]=void 0:C[c.id]=c,{appState:{snapLines:[]},document:{pages:{[d]:{shapes:C}},pageStates:{[d]:{selectedIds:this.isCreate?[]:[c.id]}}}}}),b(this,"complete",()=>{const{initialShape:c,app:{currentPageId:d}}=this;if(c.isLocked)return;const C={},g={};return C[c.id]=this.isCreate?void 0:c,g[c.id]=K.onSessionComplete(this.app.getShape(c.id)),{id:"transform_single",before:{appState:{snapLines:[]},document:{pages:{[d]:{shapes:C}},pageStates:{[d]:{selectedIds:this.isCreate?[]:[c.id],editingId:void 0,hoveredId:void 0}}}},after:{appState:{snapLines:[]},document:{pages:{[d]:{shapes:g}},pageStates:{[d]:{selectedIds:[c.id],editingId:void 0,hoveredId:void 0}}}}}}),this.isCreate=s,this.transformType=o;const l=this.app.getShape(n);this.initialShape=l,this.initialShapeBounds=K.getBounds(l),this.initialCommonBounds=K.getRotatedBounds(l),this.app.rotationInfo.selectedIds=[l.id]}},G6=class extends Jr{constructor(e,n=!1,o=!1){super(e);b(this,"performanceMode"),b(this,"type","translate"),b(this,"status","translating"),b(this,"delta",[0,0]),b(this,"prev",[0,0]),b(this,"prevPoint",[0,0]),b(this,"speed",1),b(this,"cloneInfo",{state:"empty"}),b(this,"snapInfo",{state:"empty"}),b(this,"snapLines",[]),b(this,"isCloning",!1),b(this,"isCreate"),b(this,"link"),b(this,"initialIds"),b(this,"hasUnlockedShapes"),b(this,"initialSelectedIds"),b(this,"initialCommonBounds"),b(this,"initialShapes"),b(this,"initialParentChildren"),b(this,"bindingsToDelete"),b(this,"start",()=>{const{bindingsToDelete:g,initialIds:m,app:{currentPageId:_,page:y}}=this,L=[],S=[];if(Object.values(y.shapes).forEach($=>{const k=B.getBoundsWithCenter(K.getRotatedBounds($));L.push(k),m.has($.id)||S.push(k)}),this.snapInfo={state:"ready",bounds:L,others:S},g.length===0)return;const R={};return g.forEach($=>R[$.id]=void 0),{document:{pages:{[_]:{bindings:R}}}}}),b(this,"update",()=>{const{initialParentChildren:g,initialShapes:m,initialCommonBounds:_,bindingsToDelete:y,app:{pageState:{camera:L},settings:{isSnapping:S,showGrid:R},currentPageId:$,viewport:k,selectedIds:T,currentPoint:H,previousPoint:Z,originPoint:z,altKey:j,shiftKey:X,metaKey:F,currentGrid:q}}=this,fe={},Ee={},qe={};let we=M.sub(H,z),Re=!1;this.isCreate||(j&&!this.isCloning?(this.isCloning=!0,Re=!0):!j&&this.isCloning&&(this.isCloning=!1,Re=!0)),X&&(Math.abs(we[0])<Math.abs(we[1])?we[0]=0:we[1]=0);const kt=M.dist(H,Z)-this.speed;if(this.speed=this.speed+kt*(kt>1?.5:.15),this.snapLines=[],(S&&!F||!S&&F)&&this.speed*L.zoom<Aa&&this.snapInfo.state==="ready"){const Oe=B.getSnapPoints(B.getBoundsWithCenter(R?B.snapBoundsToGrid(B.translateBounds(_,we),q):B.translateBounds(_,we)),(this.isCloning?this.snapInfo.bounds:this.snapInfo.others).filter(ut=>B.boundsContain(k,ut)||B.boundsCollide(k,ut)),ja/L.zoom);Oe&&(this.snapLines=Oe.snapLines,we=M.sub(we,Oe.offset))}if(this.prev=we,this.isCloning)if(Re){if(this.cloneInfo.state==="empty"&&this.createCloneInfo(),this.cloneInfo.state==="empty")throw Error;const{clones:Oe,clonedBindings:ut}=this.cloneInfo;this.isCloning=!0,y.forEach(me=>fe[me.id]=me),m.forEach(me=>Ee[me.id]={point:me.point}),Oe.forEach(me=>{var st;if(Ee[me.id]=V({},me),me.parentId!==$&&!T.includes(me.parentId)){const E1=((st=Ee[me.parentId])==null?void 0:st.children)||g[me.parentId];E1.includes(me.id)||(Ee[me.parentId]=Y(V({},Ee[me.parentId]),{children:[...E1,me.id]}))}});for(const me of ut)fe[me.id]=me;qe.selectedIds=Oe.map(me=>me.id),Oe.forEach(me=>{Ee[me.id]=Y(V({},me),{point:R?M.snap(M.toFixed(M.add(me.point,we)),q):M.toFixed(M.add(me.point,we))})})}else{if(this.cloneInfo.state==="empty")throw Error;const{clones:Oe}=this.cloneInfo;Oe.forEach(ut=>{Ee[ut.id]={point:R?M.snap(M.toFixed(M.add(ut.point,we)),q):M.toFixed(M.add(ut.point,we))}})}else if(Re){if(this.cloneInfo.state==="empty")throw Error;const{clones:Oe,clonedBindings:ut}=this.cloneInfo;this.isCloning=!1,y.forEach(me=>fe[me.id]=void 0),Oe.forEach(me=>{me.parentId!==$&&(Ee[me.parentId]=Y(V({},Ee[me.parentId]),{children:g[me.parentId]}))}),Oe.forEach(me=>Ee[me.id]=void 0),m.forEach(me=>{Ee[me.id]={point:R?M.snap(M.toFixed(M.add(me.point,we)),q):M.toFixed(M.add(me.point,we))}});for(const me of ut)fe[me.id]=void 0;qe.selectedIds=m.map(me=>me.id)}else m.forEach(Oe=>{Ee[Oe.id]={point:R?M.snap(M.toFixed(M.add(Oe.point,we)),q):M.toFixed(M.add(Oe.point,we))}});return{appState:{snapLines:this.snapLines},document:{pages:{[$]:{shapes:Ee,bindings:fe}},pageStates:{[$]:qe}}}}),b(this,"cancel",()=>{const{initialShapes:g,initialSelectedIds:m,bindingsToDelete:_,app:{currentPageId:y}}=this,L={},S={},R={editingId:void 0,hoveredId:void 0};if(_.forEach($=>L[$.id]=$),this.isCreate?(g.forEach(({id:$})=>S[$]=void 0),R.selectedIds=[]):(g.forEach(({id:$,point:k})=>S[$]=Y(V({},S[$]),{point:k})),R.selectedIds=m),this.cloneInfo.state==="ready"){const{clones:$,clonedBindings:k}=this.cloneInfo;$.forEach(T=>S[T.id]=void 0),k.forEach(T=>L[T.id]=void 0)}return{appState:{snapLines:[]},document:{pages:{[y]:{shapes:S,bindings:L}},pageStates:{[y]:R}}}}),b(this,"complete",()=>{const{initialShapes:g,initialParentChildren:m,bindingsToDelete:_,app:{currentPageId:y}}=this,L={},S={},R={},$={};if(this.isCloning){if(this.cloneInfo.state==="empty"&&this.createCloneInfo(),this.cloneInfo.state!=="ready")throw Error;const{clones:k,clonedBindings:T}=this.cloneInfo;k.forEach(H=>{S[H.id]=void 0,$[H.id]=this.app.getShape(H.id),H.parentId!==y&&(S[H.parentId]=Y(V({},S[H.parentId]),{children:m[H.parentId]}),$[H.parentId]=Y(V({},$[H.parentId]),{children:this.app.getShape(H.parentId).children}))}),T.forEach(H=>{L[H.id]=void 0,R[H.id]=this.app.getBinding(H.id)})}else g.forEach(k=>{S[k.id]=this.isCreate?void 0:Y(V({},S[k.id]),{point:k.point}),$[k.id]=V(V({},$[k.id]),this.isCreate?this.app.getShape(k.id):{point:this.app.getShape(k.id).point})});return _.forEach(k=>{L[k.id]=k;for(const T of[k.toId,k.fromId]){const H=this.app.getShape(T);!H.handles||Object.values(H.handles).filter(Z=>Z.bindingId===k.id).forEach(Z=>{S[T]=Y(V({},S[T]),{handles:{}}),$[T]=Y(V({},$[T]),{handles:{}}),S[T].handles[Z.id]={bindingId:k.id},$[T].handles[Z.id]={bindingId:void 0}})}}),{id:"translate",before:{appState:{snapLines:[]},document:{pages:{[y]:{shapes:S,bindings:L}},pageStates:{[y]:{selectedIds:this.isCreate?[]:[...this.initialSelectedIds]}}}},after:{appState:{snapLines:[]},document:{pages:{[y]:{shapes:$,bindings:R}},pageStates:{[y]:{selectedIds:[...this.app.selectedIds]}}}}}}),b(this,"createCloneInfo",()=>{const{initialShapes:g,initialParentChildren:m,app:{selectedIds:_,currentPageId:y,page:L}}=this,S={},R={},$=[],k=[];g.forEach(H=>{const Z=B.uniqueId();m[Z]=m[H.id],S[H.id]=Z;const z=Y(V({},B.deepClone(H)),{id:Z,parentId:H.parentId,childIndex:K.getChildIndexAbove(this.app.state,H.id,y)});if(z.type==="video"){const j=document.getElementById(H.id+"_video");j&&(z.currentTime=(j.currentTime+16)%j.duration)}k.push(z)}),k.forEach(H=>{H.children!==void 0&&(H.children=H.children.map(Z=>S[Z]))}),k.forEach(H=>{_.includes(H.parentId)&&(H.parentId=S[H.parentId])});const T=new Set(Object.keys(S));Object.values(L.bindings).filter(H=>T.has(H.fromId)||T.has(H.toId)).forEach(H=>{if(T.has(H.fromId)&&T.has(H.toId)){const Z=B.uniqueId(),z=Y(V({},B.deepClone(H)),{id:Z,fromId:S[H.fromId]||H.fromId,toId:S[H.toId]||H.toId});R[H.id]=Z,$.push(z)}}),k.forEach(H=>{if(H.handles&&H.handles)for(const Z in H.handles){const z=H.handles[Z];z.bindingId=z.bindingId?R[z.bindingId]:void 0}}),k.forEach(H=>{if(L.shapes[H.id])throw Error("uh oh, we didn't clone correctly")}),this.cloneInfo={state:"ready",clones:k,cloneMap:S,clonedBindings:$}}),this.isCreate=n,this.link=o;const{currentPageId:s,selectedIds:l,page:c}=this.app;this.initialSelectedIds=[...l];const d=(o?K.getLinkedShapeIds(this.app.state,s,o,!1):l).map(g=>this.app.getShape(g)).filter(g=>!g.isLocked),C=new Set(d.map(g=>g.id));this.hasUnlockedShapes=d.length>0,this.initialShapes=Array.from(new Set(d.filter(g=>!C.has(g.parentId)).flatMap(g=>g.children?[g,...g.children.map(m=>this.app.getShape(m))]:[g])).values()),this.initialIds=new Set(this.initialShapes.map(g=>g.id)),this.bindingsToDelete=[],Object.values(c.bindings).filter(g=>this.initialIds.has(g.fromId)||this.initialIds.has(g.toId)).forEach(g=>{this.initialIds.has(g.fromId)&&(this.initialIds.has(g.toId)||this.bindingsToDelete.push(g))}),this.initialParentChildren={},this.initialShapes.map(g=>g.parentId).filter(g=>g!==c.id).forEach(g=>{this.initialParentChildren[g]=this.app.getShape(g).children}),this.initialCommonBounds=B.getCommonBounds(this.initialShapes.map(K.getRotatedBounds)),this.app.rotationInfo.selectedIds=[...this.app.selectedIds]}},Y6=class extends Jr{constructor(e){super(e);b(this,"type","draw"),b(this,"performanceMode"),b(this,"status","creating"),b(this,"isLocked"),b(this,"lockedDirection"),b(this,"erasedShapes",new Set),b(this,"erasedBindings",new Set),b(this,"initialSelectedShapes"),b(this,"erasableShapes"),b(this,"prevPoint"),b(this,"start",()=>{}),b(this,"update",()=>{const{page:n,shiftKey:o,originPoint:s,currentPoint:l}=this.app;if(o){if(!this.isLocked&&M.dist(s,l)>4){if(!this.lockedDirection){const g=M.sub(l,s);this.lockedDirection=g[0]>g[1]?"horizontal":"vertical"}this.isLocked=!0}}else this.isLocked&&(this.isLocked=!1);this.isLocked&&(this.lockedDirection==="vertical"?l[0]=s[0]:l[1]=s[1]);const c=M.toFixed(M.add(s,M.sub(l,s))),d=new Set([]);this.erasableShapes.forEach(g=>{if(!this.erasedShapes.has(g)&&this.app.getShapeUtil(g).hitTestLineSegment(g,this.prevPoint,c)&&(this.erasedShapes.add(g),d.add(g.id),g.children!==void 0))for(const m of g.children)this.erasedShapes.add(this.app.getShape(m)),d.add(m)}),Object.values(n.bindings).forEach(g=>{for(const m of[g.toId,g.fromId])d.has(m)&&this.erasedBindings.add(g)}),this.erasedShapes.forEach(g=>{this.app.getShape(g.id)||(this.erasedShapes.delete(g),this.erasableShapes.delete(g),d.delete(g.id))});const C=Array.from(this.erasedShapes.values());return this.prevPoint=c,{document:{pages:{[n.id]:{shapes:Object.fromEntries(C.map(g=>[g.id,{isGhost:!0}]))}}}}}),b(this,"cancel",()=>{const{page:n}=this.app;this.erasedShapes.forEach(s=>{this.app.getShape(s.id)||(this.erasedShapes.delete(s),this.erasableShapes.delete(s))});const o=Array.from(this.erasedShapes.values());return{document:{pages:{[n.id]:{shapes:Object.fromEntries(o.map(s=>[s.id,{isGhost:!1}]))}},pageStates:{[n.id]:{selectedIds:this.initialSelectedShapes.map(s=>s.id)}}}}}),b(this,"complete",()=>{const{page:n}=this.app;this.erasedShapes.forEach(g=>{this.app.getShape(g.id)||(this.erasedShapes.delete(g),this.erasableShapes.delete(g))}),this.erasedBindings.forEach(g=>{this.app.getBinding(g.id)||this.erasedBindings.delete(g)});const o=Array.from(this.erasedShapes.values()),s=Array.from(this.erasedBindings.values()),l=o.map(g=>g.id),c=s.map(g=>g.id),d={shapes:Object.fromEntries(o.map(g=>[g.id,g])),bindings:Object.fromEntries(s.map(g=>[g.id,g]))},C={shapes:Object.fromEntries(o.map(g=>[g.id,void 0])),bindings:Object.fromEntries(s.map(g=>[g.id,void 0]))};return this.app.shapes.forEach(g=>{g.handles&&!C.shapes[g.id]&&Object.values(g.handles).forEach(m=>{var _,y;m.bindingId&&c.includes(m.bindingId)&&(d.shapes[g.id]=Y(V({},d.shapes[g.id]),{handles:Y(V({},(_=d.shapes[g.id])==null?void 0:_.handles),{[m.id]:m})}),l.includes(g.id)||(C.shapes[g.id]=Y(V({},C.shapes[g.id]),{handles:Y(V({},(y=C.shapes[g.id])==null?void 0:y.handles),{[m.id]:Y(V({},m),{bindingId:void 0})})})))})}),{id:"erase",before:{document:{pages:{[n.id]:d},pageStates:{[n.id]:{selectedIds:this.initialSelectedShapes.filter(g=>!!this.app.getShape(g.id)).map(g=>g.id)}}}},after:{document:{pages:{[n.id]:C},pageStates:{[n.id]:{selectedIds:this.initialSelectedShapes.filter(g=>!!this.app.getShape(g.id)).filter(g=>!l.includes(g.id)).map(g=>g.id)}}}}}}),this.prevPoint=[...e.originPoint],this.initialSelectedShapes=this.app.selectedIds.map(n=>this.app.getShape(n)),this.erasableShapes=new Set(this.app.shapes.filter(n=>!n.isLocked))}},q6=class extends Jr{constructor(e,n){super(e);b(this,"type","grid"),b(this,"performanceMode"),b(this,"status","translating"),b(this,"shape"),b(this,"bounds"),b(this,"initialSelectedIds"),b(this,"initialSiblings"),b(this,"grid",{}),b(this,"columns",1),b(this,"rows",1),b(this,"isCopying",!1),b(this,"start",()=>{}),b(this,"update",()=>{const{currentPageId:s,altKey:l,shiftKey:c,currentPoint:d}=this.app,C={},g={},m=B.getBoundsCenter(this.bounds),_=M.sub(d,m);c&&(Math.abs(_[0])<Math.abs(_[1])?_[0]=0:_[1]=0);const y=this.bounds.width+32,L=this.bounds.height+32,S=Math.ceil(_[0]/y),R=Math.ceil(_[1]/L),$=Math.min(S,0),k=Math.min(R,0),T=Math.max(S,1),H=Math.max(R,1),Z=new Set,z=l;z!==this.isCopying&&(Object.values(this.grid).filter(j=>j!==this.shape.id).forEach(j=>C[j]=void 0),this.grid={"0_0":this.shape.id},this.isCopying=z);for(let j=$;j<T;j++)for(let X=k;X<H;X++){const F=`${j}_${X}`;if(Z.add(F),this.grid[F]||j===0&&X===0)continue;const q=this.getClone(M.add(this.shape.point,[j*y,X*L]),z);C[q.id]=q,this.grid[F]=q.id}if(Object.entries(this.grid).forEach(([j,X])=>{Z.has(j)||(C[X]=void 0,delete this.grid[j])}),Object.values(C).length!==0)return this.initialSiblings&&(C[this.shape.parentId]={children:[...this.initialSiblings,...Object.values(this.grid)]}),{document:{pages:{[s]:{shapes:C}},pageStates:{[s]:g}}}}),b(this,"cancel",()=>{const{currentPageId:s}=this.app,l={};return Object.values(this.grid).forEach(c=>{l[c]=void 0}),l[this.shape.id]=Y(V({},l[this.shape.id]),{point:this.shape.point}),this.initialSiblings&&(l[this.shape.parentId]={children:[...this.initialSiblings,this.shape.id]}),{document:{pages:{[s]:{shapes:l}},pageStates:{[s]:{selectedIds:[this.shape.id]}}}}}),b(this,"complete",()=>{const{currentPageId:s}=this.app,l={},c={},d=[];if(Object.values(this.grid).forEach(C=>{l[C]=void 0,c[C]=this.app.getShape(C),d.push(C)}),l[this.shape.id]=this.shape,this.initialSiblings&&(l[this.shape.parentId]={children:[...this.initialSiblings,this.shape.id]},c[this.shape.parentId]={children:[...this.initialSiblings,...Object.values(this.grid)]}),d.length!==1)return{id:"grid",before:{document:{pages:{[s]:{shapes:l}},pageStates:{[s]:{selectedIds:[],hoveredId:void 0}}}},after:{document:{pages:{[s]:{shapes:c}},pageStates:{[s]:{selectedIds:d,hoveredId:void 0}}}}}}),b(this,"getClone",(s,l)=>{const c=Y(V({},this.shape),{id:B.uniqueId(),point:s});return l||c.type==="sticky"&&(c.text=""),c});var o;this.shape=this.app.getShape(n),this.grid["0_0"]=this.shape.id,this.bounds=this.app.getShapeBounds(n),this.initialSelectedIds=[...this.app.selectedIds],this.shape.parentId!==this.app.currentPageId&&(this.initialSiblings=(o=this.app.getShape(this.shape.parentId).children)==null?void 0:o.filter(s=>s!==this.shape.id))}},J6={arrow:W6,brush:F6,draw:z6,erase:Y6,handle:U6,rotate:N6,transform:K6,transformSingle:X6,translate:G6,grid:q6},Q6=e=>J6[e],Qr=class extends H8{constructor(e){super();this.app=e,b(this,"type","select"),b(this,"previous"),b(this,"status","idle"),b(this,"setStatus",n=>{this.status=n,this.app.setStatus(this.status)}),b(this,"onEnter",()=>{this.setStatus("idle")}),b(this,"onExit",()=>{this.setStatus("idle")}),b(this,"onCancel",()=>{this.status==="idle"?this.app.selectTool("select"):this.setStatus("idle"),this.app.cancelSession()}),b(this,"getNextChildIndex",()=>{const{shapes:n,appState:{currentPageId:o}}=this.app;return n.length===0?1:n.filter(s=>s.parentId===o).sort((s,l)=>l.childIndex-s.childIndex)[0].childIndex+1}),b(this,"onPinchStart",()=>{this.app.cancelSession(),this.setStatus("pinching")}),b(this,"onPinchEnd",()=>{B.isMobileSafari()&&this.app.undoSelect(),this.setStatus("idle")}),b(this,"onPinch",(n,o)=>{var s;this.status==="pinching"&&(isNaN(n.delta[0])||isNaN(n.delta[1])||(this.app.pinchZoom(n.point,n.delta,n.delta[2]),(s=this.onPointerMove)==null||s.call(this,n,o)))}),b(this,"onKeyDown",n=>{if(n==="Escape"){this.onCancel();return}if(n==="Meta"||n==="Control"||n==="Alt"){this.app.updateSession();return}}),b(this,"onKeyUp",n=>{if(n==="Meta"||n==="Control"||n==="Alt"){this.app.updateSession();return}}),b(this,"onPointerMove",()=>{this.status==="creating"&&this.app.updateSession()}),b(this,"onPointerUp",()=>{if(this.status==="creating"){this.app.completeSession();const{isToolLocked:n}=this.app.appState;n||this.app.selectTool("select")}this.setStatus("idle")})}},I9=class extends Qr{constructor(){super(...arguments);b(this,"type","select"),b(this,"pointedId"),b(this,"selectedGroupId"),b(this,"pointedHandleId"),b(this,"pointedBoundsHandle"),b(this,"pointedLinkHandleId"),b(this,"onEnter",()=>{this.setStatus("idle")}),b(this,"onExit",()=>{this.setStatus("idle")}),b(this,"clonePaint",e=>{if(this.app.selectedIds.length===0)return;const n=this.app.selectedIds.map(g=>this.app.getShape(g)),o=B.expandBounds(B.getCommonBounds(n.map(K.getBounds)),16),s=B.getBoundsCenter(o),l=[o.width,o.height],c=[s[0]+l[0]*Math.floor((e[0]+l[0]/2-s[0])/l[0]),s[1]+l[1]*Math.floor((e[1]+l[1]/2-s[1])/l[1])],d=B.centerBounds(o,c);this.app.shapes.some(g=>K.getShapeUtil(g).hitTestBounds(g,d))||this.app.duplicate(this.app.selectedIds,c)}),b(this,"getShapeClone",(e,n)=>{const o=this.app.getShape(e),s=K.getShapeUtil(o);if(s.canClone){const l=s.getBounds(o),c=s.getCenter(o);let d={top:[l.minX,l.minY-(l.height+Er)],right:[l.maxX+Er,l.minY],bottom:[l.minX,l.maxY+Er],left:[l.minX-(l.width+Er),l.minY],topLeft:[l.minX-(l.width+Er),l.minY-(l.height+Er)],topRight:[l.maxX+Er,l.minY-(l.height+Er)],bottomLeft:[l.minX-(l.width+Er),l.maxY+Er],bottomRight:[l.maxX+Er,l.maxY+Er]}[n];if(o.rotation!==0){const m=re.add(d,[l.width/2,l.height/2]),_=re.rotWith(m,c,o.rotation||0);d=re.sub(_,[l.width/2,l.height/2])}const C=B.uniqueId(),g=Y(V({},o),{id:C,point:d});return g.type==="sticky"&&(g.text=""),g}}),b(this,"onCancel",()=>{this.app.pageState.editingId?this.app.setEditingId():this.selectNone(),this.app.cancelSession(),this.setStatus("idle")}),b(this,"onKeyDown",(e,n,o)=>{switch(e){case"Escape":{this.onCancel();break}case"Tab":{if(!this.app.pageState.editingId&&this.status==="idle"&&this.app.selectedIds.length===1){const[s]=this.app.selectedIds,l=this.getShapeClone(s,"right");l&&(this.app.createShapes(l),this.setStatus("idle"),l.type==="sticky"&&(this.app.select(l.id),this.app.setEditingId(l.id)))}break}case"Meta":case"Control":case"Alt":{this.app.updateSession();break}case"Enter":{const{pageState:s}=this.app;s.selectedIds.length===1&&!s.editingId&&(this.app.setEditingId(s.selectedIds[0]),o.preventDefault())}}}),b(this,"onKeyUp",(e,n)=>{if(this.status==="clonePainting"&&!(n.altKey&&n.shiftKey)){this.setStatus("idle");return}if(e==="Meta"||e==="Control"||e==="Alt"){this.app.updateSession();return}}),b(this,"onPointerMove",(e,n)=>{const{originPoint:o,currentPoint:s}=this.app;switch(this.status){case"pointingBoundsHandle":{if(!this.pointedBoundsHandle)throw Error("No pointed bounds handle");if(re.dist(o,s)>Lo){if(this.pointedBoundsHandle==="rotate")this.setStatus("rotating"),this.app.startSession("rotate");else if(this.pointedBoundsHandle==="center"||this.pointedBoundsHandle==="left"||this.pointedBoundsHandle==="right")this.setStatus("translating"),this.app.startSession("translate",!1,this.pointedBoundsHandle);else{this.setStatus("transforming");const l=this.app.selectedIds.flatMap(c=>K.getDocumentBranch(this.app.state,c,this.app.currentPageId));l.length===1?this.app.startSession("transformSingle",l[0],this.pointedBoundsHandle):this.app.startSession("transform",this.pointedBoundsHandle)}this.app.updateSession()}break}case"pointingCanvas":{re.dist(o,s)>Lo&&(this.app.startSession("brush"),this.setStatus("brushing"));break}case"pointingClone":{re.dist(o,s)>Lo&&(this.setStatus("translatingClone"),this.app.startSession("translate"),this.app.updateSession());break}case"pointingBounds":{re.dist(o,s)>Lo&&(this.setStatus("translating"),this.app.startSession("translate"),this.app.updateSession());break}case"pointingHandle":{if(!this.pointedHandleId)throw Error("No pointed handle");if(re.dist(o,s)>Lo){this.setStatus("translatingHandle");const l=this.app.getShape(this.app.selectedIds[0]);l&&(this.pointedHandleId==="bend"?(this.app.startSession("handle",l.id,this.pointedHandleId),this.app.updateSession()):(this.app.startSession("arrow",l.id,this.pointedHandleId,!1),this.app.updateSession()))}break}case"clonePainting":{this.clonePaint(s);break}default:if(this.app.session){this.app.updateSession();break}}}),b(this,"onPointerDown",(e,n)=>{if(e.target==="canvas"&&this.status==="idle"){const{currentPoint:o}=this.app;if(e.spaceKey&&n.buttons===1)return;if(this.status==="idle"&&e.altKey&&e.shiftKey){this.setStatus("clonePainting"),this.clonePaint(o);return}if(!e.shiftKey){if(this.app.onShapeBlur(),e.altKey&&this.app.selectedIds.length>0){this.app.duplicate(this.app.selectedIds,o);return}this.selectNone()}this.setStatus("pointingCanvas")}}),b(this,"onPointerUp",e=>{if(this.status==="translatingClone"||this.status==="pointingClone"){this.pointedId&&(this.app.completeSession(),this.app.setEditingId(this.pointedId)),this.setStatus("idle"),this.pointedId=void 0;return}if(this.status==="pointingBounds"){if(e.target==="bounds")this.selectNone();else if(this.app.isSelected(e.target))e.shiftKey?this.pointedId!==e.target&&this.deselect(e.target):this.pointedId!==e.target&&this.app.selectedIds.length>1&&this.select(e.target);else if(this.pointedId===e.target){if(this.app.getShape(e.target).isLocked)return;e.shiftKey?this.pushSelect(e.target):this.select(e.target)}}this.app.completeSession(),this.setStatus("idle"),this.pointedBoundsHandle=void 0,this.pointedHandleId=void 0,this.pointedId=void 0}),b(this,"onDoubleClickCanvas",()=>{}),b(this,"onPointShape",(e,n)=>{if(e.spaceKey&&n.buttons===1||this.app.getShape(e.target).isLocked)return;const{editingId:o,hoveredId:s}=this.app.pageState;if(o&&e.target!==o&&this.app.onShapeBlur(),(this.status==="idle"||this.status==="pointingBounds")&&e.metaKey&&e.shiftKey&&s){this.pointedId=s,this.app.isSelected(s)?this.deselect(s):(this.pushSelect(s),this.setStatus("pointingBounds"));return}if(this.status==="pointingBounds"){const{parentId:l}=this.app.getShape(e.target);this.pointedId=l===this.app.currentPageId?e.target:l;return}if(this.status==="idle"){if(this.setStatus("pointingBounds"),e.metaKey){e.shiftKey||this.selectNone(),this.app.startSession("brush"),this.setStatus("brushing");return}let l;const{parentId:c}=this.app.getShape(e.target);c===this.app.currentPageId?(l=e.target,this.selectedGroupId=void 0):c===this.selectedGroupId?l=e.target:(l=c,this.selectedGroupId=void 0),this.app.isSelected(l)||(this.pointedId=l,e.shiftKey?this.pushSelect(l):this.select(l))}}),b(this,"onDoubleClickShape",e=>{const n=this.app.getShape(e.target);if(n.isLocked){this.app.select(e.target);return}K.getShapeUtil(n.type).canEdit&&(n.parentId===this.app.currentPageId||n.parentId===this.selectedGroupId)&&this.app.setEditingId(e.target),n.parentId!==this.app.currentPageId&&(this.selectedGroupId=n.parentId),this.app.select(e.target)}),b(this,"onRightPointShape",e=>{this.app.isSelected(e.target)||this.app.select(e.target)}),b(this,"onHoverShape",e=>{this.app.setHoveredId(e.target)}),b(this,"onUnhoverShape",e=>{const{currentPageId:n}=this.app;requestAnimationFrame(()=>{n===this.app.currentPageId&&this.app.pageState.hoveredId===e.target&&this.app.setHoveredId(void 0)})}),b(this,"onPointBounds",e=>{if(e.metaKey){e.shiftKey||this.selectNone(),this.app.startSession("brush"),this.setStatus("brushing");return}this.setStatus("pointingBounds")}),b(this,"onRightPointBounds",(e,n)=>{n.stopPropagation()}),b(this,"onReleaseBounds",()=>{(this.status==="translating"||this.status==="brushing")&&this.app.completeSession(),this.setStatus("idle")}),b(this,"onPointBoundsHandle",e=>{this.pointedBoundsHandle=e.target,this.setStatus("pointingBoundsHandle")}),b(this,"onDoubleClickBoundsHandle",e=>{switch(e.target){case"center":case"left":case"right":{this.app.select(...K.getLinkedShapeIds(this.app.state,this.app.currentPageId,e.target,e.shiftKey));break}default:if(this.app.selectedIds.length===1){this.app.resetBounds(this.app.selectedIds);const n=this.app.getShape(this.app.selectedIds[0]);"label"in n&&this.app.setEditingId(n.id)}}}),b(this,"onReleaseBoundsHandle",()=>{this.setStatus("idle")}),b(this,"onPointHandle",e=>{this.pointedHandleId=e.target,this.setStatus("pointingHandle")}),b(this,"onDoubleClickHandle",e=>{if(e.target==="bend"){const{selectedIds:n}=this.app;if(n.length!==1)return;const o=this.app.getShape(n[0]);K.getShapeUtil(o.type).canEdit&&(o.parentId===this.app.currentPageId||o.parentId===this.selectedGroupId)&&this.app.setEditingId(o.id);return}this.app.toggleDecoration(e.target)}),b(this,"onReleaseHandle",()=>{this.setStatus("idle")}),b(this,"onShapeClone",e=>{const n=this.app.selectedIds[0],o=this.getShapeClone(n,e.target);e.target==="left"||e.target==="right"||e.target==="top"||e.target==="bottom"?o&&(this.app.createShapes(o),this.pointedId=o.id,this.setStatus("pointingClone")):(this.setStatus("gridCloning"),this.app.startSession("grid",n))})}deselect(e){this.app.select(...this.app.selectedIds.filter(n=>n!==e))}select(e){this.app.select(e)}pushSelect(e){const n=this.app.getShape(e);this.app.select(...this.app.selectedIds.filter(o=>o!==n.parentId),e)}selectNone(){this.app.selectNone()}},P9=class extends Qr{constructor(){super(...arguments);b(this,"type","erase"),b(this,"status","idle"),b(this,"onPointerDown",()=>{this.status==="idle"&&this.setStatus("pointing")}),b(this,"onPointerMove",e=>{switch(this.status){case"pointing":{re.dist(e.origin,e.point)>Lo&&(this.app.startSession("erase"),this.app.updateSession(),this.setStatus("erasing"));break}case"erasing":this.app.updateSession()}}),b(this,"onPointerUp",()=>{switch(this.status){case"pointing":{const e=this.app.shapes.filter(n=>!n.isLocked).filter(n=>this.app.getShapeUtil(n).hitTestPoint(n,this.app.currentPoint)).flatMap(n=>n.children?[n.id,...n.children]:n.id);this.app.delete(e);break}case"erasing":this.app.completeSession()}this.setStatus("idle")}),b(this,"onCancel",()=>{this.status==="idle"?this.previous?this.app.selectTool(this.previous):this.app.selectTool("select"):this.setStatus("idle"),this.app.cancelSession()})}},$9=class extends Qr{constructor(){super(...arguments);b(this,"type","text"),b(this,"stopEditingShape",()=>{this.setStatus("idle"),this.app.appState.isToolLocked||this.app.selectTool("select")}),b(this,"onKeyUp",()=>{}),b(this,"onKeyDown",()=>{}),b(this,"onPointerDown",()=>{if(this.status==="creating"){this.stopEditingShape();return}if(this.status==="idle"){const{currentPoint:e,currentGrid:n,settings:{showGrid:o}}=this.app;this.app.createTextShapeAtPoint(o?re.snap(e,n):e),this.setStatus("creating");return}}),b(this,"onPointerUp",()=>{}),b(this,"onPointShape",e=>{const n=this.app.getShape(e.target);n.type==="text"&&(this.setStatus("idle"),this.app.setEditingId(n.id))}),b(this,"onShapeBlur",()=>{this.stopEditingShape()})}},H9=class extends Qr{constructor(){super(...arguments);b(this,"type","draw"),b(this,"lastShapeId"),b(this,"onEnter",()=>{this.lastShapeId=void 0}),b(this,"onCancel",()=>{switch(this.status){case"idle":{this.app.selectTool("select");break}default:{this.setStatus("idle");break}}this.app.cancelSession()}),b(this,"onPointerDown",e=>{if(this.status!=="idle")return;const{currentPoint:n,appState:{currentPageId:o,currentStyle:s}}=this.app,l=this.lastShapeId&&this.app.getShape(this.lastShapeId);if(e.shiftKey&&l)this.app.startSession("draw",l.id),this.setStatus("extending");else{const c=this.getNextChildIndex(),d=B.uniqueId(),C=y9.create({id:d,parentId:o,childIndex:c,point:n,style:V({},s)});this.lastShapeId=d,this.app.patchCreate([C]),this.app.startSession("draw",d),this.setStatus("creating")}}),b(this,"onPointerMove",()=>{switch(this.status){case"extending":case"creating":this.app.updateSession()}}),b(this,"onPointerUp",()=>{this.app.completeSession(),this.setStatus("idle")})}},O9=class extends Qr{constructor(){super(...arguments);b(this,"type","ellipse"),b(this,"onPointerDown",()=>{if(this.status!=="idle")return;const{currentPoint:e,currentGrid:n,settings:{showGrid:o},appState:{currentPageId:s,currentStyle:l}}=this.app,c=this.getNextChildIndex(),d=B.uniqueId(),C=x9.create({id:d,parentId:s,childIndex:c,point:o?re.snap(e,n):e,style:V({},l)});this.app.patchCreate([C]),this.app.startSession("transformSingle",C.id,fn.BottomRight,!0),this.setStatus("creating")})}},k9=class extends Qr{constructor(){super(...arguments);b(this,"type","rectangle"),b(this,"onPointerDown",()=>{if(this.status!=="idle")return;const{currentPoint:e,currentGrid:n,settings:{showGrid:o},appState:{currentPageId:s,currentStyle:l}}=this.app,c=this.getNextChildIndex(),d=B.uniqueId(),C=w9.create({id:d,parentId:s,childIndex:c,point:o?re.snap(e,n):e,style:V({},l)});this.app.patchCreate([C]),this.app.startSession("transformSingle",C.id,fn.BottomRight,!0),this.setStatus("creating")})}},T9=class extends Qr{constructor(){super(...arguments);b(this,"type","triangle"),b(this,"onPointerDown",()=>{if(this.status!=="idle")return;const{currentPoint:e,currentGrid:n,settings:{showGrid:o},appState:{currentPageId:s,currentStyle:l}}=this.app,c=this.getNextChildIndex(),d=B.uniqueId(),C=b9.create({id:d,parentId:s,childIndex:c,point:o?re.snap(e,n):e,style:V({},l)});this.app.patchCreate([C]),this.app.startSession("transformSingle",C.id,fn.BottomRight,!0),this.setStatus("creating")})}},B9=class extends Qr{constructor(){super(...arguments);b(this,"type","line"),b(this,"onPointerDown",()=>{if(this.status!=="idle")return;const{currentPoint:e,currentGrid:n,settings:{showGrid:o},appState:{currentPageId:s,currentStyle:l}}=this.app,c=this.getNextChildIndex(),d=B.uniqueId(),C=Qa.create({id:d,parentId:s,childIndex:c,point:o?re.snap(e,n):e,decorations:{start:void 0,end:void 0},style:V({},l)});this.app.patchCreate([C]),this.app.startSession("arrow",C.id,"end",!0),this.setStatus("creating")})}},V9=class extends Qr{constructor(){super(...arguments);b(this,"type","arrow"),b(this,"onPointerDown",()=>{if(this.status!=="idle")return;const{currentPoint:e,currentGrid:n,settings:{showGrid:o},appState:{currentPageId:s,currentStyle:l}}=this.app,c=this.getNextChildIndex(),d=B.uniqueId(),C=Qa.create({id:d,parentId:s,childIndex:c,point:o?re.snap(e,n):e,style:V({},l)});this.app.patchCreate([C]),this.app.startSession("arrow",C.id,"end",!0),this.setStatus("creating")})}},D9=class extends Qr{constructor(){super(...arguments);b(this,"type","sticky"),b(this,"shapeId"),b(this,"onPointerDown",()=>{if(this.status==="creating"){this.setStatus("idle"),this.app.appState.isToolLocked||this.app.selectTool("select");return}if(this.status==="idle"){const{currentPoint:e,currentGrid:n,settings:{showGrid:o},appState:{currentPageId:s,currentStyle:l}}=this.app,c=this.getNextChildIndex(),d=B.uniqueId();this.shapeId=d;const C=el.create({id:d,parentId:s,childIndex:c,point:o?re.snap(e,n):e,style:V({},l)}),g=el.getBounds(C);C.point=re.sub(C.point,[g.width/2,g.height/2]),this.app.createShapes(C),this.app.startSession("translate"),this.setStatus("creating")}}),b(this,"onPointerUp",()=>{this.status==="creating"&&(this.setStatus("idle"),this.app.completeSession(),this.app.selectTool("select"),this.app.setEditingId(this.shapeId))})}},ef=class{constructor(e,n,o,s){b(this,"_idbId"),b(this,"initialState"),b(this,"store"),b(this,"pointer",-1),b(this,"_state"),b(this,"_status","loading"),b(this,"stack",[]),b(this,"_snapshot"),b(this,"useStore"),b(this,"ready"),b(this,"isPaused",!1),b(this,"persist",l=>{if(this._status==="ready"&&(this.onPersist&&this.onPersist(this._state,l),this._idbId))return Ji(this._idbId,this._state).catch(c=>console.error(c))}),b(this,"applyPatch",(l,c)=>{const d=this._state,C=B.deepMerge(this._state,l),g=this.cleanup(C,d,l,c);return this.onStateWillChange&&this.onStateWillChange(g,c),this._state=g,this.store.setState(this._state,!0),this.onStateDidChange&&this.onStateDidChange(this._state,c),this}),b(this,"cleanup",(l,c,d,C)=>l),b(this,"onStateWillChange"),b(this,"onStateDidChange"),b(this,"patchState",(l,c)=>(this.applyPatch(l,c),this.onPatch&&this.onPatch(this._state,c),this)),b(this,"replaceState",(l,c)=>{const d=this.cleanup(l,this._state,l,c);return this.onStateWillChange&&this.onStateWillChange(d,"replace"),this._state=d,this.store.setState(this._state,!0),this.onStateDidChange&&this.onStateDidChange(this._state,"replace"),this}),b(this,"setState",(l,c=l.id)=>(this.pointer<this.stack.length-1&&(this.stack=this.stack.slice(0,this.pointer+1)),this.stack.push(Y(V({},l),{id:c})),this.pointer=this.stack.length-1,this.applyPatch(l.after,c),this.onCommand&&this.onCommand(this._state,c),this.persist(c),this)),b(this,"onReady"),b(this,"onPatch"),b(this,"onCommand"),b(this,"onPersist"),b(this,"onReplace"),b(this,"onReset"),b(this,"onResetHistory"),b(this,"onUndo"),b(this,"onRedo"),b(this,"reset",()=>(this.onStateWillChange&&this.onStateWillChange(this.initialState,"reset"),this._state=this.initialState,this.store.setState(this._state,!0),this.resetHistory(),this.persist("reset"),this.onStateDidChange&&this.onStateDidChange(this._state,"reset"),this.onReset&&this.onReset(this._state),this)),b(this,"replaceHistory",(l,c=l.length-1)=>(this.stack=l,this.pointer=c,this.onReplace&&this.onReplace(this._state),this)),b(this,"resetHistory",()=>(this.stack=[],this.pointer=-1,this.onResetHistory&&this.onResetHistory(this._state),this)),b(this,"undo",()=>{if(!this.isPaused){if(!this.canUndo)return this;const l=this.stack[this.pointer];this.pointer--,this.applyPatch(l.before,"undo"),this.persist("undo")}return this.onUndo&&this.onUndo(this._state),this}),b(this,"redo",()=>{if(!this.isPaused){if(!this.canRedo)return this;this.pointer++;const l=this.stack[this.pointer];this.applyPatch(l.after,"redo"),this.persist("undo")}return this.onRedo&&this.onRedo(this._state),this}),b(this,"setSnapshot",()=>(this._snapshot=V({},this._state),this)),b(this,"forceUpdate",()=>{this.store.setState(this._state,!0)}),this._idbId=n,this._state=qr(e),this._snapshot=qr(e),this.initialState=qr(e),this.store=J7(()=>this._state),this.useStore=(0,Q7.Z)(this.store),this.ready=new Promise(l=>{let c="none";this._idbId?(c="restored",Sa(this._idbId).then(d=>tt(this,null,function*(){if(d){let C=d;if(o){const m=yield Sa(n+"_version");m&&m<o&&(C=s?s(d,e,m):e,c="migrated")}yield Ji(n+"_version",o||-1);const g=this._state.appState.isEmptyCanvas;this._state=qr(C),this._snapshot=qr(C),this._state.appState.isEmptyCanvas=g,this.store.setState(this._state,!0)}else yield Ji(n+"_version",o||-1);this._status="ready",l(c)})).catch(d=>console.error(d))):(this._status="ready",l(c))}).then(l=>(this.onReady&&this.onReady(l),l))}pause(){this.isPaused=!0}resume(){this.isPaused=!1}get canUndo(){return this.pointer>-1}get canRedo(){return this.pointer<this.stack.length-1}get state(){return this._state}get status(){return this._status}get snapshot(){return this._snapshot}},rl=B.uniqueId(),O1=class extends ef{constructor(e,n={}){super(O1.defaultState,e,O1.version,(o,s,l)=>Y(V({},s),{document:En(Y(V(V({},s.document),o.document),{version:l}),O1.version)}));b(this,"callbacks",{}),b(this,"tools",{select:new I9(this),erase:new P9(this),text:new $9(this),draw:new H9(this),ellipse:new O9(this),rectangle:new k9(this),triangle:new T9(this),line:new B9(this),arrow:new V9(this),sticky:new D9(this)}),b(this,"currentTool",this.tools.select),b(this,"session"),b(this,"readOnly",!1),b(this,"isDirty",!1),b(this,"isCreating",!1),b(this,"originPoint",[0,0]),b(this,"currentPoint",[0,0]),b(this,"previousPoint",[0,0]),b(this,"shiftKey",!1),b(this,"altKey",!1),b(this,"metaKey",!1),b(this,"ctrlKey",!1),b(this,"spaceKey",!1),b(this,"isPointing",!1),b(this,"isForcePanning",!1),b(this,"editingStartTime",-1),b(this,"fileSystemHandle",null),b(this,"viewport",B.getBoundsFromPoints([[0,0],[100,100]])),b(this,"rendererBounds",B.getBoundsFromPoints([[0,0],[100,100]])),b(this,"selectHistory",{stack:[[]],pointer:0}),b(this,"clipboard"),b(this,"rotationInfo",{selectedIds:[],center:[0,0]}),b(this,"pasteInfo",{center:[0,0],offset:[0,0]}),b(this,"onReady",()=>{var o,s;this.loadDocument(this.document),Y8().then(l=>{this.fileSystemHandle=l});try{this.patchState({appState:{status:"idle"},document:En(this.document,O1.version)})}catch(l){console.error("The data appears to be corrupted. Resetting!",l),localStorage.setItem(this.document.id+"_corrupted",JSON.stringify(this.document)),this.patchState(Y(V({},O1.defaultState),{appState:Y(V({},O1.defaultState.appState),{status:"idle"})}))}(s=(o=this.callbacks).onMount)==null||s.call(o,this)}),b(this,"cleanup",(o,s)=>{var l;const c=V({},o);c.document!==s.document&&Object.entries(c.document.pages).forEach(([g,m])=>{if(m===void 0){delete c.document.pages[g],delete c.document.pageStates[g];return}const _=s.document.pages[g],y={};if(!_||m.shapes!==_.shapes||m.bindings!==_.bindings){m.shapes=V({},m.shapes),m.bindings=V({},m.bindings);const S=new Set;Object.entries(m.shapes).forEach(([k,T])=>{var H;let Z;T?Z=T.parentId:(Z=(H=_==null?void 0:_.shapes[k])==null?void 0:H.parentId,delete m.shapes[k]),m.id===c.appState.currentPageId&&(_==null?void 0:_.shapes[k])!==T&&(y[k]=T),Z&&Z!==g&&m.shapes[Z]!==void 0&&S.add(m.shapes[Z])}),Object.keys(m.bindings).forEach(k=>{m.bindings[k]||delete m.bindings[k]}),c.document.pages[g]=m;const R=K.getRelatedBindings(c,Object.keys(y),g),$=new Set;R.forEach(k=>{if(!m.bindings[k.id])return;const T=m.shapes[k.toId],H=m.shapes[k.fromId];if(!(T&&H)){delete c.document.pages[g].bindings[k.id];return}if($.has(H))return;const Z=K.updateArrowBindings(m,H);if($.add(H),Z){const z=V(V({},H),Z);m.shapes[H.id]=z}}),S.forEach(k=>{if(!k)throw Error("no group!");const T=k.children.filter(Z=>m.shapes[Z]!==void 0),H=B.getCommonBounds(T.map(Z=>m.shapes[Z]).filter(Boolean).map(Z=>K.getRotatedBounds(Z)));m.shapes[k.id]=Y(V({},k),{point:[H.minX,H.minY],size:[H.width,H.height],children:T})})}const L=V({},c.document.pageStates[g]);L.brush||delete L.brush,L.hoveredId&&!m.shapes[L.hoveredId]&&delete L.hoveredId,L.bindingId&&!m.bindings[L.bindingId]&&(K.warn(`Could not find the binding of ${g}`),delete L.bindingId),L.editingId&&!m.shapes[L.editingId]&&(K.warn("Could not find the editing shape!"),delete L.editingId),c.document.pageStates[g]=L}),Object.keys((l=c.document.assets)!=null?l:{}).forEach(g=>{var m,_;((m=c.document.assets)==null?void 0:m[g])||(_=c.document.assets)==null||delete _[g]});const d=c.appState.currentPageId,C=c.document.pageStates[d];if(c.room&&c.room!==s.room){const g=Y(V({},c.room),{users:V({},c.room.users)});s.room&&Object.values(s.room.users).filter(Boolean).forEach(m=>{g.users[m.id]===void 0&&delete g.users[m.id]}),c.room=g}return c.room&&(c.room.users[c.room.userId]=Y(V({},c.room.users[c.room.userId]),{point:this.currentPoint,selectedIds:C.selectedIds})),this.readOnly&&(c.document.pages=s.document.pages),c}),b(this,"onPatch",(o,s)=>{var l,c;(c=(l=this.callbacks).onPatch)==null||c.call(l,this,s)}),b(this,"onCommand",(o,s)=>{var l,c;this.clearSelectHistory(),this.isDirty=!0,(c=(l=this.callbacks).onCommand)==null||c.call(l,this,s)}),b(this,"onReplace",()=>{this.clearSelectHistory(),this.isDirty=!1}),b(this,"onUndo",()=>{var o,s;this.rotationInfo.selectedIds=[...this.selectedIds],(s=(o=this.callbacks).onUndo)==null||s.call(o,this)}),b(this,"onRedo",()=>{var o,s;this.rotationInfo.selectedIds=[...this.selectedIds],(s=(o=this.callbacks).onRedo)==null||s.call(o,this)}),b(this,"onPersist",()=>{var o,s;this.callbacks.onChangePage&&this.broadcastPageChanges(),(s=(o=this.callbacks).onPersist)==null||s.call(o,this)}),b(this,"prevSelectedIds",this.selectedIds),b(this,"onStateDidChange",(o,s)=>{var l,c,d,C;(c=(l=this.callbacks).onChange)==null||c.call(l,this,s),this.room&&this.selectedIds!==this.prevSelectedIds&&((C=(d=this.callbacks).onChangePresence)==null||C.call(d,this,Y(V({},this.room.users[this.room.userId]),{selectedIds:this.selectedIds})),this.prevSelectedIds=this.selectedIds)}),b(this,"justSent",!1),b(this,"prevShapes",this.page.shapes),b(this,"prevBindings",this.page.bindings),b(this,"prevAssets",this.document.assets),b(this,"broadcastPageChanges",()=>{var o,s;const l=new Set,c={},d={},C={};this.shapes.forEach(g=>{l.add(g.id),this.prevShapes[g.id]!==g&&(c[g.id]=g)}),Object.keys(this.prevShapes).filter(g=>!l.has(g)).forEach(g=>{c[g]=void 0}),this.bindings.forEach(g=>{l.add(g.id),this.prevBindings[g.id]!==g&&(d[g.id]=g)}),Object.keys(this.prevBindings).filter(g=>!l.has(g)).forEach(g=>{d[g]=void 0}),this.assets.forEach(g=>{l.add(g.id),this.prevAssets[g.id]!==g&&(C[g.id]=g)}),Object.keys(this.prevAssets).filter(g=>!l.has(g)).forEach(g=>{C[g]=void 0}),(Object.keys(d).length>0||Object.keys(c).length>0||Object.keys(C).length>0)&&(this.justSent=!0,(s=(o=this.callbacks).onChangePage)==null||s.call(o,this,c,d,C),this.prevShapes=this.page.shapes,this.prevBindings=this.page.bindings,this.prevAssets=this.document.assets)}),b(this,"getReservedContent",(o,s=this.currentPageId)=>{const{bindings:l}=this.document.pages[s],c={},d={},C=Object.values(l),g=new Map(C.map(R=>[R.toId,R])),m=new Map(C.map(R=>[R.fromId,R])),_=[g,m],y=[];this.session&&o.forEach(R=>y.push(R)),this.pageState.editingId&&y.push(this.pageState.editingId);const L=new Set(y),S=new Set;for(;y.length>0;){const R=y.pop();if(!R)break;if(S.has(R))continue;S.add(R);const $=this.getShape(R);c[R]=$,$.parentId!==s&&y.push($.parentId),$.children&&y.push(...$.children),_.map(k=>k.get($.id)).filter(Boolean).forEach(k=>{d[k.id]=k,y.push(k.toId,k.fromId)})}return{reservedShapes:c,reservedBindings:d,strongReservedShapeIds:L}}),b(this,"replacePageContent",(o,s,l,c=this.currentPageId)=>this.justSent?(this.justSent=!1,this):(this.useStore.setState(d=>{const{hoveredId:C,editingId:g,bindingId:m,selectedIds:_}=d.document.pageStates[c],y=[..._],L=g&&d.document.pages[this.currentPageId].shapes[g];L&&y.push(L.id);const{reservedShapes:S,reservedBindings:R,strongReservedShapeIds:$}=this.getReservedContent(y,this.currentPageId);Object.values(S).filter(F=>!("text"in F)).forEach(F=>{const q=o[F.id];if(!!q){if(!(F.type==="arrow"||$.has(F.id))){o[F.id]=q;return}"decorations"in q&&"decorations"in F&&(o[F.id]=Y(V({},F),{decorations:q.decorations})),F.style=q.style}}),this.prevShapes=o,this.prevBindings=s,this.prevAssets=l;const k=V(V({},o),S);L&&(k[L.id]=L);const T=V(V({},s),R),H=V({},l),Z=Y(V({},d),{document:Y(V({},d.document),{pages:{[c]:Y(V({},d.document.pages[c]),{shapes:k,bindings:T})},assets:H,pageStates:Y(V({},d.document.pageStates),{[c]:Y(V({},d.document.pageStates[c]),{selectedIds:_.filter(F=>k[F]!==void 0),hoveredId:C?k[C]===void 0?void 0:C:void 0,editingId:g,bindingId:m?T[m]===void 0?void 0:m:void 0})})})}),z=Z.document.pages[c],j=K.getRelatedBindings(Z,Object.keys(k),c),X=new Set;return j.forEach(F=>{if(!z.bindings[F.id])return;const q=z.shapes[F.fromId];if(X.has(q))return;const fe=K.updateArrowBindings(z,q);if(X.add(q),fe){const Ee=V(V({},q),fe);z.shapes[q.id]=Ee}}),Object.values(k).forEach(F=>{if(F.type!=="group")return;const q=F.children.filter(Ee=>z.shapes[Ee]!==void 0),fe=B.getCommonBounds(q.map(Ee=>z.shapes[Ee]).filter(Boolean).map(Ee=>K.getRotatedBounds(Ee)));z.shapes[F.id]=Y(V({},F),{point:[fe.minX,fe.minY],size:[fe.width,fe.height],children:q})}),this.state.document=Z.document,Z},!0),this)),b(this,"updateBounds",o=>{this.rendererBounds=o;const{point:s,zoom:l}=this.pageState.camera;this.updateViewport(s,l),!this.readOnly&&this.session&&this.session.update()}),b(this,"updateViewport",(o,s)=>{const{width:l,height:c}=this.rendererBounds,[d,C]=M.sub(M.div([0,0],s),o),[g,m]=M.sub(M.div([l,c],s),o);this.viewport={minX:d,minY:C,maxX:g,maxY:m,height:g-d,width:m-C}}),b(this,"setEditingId",o=>{this.readOnly||(this.editingStartTime=performance.now(),this.patchState({document:{pageStates:{[this.currentPageId]:{editingId:o}}}},"set_editing_id"))}),b(this,"setHoveredId",o=>{this.patchState({document:{pageStates:{[this.currentPageId]:{hoveredId:o}}}},"set_hovered_id")}),b(this,"setSetting",(o,s)=>this.session?this:(this.patchState({settings:{[o]:typeof s=="function"?s(this.settings[o]):s}},`settings:${o}`),this.persist(),this)),b(this,"toggleFocusMode",()=>this.session?this:(this.patchState({settings:{isFocusMode:!this.settings.isFocusMode}},"settings:toggled_focus_mode"),this.persist(),this)),b(this,"togglePenMode",()=>this.session?this:(this.patchState({settings:{isPenMode:!this.settings.isPenMode}},"settings:toggled_pen_mode"),this.persist(),this)),b(this,"toggleDarkMode",()=>this.session?this:(this.patchState({settings:{isDarkMode:!this.settings.isDarkMode}},"settings:toggled_dark_mode"),this.persist(),this)),b(this,"toggleZoomSnap",()=>this.session?this:(this.patchState({settings:{isZoomSnap:!this.settings.isZoomSnap}},"settings:toggled_zoom_snap"),this.persist(),this)),b(this,"toggleDebugMode",()=>this.session?this:(this.patchState({settings:{isDebugMode:!this.settings.isDebugMode}},"settings:toggled_debug"),this.persist(),this)),b(this,"setMenuOpen",o=>(this.patchState({appState:{isMenuOpen:o}},"ui:toggled_menu_opened"),this.persist(),this)),b(this,"setIsLoading",o=>(this.patchState({appState:{isLoading:o}},"ui:toggled_is_loading"),this.persist(),this)),b(this,"setDisableAssets",o=>(this.patchState({appState:{disableAssets:o}},"ui:toggled_disable_images"),this)),b(this,"toggleGrid",()=>this.session?this:(this.patchState({settings:{showGrid:!this.settings.showGrid}},"settings:toggled_grid"),this.persist(),this)),b(this,"selectTool",o=>{if(this.readOnly||this.session)return this;this.isPointing=!1;const s=this.tools[o];return s===this.currentTool?(this.patchState({appState:{isToolLocked:!1}}),this):(this.currentTool.onExit(),s.previous=this.currentTool.type,this.currentTool=s,this.currentTool.onEnter(),this.patchState({appState:{activeTool:o,isToolLocked:!1}},`selected_tool:${o}`))}),b(this,"toggleToolLock",()=>this.session?this:this.patchState({appState:{isToolLocked:!this.appState.isToolLocked}},"toggled_tool_lock")),b(this,"resetDocument",()=>this.session?this:(this.session=void 0,this.pasteInfo.offset=[0,0],this.currentTool=this.tools.select,this.resetHistory().clearSelectHistory().loadDocument(En(O1.defaultDocument,O1.version)).persist(),this)),b(this,"updateUsers",(o,s=!1)=>{this.patchState({room:{users:Object.fromEntries(o.map(l=>[l.id,l]))}},s?"room:self:update":"room:user:update")}),b(this,"removeUser",o=>{this.patchState({room:{users:{[o]:void 0}}})}),b(this,"mergeDocument",o=>{if(this.document.id!==o.id)return this.replaceState(Y(V({},this.state),{appState:Y(V({},this.appState),{currentPageId:Object.keys(o.pages)[0]}),document:En(o,O1.version)})),this;const s=V({},this.document.pageStates),l=Y(V({},this.appState),{currentPageId:o.pages[this.currentPageId]?this.currentPageId:Object.keys(o.pages)[0],pages:Object.values(o.pages).map((d,C)=>({id:d.id,name:d.name,childIndex:d.childIndex||C}))});this.resetHistory(),Object.keys(this.document.pages).forEach(d=>{o.pages[d]||(d===this.appState.currentPageId&&(this.cancelSession(),this.selectNone()),s[d]=void 0)}),this.session&&this.selectedIds.filter(d=>!o.pages[this.currentPageId].shapes[d]).forEach(d=>o.pages[this.currentPageId].shapes[d]=this.page.shapes[d]),Object.entries(s).forEach(([d,C])=>{C.selectedIds=C.selectedIds.filter(g=>!!o.pages[d].shapes[g])});const{editingId:c}=this.pageState;return c&&(o.pages[this.currentPageId].shapes[c]=this.page.shapes[c],s[this.currentPageId].selectedIds=[c]),this.replaceState(Y(V({},this.state),{appState:l,document:Y(V({},En(o,O1.version)),{pageStates:s})}),"merge")}),b(this,"updateDocument",(o,s="updated_document")=>{const l=this.state,c=Y(V({},l),{document:V({},l.document)});o.pages[this.currentPageId]||(c.appState=Y(V({},l.appState),{currentPageId:Object.keys(o.pages)[0]}));let d=1;for(const C of Object.values(o.pages))C!==l.document.pages[C.id]&&(c.document.pages[C.id]=C,C.name||(c.document.pages[C.id].name=`Page ${d+1}`,d++));for(const C of Object.values(o.pageStates))if(C!==l.document.pageStates[C.id]){c.document.pageStates[C.id]=C;const g=o.pages[C.id],m=["bindingId","editingId","hoveredId","pointedId"];for(const _ of m)g.shapes[_]||(C[_]=void 0);C.selectedIds=C.selectedIds.filter(_=>!!o.pages[g.id].shapes[_])}return c.document=En(c.document,c.document.version||0),this.replaceState(c,`${s}:${o.id}`)}),b(this,"loadRoom",o=>(this.patchState({room:{id:o,userId:rl,users:{[rl]:{id:rl,color:N2[Math.floor(Math.random()*N2.length)],point:[100,100],selectedIds:[],activeShapes:[]}}}}),this)),b(this,"loadDocument",o=>{this.selectNone(),this.resetHistory(),this.clearSelectHistory(),this.session=void 0,this.replaceState(Y(V({},O1.defaultState),{settings:V({},this.state.settings),document:En(o,O1.version),appState:Y(V(V({},O1.defaultState.appState),this.state.appState),{currentPageId:Object.keys(o.pages)[0],disableAssets:this.disableAssets})}),"loaded_document");const{point:s,zoom:l}=this.pageState.camera;return this.updateViewport(s,l),this}),b(this,"newProject",()=>{!this.isLocal||(this.fileSystemHandle=null,this.resetDocument())}),b(this,"saveProject",()=>tt(this,null,function*(){if(!this.readOnly){try{const o=yield q2(En(this.document,O1.version),this.fileSystemHandle);this.fileSystemHandle=o,this.persist(),this.isDirty=!1}catch(o){console.error(o.message)}return this}})),b(this,"saveProjectAs",()=>tt(this,null,function*(){try{const o=yield q2(this.document,null);this.fileSystemHandle=o,this.persist(),this.isDirty=!1}catch(o){console.error(o.message)}return this})),b(this,"openProject",()=>tt(this,null,function*(){if(!!this.isLocal)try{const o=yield q8();if(!o)throw Error();const{fileHandle:s,document:l}=o;this.loadDocument(l),this.fileSystemHandle=s,this.zoomToFit(),this.persist()}catch(o){console.error(o)}finally{this.persist()}})),b(this,"openAsset",()=>tt(this,null,function*(){if(!this.disableAssets)try{const o=yield J8();if(!o)return;this.addMediaFromFile(o)}catch(o){console.error(o)}finally{this.persist()}})),b(this,"signOut",()=>{}),b(this,"getAppState",()=>this.appState),b(this,"getPage",(o=this.currentPageId)=>K.getPage(this.state,o||this.currentPageId)),b(this,"getShapes",(o=this.currentPageId)=>K.getShapes(this.state,o||this.currentPageId)),b(this,"getBindings",(o=this.currentPageId)=>K.getBindings(this.state,o||this.currentPageId)),b(this,"getShape",(o,s=this.currentPageId)=>K.getShape(this.state,o,s)),b(this,"getShapeBounds",(o,s=this.currentPageId)=>K.getBounds(this.getShape(o,s))),b(this,"getBinding",(o,s=this.currentPageId)=>K.getBinding(this.state,o,s)),b(this,"getPageState",(o=this.currentPageId)=>K.getPageState(this.state,o||this.currentPageId)),b(this,"getPagePoint",(o,s=this.currentPageId)=>{const{camera:l}=this.getPageState(s);return M.sub(M.div(o,l.zoom),l.point)}),b(this,"createPage",o=>{if(this.readOnly)return this;const{width:s,height:l}=this.rendererBounds;return this.setState(x6(this,[-s/2,-l/2],o))}),b(this,"changePage",o=>this.setState(b6(this,o))),b(this,"renamePage",(o,s)=>this.readOnly?this:this.setState(H6(this,o,s))),b(this,"duplicatePage",o=>this.readOnly?this:this.setState(M6(this,o))),b(this,"deletePage",o=>this.readOnly?this:Object.values(this.document.pages).length<=1?this:this.setState(y6(this,o||this.currentPageId))),b(this,"copy",(o=this.selectedIds)=>{const s=o.flatMap(C=>K.getDocumentBranch(this.state,C,this.currentPageId)),l=s.map(C=>B.deepClone(this.getShape(C,this.currentPageId)));if(l.length===0)return this;const c=Object.values(this.page.bindings).filter(C=>s.includes(C.fromId)&&s.includes(C.toId)),d=l.map(C=>{if(!!C.assetId)return this.document.assets[C.assetId]}).filter(Boolean);this.clipboard={shapes:l,bindings:c,assets:d};try{const C=JSON.stringify(V({type:"tldr/clipboard"},this.clipboard));navigator.clipboard.writeText(C).then(()=>{},()=>{})}catch{}return this.pasteInfo.offset=[0,0],this.pasteInfo.center=[0,0],this}),b(this,"cut",(o=this.selectedIds)=>(this.copy(o),this.delete(o),this)),b(this,"paste",o=>{if(this.readOnly)return;const s=(l,c,d)=>{const C={},g=d.filter(k=>this.document.assets[k.id]===void 0);g.length&&this.patchState({document:{assets:Object.fromEntries(g.map(k=>[k.id,k]))}}),l.forEach(k=>C[k.id]=B.uniqueId()),c.forEach(k=>C[k.id]=B.uniqueId());let m=K.getTopChildIndex(this.state,this.currentPageId);const _=l.sort((k,T)=>k.childIndex-T.childIndex).map(k=>{const T=C[k.parentId],H=Y(V({},k),{id:C[k.id],parentId:T||this.currentPageId});return k.children&&(H.children=k.children.map(Z=>C[Z])),T||(H.childIndex=m,m++),H.handles&&Object.values(H.handles).forEach(Z=>{Z.bindingId&&(Z.bindingId=C[Z.bindingId])}),H}),y=c.map(k=>Y(V({},k),{id:C[k.id],toId:C[k.toId],fromId:C[k.fromId]})),L=B.getCommonBounds(_.map(K.getBounds));let S=M.toFixed(this.getPagePoint(o||this.centerPoint));M.dist(S,this.pasteInfo.center)<2||M.dist(S,M.toFixed(B.getBoundsCenter(L)))<2?(S=M.add(S,this.pasteInfo.offset),this.pasteInfo.offset=M.add(this.pasteInfo.offset,[Eo,Eo])):(this.pasteInfo.center=S,this.pasteInfo.offset=[0,0]);const R=B.centerBounds(L,S),$=M.sub(B.getBoundsCenter(R),B.getBoundsCenter(L));this.create(_.map(k=>K.getShapeUtil(k.type).create(Y(V({},k),{point:M.toFixed(M.add(k.point,$)),parentId:k.parentId||this.currentPageId}))),y)};if(!("clipboard"in navigator&&navigator.clipboard.readText)){K.warn("This browser does not support the Clipboard API!"),this.clipboard&&s(this.clipboard.shapes,this.clipboard.bindings,this.clipboard.assets);return}return navigator.clipboard.readText().then(l=>{const c=JSON.parse(l);if(c.type==="tldr/clipboard")s(c.shapes,c.bindings,c.assets);else{K.warn("The selected shape was not a tldraw shape, treating as text.");const d=B.uniqueId();this.createShapes({id:d,type:"text",parentId:this.appState.currentPageId,text:K.normalizeText(l),point:this.getPagePoint(this.centerPoint,this.currentPageId),style:V({},this.appState.currentStyle)}),this.select(d)}}).catch(()=>{K.warn("Read permissions denied!"),this.clipboard&&s(this.clipboard.shapes,this.clipboard.bindings,this.clipboard.assets)}),this}),b(this,"copySvg",(o=this.selectedIds,s=this.currentPageId)=>{if(o.length===0&&(o=Object.keys(this.page.shapes)),o.length===0)return;const l=document.createElementNS("http://www.w3.org/2000/svg","svg"),c=document.createElementNS("http://www.w3.org/2000/svg","defs"),d=document.createElementNS("http://www.w3.org/2000/svg","style");d.textContent="@import url('https://fonts.googleapis.com/css2?family=Caveat+Brush&family=Source+Code+Pro&family=Source+Sans+Pro&family=Crimson+Pro&display=block');",c.appendChild(d),l.appendChild(c);const C=o.map(y=>this.getShape(y,s)).sort((y,L)=>y.childIndex-L.childIndex),g=B.getCommonBounds(C.map(K.getRotatedBounds)),m=y=>{const L=K.getShapeUtil(y),S=L.getBounds(y),R=L.getSvgElement(y);if(!!R)return y.type==="image"?R.setAttribute("xlink:href",this.document.assets[y.assetId].src):y.type==="video"&&R.setAttribute("xlink:href",this.serializeVideo(y.id)),R.setAttribute("transform",`translate(${hs+y.point[0]-g.minX}, ${hs+y.point[1]-g.minY}) rotate(${(y.rotation||0)*180/Math.PI}, ${S.width/2}, ${S.height/2})`),R};C.forEach(y=>{var L;if((L=y.children)==null?void 0:L.length){const R=document.createElementNS("http://www.w3.org/2000/svg","g");y.children.forEach($=>{const k=this.getShape($,s),T=m(k);T&&R.appendChild(T)}),l.appendChild(R);return}const S=m(y);S&&l.appendChild(S)}),l.setAttribute("viewBox",[0,0,g.width+hs*2,g.height+hs*2].join(" ")),l.setAttribute("width",String(g.width)),l.setAttribute("height",String(g.height)),l.setAttribute("fill","transparent"),l.querySelectorAll(".tl-fill-hitarea, .tl-stroke-hitarea, .tl-binding-indicator").forEach(y=>y.remove());const _=new XMLSerializer().serializeToString(l).replaceAll("&#10;      ","").replaceAll(/((\s|")[0-9]*\.[0-9]{2})([0-9]*)(\b|"|\))/g,"$1");return K.copyStringToClipboard(_),_}),b(this,"copyJson",(o=this.selectedIds,s=this.currentPageId)=>{if(o.length===0&&(o=Object.keys(this.page.shapes)),o.length===0)return;const l=o.map(d=>this.getShape(d,s)),c=JSON.stringify(l,null,2);return K.copyStringToClipboard(c),c}),b(this,"setCamera",(o,s,l)=>(this.updateViewport(o,s),this.patchState({document:{pageStates:{[this.currentPageId]:{camera:{point:o,zoom:s}}}}},l),this)),b(this,"resetCamera",()=>this.setCamera(this.centerPoint,1,"reset_camera")),b(this,"pan",o=>{const{camera:s}=this.pageState;return this.setCamera(M.toFixed(M.sub(s.point,o)),s.zoom,"panned")}),b(this,"pinchZoom",(o,s,l)=>{const{camera:c}=this.pageState,d=M.sub(c.point,M.div(s,c.zoom)),C=l,g=M.sub(M.div(o,c.zoom),d),m=M.sub(M.div(o,C),d);return this.setCamera(M.toFixed(M.add(d,M.sub(m,g))),C,"pinch_zoomed")}),b(this,"zoomTo",(o,s=this.centerPoint)=>{const{zoom:l,point:c}=this.pageState.camera,d=M.sub(M.div(s,l),c),C=M.sub(M.div(s,o),c);return this.setCamera(M.toFixed(M.add(c,M.sub(C,d))),o,"zoomed_camera")}),b(this,"zoomIn",()=>{const o=Math.round(this.pageState.camera.zoom*100/25),s=K.getCameraZoom((o+1)*.25);return this.zoomTo(s)}),b(this,"zoomOut",()=>{const o=Math.round(this.pageState.camera.zoom*100/25),s=K.getCameraZoom((o-1)*.25);return this.zoomTo(s)}),b(this,"zoomToFit",()=>{const{shapes:o,pageState:{camera:s}}=this;if(o.length===0)return this;const{rendererBounds:l}=this,c=B.getCommonBounds(o.map(K.getBounds));let d=K.getCameraZoom(Math.min((l.width-ps)/c.width,(l.height-ps)/c.height));d=s.zoom===d||s.zoom<1?Math.min(1,d):d;const C=(l.width-c.width*d)/2/d,g=(l.height-c.height*d)/2/d;return this.setCamera(M.toFixed(M.sub([C,g],[c.minX,c.minY])),d,"zoomed_to_fit")}),b(this,"zoomToSelection",()=>{if(this.selectedIds.length===0)return this;const{rendererBounds:o}=this,s=K.getSelectedBounds(this.state);let l=K.getCameraZoom(Math.min((o.width-ps)/s.width,(o.height-ps)/s.height));l=this.pageState.camera.zoom===l||this.pageState.camera.zoom<1?Math.min(1,l):l;const c=(o.width-s.width*l)/2/l,d=(o.height-s.height*l)/2/l;return this.setCamera(M.toFixed(M.sub([c,d],[s.minX,s.minY])),l,"zoomed_to_selection")}),b(this,"zoomToContent",()=>{const o=this.shapes,s=this.pageState;if(o.length===0)return this;const{rendererBounds:l}=this,{zoom:c}=s.camera,d=B.getCommonBounds(o.map(K.getBounds)),C=(l.width-d.width*c)/2/c,g=(l.height-d.height*c)/2/c;return this.setCamera(M.toFixed(M.sub([C,g],[d.minX,d.minY])),this.pageState.camera.zoom,"zoomed_to_content")}),b(this,"resetZoom",()=>this.zoomTo(1)),b(this,"zoomBy",B.throttle((o,s)=>{const{zoom:l}=this.pageState.camera,c=K.getCameraZoom(l-o*l);return this.zoomTo(c,s)},16)),b(this,"clearSelectHistory",()=>(this.selectHistory.pointer=0,this.selectHistory.stack=[this.selectedIds],this)),b(this,"addToSelectHistory",o=>(this.selectHistory.pointer<this.selectHistory.stack.length&&(this.selectHistory.stack=this.selectHistory.stack.slice(0,this.selectHistory.pointer+1)),this.selectHistory.pointer++,this.selectHistory.stack.push(o),this)),b(this,"setSelectedIds",(o,s=!1)=>{const l=s?[...this.pageState.selectedIds,...o]:[...o];return this.patchState({appState:{activeTool:"select"},document:{pageStates:{[this.currentPageId]:{selectedIds:l}}}},"selected")}),b(this,"undoSelect",()=>(this.selectHistory.pointer>0&&(this.selectHistory.pointer--,this.setSelectedIds(this.selectHistory.stack[this.selectHistory.pointer])),this)),b(this,"redoSelect",()=>(this.selectHistory.pointer<this.selectHistory.stack.length-1&&(this.selectHistory.pointer++,this.setSelectedIds(this.selectHistory.stack[this.selectHistory.pointer])),this)),b(this,"select",(...o)=>(o.forEach(s=>{if(!this.page.shapes[s])throw Error(`That shape does not exist on page ${this.currentPageId}`)}),this.setSelectedIds(o),this.addToSelectHistory(o),this)),b(this,"selectAll",(o=this.currentPageId)=>this.session?this:(this.setSelectedIds(Object.values(this.document.pages[o].shapes).filter(s=>s.parentId===o).map(s=>s.id)),this.addToSelectHistory(this.selectedIds),this.selectTool("select"),this)),b(this,"selectNone",()=>(this.setSelectedIds([]),this.addToSelectHistory(this.selectedIds),this)),b(this,"startSession",(o,...s)=>{if(this.readOnly&&o!=="brush")return this;this.session&&(K.warn(`Already in a session! (${this.session.constructor.name})`),this.cancelSession());const l=Q6(o);this.session=new l(this,...s);const c=this.session.start();return c&&this.patchState(c,`session:start_${this.session.constructor.name}`),this}),b(this,"updateSession",()=>{const{session:o}=this;if(!o)return this;const s=o.update();return s?this.patchState(s,`session:${o==null?void 0:o.constructor.name}`):this}),b(this,"cancelSession",()=>{const{session:o}=this;if(!o)return this;this.session=void 0;const s=o.cancel();return s&&this.patchState(s,`session:cancel:${o.constructor.name}`),this}),b(this,"completeSession",()=>{var o,s,l,c,d,C,g;const{session:m}=this;if(!m)return this;this.session=void 0;const _=m.complete();if(_===void 0)return this.isCreating=!1,this.patchState({appState:{status:"idle"},document:{pageStates:{[this.currentPageId]:{editingId:void 0,bindingId:void 0,hoveredId:void 0}}}},`session:complete:${m.constructor.name}`);if("after"in _){if(this.isCreating){if(_.before={appState:Y(V({},_.before.appState),{status:"idle"}),document:{pages:{[this.currentPageId]:{shapes:Object.fromEntries(this.selectedIds.map(y=>[y,void 0]))}},pageStates:{[this.currentPageId]:{selectedIds:[],editingId:null,bindingId:null,hoveredId:null}}}},this.appState.isToolLocked){const y=((l=(s=(o=_.after)==null?void 0:o.document)==null?void 0:s.pageStates)==null?void 0:l[this.currentPageId])||{};y.selectedIds=[]}this.isCreating=!1}_.after.appState=Y(V({},_.after.appState),{status:"idle"}),_.after.document=Y(V({},_.after.document),{pageStates:Y(V({},(c=_.after.document)==null?void 0:c.pageStates),{[this.currentPageId]:Y(V({},(((d=_.after.document)==null?void 0:d.pageStates)||{})[this.currentPageId]),{editingId:null})})}),this.setState(_,`session:complete:${m.constructor.name}`)}else this.patchState(Y(V({},_),{appState:Y(V({},_.appState),{status:"idle"}),document:Y(V({},_.document),{pageStates:{[this.currentPageId]:Y(V({},(g=(C=_.document)==null?void 0:C.pageStates)==null?void 0:g[this.currentPageId]),{editingId:null})}})}),`session:complete:${m.constructor.name}`);return this}),b(this,"createShapes",(...o)=>o.length===0?this:this.create(o.map(s=>K.getShapeUtil(s.type).create(V({parentId:this.currentPageId},s))))),b(this,"updateShapes",(...o)=>{const s=this.document.pages[this.currentPageId].shapes,l=o.filter(c=>s[c.id]);return l.length===0?this:this.setState(A6(this,l,this.currentPageId),"updated_shapes")}),b(this,"create",(o=[],s=[])=>o.length===0?this:this.setState(L9(this,o,s))),b(this,"patchCreate",(o=[],s=[])=>o.length===0?this:this.patchState(L9(this,o,s).after)),b(this,"delete",(o=this.selectedIds)=>{var s,l;if(o.length===0)return this;const c=S9(this,o);if(this.callbacks.onAssetDelete&&((s=c.before.document)==null?void 0:s.assets)&&((l=c.after.document)==null?void 0:l.assets)){const d=Object.keys(c.before.document.assets).filter(m=>!!c.before.document.assets[m]),C=Object.keys(c.after.document.assets).filter(m=>!!c.after.document.assets[m]);d.filter(m=>!C.includes(m)).forEach(m=>this.callbacks.onAssetDelete(m))}return this.setState(c)}),b(this,"deleteAll",()=>(this.selectAll(),this.delete(),this)),b(this,"style",(o,s=this.selectedIds)=>this.setState(B6(this,s,o))),b(this,"align",(o,s=this.selectedIds)=>s.length<2?this:this.setState(w6(this,s,o))),b(this,"distribute",(o,s=this.selectedIds)=>s.length<3?this:this.setState(S6(this,s,o))),b(this,"stretch",(o,s=this.selectedIds)=>s.length<2?this:this.setState(T6(this,s,o))),b(this,"flipHorizontal",(o=this.selectedIds)=>o.length===0?this:this.setState(R9(this,o,"horizontal"))),b(this,"flipVertical",(o=this.selectedIds)=>o.length===0?this:this.setState(R9(this,o,"vertical"))),b(this,"moveToPage",(o,s=this.currentPageId,l=this.selectedIds)=>{if(l.length===0)return this;const{rendererBounds:c}=this;return this.setState($6(this,l,c,s,o)),this}),b(this,"moveToBack",(o=this.selectedIds)=>o.length===0?this:this.setState(Ls(this,o,"toBack"))),b(this,"moveBackward",(o=this.selectedIds)=>o.length===0?this:this.setState(Ls(this,o,"backward"))),b(this,"moveForward",(o=this.selectedIds)=>o.length===0?this:this.setState(Ls(this,o,"forward"))),b(this,"moveToFront",(o=this.selectedIds)=>o.length===0?this:this.setState(Ls(this,o,"toFront"))),b(this,"nudge",(o,s=!1,l=this.selectedIds)=>{if(l.length===0)return this;const c=s?this.settings.showGrid?this.currentGrid*4:10:this.settings.showGrid?this.currentGrid:1;return this.setState(D6(this,l,M.mul(o,c)))}),b(this,"duplicate",(o=this.selectedIds,s)=>this.readOnly?this:o.length===0?this:this.setState(I6(this,o,s))),b(this,"resetBounds",(o=this.selectedIds)=>{const s=M9(this,o,this.currentPageId);return this.setState(M9(this,o,this.currentPageId),s.id)}),b(this,"toggleHidden",(o=this.selectedIds)=>o.length===0?this:this.setState(tl(this,o,"isHidden"))),b(this,"toggleLocked",(o=this.selectedIds)=>o.length===0?this:this.setState(tl(this,o,"isLocked"))),b(this,"toggleAspectRatioLocked",(o=this.selectedIds)=>o.length===0?this:this.setState(tl(this,o,"isAspectRatioLocked"))),b(this,"toggleDecoration",(o,s=this.selectedIds)=>s.length===0||!(o==="start"||o==="end")?this:this.setState(V6(this,s,o))),b(this,"setShapeProps",(o,s=this.selectedIds)=>this.setState(Z6(this,s,o))),b(this,"rotate",(o=Math.PI*-.5,s=this.selectedIds)=>{if(s.length===0)return this;const l=k6(this,s,o);return l?this.setState(l):this}),b(this,"group",(o=this.selectedIds,s=B.uniqueId(),l=this.currentPageId)=>{if(this.readOnly)return this;if(o.length===1&&this.getShape(o[0],l).type==="group")return this.ungroup(o,l);if(o.length<2)return this;const c=P6(this,o,s,l);return c?this.setState(c):this}),b(this,"ungroup",(o=this.selectedIds,s=this.currentPageId)=>{if(this.readOnly)return this;const l=o.map(d=>this.getShape(d,s)).filter(d=>d.type==="group");if(l.length===0)return this;const c=j6(this,o,l,s);return c?this.setState(c):this}),b(this,"cancel",()=>{var o,s;return(s=(o=this.currentTool).onCancel)==null||s.call(o),this}),b(this,"addMediaFromFile",(o,...s)=>tt(this,[o,...s],function*(l,c=this.centerPoint){this.setIsLoading(!0);const d=B.uniqueId(),C=this.getPagePoint(c),g=l.name.match(/\.[0-9a-z]+$/i);if(!g)throw Error("No extension");const m=K2.includes(g[0].toLowerCase()),_=X2.includes(g[0].toLowerCase());if(!(m||_))throw Error("Wrong extension");const y=m?"image":"video",L=m?"image":"video";let S;try{if(this.callbacks.onAssetCreate){const R=yield this.callbacks.onAssetCreate(l,d);if(!R)throw Error("Asset creation callback returned false");S=R}else S=yield Q8(l);if(typeof S=="string"){const R=m?yield eu(S):yield tu(S),$=Object.values(this.document.assets).find(T=>T.type===L&&T.src===S);let k;if($)k=$.id;else{k=B.uniqueId();const T={id:k,type:L,src:S,size:R};this.patchState({document:{assets:{[k]:T}}})}this.createImageOrVideoShapeAtPoint(d,y,C,R,k)}}catch(R){return console.warn(R),this.setIsLoading(!1),this}return this.setIsLoading(!1),this})),b(this,"onKeyDown",(o,s,l)=>{var c,d;switch(l.key){case"/":{if(this.status==="idle"&&!this.pageState.editingId){const{shiftKey:C,metaKey:g,altKey:m,ctrlKey:_,spaceKey:y}=this;this.onPointerDown({target:"canvas",pointerId:0,origin:s.point,point:s.point,delta:[0,0],pressure:.5,shiftKey:C,ctrlKey:_,metaKey:g,altKey:m,spaceKey:y},{shiftKey:C,altKey:m,ctrlKey:_,pointerId:0,clientX:s.point[0],clientY:s.point[1]})}break}case"Escape":{this.cancel();break}case"Meta":{this.metaKey=!0;break}case"Alt":{this.altKey=!0;break}case"Control":{this.ctrlKey=!0;break}case" ":{this.isForcePanning=!0,this.spaceKey=!0;break}}return(d=(c=this.currentTool).onKeyDown)==null||d.call(c,o,s,l),this}),b(this,"onKeyUp",(o,s,l)=>{var c,d;if(!!s){switch(l.key){case"/":{const{currentPoint:C,shiftKey:g,metaKey:m,altKey:_,ctrlKey:y,spaceKey:L}=this;this.onPointerUp({target:"canvas",pointerId:0,origin:C,point:C,delta:[0,0],pressure:.5,shiftKey:g,ctrlKey:y,metaKey:m,altKey:_,spaceKey:L},{shiftKey:g,altKey:_,ctrlKey:y,pointerId:0,clientX:C[0],clientY:C[1]});break}case"Meta":{this.metaKey=!1;break}case"Alt":{this.altKey=!1;break}case"Control":{this.ctrlKey=!1;break}case" ":{this.isForcePanning=!1,this.spaceKey=!1;break}}(d=(c=this.currentTool).onKeyUp)==null||d.call(c,o,s,l)}}),b(this,"onDragOver",o=>{o.preventDefault()}),b(this,"onDrop",o=>tt(this,null,function*(){var s;if(o.preventDefault(),this.disableAssets)return this;if((s=o.dataTransfer.files)==null?void 0:s.length){const l=o.dataTransfer.files[0];this.addMediaFromFile(l,[o.clientX,o.clientY])}return this})),b(this,"onPinchStart",(o,s)=>{var l,c;(c=(l=this.currentTool).onPinchStart)==null||c.call(l,o,s)}),b(this,"onPinchEnd",(o,s)=>{var l,c;return(c=(l=this.currentTool).onPinchEnd)==null?void 0:c.call(l,o,s)}),b(this,"onPinch",(o,s)=>{var l,c;return(c=(l=this.currentTool).onPinch)==null?void 0:c.call(l,o,s)}),b(this,"onPan",(o,s)=>{if(this.appState.status==="pinching")return;const l=M.div(o.delta,this.pageState.camera.zoom),c=this.pageState.camera.point,d=M.sub(c,l);M.isEqual(d,c)||(this.pan(l),this.isForcePanning||this.onPointerMove(o,s))}),b(this,"onZoom",(o,s)=>{if(this.state.appState.status!=="idle")return;const l=o.delta[2]/50;this.zoomBy(l,o.point),this.onPointerMove(o,s)}),b(this,"updateInputs",o=>{this.currentPoint=this.getPagePoint(o.point).concat(o.pressure),this.shiftKey=o.shiftKey,this.altKey=o.altKey,this.ctrlKey=o.ctrlKey,this.metaKey=o.metaKey}),b(this,"onPointerMove",(o,s)=>{var l,c,d,C,g;if(this.previousPoint=this.currentPoint,this.updateInputs(o,s),this.isForcePanning&&this.isPointing){(l=this.onPan)==null||l.call(this,Y(V({},o),{delta:M.neg(o.delta)}),s);return}if((d=(c=this.currentTool).onPointerMove)==null||d.call(c,o,s),this.state.room){const{users:m,userId:_}=this.state.room;(g=(C=this.callbacks).onChangePresence)==null||g.call(C,this,Y(V({},m[_]),{point:this.getPagePoint(o.point)}))}}),b(this,"onPointerDown",(o,s)=>{var l,c;if(s.buttons===4)this.isForcePanning=!0;else if(this.isPointing)return;this.isPointing=!0,this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),!this.isForcePanning&&((c=(l=this.currentTool).onPointerDown)==null||c.call(l,o,s))}),b(this,"onPointerUp",(o,s)=>{var l,c;this.isPointing=!1,this.shiftKey||(this.isForcePanning=!1),this.updateInputs(o,s),(c=(l=this.currentTool).onPointerUp)==null||c.call(l,o,s)}),b(this,"onPointCanvas",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onPointCanvas)==null||c.call(l,o,s)}),b(this,"onDoubleClickCanvas",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onDoubleClickCanvas)==null||c.call(l,o,s)}),b(this,"onRightPointCanvas",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onRightPointCanvas)==null||c.call(l,o,s)}),b(this,"onDragCanvas",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onDragCanvas)==null||c.call(l,o,s)}),b(this,"onReleaseCanvas",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onReleaseCanvas)==null||c.call(l,o,s)}),b(this,"onPointShape",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onPointShape)==null||c.call(l,o,s)}),b(this,"onReleaseShape",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onReleaseShape)==null||c.call(l,o,s)}),b(this,"onDoubleClickShape",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onDoubleClickShape)==null||c.call(l,o,s)}),b(this,"onRightPointShape",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onRightPointShape)==null||c.call(l,o,s)}),b(this,"onDragShape",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onDragShape)==null||c.call(l,o,s)}),b(this,"onHoverShape",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onHoverShape)==null||c.call(l,o,s)}),b(this,"onUnhoverShape",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onUnhoverShape)==null||c.call(l,o,s)}),b(this,"onPointBounds",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onPointBounds)==null||c.call(l,o,s)}),b(this,"onDoubleClickBounds",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onDoubleClickBounds)==null||c.call(l,o,s)}),b(this,"onRightPointBounds",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onRightPointBounds)==null||c.call(l,o,s)}),b(this,"onDragBounds",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onDragBounds)==null||c.call(l,o,s)}),b(this,"onHoverBounds",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onHoverBounds)==null||c.call(l,o,s)}),b(this,"onUnhoverBounds",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onUnhoverBounds)==null||c.call(l,o,s)}),b(this,"onReleaseBounds",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onReleaseBounds)==null||c.call(l,o,s)}),b(this,"onPointBoundsHandle",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onPointBoundsHandle)==null||c.call(l,o,s)}),b(this,"onDoubleClickBoundsHandle",(o,s)=>{var l,c;if(this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onDoubleClickBoundsHandle)==null||c.call(l,o,s),this.selectedIds.length!==1)return;const d=this.getShape(this.selectedIds[0]);if(d.type==="image"||d.type==="video"){const C=this.document.assets[d.assetId],g=K.getShapeUtil(d),m=g.getCenter(d),_=g.getCenter(Y(V({},d),{size:C.size})),y=M.sub(_,m);this.updateShapes({id:d.id,point:M.sub(d.point,y),size:C.size})}}),b(this,"onRightPointBoundsHandle",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onRightPointBoundsHandle)==null||c.call(l,o,s)}),b(this,"onDragBoundsHandle",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onDragBoundsHandle)==null||c.call(l,o,s)}),b(this,"onHoverBoundsHandle",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onHoverBoundsHandle)==null||c.call(l,o,s)}),b(this,"onUnhoverBoundsHandle",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onUnhoverBoundsHandle)==null||c.call(l,o,s)}),b(this,"onReleaseBoundsHandle",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onReleaseBoundsHandle)==null||c.call(l,o,s)}),b(this,"onPointHandle",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onPointHandle)==null||c.call(l,o,s)}),b(this,"onDoubleClickHandle",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onDoubleClickHandle)==null||c.call(l,o,s)}),b(this,"onRightPointHandle",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onRightPointHandle)==null||c.call(l,o,s)}),b(this,"onDragHandle",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onDragHandle)==null||c.call(l,o,s)}),b(this,"onHoverHandle",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onHoverHandle)==null||c.call(l,o,s)}),b(this,"onUnhoverHandle",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onUnhoverHandle)==null||c.call(l,o,s)}),b(this,"onReleaseHandle",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onReleaseHandle)==null||c.call(l,o,s)}),b(this,"onShapeChange",o=>{this.updateShapes(o)}),b(this,"onShapeBlur",()=>{var o,s;if(performance.now()-this.editingStartTime<50)return;const{editingId:l}=this.pageState,{isToolLocked:c}=this.getAppState();if(l){const d=this.getShape(l);this.setEditingId(),d.type==="text"&&(d.text.trim().length<=0?this.patchState(S9(this,[l]).after,"delete_empty_text"):c||this.select(l))}(s=(o=this.currentTool).onShapeBlur)==null||s.call(o)}),b(this,"onShapeClone",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onShapeClone)==null||c.call(l,o,s)}),b(this,"onRenderCountChange",o=>{const s=this.getAppState();s.isEmptyCanvas&&o.length>0?this.patchState({appState:{isEmptyCanvas:!1}},"empty_canvas:false"):!s.isEmptyCanvas&&o.length<=0&&this.patchState({appState:{isEmptyCanvas:!0}},"empty_canvas:true")}),b(this,"onError",()=>{}),b(this,"getShapeUtil",K.getShapeUtil),this.callbacks=n}setStatus(e){return this.patchState({appState:{status:e}},`set_status:${e}`)}get isMenuOpen(){return this.appState.isMenuOpen}get isLoading(){return this.appState.isLoading}get disableAssets(){return this.appState.disableAssets}get history(){return this.stack.slice(0,this.pointer+1)}set history(e){this.replaceHistory(e)}get document(){return this.state.document}get settings(){return this.state.settings}get appState(){return this.state.appState}get currentPageId(){return this.state.appState.currentPageId}get page(){return this.state.document.pages[this.currentPageId]}get shapes(){return Object.values(this.page.shapes)}get bindings(){return Object.values(this.page.bindings)}get assets(){return Object.values(this.document.assets)}get pageState(){return this.state.document.pageStates[this.currentPageId]}get selectedIds(){return this.pageState.selectedIds}createTextShapeAtPoint(e,n){const{shapes:o,appState:{currentPageId:s,currentStyle:l}}=this,c=o.length===0?1:o.filter(m=>m.parentId===s).sort((m,_)=>_.childIndex-m.childIndex)[0].childIndex+1,d=Io.text,C=d.create({id:n||B.uniqueId(),parentId:s,childIndex:c,point:e,style:V({},l)}),g=d.getBounds(C);return C.point=M.sub(C.point,[g.width/2,g.height/2]),this.createShapes(C),this.setEditingId(C.id),this}createImageOrVideoShapeAtPoint(e,n,o,s,l){const{shapes:c,appState:{currentPageId:d,currentStyle:C}}=this,g=c.length===0?1:c.filter(L=>L.parentId===d).sort((L,S)=>S.childIndex-L.childIndex)[0].childIndex+1,m=Io[n],_=m.create({id:e,parentId:d,childIndex:g,point:o,size:s,style:V({},C),assetId:l}),y=m.getBounds(_);return _.point=M.sub(_.point,[y.width/2,y.height/2]),this.createShapes(_),this}isSelected(e){return this.selectedIds.includes(e)}serializeVideo(e){const n=document.getElementById(e+"_video");if(n){const o=document.createElement("canvas");return o.width=n.videoWidth,o.height=n.videoHeight,o.getContext("2d").drawImage(n,0,0),o.toDataURL("image/png")}else throw new Error("Video with id "+e+" not found")}serializeImage(e){const n=document.getElementById(e+"_image");if(n){const o=document.createElement("canvas");return o.width=n.width,o.height=n.height,o.getContext("2d").drawImage(n,0,0),o.toDataURL("image/png")}else throw new Error("Image with id "+e+" not found")}patchAssets(e){this.document.assets=V(V({},this.document.assets),e)}exportAllShapesAs(e){return tt(this,null,function*(){const n=[...this.selectedIds];this.selectAll();const{width:o,height:s}=B.expandBounds(K.getSelectedBounds(this.state),64),l=K.getAllEffectedShapeIds(this.state,this.selectedIds,this.currentPageId);this.setSelectedIds(n),yield this.exportShapesAs(l,[o,s],e)})}exportSelectedShapesAs(e){return tt(this,null,function*(){const{width:n,height:o}=B.expandBounds(K.getSelectedBounds(this.state),64),s=K.getAllEffectedShapeIds(this.state,this.selectedIds,this.currentPageId);yield this.exportShapesAs(s,[n,o],e)})}exportShapesAs(e,n,o){return tt(this,null,function*(){var s;if(!!this.callbacks.onExport){this.setIsLoading(!0);try{const l={},c=e.map(g=>{const m=V({},this.getShape(g));if(m.assetId){const _=V({},this.document.assets[m.assetId]);_.src.toLowerCase().endsWith("gif")&&(_.src=this.serializeImage(m.id)),m.type==="video"&&(_.src=this.serializeVideo(m.id),_.type="image",m.type="image"),l[m.assetId]=_}return m});let d;o==="svg"?d=this.copySvg(e):o==="json"&&(d=this.copyJson(e));const C={currentPageId:this.currentPageId,name:(s=this.page.name)!=null?s:"export",shapes:c,assets:l,type:o,serialized:d,size:o==="png"?M.mul(n,2):n};yield this.callbacks.onExport(C)}catch(l){console.error(l)}finally{this.setIsLoading(!1)}}})}get room(){return this.state.room}get isLocal(){return this.state.room===void 0||this.state.room.id==="local"}get status(){return this.appState.status}get currentUser(){if(!!this.state.room)return this.state.room.users[this.state.room.userId]}get centerPoint(){const{width:e,height:n}=this.rendererBounds;return M.toFixed([e/2,n/2])}get currentGrid(){const{zoom:e}=this.pageState.camera;return e<.15?Eo*16:e<1?Eo*4:Eo*1}},fi=O1;b(fi,"version",15.3),b(fi,"defaultDocument",{id:"doc",name:"New Document",version:O1.version,pages:{page:{id:"page",name:"Page 1",childIndex:1,shapes:{},bindings:{}}},pageStates:{page:{id:"page",selectedIds:[],camera:{point:[0,0],zoom:1}}},assets:{}}),b(fi,"defaultState",{settings:{isPenMode:!1,isDarkMode:!1,isZoomSnap:!1,isFocusMode:!1,isSnapping:!1,isDebugMode:!1,isReadonlyMode:!1,nudgeDistanceLarge:16,nudgeDistanceSmall:1,showRotateHandles:!0,showBindingHandles:!0,showCloneHandles:!1,showGrid:!1},appState:{status:"idle",activeTool:"select",hoveredId:void 0,currentPageId:"page",currentStyle:Gr,isToolLocked:!1,isMenuOpen:!1,isEmptyCanvas:!1,snapLines:[],isLoading:!1,disableAssets:!1},document:O1.defaultDocument});var HL={select:I9,erase:P9,text:$9,draw:H9,ellipse:O9,rectangle:k9,triangle:T9,line:B9,arrow:V9,sticky:D9};function tf(e){const n=Jt(),o=h.useCallback((g=!1)=>{const m=e.current;return g&&n.isMenuOpen?!0:m&&(document.activeElement===m||m.contains(document.activeElement))},[e]);Fe("v,1",()=>{!o(!0)||n.selectTool("select")},[n,e.current]),Fe("d,p,2",()=>{!o(!0)||n.selectTool("draw")},void 0,[n]),Fe("e,3",()=>{!o(!0)||n.selectTool("erase")},void 0,[n]),Fe("r,4",()=>{!o(!0)||n.selectTool("rectangle")},void 0,[n]),Fe("o,5",()=>{!o(!0)||n.selectTool("ellipse")},void 0,[n]),Fe("g,6",()=>{!o()||n.selectTool("triangle")},void 0,[n]),Fe("l,7",()=>{!o(!0)||n.selectTool("line")},void 0,[n]),Fe("a,8",()=>{!o(!0)||n.selectTool("arrow")},void 0,[n]),Fe("t,9",()=>{!o(!0)||n.selectTool("text")},void 0,[n]),Fe("s,0",()=>{!o(!0)||n.selectTool("sticky")},void 0,[n]),Fe("ctrl+shift+d,\u2318+shift+d",g=>{!o(!0)||(n.toggleDarkMode(),g.preventDefault())},void 0,[n]),Fe("ctrl+.,\u2318+.",()=>{!o(!0)||n.toggleFocusMode()},void 0,[n]),Fe("ctrl+shift+g,\u2318+shift+g",()=>{!o(!0)||n.toggleGrid()},void 0,[n]);const{onNewProject:s,onOpenProject:l,onSaveProject:c,onSaveProjectAs:d,onOpenMedia:C}=Z9();Fe("ctrl+n,\u2318+n",g=>{!o()||s(g)},void 0,[n]),Fe("ctrl+s,\u2318+s",g=>{!o()||c(g)},void 0,[n]),Fe("ctrl+shift+s,\u2318+shift+s",g=>{!o()||d(g)},void 0,[n]),Fe("ctrl+o,\u2318+o",g=>{!o()||l(g)},void 0,[n]),Fe("ctrl+u,\u2318+u",g=>{!o()||C(g)},void 0,[n]),Fe("\u2318+z,ctrl+z",()=>{!o(!0)||(n.session?n.cancelSession():n.undo())},void 0,[n]),Fe("ctrl+shift+z,\u2318+shift+z",()=>{!o(!0)||(n.session?n.cancelSession():n.redo())},void 0,[n]),Fe("\u2318+u,ctrl+u",()=>{!o()||n.undoSelect()},void 0,[n]),Fe("ctrl+shift-u,\u2318+shift+u",()=>{!o()||n.redoSelect()},void 0,[n]),Fe("ctrl+=,\u2318+=,ctrl+num_subtract,\u2318+num_subtract",g=>{!o(!0)||(n.zoomIn(),g.preventDefault())},void 0,[n]),Fe("ctrl+-,\u2318+-,ctrl+num_add,\u2318+num_add",g=>{!o(!0)||(n.zoomOut(),g.preventDefault())},void 0,[n]),Fe("shift+0,ctrl+numpad_0,\u2318+numpad_0",()=>{!o(!0)||n.resetZoom()},void 0,[n]),Fe("shift+1",()=>{!o(!0)||n.zoomToFit()},void 0,[n]),Fe("shift+2",()=>{!o(!0)||n.zoomToSelection()},void 0,[n]),Fe("ctrl+d,\u2318+d",g=>{!o()||(n.duplicate(),g.preventDefault())},void 0,[n]),Fe("shift+h",()=>{!o(!0)||n.flipHorizontal()},void 0,[n]),Fe("shift+v",()=>{!o(!0)||n.flipVertical()},void 0,[n]),Fe("escape",()=>{!o(!0)||n.cancel()},void 0,[n]),Fe("backspace,del",()=>{!o()||n.delete()},void 0,[n]),Fe("\u2318+a,ctrl+a",()=>{!o(!0)||n.selectAll()},void 0,[n]),Fe("up",()=>{!o()||n.nudge([0,-1],!1)},void 0,[n]),Fe("right",()=>{!o()||n.nudge([1,0],!1)},void 0,[n]),Fe("down",()=>{!o()||n.nudge([0,1],!1)},void 0,[n]),Fe("left",()=>{!o()||n.nudge([-1,0],!1)},void 0,[n]),Fe("shift+up",()=>{!o()||n.nudge([0,-1],!0)},void 0,[n]),Fe("shift+right",()=>{!o()||n.nudge([1,0],!0)},void 0,[n]),Fe("shift+down",()=>{!o()||n.nudge([0,1],!0)},void 0,[n]),Fe("shift+left",()=>{!o()||n.nudge([-1,0],!0)},void 0,[n]),Fe("\u2318+shift+l,ctrl+shift+l",()=>{!o()||n.toggleLocked()},void 0,[n]),Fe("\u2318+c,ctrl+c",()=>{!o()||n.copy()},void 0,[n]),Fe("\u2318+shift+c,ctrl+shift+c",g=>{!o()||(n.copySvg(),g.preventDefault())},void 0,[n]),Fe("\u2318+x,ctrl+x",()=>{!o()||n.cut()},void 0,[n]),Fe("\u2318+v,ctrl+v",()=>{!o()||n.paste()},void 0,[n]),Fe("\u2318+g,ctrl+g",g=>{!o()||(n.group(),g.preventDefault())},void 0,[n]),Fe("\u2318+shift+g,ctrl+shift+g",g=>{!o()||(n.ungroup(),g.preventDefault())},void 0,[n]),Fe("[",()=>{!o(!0)||n.moveBackward()},void 0,[n]),Fe("]",()=>{!o(!0)||n.moveForward()},void 0,[n]),Fe("shift+[",()=>{!o(!0)||n.moveToBack()},void 0,[n]),Fe("shift+]",()=>{!o(!0)||n.moveToFront()},void 0,[n]),Fe("ctrl+shift+backspace,\u2318+shift+backspace",g=>{!o()||(n.settings.isDebugMode&&n.resetDocument(),g.preventDefault())},void 0,[n]),Fe("alt+command+l,alt+ctrl+l",g=>{!o(!0)||(n.style({textAlign:"start"}),g.preventDefault())},void 0,[n]),Fe("alt+command+t,alt+ctrl+t",g=>{!o(!0)||(n.style({textAlign:"middle"}),g.preventDefault())},void 0,[n]),Fe("alt+command+r,alt+ctrl+r",g=>{!o(!0)||(n.style({textAlign:"end"}),g.preventDefault())},void 0,[n])}var j9=h.createContext({});function Jt(){return h.useContext(j9)}var nl=new Map,hi="Tldraw-fonts",A9=`
@import url('https://fonts.googleapis.com/css2?family=Caveat+Brush&family=Source+Code+Pro&family=Source+Sans+Pro&family=Crimson+Pro&display=block');
`;function rf(){h.useLayoutEffect(()=>{if(nl.get(hi))return;const e=document.createElement("style");return e.innerHTML=A9,e.setAttribute("id",hi),document.head.appendChild(e),nl.set(hi,e),()=>{e&&document.head.contains(e)&&(document.head.removeChild(e),nl.delete(hi))}},[hi,A9])}function Z9(){const e=Jt(),n=h.useCallback(d=>tt(this,null,function*(){var C,g;d&&e.callbacks.onOpenProject&&d.preventDefault(),(g=(C=e.callbacks).onNewProject)==null||g.call(C,e)}),[e]),o=h.useCallback(d=>{var C,g;d&&e.callbacks.onOpenProject&&d.preventDefault(),(g=(C=e.callbacks).onSaveProject)==null||g.call(C,e)},[e]),s=h.useCallback(d=>{var C,g;d&&e.callbacks.onOpenProject&&d.preventDefault(),(g=(C=e.callbacks).onSaveProjectAs)==null||g.call(C,e)},[e]),l=h.useCallback(d=>tt(this,null,function*(){var C,g;d&&e.callbacks.onOpenProject&&d.preventDefault(),(g=(C=e.callbacks).onOpenProject)==null||g.call(C,e)}),[e]),c=h.useCallback(d=>tt(this,null,function*(){var C,g;d&&e.callbacks.onOpenMedia&&d.preventDefault(),(g=(C=e.callbacks).onOpenMedia)==null||g.call(C,e)}),[e]);return{onNewProject:n,onSaveProject:o,onSaveProjectAs:s,onOpenProject:l,onOpenMedia:c}}function OL(){const e=React30.useCallback(d=>tt(this,null,function*(){d.isDirty&&(d.fileSystemHandle?window.confirm("Do you want to save changes to your current project?")&&(yield d.saveProject()):window.confirm("Do you want to save your current project?")&&(yield d.saveProject()))}),[]),n=React30.useCallback(d=>tt(this,null,function*(){window.confirm("Do you want to create a new project?")&&(yield e(d),d.newProject())}),[e]),o=React30.useCallback(d=>{d.saveProject()},[]),s=React30.useCallback(d=>{d.saveProjectAs()},[]),l=React30.useCallback(d=>tt(this,null,function*(){yield e(d),d.openProject()}),[e]),c=React30.useCallback(d=>tt(this,null,function*(){var C;(C=d.openAsset)==null||C.call(d)}),[]);return{onNewProject:n,onSaveProject:o,onSaveProjectAs:s,onOpenProject:l,onOpenMedia:c}}var en={"@initial":"mobile","@micro":"micro","@sm":"small","@md":"medium","@lg":"large"},nf=e=>e.appState.status,of=e=>e.appState.activeTool;function sf(){const e=Jt(),n=e.useStore(nf),o=e.useStore(of);return h.createElement(af,{bp:en,id:"TD-StatusBar"},h.createElement(lf,null,o," | ",n))}var af=De("div",{height:40,userSelect:"none",borderTop:"1px solid $panelContrast",gridArea:"status",display:"flex",color:"$text",justifyContent:"space-between",alignItems:"center",backgroundColor:"$panel",gap:8,fontFamily:"$ui",fontSize:"$0",padding:"0 16px",variants:{bp:{small:{fontSize:"$1"}}}}),lf=De("div",{whiteSpace:"nowrap",overflow:"hidden"}),cf=()=>B.isDarwin()?"\u2318":"Ctrl";function W9({variant:e,children:n}){return h.createElement(df,{variant:e},n.split("").map((o,s)=>h.createElement("span",{key:s},o.replace("#",cf()))))}var df=De("kbd",{marginLeft:"$3",textShadow:"$2",textAlign:"center",fontSize:"$0",fontFamily:"$ui",color:"$text",background:"none",fontWeight:400,gap:"$1",display:"flex",alignItems:"center","& > span":{padding:"$0",borderRadius:"$0",display:"flex",alignItems:"center",justifyContent:"center"},variants:{variant:{tooltip:{"& > span":{color:"$tooltipContrast",background:"$overlayContrast",boxShadow:"$key",width:"20px",height:"20px"}},menu:{}}}}),jr=De("div",{height:"100%",borderRadius:"4px",marginRight:"1px",width:"fit-content",display:"grid",alignItems:"center",justifyContent:"center",outline:"none",border:"none",pointerEvents:"all",cursor:"pointer",color:"currentColor","& svg":{height:16,width:16,strokeWidth:1},"& > *":{gridRow:1,gridColumn:1}}),tn=h.forwardRef((e,n)=>{var o=e,{onClick:s,isActive:l=!1,isWarning:c=!1,hasIndicator:d=!1,hasArrow:C=!1,disabled:g=!1,isSponsor:m=!1,variant:_,kbd:y,children:L}=o,S=Xr(o,["onClick","isActive","isWarning","hasIndicator","hasArrow","disabled","isSponsor","variant","kbd","children"]);return h.createElement(uf,V({ref:n,bp:en,isWarning:c,isActive:l,isSponsor:m,disabled:g,onClick:s,variant:_},S),h.createElement(Ss,null,L,y?h.createElement(W9,{variant:"menu"},y):void 0,d&&h.createElement(Ht.wU,{dir:"ltr"},h.createElement(jr,null,h.createElement(Ta,null))),C&&h.createElement(jr,null,h.createElement(P4,null))))}),Ss=De("div",{height:"100%",width:"100%",backgroundColor:"$panel",borderRadius:"$2",display:"flex",gap:"$1",flexDirection:"row",alignItems:"center",padding:"0 $3",justifyContent:"space-between",border:"1px solid transparent","& svg":{position:"relative",stroke:"$overlay",strokeWidth:1,zIndex:1}}),uf=De("button",{position:"relative",width:"100%",background:"none",border:"none",cursor:"pointer",height:"32px",outline:"none",color:"$text",fontFamily:"$ui",fontWeight:400,fontSize:"$1",borderRadius:4,userSelect:"none",margin:0,padding:"0 0","&[data-disabled]":{opacity:.3},"&:disabled":{opacity:.3},[`&:focus:not(:disabled) ${Ss}`]:{backgroundColor:"$hover"},"& a":{textDecoration:"none",color:"$text"},variants:{bp:{mobile:{},small:{}},variant:{styleMenu:{margin:"$1 0 $1 0"},wide:{gridColumn:"1 / span 4"}},size:{icon:{padding:"4px ",width:"auto"}},isSponsor:{true:{color:"#eb30a2"},false:{}},isWarning:{true:{color:"$warn"}},isActive:{true:{backgroundColor:"$hover"},false:{}}},compoundVariants:[{isActive:!1,isSponsor:!0,bp:"small",css:{[`&:hover:not(:disabled) ${Ss}`]:{backgroundColor:"$sponsorContrast",border:"1px solid $panel",'& *[data-shy="true"]':{opacity:1}}}},{isActive:!1,isSponsor:!1,bp:"small",css:{[`&:hover:not(:disabled) ${Ss}`]:{backgroundColor:"$hover",border:"1px solid $panel",'& *[data-shy="true"]':{opacity:1}}}}]}),zn=De("div",{position:"relative",overflow:"hidden",userSelect:"none",display:"flex",flexDirection:"column",zIndex:180,minWidth:180,pointerEvents:"all",backgroundColor:"$panel",boxShadow:"$panel",padding:"$2 $2",borderRadius:"$3",font:"$ui",variants:{size:{small:{minWidth:72}}}}),ff=e=>e.appState.isEmptyCanvas&&Object.keys(e.document.pages[e.appState.currentPageId].shapes).length>0,hf=h.memo(function(){const n=Jt();return n.useStore(ff)?h.createElement(pf,{id:"TD-Tools-Back_to_content"},h.createElement(tn,{onClick:n.zoomToContent},"Back to content")):null}),pf=De(zn,{pointerEvents:"all",width:"fit-content",minWidth:0,gridRow:1,flexGrow:2,display:"block"});function dr({children:e,label:n,kbd:o,id:s,side:l="top"}){return h.createElement("span",{id:s},h.createElement(rs.fC,null,h.createElement(rs.xz,{dir:"ltr",asChild:!0},h.createElement("span",null,e)),h.createElement(vf,{dir:"ltr",side:l,sideOffset:8},n,o?h.createElement(W9,{variant:"tooltip"},o):null,h.createElement(gf,null))))}var vf=De(rs.VY,{borderRadius:3,padding:"$3 $3 $3 $3",fontSize:"$1",backgroundColor:"$tooltip",color:"$tooltipContrast",boxShadow:"$3",display:"flex",alignItems:"center",fontFamily:"$ui",userSelect:"none"}),gf=De(rs.Eh,{fill:"$tooltip",margin:"0 8px"}),Mt=h.forwardRef((e,n)=>{var o=e,{onSelect:s,onClick:l,onDoubleClick:c,variant:d,children:C,isToolLocked:g=!1,disabled:m=!1,isActive:_=!1,isSponsor:y=!1,onKeyDown:L,id:S}=o,R=Xr(o,["onSelect","onClick","onDoubleClick","variant","children","isToolLocked","disabled","isActive","isSponsor","onKeyDown","id"]);return h.createElement(Cf,V({ref:n,isActive:_,isSponsor:y,variant:d,onClick:l,disabled:m,onPointerDown:s,onDoubleClick:c,onKeyDown:L,bp:en,id:S},R),h.createElement(Sr,null,C),g&&h.createElement(mf,null))});function Po(e){var n=e,{label:o,kbd:s,isLocked:l}=n,c=Xr(n,["label","kbd","isLocked"]);const d=Jt(),C=h.useCallback(()=>{d.toggleToolLock()},[]),g=h.useCallback(m=>{m.key===" "&&d.isForcePanning&&m.preventDefault()},[]);return h.createElement(dr,{label:o[0].toUpperCase()+o.slice(1),kbd:s},h.createElement(Mt,Y(V({},c),{variant:"primary",isToolLocked:l&&c.isActive,onDoubleClick:C,onKeyDown:g})))}var Sr=De("div",{position:"relative",height:"100%",width:"100%",backgroundColor:"$panel",borderRadius:"$2",margin:"0",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"$ui",color:"inherit",userSelect:"none",boxSizing:"border-box",border:"1px solid transparent"}),Cf=De("button",{position:"relative",color:"$text",fontSize:"$0",background:"none",margin:"0",padding:"$2",display:"flex",alignItems:"center",justifyContent:"center",outline:"none",cursor:"pointer",pointerEvents:"all",border:"none",height:"40px",width:"40px",[`&:disabled ${Sr}`]:{opacity:.618},variants:{variant:{primary:{marginTop:"0"},icon:{[`& ${Sr}`]:{display:"grid","& > *":{gridRow:1,gridColumn:1}}},text:{width:"auto",[`& ${Sr}`]:{fontSize:"$1",padding:"0 $3",gap:"$3"}},circle:{padding:"$2",[`& ${Sr}`]:{border:"1px solid $panelContrast",borderRadius:"100%",boxShadow:"$panel"},[`& ${Sr} > svg`]:{width:14,height:14}}},isSponsor:{true:{[`${Sr}`]:{backgroundColor:"$sponsorContrast"}}},isActive:{true:{},false:{}},bp:{mobile:{},small:{}}},compoundVariants:[{variant:"primary",bp:"mobile",css:{height:"40px",width:"40px",[`& ${Sr} > svg`]:{width:16,height:16}}},{variant:"primary",bp:"small",css:{height:"44px",width:"44px",[`& ${Sr} > svg`]:{width:20,height:20}}},{isActive:!0,isSponsor:!1,css:{[`${Sr}`]:{backgroundColor:"$selected",color:"$selectedContrast"}}},{isActive:!1,isSponsor:!1,bp:"small",css:{[`&:hover:not(:disabled) ${Sr}`]:{backgroundColor:"$hover",border:"1px solid $panel"},[`&:focus:not(:disabled) ${Sr}`]:{backgroundColor:"$hover"}}}]}),mf=De("div",{position:"absolute",width:10,height:10,backgroundColor:"$selected",borderRadius:"100%",bottom:-2,border:"2px solid $panel",zIndex:100}),Rs=De("div",{backgroundColor:"$panel",display:"flex",flexDirection:"row",boxShadow:"$panel",padding:"$2",border:"1px solid $panelContrast",gap:0,variants:{side:{center:{borderRadius:"$4"},left:{padding:0,borderTop:0,borderLeft:0,borderTopRightRadius:"$1",borderBottomRightRadius:"$3",borderBottomLeftRadius:"$1"},right:{padding:0,borderTop:0,borderRight:0,borderTopLeftRadius:"$1",borderBottomLeftRadius:"$3",borderBottomRightRadius:"$1"}}}});function F9(e){const n=e,{size:o=16}=n,s=Xr(n,["size"]);return h.createElement("svg",V({width:24,height:24},s),h.createElement("circle",{cx:12,cy:12,r:o/2}))}function _f(){return h.createElement("svg",{width:"24",height:"24",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},h.createElement("circle",{cx:12,cy:12,r:8,fill:"none",strokeWidth:2.5,strokeLinecap:"round",strokeDasharray:50.26548*.1}))}var wf=`${50.26548*.025} ${50.26548*.1}`;function bf(){return h.createElement("svg",{width:"24",height:"24",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},h.createElement("circle",{cx:12,cy:12,r:8,fill:"none",strokeWidth:2.5,strokeLinecap:"round",strokeDasharray:wf}))}function xf(){return h.createElement("svg",{width:"24",height:"24",viewBox:"1 1.5 21 22",fill:"currentColor",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},h.createElement("path",{d:"M10.0162 19.2768C10.0162 19.2768 9.90679 19.2517 9.6879 19.2017C9.46275 19.1454 9.12816 19.0422 8.68413 18.8921C8.23384 18.7358 7.81482 18.545 7.42707 18.3199C7.03307 18.101 6.62343 17.7883 6.19816 17.3818C5.77289 16.9753 5.33511 16.3718 4.88482 15.5713C4.43453 14.7645 4.1531 13.8545 4.04053 12.8414C3.92795 11.822 4.04991 10.8464 4.40639 9.91451C4.76286 8.98266 5.39452 8.10084 6.30135 7.26906C7.21444 6.44353 8.29325 5.83377 9.5378 5.43976C10.7823 5.05202 11.833 4.92068 12.6898 5.04576C13.5466 5.16459 14.3878 5.43664 15.2133 5.86191C16.0388 6.28718 16.7768 6.8688 17.4272 7.60678C18.0714 8.34475 18.5404 9.21406 18.8344 10.2147C19.1283 11.2153 19.1721 12.2598 18.9657 13.348C18.7593 14.4299 18.2872 15.4337 17.5492 16.3593C16.8112 17.2849 15.9263 18.0072 14.8944 18.5263C13.8624 19.0391 12.9056 19.3174 12.0238 19.3612C11.142 19.405 10.2101 19.2705 9.22823 18.9578C8.24635 18.6451 7.35828 18.151 6.56402 17.4756C5.77601 16.8002 6.08871 16.8658 7.50212 17.6726C8.90927 18.4731 10.1444 18.8484 11.2076 18.7983C12.2645 18.7545 13.2965 18.4825 14.3034 17.9822C15.3102 17.4819 16.1264 16.8221 16.7518 16.0028C17.3772 15.1835 17.7681 14.3111 17.9244 13.3855C18.0808 12.4599 18.0401 11.5781 17.8025 10.74C17.5586 9.902 17.1739 9.15464 16.6486 8.49797C16.1233 7.8413 15.2289 7.27844 13.9656 6.80939C12.7086 6.34034 11.4203 6.20901 10.1007 6.41539C8.78732 6.61552 7.69599 7.06893 6.82669 7.77564C5.96363 8.48859 5.34761 9.26409 4.97863 10.1021C4.60964 10.9402 4.45329 11.8376 4.50958 12.7945C4.56586 13.7513 4.79101 14.6238 5.18501 15.4118C5.57276 16.1998 5.96363 16.8002 6.35764 17.2129C6.75164 17.6257 7.13313 17.9509 7.50212 18.1886C7.87736 18.4325 8.28074 18.642 8.71227 18.8171C9.15005 18.9922 9.47839 19.111 9.69728 19.1736C9.91617 19.2361 10.0256 19.2705 10.0256 19.2768H10.0162Z",strokeWidth:"2"}))}function yf(){return h.createElement("svg",{width:"24",height:"24",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},h.createElement("circle",{cx:12,cy:12,r:8,fill:"none",strokeWidth:2,strokeLinecap:"round"}))}function Ef(e){return h.createElement("svg",V({width:32,height:32,viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),h.createElement("path",{d:"M4.32978 8.5081C4.32978 10.1923 5.70009 11.5625 7.38418 11.5625H8.46539C8.64456 11.5625 8.78975 11.4173 8.78975 11.2382V11.13C8.78975 10.9508 8.64457 10.8057 8.46539 10.8057H7.38418C6.11736 10.8057 5.08662 9.77492 5.08662 8.5081C5.08662 7.24128 6.11736 6.21054 7.38418 6.21054H9.37894L8.00515 7.58433C7.8576 7.73183 7.8576 7.97195 8.00515 8.11944C8.14833 8.26251 8.39751 8.2623 8.54036 8.11944L10.56 6.09971C10.6315 6.02824 10.6709 5.93321 10.6709 5.8321C10.6709 5.73106 10.6315 5.63598 10.56 5.56454L8.54025 3.54472C8.3974 3.40176 8.14801 3.40176 8.00513 3.54472C7.85758 3.69218 7.85758 3.93234 8.00513 4.07979L9.37892 5.45368H7.38418C5.70009 5.45368 4.32978 6.82393 4.32978 8.5081Z"}))}function Lf(e){return h.createElement("svg",V({width:18,height:18,viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 4.656a.5.5 0 01.5-.5h9.7a.5.5 0 010 1H2.5a.5.5 0 01-.5-.5z"}),h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.272 3a.578.578 0 00-.578.578v.578h3.311v-.578A.578.578 0 008.428 3H6.272zm3.733 1.156v-.578A1.578 1.578 0 008.428 2H6.272a1.578 1.578 0 00-1.578 1.578v.578H3.578a.5.5 0 00-.5.5V12.2a1.578 1.578 0 001.577 1.578h5.39a1.578 1.578 0 001.577-1.578V4.656a.5.5 0 00-.5-.5h-1.117zm-5.927 1V12.2a.578.578 0 00.577.578h5.39a.578.578 0 00.577-.578V5.156H4.078z"}),h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.272 6.85a.5.5 0 01.5.5v3.233a.5.5 0 11-1 0V7.35a.5.5 0 01.5-.5zM8.428 6.85a.5.5 0 01.5.5v3.233a.5.5 0 11-1 0V7.35a.5.5 0 01.5-.5z"}))}function Sf(e){return h.createElement("svg",V({width:32,height:32,viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),h.createElement("path",{d:"M10.6707 8.5081C10.6707 10.1923 9.3004 11.5625 7.61631 11.5625H6.5351C6.35593 11.5625 6.21074 11.4173 6.21074 11.2382V11.13C6.21074 10.9508 6.35591 10.8057 6.5351 10.8057H7.61631C8.88313 10.8057 9.91387 9.77492 9.91387 8.5081C9.91387 7.24128 8.88313 6.21054 7.61631 6.21054H5.62155L6.99534 7.58433C7.14289 7.73183 7.14289 7.97195 6.99534 8.11944C6.85216 8.26251 6.60298 8.2623 6.46013 8.11944L4.44045 6.09971C4.36898 6.02824 4.32959 5.93321 4.32959 5.8321C4.32959 5.73106 4.36898 5.63598 4.44045 5.56454L6.46024 3.54472C6.60309 3.40176 6.85248 3.40176 6.99535 3.54472C7.14291 3.69218 7.14291 3.93234 6.99535 4.07979L5.62156 5.45368H7.61631C9.3004 5.45368 10.6707 6.82393 10.6707 8.5081Z"}))}function Rf(e){return h.createElement("svg",V({width:24,height:24,viewBox:"-2 -2 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),h.createElement("path",{d:"M12.4239 4.62C13.3572 4.62 14.1572 4.73333 14.8239 4.96C15.4906 5.17333 15.9772 5.43333 16.2839 5.74C16.3639 5.82 16.4039 5.94 16.4039 6.1V8.86H14.0639C13.9172 8.86 13.8439 8.78666 13.8439 8.64V7.26C13.4306 7.12666 12.9572 7.06 12.4239 7.06C11.6506 7.06 11.0639 7.18 10.6639 7.42C10.2639 7.66 10.0639 8.04666 10.0639 8.58V9C10.0639 9.38666 10.1639 9.69333 10.3639 9.92C10.5772 10.1333 11.0306 10.3467 11.7239 10.56L13.6439 11.14C14.4706 11.38 15.1172 11.66 15.5839 11.98C16.0506 12.3 16.3772 12.68 16.5639 13.12C16.7639 13.5467 16.8639 14.0733 16.8639 14.7V15.62C16.8639 16.7933 16.4039 17.7133 15.4839 18.38C14.5639 19.0467 13.2839 19.38 11.6439 19.38C10.6706 19.38 9.79723 19.2867 9.0239 19.1C8.2639 18.9133 7.71056 18.6533 7.3639 18.32C7.3239 18.28 7.29056 18.24 7.2639 18.2C7.25056 18.1467 7.2439 18.06 7.2439 17.94V15.74H7.6239C8.2239 16.1533 8.85056 16.4533 9.5039 16.64C10.1572 16.8267 10.9306 16.92 11.8239 16.92C12.6506 16.92 13.2506 16.7867 13.6239 16.52C14.0106 16.2533 14.2039 15.9333 14.2039 15.56V14.88C14.2039 14.6667 14.1639 14.48 14.0839 14.32C14.0172 14.16 13.8706 14.0133 13.6439 13.88C13.4172 13.7467 13.0572 13.6067 12.5639 13.46L10.6639 12.88C9.7839 12.6133 9.11056 12.3 8.6439 11.94C8.17723 11.58 7.85056 11.18 7.6639 10.74C7.49056 10.3 7.4039 9.83333 7.4039 9.34V8.38C7.4039 7.64666 7.61056 7 8.0239 6.44C8.43723 5.88 9.01723 5.44 9.7639 5.12C10.5239 4.78666 11.4106 4.62 12.4239 4.62Z"}))}function Mf(e){return h.createElement("svg",V({width:24,height:24,viewBox:"-2 -2 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),h.createElement("path",{d:"M8.16191 19H5.68191C5.53525 19 5.46191 18.9267 5.46191 18.78V5H8.76191C8.88191 5 8.97525 5.03333 9.04191 5.1C9.10858 5.15333 9.17525 5.27333 9.24191 5.46C9.72191 6.59333 10.1686 7.7 10.5819 8.78C11.0086 9.84667 11.4352 10.98 11.8619 12.18H12.1619C12.6019 10.9667 13.0352 9.79333 13.4619 8.66C13.8886 7.52667 14.3552 6.30667 14.8619 5H18.3219C18.4686 5 18.5419 5.07333 18.5419 5.22V19H16.0619C15.9152 19 15.8419 18.9267 15.8419 18.78V16.26C15.8419 15.5267 15.8486 14.8133 15.8619 14.12C15.8886 13.4267 15.9286 12.6867 15.9819 11.9C16.0486 11.1 16.1419 10.1933 16.2619 9.18H15.9019C15.4352 10.3533 14.9486 11.5667 14.4419 12.82C13.9486 14.06 13.4819 15.2333 13.0419 16.34H11.1019C11.0619 16.34 11.0152 16.3333 10.9619 16.32C10.9219 16.2933 10.8886 16.2467 10.8619 16.18C10.4619 15.18 10.0086 14.06 9.50191 12.82C9.00858 11.58 8.53525 10.3667 8.08191 9.18H7.70191C7.83525 10.18 7.93525 11.0733 8.00191 11.86C8.06858 12.6467 8.10858 13.3933 8.12191 14.1C8.14858 14.8067 8.16191 15.5267 8.16191 16.26V19Z"}))}function If(e){return h.createElement("svg",V({width:24,height:24,viewBox:"-2 -2 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),h.createElement("path",{d:"M7.68191 19C7.53525 19 7.46191 18.9267 7.46191 18.78V5H10.1219C10.2686 5 10.3419 5.07333 10.3419 5.22V16.56H13.4419V15.02H15.7619C15.9086 15.02 15.9819 15.0933 15.9819 15.24V19H7.68191Z"}))}function Pf(){return h.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h.createElement("path",{d:"M1.72838 9.33987L8.84935 2.34732C9.23874 1.96494 9.86279 1.96539 10.2516 2.34831L13.5636 5.60975C13.9655 6.00555 13.9607 6.65526 13.553 7.04507L8.13212 12.2278C7.94604 12.4057 7.69851 12.505 7.44107 12.505L6.06722 12.505L3.83772 12.505C3.5673 12.505 3.30842 12.3954 3.12009 12.2014L1.7114 10.7498C1.32837 10.3551 1.33596 9.72521 1.72838 9.33987Z",stroke:"currentColor"}),h.createElement("line",{x1:"6.01807",y1:"12.5",x2:"10.7959",y2:"12.5",stroke:"currentColor",strokeLinecap:"round"}),h.createElement("line",{x1:"5.50834",y1:"5.74606",x2:"10.1984",y2:"10.4361",stroke:"currentColor"}))}function $f(){return h.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.73545 0.0494623C5.93029 -0.0395285 6.15915 -0.00663838 6.32104 0.133622L14.8111 7.48911C14.9804 7.63581 15.0432 7.87091 14.9696 8.08249C14.8959 8.29408 14.7007 8.4394 14.4769 8.44927L11.4564 8.58248L13.2249 12.4682C13.35 12.7431 13.2286 13.0675 12.9537 13.1927L10.9304 14.1145C10.6554 14.2397 10.331 14.1184 10.2057 13.8435L8.43441 9.95846L6.42883 12.0731L7.0482 13.434C7.17335 13.709 7.05195 14.0333 6.77702 14.1586L5.03829 14.9506C4.76335 15.0759 4.43894 14.9546 4.31361 14.6797L2.83886 11.445L1.13458 13.242C0.980476 13.4045 0.742914 13.4566 0.534904 13.3737C0.326893 13.2907 0.19043 13.0894 0.19043 12.8654V3.2218C0.19043 3.0076 0.315424 2.81309 0.510266 2.7241C0.705108 2.63511 0.933961 2.668 1.09586 2.80826L5.41561 6.55076V0.547159C5.41561 0.332956 5.54061 0.138453 5.73545 0.0494623ZM6.74741 10.147L6.50992 10.3974V10.1575V9.0621V8.94669V7.49882V1.74513L13.0561 7.41656L10.5986 7.52495C10.417 7.53296 10.2512 7.63066 10.1562 7.78567C10.1444 7.80505 10.1338 7.825 10.1245 7.84541C10.0596 7.98828 10.0589 8.15342 10.1247 8.2982V8.2982L12.0023 12.4236L10.9745 12.8919L9.09356 8.7663C9.0181 8.60079 8.86531 8.4836 8.68589 8.45361C8.50647 8.42363 8.32389 8.48478 8.19871 8.61676L8.019 8.80624L6.74741 10.147ZM5.41561 9.11037V7.99863L1.28473 4.41977V11.4934L2.60315 10.1033C2.72833 9.97131 2.91091 9.91016 3.09033 9.94014C3.26975 9.97013 3.42254 10.0873 3.498 10.2528L5.08241 13.728L5.82563 13.3895L4.24404 9.91441C4.16873 9.74894 4.18053 9.55687 4.27553 9.40186C4.37052 9.24685 4.53631 9.14915 4.71793 9.14114L5.41561 9.11037Z",fill:"currentColor"}))}function Hf(){return h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},h.createElement("path",{d:"M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"}))}function Of(){return h.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},h.createElement("path",{d:"M3.64645 11.3536C3.45118 11.1583 3.45118 10.8417 3.64645 10.6465L11.1464 3.14645C11.3417 2.95118 11.6583 2.95118 11.8536 3.14645C12.0488 3.34171 12.0488 3.65829 11.8536 3.85355L4.35355 11.3536C4.15829 11.5488 3.84171 11.5488 3.64645 11.3536Z"}))}var ol=["rectangle","ellipse","triangle","line"],z9={rectangle:h.createElement(Cd,null),ellipse:h.createElement(H4,null),triangle:h.createElement(Od,null),line:h.createElement(Of,null)},kf=e=>e.appState.status,Tf=h.memo(function({activeTool:n,isToolLocked:o}){const s=Jt(),l=s.useStore(kf),[c,d]=h.useState("rectangle");h.useEffect(()=>{ol.includes(n)&&c!==n&&d(n)},[n]);const C=h.useCallback(()=>{s.selectTool(c)},[n,s]),g=h.useCallback(()=>{s.toggleToolLock()},[s]),m=h.useCallback(y=>{y.key===" "&&s.shiftKey&&y.preventDefault()},[]),_=ol.includes(n);return h.createElement(Ht.fC,{dir:"ltr",onOpenChange:C},h.createElement(Ht.xz,{dir:"ltr",asChild:!0,id:"TD-PrimaryTools-Shapes"},h.createElement(Mt,{disabled:_&&s.shiftKey,variant:"primary",onDoubleClick:g,isToolLocked:_&&o,isActive:_,onKeyDown:m},z9[c])),h.createElement(Ht.VY,{asChild:!0,dir:"ltr",side:"top",sideOffset:12},h.createElement(Rs,{side:"center"},ol.map((y,L)=>h.createElement(dr,{key:y,label:y[0].toUpperCase()+y.slice(1),kbd:(4+L).toString(),id:`TD-PrimaryTools-Shapes-${y}`},h.createElement(Ht.ck,{asChild:!0},h.createElement(Mt,{variant:"primary",onClick:()=>{s.selectTool(y),d(y)}},z9[y])))))))}),Bf=e=>e.appState.activeTool,Vf=e=>e.appState.isToolLocked,Df=h.memo(function(){const n=Jt(),o=n.useStore(Bf),s=n.useStore(Vf),l=h.useCallback(()=>{n.selectTool("select")},[n]),c=h.useCallback(()=>{n.selectTool("erase")},[n]),d=h.useCallback(()=>{n.selectTool("draw")},[n]),C=h.useCallback(()=>{n.selectTool("arrow")},[n]),g=h.useCallback(()=>{n.selectTool("text")},[n]),m=h.useCallback(()=>{n.selectTool("sticky")},[n]);return h.createElement(Rs,{side:"center",id:"TD-PrimaryTools"},h.createElement(Po,{kbd:"1",label:"select",onClick:l,isActive:o==="select",id:"TD-PrimaryTools-CursorArrow"},h.createElement(s2,null)),h.createElement(Po,{kbd:"2",label:"draw",onClick:d,isActive:o==="draw",id:"TD-PrimaryTools-Pencil"},h.createElement(nd,null)),h.createElement(Po,{kbd:"3",label:"eraser",onClick:c,isActive:o==="erase",id:"TD-PrimaryTools-Eraser"},h.createElement(Pf,null)),h.createElement(Tf,{activeTool:o,isToolLocked:s}),h.createElement(Po,{kbd:"8",label:"arrow",onClick:C,isLocked:s,isActive:o==="arrow",id:"TD-PrimaryTools-ArrowTopRight"},h.createElement(b4,null)),h.createElement(Po,{kbd:"9",label:"text",onClick:g,isLocked:s,isActive:o==="text",id:"TD-PrimaryTools-Text"},h.createElement(bd,null)),h.createElement(Po,{kbd:"0",label:"sticky",onClick:m,isActive:o==="sticky",id:"TD-PrimaryTools-Pencil2"},h.createElement(id,null)))}),kL=De(Ht.Eh,{fill:"$panel",bp:en});function gt(e){var n=e,{onSelect:o,id:s}=n,l=Xr(n,["onSelect","id"]);return h.createElement(Ht.ck,{dir:"ltr",asChild:!0,onSelect:o,id:s},h.createElement(tn,V({},l)))}var Xt=e=>e.preventDefault();function pn({checked:e,disabled:n=!1,variant:o,onCheckedChange:s,kbd:l,id:c,children:d}){return h.createElement(Ht.oC,{dir:"ltr",onSelect:Xt,onCheckedChange:s,checked:e,disabled:n,asChild:!0,id:c},h.createElement(tn,{kbd:l,variant:o,hasIndicator:!0},d))}function $o({sideOffset:e=8,children:n,align:o,variant:s,id:l}){return h.createElement(Ht.VY,{dir:"ltr",align:o,sideOffset:e,onEscapeKeyDown:_s,asChild:!0,id:l},h.createElement(jf,{variant:s},n))}var jf=De(zn,{width:"fit-content",height:"fit-content",minWidth:0,variants:{variant:{horizontal:{flexDirection:"row"},menu:{minWidth:128}}}}),vn=De(Ht.Z0,{backgroundColor:"$hover",height:1,marginTop:"$2",marginRight:"-$2",marginBottom:"$2",marginLeft:"-$2"}),Ms=De(Ht.Rk,{height:"32px",width:"32px",backgroundColor:"$panel",borderRadius:"4px",padding:"0",margin:"0",display:"flex",alignItems:"center",justifyContent:"center",outline:"none",border:"none",pointerEvents:"all",cursor:"pointer",variants:{isActive:{true:{backgroundColor:"$selected",color:"$panel"},false:{}},bp:{mobile:{},small:{}}},compoundVariants:[{isActive:!1,bp:"small",css:{"&:focus":{backgroundColor:"$hover"},"&:hover:not(:disabled)":{backgroundColor:"$hover"}}}]});function pi({children:e,size:n,disabled:o=!1,label:s,id:l}){return h.createElement("span",{id:l},h.createElement(Ht.fC,{dir:"ltr"},h.createElement(Ht.ce,{dir:"ltr",asChild:!0},h.createElement(tn,{disabled:o,hasArrow:!0},s)),h.createElement(Ht.VY,{dir:"ltr",asChild:!0,sideOffset:2,alignOffset:-2},h.createElement(zn,{size:n},e,h.createElement(Ht.Eh,{offset:13})))))}function U9(e){var n=e,{id:o,children:s}=n,l=Xr(n,["id","children"]);return h.createElement(Ht.xz,{asChild:!0,id:o},h.createElement(Mt,V({},l),s))}var Rr=De("hr",{height:1,marginTop:"$1",marginRight:"-$2",marginBottom:"$1",marginLeft:"-$2",border:"none",borderBottom:"1px solid $hover"}),Af=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.length,Zf=e=>{const n=e.document.pages[e.appState.currentPageId],{selectedIds:o}=e.document.pageStates[e.appState.currentPageId];return o.every(s=>n.shapes[s].isLocked)},Wf=e=>{const n=e.document.pages[e.appState.currentPageId],{selectedIds:o}=e.document.pageStates[e.appState.currentPageId];return o.every(s=>n.shapes[s].isAspectRatioLocked)},Ff=e=>{const n=e.document.pages[e.appState.currentPageId],o=e.document.pageStates[e.appState.currentPageId].selectedIds.map(s=>n.shapes[s]);return o.every(s=>s.children!==void 0||s.parentId===o[0].parentId&&o[0].parentId!==e.appState.currentPageId)},zf=e=>{const{selectedIds:n}=e.document.pageStates[e.appState.currentPageId];return n.length>0},Uf=e=>{const{selectedIds:n}=e.document.pageStates[e.appState.currentPageId];return n.length>1};function Nf(){const e=Jt(),n=e.useStore(Zf),o=e.useStore(Wf),s=e.useStore(Ff),l=e.useStore(zf),c=e.useStore(Uf),d=e.useStore(Af),C=d>1,g=d>2,m=h.useCallback(()=>{e.rotate()},[e]),_=h.useCallback(()=>{e.duplicate()},[e]),y=h.useCallback(()=>{e.toggleLocked()},[e]),L=h.useCallback(()=>{e.toggleAspectRatioLocked()},[e]),S=h.useCallback(()=>{e.group()},[e]),R=h.useCallback(()=>{e.moveToBack()},[e]),$=h.useCallback(()=>{e.moveBackward()},[e]),k=h.useCallback(()=>{e.moveForward()},[e]),T=h.useCallback(()=>{e.moveToFront()},[e]),H=h.useCallback(()=>{e.setShapeProps({rotation:0})},[e]),Z=h.useCallback(()=>{e.align("top")},[e]),z=h.useCallback(()=>{e.align("centerVertical")},[e]),j=h.useCallback(()=>{e.align("bottom")},[e]),X=h.useCallback(()=>{e.stretch("vertical")},[e]),F=h.useCallback(()=>{e.distribute("vertical")},[e]),q=h.useCallback(()=>{e.align("left")},[e]),fe=h.useCallback(()=>{e.align("centerHorizontal")},[e]),Ee=h.useCallback(()=>{e.align("right")},[e]),qe=h.useCallback(()=>{e.stretch("horizontal")},[e]),we=h.useCallback(()=>{e.distribute("horizontal")},[e]),Re=h.useCallback(Ct=>{e.setMenuOpen(Ct)},[e]);return h.createElement(Ht.fC,{dir:"ltr",onOpenChange:Re},h.createElement(Ht.xz,{dir:"ltr",asChild:!0,id:"TD-Tools-Dots"},h.createElement(Mt,{variant:"circle"},h.createElement(Z4,null))),h.createElement($o,{sideOffset:16},h.createElement(h.Fragment,null,h.createElement(Is,null,h.createElement(Mt,{variant:"icon",disabled:!l,onClick:_},h.createElement(dr,{label:"Duplicate",kbd:"#D",id:"TD-Tools-Copy"},h.createElement(B4,null))),h.createElement(Mt,{disabled:!l,onClick:m},h.createElement(dr,{label:"Rotate",id:"TD-Tools-Rotate"},h.createElement(hd,null))),h.createElement(Mt,{disabled:!l,onClick:y},h.createElement(dr,{label:"Toggle Locked",kbd:"#L",id:"TD-Tools-Lock"},n?h.createElement(q4,null):h.createElement(Q4,null))),h.createElement(Mt,{disabled:!l,onClick:L},h.createElement(dr,{label:"Toggle Aspect Ratio Lock",id:"TD-Tools-AspectRatio"},o?h.createElement(L4,null):h.createElement(R4,null))),h.createElement(Mt,{disabled:!l||!s&&!c,onClick:S},h.createElement(dr,{label:"Group",kbd:"#G",id:"TD-Tools-Group"},h.createElement(K4,null)))),h.createElement(Is,null,h.createElement(Mt,{disabled:!l,onClick:R},h.createElement(dr,{label:"Move to Back",kbd:"#\u21E7[",id:"TD-Tools-PinBottom"},h.createElement(ad,null))),h.createElement(Mt,{disabled:!l,onClick:$},h.createElement(dr,{label:"Move Backward",kbd:"#[",id:"TD-Tools-ArrowDown"},h.createElement(_4,null))),h.createElement(Mt,{disabled:!l,onClick:k},h.createElement(dr,{label:"Move Forward",kbd:"#]",id:"TD-Tools-ArrowUp"},h.createElement(y4,null))),h.createElement(Mt,{disabled:!l,onClick:T},h.createElement(dr,{label:"Move to Front",kbd:"#\u21E7]",id:"TD-Tools-PinTop"},h.createElement(cd,null))),h.createElement(Mt,{disabled:!l,onClick:H},h.createElement(dr,{label:"Reset Angle",id:"TD-Tools-ResetAngle"},h.createElement(C4,null)))),h.createElement(Rr,null),h.createElement(Is,null,h.createElement(Mt,{disabled:!C,onClick:q,id:"TD-Tools-AlignLeft"},h.createElement(n2,null)),h.createElement(Mt,{disabled:!C,onClick:fe,id:"TD-Tools-AlignCenterHorizontal"},h.createElement(t2,null)),h.createElement(Mt,{disabled:!C,onClick:Ee,id:"TD-Tools-AlignRight"},h.createElement(o2,null)),h.createElement(Mt,{disabled:!C,onClick:qe,id:"TD-Tools-StretchHorizontal"},h.createElement(c2,null)),h.createElement(Mt,{disabled:!g,onClick:we,id:"TD-Tools-SpaceEvenlyHorizontal"},h.createElement(a2,null))),h.createElement(Is,null,h.createElement(Mt,{disabled:!C,onClick:Z,id:"TD-Tools-AlignTop"},h.createElement(i2,null)),h.createElement(Mt,{disabled:!C,onClick:z,id:"TD-Tools-AlignCenterVertical"},h.createElement(r2,null)),h.createElement(Mt,{disabled:!C,onClick:j,id:"TD-Tools-AlignBottom"},h.createElement(e2,null)),h.createElement(Mt,{disabled:!C,onClick:X,id:"TD-Tools-tretchVertical"},h.createElement(d2,null)),h.createElement(Mt,{disabled:!g,onClick:F,id:"TD-Tools-SpaceEvenlyVertical"},h.createElement(l2,null))))))}var Is=De("div",{position:"relative",display:"flex",width:"100%",background:"none",border:"none",cursor:"pointer",outline:"none",alignItems:"center",justifyContent:"flex-start",padding:0});function Kf(){const e=Jt(),n=h.useCallback(()=>{e.delete()},[e]),o=e.useStore(s=>s.appState.status==="idle"&&s.document.pageStates[s.appState.currentPageId].selectedIds.length>0);return h.createElement(dr,{label:"Delete",kbd:"\u232B",id:"TD-Delete"},h.createElement(Mt,{variant:"circle",disabled:!o,onSelect:n},h.createElement(Lf,null)))}var Xf=e=>e.settings.isDebugMode,Gf=h.memo(function({onBlur:n}){const s=Jt().useStore(Xf);return h.createElement(Yf,{onBlur:n},h.createElement(qf,{id:"TD-Tools"},h.createElement(hf,null),h.createElement(Qf,null,h.createElement(Nf,null),h.createElement(Df,null),h.createElement(Kf,null))),s&&h.createElement(Jf,null,h.createElement(sf,null)))}),Yf=De("div",{position:"absolute",bottom:0,left:0,right:0,width:"100%",minWidth:0,maxWidth:"100%",display:"grid",gridTemplateColumns:"auto auto auto",gridTemplateRows:"auto auto",justifyContent:"space-between",padding:"0",gap:"$4",zIndex:200,pointerEvents:"none","& > div > *":{pointerEvents:"all"}}),qf=De("div",{gridRow:1,gridColumn:2,display:"flex",width:"fit-content",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"$4"}),Jf=De("div",{gridRow:2,gridColumn:"1 / span 3"}),Qf=De("div",{position:"relative",display:"flex",alignItems:"center",gap:"$2"}),eh=e=>e.settings;function th(){const e=Jt(),n=e.useStore(eh),o=h.useCallback(()=>{e.setSetting("isDebugMode",_=>!_)},[e]),s=h.useCallback(()=>{e.setSetting("isDarkMode",_=>!_)},[e]),l=h.useCallback(()=>{e.setSetting("isFocusMode",_=>!_)},[e]),c=h.useCallback(()=>{e.setSetting("showRotateHandles",_=>!_)},[e]),d=h.useCallback(()=>{e.setSetting("showGrid",_=>!_)},[e]),C=h.useCallback(()=>{e.setSetting("showBindingHandles",_=>!_)},[e]),g=h.useCallback(()=>{e.setSetting("isSnapping",_=>!_)},[e]),m=h.useCallback(()=>{e.setSetting("showCloneHandles",_=>!_)},[e]);return h.createElement(pi,{label:"Preferences",id:"TD-MenuItem-Preferences"},h.createElement(pn,{checked:n.isDarkMode,onCheckedChange:s,kbd:"#\u21E7D",id:"TD-MenuItem-Preferences-Dark_Mode"},"Dark Mode"),h.createElement(pn,{checked:n.isFocusMode,onCheckedChange:l,kbd:"#.",id:"TD-MenuItem-Preferences-Focus_Mode"},"Focus Mode"),h.createElement(pn,{checked:n.isDebugMode,onCheckedChange:o,id:"TD-MenuItem-Preferences-Debug_Mode"},"Debug Mode"),h.createElement(vn,null),h.createElement(pn,{checked:n.showRotateHandles,onCheckedChange:c,id:"TD-MenuItem-Preferences-Rotate_Handles"},"Rotate Handles"),h.createElement(pn,{checked:n.showBindingHandles,onCheckedChange:C,id:"TD-MenuItem-Preferences-Binding_Handles"},"Binding Handles"),h.createElement(pn,{checked:n.showCloneHandles,onCheckedChange:m,id:"TD-MenuItem-Preferences-Clone_Handles"},"Clone Handles"),h.createElement(pn,{checked:n.showGrid,onCheckedChange:d,kbd:"#\u21E7G",id:"TD-MenuItem-Preferences-Grid"},"Grid"),h.createElement(pn,{checked:n.isSnapping,onCheckedChange:g,id:"TD-MenuItem-Preferences-Always_Show_Snaps"},"Always Show Snaps"))}function rh(){return h.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},h.createElement("path",{fill:"none",stroke:"currentColor",strokeWidth:2,d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"}))}var nh=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.length,oh=e=>e.appState.disableAssets,ih=h.memo(function({showSponsorLink:n,readOnly:o}){const s=Jt(),l=s.useStore(nh),c=s.useStore(oh),[d,C]=h.useState(0);h.useEffect(()=>C(1),[]);const{onNewProject:g,onOpenProject:m,onSaveProject:_,onSaveProjectAs:y}=Z9(),L=h.useCallback(()=>tt(this,null,function*(){yield s.exportAllShapesAs("png")}),[s]),S=h.useCallback(()=>tt(this,null,function*(){yield s.exportAllShapesAs("jpeg")}),[s]),R=h.useCallback(()=>tt(this,null,function*(){yield s.exportAllShapesAs("webp")}),[s]),$=h.useCallback(()=>tt(this,null,function*(){yield s.exportAllShapesAs("pdf")}),[s]),k=h.useCallback(()=>tt(this,null,function*(){yield s.exportAllShapesAs("svg")}),[s]),T=h.useCallback(()=>tt(this,null,function*(){yield s.exportAllShapesAs("json")}),[s]),H=h.useCallback(()=>{var Oe,ut;(ut=(Oe=s.callbacks).onSignIn)==null||ut.call(Oe,s)},[s]),Z=h.useCallback(()=>{var Oe,ut;(ut=(Oe=s.callbacks).onSignOut)==null||ut.call(Oe,s)},[s]),z=h.useCallback(()=>{s.cut()},[s]),j=h.useCallback(()=>{s.copy()},[s]),X=h.useCallback(()=>{s.paste()},[s]),F=h.useCallback(()=>{s.copySvg()},[s]),q=h.useCallback(()=>{s.copyJson()},[s]),fe=h.useCallback(()=>{s.selectAll()},[s]),Ee=h.useCallback(()=>{s.selectNone()},[s]),qe=h.useCallback(()=>{s.openAsset()},[s]),we=h.useCallback(()=>{s.zoomTo(1)},[s]),Re=s.callbacks.onNewProject||s.callbacks.onOpenProject||s.callbacks.onSaveProject||s.callbacks.onSaveProjectAs||s.callbacks.onExport,Ct=s.callbacks.onSignIn||s.callbacks.onSignOut||n,kt=l>0;return h.createElement(Ht.fC,{dir:"ltr"},h.createElement(U9,{isSponsor:n,id:"TD-MenuIcon"},h.createElement(G4,null)),h.createElement($o,{variant:"menu",id:"TD-Menu"},Re&&h.createElement(pi,{label:"File...",id:"TD-MenuItem-File"},s.callbacks.onNewProject&&h.createElement(gt,{onClick:g,kbd:"#N",id:"TD-MenuItem-File-New_Project"},"New Project"),s.callbacks.onOpenProject&&h.createElement(gt,{onClick:m,kbd:"#O",id:"TD-MenuItem-File-Open"},"Open..."),s.callbacks.onSaveProject&&h.createElement(gt,{onClick:_,kbd:"#S",id:"TD-MenuItem-File-Save"},"Save"),s.callbacks.onSaveProjectAs&&h.createElement(gt,{onClick:y,kbd:"#\u21E7S",id:"TD-MenuItem-File-Save_As"},"Save As..."),s.callbacks.onExport&&h.createElement(h.Fragment,null,h.createElement(Rr,null),h.createElement(pi,{label:"Export",size:"small",id:"TD-MenuItem-File-Export"},h.createElement(gt,{onClick:L,id:"TD-MenuItem-File-Export-PNG"},"PNG"),h.createElement(gt,{onClick:S,id:"TD-MenuItem-File-Export-JPG"},"JPG"),h.createElement(gt,{onClick:R,id:"TD-MenuItem-File-Export-WEBP"},"WEBP"),h.createElement(gt,{onClick:k,id:"TD-MenuItem-File-Export-SVG"},"SVG"),h.createElement(gt,{onClick:T,id:"TD-MenuItem-File-Export-JSON"},"JSON"))),!c&&h.createElement(h.Fragment,null,h.createElement(Rr,null),h.createElement(gt,{onClick:qe,kbd:"#U",id:"TD-MenuItem-File-Upload_Media"},"Upload Media"))),!o&&h.createElement(h.Fragment,null,h.createElement(pi,{label:"Edit...",id:"TD-MenuItem-Edit"},h.createElement(gt,{onSelect:Xt,onClick:s.undo,kbd:"#Z",id:"TD-MenuItem-Edit-Undo"},"Undo"),h.createElement(gt,{onSelect:Xt,onClick:s.redo,kbd:"#\u21E7Z",id:"TD-MenuItem-Edit-Redo"},"Redo"),h.createElement(vn,{dir:"ltr"}),h.createElement(gt,{onSelect:Xt,disabled:!kt,onClick:z,kbd:"#X",id:"TD-MenuItem-Edit-Cut"},"Cut"),h.createElement(gt,{onSelect:Xt,disabled:!kt,onClick:j,kbd:"#C",id:"TD-MenuItem-Edit-Copy"},"Copy"),h.createElement(gt,{onSelect:Xt,onClick:X,kbd:"#V",id:"TD-MenuItem-Edit-Paste"},"Paste"),h.createElement(vn,{dir:"ltr"}),h.createElement(gt,{onSelect:Xt,disabled:!kt,onClick:F,kbd:"#\u21E7C",id:"TD-MenuItem-Edit-Copy_as_SVG"},"Copy as SVG"),h.createElement(gt,{onSelect:Xt,disabled:!kt,onClick:q,id:"TD-MenuItem-Edit-Copy_as_JSON"},"Copy as JSON"),h.createElement(vn,{dir:"ltr"}),h.createElement(gt,{onSelect:Xt,onClick:fe,kbd:"#A",id:"TD-MenuItem-Select_All"},"Select All"),h.createElement(gt,{onSelect:Xt,onClick:Ee,id:"TD-MenuItem-Select_None"},"Select None"))),h.createElement(pi,{label:"View",id:"TD-MenuItem-Edit"},h.createElement(gt,{onSelect:Xt,onClick:s.zoomIn,kbd:"#+",id:"TD-MenuItem-View-ZoomIn"},"Zoom In"),h.createElement(gt,{onSelect:Xt,onClick:s.zoomOut,kbd:"#-",id:"TD-MenuItem-View-ZoomOut"},"Zoom Out"),h.createElement(gt,{onSelect:Xt,onClick:we,kbd:"\u21E7+0",id:"TD-MenuItem-View-ZoomTo100"},"Zoom to 100%"),h.createElement(gt,{onSelect:Xt,onClick:s.zoomToFit,kbd:"\u21E7+1",id:"TD-MenuItem-View-ZoomToFit"},"Zoom to Fit"),h.createElement(gt,{onSelect:Xt,onClick:s.zoomToSelection,kbd:"\u21E7+2",id:"TD-MenuItem-View-ZoomToSelection"},"Zoom to Selection")),h.createElement(vn,{dir:"ltr"}),h.createElement(th,null),h.createElement(vn,{dir:"ltr"}),h.createElement("a",{href:"https://github.com/Tldraw/Tldraw",target:"_blank",rel:"nofollow"},h.createElement(gt,{id:"TD-MenuItem-Github"},"GitHub",h.createElement(jr,null,h.createElement(U4,null)))),h.createElement("a",{href:"https://twitter.com/Tldraw",target:"_blank",rel:"nofollow"},h.createElement(gt,{id:"TD-MenuItem-Twitter"},"Twitter",h.createElement(jr,null,h.createElement($d,null)))),h.createElement("a",{href:"https://discord.gg/SBBEVCA4PG",target:"_blank",rel:"nofollow"},h.createElement(gt,{id:"TD-MenuItem-Discord"},"Discord",h.createElement(jr,null,h.createElement(Hf,null)))),n&&h.createElement("a",{href:"https://github.com/sponsors/steveruizok",target:"_blank",rel:"nofollow"},h.createElement(gt,{isSponsor:!0,id:"TD-MenuItem-Become_a_Sponsor"},"Become a Sponsor"," ",h.createElement(jr,null,h.createElement(rh,null)))),Ct&&h.createElement(h.Fragment,null,h.createElement(vn,{dir:"ltr"})," ",s.callbacks.onSignIn&&h.createElement(gt,{onSelect:H,id:"TD-MenuItem-Sign_in"},"Sign In"),s.callbacks.onSignOut&&h.createElement(gt,{onSelect:Z,id:"TD-MenuItem-Sign_out"},"Sign Out",h.createElement(jr,null,h.createElement(F4,null))))))}),N9=De("button",{position:"relative",height:"32px",width:"32px",backgroundColor:"$panel",borderRadius:"4px",padding:"0",margin:"0",outline:"none",border:"none",pointerEvents:"all",fontSize:"$0",color:"$text",cursor:"pointer",display:"grid",alignItems:"center",justifyContent:"center","& > *":{gridRow:1,gridColumn:1},"&:disabled":{opacity:"0.5"},"& > span":{width:"100%",height:"100%",display:"flex",alignItems:"center"},variants:{bp:{mobile:{backgroundColor:"transparent"},small:{"&:hover:not(:disabled)":{backgroundColor:"$hover"}}},size:{small:{height:32,width:32,"& svg:nth-of-type(1)":{height:"16px",width:"16px"}},medium:{height:44,width:44,"& svg:nth-of-type(1)":{height:"18px",width:"18px"}},large:{height:44,width:44,"& svg:nth-of-type(1)":{height:"20px",width:"20px"}}},isActive:{true:{color:"$selected"}}}}),sh=e=>Object.keys(e.document.pages).length>1;function ah({page:e,onOpen:n,onClose:o}){const s=Jt(),[l,c]=h.useState(!1),d=s.useStore(sh),C=h.useRef(null),g=h.useCallback(()=>{s.duplicatePage(e.id),o==null||o()},[s]),m=h.useCallback(()=>{window.confirm("Are you sure you want to delete this page?")&&(s.deletePage(e.id),o==null||o())},[s]),_=h.useCallback(R=>{if(c(R),R){n==null||n();return}},[s]),y=h.useCallback(()=>c(!1),[]);function L(R){R.stopPropagation()}function S(){const R=window.prompt("New name:",e.name);s.renamePage(e.id,R||e.name||"Page")}return h.useEffect(()=>{l&&requestAnimationFrame(()=>{const R=C.current;R&&(R.focus(),R.select())})},[l]),h.createElement(Xd,{open:l,onOpenChange:_},h.createElement(Gd,{asChild:!0,"data-shy":"true"},h.createElement(N9,{bp:en},h.createElement(jr,null,h.createElement(td,null)))),h.createElement(Yd,null,h.createElement(ch,{onPointerDown:y}),h.createElement(lh,{dir:"ltr",onKeyDown:L,onKeyUp:L},h.createElement(il,{onSelect:S},"Rename"),h.createElement(il,{onSelect:g},"Duplicate"),h.createElement(il,{disabled:!d,onSelect:m},"Delete"),h.createElement(Rr,null),h.createElement(e8,{asChild:!0},h.createElement(tn,null,"Cancel")))))}var lh=De(Jd,{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:240,maxWidth:"fit-content",maxHeight:"85vh",marginTop:"-5vh",pointerEvents:"all",backgroundColor:"$panel",padding:"$0",borderRadius:"$2",font:"$ui","&:focus":{outline:"none"}}),ch=De(qd,{backgroundColor:"rgba(0, 0, 0, .15)",position:"fixed",pointerEvents:"all",inset:0});function il(e){var n=e,{onSelect:o}=n,s=Xr(n,["onSelect"]);return h.createElement(Qd,{asChild:!0,onClick:o,onSelect:o},h.createElement(tn,V({},s)))}var dh=e=>Object.values(e.document.pages).sort((n,o)=>(n.childIndex||0)-(o.childIndex||0)),uh=e=>e.document.pages[e.appState.currentPageId].name,fh=e=>e.document.pages[e.appState.currentPageId].id;function hh(){const e=Jt(),n=h.useRef(!1),[o,s]=h.useState(!1);h.useEffect(()=>{n.current!==o&&(n.current=o)},[o]);const l=h.useCallback(()=>{s(!1)},[s]),c=h.useCallback(C=>{n.current!==C&&s(C)},[s]),d=e.useStore(uh);return h.createElement(Ht.fC,{dir:"ltr",open:o,onOpenChange:c},h.createElement(Ht.xz,{dir:"ltr",asChild:!0,id:"TD-Page"},h.createElement(Mt,{variant:"text"},d||"Page")),h.createElement($o,{variant:"menu",align:"start"},o&&h.createElement(ph,{onClose:l})))}function ph({onClose:e}){const n=Jt(),o=n.useStore(dh),s=n.useStore(fh),l=h.useCallback(()=>{n.createPage()},[n]),c=h.useCallback(d=>{e(),n.changePage(d)},[n]);return h.createElement(h.Fragment,null,h.createElement(Ht.Ee,{dir:"ltr",value:s,onValueChange:c},o.map(d=>h.createElement(vh,{key:d.id},h.createElement(Ht.Rk,{title:d.name||"Page",value:d.id,key:d.id,asChild:!0},h.createElement(gh,null,h.createElement("span",null,d.name||"Page"),h.createElement(Ht.wU,null,h.createElement(jr,null,h.createElement(Ta,null))))),h.createElement(ah,{page:d,onClose:e})))),h.createElement(vn,null),h.createElement(Ht.ck,{onSelect:l,asChild:!0},h.createElement(tn,null,h.createElement("span",null,"Create Page"),h.createElement(jr,null,h.createElement(ud,null)))))}var vh=De("div",{display:"grid",gridTemplateColumns:"1fr auto",gridAutoFlow:"column",'& > *[data-shy="true"]':{opacity:0},'&:hover > *[data-shy="true"]':{opacity:1}}),gh=De(tn,{minWidth:128}),Ch=e=>e.document.pageStates[e.appState.currentPageId].camera.zoom,mh=h.memo(function(){const n=Jt(),o=n.useStore(Ch);return h.createElement(Ht.fC,{dir:"ltr"},h.createElement(Ht.xz,{dir:"ltr",asChild:!0,id:"TD-Zoom"},h.createElement(_h,{onDoubleClick:n.resetZoom,variant:"text"},Math.round(o*100),"%")),h.createElement($o,{align:"end"},h.createElement(gt,{onSelect:Xt,onClick:n.zoomIn,kbd:"#+",id:"TD-Zoom-Zoom_In"},"Zoom In"),h.createElement(gt,{onSelect:Xt,onClick:n.zoomOut,kbd:"#\u2212",id:"TD-Zoom-Zoom_Out"},"Zoom Out"),h.createElement(gt,{onSelect:Xt,onClick:n.resetZoom,kbd:"\u21E70",id:"TD-Zoom-Zoom_To_100%"},"To 100%"),h.createElement(gt,{onSelect:Xt,onClick:n.zoomToFit,kbd:"\u21E71",id:"TD-Zoom-To_Fit"},"To Fit"),h.createElement(gt,{onSelect:Xt,onClick:n.zoomToSelection,kbd:"\u21E72",id:"TD-Zoom-To_Selection"},"To Selection")))}),_h=De(Mt,{minWidth:56}),wh=e=>e.appState.currentStyle,bh=e=>e.document.pageStates[e.appState.currentPageId].selectedIds,xh=Object.keys(Ua),K9={draw:h.createElement(xf,null),solid:h.createElement(yf,null),dashed:h.createElement(_f,null),dotted:h.createElement(bf,null)},yh={small:h.createElement(Rf,null),medium:h.createElement(Mf,null),large:h.createElement(If,null)},Eh={start:h.createElement(Rd,null),middle:h.createElement(yd,null),end:h.createElement(Id,null),justify:h.createElement(Ld,null)},Lh=e=>e.settings.isDarkMode?"dark":"light",Sh=e=>{const{activeTool:n,currentPageId:o}=e.appState;switch(n){case"select":{const s=e.document.pages[o];let l=!1,c=!1;for(const d of e.document.pageStates[o].selectedIds)"text"in s.shapes[d]&&(l=!0),"label"in s.shapes[d]&&(c=!0);return l?"text":c?"label":""}case"text":return"text";case"rectangle":return"label";case"ellipse":return"label";case"triangle":return"label";case"arrow":return"label";case"line":return"label"}return!1},Rh=h.memo(function(){const n=Jt(),o=n.useStore(Lh),s=n.useStore(Sh),l=n.useStore(wh),c=n.useStore(bh),[d,C]=h.useState(l),g=h.useRef(l);h.useEffect(()=>{const{appState:{currentStyle:$},page:k,selectedIds:T}=n;let H={};if(T.length<=0)H=$;else{const Z=new Set([]);n.selectedIds.map(z=>k.shapes[z]).forEach(z=>{xh.forEach(j=>{if(!Z.has(j))if(H[j]===void 0)H[j]=z.style[j];else{if(H[j]===z.style[j])return;H[j]=z.style[j],Z.add(j)}})})}JSON.stringify(H)!==JSON.stringify(g.current)&&(g.current=H,C(H))},[l,c]);const m=h.useCallback($=>{n.style({isFilled:$})},[]),_=h.useCallback($=>{n.style({dash:$})},[]),y=h.useCallback($=>{n.style({size:$})},[]),L=h.useCallback($=>{n.style({font:$})},[]),S=h.useCallback($=>{n.style({textAlign:$})},[]),R=h.useCallback($=>{n.setMenuOpen($)},[n]);return h.createElement(Ht.fC,{dir:"ltr",onOpenChange:R},h.createElement(Ht.xz,{asChild:!0,id:"TD-Styles"},h.createElement(Mt,{variant:"text"},"Styles",h.createElement(Ih,{style:{color:ui[o][d.color]}},d.isFilled&&h.createElement(F9,{size:16,stroke:"none",fill:Fa[o][d.color]}),K9[d.dash]))),h.createElement($o,null,h.createElement(vi,{variant:"tall",id:"TD-Styles-Color-Container"},h.createElement("span",null,"Color"),h.createElement(Mh,null,Object.keys(ui.light).map($=>h.createElement(Ht.ck,{key:$,onSelect:Xt,asChild:!0,id:`TD-Styles-Color-Swatch-${$}`},h.createElement(Mt,{variant:"icon",isActive:d.color===$,onClick:()=>n.style({color:$})},h.createElement(F9,{size:18,strokeWidth:2.5,fill:d.isFilled?Fa.light[$]:"transparent",stroke:ui.light[$]})))))),h.createElement(pn,{variant:"styleMenu",checked:!!d.isFilled,onCheckedChange:m,id:"TD-Styles-Fill"},"Fill"),h.createElement(vi,{id:"TD-Styles-Dash-Container"},"Dash",h.createElement(Ps,{dir:"ltr",value:d.dash,onValueChange:_},Object.values(F2).map($=>h.createElement(Ms,{key:$,isActive:$===d.dash,value:$,onSelect:Xt,bp:en,id:`TD-Styles-Dash-${$}`},K9[$])))),h.createElement(vi,{id:"TD-Styles-Size-Container"},"Size",h.createElement(Ps,{dir:"ltr",value:d.size,onValueChange:y},Object.values(W2).map($=>h.createElement(Ms,{key:$,isActive:$===d.size,value:$,onSelect:Xt,bp:en,id:`TD-Styles-Dash-${$}`},yh[$])))),(s==="text"||s==="label")&&h.createElement(h.Fragment,null,h.createElement(Rr,null),h.createElement(vi,{id:"TD-Styles-Font-Container"},"Font",h.createElement(Ps,{dir:"ltr",value:d.font,onValueChange:L},Object.values(U2).map($=>h.createElement(Ms,{key:$,isActive:$===d.font,value:$,onSelect:Xt,bp:en,id:`TD-Styles-Font-${$}`},h.createElement(Ph,{fontStyle:$},"Aa"))))),s==="text"&&h.createElement(vi,{id:"TD-Styles-Align-Container"},"Align",h.createElement(Ps,{dir:"ltr",value:d.textAlign,onValueChange:S},Object.values(z2).map($=>h.createElement(Ms,{key:$,isActive:$===d.textAlign,value:$,onSelect:Xt,bp:en,id:`TD-Styles-Align-${$}`},Eh[$])))))))}),Mh=De("div",{display:"grid",gridTemplateColumns:"repeat(4, auto)",gap:0}),vi=De("div",{position:"relative",width:"100%",background:"none",border:"none",cursor:"pointer",minHeight:"32px",outline:"none",color:"$text",fontFamily:"$ui",fontWeight:400,fontSize:"$1",padding:"$2 0 $2 $3",borderRadius:4,userSelect:"none",margin:0,display:"flex",gap:"$3",flexDirection:"row",alignItems:"center",justifyContent:"space-between",variants:{variant:{tall:{alignItems:"flex-start",padding:"0 0 0 $3","& > span":{paddingTop:"$4"}}}}}),Ps=De(Ht._x,{display:"flex",flexDirection:"row",gap:"$1"}),Ih=De("div",{display:"grid","& > *":{gridColumn:1,gridRow:1}}),Ph=De("div",{width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"$3",variants:{fontStyle:{script:{fontFamily:"Caveat Brush"},sans:{fontFamily:"Recursive"},erif:{fontFamily:"Georgia"},mono:{fontFamily:"Recursive Mono"}}}}),$h=e=>e.room,Hh=h.memo(function(){const n=Jt(),o=n.useStore($h),[s,l]=h.useState(!1),c=h.useCallback(()=>{l(!0),K.copyStringToClipboard(window.location.href),setTimeout(()=>l(!1),1200)},[]),d=h.useCallback(()=>tt(this,null,function*(){n.isDirty?n.fileSystemHandle?window.confirm("Do you want to save changes to your current project?")&&(yield n.saveProject()):window.confirm("Do you want to save your current project?")&&(yield n.saveProject()):n.fileSystemHandle||window.confirm("Do you want to save your current project?")&&(yield n.saveProject())}),[]),C=h.useCallback(()=>tt(this,null,function*(){const g=new Headers({"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}),m=yield fetch("http://tldraw.com/api/create-multiplayer-room",{headers:g,method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(n.document)}).then(_=>_.json());window.location.href=`http://tldraw.com/r/${m.roomId}`}),[]);return h.createElement(Ht.fC,{dir:"ltr"},h.createElement(U9,{id:"TD-MultiplayerMenuIcon"},o?h.createElement($f,null):h.createElement(s2,null)),h.createElement($o,{variant:"menu",align:"start",id:"TD-MultiplayerMenu"},h.createElement(gt,{id:"TD-Multiplayer-CopyInviteLink",onClick:c,disabled:!o},"Copy Invite Link",h.createElement(jr,null,s?h.createElement(Ta,null):h.createElement(k4,null))),h.createElement(vn,{id:"TD-Multiplayer-CopyInviteLinkDivider"}),h.createElement(gt,{id:"TD-Multiplayer-CreateMultiplayerRoom",onClick:d},h.createElement("a",{href:"https://tldraw.com/r"},"Create a Multiplayer Project"))))});function Oh({readOnly:e,showPages:n,showMenu:o,showStyles:s,showZoom:l,showSponsorLink:c,showMultiplayerMenu:d}){const C=Jt();return h.createElement(kh,null,(o||n)&&h.createElement(Rs,{side:"left",id:"TD-MenuPanel"},o&&h.createElement(ih,{showSponsorLink:c,readOnly:e}),d&&h.createElement(Hh,null),n&&h.createElement(hh,null)),h.createElement(Th,null),(s||l)&&h.createElement(Rs,{side:"right"},s&&!e&&h.createElement(Rh,null),h.createElement(Bh,{bp:en},h.createElement(Mt,null,h.createElement(Sf,{onClick:C.undo})),h.createElement(Mt,null,h.createElement(Ef,{onClick:C.redo}))),l&&h.createElement(mh,null)))}var kh=De("div",{width:"100%",position:"absolute",top:0,left:0,right:0,display:"flex",flexDirection:"row",pointerEvents:"none","& > *":{pointerEvents:"all"}}),Th=De("div",{flexGrow:2,pointerEvents:"none"}),Bh=De("div",{display:"flex",flexDirection:"row",variants:{bp:{small:{display:"inherit"},large:{display:"none"}}}}),Vh=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.length,Dh=e=>e.settings.isDebugMode,jh=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.some(n=>e.document.pages[e.appState.currentPageId].shapes[n].children!==void 0),Ah=e=>e.stopPropagation(),Zh=({onBlur:e,children:n})=>h.createElement(ss,{dir:"ltr"},h.createElement(h8,{dir:"ltr"},n),h.createElement(Wh,{onBlur:e})),Wh=h.memo(function({onBlur:n}){const o=Jt(),s=o.useStore(Vh),l=o.useStore(Dh),c=o.useStore(jh),d=h.useRef(null),C=h.useCallback(()=>{o.flipHorizontal()},[o]),g=h.useCallback(()=>{o.flipVertical()},[o]),m=h.useCallback(()=>{o.duplicate()},[o]),_=h.useCallback(()=>{o.toggleLocked()},[o]),y=h.useCallback(()=>{o.group()},[o]),L=h.useCallback(()=>{o.moveToBack()},[o]),S=h.useCallback(()=>{o.moveBackward()},[o]),R=h.useCallback(()=>{o.moveForward()},[o]),$=h.useCallback(()=>{o.moveToFront()},[o]),k=h.useCallback(()=>{o.delete()},[o]),T=h.useCallback(()=>{o.copyJson()},[o]),H=h.useCallback(()=>{o.cut()},[o]),Z=h.useCallback(()=>{o.copy()},[o]),z=h.useCallback(()=>{o.paste()},[o]),j=h.useCallback(()=>{o.copySvg()},[o]),X=h.useCallback(()=>{o.undo()},[o]),F=h.useCallback(()=>{o.redo()},[o]),q=h.useCallback(()=>tt(this,null,function*(){yield o.exportSelectedShapesAs("png")}),[o]),fe=h.useCallback(()=>tt(this,null,function*(){yield o.exportSelectedShapesAs("jpeg")}),[o]),Ee=h.useCallback(()=>tt(this,null,function*(){yield o.exportSelectedShapesAs("webp")}),[o]),qe=h.useCallback(()=>tt(this,null,function*(){yield o.exportSelectedShapesAs("svg")}),[o]),we=h.useCallback(()=>tt(this,null,function*(){yield o.exportSelectedShapesAs("json")}),[o]),Re=s>0,Ct=s>1,kt=s>2;return h.createElement(as,{dir:"ltr",ref:d,onEscapeKeyDown:Ah,asChild:!0,tabIndex:-1,onBlur:n},h.createElement(zn,{id:"TD-ContextMenu"},Re?h.createElement(h.Fragment,null,h.createElement(At,{onClick:m,kbd:"#D",id:"TD-ContextMenu-Duplicate"},"Duplicate"),h.createElement(At,{onClick:C,kbd:"\u21E7H",id:"TD-ContextMenu-Flip_Horizontal"},"Flip Horizontal"),h.createElement(At,{onClick:g,kbd:"\u21E7V",id:"TD-ContextMenu-Flip_Vertical"},"Flip Vertical"),h.createElement(At,{onClick:_,kbd:"#\u21E7L",id:"TD-ContextMenu- Lock_Unlock"},"Lock / Unlock"),(Ct||c)&&h.createElement(Rr,null),Ct&&h.createElement(At,{onClick:y,kbd:"#G",id:"TD-ContextMenu-Group"},"Group"),c&&h.createElement(At,{onClick:y,kbd:"#G",id:"TD-ContextMenu-Ungroup"},"Ungroup"),h.createElement(Rr,null),h.createElement(X9,{label:"Move",id:"TD-ContextMenu-Move"},h.createElement(At,{onClick:$,kbd:"\u21E7]",id:"TD-ContextMenu-Move-To_Front"},"To Front"),h.createElement(At,{onClick:R,kbd:"]",id:"TD-ContextMenu-Move-Forward"},"Forward"),h.createElement(At,{onClick:S,kbd:"[",id:"TD-ContextMenu-Move-Backward"},"Backward"),h.createElement(At,{onClick:L,kbd:"\u21E7[",id:"TD-ContextMenu-Move-To_Back"},"To Back")),h.createElement(Kh,null),Ct&&h.createElement(Fh,{hasTwoOrMore:Ct,hasThreeOrMore:kt}),o.callbacks.onExport?h.createElement(h.Fragment,null,h.createElement(Rr,null),h.createElement(X9,{label:"Export",size:"small",id:"TD-ContextMenu-Export"},h.createElement(At,{onClick:q,id:"TD-ContextMenu-Export-PNG"},"PNG"),h.createElement(At,{onClick:fe,id:"TD-ContextMenu-Export-JPG"},"JPG"),h.createElement(At,{onClick:Ee,id:"TD-ContextMenu-Export-WEBP"},"WEBP"),h.createElement(At,{onClick:qe,id:"TD-ContextMenu-Export-SVG"},"SVG"),h.createElement(At,{onClick:we,id:"TD-ContextMenu-Export-JSON"},"JSON"),h.createElement(Rr,null),h.createElement(At,{onClick:j,kbd:"#\u21E7C",id:"TD-ContextMenu-Export-Copy_as_SVG"},"Copy as SVG"),l&&h.createElement(At,{onClick:T,id:"TD-ContextMenu-Export-Copy_as_JSON"},"Copy as JSON"))):h.createElement(h.Fragment,null,h.createElement(Rr,null),h.createElement(At,{onClick:j,kbd:"#\u21E7C",id:"TD-ContextMenu-Export-Copy_as_SVG"},"Copy as SVG"),l&&h.createElement(At,{onClick:T,id:"TD-ContextMenu-Export-Copy_as_JSON"},"Copy as JSON")),h.createElement(Rr,null),h.createElement(At,{onClick:H,kbd:"#X",id:"TD-ContextMenu-Cut"},"Cut"),h.createElement(At,{onClick:Z,kbd:"#C",id:"TD-ContextMenu-Copy"},"Copy"),h.createElement(At,{onClick:z,kbd:"#V",id:"TD-ContextMenu-Paste"},"Paste"),h.createElement(Rr,null),h.createElement(At,{onClick:k,kbd:"\u232B",id:"TD-ContextMenu-Delete"},"Delete")):h.createElement(h.Fragment,null,h.createElement(At,{onClick:z,kbd:"#V",id:"TD-ContextMenu-Paste"},"Paste"),h.createElement(At,{onClick:X,kbd:"#Z",id:"TD-ContextMenu-Undo"},"Undo"),h.createElement(At,{onClick:F,kbd:"#\u21E7Z",id:"TD-ContextMenu-Redo"},"Redo"))))});function Fh({hasThreeOrMore:e}){const n=Jt(),o=h.useCallback(()=>{n.align("top")},[n]),s=h.useCallback(()=>{n.align("centerVertical")},[n]),l=h.useCallback(()=>{n.align("bottom")},[n]),c=h.useCallback(()=>{n.stretch("vertical")},[n]),d=h.useCallback(()=>{n.distribute("vertical")},[n]),C=h.useCallback(()=>{n.align("left")},[n]),g=h.useCallback(()=>{n.align("centerHorizontal")},[n]),m=h.useCallback(()=>{n.align("right")},[n]),_=h.useCallback(()=>{n.stretch("horizontal")},[n]),y=h.useCallback(()=>{n.distribute("horizontal")},[n]);return h.createElement("span",{id:"TD-ContextMenu-Align_Duplicate"},h.createElement(ss,{dir:"ltr"},h.createElement(al,{isSubmenu:!0},"Align / Distribute"),h.createElement(as,{asChild:!0,sideOffset:2,alignOffset:-2},h.createElement(zh,{numberOfSelected:e?"threeOrMore":"twoOrMore"},h.createElement(rn,{onClick:C,id:"TD-ContextMenu-Align_Duplicate-AlignLeft"},h.createElement(n2,null)),h.createElement(rn,{onClick:g,id:"TD-ContextMenu-Align_Duplicate-AlignCenterHorizontal"},h.createElement(t2,null)),h.createElement(rn,{onClick:m,id:"TD-ContextMenu-Align_Duplicate-AlignRight"},h.createElement(o2,null)),h.createElement(rn,{onClick:_,id:"TD-ContextMenu-Align_Duplicate-StretchHorizontal"},h.createElement(c2,null)),e&&h.createElement(rn,{onClick:y,id:"TD-ContextMenu-Align_Duplicate-SpaceEvenlyHorizontal"},h.createElement(a2,null)),h.createElement(rn,{onClick:o,id:"TD-ContextMenu-Align_Duplicate-AlignTop"},h.createElement(i2,null)),h.createElement(rn,{onClick:s,id:"TD-ContextMenu-Align_Duplicate-AlignCenterVertical"},h.createElement(r2,null)),h.createElement(rn,{onClick:l,id:"TD-ContextMenu-Align_Duplicate-AlignBottom"},h.createElement(e2,null)),h.createElement(rn,{onClick:c,id:"TD-ContextMenu-Align_Duplicate-StretchVertical"},h.createElement(d2,null)),e&&h.createElement(rn,{onClick:d,id:"TD-ContextMenu-Align_Duplicate-SpaceEvenlyVertical"},h.createElement(l2,null)),h.createElement(sl,{offset:13})))))}var zh=De(zn,{display:"grid",variants:{numberOfSelected:{threeOrMore:{gridTemplateColumns:"repeat(5, auto)"},twoOrMore:{gridTemplateColumns:"repeat(4, auto)"}}}}),Uh=e=>e.appState.currentPageId,Nh=e=>e.document.pages;function Kh(){const e=Jt(),n=e.useStore(Uh),o=e.useStore(Nh),s=Object.values(o).sort((l,c)=>(l.childIndex||0)-(c.childIndex||0)).filter(l=>l.id!==n);return s.length===0?null:h.createElement(ss,{dir:"ltr"},h.createElement(al,{isSubmenu:!0},"Move To Page"),h.createElement(as,{dir:"ltr",sideOffset:2,alignOffset:-2,asChild:!0},h.createElement(zn,null,s.map(({id:l,name:c},d)=>h.createElement(At,{key:l,disabled:l===n,onClick:()=>e.moveToPage(l)},c||`Page ${d}`)),h.createElement(sl,{offset:13}))))}function X9({children:e,label:n,size:o,id:s}){return h.createElement("span",{id:s},h.createElement(ss,{dir:"ltr"},h.createElement(al,{isSubmenu:!0},n),h.createElement(as,{dir:"ltr",sideOffset:2,alignOffset:-2,asChild:!0},h.createElement(zn,{size:o},e,h.createElement(sl,{offset:13})))))}var sl=De(f8,{fill:"$panel"});function rn(e){var n=e,{onSelect:o}=n,s=Xr(n,["onSelect"]);return h.createElement(b2,{dir:"ltr",onSelect:o,asChild:!0},h.createElement(Mt,V({},s)))}var At=e=>{var n=e,{id:o}=n,s=Xr(n,["id"]);return h.createElement(b2,{asChild:!0,id:o},h.createElement(tn,V({},s)))},al=e=>{var n=e,{isSubmenu:o}=n,s=Xr(n,["isSubmenu"]);return h.createElement(u8,{asChild:!0},h.createElement(tn,V({hasArrow:o},s)))};function Xh({onSelect:e}){return h.createElement(Gh,null,h.createElement(N9,{onClick:e},h.createElement(j4,null)))}var Gh=De("div",{opacity:1,zIndex:100,backgroundColor:"transparent","& svg":{color:"$text"},"&:hover svg":{color:"$text"}}),Yh=e=>e.appState.isLoading;function qh(){const n=Jt().useStore(Yh);return h.createElement(Jh,{hidden:!n},"Loading...")}var Jh=De("div",{position:"absolute",top:0,left:"50%",transform:"translate(-50%, 0)",borderBottomLeftRadius:"12px",borderBottomRightRadius:"12px",padding:"8px 16px",fontFamily:"var(--fonts-ui)",fontSize:"var(--fontSizes-1)",boxShadow:"var(--shadows-panel)",backgroundColor:"white",zIndex:200,pointerEvents:"none","& > div > *":{pointerEvents:"all"},variants:{transform:{hidden:{transform:"translate(-50%, 100%)"},visible:{transform:"translate(-50%, 0%)"}}}});function Qh({id:e,document:n,currentPageId:o,autofocus:s=!0,showMenu:l=!0,showMultiplayerMenu:c=!0,showPages:d=!0,showTools:C=!0,showZoom:g=!0,showStyles:m=!0,showUI:_=!0,readOnly:y=!1,showSponsorLink:L=!1,disableAssets:S=!1,onMount:R,onChange:$,onChangePresence:k,onNewProject:T,onSaveProject:H,onSaveProjectAs:Z,onOpenProject:z,onOpenMedia:j,onSignOut:X,onSignIn:F,onUndo:q,onRedo:fe,onPersist:Ee,onPatch:qe,onCommand:we,onChangePage:Re,onAssetCreate:Ct,onAssetDelete:kt,onExport:Oe}){const[ut,me]=h.useState(e),[st,E1]=h.useState(()=>new fi(e,{onMount:R,onChange:$,onChangePresence:k,onNewProject:T,onSaveProject:H,onSaveProjectAs:Z,onOpenProject:z,onOpenMedia:j,onSignOut:X,onSignIn:F,onUndo:q,onRedo:fe,onPersist:Ee,onPatch:qe,onCommand:we,onChangePage:Re,onAssetDelete:kt,onAssetCreate:Ct}));return h.useLayoutEffect(()=>{if(e===ut)return;const k1=new fi(e,{onMount:R,onChange:$,onChangePresence:k,onNewProject:T,onSaveProject:H,onSaveProjectAs:Z,onOpenProject:z,onOpenMedia:j,onSignOut:X,onSignIn:F,onUndo:q,onRedo:fe,onPersist:Ee,onPatch:qe,onCommand:we,onChangePage:Re,onAssetDelete:kt,onAssetCreate:Ct,onExport:Oe});me(e),E1(k1)},[ut,e]),h.useEffect(()=>{!n||(n.id===st.document.id?st.updateDocument(n):st.loadDocument(n))},[n,st]),h.useEffect(()=>{st.setDisableAssets(S)},[st,S]),h.useEffect(()=>{!o||st.changePage(o)},[o,st]),h.useEffect(()=>{st.readOnly=y},[st,y]),h.useEffect(()=>{st.callbacks={onMount:R,onChange:$,onChangePresence:k,onNewProject:T,onSaveProject:H,onSaveProjectAs:Z,onOpenProject:z,onOpenMedia:j,onSignOut:X,onSignIn:F,onUndo:q,onRedo:fe,onPersist:Ee,onPatch:qe,onCommand:we,onChangePage:Re,onAssetDelete:kt,onAssetCreate:Ct,onExport:Oe}},[R,$,k,T,H,Z,z,j,X,F,q,fe,Ee,qe,we,Re,kt,Ct,Oe]),h.createElement(j9.Provider,{value:st},h.createElement(ep,{key:ut||"Tldraw",id:ut,autofocus:s,showPages:d,showMenu:l,showMultiplayerMenu:c,showStyles:m,showZoom:g,showTools:C,showUI:_,showSponsorLink:L,readOnly:y}))}var ep=h.memo(function({id:n,autofocus:o,showPages:s,showMenu:l,showMultiplayerMenu:c,showZoom:d,showStyles:C,showTools:g,showSponsorLink:m,readOnly:_,showUI:y}){var L,S;const R=Jt(),$=h.useRef(null),k=R.useStore(),{document:T,settings:H,appState:Z,room:z}=k,j=k.appState.activeTool==="select",X=T.pages[Z.currentPageId],F=T.pageStates[X.id],q=T.assets,{selectedIds:fe}=F,Ee=fe.length===1&&X.shapes[fe[0]]&&K.getShapeUtil(X.shapes[fe[0]].type).hideBounds,qe=fe.length===1&&X.shapes[fe[0]]&&K.getShapeUtil(X.shapes[fe[0]].type).hideResizeHandles,we=h.useMemo(()=>({isDarkMode:H.isDarkMode}),[H.isDarkMode]),Re=h.useMemo(()=>H.isDarkMode?{brushFill:"rgba(180, 180, 180, .05)",brushStroke:"rgba(180, 180, 180, .25)",selected:"rgba(38, 150, 255, 1.000)",selectFill:"rgba(38, 150, 255, 0.05)",background:"#212529",foreground:"#49555f"}:{},[H.isDarkMode]),Ct=R.session!==void 0,kt=Ct&&((L=R.session)==null?void 0:L.constructor.name)!=="BrushSession"||!j||Ee||!!F.editingId,Oe=Ct||!j,ut=Ct&&k.appState.status!=="brushing"||!j,me=Ct||!j||!H.showCloneHandles||F.camera.zoom<.2;return h.createElement(rp,{ref:$,tabIndex:-0,className:H.isDarkMode?$8:""},h.createElement(qh,null),h.createElement(tp,{focusableRef:$,autofocus:o}),h.createElement(Zh,null,h.createElement(D7,{id:n,containerRef:$,shapeUtils:Io,page:X,pageState:F,assets:q,snapLines:Z.snapLines,grid:Eo,users:z==null?void 0:z.users,userId:z==null?void 0:z.userId,theme:Re,meta:we,hideBounds:kt,hideHandles:Oe,hideResizeHandles:qe,hideIndicators:ut,hideBindingHandles:!H.showBindingHandles,hideCloneHandles:me,hideRotateHandles:!H.showRotateHandles,hideGrid:!H.showGrid,performanceMode:(S=R.session)==null?void 0:S.performanceMode,onPinchStart:R.onPinchStart,onPinchEnd:R.onPinchEnd,onPinch:R.onPinch,onPan:R.onPan,onZoom:R.onZoom,onPointerDown:R.onPointerDown,onPointerMove:R.onPointerMove,onPointerUp:R.onPointerUp,onPointCanvas:R.onPointCanvas,onDoubleClickCanvas:R.onDoubleClickCanvas,onRightPointCanvas:R.onRightPointCanvas,onDragCanvas:R.onDragCanvas,onReleaseCanvas:R.onReleaseCanvas,onPointShape:R.onPointShape,onDoubleClickShape:R.onDoubleClickShape,onRightPointShape:R.onRightPointShape,onDragShape:R.onDragShape,onHoverShape:R.onHoverShape,onUnhoverShape:R.onUnhoverShape,onReleaseShape:R.onReleaseShape,onPointBounds:R.onPointBounds,onDoubleClickBounds:R.onDoubleClickBounds,onRightPointBounds:R.onRightPointBounds,onDragBounds:R.onDragBounds,onHoverBounds:R.onHoverBounds,onUnhoverBounds:R.onUnhoverBounds,onReleaseBounds:R.onReleaseBounds,onPointBoundsHandle:R.onPointBoundsHandle,onDoubleClickBoundsHandle:R.onDoubleClickBoundsHandle,onRightPointBoundsHandle:R.onRightPointBoundsHandle,onDragBoundsHandle:R.onDragBoundsHandle,onHoverBoundsHandle:R.onHoverBoundsHandle,onUnhoverBoundsHandle:R.onUnhoverBoundsHandle,onReleaseBoundsHandle:R.onReleaseBoundsHandle,onPointHandle:R.onPointHandle,onDoubleClickHandle:R.onDoubleClickHandle,onRightPointHandle:R.onRightPointHandle,onDragHandle:R.onDragHandle,onHoverHandle:R.onHoverHandle,onUnhoverHandle:R.onUnhoverHandle,onReleaseHandle:R.onReleaseHandle,onError:R.onError,onRenderCountChange:R.onRenderCountChange,onShapeChange:R.onShapeChange,onShapeBlur:R.onShapeBlur,onShapeClone:R.onShapeClone,onBoundsChange:R.updateBounds,onKeyDown:R.onKeyDown,onKeyUp:R.onKeyUp,onDragOver:R.onDragOver,onDrop:R.onDrop})),y&&h.createElement(np,null,H.isFocusMode?h.createElement(Xh,{onSelect:R.toggleFocusMode}):h.createElement(h.Fragment,null,h.createElement(Oh,{readOnly:_,showPages:s,showMenu:l,showMultiplayerMenu:c,showStyles:C,showZoom:d,showSponsorLink:m}),h.createElement(op,null),g&&!_&&h.createElement(Gf,null))))}),tp=h.memo(function({focusableRef:n,autofocus:o}){return tf(n),rf(),h.useEffect(()=>{var s;o&&((s=n.current)==null||s.focus())},[o]),null}),rp=De("div",{position:"absolute",height:"100%",width:"100%",minHeight:0,minWidth:0,maxHeight:"100%",maxWidth:"100%",overflow:"hidden",boxSizing:"border-box",outline:"none","& .tl-container":{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:1},"& input, textarea, button, select, label, button":{webkitTouchCallout:"none",webkitUserSelect:"none","-webkit-tap-highlight-color":"transparent","tap-highlight-color":"transparent"}}),np=De("div",{position:"absolute",top:0,left:0,height:"100%",width:"100%",padding:"8px 8px 0 8px",display:"flex",alignItems:"flex-start",justifyContent:"flex-start",pointerEvents:"none",zIndex:2,"& > *":{pointerEvents:"all"}}),op=De("div",{flexGrow:2});// @license  2020 Google LLC. Licensed under the Apache License, Version 2.0.
}}]);

//# sourceMappingURL=979.bbe36e48.js.map