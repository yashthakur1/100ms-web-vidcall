(self.webpackChunk=self.webpackChunk||[]).push([[742],{5873:(nt,fe,V)=>{"use strict";V.d(fe,{Z:()=>W});var f=V(8160),W=function(K){return f.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K),f.createElement("path",{d:"M20.319 12.004c0-.272-.114-.536-.317-.73L14.228 5.5c-.229-.22-.466-.316-.712-.316-.562 0-.967.396-.967.932 0 .281.115.518.29.694l1.978 2.004 2.549 2.33-2.04-.124H4.675c-.589 0-.993.404-.993.984 0 .572.404.976.993.976h10.653l2.039-.123-2.55 2.329-1.977 2.004a.968.968 0 00-.29.694c0 .536.405.932.967.932a.99.99 0 00.694-.299l5.792-5.792c.203-.193.317-.457.317-.72z",fill:"currentColor"}))}},1290:(nt,fe,V)=>{"use strict";V.d(fe,{Z:()=>W});var f=V(8160),W=function(K){return f.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K),f.createElement("path",{d:"M12.5 5a.625.625 0 00-.625.625v13.75a.625.625 0 001.25 0V5.625A.625.625 0 0012.5 5zM10 6.25a.625.625 0 00-.625.625v11.25a.625.625 0 101.25 0V6.875A.625.625 0 0010 6.25zM7.5 8.75a.625.625 0 00-.625.625v6.25a.625.625 0 101.25 0v-6.25A.625.625 0 007.5 8.75zM5.625 11.25a.625.625 0 00-.625.625v1.25a.625.625 0 001.25 0v-1.25a.625.625 0 00-.625-.625zM15 6.25a.625.625 0 00-.625.625v11.25a.625.625 0 101.25 0V6.875A.625.625 0 0015 6.25zM17.5 8.75a.625.625 0 00-.625.625v6.25a.624.624 0 101.25 0v-6.25a.625.625 0 00-.625-.625zM19.375 11.25a.625.625 0 00-.625.625v1.25a.625.625 0 101.25 0v-1.25a.625.625 0 00-.625-.625z",fill:"currentColor"}))}},370:(nt,fe,V)=>{"use strict";V.d(fe,{Z:()=>W});var f=V(8160),W=function(K){return f.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 13.167v2.262a1.632 1.632 0 01-1.633 1.632h-6.64L7.985 19.87a.653.653 0 01-1.045-.522V17.06H5.633A1.633 1.633 0 014 15.43V5.633A1.633 1.633 0 015.633 4h5.2c-.18.416-.322.853-.42 1.306h-4.78a.327.327 0 00-.327.327v9.796a.327.327 0 00.327.326h1.959c.36 0 .653.292.653.653v1.633l2.873-2.155a.653.653 0 01.392-.13h6.857a.327.327 0 00.327-.327v-1.843c.453-.097.89-.239 1.306-.42z",fill:"currentColor"}),f.createElement("rect",{x:12,y:2,width:10,height:10,rx:5,fill:"#2F80FF"}))}},7854:(nt,fe,V)=>{"use strict";V.d(fe,{Z:()=>W});var f=V(8160),W=function(K){return f.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K),f.createElement("path",{d:"M19.567 10.38c-.465 0-.8-.352-.8-.818v-.738l.176-3.067-2.311 2.434-2.707 2.725a.737.737 0 01-.554.229c-.5 0-.87-.326-.87-.818 0-.237.08-.448.237-.606l2.716-2.707 2.435-2.312-3.076.176h-.73c-.466 0-.826-.325-.826-.8 0-.474.351-.808.826-.808h4.878c.896 0 1.415.518 1.415 1.415v4.878a.798.798 0 01-.809.817zm-9.641 9.66H5.048c-.897 0-1.424-.52-1.424-1.416v-4.878a.8.8 0 01.817-.817c.457 0 .8.351.8.817v.738l-.184 3.068 2.32-2.435 2.698-2.724a.756.756 0 01.563-.229c.492 0 .87.325.87.817a.843.843 0 01-.246.607l-2.707 2.707-2.444 2.311 3.077-.175h.738c.466 0 .826.325.826.8 0 .474-.36.808-.826.808z",fill:"currentColor"}))}},3712:(nt,fe,V)=>{"use strict";V.d(fe,{Z:()=>W});var f=V(8160),W=function(K){return f.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K),f.createElement("path",{d:"M6.193 14.89c.725 3.475 2.329 5.528 5.466 5.528 2.352 0 3.878-.956 4.927-2.876.748-1.195 1.272-2.837 1.704-4.255.23-.733.547-1.658.57-2.067.031-.462-.27-.793-.732-.824-.532-.039-.864.27-1.195.963l-1.08 2.32c-.1.232-.208.31-.331.31-.139 0-.24-.078-.24-.332l.356-8.144a.885.885 0 00-.894-.894.884.884 0 00-.887.894l-.355 5.923c-.2-.069-.416-.13-.64-.177l-.187-6.783a.885.885 0 00-.895-.894.884.884 0 00-.886.894l.187 6.698a9.593 9.593 0 00-.678.093l-.785-6.214a.882.882 0 00-.887-.887.884.884 0 00-.894.887l.72 6.72c-.232.107-.53.27-.731.401l-.908-4.716a.882.882 0 00-.886-.886.884.884 0 00-.895.886l1.056 7.432z",fill:"#FAC919"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.725 15.197a1.495 1.495 0 01-.017-.096L3.652 7.67a1.5 1.5 0 01-.015-.21 2.383 2.383 0 012.7-2.368v-.038A2.383 2.383 0 018.73 2.666c.432 0 .836.114 1.184.312a2.373 2.373 0 011.866-.896c.895 0 1.67.483 2.08 1.204a2.39 2.39 0 01.883-.167 2.385 2.385 0 012.393 2.46l-.155 3.555c.389-.191.814-.266 1.25-.235a2.29 2.29 0 011.566.748c.424.474.596 1.078.56 1.665-.025.406-.165.903-.267 1.247-.082.276-.18.582-.268.858l-.1.314c-.418 1.372-.986 3.185-1.842 4.57-.62 1.122-1.43 2.05-2.504 2.689-1.087.645-2.335.928-3.718.928-1.936 0-3.536-.652-4.735-1.938-1.148-1.23-1.81-2.916-2.2-4.783zm11.86 2.345c.749-1.195 1.273-2.837 1.705-4.255l.11-.348c.21-.656.44-1.372.46-1.719.031-.462-.27-.793-.732-.824-.532-.039-.864.27-1.195.963l-1.08 2.32v.003c-.1.23-.208.306-.331.306-.139 0-.24-.077-.24-.331l.356-8.144a.885.885 0 00-.894-.894.882.882 0 00-.887.894l-.355 5.923c-.2-.069-.416-.13-.64-.177l-.187-6.783a.884.884 0 00-.894-.894.88.88 0 00-.887.894l.187 6.698a9.593 9.593 0 00-.678.093l-.785-6.214a.886.886 0 00-.224-.592.883.883 0 00-.663-.295.884.884 0 00-.894.887l.72 6.72c-.232.107-.53.27-.731.401l-.908-4.716a.882.882 0 00-.886-.886.884.884 0 00-.895.886l1.056 7.432c.725 3.475 2.329 5.528 5.466 5.528 2.352 0 3.878-.956 4.927-2.876z",fill:"#212121"}))}},4328:(nt,fe,V)=>{"use strict";V.d(fe,{Z:()=>W});var f=V(8160),W=function(K){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none"},K),f.createElement("path",{d:"M7.003 12c0-1.123-.881-2-2.006-2A1.997 1.997 0 003 12c0 1.094.89 2 1.997 2a2.017 2.017 0 002.006-2zm6.975 0c0-1.123-.872-2-1.978-2a2 2 0 000 4c1.088 0 1.978-.906 1.978-2zM21 12c0-1.123-.881-2-1.997-2a1.999 1.999 0 00-2.006 2c0 1.094.89 2 2.006 2A2.015 2.015 0 0021 12z",fill:"currentColor"}))}},4334:(nt,fe,V)=>{"use strict";V.d(fe,{Z:()=>W});var f=V(8160),W=function(K){return f.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K),f.createElement("path",{d:"M13.832 10.608L7.409 5.335A1.474 1.474 0 005 6.469v11.082a1.474 1.474 0 002.408 1.135l6.424-5.274a1.809 1.809 0 000-2.798v-.006zM15.996 5H19v14.02h-3.004V5z",fill:"currentColor"}))}},8338:(nt,fe,V)=>{"use strict";V.d(fe,{Z:()=>W});var f=V(8160),W=function(K){return f.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K),f.createElement("path",{d:"M11.875 4a7.875 7.875 0 100 15.75 7.875 7.875 0 000-15.75zM10.75 14.688a1.125 1.125 0 11-2.25 0V9.061a1.125 1.125 0 012.25 0v5.626zm4.5 0a1.125 1.125 0 11-2.25 0V9.061a1.125 1.125 0 112.25 0v5.626z",fill:"currentColor"}))}},1182:(nt,fe,V)=>{"use strict";V.d(fe,{Z:()=>W});var f=V(8160),W=function(K){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none"},K),f.createElement("path",{d:"M18.268 15.929h-7.893a2.72 2.72 0 01-2.732-2.72V7.744A2.744 2.744 0 0110.375 5h7.893A2.744 2.744 0 0121 7.744v5.465a2.72 2.72 0 01-2.732 2.72zM10.375 6.82a.923.923 0 00-.91.923v5.465a.91.91 0 00.91.898h7.893a.91.91 0 00.91-.898V7.744a.923.923 0 00-.91-.923h-7.893z",fill:"currentColor"}),f.createElement("path",{d:"M16.75 18.673a.91.91 0 01-.91.898H6.124A2.125 2.125 0 014 17.46v-7.286a.923.923 0 01.91-.923.923.923 0 01.911.923v7.286a.303.303 0 00.304.291h9.714a.923.923 0 01.911.923z",fill:"currentColor"}))}},4053:(nt,fe,V)=>{"use strict";V.d(fe,{Z:()=>W});var f=V(8160),W=function(K){return f.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K),f.createElement("path",{d:"M12 4.125a7.875 7.875 0 100 15.75 7.875 7.875 0 000-15.75zm3.572 8.57l-4.5 3.094a.84.84 0 01-.801.085.842.842 0 01-.521-.78V8.906a.844.844 0 011.322-.695l4.5 3.094a.845.845 0 010 1.39z",fill:"currentColor"}))}},6905:(nt,fe,V)=>{"use strict";V.d(fe,{Z:()=>W});var f=V(8160),W=function(K){return f.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K),f.createElement("path",{d:"M5.897 6.795h12.206a.897.897 0 000-1.795H5.897a.897.897 0 100 1.795zM18.102 8.949H12a.898.898 0 000 1.795h6.102a.897.897 0 100-1.795zM18.102 13.256H12a.898.898 0 000 1.795h6.102a.897.897 0 000-1.795zM18.103 17.205H5.897a.897.897 0 100 1.795h12.206a.897.897 0 000-1.795zM5.982 9.183a.718.718 0 00-.444.663v4.308a.718.718 0 001.227.508l2.154-2.154a.718.718 0 000-1.016L6.765 9.338a.718.718 0 00-.783-.155z",fill:"currentColor"}))}},4817:(nt,fe,V)=>{"use strict";V.d(fe,{Z:()=>W});var f=V(8160),W=function(K){return f.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K),f.createElement("path",{d:"M10.168 13.392l6.423 5.273A1.473 1.473 0 0019 17.531V6.449a1.474 1.474 0 00-2.408-1.135l-6.424 5.274a1.81 1.81 0 000 2.798v.006zM8.004 19H5V4.98h3.004V19z",fill:"currentColor"}))}},9540:(nt,fe,V)=>{"use strict";V.d(fe,{Z:()=>W});var f=V(8160),W=function(K){return f.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K),f.createElement("path",{d:"M3 16.322c0-1.433.574-2.807 1.597-3.82a5.477 5.477 0 013.855-1.583 5.576 5.576 0 012.14.433M8.452 9.727c1.842 0 3.335-1.48 3.335-3.306 0-1.825-1.493-3.305-3.335-3.305-1.843 0-3.336 1.48-3.336 3.305 0 1.826 1.493 3.306 3.336 3.306zM11.093 21.116a3.682 3.682 0 01-2.481-1.121 3.616 3.616 0 01-1.014-2.509c0-.934.363-1.832 1.014-2.508a3.681 3.681 0 012.48-1.121h6.413c.942.044 1.83.445 2.481 1.121A3.616 3.616 0 0121 17.486c0 .934-.363 1.833-1.014 2.509a3.682 3.682 0 01-2.48 1.121h-6.413zM13.063 16.314l2.423 2.4M15.486 16.314l-2.423 2.4",stroke:"currentColor",strokeWidth:1.211,strokeLinecap:"round",strokeLinejoin:"round"}))}},6532:(nt,fe,V)=>{"use strict";V.d(fe,{Z:()=>W});var f=V(8160),W=function(K){return f.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K),f.createElement("path",{d:"M18.987 10.81H14.11c-.896 0-1.415-.527-1.415-1.423v-4.87c0-.456.343-.817.809-.817s.8.352.8.818v.738l-.185 3.067 2.32-2.434 2.699-2.725a.764.764 0 01.562-.237c.501 0 .87.334.87.826a.858.858 0 01-.246.606l-2.707 2.707-2.434 2.312 3.067-.176h.738c.466 0 .827.325.827.8 0 .466-.352.808-.827.808zm-8.428 8.921c-.466 0-.8-.342-.8-.817v-.835l.184-3.059-2.32 2.435-2.76 2.777a.75.75 0 01-.562.238c-.492 0-.862-.334-.862-.826a.85.85 0 01.238-.607l2.768-2.768 2.444-2.312-3.076.176h-.835c-.466 0-.827-.325-.827-.791 0-.475.352-.809.827-.809h4.974c.897 0 1.415.519 1.415 1.415v4.966c0 .466-.334.817-.808.817z",fill:"currentColor"}))}},4866:(nt,fe,V)=>{"use strict";V.d(fe,{T:()=>Ee});var f=V(1931),W=V(8081),K=V(3751),Y=V(8160),ie=V(6395);const Pe=(_e,pe,we)=>(0,f.m)(void 0,void 0,void 0,function*(){if(pe)try{yield _e.setRemoteTrackEnabled(pe.id,!pe.enabled)}catch(re){we(re,"remoteToggle")}}),Ee=(_e,pe,we=ie.r)=>{const re=(0,K.cw)(),se=(0,K._U)((0,W.M)(_e)),F=(0,K._U)((0,W.M)(pe)),Q=(0,K._U)((0,W.BF)(se?.id)),ce=(0,K._U)(W.AI),Ce=F?.enabled?ce?.mute:ce?.unmute,Ze=se?.enabled?ce?.mute:ce?.unmute,Re=(0,Y.useCallback)(()=>(0,f.m)(void 0,void 0,void 0,function*(){yield Pe(re,se,we)}),[re,se,we]),Ae=(0,Y.useCallback)(()=>(0,f.m)(void 0,void 0,void 0,function*(){yield Pe(re,F,we)}),[re,we,F]),Ue=(0,Y.useCallback)(Je=>{se&&re.setVolume(Je,se.id)},[re,se]);return{isAudioEnabled:!!se?.enabled,isVideoEnabled:!!F?.enabled,volume:Q,toggleAudio:se&&Ze?Re:void 0,toggleVideo:F?.source==="regular"&&Ce?Ae:void 0,setVolume:se?Ue:void 0}}},871:(nt,fe,V)=>{"use strict";V.d(fe,{i:()=>Ho});var f=V(8081),W=V(8160);const K=(Z,q,ee)=>Z.reduce((N,oe,de)=>{const be=Math.floor(de/q);return be>0&&ee||(N[be]||(N[be]=[]),N[be].push(oe)),N},[]),Y=({elements:Z,tilesInFirstPage:q,onlyOnePage:ee,isLastPageDifferentFromFirstPage:N,defaultWidth:oe,defaultHeight:de,lastPageWidth:be,lastPageHeight:ae})=>{const Te=K(Z,q,ee);return Te.map(($e,Ie)=>$e.map(Be=>{const xe=Ie===Te.length-1,ot=N&&xe?be:oe,at=N&&xe?ae:de;return Object.assign(Object.assign({},Be),{height:at,width:ot})}))};function ie(Z){if(Z.length===0)return null;const q={};let ee=Z[0],N=1;for(let oe=0;oe<Z.length;oe++){const de=Z[oe];q[de]===null?q[de]=1:q[de]++,q[de]>N&&(ee=de,N=q[de])}return ee}const Pe=Z=>ie(Z.filter(q=>{var ee,N;return((ee=q.track)===null||ee===void 0?void 0:ee.width)&&((N=q.track)===null||N===void 0?void 0:N.height)}).map(q=>{var ee,N;return(((ee=q.track)===null||ee===void 0?void 0:ee.width)||1)/(((N=q.track)===null||N===void 0?void 0:N.height)||1)})),Ee=(Z,q,ee,N,oe)=>{if(Z<0||q<0)throw new Error("Container must have a non-negative area");if(ee<1||!Number.isInteger(ee))throw new Error("Number of shapes to place must be a positive integer");const de=N&&oe&&N/oe;if(de!==void 0&&isNaN(de))throw new Error("Aspect ratio must be a number");let be={area:0,cols:0,rows:0,width:0,height:0};if(de!==void 0)for(let ae=ee;ae>0;ae+=-1){const Te=Math.ceil(ee/ae);let $e,Ie;Z/(ae*de)<=q/Te?($e=Z/ae,Ie=$e/de):(Ie=q/Te,$e=Ie*de);const Be=$e*Ie;Be>be.area&&(be={area:Be,width:$e,height:Ie,rows:Te,cols:ae})}return be},_e=({parentWidth:Z,parentHeight:q,count:ee,maxCount:N,aspectRatio:oe})=>{let de=0,be=0,ae=0,Te=0,$e=!1,Ie=0,Be=0;const xe=Math.min(Math.ceil(Math.sqrt(ee*(Z/q)/(oe.width/oe.height))),N);let ot=Z/xe,at=ot/(oe.width/oe.height);at>q&&(at=q,ot=at/(oe.height/oe.width));const wt=Math.floor(q/at);if(be=at,de=ot,Ie=Math.min(ee,wt*xe),Be=ee%(wt*xe),$e=Be>0&&ee>wt*xe,$e){let It=Z/Math.min(Math.ceil(Math.sqrt(Be*(Z/q)/(oe.width/oe.height))),N),Mt=It/(oe.width/oe.height);Mt>q&&(Mt=q,It=Mt/(oe.height/oe.width)),Te=Mt,ae=It}return{tilesInFirstPage:Ie,defaultWidth:de,defaultHeight:be,lastPageWidth:ae,lastPageHeight:Te,isLastPageDifferentFromFirstPage:$e}},pe=({parentWidth:Z,parentHeight:q,count:ee,maxCount:N,aspectRatio:oe})=>{let de=0,be=0,ae=0,Te=0,$e=!1,Ie=0,Be=0;const{width:xe,height:ot}=Ee(Z,q,Math.min(ee,N),oe.width,oe.height);if(de=xe,be=ot,Ie=Math.min(ee,N),Be=ee%N,$e=Be>0&&ee>N,$e){const{width:at,height:wt}=Ee(Z,q,Be,oe.width,oe.height);ae=at,Te=wt}return{tilesInFirstPage:Ie,defaultWidth:de,defaultHeight:be,lastPageWidth:ae,lastPageHeight:Te,isLastPageDifferentFromFirstPage:$e}},we=({parentWidth:Z,parentHeight:q,count:ee,maxCount:N,aspectRatio:oe})=>{let de=0,be=0,ae=0,Te=0,$e=!1,Ie=0,Be=0;const xe=Math.min(Math.ceil(Math.sqrt(ee*(oe.width/oe.height)/(Z/q))),N),ot=q/xe,at=ot*(oe.width/oe.height),wt=Math.floor(Z/at);if(de=at,be=ot,Ie=Math.min(ee,xe*wt),Be=ee%(xe*wt),$e=Be>0&&ee>xe*wt,$e){const It=q/Math.min(Math.ceil(Math.sqrt(Be*(oe.width/oe.height)/(Z/q))),N);Te=It,ae=It*(oe.width/oe.height)}return{tilesInFirstPage:Ie,defaultWidth:de,defaultHeight:be,lastPageWidth:ae,lastPageHeight:Te,isLastPageDifferentFromFirstPage:$e}};function re({count:Z,parentWidth:q,parentHeight:ee,maxTileCount:N,maxRowCount:oe,maxColCount:de,aspectRatio:be}){let ae=0,Te=0,$e=0,Ie=0,Be=!1,xe=0;if(Z===0)return{tilesInFirstPage:xe,defaultWidth:ae,defaultHeight:Te,lastPageWidth:$e,lastPageHeight:Ie,isLastPageDifferentFromFirstPage:Be};if(N)({tilesInFirstPage:xe,defaultWidth:ae,defaultHeight:Te,lastPageWidth:$e,lastPageHeight:Ie,isLastPageDifferentFromFirstPage:Be}=pe({parentWidth:q,parentHeight:ee,count:Z,maxCount:N,aspectRatio:be}));else if(oe)({tilesInFirstPage:xe,defaultWidth:ae,defaultHeight:Te,lastPageWidth:$e,lastPageHeight:Ie,isLastPageDifferentFromFirstPage:Be}=we({parentWidth:q,parentHeight:ee,count:Z,maxCount:oe,aspectRatio:be}));else if(de)({tilesInFirstPage:xe,defaultWidth:ae,defaultHeight:Te,lastPageWidth:$e,lastPageHeight:Ie,isLastPageDifferentFromFirstPage:Be}=_e({parentWidth:q,parentHeight:ee,count:Z,maxCount:de,aspectRatio:be}));else{const{width:ot,height:at}=Ee(q,ee,Z,be.width,be.height);ae=ot,Te=at,xe=Z}return{tilesInFirstPage:xe,defaultWidth:ae,defaultHeight:Te,lastPageWidth:$e,lastPageHeight:Ie,isLastPageDifferentFromFirstPage:Be}}const se=(Z,q,ee,N=!0)=>{if(!Z||!q||!ee)return[];const oe=[];for(const de of Z)if(de.videoTrack===void 0&&de.audioTrack&&q[de.audioTrack]?oe.push({peer:de}):de.videoTrack&&q[de.videoTrack]?oe.push({track:q[de.videoTrack],peer:de}):N||oe.push({peer:de}),de.auxiliaryTracks.length>0&&de.auxiliaryTracks.forEach(be=>{const ae=q[be];ae?.type==="video"&&ae?.source==="regular"&&oe.push({track:ae,peer:de})}),ee(de)&&de.auxiliaryTracks.length>0){const be=de.auxiliaryTracks.find(ae=>{const Te=q[ae];return Te?.type==="video"&&Te?.source==="screen"});be&&oe.push({track:q[be],peer:de})}return oe};var F=V(3751),Q=V(9004),ce=function(Z,q){return ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ee,N){ee.__proto__=N}||function(ee,N){for(var oe in N)Object.prototype.hasOwnProperty.call(N,oe)&&(ee[oe]=N[oe])},ce(Z,q)};function Ce(Z,q){if(typeof q!="function"&&q!==null)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");ce(Z,q);function ee(){this.constructor=Z}Z.prototype=q===null?Object.create(q):(ee.prototype=q.prototype,new ee)}var Ze=function(){return Ze=Object.assign||function(q){for(var ee,N=1,oe=arguments.length;N<oe;N++){ee=arguments[N];for(var de in ee)Object.prototype.hasOwnProperty.call(ee,de)&&(q[de]=ee[de])}return q},Ze.apply(this,arguments)};function Re(Z,q){var ee={};for(var N in Z)Object.prototype.hasOwnProperty.call(Z,N)&&q.indexOf(N)<0&&(ee[N]=Z[N]);if(Z!=null&&typeof Object.getOwnPropertySymbols=="function")for(var oe=0,N=Object.getOwnPropertySymbols(Z);oe<N.length;oe++)q.indexOf(N[oe])<0&&Object.prototype.propertyIsEnumerable.call(Z,N[oe])&&(ee[N[oe]]=Z[N[oe]]);return ee}var Ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof V.g<"u"?V.g:typeof self<"u"?self:{};function Ue(Z){var q=typeof Z;return Z!=null&&(q=="object"||q=="function")}var Je=Ue,De=typeof Ae=="object"&&Ae&&Ae.Object===Object&&Ae,Le=De,Ke=Le,Oe=typeof self=="object"&&self&&self.Object===Object&&self,_t=Ke||Oe||Function("return this")(),p1=_t,u1=p1,Z1=function(){return u1.Date.now()},wr=Z1,rn=/\s/;function I1(Z){for(var q=Z.length;q--&&rn.test(Z.charAt(q)););return q}var _o=I1,br=_o,Yt=/^\s+/;function Vr(Z){return Z&&Z.slice(0,br(Z)+1).replace(Yt,"")}var jr=Vr,xr=p1,Ht=xr.Symbol,yr=Ht,tr=yr,Et=Object.prototype,kt=Et.hasOwnProperty,rr=Et.toString,qt=tr?tr.toStringTag:void 0;function He(Z){var q=kt.call(Z,qt),ee=Z[qt];try{Z[qt]=void 0;var N=!0}catch{}var oe=rr.call(Z);return N&&(q?Z[qt]=ee:delete Z[qt]),oe}var Xe=He,qe=Object.prototype,et=qe.toString;function Ot(Z){return et.call(Z)}var ge=Ot,ut=yr,Jt=Xe,Qt=ge,Wt="[object Null]",f1="[object Undefined]",a1=ut?ut.toStringTag:void 0;function Ft(Z){return Z==null?Z===void 0?f1:Wt:a1&&a1 in Object(Z)?Jt(Z):Qt(Z)}var Lt=Ft;function Tt(Z){return Z!=null&&typeof Z=="object"}var z1=Tt,pt=Lt,W1=z1,F1="[object Symbol]";function Er(Z){return typeof Z=="symbol"||W1(Z)&&pt(Z)==F1}var wo=Er,bo=jr,En=Je,Lr=wo,Ln=0/0,xo=/^[-+]0x[0-9a-f]+$/i,nn=/^0b[01]+$/i,Ar=/^0o[0-7]+$/i,Sn=parseInt;function yo(Z){if(typeof Z=="number")return Z;if(Lr(Z))return Ln;if(En(Z)){var q=typeof Z.valueOf=="function"?Z.valueOf():Z;Z=En(q)?q+"":q}if(typeof Z!="string")return Z===0?Z:+Z;Z=bo(Z);var ee=nn.test(Z);return ee||Ar.test(Z)?Sn(Z.slice(2),ee?2:8):xo.test(Z)?Ln:+Z}var Eo=yo,Lo=Je,Dr=wr,nr=Eo,So="Expected a function",N1=Math.max,Ro=Math.min;function Zr(Z,q,ee){var N,oe,de,be,ae,Te,$e=0,Ie=!1,Be=!1,xe=!0;if(typeof Z!="function")throw new TypeError(So);q=nr(q)||0,Lo(ee)&&(Ie=!!ee.leading,Be="maxWait"in ee,de=Be?N1(nr(ee.maxWait)||0,q):de,xe="trailing"in ee?!!ee.trailing:xe);function ot(bt){var t1=N,Dt=oe;return N=oe=void 0,$e=bt,be=Z.apply(Dt,t1),be}function at(bt){return $e=bt,ae=setTimeout(Mt,q),Ie?ot(bt):be}function wt(bt){var t1=bt-Te,Dt=bt-$e,b1=q-t1;return Be?Ro(b1,de-Dt):b1}function It(bt){var t1=bt-Te,Dt=bt-$e;return Te===void 0||t1>=q||t1<0||Be&&Dt>=de}function Mt(){var bt=Dr();if(It(bt))return e1(bt);ae=setTimeout(Mt,wt(bt))}function e1(bt){return ae=void 0,xe&&N?ot(bt):(N=oe=void 0,be)}function Nt(){ae!==void 0&&clearTimeout(ae),$e=0,N=Te=oe=ae=void 0}function _1(){return ae===void 0?be:e1(Dr())}function w1(){var bt=Dr(),t1=It(bt);if(N=arguments,oe=this,Te=bt,t1){if(ae===void 0)return at(Te);if(Be)return clearTimeout(ae),ae=setTimeout(Mt,q),ot(Te)}return ae===void 0&&(ae=setTimeout(Mt,q)),be}return w1.cancel=Nt,w1.flush=_1,w1}var Rn=Zr,Io=Rn,or=Je,Mo="Expected a function";function In(Z,q,ee){var N=!0,oe=!0;if(typeof Z!="function")throw new TypeError(Mo);return or(ee)&&(N="leading"in ee?!!ee.leading:N,oe="trailing"in ee?!!ee.trailing:oe),Io(Z,q,{leading:N,maxWait:q,trailing:oe})}var on=In,sn=function(Z,q,ee,N){switch(q){case"debounce":return Rn(Z,ee,N);case"throttle":return on(Z,ee,N);default:return Z}},zr=function(Z){return typeof Z=="function"},M1=function(){return typeof window>"u"},Mn=function(Z){return Z instanceof Element||Z instanceof HTMLDocument},Pn=function(Z,q,ee,N){return function(oe){var de=oe.width,be=oe.height;q(function(ae){return ae.width===de&&ae.height===be||ae.width===de&&!N||ae.height===be&&!ee?ae:(Z&&zr(Z)&&Z(de,be),{width:de,height:be})})}},Wr=function(Z){Ce(q,Z);function q(ee){var N=Z.call(this,ee)||this;N.cancelHandler=function(){N.resizeHandler&&N.resizeHandler.cancel&&(N.resizeHandler.cancel(),N.resizeHandler=null)},N.attachObserver=function(){var $e=N.props,Ie=$e.targetRef,Be=$e.observerOptions;if(!M1()){Ie&&Ie.current&&(N.targetRef.current=Ie.current);var xe=N.getElement();!xe||N.observableElement&&N.observableElement===xe||(N.observableElement=xe,N.resizeObserver.observe(xe,Be))}},N.getElement=function(){var $e=N.props,Ie=$e.querySelector,Be=$e.targetDomEl;if(M1())return null;if(Ie)return document.querySelector(Ie);if(Be&&Mn(Be))return Be;if(N.targetRef&&Mn(N.targetRef.current))return N.targetRef.current;var xe=(0,Q.findDOMNode)(N);if(!xe)return null;var ot=N.getRenderType();switch(ot){case"renderProp":return xe;case"childFunction":return xe;case"child":return xe;case"childArray":return xe;default:return xe.parentElement}},N.createResizeHandler=function($e){var Ie=N.props,Be=Ie.handleWidth,xe=Be===void 0?!0:Be,ot=Ie.handleHeight,at=ot===void 0?!0:ot,wt=Ie.onResize;if(!(!xe&&!at)){var It=Pn(wt,N.setState.bind(N),xe,at);$e.forEach(function(Mt){var e1=Mt&&Mt.contentRect||{},Nt=e1.width,_1=e1.height,w1=!N.skipOnMount&&!M1();w1&&It({width:Nt,height:_1}),N.skipOnMount=!1})}},N.getRenderType=function(){var $e=N.props,Ie=$e.render,Be=$e.children;return zr(Ie)?"renderProp":zr(Be)?"childFunction":(0,W.isValidElement)(Be)?"child":Array.isArray(Be)?"childArray":"parent"};var oe=ee.skipOnMount,de=ee.refreshMode,be=ee.refreshRate,ae=be===void 0?1e3:be,Te=ee.refreshOptions;return N.state={width:void 0,height:void 0},N.skipOnMount=oe,N.targetRef=(0,W.createRef)(),N.observableElement=null,M1()||(N.resizeHandler=sn(N.createResizeHandler,de,ae,Te),N.resizeObserver=new window.ResizeObserver(N.resizeHandler)),N}return q.prototype.componentDidMount=function(){this.attachObserver()},q.prototype.componentDidUpdate=function(){this.attachObserver()},q.prototype.componentWillUnmount=function(){M1()||(this.observableElement=null,this.resizeObserver.disconnect(),this.cancelHandler())},q.prototype.render=function(){var ee=this.props,N=ee.render,oe=ee.children,de=ee.nodeType,be=de===void 0?"div":de,ae=this.state,Te=ae.width,$e=ae.height,Ie={width:Te,height:$e,targetRef:this.targetRef},Be=this.getRenderType(),xe;switch(Be){case"renderProp":return N&&N(Ie);case"childFunction":return xe=oe,xe(Ie);case"child":if(xe=oe,xe.type&&typeof xe.type=="string"){Ie.targetRef;var ot=Re(Ie,["targetRef"]);return(0,W.cloneElement)(xe,ot)}return(0,W.cloneElement)(xe,Ie);case"childArray":return xe=oe,xe.map(function(at){return!!at&&(0,W.cloneElement)(at,Ie)});default:return W.createElement(be,null)}},q}(W.PureComponent);function Po(Z,q){q===void 0&&(q={});var ee=function(de){Ce(be,de);function be(){var ae=de!==null&&de.apply(this,arguments)||this;return ae.ref=createRef(),ae}return be.prototype.render=function(){var ae=this.props,Te=ae.forwardedRef,$e=Re(ae,["forwardedRef"]),Ie=Te??this.ref;return React.createElement(Wr,Ze({},q,{targetRef:Ie}),React.createElement(Z,Ze({targetRef:Ie},$e)))},be}(Component);function N(de,be){return React.createElement(ee,Ze({},de,{forwardedRef:be}))}var oe=Z.displayName||Z.name;return N.displayName="withResizeDetector(".concat(oe,")"),forwardRef(N)}var Sr=M1()?W.useEffect:W.useLayoutEffect;function $n(Z){Z===void 0&&(Z={});var q=Z.skipOnMount,ee=q===void 0?!1:q,N=Z.refreshMode,oe=Z.refreshRate,de=oe===void 0?1e3:oe,be=Z.refreshOptions,ae=Z.handleWidth,Te=ae===void 0?!0:ae,$e=Z.handleHeight,Ie=$e===void 0?!0:$e,Be=Z.targetRef,xe=Z.observerOptions,ot=Z.onResize,at=(0,W.useRef)(ee),wt=(0,W.useRef)(null),It=Be??wt,Mt=(0,W.useRef)(),e1=(0,W.useState)({width:void 0,height:void 0}),Nt=e1[0],_1=e1[1];return Sr(function(){if(!M1()){var w1=Pn(ot,_1,Te,Ie),bt=function(Dt){!Te&&!Ie||Dt.forEach(function(b1){var an=b1&&b1.contentRect||{},hi=an.width,P1=an.height,Hn=!at.current&&!M1();Hn&&w1({width:hi,height:P1}),at.current=!1})};Mt.current=sn(bt,N,de,be);var t1=new window.ResizeObserver(Mt.current);return It.current&&t1.observe(It.current,xe),function(){t1.disconnect();var Dt=Mt.current;Dt&&Dt.cancel&&Dt.cancel()}}},[N,de,be,Te,Ie,ot,xe,It.current]),Ze({ref:It},Nt)}const $o={width:1,height:1},Ho=({peers:Z,maxTileCount:q,maxColCount:ee,maxRowCount:N,includeScreenShareForPeer:oe=()=>!1,aspectRatio:de=$o,filterNonPublishingPeers:be=!0,offsetY:ae=0})=>{const{width:Te=0,height:$e=0,ref:Ie}=$n(),Be=(0,F.gg)().getState(f.zK),xe=se(Z,Be,oe,be),ot=(0,W.useMemo)(()=>de||{width:Pe(xe)||1,height:1},[de,xe]),at=xe.length,{tilesInFirstPage:wt,defaultWidth:It,defaultHeight:Mt,lastPageWidth:e1,lastPageHeight:Nt,isLastPageDifferentFromFirstPage:_1}=(0,W.useMemo)(()=>re({count:at,parentWidth:Math.floor(Te),parentHeight:Math.floor($e)-Math.min($e,ae),maxTileCount:q,maxRowCount:N,maxColCount:ee,aspectRatio:ot}),[at,Te,$e,q,N,ee,ot,ae]);return{pagesWithTiles:(0,W.useMemo)(()=>Y({elements:xe,tilesInFirstPage:wt,onlyOnePage:!1,isLastPageDifferentFromFirstPage:_1,defaultWidth:It,defaultHeight:Mt,lastPageWidth:e1,lastPageHeight:Nt}),[xe,wt,_1,It,Mt,e1,Nt]),ref:Ie}}},1554:(nt,fe,V)=>{"use strict";V.d(fe,{$:()=>K});var f=V(9290),W=V(8485);const K={Root:(0,f.zo)(W.k,{justifyContent:"space-between",alignItems:"center",py:"$2",position:"relative",height:"100%","@md":{flexWrap:"wrap",gap:"$4"}}),Left:(0,f.zo)(W.k,{alignItems:"center",position:"absolute",left:"$10",gap:"$8","@md":{position:"unset",justifyContent:"center",w:"100%",p:"$4 0"}}),Center:(0,f.zo)(W.k,{w:"100%",justifyContent:"center",alignItems:"center",gap:"$8"}),Right:(0,f.zo)(W.k,{alignItems:"center",position:"absolute",right:"$10",gap:"$8","@md":{display:"none"}})}},4674:(nt,fe,V)=>{"use strict";V.d(fe,{I:()=>W});var f=V(9290);const W={Root:(0,f.zo)("div",{height:"2rem",display:"flex",justifyContent:"center",alignItems:"center",width:"100%","& > * + *":{marginRight:"0",marginLeft:"0.5rem"}}),Chevron:(0,f.zo)("button",{color:"$textPrimary","&:focus":{outline:"none"},"&[disabled]":{color:"$grayDefault",cursor:"not-allowed"}}),Dots:(0,f.zo)("div",{display:"flex",alignItems:"center","& > * + *":{marginRight:"0",marginLeft:"0.5rem"}}),Dot:(0,f.zo)("button",{"&:focus":{outline:"none"},borderRadius:"9999px",width:"0.5rem",height:"0.5rem",backgroundColor:"$textDisabled",variants:{active:{true:{backgroundColor:"$textPrimary"}}}})}},8673:(nt,fe,V)=>{"use strict";V.d(fe,{E:()=>qt});var f=V(1855),W=V(5859),K=V(5939),Y=V(440),ie=V(1802),Pe=V(3118),Ee=V(8841),_e=V(4135),pe=V(8224),we=V(9600),re=V(8160),se=V(8886),F=Object.defineProperty,Q=Object.defineProperties,ce=Object.getOwnPropertyDescriptors,Ce=Object.getOwnPropertySymbols,Ze=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,Ae=(He,Xe,qe)=>Xe in He?F(He,Xe,{enumerable:!0,configurable:!0,writable:!0,value:qe}):He[Xe]=qe,Ue=(He,Xe)=>{for(var qe in Xe||(Xe={}))Ze.call(Xe,qe)&&Ae(He,qe,Xe[qe]);if(Ce)for(var qe of Ce(Xe))Re.call(Xe,qe)&&Ae(He,qe,Xe[qe]);return He},Je=(He,Xe)=>Q(He,ce(Xe)),De=(He,Xe)=>{var qe={};for(var et in He)Ze.call(He,et)&&Xe.indexOf(et)<0&&(qe[et]=He[et]);if(He!=null&&Ce)for(var et of Ce(He))Xe.indexOf(et)<0&&Re.call(He,et)&&(qe[et]=He[et]);return qe};const[Le,Ke]=(0,Ee.b)("Radio"),[Oe,_t]=Le("Radio"),p1=re.forwardRef((He,Xe)=>{const qe=He,{__scopeRadio:et,"aria-labelledby":Ot,name:ge,checked:ut=!1,required:Jt,disabled:Qt,value:Wt="on",onCheck:f1}=qe,a1=De(qe,["__scopeRadio","aria-labelledby","name","checked","required","disabled","value","onCheck"]),[Ft,Lt]=re.useState(null),Tt=(0,_e.e)(Xe,Er=>Lt(Er)),z1=(0,pe.t0)(Ft),pt=Ot||z1,W1=re.useRef(!1),F1=!Ft||Boolean(Ft.closest("form"));return re.createElement(Oe,{scope:et,checked:ut,disabled:Qt},re.createElement(Pe.W.button,(0,se.Z)({type:"button",role:"radio","aria-checked":ut,"aria-labelledby":pt,"data-state":wr(ut),"data-disabled":Qt?"":void 0,disabled:Qt,value:Wt},a1,{ref:Tt,onClick:(0,we.M)(He.onClick,Er=>{ut||f1==null||f1(),F1&&(W1.current=Er.isPropagationStopped(),W1.current||Er.stopPropagation())})})),F1&&re.createElement(Z1,{control:Ft,bubbles:!W1.current,name:ge,value:Wt,checked:ut,required:Jt,disabled:Qt,style:{transform:"translateX(-100%)"}}))}),u1=re.forwardRef((He,Xe)=>{const qe=He,{__scopeRadio:et,forceMount:Ot}=qe,ge=De(qe,["__scopeRadio","forceMount"]),ut=_t("RadioIndicator",et);return re.createElement(f.z,{present:Ot||ut.checked},re.createElement(Pe.W.span,(0,se.Z)({"data-state":wr(ut.checked),"data-disabled":ut.disabled?"":void 0},ge,{ref:Xe})))}),Z1=He=>{const Xe=He,{control:qe,checked:et,bubbles:Ot=!0}=Xe,ge=De(Xe,["control","checked","bubbles"]),ut=re.useRef(null),Jt=(0,W.D)(et),Qt=(0,K.t)(qe);return re.useEffect(()=>{const Wt=ut.current,f1=window.HTMLInputElement.prototype,a1=Object.getOwnPropertyDescriptor(f1,"checked").set;if(Jt!==et&&a1){const Ft=new Event("click",{bubbles:Ot});a1.call(Wt,et),Wt.dispatchEvent(Ft)}},[Jt,et,Ot]),re.createElement("input",(0,se.Z)({type:"radio","aria-hidden":!0,defaultChecked:et},ge,{tabIndex:-1,ref:ut,style:Je(Ue(Ue({},He.style),Qt),{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))};function wr(He){return He?"checked":"unchecked"}const rn=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],[I1,_o]=(0,Ee.b)("RadioGroup",[ie.Pc,Ke]),br=(0,ie.Pc)(),Yt=Ke(),[Vr,jr]=I1("RadioGroup"),xr=re.forwardRef((He,Xe)=>{const qe=He,{__scopeRadioGroup:et,name:Ot,"aria-labelledby":ge,defaultValue:ut,value:Jt,required:Qt=!1,orientation:Wt,dir:f1="ltr",loop:a1=!0,onValueChange:Ft}=qe,Lt=De(qe,["__scopeRadioGroup","name","aria-labelledby","defaultValue","value","required","orientation","dir","loop","onValueChange"]),Tt=(0,pe.t0)(),z1=ge||Tt,pt=br(et),[W1,F1]=(0,Y.T)({prop:Jt,defaultProp:ut,onChange:Ft});return re.createElement(Vr,{scope:et,name:Ot,required:Qt,value:W1,onValueChange:F1},re.createElement(ie.fC,(0,se.Z)({asChild:!0},pt,{orientation:Wt,dir:f1,loop:a1}),re.createElement(Pe.W.div,(0,se.Z)({role:"radiogroup","aria-orientation":Wt,"aria-labelledby":z1,dir:f1},Lt,{ref:Xe}))))}),Ht=re.forwardRef((He,Xe)=>{const qe=He,{__scopeRadioGroup:et,disabled:Ot}=qe,ge=De(qe,["__scopeRadioGroup","disabled"]),ut=jr("RadioGroupItem",et),Jt=br(et),Qt=Yt(et),Wt=re.useRef(null),f1=(0,_e.e)(Xe,Wt),a1=ut.value===ge.value,Ft=re.useRef(!1);return re.useEffect(()=>{const Lt=z1=>{rn.includes(z1.key)&&(Ft.current=!0)},Tt=()=>Ft.current=!1;return document.addEventListener("keydown",Lt),document.addEventListener("keyup",Tt),()=>{document.removeEventListener("keydown",Lt),document.removeEventListener("keyup",Tt)}},[]),re.createElement(ie.ck,(0,se.Z)({asChild:!0},Jt,{focusable:!Ot,active:a1}),re.createElement(p1,(0,se.Z)({disabled:Ot,required:ut.required,checked:a1},Qt,ge,{name:ut.name,ref:f1,onCheck:()=>ut.onValueChange(ge.value),onKeyDown:(0,we.M)(Lt=>{Lt.key==="Enter"&&Lt.preventDefault()}),onFocus:(0,we.M)(ge.onFocus,()=>{var Lt;Ft.current&&((Lt=Wt.current)===null||Lt===void 0||Lt.click())})})))}),yr=re.forwardRef((He,Xe)=>{const qe=He,{__scopeRadioGroup:et}=qe,Ot=De(qe,["__scopeRadioGroup"]),ge=Yt(et);return re.createElement(u1,(0,se.Z)({},ge,Ot,{ref:Xe}))}),tr=xr,Et=Ht,kt=yr;var rr=V(9290);const qt={Root:(0,rr.zo)(tr,{display:"flex",alignItems:"center"}),Item:(0,rr.zo)(Et,{bg:"$white",width:"$8",height:"$8",border:"1px solid $brandDefault",cursor:"pointer",borderRadius:"$round","&:focus":{boxShadow:"none",outline:"none"},'&[data-state="checked"]':{borderWidth:"$space$2"}}),Indicator:(0,rr.zo)(kt,{bg:"$brandDefault"})}},4299:(nt,fe,V)=>{"use strict";V.d(fe,{q8:()=>se});var f=V(8160),W=V(3751),K=V(8081);const Y=(Re,Ae="B",Ue=2)=>{if(Re===0)return`0 ${Ae}`;if(!Re)return"-";const Je=Ue<0?0:Ue,De=["","K","M","G","T","P","E","Z","Y"].map(Ke=>Ke+Ae);let Le=Math.floor(Math.log(Re)/Math.log(1024));return Le===0&&Le++,`${parseFloat((Re/Math.pow(1024,Le)).toFixed(Je))} ${De[Le]}`};var ie=V(9290);const Pe=(0,ie.zo)("div",{backgroundColor:"$statsBg",position:"absolute",top:"0.3rem",left:"0.3rem",zIndex:10,borderRadius:"$2",padding:"5px",fontSize:"$xs",overflowY:"auto",maxHeight:"75%",maxWidth:"85%"}),Ee=(0,ie.zo)("table",{}),_e=(0,ie.zo)("tr",{width:"100%","& > * + *":{paddingLeft:"0.5rem"},whiteSpace:"nowrap",textAlign:"left"}),pe=(0,ie.zo)("td",{color:"$textPrimary",fontWeight:400}),we=(0,ie.zo)("td",{color:"$textPrimary"}),re={Root:Pe,Row:_e,Label:pe,Value:we,Table:Ee};function se({videoTrackID:Re,audioTrackID:Ae,peerID:Ue}){var Je,De,Le;const Ke=(0,W.p5)(K.fA.trackStatsByID(Ae)),Oe=(0,W.p5)(K.fA.trackStatsByID(Re)),_t=(Je=(0,W._U)((0,K.hE)(Ue)))===null||Je===void 0?void 0:Je.downlinkQuality;return Ke||Oe?f.createElement(re.Root,null,f.createElement("table",null,f.createElement("tbody",null,f.createElement(ce,{show:Ce(Oe?.frameWidth),label:"Width",value:(De=Oe?.frameWidth)===null||De===void 0?void 0:De.toString()}),f.createElement(ce,{show:Ce(Oe?.frameHeight),label:"Height",value:(Le=Oe?.frameHeight)===null||Le===void 0?void 0:Le.toString()}),f.createElement(ce,{show:Ce(Oe?.framesPerSecond),label:"FPS",value:`${Oe?.framesPerSecond} ${Ce(Oe?.framesDropped)?`(${Oe?.framesDropped} dropped)`:""}`}),f.createElement(ce,{show:Ze(Oe?.bitrate),label:"Bitrate(V)",value:Y(Oe?.bitrate,"b/s")}),f.createElement(ce,{show:Ze(Ke?.bitrate),label:"Bitrate(A)",value:Y(Ke?.bitrate,"b/s")}),f.createElement(ce,{show:Ze(_t),label:"Downlink",value:`${_t}`}),f.createElement(ce,{show:Ze(Oe?.codec),label:"Codec(V)",value:Oe?.codec}),f.createElement(ce,{show:Ze(Ke?.codec),label:"Codec(A)",value:Ke?.codec}),f.createElement(F,{audioTrackStats:Ke,videoTrackStats:Oe})))):null}const F=({audioTrackStats:Re,videoTrackStats:Ae})=>{var Ue,Je;const De=Re?.type.includes("outbound")||Ae?.type.includes("outbound"),Le=De?Re?.remote:Re,Ke=De?Ae?.remote:Ae;return f.createElement(f.Fragment,null,f.createElement(Q,{label:"Packet Loss(V)",stats:Ke}),f.createElement(Q,{label:"Packet Loss(A)",stats:Le}),f.createElement(ce,{show:Ze(Ke?.jitter),label:"Jitter(V)",value:(Ue=Ke?.jitter)===null||Ue===void 0?void 0:Ue.toFixed(4)}),f.createElement(ce,{show:Ze(Le?.jitter),label:"Jitter(A)",value:(Je=Le?.jitter)===null||Je===void 0?void 0:Je.toFixed(4)}))},Q=({stats:Re,label:Ae})=>{const Ue=(Re?.packetsLostRate?Re.packetsLostRate.toFixed(2):0)+"/s";return f.createElement(ce,{show:Ce(Re?.packetsLost),label:Ae,value:`${Re?.packetsLost}(${Ue})`})},ce=f.memo(({label:Re="",value:Ae="",show:Ue=!0})=>f.createElement(f.Fragment,null,Ue?f.createElement(re.Row,null,f.createElement(re.Label,null,Re),Ae===""?f.createElement(re.Value,null):f.createElement(re.Value,null,Ae)):null));function Ce(Re){return Ze(Re)&&Re!==0}function Ze(Re){return Re!=null}},8414:(nt,fe,V)=>{"use strict";V.d(fe,{R:()=>re});var f=V(6811),W=V(9290),K=V(5943),Y=V(3764);const ie=f.fC,Pe=(0,W.zo)(f.xz,Object.assign(Object.assign({position:"absolute",top:"10px",right:"10px",zIndex:5,width:"$14",height:"$14",color:"white",borderRadius:"$round",backgroundColor:"$menuBg",border:"none"},Y._),{"&:not([disabled]):focus":{outline:"none",boxShadow:"0 0 0 3px $colors$brandLight"}})),Ee=(0,W.zo)(f.VY,Object.assign({fontFamily:"$sans",backgroundColor:"$menuBg",padding:"10px 0px",display:"flex",flexDirection:"column",borderRadius:"12px"},K.kp)),_e={fontSize:"$sm",color:"$textPrimary",display:"flex",alignItems:"center",padding:"8px 12px",width:"100%"},pe=(0,W.zo)("button",Object.assign(Object.assign({},_e),{height:"40px","&:hover":{backgroundColor:"$menuBg"},"&:focus":{outline:"none"},"& > * + *":{marginRight:"0",marginLeft:"0.5rem"}})),we=(0,W.zo)("div",Object.assign(Object.assign({},_e),{alignItems:"start",flexDirection:"column",marginBottom:"0"}));(0,W.zo)("div",{display:"flex","& > * + *":{marginRight:"0",marginLeft:"0.5rem"}});const re={Root:ie,Trigger:Pe,Content:Ee,ItemButton:pe,VolumeItem:we,RemoveItem:(0,W.zo)(pe,{color:"$error",borderTop:"1px solid $borderLight"})}},8613:(nt,fe,V)=>{"use strict";V.d(fe,{d:()=>W});var f=V(9290);const W={Root:(0,f.zo)("div",{height:"100%",width:"100%",display:"flex",flexDirection:"column"}),Container:(0,f.zo)("div",{height:"100%",width:"100%",position:"relative",display:"flex",alignItems:"center",overflow:"hidden"}),View:(0,f.zo)("div",{height:"100%",width:"100%",position:"absolute",display:"flex",placeContent:"center",flexWrap:"wrap",alignItems:"center"})}},8534:(nt,fe,V)=>{"use strict";V.d(fe,{I:()=>f});const f=(W,K)=>W===K?0:W+1===K?"-100%":W-1===K?"100%":W<K?"-200%":"200%"},7924:function(nt,fe){(function(V,f){f(fe)})(this,function(V){"use strict";var f=function(se){return function(F){var Q=se(F);return F.add(Q),Q}},W=function(se){return function(F,Q){return se.set(F,Q),Q}},K=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,Y=536870912,ie=Y*2,Pe=function(se,F){return function(Q){var ce=F.get(Q),Ce=ce===void 0?Q.size:ce<ie?ce+1:0;if(!Q.has(Ce))return se(Q,Ce);if(Q.size<Y){for(;Q.has(Ce);)Ce=Math.floor(Math.random()*ie);return se(Q,Ce)}if(Q.size>K)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;Q.has(Ce);)Ce=Math.floor(Math.random()*K);return se(Q,Ce)}},Ee=new WeakMap,_e=W(Ee),pe=Pe(_e,Ee),we=f(pe);V.addUniqueNumber=we,V.generateUniqueNumber=pe,Object.defineProperty(V,"__esModule",{value:!0})})},108:nt=>{/*!
 * Pusher JavaScript Library v7.0.6
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(V,f){nt.exports=f()})(window,function(){return function(fe){var V={};function f(W){if(V[W])return V[W].exports;var K=V[W]={i:W,l:!1,exports:{}};return fe[W].call(K.exports,K,K.exports,f),K.l=!0,K.exports}return f.m=fe,f.c=V,f.d=function(W,K,Y){f.o(W,K)||Object.defineProperty(W,K,{enumerable:!0,get:Y})},f.r=function(W){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(W,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(W,"__esModule",{value:!0})},f.t=function(W,K){if(K&1&&(W=f(W)),K&8||K&4&&typeof W=="object"&&W&&W.__esModule)return W;var Y=Object.create(null);if(f.r(Y),Object.defineProperty(Y,"default",{enumerable:!0,value:W}),K&2&&typeof W!="string")for(var ie in W)f.d(Y,ie,function(Pe){return W[Pe]}.bind(null,ie));return Y},f.n=function(W){var K=W&&W.__esModule?function(){return W.default}:function(){return W};return f.d(K,"a",K),K},f.o=function(W,K){return Object.prototype.hasOwnProperty.call(W,K)},f.p="",f(f.s=2)}([function(fe,V,f){"use strict";var W=this&&this.__extends||function(){var se=function(F,Q){return se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,Ce){ce.__proto__=Ce}||function(ce,Ce){for(var Ze in Ce)Ce.hasOwnProperty(Ze)&&(ce[Ze]=Ce[Ze])},se(F,Q)};return function(F,Q){se(F,Q);function ce(){this.constructor=F}F.prototype=Q===null?Object.create(Q):(ce.prototype=Q.prototype,new ce)}}();Object.defineProperty(V,"__esModule",{value:!0});var K=256,Y=function(){function se(F){F===void 0&&(F="="),this._paddingCharacter=F}return se.prototype.encodedLength=function(F){return this._paddingCharacter?(F+2)/3*4|0:(F*8+5)/6|0},se.prototype.encode=function(F){for(var Q="",ce=0;ce<F.length-2;ce+=3){var Ce=F[ce]<<16|F[ce+1]<<8|F[ce+2];Q+=this._encodeByte(Ce>>>3*6&63),Q+=this._encodeByte(Ce>>>2*6&63),Q+=this._encodeByte(Ce>>>1*6&63),Q+=this._encodeByte(Ce>>>0*6&63)}var Ze=F.length-ce;if(Ze>0){var Ce=F[ce]<<16|(Ze===2?F[ce+1]<<8:0);Q+=this._encodeByte(Ce>>>3*6&63),Q+=this._encodeByte(Ce>>>2*6&63),Ze===2?Q+=this._encodeByte(Ce>>>1*6&63):Q+=this._paddingCharacter||"",Q+=this._paddingCharacter||""}return Q},se.prototype.maxDecodedLength=function(F){return this._paddingCharacter?F/4*3|0:(F*6+7)/8|0},se.prototype.decodedLength=function(F){return this.maxDecodedLength(F.length-this._getPaddingLength(F))},se.prototype.decode=function(F){if(F.length===0)return new Uint8Array(0);for(var Q=this._getPaddingLength(F),ce=F.length-Q,Ce=new Uint8Array(this.maxDecodedLength(ce)),Ze=0,Re=0,Ae=0,Ue=0,Je=0,De=0,Le=0;Re<ce-4;Re+=4)Ue=this._decodeChar(F.charCodeAt(Re+0)),Je=this._decodeChar(F.charCodeAt(Re+1)),De=this._decodeChar(F.charCodeAt(Re+2)),Le=this._decodeChar(F.charCodeAt(Re+3)),Ce[Ze++]=Ue<<2|Je>>>4,Ce[Ze++]=Je<<4|De>>>2,Ce[Ze++]=De<<6|Le,Ae|=Ue&K,Ae|=Je&K,Ae|=De&K,Ae|=Le&K;if(Re<ce-1&&(Ue=this._decodeChar(F.charCodeAt(Re)),Je=this._decodeChar(F.charCodeAt(Re+1)),Ce[Ze++]=Ue<<2|Je>>>4,Ae|=Ue&K,Ae|=Je&K),Re<ce-2&&(De=this._decodeChar(F.charCodeAt(Re+2)),Ce[Ze++]=Je<<4|De>>>2,Ae|=De&K),Re<ce-3&&(Le=this._decodeChar(F.charCodeAt(Re+3)),Ce[Ze++]=De<<6|Le,Ae|=Le&K),Ae!==0)throw new Error("Base64Coder: incorrect characters for decoding");return Ce},se.prototype._encodeByte=function(F){var Q=F;return Q+=65,Q+=25-F>>>8&0-65-26+97,Q+=51-F>>>8&26-97-52+48,Q+=61-F>>>8&52-48-62+43,Q+=62-F>>>8&62-43-63+47,String.fromCharCode(Q)},se.prototype._decodeChar=function(F){var Q=K;return Q+=(42-F&F-44)>>>8&-K+F-43+62,Q+=(46-F&F-48)>>>8&-K+F-47+63,Q+=(47-F&F-58)>>>8&-K+F-48+52,Q+=(64-F&F-91)>>>8&-K+F-65+0,Q+=(96-F&F-123)>>>8&-K+F-97+26,Q},se.prototype._getPaddingLength=function(F){var Q=0;if(this._paddingCharacter){for(var ce=F.length-1;ce>=0&&F[ce]===this._paddingCharacter;ce--)Q++;if(F.length<4||Q>2)throw new Error("Base64Coder: incorrect padding")}return Q},se}();V.Coder=Y;var ie=new Y;function Pe(se){return ie.encode(se)}V.encode=Pe;function Ee(se){return ie.decode(se)}V.decode=Ee;var _e=function(se){W(F,se);function F(){return se!==null&&se.apply(this,arguments)||this}return F.prototype._encodeByte=function(Q){var ce=Q;return ce+=65,ce+=25-Q>>>8&0-65-26+97,ce+=51-Q>>>8&26-97-52+48,ce+=61-Q>>>8&52-48-62+45,ce+=62-Q>>>8&62-45-63+95,String.fromCharCode(ce)},F.prototype._decodeChar=function(Q){var ce=K;return ce+=(44-Q&Q-46)>>>8&-K+Q-45+62,ce+=(94-Q&Q-96)>>>8&-K+Q-95+63,ce+=(47-Q&Q-58)>>>8&-K+Q-48+52,ce+=(64-Q&Q-91)>>>8&-K+Q-65+0,ce+=(96-Q&Q-123)>>>8&-K+Q-97+26,ce},F}(Y);V.URLSafeCoder=_e;var pe=new _e;function we(se){return pe.encode(se)}V.encodeURLSafe=we;function re(se){return pe.decode(se)}V.decodeURLSafe=re,V.encodedLength=function(se){return ie.encodedLength(se)},V.maxDecodedLength=function(se){return ie.maxDecodedLength(se)},V.decodedLength=function(se){return ie.decodedLength(se)}},function(fe,V,f){"use strict";Object.defineProperty(V,"__esModule",{value:!0});var W="utf8: invalid string",K="utf8: invalid source encoding";function Y(Ee){for(var _e=new Uint8Array(ie(Ee)),pe=0,we=0;we<Ee.length;we++){var re=Ee.charCodeAt(we);re<128?_e[pe++]=re:re<2048?(_e[pe++]=192|re>>6,_e[pe++]=128|re&63):re<55296?(_e[pe++]=224|re>>12,_e[pe++]=128|re>>6&63,_e[pe++]=128|re&63):(we++,re=(re&1023)<<10,re|=Ee.charCodeAt(we)&1023,re+=65536,_e[pe++]=240|re>>18,_e[pe++]=128|re>>12&63,_e[pe++]=128|re>>6&63,_e[pe++]=128|re&63)}return _e}V.encode=Y;function ie(Ee){for(var _e=0,pe=0;pe<Ee.length;pe++){var we=Ee.charCodeAt(pe);if(we<128)_e+=1;else if(we<2048)_e+=2;else if(we<55296)_e+=3;else if(we<=57343){if(pe>=Ee.length-1)throw new Error(W);pe++,_e+=4}else throw new Error(W)}return _e}V.encodedLength=ie;function Pe(Ee){for(var _e=[],pe=0;pe<Ee.length;pe++){var we=Ee[pe];if(we&128){var re=void 0;if(we<224){if(pe>=Ee.length)throw new Error(K);var se=Ee[++pe];if((se&192)!==128)throw new Error(K);we=(we&31)<<6|se&63,re=128}else if(we<240){if(pe>=Ee.length-1)throw new Error(K);var se=Ee[++pe],F=Ee[++pe];if((se&192)!==128||(F&192)!==128)throw new Error(K);we=(we&15)<<12|(se&63)<<6|F&63,re=2048}else if(we<248){if(pe>=Ee.length-2)throw new Error(K);var se=Ee[++pe],F=Ee[++pe],Q=Ee[++pe];if((se&192)!==128||(F&192)!==128||(Q&192)!==128)throw new Error(K);we=(we&15)<<18|(se&63)<<12|(F&63)<<6|Q&63,re=65536}else throw new Error(K);if(we<re||we>=55296&&we<=57343)throw new Error(K);if(we>=65536){if(we>1114111)throw new Error(K);we-=65536,_e.push(String.fromCharCode(55296|we>>10)),we=56320|we&1023}}_e.push(String.fromCharCode(we))}return _e.join("")}V.decode=Pe},function(fe,V,f){fe.exports=f(3).default},function(fe,V,f){"use strict";f.r(V);var W=function(){function _(C,b){this.lastId=0,this.prefix=C,this.name=b}return _.prototype.create=function(C){this.lastId++;var b=this.lastId,S=this.prefix+b,M=this.name+"["+b+"]",O=!1,G=function(){O||(C.apply(null,arguments),O=!0)};return this[b]=G,{number:b,id:S,name:M,callback:G}},_.prototype.remove=function(C){delete this[C.number]},_}(),K=new W("_pusher_script_","Pusher.ScriptReceivers"),Y={VERSION:"7.0.6",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,cluster:"mt1",cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},ie=Y,Pe=function(){function _(C){this.options=C,this.receivers=C.receivers||K,this.loading={}}return _.prototype.load=function(C,b,S){var M=this;if(M.loading[C]&&M.loading[C].length>0)M.loading[C].push(S);else{M.loading[C]=[S];var O=Qe.createScriptRequest(M.getPath(C,b)),G=M.receivers.create(function(ue){if(M.receivers.remove(G),M.loading[C]){var ze=M.loading[C];delete M.loading[C];for(var st=function(Xt){Xt||O.cleanup()},Bt=0;Bt<ze.length;Bt++)ze[Bt](ue,st)}});O.send(G)}},_.prototype.getRoot=function(C){var b,S=Qe.getDocument().location.protocol;return C&&C.useTLS||S==="https:"?b=this.options.cdn_https:b=this.options.cdn_http,b.replace(/\/*$/,"")+"/"+this.options.version},_.prototype.getPath=function(C,b){return this.getRoot(b)+"/"+C+this.options.suffix+".js"},_}(),Ee=Pe,_e=new W("_pusher_dependencies","Pusher.DependenciesReceivers"),pe=new Ee({cdn_http:ie.cdn_http,cdn_https:ie.cdn_https,version:ie.VERSION,suffix:ie.dependency_suffix,receivers:_e}),we={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/authenticating_users"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},re=function(_){var C="See:",b=we.urls[_];if(!b)return"";var S;return b.fullUrl?S=b.fullUrl:b.path&&(S=we.baseUrl+b.path),S?C+" "+S:""},se={buildLogSuffix:re},F=function(){var _=function(C,b){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,M){S.__proto__=M}||function(S,M){for(var O in M)M.hasOwnProperty(O)&&(S[O]=M[O])},_(C,b)};return function(C,b){_(C,b);function S(){this.constructor=C}C.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}(),Q=function(_){F(C,_);function C(b){var S=this.constructor,M=_.call(this,b)||this;return Object.setPrototypeOf(M,S.prototype),M}return C}(Error),ce=function(_){F(C,_);function C(b){var S=this.constructor,M=_.call(this,b)||this;return Object.setPrototypeOf(M,S.prototype),M}return C}(Error),Ce=function(_){F(C,_);function C(b){var S=this.constructor,M=_.call(this,b)||this;return Object.setPrototypeOf(M,S.prototype),M}return C}(Error),Ze=function(_){F(C,_);function C(b){var S=this.constructor,M=_.call(this,b)||this;return Object.setPrototypeOf(M,S.prototype),M}return C}(Error),Re=function(_){F(C,_);function C(b){var S=this.constructor,M=_.call(this,b)||this;return Object.setPrototypeOf(M,S.prototype),M}return C}(Error),Ae=function(_){F(C,_);function C(b){var S=this.constructor,M=_.call(this,b)||this;return Object.setPrototypeOf(M,S.prototype),M}return C}(Error),Ue=function(_){F(C,_);function C(b){var S=this.constructor,M=_.call(this,b)||this;return Object.setPrototypeOf(M,S.prototype),M}return C}(Error),Je=function(_){F(C,_);function C(b,S){var M=this.constructor,O=_.call(this,S)||this;return O.status=b,Object.setPrototypeOf(O,M.prototype),O}return C}(Error),De=function(_,C,b){var S=this,M;M=Qe.createXHR(),M.open("POST",S.options.authEndpoint,!0),M.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var O in this.authOptions.headers)M.setRequestHeader(O,this.authOptions.headers[O]);return M.onreadystatechange=function(){if(M.readyState===4)if(M.status===200){var G=void 0,ue=!1;try{G=JSON.parse(M.responseText),ue=!0}catch{b(new Je(200,"JSON returned from auth endpoint was invalid, yet status code was 200. Data was: "+M.responseText),{auth:""})}ue&&b(null,G)}else{var ze=se.buildLogSuffix("authenticationEndpoint");b(new Je(M.status,"Unable to retrieve auth string from auth endpoint - "+("received status: "+M.status+" from "+S.options.authEndpoint+". ")+("Clients must be authenticated to join private or presence channels. "+ze)),{auth:""})}},M.send(this.composeQuery(C)),M},Le=De;function Ke(_){return _o(rn(_))}for(var Oe=String.fromCharCode,_t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p1={},u1=0,Z1=_t.length;u1<Z1;u1++)p1[_t.charAt(u1)]=u1;var wr=function(_){var C=_.charCodeAt(0);return C<128?_:C<2048?Oe(192|C>>>6)+Oe(128|C&63):Oe(224|C>>>12&15)+Oe(128|C>>>6&63)+Oe(128|C&63)},rn=function(_){return _.replace(/[^\x00-\x7F]/g,wr)},I1=function(_){var C=[0,2,1][_.length%3],b=_.charCodeAt(0)<<16|(_.length>1?_.charCodeAt(1):0)<<8|(_.length>2?_.charCodeAt(2):0),S=[_t.charAt(b>>>18),_t.charAt(b>>>12&63),C>=2?"=":_t.charAt(b>>>6&63),C>=1?"=":_t.charAt(b&63)];return S.join("")},_o=window.btoa||function(_){return _.replace(/[\s\S]{1,3}/g,I1)},br=function(){function _(C,b,S,M){var O=this;this.clear=b,this.timer=C(function(){O.timer&&(O.timer=M(O.timer))},S)}return _.prototype.isRunning=function(){return this.timer!==null},_.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},_}(),Yt=br,Vr=function(){var _=function(C,b){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,M){S.__proto__=M}||function(S,M){for(var O in M)M.hasOwnProperty(O)&&(S[O]=M[O])},_(C,b)};return function(C,b){_(C,b);function S(){this.constructor=C}C.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}();function jr(_){window.clearTimeout(_)}function xr(_){window.clearInterval(_)}var Ht=function(_){Vr(C,_);function C(b,S){return _.call(this,setTimeout,jr,b,function(M){return S(),null})||this}return C}(Yt),yr=function(_){Vr(C,_);function C(b,S){return _.call(this,setInterval,xr,b,function(M){return S(),M})||this}return C}(Yt),tr={now:function(){return Date.now?Date.now():new Date().valueOf()},defer:function(_){return new Ht(0,_)},method:function(_){for(var C=[],b=1;b<arguments.length;b++)C[b-1]=arguments[b];var S=Array.prototype.slice.call(arguments,1);return function(M){return M[_].apply(M,S.concat(arguments))}}},Et=tr;function kt(_){for(var C=[],b=1;b<arguments.length;b++)C[b-1]=arguments[b];for(var S=0;S<C.length;S++){var M=C[S];for(var O in M)M[O]&&M[O].constructor&&M[O].constructor===Object?_[O]=kt(_[O]||{},M[O]):_[O]=M[O]}return _}function rr(){for(var _=["Pusher"],C=0;C<arguments.length;C++)typeof arguments[C]=="string"?_.push(arguments[C]):_.push(Tt(arguments[C]));return _.join(" : ")}function qt(_,C){var b=Array.prototype.indexOf;if(_===null)return-1;if(b&&_.indexOf===b)return _.indexOf(C);for(var S=0,M=_.length;S<M;S++)if(_[S]===C)return S;return-1}function He(_,C){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&C(_[b],b,_)}function Xe(_){var C=[];return He(_,function(b,S){C.push(S)}),C}function qe(_){var C=[];return He(_,function(b){C.push(b)}),C}function et(_,C,b){for(var S=0;S<_.length;S++)C.call(b||window,_[S],S,_)}function Ot(_,C){for(var b=[],S=0;S<_.length;S++)b.push(C(_[S],S,_,b));return b}function ge(_,C){var b={};return He(_,function(S,M){b[M]=C(S)}),b}function ut(_,C){C=C||function(M){return!!M};for(var b=[],S=0;S<_.length;S++)C(_[S],S,_,b)&&b.push(_[S]);return b}function Jt(_,C){var b={};return He(_,function(S,M){(C&&C(S,M,_,b)||Boolean(S))&&(b[M]=S)}),b}function Qt(_){var C=[];return He(_,function(b,S){C.push([S,b])}),C}function Wt(_,C){for(var b=0;b<_.length;b++)if(C(_[b],b,_))return!0;return!1}function f1(_,C){for(var b=0;b<_.length;b++)if(!C(_[b],b,_))return!1;return!0}function a1(_){return ge(_,function(C){return typeof C=="object"&&(C=Tt(C)),encodeURIComponent(Ke(C.toString()))})}function Ft(_){var C=Jt(_,function(S){return S!==void 0}),b=Ot(Qt(a1(C)),Et.method("join","=")).join("&");return b}function Lt(_){var C=[],b=[];return function S(M,O){var G,ue,ze;switch(typeof M){case"object":if(!M)return null;for(G=0;G<C.length;G+=1)if(C[G]===M)return{$ref:b[G]};if(C.push(M),b.push(O),Object.prototype.toString.apply(M)==="[object Array]")for(ze=[],G=0;G<M.length;G+=1)ze[G]=S(M[G],O+"["+G+"]");else{ze={};for(ue in M)Object.prototype.hasOwnProperty.call(M,ue)&&(ze[ue]=S(M[ue],O+"["+JSON.stringify(ue)+"]"))}return ze;case"number":case"string":case"boolean":return M}}(_,"$")}function Tt(_){try{return JSON.stringify(_)}catch{return JSON.stringify(Lt(_))}}var z1=function(){function _(){this.globalLog=function(C){window.console&&window.console.log&&window.console.log(C)}}return _.prototype.debug=function(){for(var C=[],b=0;b<arguments.length;b++)C[b]=arguments[b];this.log(this.globalLog,C)},_.prototype.warn=function(){for(var C=[],b=0;b<arguments.length;b++)C[b]=arguments[b];this.log(this.globalLogWarn,C)},_.prototype.error=function(){for(var C=[],b=0;b<arguments.length;b++)C[b]=arguments[b];this.log(this.globalLogError,C)},_.prototype.globalLogWarn=function(C){window.console&&window.console.warn?window.console.warn(C):this.globalLog(C)},_.prototype.globalLogError=function(C){window.console&&window.console.error?window.console.error(C):this.globalLogWarn(C)},_.prototype.log=function(C){for(var b=[],S=1;S<arguments.length;S++)b[S-1]=arguments[S];var M=rr.apply(this,arguments);if(zo.log)zo.log(M);else if(zo.logToConsole){var O=C.bind(this);O(M)}},_}(),pt=new z1,W1=function(_,C,b){this.authOptions.headers!==void 0&&pt.warn("To send headers with the auth request, you must use AJAX, rather than JSONP.");var S=_.nextAuthCallbackID.toString();_.nextAuthCallbackID++;var M=_.getDocument(),O=M.createElement("script");_.auth_callbacks[S]=function(ze){b(null,ze)};var G="Pusher.auth_callbacks['"+S+"']";O.src=this.options.authEndpoint+"?callback="+encodeURIComponent(G)+"&"+this.composeQuery(C);var ue=M.getElementsByTagName("head")[0]||M.documentElement;ue.insertBefore(O,ue.firstChild)},F1=W1,Er=function(){function _(C){this.src=C}return _.prototype.send=function(C){var b=this,S="Error loading "+b.src;b.script=document.createElement("script"),b.script.id=C.id,b.script.src=b.src,b.script.type="text/javascript",b.script.charset="UTF-8",b.script.addEventListener?(b.script.onerror=function(){C.callback(S)},b.script.onload=function(){C.callback(null)}):b.script.onreadystatechange=function(){(b.script.readyState==="loaded"||b.script.readyState==="complete")&&C.callback(null)},b.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(b.errorScript=document.createElement("script"),b.errorScript.id=C.id+"_error",b.errorScript.text=C.name+"('"+S+"');",b.script.async=b.errorScript.async=!1):b.script.async=!0;var M=document.getElementsByTagName("head")[0];M.insertBefore(b.script,M.firstChild),b.errorScript&&M.insertBefore(b.errorScript,b.script.nextSibling)},_.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},_}(),wo=Er,bo=function(){function _(C,b){this.url=C,this.data=b}return _.prototype.send=function(C){if(!this.request){var b=Ft(this.data),S=this.url+"/"+C.number+"?"+b;this.request=Qe.createScriptRequest(S),this.request.send(C)}},_.prototype.cleanup=function(){this.request&&this.request.cleanup()},_}(),En=bo,Lr=function(_,C){return function(b,S){var M="http"+(C?"s":"")+"://",O=M+(_.host||_.options.host)+_.options.path,G=Qe.createJSONPRequest(O,b),ue=Qe.ScriptReceivers.create(function(ze,st){K.remove(ue),G.cleanup(),st&&st.host&&(_.host=st.host),S&&S(ze,st)});G.send(ue)}},Ln={name:"jsonp",getAgent:Lr},xo=Ln;function nn(_,C,b){var S=_+(C.useTLS?"s":""),M=C.useTLS?C.hostTLS:C.hostNonTLS;return S+"://"+M+b}function Ar(_,C){var b="/app/"+_,S="?protocol="+ie.PROTOCOL+"&client=js&version="+ie.VERSION+(C?"&"+C:"");return b+S}var Sn={getInitial:function(_,C){var b=(C.httpPath||"")+Ar(_,"flash=false");return nn("ws",C,b)}},yo={getInitial:function(_,C){var b=(C.httpPath||"/pusher")+Ar(_);return nn("http",C,b)}},Eo={getInitial:function(_,C){return nn("http",C,C.httpPath||"/pusher")},getPath:function(_,C){return Ar(_)}},Lo=function(){function _(){this._callbacks={}}return _.prototype.get=function(C){return this._callbacks[nr(C)]},_.prototype.add=function(C,b,S){var M=nr(C);this._callbacks[M]=this._callbacks[M]||[],this._callbacks[M].push({fn:b,context:S})},_.prototype.remove=function(C,b,S){if(!C&&!b&&!S){this._callbacks={};return}var M=C?[nr(C)]:Xe(this._callbacks);b||S?this.removeCallback(M,b,S):this.removeAllCallbacks(M)},_.prototype.removeCallback=function(C,b,S){et(C,function(M){this._callbacks[M]=ut(this._callbacks[M]||[],function(O){return b&&b!==O.fn||S&&S!==O.context}),this._callbacks[M].length===0&&delete this._callbacks[M]},this)},_.prototype.removeAllCallbacks=function(C){et(C,function(b){delete this._callbacks[b]},this)},_}(),Dr=Lo;function nr(_){return"_"+_}var So=function(){function _(C){this.callbacks=new Dr,this.global_callbacks=[],this.failThrough=C}return _.prototype.bind=function(C,b,S){return this.callbacks.add(C,b,S),this},_.prototype.bind_global=function(C){return this.global_callbacks.push(C),this},_.prototype.unbind=function(C,b,S){return this.callbacks.remove(C,b,S),this},_.prototype.unbind_global=function(C){return C?(this.global_callbacks=ut(this.global_callbacks||[],function(b){return b!==C}),this):(this.global_callbacks=[],this)},_.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},_.prototype.emit=function(C,b,S){for(var M=0;M<this.global_callbacks.length;M++)this.global_callbacks[M](C,b);var O=this.callbacks.get(C),G=[];if(S?G.push(b,S):b&&G.push(b),O&&O.length>0)for(var M=0;M<O.length;M++)O[M].fn.apply(O[M].context||window,G);else this.failThrough&&this.failThrough(C,b);return this},_}(),N1=So,Ro=function(){var _=function(C,b){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,M){S.__proto__=M}||function(S,M){for(var O in M)M.hasOwnProperty(O)&&(S[O]=M[O])},_(C,b)};return function(C,b){_(C,b);function S(){this.constructor=C}C.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}(),Zr=function(_){Ro(C,_);function C(b,S,M,O,G){var ue=_.call(this)||this;return ue.initialize=Qe.transportConnectionInitializer,ue.hooks=b,ue.name=S,ue.priority=M,ue.key=O,ue.options=G,ue.state="new",ue.timeline=G.timeline,ue.activityTimeout=G.activityTimeout,ue.id=ue.timeline.generateUniqueID(),ue}return C.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},C.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},C.prototype.connect=function(){var b=this;if(this.socket||this.state!=="initialized")return!1;var S=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(S,this.options)}catch(M){return Et.defer(function(){b.onError(M),b.changeState("closed")}),!1}return this.bindListeners(),pt.debug("Connecting",{transport:this.name,url:S}),this.changeState("connecting"),!0},C.prototype.close=function(){return this.socket?(this.socket.close(),!0):!1},C.prototype.send=function(b){var S=this;return this.state==="open"?(Et.defer(function(){S.socket&&S.socket.send(b)}),!0):!1},C.prototype.ping=function(){this.state==="open"&&this.supportsPing()&&this.socket.ping()},C.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},C.prototype.onError=function(b){this.emit("error",{type:"WebSocketError",error:b}),this.timeline.error(this.buildTimelineMessage({error:b.toString()}))},C.prototype.onClose=function(b){b?this.changeState("closed",{code:b.code,reason:b.reason,wasClean:b.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},C.prototype.onMessage=function(b){this.emit("message",b)},C.prototype.onActivity=function(){this.emit("activity")},C.prototype.bindListeners=function(){var b=this;this.socket.onopen=function(){b.onOpen()},this.socket.onerror=function(S){b.onError(S)},this.socket.onclose=function(S){b.onClose(S)},this.socket.onmessage=function(S){b.onMessage(S)},this.supportsPing()&&(this.socket.onactivity=function(){b.onActivity()})},C.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},C.prototype.changeState=function(b,S){this.state=b,this.timeline.info(this.buildTimelineMessage({state:b,params:S})),this.emit(b,S)},C.prototype.buildTimelineMessage=function(b){return kt({cid:this.id},b)},C}(N1),Rn=Zr,Io=function(){function _(C){this.hooks=C}return _.prototype.isSupported=function(C){return this.hooks.isSupported(C)},_.prototype.createConnection=function(C,b,S,M){return new Rn(this.hooks,C,b,S,M)},_}(),or=Io,Mo=new or({urls:Sn,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(Qe.getWebSocketAPI())},isSupported:function(){return Boolean(Qe.getWebSocketAPI())},getSocket:function(_){return Qe.createWebSocket(_)}}),In={urls:yo,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},on=kt({getSocket:function(_){return Qe.HTTPFactory.createStreamingSocket(_)}},In),sn=kt({getSocket:function(_){return Qe.HTTPFactory.createPollingSocket(_)}},In),zr={isSupported:function(){return Qe.isXHRSupported()}},M1=new or(kt({},on,zr)),Mn=new or(kt({},sn,zr)),Pn={ws:Mo,xhr_streaming:M1,xhr_polling:Mn},Wr=Pn,Po=new or({file:"sockjs",urls:Eo,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(_,C){return new window.SockJS(_,null,{js_path:pe.getPath("sockjs",{useTLS:C.useTLS}),ignore_null_origin:C.ignoreNullOrigin})},beforeOpen:function(_,C){_.send(JSON.stringify({path:C}))}}),Sr={isSupported:function(_){var C=Qe.isXDRSupported(_.useTLS);return C}},$n=new or(kt({},on,Sr)),$o=new or(kt({},sn,Sr));Wr.xdr_streaming=$n,Wr.xdr_polling=$o,Wr.sockjs=Po;var Ho=Wr,Z=function(){var _=function(C,b){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,M){S.__proto__=M}||function(S,M){for(var O in M)M.hasOwnProperty(O)&&(S[O]=M[O])},_(C,b)};return function(C,b){_(C,b);function S(){this.constructor=C}C.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}(),q=function(_){Z(C,_);function C(){var b=_.call(this)||this,S=b;return window.addEventListener!==void 0&&(window.addEventListener("online",function(){S.emit("online")},!1),window.addEventListener("offline",function(){S.emit("offline")},!1)),b}return C.prototype.isOnline=function(){return window.navigator.onLine===void 0?!0:window.navigator.onLine},C}(N1),ee=new q,N=function(){function _(C,b,S){this.manager=C,this.transport=b,this.minPingDelay=S.minPingDelay,this.maxPingDelay=S.maxPingDelay,this.pingDelay=void 0}return _.prototype.createConnection=function(C,b,S,M){var O=this;M=kt({},M,{activityTimeout:this.pingDelay});var G=this.transport.createConnection(C,b,S,M),ue=null,ze=function(){G.unbind("open",ze),G.bind("closed",st),ue=Et.now()},st=function(Bt){if(G.unbind("closed",st),Bt.code===1002||Bt.code===1003)O.manager.reportDeath();else if(!Bt.wasClean&&ue){var Xt=Et.now()-ue;Xt<2*O.maxPingDelay&&(O.manager.reportDeath(),O.pingDelay=Math.max(Xt/2,O.minPingDelay))}};return G.bind("open",ze),G},_.prototype.isSupported=function(C){return this.manager.isAlive()&&this.transport.isSupported(C)},_}(),oe=N,de={decodeMessage:function(_){try{var C=JSON.parse(_.data),b=C.data;if(typeof b=="string")try{b=JSON.parse(C.data)}catch{}var S={event:C.event,channel:C.channel,data:b};return C.user_id&&(S.user_id=C.user_id),S}catch(M){throw{type:"MessageParseError",error:M,data:_.data}}},encodeMessage:function(_){return JSON.stringify(_)},processHandshake:function(_){var C=de.decodeMessage(_);if(C.event==="pusher:connection_established"){if(!C.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:C.data.socket_id,activityTimeout:C.data.activity_timeout*1e3}}else{if(C.event==="pusher:error")return{action:this.getCloseAction(C.data),error:this.getCloseError(C.data)};throw"Invalid handshake"}},getCloseAction:function(_){return _.code<4e3?_.code>=1002&&_.code<=1004?"backoff":null:_.code===4e3?"tls_only":_.code<4100?"refused":_.code<4200?"backoff":_.code<4300?"retry":"refused"},getCloseError:function(_){return _.code!==1e3&&_.code!==1001?{type:"PusherError",data:{code:_.code,message:_.reason||_.message}}:null}},be=de,ae=function(){var _=function(C,b){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,M){S.__proto__=M}||function(S,M){for(var O in M)M.hasOwnProperty(O)&&(S[O]=M[O])},_(C,b)};return function(C,b){_(C,b);function S(){this.constructor=C}C.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}(),Te=function(_){ae(C,_);function C(b,S){var M=_.call(this)||this;return M.id=b,M.transport=S,M.activityTimeout=S.activityTimeout,M.bindListeners(),M}return C.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},C.prototype.send=function(b){return this.transport.send(b)},C.prototype.send_event=function(b,S,M){var O={event:b,data:S};return M&&(O.channel=M),pt.debug("Event sent",O),this.send(be.encodeMessage(O))},C.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},C.prototype.close=function(){this.transport.close()},C.prototype.bindListeners=function(){var b=this,S={message:function(O){var G;try{G=be.decodeMessage(O)}catch(ue){b.emit("error",{type:"MessageParseError",error:ue,data:O.data})}if(G!==void 0){switch(pt.debug("Event recd",G),G.event){case"pusher:error":b.emit("error",{type:"PusherError",data:G.data});break;case"pusher:ping":b.emit("ping");break;case"pusher:pong":b.emit("pong");break}b.emit("message",G)}},activity:function(){b.emit("activity")},error:function(O){b.emit("error",O)},closed:function(O){M(),O&&O.code&&b.handleCloseEvent(O),b.transport=null,b.emit("closed")}},M=function(){He(S,function(O,G){b.transport.unbind(G,O)})};He(S,function(O,G){b.transport.bind(G,O)})},C.prototype.handleCloseEvent=function(b){var S=be.getCloseAction(b),M=be.getCloseError(b);M&&this.emit("error",M),S&&this.emit(S,{action:S,error:M})},C}(N1),$e=Te,Ie=function(){function _(C,b){this.transport=C,this.callback=b,this.bindListeners()}return _.prototype.close=function(){this.unbindListeners(),this.transport.close()},_.prototype.bindListeners=function(){var C=this;this.onMessage=function(b){C.unbindListeners();var S;try{S=be.processHandshake(b)}catch(M){C.finish("error",{error:M}),C.transport.close();return}S.action==="connected"?C.finish("connected",{connection:new $e(S.id,C.transport),activityTimeout:S.activityTimeout}):(C.finish(S.action,{error:S.error}),C.transport.close())},this.onClosed=function(b){C.unbindListeners();var S=be.getCloseAction(b)||"backoff",M=be.getCloseError(b);C.finish(S,{error:M})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},_.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},_.prototype.finish=function(C,b){this.callback(kt({transport:this.transport,action:C},b))},_}(),Be=Ie,xe=function(){function _(C,b){this.channel=C;var S=b.authTransport;if(typeof Qe.getAuthorizers()[S]>"u")throw"'"+S+"' is not a recognized auth transport";this.type=S,this.options=b,this.authOptions=b.auth||{}}return _.prototype.composeQuery=function(C){var b="socket_id="+encodeURIComponent(C)+"&channel_name="+encodeURIComponent(this.channel.name);for(var S in this.authOptions.params)b+="&"+encodeURIComponent(S)+"="+encodeURIComponent(this.authOptions.params[S]);return b},_.prototype.authorize=function(C,b){_.authorizers=_.authorizers||Qe.getAuthorizers(),_.authorizers[this.type].call(this,Qe,C,b)},_}(),ot=xe,at=function(){function _(C,b){this.timeline=C,this.options=b||{}}return _.prototype.send=function(C,b){this.timeline.isEmpty()||this.timeline.send(Qe.TimelineTransport.getAgent(this,C),b)},_}(),wt=at,It=function(){var _=function(C,b){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,M){S.__proto__=M}||function(S,M){for(var O in M)M.hasOwnProperty(O)&&(S[O]=M[O])},_(C,b)};return function(C,b){_(C,b);function S(){this.constructor=C}C.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}(),Mt=function(_){It(C,_);function C(b,S){var M=_.call(this,function(O,G){pt.debug("No callbacks on "+b+" for "+O)})||this;return M.name=b,M.pusher=S,M.subscribed=!1,M.subscriptionPending=!1,M.subscriptionCancelled=!1,M}return C.prototype.authorize=function(b,S){return S(null,{auth:""})},C.prototype.trigger=function(b,S){if(b.indexOf("client-")!==0)throw new Q("Event '"+b+"' does not start with 'client-'");if(!this.subscribed){var M=se.buildLogSuffix("triggeringClientEvents");pt.warn("Client event triggered before channel 'subscription_succeeded' event . "+M)}return this.pusher.send_event(b,S,this.name)},C.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},C.prototype.handleEvent=function(b){var S=b.event,M=b.data;if(S==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(b);else if(S.indexOf("pusher_internal:")!==0){var O={};this.emit(S,M,O)}},C.prototype.handleSubscriptionSucceededEvent=function(b){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",b.data)},C.prototype.subscribe=function(){var b=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(S,M){S?(b.subscriptionPending=!1,pt.error(S.toString()),b.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:S.message},S instanceof Je?{status:S.status}:{}))):b.pusher.send_event("pusher:subscribe",{auth:M.auth,channel_data:M.channel_data,channel:b.name})}))},C.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},C.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},C.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},C}(N1),e1=Mt,Nt=function(){var _=function(C,b){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,M){S.__proto__=M}||function(S,M){for(var O in M)M.hasOwnProperty(O)&&(S[O]=M[O])},_(C,b)};return function(C,b){_(C,b);function S(){this.constructor=C}C.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}(),_1=function(_){Nt(C,_);function C(){return _!==null&&_.apply(this,arguments)||this}return C.prototype.authorize=function(b,S){var M=r1.createAuthorizer(this,this.pusher.config);return M.authorize(b,S)},C}(e1),w1=_1,bt=function(){function _(){this.reset()}return _.prototype.get=function(C){return Object.prototype.hasOwnProperty.call(this.members,C)?{id:C,info:this.members[C]}:null},_.prototype.each=function(C){var b=this;He(this.members,function(S,M){C(b.get(M))})},_.prototype.setMyID=function(C){this.myID=C},_.prototype.onSubscription=function(C){this.members=C.presence.hash,this.count=C.presence.count,this.me=this.get(this.myID)},_.prototype.addMember=function(C){return this.get(C.user_id)===null&&this.count++,this.members[C.user_id]=C.user_info,this.get(C.user_id)},_.prototype.removeMember=function(C){var b=this.get(C.user_id);return b&&(delete this.members[C.user_id],this.count--),b},_.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},_}(),t1=bt,Dt=function(){var _=function(C,b){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,M){S.__proto__=M}||function(S,M){for(var O in M)M.hasOwnProperty(O)&&(S[O]=M[O])},_(C,b)};return function(C,b){_(C,b);function S(){this.constructor=C}C.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}(),b1=function(_){Dt(C,_);function C(b,S){var M=_.call(this,b,S)||this;return M.members=new t1,M}return C.prototype.authorize=function(b,S){var M=this;_.prototype.authorize.call(this,b,function(O,G){if(!O){if(G=G,G.channel_data===void 0){var ue=se.buildLogSuffix("authenticationEndpoint");pt.error("Invalid auth response for channel '"+M.name+"',"+("expected 'channel_data' field. "+ue)),S("Invalid auth response");return}var ze=JSON.parse(G.channel_data);M.members.setMyID(ze.user_id)}S(O,G)})},C.prototype.handleEvent=function(b){var S=b.event;if(S.indexOf("pusher_internal:")===0)this.handleInternalEvent(b);else{var M=b.data,O={};b.user_id&&(O.user_id=b.user_id),this.emit(S,M,O)}},C.prototype.handleInternalEvent=function(b){var S=b.event,M=b.data;switch(S){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(b);break;case"pusher_internal:member_added":var O=this.members.addMember(M);this.emit("pusher:member_added",O);break;case"pusher_internal:member_removed":var G=this.members.removeMember(M);G&&this.emit("pusher:member_removed",G);break}},C.prototype.handleSubscriptionSucceededEvent=function(b){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(b.data),this.emit("pusher:subscription_succeeded",this.members))},C.prototype.disconnect=function(){this.members.reset(),_.prototype.disconnect.call(this)},C}(w1),an=b1,hi=f(1),P1=f(0),Hn=function(){var _=function(C,b){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,M){S.__proto__=M}||function(S,M){for(var O in M)M.hasOwnProperty(O)&&(S[O]=M[O])},_(C,b)};return function(C,b){_(C,b);function S(){this.constructor=C}C.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}(),pi=function(_){Hn(C,_);function C(b,S,M){var O=_.call(this,b,S)||this;return O.key=null,O.nacl=M,O}return C.prototype.authorize=function(b,S){var M=this;_.prototype.authorize.call(this,b,function(O,G){if(O){S(O,G);return}var ue=G.shared_secret;if(!ue){S(new Error("No shared_secret key in auth payload for encrypted channel: "+M.name),null);return}M.key=Object(P1.decode)(ue),delete G.shared_secret,S(null,G)})},C.prototype.trigger=function(b,S){throw new Re("Client events are not currently supported for encrypted channels")},C.prototype.handleEvent=function(b){var S=b.event,M=b.data;if(S.indexOf("pusher_internal:")===0||S.indexOf("pusher:")===0){_.prototype.handleEvent.call(this,b);return}this.handleEncryptedEvent(S,M)},C.prototype.handleEncryptedEvent=function(b,S){var M=this;if(!this.key){pt.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!S.ciphertext||!S.nonce){pt.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+S);return}var O=Object(P1.decode)(S.ciphertext);if(O.length<this.nacl.secretbox.overheadLength){pt.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+O.length);return}var G=Object(P1.decode)(S.nonce);if(G.length<this.nacl.secretbox.nonceLength){pt.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+G.length);return}var ue=this.nacl.secretbox.open(O,G,this.key);if(ue===null){pt.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,function(ze,st){if(ze){pt.error("Failed to make a request to the authEndpoint: "+st+". Unable to fetch new key, so dropping encrypted event");return}if(ue=M.nacl.secretbox.open(O,G,M.key),ue===null){pt.error("Failed to decrypt event with new key. Dropping encrypted event");return}M.emit(b,M.getDataToEmit(ue))});return}this.emit(b,this.getDataToEmit(ue))},C.prototype.getDataToEmit=function(b){var S=Object(hi.decode)(b);try{return JSON.parse(S)}catch{return S}},C}(w1),Fr=pi,Rr=function(){var _=function(C,b){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,M){S.__proto__=M}||function(S,M){for(var O in M)M.hasOwnProperty(O)&&(S[O]=M[O])},_(C,b)};return function(C,b){_(C,b);function S(){this.constructor=C}C.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}(),it=function(_){Rr(C,_);function C(b,S){var M=_.call(this)||this;M.state="initialized",M.connection=null,M.key=b,M.options=S,M.timeline=M.options.timeline,M.usingTLS=M.options.useTLS,M.errorCallbacks=M.buildErrorCallbacks(),M.connectionCallbacks=M.buildConnectionCallbacks(M.errorCallbacks),M.handshakeCallbacks=M.buildHandshakeCallbacks(M.errorCallbacks);var O=Qe.getNetwork();return O.bind("online",function(){M.timeline.info({netinfo:"online"}),(M.state==="connecting"||M.state==="unavailable")&&M.retryIn(0)}),O.bind("offline",function(){M.timeline.info({netinfo:"offline"}),M.connection&&M.sendActivityCheck()}),M.updateStrategy(),M}return C.prototype.connect=function(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},C.prototype.send=function(b){return this.connection?this.connection.send(b):!1},C.prototype.send_event=function(b,S,M){return this.connection?this.connection.send_event(b,S,M):!1},C.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},C.prototype.isUsingTLS=function(){return this.usingTLS},C.prototype.startConnecting=function(){var b=this,S=function(M,O){M?b.runner=b.strategy.connect(0,S):O.action==="error"?(b.emit("error",{type:"HandshakeError",error:O.error}),b.timeline.error({handshakeError:O.error})):(b.abortConnecting(),b.handshakeCallbacks[O.action](O))};this.runner=this.strategy.connect(0,S)},C.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},C.prototype.disconnectInternally=function(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var b=this.abandonConnection();b.close()}},C.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},C.prototype.retryIn=function(b){var S=this;this.timeline.info({action:"retry",delay:b}),b>0&&this.emit("connecting_in",Math.round(b/1e3)),this.retryTimer=new Ht(b||0,function(){S.disconnectInternally(),S.connect()})},C.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},C.prototype.setUnavailableTimer=function(){var b=this;this.unavailableTimer=new Ht(this.options.unavailableTimeout,function(){b.updateState("unavailable")})},C.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},C.prototype.sendActivityCheck=function(){var b=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new Ht(this.options.pongTimeout,function(){b.timeline.error({pong_timed_out:b.options.pongTimeout}),b.retryIn(0)})},C.prototype.resetActivityCheck=function(){var b=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new Ht(this.activityTimeout,function(){b.sendActivityCheck()}))},C.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},C.prototype.buildConnectionCallbacks=function(b){var S=this;return kt({},b,{message:function(M){S.resetActivityCheck(),S.emit("message",M)},ping:function(){S.send_event("pusher:pong",{})},activity:function(){S.resetActivityCheck()},error:function(M){S.emit("error",M)},closed:function(){S.abandonConnection(),S.shouldRetry()&&S.retryIn(1e3)}})},C.prototype.buildHandshakeCallbacks=function(b){var S=this;return kt({},b,{connected:function(M){S.activityTimeout=Math.min(S.options.activityTimeout,M.activityTimeout,M.connection.activityTimeout||1/0),S.clearUnavailableTimer(),S.setConnection(M.connection),S.socket_id=S.connection.id,S.updateState("connected",{socket_id:S.socket_id})}})},C.prototype.buildErrorCallbacks=function(){var b=this,S=function(M){return function(O){O.error&&b.emit("error",{type:"WebSocketError",error:O.error}),M(O)}};return{tls_only:S(function(){b.usingTLS=!0,b.updateStrategy(),b.retryIn(0)}),refused:S(function(){b.disconnect()}),backoff:S(function(){b.retryIn(1e3)}),retry:S(function(){b.retryIn(0)})}},C.prototype.setConnection=function(b){this.connection=b;for(var S in this.connectionCallbacks)this.connection.bind(S,this.connectionCallbacks[S]);this.resetActivityCheck()},C.prototype.abandonConnection=function(){if(!!this.connection){this.stopActivityCheck();for(var b in this.connectionCallbacks)this.connection.unbind(b,this.connectionCallbacks[b]);var S=this.connection;return this.connection=null,S}},C.prototype.updateState=function(b,S){var M=this.state;if(this.state=b,M!==b){var O=b;O==="connected"&&(O+=" with new socket ID "+S.socket_id),pt.debug("State changed",M+" -> "+O),this.timeline.info({state:b,params:S}),this.emit("state_change",{previous:M,current:b}),this.emit(b,S)}},C.prototype.shouldRetry=function(){return this.state==="connecting"||this.state==="connected"},C}(N1),U1=it,kn=function(){function _(){this.channels={}}return _.prototype.add=function(C,b){return this.channels[C]||(this.channels[C]=ko(C,b)),this.channels[C]},_.prototype.all=function(){return qe(this.channels)},_.prototype.find=function(C){return this.channels[C]},_.prototype.remove=function(C){var b=this.channels[C];return delete this.channels[C],b},_.prototype.disconnect=function(){He(this.channels,function(C){C.disconnect()})},_}(),On=kn;function ko(_,C){if(_.indexOf("private-encrypted-")===0){if(C.config.nacl)return r1.createEncryptedChannel(_,C,C.config.nacl);var b="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",S=se.buildLogSuffix("encryptedChannelSupport");throw new Re(b+". "+S)}else return _.indexOf("private-")===0?r1.createPrivateChannel(_,C):_.indexOf("presence-")===0?r1.createPresenceChannel(_,C):r1.createChannel(_,C)}var sl={createChannels:function(){return new On},createConnectionManager:function(_,C){return new U1(_,C)},createChannel:function(_,C){return new e1(_,C)},createPrivateChannel:function(_,C){return new w1(_,C)},createPresenceChannel:function(_,C){return new an(_,C)},createEncryptedChannel:function(_,C,b){return new Fr(_,C,b)},createTimelineSender:function(_,C){return new wt(_,C)},createAuthorizer:function(_,C){return C.authorizer?C.authorizer(_,C):new ot(_,C)},createHandshake:function(_,C){return new Be(_,C)},createAssistantToTheTransportManager:function(_,C,b){return new oe(_,C,b)}},r1=sl,al=function(){function _(C){this.options=C||{},this.livesLeft=this.options.lives||1/0}return _.prototype.getAssistant=function(C){return r1.createAssistantToTheTransportManager(this,C,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},_.prototype.isAlive=function(){return this.livesLeft>0},_.prototype.reportDeath=function(){this.livesLeft-=1},_}(),Oo=al,ll=function(){function _(C,b){this.strategies=C,this.loop=Boolean(b.loop),this.failFast=Boolean(b.failFast),this.timeout=b.timeout,this.timeoutLimit=b.timeoutLimit}return _.prototype.isSupported=function(){return Wt(this.strategies,Et.method("isSupported"))},_.prototype.connect=function(C,b){var S=this,M=this.strategies,O=0,G=this.timeout,ue=null,ze=function(st,Bt){Bt?b(null,Bt):(O=O+1,S.loop&&(O=O%M.length),O<M.length?(G&&(G=G*2,S.timeoutLimit&&(G=Math.min(G,S.timeoutLimit))),ue=S.tryStrategy(M[O],C,{timeout:G,failFast:S.failFast},ze)):b(!0))};return ue=this.tryStrategy(M[O],C,{timeout:G,failFast:this.failFast},ze),{abort:function(){ue.abort()},forceMinPriority:function(st){C=st,ue&&ue.forceMinPriority(st)}}},_.prototype.tryStrategy=function(C,b,S,M){var O=null,G=null;return S.timeout>0&&(O=new Ht(S.timeout,function(){G.abort(),M(!0)})),G=C.connect(b,function(ue,ze){ue&&O&&O.isRunning()&&!S.failFast||(O&&O.ensureAborted(),M(ue,ze))}),{abort:function(){O&&O.ensureAborted(),G.abort()},forceMinPriority:function(ue){G.forceMinPriority(ue)}}},_}(),Ir=ll,To=function(){function _(C){this.strategies=C}return _.prototype.isSupported=function(){return Wt(this.strategies,Et.method("isSupported"))},_.prototype.connect=function(C,b){return Nr(this.strategies,C,function(S,M){return function(O,G){if(M[S].error=O,O){ir(M)&&b(!0);return}et(M,function(ue){ue.forceMinPriority(G.transport.priority)}),b(null,G)}})},_}(),Tn=To;function Nr(_,C,b){var S=Ot(_,function(M,O,G,ue){return M.connect(C,b(O,ue))});return{abort:function(){et(S,Bo)},forceMinPriority:function(M){et(S,function(O){O.forceMinPriority(M)})}}}function ir(_){return f1(_,function(C){return Boolean(C.error)})}function Bo(_){!_.error&&!_.aborted&&(_.abort(),_.aborted=!0)}var ln=function(){function _(C,b,S){this.strategy=C,this.transports=b,this.ttl=S.ttl||1800*1e3,this.usingTLS=S.useTLS,this.timeline=S.timeline}return _.prototype.isSupported=function(){return this.strategy.isSupported()},_.prototype.connect=function(C,b){var S=this.usingTLS,M=cn(S),O=[this.strategy];if(M&&M.timestamp+this.ttl>=Et.now()){var G=this.transports[M.transport];G&&(this.timeline.info({cached:!0,transport:M.transport,latency:M.latency}),O.push(new Ir([G],{timeout:M.latency*2+1e3,failFast:!0})))}var ue=Et.now(),ze=O.pop().connect(C,function st(Bt,Xt){Bt?(jo(S),O.length>0?(ue=Et.now(),ze=O.pop().connect(C,st)):b(Bt)):(Bn(S,Xt.transport.name,Et.now()-ue),b(null,Xt))});return{abort:function(){ze.abort()},forceMinPriority:function(st){C=st,ze&&ze.forceMinPriority(st)}}},_}(),gi=ln;function Vo(_){return"pusherTransport"+(_?"TLS":"NonTLS")}function cn(_){var C=Qe.getLocalStorage();if(C)try{var b=C[Vo(_)];if(b)return JSON.parse(b)}catch{jo(_)}return null}function Bn(_,C,b){var S=Qe.getLocalStorage();if(S)try{S[Vo(_)]=Tt({timestamp:Et.now(),transport:C,latency:b})}catch{}}function jo(_){var C=Qe.getLocalStorage();if(C)try{delete C[Vo(_)]}catch{}}var te=function(){function _(C,b){var S=b.delay;this.strategy=C,this.options={delay:S}}return _.prototype.isSupported=function(){return this.strategy.isSupported()},_.prototype.connect=function(C,b){var S=this.strategy,M,O=new Ht(this.options.delay,function(){M=S.connect(C,b)});return{abort:function(){O.ensureAborted(),M&&M.abort()},forceMinPriority:function(G){C=G,M&&M.forceMinPriority(G)}}},_}(),Vn=te,cl=function(){function _(C,b,S){this.test=C,this.trueBranch=b,this.falseBranch=S}return _.prototype.isSupported=function(){var C=this.test()?this.trueBranch:this.falseBranch;return C.isSupported()},_.prototype.connect=function(C,b){var S=this.test()?this.trueBranch:this.falseBranch;return S.connect(C,b)},_}(),jn=cl,Ms=function(){function _(C){this.strategy=C}return _.prototype.isSupported=function(){return this.strategy.isSupported()},_.prototype.connect=function(C,b){var S=this.strategy.connect(C,function(M,O){O&&S.abort(),b(M,O)});return S},_}(),Ps=Ms;function dn(_){return function(){return _.isSupported()}}var vi=function(_,C,b){var S={};function M(Us,Kn,ml,_l,Ks){var Xs=b(_,Us,Kn,ml,_l,Ks);return S[Us]=Xs,Xs}var O=Object.assign({},C,{hostNonTLS:_.wsHost+":"+_.wsPort,hostTLS:_.wsHost+":"+_.wssPort,httpPath:_.wsPath}),G=Object.assign({},O,{useTLS:!0}),ue=Object.assign({},C,{hostNonTLS:_.httpHost+":"+_.httpPort,hostTLS:_.httpHost+":"+_.httpsPort,httpPath:_.httpPath}),ze={loop:!0,timeout:15e3,timeoutLimit:6e4},st=new Oo({lives:2,minPingDelay:1e4,maxPingDelay:_.activityTimeout}),Bt=new Oo({lives:2,minPingDelay:1e4,maxPingDelay:_.activityTimeout}),Xt=M("ws","ws",3,O,st),$1=M("wss","ws",3,G,st),fn=M("sockjs","sockjs",1,ue),Wo=M("xhr_streaming","xhr_streaming",1,ue,Bt),vl=M("xdr_streaming","xdr_streaming",1,ue,Bt),hn=M("xhr_polling","xhr_polling",1,ue),Cl=M("xdr_polling","xdr_polling",1,ue),Zs=new Ir([Xt],ze),zs=new Ir([$1],ze),Ws=new Ir([fn],ze),Fo=new Ir([new jn(dn(Wo),Wo,vl)],ze),Fs=new Ir([new jn(dn(hn),hn,Cl)],ze),Ns=new Ir([new jn(dn(Fo),new Tn([Fo,new Vn(Fs,{delay:4e3})]),Fs)],ze),Un=new jn(dn(Ns),Ns,Ws),pn;return C.useTLS?pn=new Tn([Zs,new Vn(Un,{delay:2e3})]):pn=new Tn([Zs,new Vn(zs,{delay:2e3}),new Vn(Un,{delay:5e3})]),new gi(new Ps(new jn(dn(Xt),pn,Un)),S,{ttl:18e5,timeline:C.timeline,useTLS:C.useTLS})},Ci=vi,Ut=function(){var _=this;_.timeline.info(_.buildTimelineMessage({transport:_.name+(_.options.useTLS?"s":"")})),_.hooks.isInitialized()?_.changeState("initialized"):_.hooks.file?(_.changeState("initializing"),pe.load(_.hooks.file,{useTLS:_.options.useTLS},function(C,b){_.hooks.isInitialized()?(_.changeState("initialized"),b(!0)):(C&&_.onError(C),_.onClose(),b(!1))})):_.onClose()},Kt={getRequest:function(_){var C=new window.XDomainRequest;return C.ontimeout=function(){_.emit("error",new ce),_.close()},C.onerror=function(b){_.emit("error",b),_.close()},C.onprogress=function(){C.responseText&&C.responseText.length>0&&_.onChunk(200,C.responseText)},C.onload=function(){C.responseText&&C.responseText.length>0&&_.onChunk(200,C.responseText),_.emit("finished",200),_.close()},C},abortRequest:function(_){_.ontimeout=_.onerror=_.onprogress=_.onload=null,_.abort()}},mi=Kt,_i=function(){var _=function(C,b){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,M){S.__proto__=M}||function(S,M){for(var O in M)M.hasOwnProperty(O)&&(S[O]=M[O])},_(C,b)};return function(C,b){_(C,b);function S(){this.constructor=C}C.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}(),$s=256*1024,Hs=function(_){_i(C,_);function C(b,S,M){var O=_.call(this)||this;return O.hooks=b,O.method=S,O.url=M,O}return C.prototype.start=function(b){var S=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){S.close()},Qe.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(b)},C.prototype.close=function(){this.unloader&&(Qe.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},C.prototype.onChunk=function(b,S){for(;;){var M=this.advanceBuffer(S);if(M)this.emit("chunk",{status:b,data:M});else break}this.isBufferTooLong(S)&&this.emit("buffer_too_long")},C.prototype.advanceBuffer=function(b){var S=b.slice(this.position),M=S.indexOf(`
`);return M!==-1?(this.position+=M+1,S.slice(0,M)):null},C.prototype.isBufferTooLong=function(b){return this.position===b.length&&b.length>$s},C}(N1),dl=Hs,An;(function(_){_[_.CONNECTING=0]="CONNECTING",_[_.OPEN=1]="OPEN",_[_.CLOSED=3]="CLOSED"})(An||(An={}));var g1=An,ul=1,ks=function(){function _(C,b){this.hooks=C,this.session=xi(1e3)+"/"+Mr(8),this.location=Ao(b),this.readyState=g1.CONNECTING,this.openStream()}return _.prototype.send=function(C){return this.sendRaw(JSON.stringify([C]))},_.prototype.ping=function(){this.hooks.sendHeartbeat(this)},_.prototype.close=function(C,b){this.onClose(C,b,!0)},_.prototype.sendRaw=function(C){if(this.readyState===g1.OPEN)try{return Qe.createSocketRequest("POST",bi(wi(this.location,this.session))).start(C),!0}catch{return!1}else return!1},_.prototype.reconnect=function(){this.closeStream(),this.openStream()},_.prototype.onClose=function(C,b,S){this.closeStream(),this.readyState=g1.CLOSED,this.onclose&&this.onclose({code:C,reason:b,wasClean:S})},_.prototype.onChunk=function(C){if(C.status===200){this.readyState===g1.OPEN&&this.onActivity();var b,S=C.data.slice(0,1);switch(S){case"o":b=JSON.parse(C.data.slice(1)||"{}"),this.onOpen(b);break;case"a":b=JSON.parse(C.data.slice(1)||"[]");for(var M=0;M<b.length;M++)this.onEvent(b[M]);break;case"m":b=JSON.parse(C.data.slice(1)||"null"),this.onEvent(b);break;case"h":this.hooks.onHeartbeat(this);break;case"c":b=JSON.parse(C.data.slice(1)||"[]"),this.onClose(b[0],b[1],!0);break}}},_.prototype.onOpen=function(C){this.readyState===g1.CONNECTING?(C&&C.hostname&&(this.location.base=Dn(this.location.base,C.hostname)),this.readyState=g1.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},_.prototype.onEvent=function(C){this.readyState===g1.OPEN&&this.onmessage&&this.onmessage({data:C})},_.prototype.onActivity=function(){this.onactivity&&this.onactivity()},_.prototype.onError=function(C){this.onerror&&this.onerror(C)},_.prototype.openStream=function(){var C=this;this.stream=Qe.createSocketRequest("POST",bi(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(b){C.onChunk(b)}),this.stream.bind("finished",function(b){C.hooks.onFinished(C,b)}),this.stream.bind("buffer_too_long",function(){C.reconnect()});try{this.stream.start()}catch(b){Et.defer(function(){C.onError(b),C.onClose(1006,"Could not start streaming",!1)})}},_.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},_}();function Ao(_){var C=/([^\?]*)\/*(\??.*)/.exec(_);return{base:C[1],queryString:C[2]}}function wi(_,C){return _.base+"/"+C+"/xhr_send"}function bi(_){var C=_.indexOf("?")===-1?"?":"&";return _+C+"t="+ +new Date+"&n="+ul++}function Dn(_,C){var b=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(_);return b[1]+C+b[3]}function xi(_){return Math.floor(Math.random()*_)}function Mr(_){for(var C=[],b=0;b<_;b++)C.push(xi(32).toString(32));return C.join("")}var Do=ks,fl={getReceiveURL:function(_,C){return _.base+"/"+C+"/xhr_streaming"+_.queryString},onHeartbeat:function(_){_.sendRaw("[]")},sendHeartbeat:function(_){_.sendRaw("[]")},onFinished:function(_,C){_.onClose(1006,"Connection interrupted ("+C+")",!1)}},Os=fl,hl={getReceiveURL:function(_,C){return _.base+"/"+C+"/xhr"+_.queryString},onHeartbeat:function(){},sendHeartbeat:function(_){_.sendRaw("[]")},onFinished:function(_,C){C===200?_.reconnect():_.onClose(1006,"Connection interrupted ("+C+")",!1)}},Ts=hl,yi={getRequest:function(_){var C=Qe.getXHRAPI(),b=new C;return b.onreadystatechange=b.onprogress=function(){switch(b.readyState){case 3:b.responseText&&b.responseText.length>0&&_.onChunk(b.status,b.responseText);break;case 4:b.responseText&&b.responseText.length>0&&_.onChunk(b.status,b.responseText),_.emit("finished",b.status),_.close();break}},b},abortRequest:function(_){_.onreadystatechange=null,_.abort()}},Bs=yi,Ei={createStreamingSocket:function(_){return this.createSocket(Os,_)},createPollingSocket:function(_){return this.createSocket(Ts,_)},createSocket:function(_,C){return new Do(_,C)},createXHR:function(_,C){return this.createRequest(Bs,_,C)},createRequest:function(_,C,b){return new dl(_,C,b)}},Li=Ei;Li.createXDR=function(_,C){return this.createRequest(mi,_,C)};var Si=Li,Ri={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:K,DependenciesReceivers:_e,getDefaultStrategy:Ci,Transports:Ho,transportConnectionInitializer:Ut,HTTPFactory:Si,TimelineTransport:xo,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(_){var C=this;window.Pusher=_;var b=function(){C.onDocumentBody(_.ready)};window.JSON?b():pe.load("json2",{},b)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:Le,jsonp:F1}},onDocumentBody:function(_){var C=this;document.body?_():setTimeout(function(){C.onDocumentBody(_)},0)},createJSONPRequest:function(_,C){return new En(_,C)},createScriptRequest:function(_){return new wo(_)},getLocalStorage:function(){try{return window.localStorage}catch{return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){var _=this.getXHRAPI();return new _},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return ee},createWebSocket:function(_){var C=this.getWebSocketAPI();return new C(_)},createSocketRequest:function(_,C){if(this.isXHRSupported())return this.HTTPFactory.createXHR(_,C);if(this.isXDRSupported(C.indexOf("https:")===0))return this.HTTPFactory.createXDR(_,C);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var _=this.getXHRAPI();return Boolean(_)&&new _().withCredentials!==void 0},isXDRSupported:function(_){var C=_?"https:":"http:",b=this.getProtocol();return Boolean(window.XDomainRequest)&&b===C},addUnloadListener:function(_){window.addEventListener!==void 0?window.addEventListener("unload",_,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",_)},removeUnloadListener:function(_){window.addEventListener!==void 0?window.removeEventListener("unload",_,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",_)}},Qe=Ri,Zn;(function(_){_[_.ERROR=3]="ERROR",_[_.INFO=6]="INFO",_[_.DEBUG=7]="DEBUG"})(Zn||(Zn={}));var zn=Zn,Ii=function(){function _(C,b,S){this.key=C,this.session=b,this.events=[],this.options=S||{},this.sent=0,this.uniqueID=0}return _.prototype.log=function(C,b){C<=this.options.level&&(this.events.push(kt({},b,{timestamp:Et.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},_.prototype.error=function(C){this.log(zn.ERROR,C)},_.prototype.info=function(C){this.log(zn.INFO,C)},_.prototype.debug=function(C){this.log(zn.DEBUG,C)},_.prototype.isEmpty=function(){return this.events.length===0},_.prototype.send=function(C,b){var S=this,M=kt({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],C(M,function(O,G){O||S.sent++,b&&b(O,G)}),!0},_.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},_}(),Pr=Ii,un=function(){function _(C,b,S,M){this.name=C,this.priority=b,this.transport=S,this.options=M||{}}return _.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},_.prototype.connect=function(C,b){var S=this;if(this.isSupported()){if(this.priority<C)return Wn(new Ce,b)}else return Wn(new Ue,b);var M=!1,O=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),G=null,ue=function(){O.unbind("initialized",ue),O.connect()},ze=function(){G=r1.createHandshake(O,function($1){M=!0,Xt(),b(null,$1)})},st=function($1){Xt(),b($1)},Bt=function(){Xt();var $1;$1=Tt(O),b(new Ze($1))},Xt=function(){O.unbind("initialized",ue),O.unbind("open",ze),O.unbind("error",st),O.unbind("closed",Bt)};return O.bind("initialized",ue),O.bind("open",ze),O.bind("error",st),O.bind("closed",Bt),O.initialize(),{abort:function(){M||(Xt(),G?G.close():O.close())},forceMinPriority:function($1){M||S.priority<$1&&(G?G.close():O.close())}}},_}(),pl=un;function Wn(_,C){return Et.defer(function(){C(_)}),{abort:function(){},forceMinPriority:function(){}}}var Fn=Qe.Transports,Vs=function(_,C,b,S,M,O){var G=Fn[b];if(!G)throw new Ae(b);var ue=(!_.enabledTransports||qt(_.enabledTransports,C)!==-1)&&(!_.disabledTransports||qt(_.disabledTransports,C)===-1),ze;return ue?(M=Object.assign({ignoreNullOrigin:_.ignoreNullOrigin},M),ze=new pl(C,S,O?O.getAssistant(G):G,M)):ze=Mi,ze},Mi={isSupported:function(){return!1},connect:function(_,C){var b=Et.defer(function(){C(new Ue)});return{abort:function(){b.ensureAborted()},forceMinPriority:function(){}}}};function gl(_){var C={activityTimeout:_.activityTimeout||ie.activityTimeout,authEndpoint:_.authEndpoint||ie.authEndpoint,authTransport:_.authTransport||ie.authTransport,cluster:_.cluster||ie.cluster,httpPath:_.httpPath||ie.httpPath,httpPort:_.httpPort||ie.httpPort,httpsPort:_.httpsPort||ie.httpsPort,pongTimeout:_.pongTimeout||ie.pongTimeout,statsHost:_.statsHost||ie.stats_host,unavailableTimeout:_.unavailableTimeout||ie.unavailableTimeout,wsPath:_.wsPath||ie.wsPath,wsPort:_.wsPort||ie.wsPort,wssPort:_.wssPort||ie.wssPort,enableStats:$i(_),httpHost:js(_),useTLS:Ds(_),wsHost:As(_)};return"auth"in _&&(C.auth=_.auth),"authorizer"in _&&(C.authorizer=_.authorizer),"disabledTransports"in _&&(C.disabledTransports=_.disabledTransports),"enabledTransports"in _&&(C.enabledTransports=_.enabledTransports),"ignoreNullOrigin"in _&&(C.ignoreNullOrigin=_.ignoreNullOrigin),"timelineParams"in _&&(C.timelineParams=_.timelineParams),"nacl"in _&&(C.nacl=_.nacl),C}function js(_){return _.httpHost?_.httpHost:_.cluster?"sockjs-"+_.cluster+".pusher.com":ie.httpHost}function As(_){return _.wsHost?_.wsHost:_.cluster?Pi(_.cluster):Pi(ie.cluster)}function Pi(_){return"ws-"+_+".pusher.com"}function Ds(_){return Qe.getProtocol()==="https:"?!0:_.forceTLS!==!1}function $i(_){return"enableStats"in _?_.enableStats:"disableStats"in _?!_.disableStats:!1}var Zo=function(){function _(C,b){var S=this;if(Nn(C),b=b||{},!b.cluster&&!(b.wsHost||b.httpHost)){var M=se.buildLogSuffix("javascriptQuickStart");pt.warn("You should always specify a cluster when connecting. "+M)}"disableStats"in b&&pt.warn("The disableStats option is deprecated in favor of enableStats"),this.key=C,this.config=gl(b),this.channels=r1.createChannels(),this.global_emitter=new N1,this.sessionID=Math.floor(Math.random()*1e9),this.timeline=new Pr(this.key,this.sessionID,{cluster:this.config.cluster,features:_.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:zn.INFO,version:ie.VERSION}),this.config.enableStats&&(this.timelineSender=r1.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+Qe.TimelineTransport.name}));var O=function(G){return Qe.getDefaultStrategy(S.config,G,Vs)};this.connection=r1.createConnectionManager(this.key,{getStrategy:O,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",function(){S.subscribeAll(),S.timelineSender&&S.timelineSender.send(S.connection.isUsingTLS())}),this.connection.bind("message",function(G){var ue=G.event,ze=ue.indexOf("pusher_internal:")===0;if(G.channel){var st=S.channel(G.channel);st&&st.handleEvent(G)}ze||S.global_emitter.emit(G.event,G.data)}),this.connection.bind("connecting",function(){S.channels.disconnect()}),this.connection.bind("disconnected",function(){S.channels.disconnect()}),this.connection.bind("error",function(G){pt.warn(G)}),_.instances.push(this),this.timeline.info({instances:_.instances.length}),_.isReady&&this.connect()}return _.ready=function(){_.isReady=!0;for(var C=0,b=_.instances.length;C<b;C++)_.instances[C].connect()},_.getClientFeatures=function(){return Xe(Jt({ws:Qe.Transports.ws},function(C){return C.isSupported({})}))},_.prototype.channel=function(C){return this.channels.find(C)},_.prototype.allChannels=function(){return this.channels.all()},_.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var C=this.connection.isUsingTLS(),b=this.timelineSender;this.timelineSenderTimer=new yr(6e4,function(){b.send(C)})}},_.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},_.prototype.bind=function(C,b,S){return this.global_emitter.bind(C,b,S),this},_.prototype.unbind=function(C,b,S){return this.global_emitter.unbind(C,b,S),this},_.prototype.bind_global=function(C){return this.global_emitter.bind_global(C),this},_.prototype.unbind_global=function(C){return this.global_emitter.unbind_global(C),this},_.prototype.unbind_all=function(C){return this.global_emitter.unbind_all(),this},_.prototype.subscribeAll=function(){var C;for(C in this.channels.channels)this.channels.channels.hasOwnProperty(C)&&this.subscribe(C)},_.prototype.subscribe=function(C){var b=this.channels.add(C,this);return b.subscriptionPending&&b.subscriptionCancelled?b.reinstateSubscription():!b.subscriptionPending&&this.connection.state==="connected"&&b.subscribe(),b},_.prototype.unsubscribe=function(C){var b=this.channels.find(C);b&&b.subscriptionPending?b.cancelSubscription():(b=this.channels.remove(C),b&&b.subscribed&&b.unsubscribe())},_.prototype.send_event=function(C,b,S){return this.connection.send_event(C,b,S)},_.prototype.shouldUseTLS=function(){return this.config.useTLS},_.instances=[],_.isReady=!1,_.logToConsole=!1,_.Runtime=Qe,_.ScriptReceivers=Qe.ScriptReceivers,_.DependenciesReceivers=Qe.DependenciesReceivers,_.auth_callbacks=Qe.auth_callbacks,_}(),zo=V.default=Zo;function Nn(_){if(_==null)throw"You must pass your app key when you instantiate Pusher."}Qe.setup(Zo)}])})},5683:(nt,fe,V)=>{"use strict";V.d(fe,{f:()=>K});var f=V(8160);function W(Y){var ie=Y.freeze,Pe=Y.children,Ee=(0,f.useRef)({}).current;if(ie&&!Ee.promise)throw Ee.promise=new Promise(function(_e){Ee.resolve=_e}),Ee.promise;if(ie)throw Ee.promise;return Ee.promise&&(Ee.resolve(),Ee.promise=void 0),f.createElement(f.Fragment,null,Pe)}function K(Y){var ie=Y.freeze,Pe=Y.children,Ee=Y.placeholder,_e=Ee===void 0?null:Ee;return f.createElement(f.Suspense,{fallback:_e},f.createElement(W,{freeze:ie},Pe))}},8379:(nt,fe,V)=>{"use strict";V.d(fe,{Z:()=>Ee});var f=V(8160),W=V(8523),K=V.n(W),Y=V(5460),ie=V(4168),Pe=function(_e,pe,we){we===void 0&&(we={});var re=we.video,se=we.onClose,F=se===void 0?ie.ZT:se,Q=(0,f.useState)(pe),ce=Q[0],Ce=Q[1];return(0,Y.Z)(function(){if(!!pe&&!!_e.current){var Ze=function(){re?.current&&(0,ie.S1)(re.current,"webkitendfullscreen",Ze),F()},Re=function(){if(K().isEnabled){var Ae=K().isFullscreen;Ce(Ae),Ae||F()}};if(K().isEnabled){try{K().request(_e.current),Ce(!0)}catch(Ae){F(Ae),Ce(!1)}K().on("change",Re)}else re&&re.current&&re.current.webkitEnterFullscreen?(re.current.webkitEnterFullscreen(),(0,ie.on)(re.current,"webkitendfullscreen",Ze),Ce(!0)):(F(),Ce(!1));return function(){if(Ce(!1),K().isEnabled)try{K().off("change",Re),K().exit()}catch{}else re&&re.current&&re.current.webkitExitFullscreen&&((0,ie.S1)(re.current,"webkitendfullscreen",Ze),re.current.webkitExitFullscreen())}}},[pe,re,_e]),ce};const Ee=Pe},3738:(nt,fe,V)=>{"use strict";V.d(fe,{Z:()=>W});var f=V(8160);function W(K){var Y=(0,f.useRef)();return(0,f.useEffect)(function(){Y.current=K}),Y.current}},2843:(nt,fe,V)=>{"use strict";V.d(fe,{Z:()=>Y});var f=V(8160),W=function(ie,Pe){return typeof Pe=="boolean"?Pe:!ie},K=function(ie){return(0,f.useReducer)(W,ie)};const Y=K},8523:nt=>{/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/(function(){"use strict";var fe=typeof window<"u"&&typeof window.document<"u"?window.document:{},V=nt.exports,f=function(){for(var Y,ie=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Pe=0,Ee=ie.length,_e={};Pe<Ee;Pe++)if(Y=ie[Pe],Y&&Y[1]in fe){for(Pe=0;Pe<Y.length;Pe++)_e[ie[0][Pe]]=Y[Pe];return _e}return!1}(),W={change:f.fullscreenchange,error:f.fullscreenerror},K={request:function(Y,ie){return new Promise(function(Pe,Ee){var _e=function(){this.off("change",_e),Pe()}.bind(this);this.on("change",_e),Y=Y||fe.documentElement;var pe=Y[f.requestFullscreen](ie);pe instanceof Promise&&pe.then(_e).catch(Ee)}.bind(this))},exit:function(){return new Promise(function(Y,ie){if(!this.isFullscreen){Y();return}var Pe=function(){this.off("change",Pe),Y()}.bind(this);this.on("change",Pe);var Ee=fe[f.exitFullscreen]();Ee instanceof Promise&&Ee.then(Pe).catch(ie)}.bind(this))},toggle:function(Y,ie){return this.isFullscreen?this.exit():this.request(Y,ie)},onchange:function(Y){this.on("change",Y)},onerror:function(Y){this.on("error",Y)},on:function(Y,ie){var Pe=W[Y];Pe&&fe.addEventListener(Pe,ie,!1)},off:function(Y,ie){var Pe=W[Y];Pe&&fe.removeEventListener(Pe,ie,!1)},raw:f};if(!f){V?nt.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(K,{isFullscreen:{get:function(){return Boolean(fe[f.fullscreenElement])}},element:{enumerable:!0,get:function(){return fe[f.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(fe[f.fullscreenEnabled])}}}),V?nt.exports=K:window.screenfull=K})()},5106:(nt,fe,V)=>{"use strict";V.d(fe,{gr:()=>we,iK:()=>se});var f=V(7924);const W=F=>F.method!==void 0&&F.method==="call",K=F=>F.error===null&&typeof F.id=="number",Y=F=>{const Q=new Map([[0,()=>{}]]),ce=new Map([[0,()=>{}]]),Ce=new Map,Ze=new Worker(F);return Ze.addEventListener("message",({data:De})=>{if(W(De)){const{params:{timerId:Le,timerType:Ke}}=De;if(Ke==="interval"){const Oe=Q.get(Le);if(typeof Oe=="number"){const _t=Ce.get(Oe);if(_t===void 0||_t.timerId!==Le||_t.timerType!==Ke)throw new Error("The timer is in an undefined state.")}else if(typeof Oe<"u")Oe();else throw new Error("The timer is in an undefined state.")}else if(Ke==="timeout"){const Oe=ce.get(Le);if(typeof Oe=="number"){const _t=Ce.get(Oe);if(_t===void 0||_t.timerId!==Le||_t.timerType!==Ke)throw new Error("The timer is in an undefined state.")}else if(typeof Oe<"u")Oe(),ce.delete(Le);else throw new Error("The timer is in an undefined state.")}}else if(K(De)){const{id:Le}=De,Ke=Ce.get(Le);if(Ke===void 0)throw new Error("The timer is in an undefined state.");const{timerId:Oe,timerType:_t}=Ke;Ce.delete(Le),_t==="interval"?Q.delete(Oe):ce.delete(Oe)}else{const{error:{message:Le}}=De;throw new Error(Le)}}),{clearInterval:De=>{const Le=(0,f.generateUniqueNumber)(Ce);Ce.set(Le,{timerId:De,timerType:"interval"}),Q.set(De,Le),Ze.postMessage({id:Le,method:"clear",params:{timerId:De,timerType:"interval"}})},clearTimeout:De=>{const Le=(0,f.generateUniqueNumber)(Ce);Ce.set(Le,{timerId:De,timerType:"timeout"}),ce.set(De,Le),Ze.postMessage({id:Le,method:"clear",params:{timerId:De,timerType:"timeout"}})},setInterval:(De,Le)=>{const Ke=(0,f.generateUniqueNumber)(Q);return Q.set(Ke,()=>{De(),typeof Q.get(Ke)=="function"&&Ze.postMessage({id:null,method:"set",params:{delay:Le,now:performance.now(),timerId:Ke,timerType:"interval"}})}),Ze.postMessage({id:null,method:"set",params:{delay:Le,now:performance.now(),timerId:Ke,timerType:"interval"}}),Ke},setTimeout:(De,Le)=>{const Ke=(0,f.generateUniqueNumber)(ce);return ce.set(Ke,De),Ze.postMessage({id:null,method:"set",params:{delay:Le,now:performance.now(),timerId:Ke,timerType:"timeout"}}),Ke}}};let ie=null;const _e=((F,Q)=>()=>{if(ie!==null)return ie;const ce=new Blob([Q],{type:"application/javascript; charset=utf-8"}),Ce=URL.createObjectURL(ce);return ie=F(Ce),ie.setTimeout(()=>URL.revokeObjectURL(Ce),0),ie})(Y,`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`),pe=F=>_e().clearInterval(F),we=F=>_e().clearTimeout(F),re=(F,Q)=>_e().setInterval(F,Q),se=(F,Q)=>_e().setTimeout(F,Q)},3512:(nt,fe,V)=>{"use strict";V.d(fe,{Dr:()=>ep});var f=V(8160),W={0:"Invalid value for configuration 'enforceActions', expected 'never', 'always' or 'observed'",1:function(n,o){return"Cannot apply '"+n+"' to '"+o.toString()+"': Field not found."},5:"'keys()' can only be used on observable objects, arrays, sets and maps",6:"'values()' can only be used on observable objects, arrays, sets and maps",7:"'entries()' can only be used on observable objects, arrays and maps",8:"'set()' can only be used on observable objects, arrays and maps",9:"'remove()' can only be used on observable objects, arrays and maps",10:"'has()' can only be used on observable objects, arrays and maps",11:"'get()' can only be used on observable objects, arrays and maps",12:"Invalid annotation",13:"Dynamic observable objects cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)",14:"Intercept handlers should return nothing or a change object",15:"Observable arrays cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)",16:"Modification exception: the internal structure of an observable array was changed.",17:function(n,o){return"[mobx.array] Index out of bounds, "+n+" is larger than "+o},18:"mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js",19:function(n){return"Cannot initialize from classes that inherit from Map: "+n.constructor.name},20:function(n){return"Cannot initialize map from "+n},21:function(n){return"Cannot convert to map from '"+n+"'"},22:"mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js",23:"It is not possible to get index atoms from arrays",24:function(n){return"Cannot obtain administration from "+n},25:function(n,o){return"the entry '"+n+"' does not exist in the observable map '"+o+"'"},26:"please specify a property",27:function(n,o){return"no observable property '"+n.toString()+"' found on the observable object '"+o+"'"},28:function(n){return"Cannot obtain atom from "+n},29:"Expecting some object",30:"invalid action stack. did you forget to finish an action?",31:"missing option for computed: get",32:function(n,o){return"Cycle detected in computation "+n+": "+o},33:function(n){return"The setter of computed value '"+n+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"},34:function(n){return"[ComputedValue '"+n+"'] It is not possible to assign a new value to a computed value."},35:"There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`",36:"isolateGlobalState should be called before MobX is running any reactions",37:function(n){return"[mobx] `observableArray."+n+"()` mutates the array in-place, which is not allowed inside a derivation. Use `array.slice()."+n+"()` instead"},38:"'ownKeys()' can only be used on observable objects",39:"'defineProperty()' can only be used on observable objects"},K={};function Y(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];if(!1)var l;throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(o.length?" "+o.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var ie={};function Pe(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof V.g<"u"?V.g:typeof self<"u"?self:ie}var Ee=Object.assign,_e=Object.getOwnPropertyDescriptor,pe=Object.defineProperty,we=Object.prototype,re=[];Object.freeze(re);var se={};Object.freeze(se);var F=typeof Proxy<"u",Q=Object.toString();function ce(){F||Y("Proxy not available")}function Ce(e){}function Ze(){return++te.mobxGuid}function Re(e){var n=!1;return function(){if(!n)return n=!0,e.apply(this,arguments)}}var Ae=function(){};function Ue(e){return typeof e=="function"}function Je(e){var n=typeof e;switch(n){case"string":case"symbol":case"number":return!0}return!1}function De(e){return e!==null&&typeof e=="object"}function Le(e){if(!De(e))return!1;var n=Object.getPrototypeOf(e);if(n==null)return!0;var o=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return typeof o=="function"&&o.toString()===Q}function Ke(e){var n=e?.constructor;return n?n.name==="GeneratorFunction"||n.displayName==="GeneratorFunction":!1}function Oe(e,n,o){pe(e,n,{enumerable:!1,writable:!0,configurable:!0,value:o})}function _t(e,n,o){pe(e,n,{enumerable:!1,writable:!1,configurable:!0,value:o})}function p1(e,n){var o="isMobX"+e;return n.prototype[o]=!0,function(s){return De(s)&&s[o]===!0}}function u1(e){return e instanceof Map}function Z1(e){return e instanceof Set}var wr=typeof Object.getOwnPropertySymbols<"u";function rn(e){var n=Object.keys(e);if(!wr)return n;var o=Object.getOwnPropertySymbols(e);return o.length?[].concat(n,o.filter(function(s){return we.propertyIsEnumerable.call(e,s)})):n}var I1=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:wr?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function _o(e){return typeof e=="string"?e:typeof e=="symbol"?e.toString():new String(e).toString()}function br(e){return e===null?null:typeof e=="object"?""+e:e}function Yt(e,n){return we.hasOwnProperty.call(e,n)}var Vr=Object.getOwnPropertyDescriptors||function(n){var o={};return I1(n).forEach(function(s){o[s]=_e(n,s)}),o};function jr(e,n){for(var o=0;o<n.length;o++){var s=n[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function xr(e,n,o){return n&&jr(e.prototype,n),o&&jr(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ht(){return Ht=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},Ht.apply(this,arguments)}function yr(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,tr(e,n)}function tr(e,n){return tr=Object.setPrototypeOf||function(s,l){return s.__proto__=l,s},tr(e,n)}function Et(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kt(e,n){if(!!e){if(typeof e=="string")return rr(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return rr(e,n)}}function rr(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,s=new Array(n);o<n;o++)s[o]=e[o];return s}function qt(e,n){var o=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(o)return(o=o.call(e)).next.bind(o);if(Array.isArray(e)||(o=kt(e))||n&&e&&typeof e.length=="number"){o&&(e=o);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var He=Symbol("mobx-stored-annotations");function Xe(e){function n(o,s){qe(o,s,e)}return Object.assign(n,e)}function qe(e,n,o){if(Yt(e,He)||Oe(e,He,Ht({},e[He])),!1)var s;et(e,o,n),wo(o)||(e[He][n]=o)}function et(e,n,o){if(!1)var s,l,c}function Ot(e){return Yt(e,He)||Oe(e,He,Ht({},e[He])),e[He]}var ge=Symbol("mobx administration"),ut=function(){function e(o){o===void 0&&(o="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=it.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=o}var n=e.prototype;return n.onBO=function(){this.onBOL&&this.onBOL.forEach(function(s){return s()})},n.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(s){return s()})},n.reportObserved=function(){return mi(this)},n.reportChanged=function(){Ut(),_i(this),Kt()},n.toString=function(){return this.name_},e}(),Jt=p1("Atom",ut);function Qt(e,n,o){n===void 0&&(n=Ae),o===void 0&&(o=Ae);var s=new ut(e);return n!==Ae&&Ds(s,n),o!==Ae&&$i(s,o),s}function Wt(e,n){return e===n}function f1(e,n){return ea(e,n)}function a1(e,n){return ea(e,n,1)}function Ft(e,n){return Object.is?Object.is(e,n):e===n?e!==0||1/e===1/n:e!==e&&n!==n}var Lt={identity:Wt,structural:f1,default:Ft,shallow:a1};function Tt(e,n,o){return pn(e)?e:Array.isArray(e)?ae.array(e,{name:o}):Le(e)?ae.object(e,void 0,{name:o}):u1(e)?ae.map(e,{name:o}):Z1(e)?ae.set(e,{name:o}):typeof e=="function"&&!Wn(e)&&!hn(e)?Ke(e)?fn(e):un(o,e):e}function z1(e,n,o){if(e==null||c1(e)||x1(e)||l1(e)||v1(e))return e;if(Array.isArray(e))return ae.array(e,{name:o,deep:!1});if(Le(e))return ae.object(e,void 0,{name:o,deep:!1});if(u1(e))return ae.map(e,{name:o,deep:!1});if(Z1(e))return ae.set(e,{name:o,deep:!1})}function pt(e){return e}function W1(e,n){return ea(e,n)?n:e}var F1="override",Er=Xe({annotationType_:F1,make_:bo,extend_:En});function wo(e){return e.annotationType_===F1}function bo(e,n){return 0}function En(e,n,o,s){Y("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function Lr(e,n){return{annotationType_:e,options_:n,make_:Ln,extend_:xo}}function Ln(e,n,o,s){var l;if((l=this.options_)!=null&&l.bound)return this.extend_(e,n,o,!1)===null?0:1;if(s===e.target_)return this.extend_(e,n,o,!1)===null?0:2;if(Wn(o.value))return 1;var c=Ar(e,this,n,o,!1);return pe(s,n,c),2}function xo(e,n,o,s){var l=Ar(e,this,n,o);return e.defineProperty_(n,l,s)}function nn(e,n,o,s){var l=n.annotationType_,c=s.value}function Ar(e,n,o,s,l){var c,d,p,h,g,v,w;l===void 0&&(l=te.safeDescriptors),nn(e,n,o,s);var x=s.value;if((c=n.options_)!=null&&c.bound){var y;x=x.bind((y=e.proxy_)!=null?y:e.target_)}return{value:Nt((d=(p=n.options_)==null?void 0:p.name)!=null?d:o.toString(),x,(h=(g=n.options_)==null?void 0:g.autoAction)!=null?h:!1,(v=n.options_)!=null&&v.bound?(w=e.proxy_)!=null?w:e.target_:void 0),configurable:l?e.isPlainObject_:!0,enumerable:!1,writable:!l}}function Sn(e,n){return{annotationType_:e,options_:n,make_:yo,extend_:Eo}}function yo(e,n,o,s){var l;if(s===e.target_)return this.extend_(e,n,o,!1)===null?0:2;if((l=this.options_)!=null&&l.bound&&(!Yt(e.target_,n)||!hn(e.target_[n]))&&this.extend_(e,n,o,!1)===null)return 0;if(hn(o.value))return 1;var c=Dr(e,this,n,o,!1,!1);return pe(s,n,c),2}function Eo(e,n,o,s){var l,c=Dr(e,this,n,o,(l=this.options_)==null?void 0:l.bound);return e.defineProperty_(n,c,s)}function Lo(e,n,o,s){var l=n.annotationType_,c=s.value}function Dr(e,n,o,s,l,c){c===void 0&&(c=te.safeDescriptors),Lo(e,n,o,s);var d=s.value;if(hn(d)||(d=fn(d)),l){var p;d=d.bind((p=e.proxy_)!=null?p:e.target_),d.isMobXFlow=!0}return{value:d,configurable:c?e.isPlainObject_:!0,enumerable:!1,writable:!c}}function nr(e,n){return{annotationType_:e,options_:n,make_:So,extend_:N1}}function So(e,n,o){return this.extend_(e,n,o,!1)===null?0:1}function N1(e,n,o,s){return Ro(e,this,n,o),e.defineComputedProperty_(n,Ht({},this.options_,{get:o.get,set:o.set}),s)}function Ro(e,n,o,s){var l=n.annotationType_,c=s.get}function Zr(e,n){return{annotationType_:e,options_:n,make_:Rn,extend_:Io}}function Rn(e,n,o){return this.extend_(e,n,o,!1)===null?0:1}function Io(e,n,o,s){var l,c;return or(e,this,n,o),e.defineObservableProperty_(n,o.value,(l=(c=this.options_)==null?void 0:c.enhancer)!=null?l:Tt,s)}function or(e,n,o,s){var l=n.annotationType_}var Mo="true",In=on();function on(e){return{annotationType_:Mo,options_:e,make_:sn,extend_:zr}}function sn(e,n,o,s){var l,c;if(o.get)return xe.make_(e,n,o,s);if(o.set){var d=Nt(n.toString(),o.set);return s===e.target_?e.defineProperty_(n,{configurable:te.safeDescriptors?e.isPlainObject_:!0,set:d})===null?0:2:(pe(s,n,{configurable:!0,set:d}),2)}if(s!==e.target_&&typeof o.value=="function"){var p;if(Ke(o.value)){var h,g=(h=this.options_)!=null&&h.autoBind?fn.bound:fn;return g.make_(e,n,o,s)}var v=(p=this.options_)!=null&&p.autoBind?un.bound:un;return v.make_(e,n,o,s)}var w=((l=this.options_)==null?void 0:l.deep)===!1?ae.ref:ae;if(typeof o.value=="function"&&(c=this.options_)!=null&&c.autoBind){var x;o.value=o.value.bind((x=e.proxy_)!=null?x:e.target_)}return w.make_(e,n,o,s)}function zr(e,n,o,s){var l,c;if(o.get)return xe.extend_(e,n,o,s);if(o.set)return e.defineProperty_(n,{configurable:te.safeDescriptors?e.isPlainObject_:!0,set:Nt(n.toString(),o.set)},s);if(typeof o.value=="function"&&(l=this.options_)!=null&&l.autoBind){var d;o.value=o.value.bind((d=e.proxy_)!=null?d:e.target_)}var p=((c=this.options_)==null?void 0:c.deep)===!1?ae.ref:ae;return p.extend_(e,n,o,s)}var M1="observable",Mn="observable.ref",Pn="observable.shallow",Wr="observable.struct",Po={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Po);function Sr(e){return e||Po}var $n=Zr(M1),$o=Zr(Mn,{enhancer:pt}),Ho=Zr(Pn,{enhancer:z1}),Z=Zr(Wr,{enhancer:W1}),q=Xe($n);function ee(e){return e.deep===!0?Tt:e.deep===!1?pt:oe(e.defaultDecorator)}function N(e){var n;return e?(n=e.defaultDecorator)!=null?n:on(e):void 0}function oe(e){var n,o;return e&&(n=(o=e.options_)==null?void 0:o.enhancer)!=null?n:Tt}function de(e,n,o){if(Je(n)){qe(e,n,$n);return}return pn(e)?e:Le(e)?ae.object(e,n,o):Array.isArray(e)?ae.array(e,n):u1(e)?ae.map(e,n):Z1(e)?ae.set(e,n):typeof e=="object"&&e!==null?e:ae.box(e,n)}Object.assign(de,q);var be={box:function(n,o){var s=Sr(o);return new P1(n,ee(s),s.name,!0,s.equals)},array:function(n,o){var s=Sr(o);return(te.useProxies===!1||s.proxy===!1?v5:a5)(n,ee(s),s.name)},map:function(n,o){var s=Sr(o);return new Ll(n,ee(s),s.name)},set:function(n,o){var s=Sr(o);return new Il(n,ee(s),s.name)},object:function(n,o,s){return b(te.useProxies===!1||s?.proxy===!1?Ko({},s):n5({},s),n,o)},ref:Xe($o),shallow:Xe(Ho),deep:q,struct:Xe(Z)},ae=Ee(de,be),Te="computed",$e="computed.struct",Ie=nr(Te),Be=nr($e,{equals:Lt.structural}),xe=function(n,o){if(Je(o))return qe(n,o,Ie);if(Le(n))return Xe(nr(Te,n));var s=Le(o)?o:{};return s.get=n,s.name||(s.name=n.name||""),new Fr(s)};Object.assign(xe,Ie),xe.struct=Xe(Be);var ot,at,wt=0,It=1,Mt=(ot=(at=_e(function(){},"name"))==null?void 0:at.configurable)!=null?ot:!1,e1={value:"action",configurable:!0,writable:!1,enumerable:!1};function Nt(e,n,o,s){o===void 0&&(o=!1);function l(){return _1(e,o,n,s||this,arguments)}return l.isMobxAction=!0,Mt&&(e1.value=e,Object.defineProperty(l,"name",e1)),l}function _1(e,n,o,s,l){var c=w1(e,n,s,l);try{return o.apply(s,l)}catch(d){throw c.error_=d,d}finally{bt(c)}}function w1(e,n,o,s){var l=!1,c=0;if(!1)var d;var p=te.trackingDerivation,h=!n||!p;Ut();var g=te.allowStateChanges;h&&(Nr(),g=Dt(!0));var v=Bo(!0),w={runAsAction_:h,prevDerivation_:p,prevAllowStateChanges_:g,prevAllowStateReads_:v,notifySpy_:l,startTime_:c,actionId_:It++,parentActionId_:wt};return wt=w.actionId_,w}function bt(e){wt!==e.actionId_&&Y(30),wt=e.parentActionId_,e.error_!==void 0&&(te.suppressReactionErrors=!0),b1(e.prevAllowStateChanges_),ln(e.prevAllowStateReads_),Kt(),e.runAsAction_&&ir(e.prevDerivation_),te.suppressReactionErrors=!1}function t1(e,n){var o=Dt(e);try{return n()}finally{b1(o)}}function Dt(e){var n=te.allowStateChanges;return te.allowStateChanges=e,n}function b1(e){te.allowStateChanges=e}var an,hi="create";an=Symbol.toPrimitive;var P1=function(e,n){yr(o,e);function o(l,c,d,p,h){var g;return d===void 0&&(d="ObservableValue"),p===void 0&&(p=!0),h===void 0&&(h=Lt.default),g=e.call(this,d)||this,g.enhancer=void 0,g.name_=void 0,g.equals=void 0,g.hasUnreportedChange_=!1,g.interceptors_=void 0,g.changeListeners_=void 0,g.value_=void 0,g.dehancer=void 0,g.enhancer=c,g.name_=d,g.equals=h,g.value_=c(l,void 0,d),g}var s=o.prototype;return s.dehanceValue=function(c){return this.dehancer!==void 0?this.dehancer(c):c},s.set=function(c){var d=this.value_;if(c=this.prepareNewValue_(c),c!==te.UNCHANGED){var p=Mr();this.setNewValue_(c)}},s.prepareNewValue_=function(c){if(r1(this),H1(this)){var d=k1(this,{object:this,type:sr,newValue:c});if(!d)return te.UNCHANGED;c=d.newValue}return c=this.enhancer(c,this.value_,this.name_),this.equals(this.value_,c)?te.UNCHANGED:c},s.setNewValue_=function(c){var d=this.value_;this.value_=c,this.reportChanged(),K1(this)&&X1(this,{type:sr,object:this,newValue:c,oldValue:d})},s.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},s.intercept_=function(c){return No(this,c)},s.observe_=function(c,d){return d&&c({observableKind:"value",debugObjectName:this.name_,object:this,type:sr,newValue:this.value_,oldValue:void 0}),Uo(this,c)},s.raw=function(){return this.value_},s.toJSON=function(){return this.get()},s.toString=function(){return this.name_+"["+this.value_+"]"},s.valueOf=function(){return br(this.get())},s[n]=function(){return this.valueOf()},o}(ut,an),Hn=null,pi;pi=Symbol.toPrimitive;var Fr=function(e){function n(s){this.dependenciesState_=it.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=it.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new kn(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=U1.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,s.get||Y(31),this.derivation=s.get,this.name_=s.name||"ComputedValue",s.set&&(this.setter_=Nt("ComputedValue-setter",s.set)),this.equals_=s.equals||(s.compareStructural||s.struct?Lt.structural:Lt.default),this.scope_=s.context,this.requiresReaction_=s.requiresReaction,this.keepAlive_=!!s.keepAlive}var o=n.prototype;return o.onBecomeStale_=function(){Hs(this)},o.onBO=function(){this.onBOL&&this.onBOL.forEach(function(l){return l()})},o.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(l){return l()})},o.get=function(){if(this.isComputing_&&Y(32,this.name_,this.derivation),te.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)ko(this)&&(this.warnAboutUntrackedRead_(),Ut(),this.value_=this.computeValue_(!1),Kt());else if(mi(this),ko(this)){var l=te.trackingContext;this.keepAlive_&&!l&&(te.trackingContext=this),this.trackAndCompute()&&$s(this),te.trackingContext=l}var c=this.value_;if(On(c))throw c.cause;return c},o.set=function(l){if(this.setter_){this.isRunningSetter_&&Y(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,l)}finally{this.isRunningSetter_=!1}}else Y(34,this.name_)},o.trackAndCompute=function(){var l=this.value_,c=this.dependenciesState_===it.NOT_TRACKING_,d=this.computeValue_(!0),p=c||On(l)||On(d)||!this.equals_(l,d);return p&&(this.value_=d),p},o.computeValue_=function(l){this.isComputing_=!0;var c=Dt(!1),d;if(l)d=Oo(this,this.derivation,this.scope_);else if(te.disableErrorBoundaries===!0)d=this.derivation.call(this.scope_);else try{d=this.derivation.call(this.scope_)}catch(p){d=new kn(p)}return b1(c),this.isComputing_=!1,d},o.suspend_=function(){this.keepAlive_||(To(this),this.value_=void 0)},o.observe_=function(l,c){var d=this,p=!0,h=void 0;return Fn(function(){var g=d.get();if(!p||c){var v=Nr();l({observableKind:"computed",debugObjectName:d.name_,type:sr,object:d,newValue:g,oldValue:h}),ir(v)}p=!1,h=g})},o.warnAboutUntrackedRead_=function(){},o.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},o.valueOf=function(){return br(this.get())},o[e]=function(){return this.valueOf()},n}(pi),Rr=p1("ComputedValue",Fr),it;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(it||(it={}));var U1;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(U1||(U1={}));var kn=function(n){this.cause=void 0,this.cause=n};function On(e){return e instanceof kn}function ko(e){switch(e.dependenciesState_){case it.UP_TO_DATE_:return!1;case it.NOT_TRACKING_:case it.STALE_:return!0;case it.POSSIBLY_STALE_:{for(var n=Bo(!0),o=Nr(),s=e.observing_,l=s.length,c=0;c<l;c++){var d=s[c];if(Rr(d)){if(te.disableErrorBoundaries)d.get();else try{d.get()}catch{return ir(o),ln(n),!0}if(e.dependenciesState_===it.STALE_)return ir(o),ln(n),!0}}return gi(e),ir(o),ln(n),!1}}}function sl(){return te.trackingDerivation!==null}function r1(e){return;var n}function al(e){}function Oo(e,n,o){var s=Bo(!0);gi(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++te.runId;var l=te.trackingDerivation;te.trackingDerivation=e,te.inBatch++;var c;if(te.disableErrorBoundaries===!0)c=n.call(o);else try{c=n.call(o)}catch(d){c=new kn(d)}return te.inBatch--,te.trackingDerivation=l,Ir(e),ln(s),c}function ll(e){}function Ir(e){for(var n=e.observing_,o=e.observing_=e.newObserving_,s=it.UP_TO_DATE_,l=0,c=e.unboundDepsCount_,d=0;d<c;d++){var p=o[d];p.diffValue_===0&&(p.diffValue_=1,l!==d&&(o[l]=p),l++),p.dependenciesState_>s&&(s=p.dependenciesState_)}for(o.length=l,e.newObserving_=null,c=n.length;c--;){var h=n[c];h.diffValue_===0&&vi(h,e),h.diffValue_=0}for(;l--;){var g=o[l];g.diffValue_===1&&(g.diffValue_=0,dn(g,e))}s!==it.UP_TO_DATE_&&(e.dependenciesState_=s,e.onBecomeStale_())}function To(e){var n=e.observing_;e.observing_=[];for(var o=n.length;o--;)vi(n[o],e);e.dependenciesState_=it.NOT_TRACKING_}function Tn(e){var n=Nr();try{return e()}finally{ir(n)}}function Nr(){var e=te.trackingDerivation;return te.trackingDerivation=null,e}function ir(e){te.trackingDerivation=e}function Bo(e){var n=te.allowStateReads;return te.allowStateReads=e,n}function ln(e){te.allowStateReads=e}function gi(e){if(e.dependenciesState_!==it.UP_TO_DATE_){e.dependenciesState_=it.UP_TO_DATE_;for(var n=e.observing_,o=n.length;o--;)n[o].lowestObserverState_=it.UP_TO_DATE_}}var Vo=null,cn=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},Bn=!0,jo=!1,te=function(){var e=Pe();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Bn=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new cn().version&&(Bn=!1),Bn?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new cn):(setTimeout(function(){jo||Y(35)},1),new cn)}();function Vn(){if((te.pendingReactions.length||te.inBatch||te.isRunningReactions)&&Y(36),jo=!0,Bn){var e=Pe();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),te=new cn}}function cl(){return te}function jn(){var e=new cn;for(var n in e)Vo.indexOf(n)===-1&&(te[n]=e[n]);te.allowStateChanges=!te.enforceActions}function Ms(e){return e.observers_&&e.observers_.size>0}function Ps(e){return e.observers_}function dn(e,n){e.observers_.add(n),e.lowestObserverState_>n.dependenciesState_&&(e.lowestObserverState_=n.dependenciesState_)}function vi(e,n){e.observers_.delete(n),e.observers_.size===0&&Ci(e)}function Ci(e){e.isPendingUnobservation_===!1&&(e.isPendingUnobservation_=!0,te.pendingUnobservations.push(e))}function Ut(){te.inBatch++}function Kt(){if(--te.inBatch===0){wi();for(var e=te.pendingUnobservations,n=0;n<e.length;n++){var o=e[n];o.isPendingUnobservation_=!1,o.observers_.size===0&&(o.isBeingObserved_&&(o.isBeingObserved_=!1,o.onBUO()),o instanceof Fr&&o.suspend_())}te.pendingUnobservations=[]}}function mi(e){var n=te.trackingDerivation;return n!==null?(n.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=n.runId_,n.newObserving_[n.unboundDepsCount_++]=e,!e.isBeingObserved_&&te.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),!0):(e.observers_.size===0&&te.inBatch>0&&Ci(e),!1)}function _i(e){e.lowestObserverState_!==it.STALE_&&(e.lowestObserverState_=it.STALE_,e.observers_.forEach(function(n){n.dependenciesState_===it.UP_TO_DATE_&&n.onBecomeStale_(),n.dependenciesState_=it.STALE_}))}function $s(e){e.lowestObserverState_!==it.STALE_&&(e.lowestObserverState_=it.STALE_,e.observers_.forEach(function(n){n.dependenciesState_===it.POSSIBLY_STALE_?n.dependenciesState_=it.STALE_:n.dependenciesState_===it.UP_TO_DATE_&&(e.lowestObserverState_=it.UP_TO_DATE_)}))}function Hs(e){e.lowestObserverState_===it.UP_TO_DATE_&&(e.lowestObserverState_=it.POSSIBLY_STALE_,e.observers_.forEach(function(n){n.dependenciesState_===it.UP_TO_DATE_&&(n.dependenciesState_=it.POSSIBLY_STALE_,n.onBecomeStale_())}))}function dl(e,n){if(console.log("[mobx.trace] '"+e.name_+"' is invalidated due to a change in: '"+n.name_+"'"),e.isTracing_===U1.BREAK){var o=[];An(S(e),o,1),new Function(`debugger;
/*
Tracing '`+e.name_+`'

You are entering this break point because derivation '`+e.name_+"' is being traced and '"+n.name_+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(e instanceof Fr?e.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+o.join(`
`)+`
*/
    `)()}}function An(e,n,o){if(n.length>=1e3){n.push("(and many more)");return}n.push(""+"	".repeat(o-1)+e.name),e.dependencies&&e.dependencies.forEach(function(s){return An(s,n,o+1)})}var g1=function(){function e(o,s,l,c){o===void 0&&(o="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=it.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=U1.NONE,this.name_=o,this.onInvalidate_=s,this.errorHandler_=l,this.requiresObservable_=c}var n=e.prototype;return n.onBecomeStale_=function(){this.schedule_()},n.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,te.pendingReactions.push(this),wi())},n.isScheduled=function(){return this.isScheduled_},n.runReaction_=function(){if(!this.isDisposed_){Ut(),this.isScheduled_=!1;var s=te.trackingContext;if(te.trackingContext=this,ko(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(l){this.reportExceptionInDerivation_(l)}}te.trackingContext=s,Kt()}},n.track=function(s){if(!this.isDisposed_){Ut();var l=Mr(),c;this.isRunning_=!0;var d=te.trackingContext;te.trackingContext=this;var p=Oo(this,s,void 0);te.trackingContext=d,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&To(this),On(p)&&this.reportExceptionInDerivation_(p.cause),Kt()}},n.reportExceptionInDerivation_=function(s){var l=this;if(this.errorHandler_){this.errorHandler_(s,this);return}if(te.disableErrorBoundaries)throw s;var c="[mobx] uncaught error in '"+this+"'";te.suppressReactionErrors||console.error(c,s),te.globalReactionErrorHandlers.forEach(function(d){return d(s,l)})},n.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Ut(),To(this),Kt()))},n.getDisposer_=function(){var s=this.dispose.bind(this);return s[ge]=this,s},n.toString=function(){return"Reaction["+this.name_+"]"},n.trace=function(s){s===void 0&&(s=!1),Q9(this,s)},e}();function ul(e){return te.globalReactionErrorHandlers.push(e),function(){var n=te.globalReactionErrorHandlers.indexOf(e);n>=0&&te.globalReactionErrorHandlers.splice(n,1)}}var ks=100,Ao=function(n){return n()};function wi(){te.inBatch>0||te.isRunningReactions||Ao(bi)}function bi(){te.isRunningReactions=!0;for(var e=te.pendingReactions,n=0;e.length>0;){++n===ks&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var o=e.splice(0),s=0,l=o.length;s<l;s++)o[s].runReaction_()}te.isRunningReactions=!1}var Dn=p1("Reaction",g1);function xi(e){var n=Ao;Ao=function(s){return e(function(){return n(s)})}}function Mr(){return!1}function Do(e){return;for(var n,o,s;o<s;o++)n[o](e)}function fl(e){return;var n}var Os={type:"report-end",spyReportEnd:!0};function hl(e){}function Ts(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var yi="action",Bs="action.bound",Ei="autoAction",Li="autoAction.bound",Si="<unnamed action>",Ri=Lr(yi),Qe=Lr(Bs,{bound:!0}),Zn=Lr(Ei,{autoAction:!0}),zn=Lr(Li,{autoAction:!0,bound:!0});function Ii(e){var n=function(s,l){if(Ue(s))return Nt(s.name||Si,s,e);if(Ue(l))return Nt(s,l,e);if(Je(l))return qe(s,l,e?Zn:Ri);if(Je(s))return Xe(Lr(e?Ei:yi,{name:s,autoAction:e}))};return n}var Pr=Ii(!1);Object.assign(Pr,Ri);var un=Ii(!0);Object.assign(un,Zn),Pr.bound=Xe(Qe),un.bound=Xe(zn);function pl(e){return _1(e.name||Si,!1,e,this,void 0)}function Wn(e){return Ue(e)&&e.isMobxAction===!0}function Fn(e,n){var o,s;n===void 0&&(n=se);var l=(o=(s=n)==null?void 0:s.name)!=null?o:"Autorun",c=!n.scheduler&&!n.delay,d;if(c)d=new g1(l,function(){this.track(g)},n.onError,n.requiresObservable);else{var p=Mi(n),h=!1;d=new g1(l,function(){h||(h=!0,p(function(){h=!1,d.isDisposed_||d.track(g)}))},n.onError,n.requiresObservable)}function g(){e(d)}return d.schedule_(),d.getDisposer_()}var Vs=function(n){return n()};function Mi(e){return e.scheduler?e.scheduler:e.delay?function(n){return setTimeout(n,e.delay)}:Vs}function gl(e,n,o){var s;o===void 0&&(o=se);var l=(s=o.name)!=null?s:"Reaction",c=Pr(l,o.onError?js(o.onError,n):n),d=!o.scheduler&&!o.delay,p=Mi(o),h=!0,g=!1,v,w,x=o.compareStructural?Lt.structural:o.equals||Lt.default,y=new g1(l,function(){h||d?E():g||(g=!0,p(E))},o.onError,o.requiresObservable);function E(){if(g=!1,!y.isDisposed_){var R=!1;y.track(function(){var P=t1(!1,function(){return e(y)});R=h||!x(v,P),w=v,v=P}),(h&&o.fireImmediately||!h&&R)&&c(v,w,y),h=!1}}return y.schedule_(),y.getDisposer_()}function js(e,n){return function(){try{return n.apply(this,arguments)}catch(o){e.call(this,o)}}}var As="onBO",Pi="onBUO";function Ds(e,n,o){return Zo(As,e,n,o)}function $i(e,n,o){return Zo(Pi,e,n,o)}function Zo(e,n,o,s){var l=typeof s=="function"?ar(n,o):ar(n),c=Ue(s)?s:o,d=e+"L";return l[d]?l[d].add(c):l[d]=new Set([c]),function(){var p=l[d];p&&(p.delete(c),p.size===0&&delete l[d])}}var zo="never",Nn="always",_="observed";function C(e){e.isolateGlobalState===!0&&Vn();var n=e.useProxies,o=e.enforceActions;if(n!==void 0&&(te.useProxies=n===Nn?!0:n===zo?!1:typeof Proxy<"u"),n==="ifavailable"&&(te.verifyProxies=!0),o!==void 0){var s=o===Nn?Nn:o===_;te.enforceActions=s,te.allowStateChanges=!(s===!0||s===Nn)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(l){l in e&&(te[l]=!!e[l])}),te.allowStateReads=!te.observableRequiresReaction,e.reactionScheduler&&xi(e.reactionScheduler)}function b(e,n,o,s){var l=Vr(n),c=Ko(e,s)[ge];Ut();try{I1(l).forEach(function(d){c.extend_(d,l[d],o&&d in o?o[d]:!0)})}finally{Kt()}return e}function S(e,n){return M(ar(e,n))}function M(e){var n={name:e.name_};return e.observing_&&e.observing_.length>0&&(n.dependencies=ue(e.observing_).map(M)),n}function O(e,n){return G(ar(e,n))}function G(e){var n={name:e.name_};return Ms(e)&&(n.observers=Array.from(Ps(e)).map(G)),n}function ue(e){return Array.from(new Set(e))}var ze=0;function st(){this.message="FLOW_CANCELLED"}st.prototype=Object.create(Error.prototype);function Bt(e){return e instanceof st}var Xt=Sn("flow"),$1=Sn("flow.bound",{bound:!0}),fn=Object.assign(function(n,o){if(Je(o))return qe(n,o,Xt);var s=n,l=s.name||"<unnamed flow>",c=function(){var p=this,h=arguments,g=++ze,v=Pr(l+" - runid: "+g+" - init",s).apply(p,h),w,x=void 0,y=new Promise(function(E,R){var P=0;w=R;function $(j){x=void 0;var T;try{T=Pr(l+" - runid: "+g+" - yield "+P++,v.next).call(v,j)}catch(D){return R(D)}B(T)}function I(j){x=void 0;var T;try{T=Pr(l+" - runid: "+g+" - yield "+P++,v.throw).call(v,j)}catch(D){return R(D)}B(T)}function B(j){if(Ue(j?.then)){j.then(B,R);return}return j.done?E(j.value):(x=Promise.resolve(j.value),x.then($,I))}$(void 0)});return y.cancel=Pr(l+" - runid: "+g+" - cancel",function(){try{x&&Wo(x);var E=v.return(void 0),R=Promise.resolve(E.value);R.then(Ae,Ae),Wo(R),w(new st)}catch(P){w(P)}}),y};return c.isMobXFlow=!0,c},Xt);fn.bound=Xe($1);function Wo(e){Ue(e.cancel)&&e.cancel()}function vl(e){return e}function hn(e){return e?.isMobXFlow===!0}function Cl(e,n,o){var s;return l1(e)||x1(e)||Hn(e)?s=Xr(e):c1(e)&&(s=Xr(e,n)),s.dehancer=typeof n=="function"?n:o,function(){s.dehancer=void 0}}function Zs(e,n,o){return Ue(o)?Ws(e,n,o):zs(e,n)}function zs(e,n){return Xr(e).intercept_(n)}function Ws(e,n,o){return Xr(e,n).intercept_(o)}function Fo(e,n){if(n===void 0)return Rr(e);if(c1(e)===!1||!e[ge].values_.has(n))return!1;var o=ar(e,n);return Rr(o)}function Fs(e){return Fo(e)}function Ns(e,n){return Fo(e,n)}function Un(e,n){return e?n!==void 0?c1(e)?e[ge].values_.has(n):!1:c1(e)||!!e[ge]||Jt(e)||Dn(e)||Rr(e):!1}function pn(e){return Un(e)}function Us(e,n){return Un(e,n)}function Kn(e){if(c1(e))return e[ge].keys_();if(l1(e)||v1(e))return Array.from(e.keys());if(x1(e))return e.map(function(n,o){return o});Y(5)}function ml(e){if(c1(e))return Kn(e).map(function(n){return e[n]});if(l1(e))return Kn(e).map(function(n){return e.get(n)});if(v1(e))return Array.from(e.values());if(x1(e))return e.slice();Y(6)}function _l(e){if(c1(e))return Kn(e).map(function(n){return[n,e[n]]});if(l1(e))return Kn(e).map(function(n){return[n,e.get(n)]});if(v1(e))return Array.from(e.entries());if(x1(e))return e.map(function(n,o){return[o,n]});Y(7)}function Ks(e,n,o){if(arguments.length===2&&!v1(e)){Ut();var s=n;try{for(var l in s)Ks(e,l,s[l])}finally{Kt()}return}c1(e)?e[ge].set_(n,o):l1(e)?e.set(n,o):v1(e)?e.add(n):x1(e)?(typeof n!="number"&&(n=parseInt(n,10)),n<0&&Y("Invalid index: '"+n+"'"),Ut(),n>=e.length&&(e.length=n+1),e[n]=o,Kt()):Y(8)}function Xs(e,n){c1(e)?e[ge].delete_(n):l1(e)||v1(e)?e.delete(n):x1(e)?(typeof n!="number"&&(n=parseInt(n,10)),e.splice(n,1)):Y(9)}function G9(e,n){if(c1(e))return e[ge].has_(n);if(l1(e))return e.has(n);if(v1(e))return e.has(n);if(x1(e))return n>=0&&n<e.length;Y(10)}function sp(e,n){if(!!G9(e,n)){if(c1(e))return e[ge].get_(n);if(l1(e))return e.get(n);if(x1(e))return e[n];Y(11)}}function ap(e,n,o){if(c1(e))return e[ge].defineProperty_(n,o);Y(39)}function Y9(e){if(c1(e))return e[ge].ownKeys_();Y(38)}function lp(e,n,o,s){return Ue(o)?J9(e,n,o,s):q9(e,n,o)}function q9(e,n,o){return Xr(e).observe_(n,o)}function J9(e,n,o,s){return Xr(e,n).observe_(o,s)}function Hi(e,n,o){return e.set(n,o),o}function Xn(e,n){if(e==null||typeof e!="object"||e instanceof Date||!pn(e))return e;if(Hn(e)||Rr(e))return Xn(e.get(),n);if(n.has(e))return n.get(e);if(x1(e)){var o=Hi(n,e,new Array(e.length));return e.forEach(function(d,p){o[p]=Xn(d,n)}),o}if(v1(e)){var s=Hi(n,e,new Set);return e.forEach(function(d){s.add(Xn(d,n))}),s}if(l1(e)){var l=Hi(n,e,new Map);return e.forEach(function(d,p){l.set(p,Xn(d,n))}),l}else{var c=Hi(n,e,{});return Y9(e).forEach(function(d){we.propertyIsEnumerable.call(e,d)&&(c[d]=Xn(e[d],n))}),c}}function cp(e,n){return Xn(e,new Map)}function Q9(){Y("trace() is not available in production builds");for(var e=!1,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];typeof o[o.length-1]=="boolean"&&(e=o.pop());var l=e5(o);if(!l)return Y("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");l.isTracing_===U1.NONE&&console.log("[mobx.trace] '"+l.name_+"' tracing enabled"),l.isTracing_=e?U1.BREAK:U1.LOG}function e5(e){switch(e.length){case 0:return te.trackingDerivation;case 1:return ar(e[0]);case 2:return ar(e[0],e[1])}}function $r(e,n){n===void 0&&(n=void 0),Ut();try{return e.apply(n)}finally{Kt()}}function dp(e,n,o){return arguments.length===1||n&&typeof n=="object"?t5(e,n):wl(e,n,o||{})}function wl(e,n,o){var s;if(typeof o.timeout=="number"){var l=new Error("WHEN_TIMEOUT");s=setTimeout(function(){if(!d[ge].isDisposed_)if(d(),o.onError)o.onError(l);else throw l},o.timeout)}o.name="When";var c=Nt("When-effect",n),d=Fn(function(p){var h=t1(!1,e);h&&(p.dispose(),s&&clearTimeout(s),c())},o);return d}function t5(e,n){var o,s=new Promise(function(l,c){var d=wl(e,l,Ht({},n,{onError:c}));o=function(){d(),c(new Error("WHEN_CANCELLED"))}});return s.cancel=o,s}function Gn(e){return e[ge]}var r5={has:function(n,o){return Gn(n).has_(o)},get:function(n,o){return Gn(n).get_(o)},set:function(n,o,s){var l;return Je(o)?(l=Gn(n).set_(o,s,!0))!=null?l:!0:!1},deleteProperty:function(n,o){var s;return Je(o)?(s=Gn(n).delete_(o,!0))!=null?s:!0:!1},defineProperty:function(n,o,s){var l;return(l=Gn(n).defineProperty_(o,s))!=null?l:!0},ownKeys:function(n){return Gn(n).ownKeys_()},preventExtensions:function(n){Y(13)}};function n5(e,n){var o,s;return ce(),e=Ko(e,n),(s=(o=e[ge]).proxy_)!=null?s:o.proxy_=new Proxy(e,r5)}function H1(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function No(e,n){var o=e.interceptors_||(e.interceptors_=[]);return o.push(n),Re(function(){var s=o.indexOf(n);s!==-1&&o.splice(s,1)})}function k1(e,n){var o=Nr();try{for(var s=[].concat(e.interceptors_||[]),l=0,c=s.length;l<c&&(n=s[l](n),n&&!n.type&&Y(14),!!n);l++);return n}finally{ir(o)}}function K1(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function Uo(e,n){var o=e.changeListeners_||(e.changeListeners_=[]);return o.push(n),Re(function(){var s=o.indexOf(n);s!==-1&&o.splice(s,1)})}function X1(e,n){var o=Nr(),s=e.changeListeners_;if(!!s){s=s.slice();for(var l=0,c=s.length;l<c;l++)s[l](n);ir(o)}}function o5(e,n,o){var s=Ko(e,o)[ge];Ut();try{var l;(l=n)!=null||(n=Ot(e)),I1(n).forEach(function(c){return s.make_(c,n[c])})}finally{Kt()}return e}var Gs=null;function up(e,n,o){if(Le(e))return b(e,e,n,o);var s=Ko(e,o)[ge];if(!e[Gs]){var l=Object.getPrototypeOf(e),c=new Set([].concat(I1(e),I1(l)));c.delete("constructor"),c.delete(ge),Oe(l,Gs,c)}Ut();try{e[Gs].forEach(function(d){return s.make_(d,n&&d in n?n[d]:!0)})}finally{Kt()}return e}var bl="splice",sr="update",i5=1e4,s5={get:function(n,o){var s=n[ge];return o===ge?s:o==="length"?s.getArrayLength_():typeof o=="string"&&!isNaN(o)?s.get_(parseInt(o)):Yt(ki,o)?ki[o]:n[o]},set:function(n,o,s){var l=n[ge];return o==="length"&&l.setArrayLength_(s),typeof o=="symbol"||isNaN(o)?n[o]=s:l.set_(parseInt(o),s),!0},preventExtensions:function(){Y(15)}},Ys=function(){function e(o,s,l,c){o===void 0&&(o="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=l,this.legacyMode_=c,this.atom_=new ut(o),this.enhancer_=function(d,p){return s(d,p,"ObservableArray[..]")}}var n=e.prototype;return n.dehanceValue_=function(s){return this.dehancer!==void 0?this.dehancer(s):s},n.dehanceValues_=function(s){return this.dehancer!==void 0&&s.length>0?s.map(this.dehancer):s},n.intercept_=function(s){return No(this,s)},n.observe_=function(s,l){return l===void 0&&(l=!1),l&&s({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Uo(this,s)},n.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},n.setArrayLength_=function(s){(typeof s!="number"||isNaN(s)||s<0)&&Y("Out of range: "+s);var l=this.values_.length;if(s!==l)if(s>l){for(var c=new Array(s-l),d=0;d<s-l;d++)c[d]=void 0;this.spliceWithArray_(l,0,c)}else this.spliceWithArray_(s,l-s)},n.updateArrayLength_=function(s,l){s!==this.lastKnownLength_&&Y(16),this.lastKnownLength_+=l,this.legacyMode_&&l>0&&Bl(s+l+1)},n.spliceWithArray_=function(s,l,c){var d=this;r1(this.atom_);var p=this.values_.length;if(s===void 0?s=0:s>p?s=p:s<0&&(s=Math.max(0,p+s)),arguments.length===1?l=p-s:l==null?l=0:l=Math.max(0,Math.min(l,p-s)),c===void 0&&(c=re),H1(this)){var h=k1(this,{object:this.proxy_,type:bl,index:s,removedCount:l,added:c});if(!h)return re;l=h.removedCount,c=h.added}if(c=c.length===0?c:c.map(function(w){return d.enhancer_(w,void 0)}),this.legacyMode_){var g=c.length-l;this.updateArrayLength_(p,g)}var v=this.spliceItemsIntoValues_(s,l,c);return(l!==0||c.length!==0)&&this.notifyArraySplice_(s,c,v),this.dehanceValues_(v)},n.spliceItemsIntoValues_=function(s,l,c){if(c.length<i5){var d;return(d=this.values_).splice.apply(d,[s,l].concat(c))}else{var p=this.values_.slice(s,s+l),h=this.values_.slice(s+l);this.values_.length+=c.length-l;for(var g=0;g<c.length;g++)this.values_[s+g]=c[g];for(var v=0;v<h.length;v++)this.values_[s+c.length+v]=h[v];return p}},n.notifyArrayChildUpdate_=function(s,l,c){var d=!this.owned_&&Mr(),p=K1(this),h=p||d?{observableKind:"array",object:this.proxy_,type:sr,debugObjectName:this.atom_.name_,index:s,newValue:l,oldValue:c}:null;this.atom_.reportChanged(),p&&X1(this,h)},n.notifyArraySplice_=function(s,l,c){var d=!this.owned_&&Mr(),p=K1(this),h=p||d?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:bl,index:s,removed:c,added:l,removedCount:c.length,addedCount:l.length}:null;this.atom_.reportChanged(),p&&X1(this,h)},n.get_=function(s){if(s<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[s]);console.warn("[mobx.array] Attempt to read an array index ("+s+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},n.set_=function(s,l){var c=this.values_;if(s<c.length){r1(this.atom_);var d=c[s];if(H1(this)){var p=k1(this,{type:sr,object:this.proxy_,index:s,newValue:l});if(!p)return;l=p.newValue}l=this.enhancer_(l,d);var h=l!==d;h&&(c[s]=l,this.notifyArrayChildUpdate_(s,l,d))}else s===c.length?this.spliceWithArray_(s,0,[l]):Y(17,s,c.length)},e}();function a5(e,n,o,s){o===void 0&&(o="ObservableArray"),s===void 0&&(s=!1),ce();var l=new Ys(o,n,s,!1);_t(l.values_,ge,l);var c=new Proxy(l.values_,s5);if(l.proxy_=c,e&&e.length){var d=Dt(!0);l.spliceWithArray_(0,0,e),b1(d)}return c}var ki={clear:function(){return this.splice(0)},replace:function(n){var o=this[ge];return o.spliceWithArray_(0,o.values_.length,n)},toJSON:function(){return this.slice()},splice:function(n,o){for(var s=arguments.length,l=new Array(s>2?s-2:0),c=2;c<s;c++)l[c-2]=arguments[c];var d=this[ge];switch(arguments.length){case 0:return[];case 1:return d.spliceWithArray_(n);case 2:return d.spliceWithArray_(n,o)}return d.spliceWithArray_(n,o,l)},spliceWithArray:function(n,o,s){return this[ge].spliceWithArray_(n,o,s)},push:function(){for(var n=this[ge],o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return n.spliceWithArray_(n.values_.length,0,s),n.values_.length},pop:function(){return this.splice(Math.max(this[ge].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var n=this[ge],o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return n.spliceWithArray_(0,0,s),n.values_.length},reverse:function(){return te.trackingDerivation&&Y(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){te.trackingDerivation&&Y(37,"sort");var n=this.slice();return n.sort.apply(n,arguments),this.replace(n),this},remove:function(n){var o=this[ge],s=o.dehanceValues_(o.values_).indexOf(n);return s>-1?(this.splice(s,1),!0):!1}};Zt("concat",Hr),Zt("flat",Hr),Zt("includes",Hr),Zt("indexOf",Hr),Zt("join",Hr),Zt("lastIndexOf",Hr),Zt("slice",Hr),Zt("toString",Hr),Zt("toLocaleString",Hr),Zt("every",Ur),Zt("filter",Ur),Zt("find",Ur),Zt("findIndex",Ur),Zt("flatMap",Ur),Zt("forEach",Ur),Zt("map",Ur),Zt("some",Ur),Zt("reduce",xl),Zt("reduceRight",xl);function Zt(e,n){typeof Array.prototype[e]=="function"&&(ki[e]=n(e))}function Hr(e){return function(){var n=this[ge];n.atom_.reportObserved();var o=n.dehanceValues_(n.values_);return o[e].apply(o,arguments)}}function Ur(e){return function(n,o){var s=this,l=this[ge];l.atom_.reportObserved();var c=l.dehanceValues_(l.values_);return c[e](function(d,p){return n.call(o,d,p,s)})}}function xl(e){return function(){var n=this,o=this[ge];o.atom_.reportObserved();var s=o.dehanceValues_(o.values_),l=arguments[0];return arguments[0]=function(c,d,p){return l(c,d,p,n)},s[e].apply(s,arguments)}}var l5=p1("ObservableArrayAdministration",Ys);function x1(e){return De(e)&&l5(e[ge])}var yl,El,c5={},Kr="add",Oi="delete";yl=Symbol.iterator,El=Symbol.toStringTag;var Ll=function(e,n){function o(l,c,d){var p=this;c===void 0&&(c=Tt),d===void 0&&(d="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[ge]=c5,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=c,this.name_=d,Ue(Map)||Y(18),this.keysAtom_=Qt("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,t1(!0,function(){p.merge(l)})}var s=o.prototype;return s.has_=function(c){return this.data_.has(c)},s.has=function(c){var d=this;if(!te.trackingDerivation)return this.has_(c);var p=this.hasMap_.get(c);if(!p){var h=p=new P1(this.has_(c),pt,"ObservableMap.key?",!1);this.hasMap_.set(c,h),$i(h,function(){return d.hasMap_.delete(c)})}return p.get()},s.set=function(c,d){var p=this.has_(c);if(H1(this)){var h=k1(this,{type:p?sr:Kr,object:this,newValue:d,name:c});if(!h)return this;d=h.newValue}return p?this.updateValue_(c,d):this.addValue_(c,d),this},s.delete=function(c){var d=this;if(r1(this.keysAtom_),H1(this)){var p=k1(this,{type:Oi,object:this,name:c});if(!p)return!1}if(this.has_(c)){var h=Mr(),g=K1(this),v=g||h?{observableKind:"map",debugObjectName:this.name_,type:Oi,object:this,oldValue:this.data_.get(c).value_,name:c}:null;return $r(function(){var w;d.keysAtom_.reportChanged(),(w=d.hasMap_.get(c))==null||w.setNewValue_(!1);var x=d.data_.get(c);x.setNewValue_(void 0),d.data_.delete(c)}),g&&X1(this,v),!0}return!1},s.updateValue_=function(c,d){var p=this.data_.get(c);if(d=p.prepareNewValue_(d),d!==te.UNCHANGED){var h=Mr(),g=K1(this),v=g||h?{observableKind:"map",debugObjectName:this.name_,type:sr,object:this,oldValue:p.value_,name:c,newValue:d}:null;p.setNewValue_(d),g&&X1(this,v)}},s.addValue_=function(c,d){var p=this;r1(this.keysAtom_),$r(function(){var w,x=new P1(d,p.enhancer_,"ObservableMap.key",!1);p.data_.set(c,x),d=x.value_,(w=p.hasMap_.get(c))==null||w.setNewValue_(!0),p.keysAtom_.reportChanged()});var h=Mr(),g=K1(this),v=g||h?{observableKind:"map",debugObjectName:this.name_,type:Kr,object:this,name:c,newValue:d}:null;g&&X1(this,v)},s.get=function(c){return this.has(c)?this.dehanceValue_(this.data_.get(c).get()):this.dehanceValue_(void 0)},s.dehanceValue_=function(c){return this.dehancer!==void 0?this.dehancer(c):c},s.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},s.values=function(){var c=this,d=this.keys();return Xo({next:function(){var h=d.next(),g=h.done,v=h.value;return{done:g,value:g?void 0:c.get(v)}}})},s.entries=function(){var c=this,d=this.keys();return Xo({next:function(){var h=d.next(),g=h.done,v=h.value;return{done:g,value:g?void 0:[v,c.get(v)]}}})},s[e]=function(){return this.entries()},s.forEach=function(c,d){for(var p=qt(this),h;!(h=p()).done;){var g=h.value,v=g[0],w=g[1];c.call(d,w,v,this)}},s.merge=function(c){var d=this;return l1(c)&&(c=new Map(c)),$r(function(){Le(c)?rn(c).forEach(function(p){return d.set(p,c[p])}):Array.isArray(c)?c.forEach(function(p){var h=p[0],g=p[1];return d.set(h,g)}):u1(c)?(c.constructor!==Map&&Y(19,c),c.forEach(function(p,h){return d.set(h,p)})):c!=null&&Y(20,c)}),this},s.clear=function(){var c=this;$r(function(){Tn(function(){for(var d=qt(c.keys()),p;!(p=d()).done;){var h=p.value;c.delete(h)}})})},s.replace=function(c){var d=this;return $r(function(){for(var p=d5(c),h=new Map,g=!1,v=qt(d.data_.keys()),w;!(w=v()).done;){var x=w.value;if(!p.has(x)){var y=d.delete(x);if(y)g=!0;else{var E=d.data_.get(x);h.set(x,E)}}}for(var R=qt(p.entries()),P;!(P=R()).done;){var $=P.value,I=$[0],B=$[1],j=d.data_.has(I);if(d.set(I,B),d.data_.has(I)){var T=d.data_.get(I);h.set(I,T),j||(g=!0)}}if(!g)if(d.data_.size!==h.size)d.keysAtom_.reportChanged();else for(var D=d.data_.keys(),A=h.keys(),X=D.next(),ne=A.next();!X.done;){if(X.value!==ne.value){d.keysAtom_.reportChanged();break}X=D.next(),ne=A.next()}d.data_=h}),this},s.toString=function(){return"[object ObservableMap]"},s.toJSON=function(){return Array.from(this)},s.observe_=function(c,d){return Uo(this,c)},s.intercept_=function(c){return No(this,c)},xr(o,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:n,get:function(){return"Map"}}]),o}(yl,El),l1=p1("ObservableMap",Ll);function d5(e){if(u1(e)||l1(e))return e;if(Array.isArray(e))return new Map(e);if(Le(e)){var n=new Map;for(var o in e)n.set(o,e[o]);return n}else return Y(21,e)}var Sl,Rl,u5={};Sl=Symbol.iterator,Rl=Symbol.toStringTag;var Il=function(e,n){function o(l,c,d){c===void 0&&(c=Tt),d===void 0&&(d="ObservableSet"),this.name_=void 0,this[ge]=u5,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=d,Ue(Set)||Y(22),this.atom_=Qt(this.name_),this.enhancer_=function(p,h){return c(p,h,d)},l&&this.replace(l)}var s=o.prototype;return s.dehanceValue_=function(c){return this.dehancer!==void 0?this.dehancer(c):c},s.clear=function(){var c=this;$r(function(){Tn(function(){for(var d=qt(c.data_.values()),p;!(p=d()).done;){var h=p.value;c.delete(h)}})})},s.forEach=function(c,d){for(var p=qt(this),h;!(h=p()).done;){var g=h.value;c.call(d,g,g,this)}},s.add=function(c){var d=this;if(r1(this.atom_),H1(this)){var p=k1(this,{type:Kr,object:this,newValue:c});if(!p)return this}if(!this.has(c)){$r(function(){d.data_.add(d.enhancer_(c,void 0)),d.atom_.reportChanged()});var h=!1,g=K1(this),v=g||h?{observableKind:"set",debugObjectName:this.name_,type:Kr,object:this,newValue:c}:null;g&&X1(this,v)}return this},s.delete=function(c){var d=this;if(H1(this)){var p=k1(this,{type:Oi,object:this,oldValue:c});if(!p)return!1}if(this.has(c)){var h=!1,g=K1(this),v=g||h?{observableKind:"set",debugObjectName:this.name_,type:Oi,object:this,oldValue:c}:null;return $r(function(){d.atom_.reportChanged(),d.data_.delete(c)}),g&&X1(this,v),!0}return!1},s.has=function(c){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(c))},s.entries=function(){var c=0,d=Array.from(this.keys()),p=Array.from(this.values());return Xo({next:function(){var g=c;return c+=1,g<p.length?{value:[d[g],p[g]],done:!1}:{done:!0}}})},s.keys=function(){return this.values()},s.values=function(){this.atom_.reportObserved();var c=this,d=0,p=Array.from(this.data_.values());return Xo({next:function(){return d<p.length?{value:c.dehanceValue_(p[d++]),done:!1}:{done:!0}}})},s.replace=function(c){var d=this;return v1(c)&&(c=new Set(c)),$r(function(){Array.isArray(c)?(d.clear(),c.forEach(function(p){return d.add(p)})):Z1(c)?(d.clear(),c.forEach(function(p){return d.add(p)})):c!=null&&Y("Cannot initialize set from "+c)}),this},s.observe_=function(c,d){return Uo(this,c)},s.intercept_=function(c){return No(this,c)},s.toJSON=function(){return Array.from(this)},s.toString=function(){return"[object ObservableSet]"},s[e]=function(){return this.values()},xr(o,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:n,get:function(){return"Set"}}]),o}(Sl,Rl),v1=p1("ObservableSet",Il),Ml=Object.create(null),Pl="remove",$l=function(){function e(o,s,l,c){s===void 0&&(s=new Map),c===void 0&&(c=In),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=o,this.values_=s,this.name_=l,this.defaultAnnotation_=c,this.keysAtom_=new ut("ObservableObject.keys"),this.isPlainObject_=Le(this.target_)}var n=e.prototype;return n.getObservablePropValue_=function(s){return this.values_.get(s).get()},n.setObservablePropValue_=function(s,l){var c=this.values_.get(s);if(c instanceof Fr)return c.set(l),!0;if(H1(this)){var d=k1(this,{type:sr,object:this.proxy_||this.target_,name:s,newValue:l});if(!d)return null;l=d.newValue}if(l=c.prepareNewValue_(l),l!==te.UNCHANGED){var p=K1(this),h=!1,g=p||h?{type:sr,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:c.value_,name:s,newValue:l}:null;c.setNewValue_(l),p&&X1(this,g)}return!0},n.get_=function(s){return te.trackingDerivation&&!Yt(this.target_,s)&&this.has_(s),this.target_[s]},n.set_=function(s,l,c){return c===void 0&&(c=!1),Yt(this.target_,s)?this.values_.has(s)?this.setObservablePropValue_(s,l):c?Reflect.set(this.target_,s,l):(this.target_[s]=l,!0):this.extend_(s,{value:l,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,c)},n.has_=function(s){if(!te.trackingDerivation)return s in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var l=this.pendingKeys_.get(s);return l||(l=new P1(s in this.target_,pt,"ObservableObject.key?",!1),this.pendingKeys_.set(s,l)),l.get()},n.make_=function(s,l){if(l===!0&&(l=this.defaultAnnotation_),l!==!1){if(Ol(this,l,s),!(s in this.target_)){var c;if((c=this.target_[He])!=null&&c[s])return;Y(1,l.annotationType_,this.name_+"."+s.toString())}for(var d=this.target_;d&&d!==we;){var p=_e(d,s);if(p){var h=l.make_(this,s,p,d);if(h===0)return;if(h===1)break}d=Object.getPrototypeOf(d)}kl(this,l,s)}},n.extend_=function(s,l,c,d){if(d===void 0&&(d=!1),c===!0&&(c=this.defaultAnnotation_),c===!1)return this.defineProperty_(s,l,d);Ol(this,c,s);var p=c.extend_(this,s,l,d);return p&&kl(this,c,s),p},n.defineProperty_=function(s,l,c){c===void 0&&(c=!1);try{Ut();var d=this.delete_(s);if(!d)return d;if(H1(this)){var p=k1(this,{object:this.proxy_||this.target_,name:s,type:Kr,newValue:l.value});if(!p)return null;var h=p.newValue;l.value!==h&&(l=Ht({},l,{value:h}))}if(c){if(!Reflect.defineProperty(this.target_,s,l))return!1}else pe(this.target_,s,l);this.notifyPropertyAddition_(s,l.value)}finally{Kt()}return!0},n.defineObservableProperty_=function(s,l,c,d){d===void 0&&(d=!1);try{Ut();var p=this.delete_(s);if(!p)return p;if(H1(this)){var h=k1(this,{object:this.proxy_||this.target_,name:s,type:Kr,newValue:l});if(!h)return null;l=h.newValue}var g=Hl(s),v={configurable:te.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:g.get,set:g.set};if(d){if(!Reflect.defineProperty(this.target_,s,v))return!1}else pe(this.target_,s,v);var w=new P1(l,c,"ObservableObject.key",!1);this.values_.set(s,w),this.notifyPropertyAddition_(s,w.value_)}finally{Kt()}return!0},n.defineComputedProperty_=function(s,l,c){c===void 0&&(c=!1);try{Ut();var d=this.delete_(s);if(!d)return d;if(H1(this)){var p=k1(this,{object:this.proxy_||this.target_,name:s,type:Kr,newValue:void 0});if(!p)return null}l.name||(l.name="ObservableObject.key"),l.context=this.proxy_||this.target_;var h=Hl(s),g={configurable:te.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:h.get,set:h.set};if(c){if(!Reflect.defineProperty(this.target_,s,g))return!1}else pe(this.target_,s,g);this.values_.set(s,new Fr(l)),this.notifyPropertyAddition_(s,void 0)}finally{Kt()}return!0},n.delete_=function(s,l){if(l===void 0&&(l=!1),!Yt(this.target_,s))return!0;if(H1(this)){var c=k1(this,{object:this.proxy_||this.target_,name:s,type:Pl});if(!c)return null}try{var d,p;Ut();var h=K1(this),g=!1,v=this.values_.get(s),w=void 0;if(!v&&(h||g)){var x;w=(x=_e(this.target_,s))==null?void 0:x.value}if(l){if(!Reflect.deleteProperty(this.target_,s))return!1}else delete this.target_[s];if(v&&(this.values_.delete(s),v instanceof P1&&(w=v.value_),_i(v)),this.keysAtom_.reportChanged(),(d=this.pendingKeys_)==null||(p=d.get(s))==null||p.set(s in this.target_),h||g){var y={type:Pl,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:w,name:s};h&&X1(this,y)}}finally{Kt()}return!0},n.observe_=function(s,l){return Uo(this,s)},n.intercept_=function(s){return No(this,s)},n.notifyPropertyAddition_=function(s,l){var c,d,p=K1(this),h=!1;if(p||h){var g=p||h?{type:Kr,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:s,newValue:l}:null;p&&X1(this,g)}(c=this.pendingKeys_)==null||(d=c.get(s))==null||d.set(!0),this.keysAtom_.reportChanged()},n.ownKeys_=function(){return this.keysAtom_.reportObserved(),I1(this.target_)},n.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Ko(e,n){var o;if(Yt(e,ge))return e;var s=(o=n?.name)!=null?o:"ObservableObject",l=new $l(e,new Map,String(s),N(n));return Oe(e,ge,l),e}var f5=p1("ObservableObjectAdministration",$l);function Hl(e){return Ml[e]||(Ml[e]={get:function(){return this[ge].getObservablePropValue_(e)},set:function(o){return this[ge].setObservablePropValue_(e,o)}})}function c1(e){return De(e)?f5(e[ge]):!1}function kl(e,n,o){var s;(s=e.target_[He])==null||delete s[o]}function Ol(e,n,o){if(!1)var s,l,c}var qs=0,Tl=function(){};function h5(e,n){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,n):e.prototype.__proto__!==void 0?e.prototype.__proto__=n:e.prototype=n}h5(Tl,Array.prototype);var Js=function(e,n,o){yr(s,e);function s(c,d,p,h){var g;p===void 0&&(p="ObservableArray"),h===void 0&&(h=!1),g=e.call(this)||this;var v=new Ys(p,d,h,!0);if(v.proxy_=Et(g),_t(Et(g),ge,v),c&&c.length){var w=Dt(!0);g.spliceWithArray(0,0,c),b1(w)}return g}var l=s.prototype;return l.concat=function(){this[ge].atom_.reportObserved();for(var d=arguments.length,p=new Array(d),h=0;h<d;h++)p[h]=arguments[h];return Array.prototype.concat.apply(this.slice(),p.map(function(g){return x1(g)?g.slice():g}))},l[o]=function(){var c=this,d=0;return Xo({next:function(){return d<c.length?{value:c[d++],done:!1}:{done:!0,value:void 0}}})},xr(s,[{key:"length",get:function(){return this[ge].getArrayLength_()},set:function(d){this[ge].setArrayLength_(d)}},{key:n,get:function(){return"Array"}}]),s}(Tl,Symbol.toStringTag,Symbol.iterator);Object.entries(ki).forEach(function(e){var n=e[0],o=e[1];n!=="concat"&&Oe(Js.prototype,n,o)});function p5(e){return{enumerable:!1,configurable:!0,get:function(){return this[ge].get_(e)},set:function(o){this[ge].set_(e,o)}}}function g5(e){pe(Js.prototype,""+e,p5(e))}function Bl(e){if(e>qs){for(var n=qs;n<e+100;n++)g5(n);qs=e}}Bl(1e3);function v5(e,n,o){return new Js(e,n,o)}function ar(e,n){if(typeof e=="object"&&e!==null){if(x1(e))return n!==void 0&&Y(23),e[ge].atom_;if(v1(e))return e[ge];if(l1(e)){if(n===void 0)return e.keysAtom_;var o=e.data_.get(n)||e.hasMap_.get(n);return o||Y(25,n,Qs(e)),o}if(c1(e)){if(!n)return Y(26);var s=e[ge].values_.get(n);return s||Y(27,n,Qs(e)),s}if(Jt(e)||Rr(e)||Dn(e))return e}else if(Ue(e)&&Dn(e[ge]))return e[ge];Y(28)}function Xr(e,n){if(e||Y(29),n!==void 0)return Xr(ar(e,n));if(Jt(e)||Rr(e)||Dn(e)||l1(e)||v1(e))return e;if(e[ge])return e[ge];Y(24,e)}function Qs(e,n){var o;if(n!==void 0)o=ar(e,n);else{if(Wn(e))return e.name;c1(e)||l1(e)||v1(e)?o=Xr(e):o=ar(e)}return o.name_}var Vl=we.toString;function ea(e,n,o){return o===void 0&&(o=-1),ta(e,n,o)}function ta(e,n,o,s,l){if(e===n)return e!==0||1/e===1/n;if(e==null||n==null)return!1;if(e!==e)return n!==n;var c=typeof e;if(c!=="function"&&c!=="object"&&typeof n!="object")return!1;var d=Vl.call(e);if(d!==Vl.call(n))return!1;switch(d){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:+e==0?1/+e===1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(n);case"[object Map]":case"[object Set]":o>=0&&o++;break}e=jl(e),n=jl(n);var p=d==="[object Array]";if(!p){if(typeof e!="object"||typeof n!="object")return!1;var h=e.constructor,g=n.constructor;if(h!==g&&!(Ue(h)&&h instanceof h&&Ue(g)&&g instanceof g)&&"constructor"in e&&"constructor"in n)return!1}if(o===0)return!1;o<0&&(o=-1),s=s||[],l=l||[];for(var v=s.length;v--;)if(s[v]===e)return l[v]===n;if(s.push(e),l.push(n),p){if(v=e.length,v!==n.length)return!1;for(;v--;)if(!ta(e[v],n[v],o-1,s,l))return!1}else{var w=Object.keys(e),x;if(v=w.length,Object.keys(n).length!==v)return!1;for(;v--;)if(x=w[v],!(Yt(n,x)&&ta(e[x],n[x],o-1,s,l)))return!1}return s.pop(),l.pop(),!0}function jl(e){return x1(e)?e.slice():u1(e)||l1(e)||Z1(e)||v1(e)?Array.from(e.entries()):e}function Xo(e){return e[Symbol.iterator]=C5,e}function C5(){return this}function fp(e){return e instanceof Object&&typeof e.annotationType_=="string"&&Ue(e.make_)&&Ue(e.extend_)}if(["Symbol","Map","Set"].forEach(function(e){var n=Pe();typeof n[e]>"u"&&Y("MobX requires global '"+e+"' to be available or polyfilled")}),typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Ts,extras:{getDebugName:Qs},$mobx:ge}),!f.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!o5)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var m5=V(9004);function _5(e){e()}function w5(e){e||(e=_5),C({reactionScheduler:e})}var hp=function(){return!0};function b5(e){return S(e)}var Al=typeof FinalizationRegistry>"u"?void 0:FinalizationRegistry;function Dl(e){var n={reaction:e,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+x5};return n}var x5=1e4,y5=1e4;function E5(e){var n=new Map,o=1,s=new e(function(c){var d=n.get(c);d&&(d.reaction.dispose(),n.delete(c))});return{addReactionToTrack:function(l,c,d){var p=o++;return s.register(d,p,l),l.current=Dl(c),l.current.finalizationRegistryCleanupToken=p,n.set(p,l.current),l.current},recordReactionAsCommitted:function(l){s.unregister(l),l.current&&l.current.finalizationRegistryCleanupToken&&n.delete(l.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}var L5=function(e){var n=typeof Symbol=="function"&&Symbol.iterator,o=n&&e[n],s=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};function S5(){var e=new Set,n;function o(){n&&(clearTimeout(n),p())}function s(){var h,g;if(e.size>0){try{for(var v=L5(e),w=v.next();!w.done;w=v.next()){var x=w.value,y=x.current;y&&(y.reaction.dispose(),x.current=null)}}catch(E){h={error:E}}finally{try{w&&!w.done&&(g=v.return)&&g.call(v)}finally{if(h)throw h.error}}e.clear()}n&&(clearTimeout(n),n=void 0)}function l(){n===void 0&&(n=setTimeout(p,y5))}function c(h){e.add(h),l()}function d(h){e.delete(h)}function p(){n=void 0;var h=Date.now();e.forEach(function(g){var v=g.current;v&&h>=v.cleanAt&&(v.reaction.dispose(),g.current=null,e.delete(g))}),e.size>0&&l()}return{addReactionToTrack:function(h,g,v){return h.current=Dl(g),c(h),h.current},recordReactionAsCommitted:d,forceCleanupTimerToRunNowForTests:o,resetCleanupScheduleForTests:s}}var Ti=Al?E5(Al):S5(),R5=Ti.addReactionToTrack,I5=Ti.recordReactionAsCommitted,pp=Ti.resetCleanupScheduleForTests,gp=Ti.forceCleanupTimerToRunNowForTests,Zl=!1;function vp(e){Zl=e}function zl(){return Zl}var Wl=function(e,n){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),l,c=[],d;try{for(;(n===void 0||n-- >0)&&!(l=s.next()).done;)c.push(l.value)}catch(p){d={error:p}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(d)throw d.error}}return c};function Fl(e){return"observer".concat(e)}var M5=function(){function e(){}return e}();function P5(){return new M5}function Nl(e,n){if(n===void 0&&(n="observed"),zl())return e();var o=Wl(f.useState(P5),1),s=o[0],l=Wl(f.useState(),2),c=l[1],d=function(){return c([])},p=f.useRef(null);if(!p.current)var h=new g1(Fl(n),function(){g.mounted?d():g.changedBeforeMount=!0}),g=R5(p,h,s);var v=p.current.reaction;f.useDebugValue(v,b5),f.useEffect(function(){return I5(p),p.current?(p.current.mounted=!0,p.current.changedBeforeMount&&(p.current.changedBeforeMount=!1,d())):(p.current={reaction:new g1(Fl(n),function(){d()}),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},d()),function(){p.current.reaction.dispose(),p.current=null}},[]);var w,x;if(v.track(function(){try{w=e()}catch(y){x=y}}),x)throw x;return w}var Cp=!0,Ul=typeof Symbol=="function"&&Symbol.for,Kl=Ul?Symbol.for("react.forward_ref"):typeof f.forwardRef=="function"&&(0,f.forwardRef)(function(e){return null}).$$typeof,Xl=Ul?Symbol.for("react.memo"):typeof f.memo=="function"&&(0,f.memo)(function(e){return null}).$$typeof;function $t(e,n){var o;if(Xl&&e.$$typeof===Xl)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if(zl())return e;var s=(o=n?.forwardRef)!==null&&o!==void 0?o:!1,l=e,c=e.displayName||e.name;if(Kl&&e.$$typeof===Kl&&(s=!0,l=e.render,typeof l!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var d=function(p,h){return Nl(function(){return l(p,h)},c)};return c!==""&&(d.displayName=c),e.contextTypes&&(d.contextTypes=e.contextTypes),s&&(d=(0,f.forwardRef)(d)),d=(0,f.memo)(d),H5(e,d),d}var $5={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function H5(e,n){Object.keys(e).forEach(function(o){$5[o]||Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(e,o))})}function ra(e){var n=e.children,o=e.render,s=n||o;return typeof s!="function"?null:Nl(s)}ra.displayName="Observer";function mp(e,n,o,s,l){var c=n==="children"?"render":"children",d=typeof e[n]=="function",p=typeof e[c]=="function";return d&&p?new Error("MobX Observer: Do not use children and render in the same time in`"+o):d||p?null:new Error("Invalid prop `"+l+"` of type `"+typeof e[n]+"` supplied to `"+o+"`, expected `function`.")}function _p(e,n){return useState(function(){return observable(e(),n,{autoBind:!0})})[0]}var k5=function(e,n){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),l,c=[],d;try{for(;(n===void 0||n-- >0)&&!(l=s.next()).done;)c.push(l.value)}catch(p){d={error:p}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(d)throw d.error}}return c};function wp(e){var n=k5(useState(function(){return observable(e,{},{deep:!1})}),1),o=n[0];return runInAction(function(){Object.assign(o,e)}),o}function bp(e,n){var o=n&&useAsObservableSource(n);return useState(function(){return observable(e(o),void 0,{autoBind:!0})})[0]}w5(m5.unstable_batchedUpdates);function xp(e,n){return n===void 0&&(n="observed"),useObserverOriginal(e,n)}function yp(e){enableStaticRendering(e)}function O5(e,n,o){return Math.max(n,Math.min(e,o))}const xt={toVector(e,n){return e===void 0&&(e=n),Array.isArray(e)?e:[e,e]},add(e,n){return[e[0]+n[0],e[1]+n[1]]},sub(e,n){return[e[0]-n[0],e[1]-n[1]]},addTo(e,n){e[0]+=n[0],e[1]+=n[1]},subTo(e,n){e[0]-=n[0],e[1]-=n[1]}};function Gl(e,n,o){return n===0||Math.abs(n)===1/0?Math.pow(e,o*5):e*n*o/(n+o*e)}function Yl(e,n,o,s=.15){return s===0?O5(e,n,o):e<n?-Gl(n-e,o-n,s)+n:e>o?+Gl(e-o,o-n,s)+o:e}function T5(e,[n,o],[s,l]){const[[c,d],[p,h]]=e;return[Yl(n,c,d,s),Yl(o,p,h,l)]}function Vt(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function ql(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),o.push.apply(o,s)}return o}function Pt(e){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?ql(Object(o),!0).forEach(function(s){Vt(e,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ql(Object(o)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(o,s))})}return e}const Jl={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Ql(e){return e?e[0].toUpperCase()+e.slice(1):""}const B5=["enter","leave"];function V5(e=!1,n){return e&&!B5.includes(n)}function j5(e,n="",o=!1){const s=Jl[e],l=s&&s[n]||n;return"on"+Ql(e)+Ql(l)+(V5(o,l)?"Capture":"")}const A5=["gotpointercapture","lostpointercapture"];function D5(e){let n=e.substring(2).toLowerCase();const o=!!~n.indexOf("passive");o&&(n=n.replace("passive",""));const s=A5.includes(n)?"capturecapture":"capture",l=!!~n.indexOf(s);return l&&(n=n.replace("capture","")),{device:n,capture:l,passive:o}}function Z5(e,n=""){const o=Jl[e],s=o&&o[n]||n;return e+s}function Bi(e){return"touches"in e}function e0(e){return Bi(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function z5(e){return Array.from(e.touches).filter(n=>{var o,s;return n.target===e.currentTarget||((o=e.currentTarget)===null||o===void 0||(s=o.contains)===null||s===void 0?void 0:s.call(o,n.target))})}function W5(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function t0(e){return Bi(e)?W5(e)[0]:e}function na(e,n){const o=n.clientX-e.clientX,s=n.clientY-e.clientY,l=(n.clientX+e.clientX)/2,c=(n.clientY+e.clientY)/2,d=Math.hypot(o,s);return{angle:-(Math.atan2(o,s)*180)/Math.PI,distance:d,origin:[l,c]}}function F5(e){return z5(e).map(n=>n.identifier)}function r0(e,n){const[o,s]=Array.from(e.touches).filter(l=>n.includes(l.identifier));return na(o,s)}function oa(e){const n=t0(e);return Bi(e)?n.identifier:n.pointerId}function Yn(e){const n=t0(e);return[n.clientX,n.clientY]}const n0=40,o0=800;function i0(e){let{deltaX:n,deltaY:o,deltaMode:s}=e;return s===1?(n*=n0,o*=n0):s===2&&(n*=o0,o*=o0),[n,o]}function N5(e){var n,o;const{scrollX:s,scrollY:l,scrollLeft:c,scrollTop:d}=e.currentTarget;return[(n=s??c)!==null&&n!==void 0?n:0,(o=l??d)!==null&&o!==void 0?o:0]}function U5(e){const n={};if("buttons"in e&&(n.buttons=e.buttons),"shiftKey"in e){const{shiftKey:o,altKey:s,metaKey:l,ctrlKey:c}=e;Object.assign(n,{shiftKey:o,altKey:s,metaKey:l,ctrlKey:c})}return n}function Vi(e,...n){return typeof e=="function"?e(...n):e}function K5(){}function X5(...e){return e.length===0?K5:e.length===1?e[0]:function(){let n;for(const o of e)n=o.apply(this,arguments)||n;return n}}function s0(e,n){return Object.assign({},n,e||{})}const G5=32;class a0{constructor(n,o,s){this.ctrl=n,this.args=o,this.key=s,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(n){this.ctrl.state[this.key]=n}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:n,shared:o,ingKey:s,args:l}=this;o[s]=n._active=n.active=n._blocked=n._force=!1,n._step=[!1,!1],n.intentional=!1,n._movement=[0,0],n._distance=[0,0],n._direction=[0,0],n._delta=[0,0],n._bounds=[[-1/0,1/0],[-1/0,1/0]],n.args=l,n.axis=void 0,n.memo=void 0,n.elapsedTime=0,n.direction=[0,0],n.distance=[0,0],n.overflow=[0,0],n._movementBound=[!1,!1],n.velocity=[0,0],n.movement=[0,0],n.delta=[0,0],n.timeStamp=0}start(n){const o=this.state,s=this.config;o._active||(this.reset(),this.computeInitial(),o._active=!0,o.target=n.target,o.currentTarget=n.currentTarget,o.lastOffset=s.from?Vi(s.from,o):o.offset,o.offset=o.lastOffset),o.startTime=o.timeStamp=n.timeStamp}computeValues(n){const o=this.state;o._values=n,o.values=this.config.transform(n)}computeInitial(){const n=this.state;n._initial=n._values,n.initial=n.values}compute(n){const{state:o,config:s,shared:l}=this;o.args=this.args;let c=0;if(n&&(o.event=n,s.preventDefault&&n.cancelable&&o.event.preventDefault(),o.type=n.type,l.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,l.locked=!!document.pointerLockElement,Object.assign(l,U5(n)),l.down=l.pressed=l.buttons%2===1||l.touches>0,c=n.timeStamp-o.timeStamp,o.timeStamp=n.timeStamp,o.elapsedTime=o.timeStamp-o.startTime),o._active){const D=o._delta.map(Math.abs);xt.addTo(o._distance,D)}this.axisIntent&&this.axisIntent(n);const[d,p]=o._movement,[h,g]=s.threshold,{_step:v,values:w}=o;if(s.hasCustomTransform?(v[0]===!1&&(v[0]=Math.abs(d)>=h&&w[0]),v[1]===!1&&(v[1]=Math.abs(p)>=g&&w[1])):(v[0]===!1&&(v[0]=Math.abs(d)>=h&&Math.sign(d)*h),v[1]===!1&&(v[1]=Math.abs(p)>=g&&Math.sign(p)*g)),o.intentional=v[0]!==!1||v[1]!==!1,!o.intentional)return;const x=[0,0];if(s.hasCustomTransform){const[D,A]=w;x[0]=v[0]!==!1?D-v[0]:0,x[1]=v[1]!==!1?A-v[1]:0}else x[0]=v[0]!==!1?d-v[0]:0,x[1]=v[1]!==!1?p-v[1]:0;this.restrictToAxis&&!o._blocked&&this.restrictToAxis(x);const y=o.offset,E=o._active&&!o._blocked||o.active;E&&(o.first=o._active&&!o.active,o.last=!o._active&&o.active,o.active=l[this.ingKey]=o._active,n&&(o.first&&("bounds"in s&&(o._bounds=Vi(s.bounds,o)),this.setup&&this.setup()),o.movement=x,this.computeOffset()));const[R,P]=o.offset,[[$,I],[B,j]]=o._bounds;o.overflow=[R<$?-1:R>I?1:0,P<B?-1:P>j?1:0],o._movementBound[0]=o.overflow[0]?o._movementBound[0]===!1?o._movement[0]:o._movementBound[0]:!1,o._movementBound[1]=o.overflow[1]?o._movementBound[1]===!1?o._movement[1]:o._movementBound[1]:!1;const T=o._active?s.rubberband||[0,0]:[0,0];if(o.offset=T5(o._bounds,o.offset,T),o.delta=xt.sub(o.offset,y),this.computeMovement(),E&&(!o.last||c>G5)){o.delta=xt.sub(o.offset,y);const D=o.delta.map(Math.abs);xt.addTo(o.distance,D),o.direction=o.delta.map(Math.sign),o._direction=o._delta.map(Math.sign),!o.first&&c>0&&(o.velocity=[D[0]/c,D[1]/c])}}emit(){const n=this.state,o=this.shared,s=this.config;if(n._active||this.clean(),(n._blocked||!n.intentional)&&!n._force&&!s.triggerAllEvents)return;const l=this.handler(Pt(Pt(Pt({},o),n),{},{[this.aliasKey]:n.values}));l!==void 0&&(n.memo=l)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Y5([e,n],o){const s=Math.abs(e),l=Math.abs(n);if(s>l&&s>o)return"x";if(l>s&&l>o)return"y"}class Go extends a0{constructor(...n){super(...n),Vt(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=xt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=xt.sub(this.state.offset,this.state.lastOffset)}axisIntent(n){const o=this.state,s=this.config;if(!o.axis&&n){const l=typeof s.axisThreshold=="object"?s.axisThreshold[e0(n)]:s.axisThreshold;o.axis=Y5(o._movement,l)}o._blocked=(s.lockDirection||!!s.axis)&&!o.axis||!!s.axis&&s.axis!==o.axis}restrictToAxis(n){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":n[1]=0;break;case"y":n[0]=0;break}}}const q5=e=>e,l0=.15,c0={enabled(e=!0){return e},eventOptions(e,n,o){return Pt(Pt({},o.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[l0,l0];case!1:return[0,0];default:return xt.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return xt.toVector(e)},transform(e,n,o){const s=e||o.shared.transform;return this.hasCustomTransform=!!s,s||q5},threshold(e){return xt.toVector(e,0)}},J5=0,gn=Pt(Pt({},c0),{},{axis(e,n,{axis:o}){if(this.lockDirection=o==="lock",!this.lockDirection)return o},axisThreshold(e=J5){return e},bounds(e={}){if(typeof e=="function")return c=>gn.bounds(e(c));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:n=-1/0,right:o=1/0,top:s=-1/0,bottom:l=1/0}=e;return[[n,o],[s,l]]}}),ji=10,d0={ArrowRight:(e=1)=>[ji*e,0],ArrowLeft:(e=1)=>[-ji*e,0],ArrowUp:(e=1)=>[0,-ji*e],ArrowDown:(e=1)=>[0,ji*e]};class Q5 extends Go{constructor(...n){super(...n),Vt(this,"ingKey","dragging")}reset(){super.reset();const n=this.state;n._pointerId=void 0,n._pointerActive=!1,n._keyboardActive=!1,n._preventScroll=!1,n._delayed=!1,n.swipe=[0,0],n.tap=!1,n.canceled=!1,n.cancel=this.cancel.bind(this)}setup(){const n=this.state;if(n._bounds instanceof HTMLElement){const o=n._bounds.getBoundingClientRect(),s=n.currentTarget.getBoundingClientRect(),l={left:o.left-s.left+n.offset[0],right:o.right-s.right+n.offset[0],top:o.top-s.top+n.offset[1],bottom:o.bottom-s.bottom+n.offset[1]};n._bounds=gn.bounds(l)}}cancel(){const n=this.state;n.canceled||(n.canceled=!0,n._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(n){const o=this.config,s=this.state;if(n.buttons!=null&&(Array.isArray(o.pointerButtons)?!o.pointerButtons.includes(n.buttons):o.pointerButtons!==-1&&o.pointerButtons!==n.buttons))return;const l=this.ctrl.setEventIds(n);o.pointerCapture&&n.target.setPointerCapture(n.pointerId),!(l&&l.size>1&&s._pointerActive)&&(this.start(n),this.setupPointer(n),s._pointerId=oa(n),s._pointerActive=!0,this.computeValues(Yn(n)),this.computeInitial(),o.preventScrollAxis&&e0(n)!=="mouse"?(s._active=!1,this.setupScrollPrevention(n)):o.delay>0?(this.setupDelayTrigger(n),o.triggerAllEvents&&(this.compute(n),this.emit())):this.startPointerDrag(n))}startPointerDrag(n){const o=this.state;o._active=!0,o._preventScroll=!0,o._delayed=!1,this.compute(n),this.emit()}pointerMove(n){const o=this.state,s=this.config;if(!o._pointerActive||o.type===n.type&&n.timeStamp===o.timeStamp)return;const l=oa(n);if(o._pointerId!==void 0&&l!==o._pointerId)return;const c=Yn(n);if(document.pointerLockElement===n.target?o._delta=[n.movementX,n.movementY]:(o._delta=xt.sub(c,o._values),this.computeValues(c)),xt.addTo(o._movement,o._delta),this.compute(n),o._delayed&&o.intentional){this.timeoutStore.remove("dragDelay"),o.active=!1,this.startPointerDrag(n);return}if(s.preventScrollAxis&&!o._preventScroll)if(o.axis)if(o.axis===s.preventScrollAxis||s.preventScrollAxis==="xy"){o._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(n);return}else return;this.emit()}pointerUp(n){this.ctrl.setEventIds(n);try{this.config.pointerCapture&&n.target.hasPointerCapture(n.pointerId)&&n.target.releasePointerCapture(n.pointerId)}catch{}const o=this.state,s=this.config;if(!o._active||!o._pointerActive)return;const l=oa(n);if(o._pointerId!==void 0&&l!==o._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(n);const[c,d]=o._distance;if(o.tap=c<=s.tapsThreshold&&d<=s.tapsThreshold,o.tap&&s.filterTaps)o._force=!0;else{const[p,h]=o.direction,[g,v]=o.velocity,[w,x]=o.movement,[y,E]=s.swipe.velocity,[R,P]=s.swipe.distance,$=s.swipe.duration;o.elapsedTime<$&&(Math.abs(g)>y&&Math.abs(w)>R&&(o.swipe[0]=p),Math.abs(v)>E&&Math.abs(x)>P&&(o.swipe[1]=h))}this.emit()}pointerClick(n){this.state.tap||(n.preventDefault(),n.stopPropagation())}setupPointer(n){const o=this.config,s=o.device;o.pointerLock&&n.currentTarget.requestPointerLock(),o.pointerCapture||(this.eventStore.add(this.sharedConfig.window,s,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(n){this.state._preventScroll&&n.cancelable&&n.preventDefault()}setupScrollPrevention(n){this.state._preventScroll=!1,ec(n);const o=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",o),this.eventStore.add(this.sharedConfig.window,"touch","cancel",o),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,n)}setupDelayTrigger(n){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(n)},this.config.delay)}keyDown(n){const o=d0[n.key];if(o){const s=this.state,l=n.shiftKey?10:n.altKey?.1:1;this.start(n),s._delta=o(l),s._keyboardActive=!0,xt.addTo(s._movement,s._delta),this.compute(n),this.emit()}}keyUp(n){n.key in d0&&(this.state._keyboardActive=!1,this.setActive(),this.compute(n),this.emit())}bind(n){const o=this.config.device;n(o,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(n(o,"change",this.pointerMove.bind(this)),n(o,"end",this.pointerUp.bind(this)),n(o,"cancel",this.pointerUp.bind(this)),n("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(n("key","down",this.keyDown.bind(this)),n("key","up",this.keyUp.bind(this))),this.config.filterTaps&&n("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function ec(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const Yo=typeof window<"u"&&window.document&&window.document.createElement;function tc(){return Yo&&"ontouchstart"in window}function u0(){return tc()||Yo&&window.navigator.maxTouchPoints>1}function rc(){return Yo&&"onpointerdown"in window}function nc(){return Yo&&"exitPointerLock"in window.document}function oc(){try{return"constructor"in GestureEvent}catch{return!1}}const O1={isBrowser:Yo,gesture:oc(),touch:u0(),touchscreen:u0(),pointer:rc(),pointerLock:nc()},ic=250,sc=180,ac=.5,lc=50,cc=250,f0={mouse:0,touch:0,pen:8},dc=Pt(Pt({},gn),{},{device(e,n,{pointer:{touch:o=!1,lock:s=!1,mouse:l=!1}={}}){return this.pointerLock=s&&O1.pointerLock,O1.touch&&o?"touch":this.pointerLock?"mouse":O1.pointer&&!l?"pointer":O1.touch?"touch":"mouse"},preventScrollAxis(e,n,{preventScroll:o}){if(this.preventScrollDelay=typeof o=="number"?o:o||o===void 0&&e?ic:void 0,!(!O1.touchscreen||o===!1))return e||(o!==void 0?"y":void 0)},pointerCapture(e,n,{pointer:{capture:o=!0,buttons:s=1}={}}){return this.pointerButtons=s,!this.pointerLock&&this.device==="pointer"&&o},keys(e=!0){return e},threshold(e,n,{filterTaps:o=!1,tapsThreshold:s=3,axis:l=void 0}){const c=xt.toVector(e,o?s:l?1:0);return this.filterTaps=o,this.tapsThreshold=s,c},swipe({velocity:e=ac,distance:n=lc,duration:o=cc}={}){return{velocity:this.transform(xt.toVector(e)),distance:this.transform(xt.toVector(n)),duration:o}},delay(e=0){switch(e){case!0:return sc;case!1:return 0;default:return e}},axisThreshold(e){return e?Pt(Pt({},f0),e):f0}}),uc=30,fc=100;class hc extends a0{constructor(...n){super(...n),Vt(this,"ingKey","pinching"),Vt(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const n=this.state;n._touchIds=[],n.canceled=!1,n.cancel=this.cancel.bind(this),n.turns=0}computeOffset(){const{type:n,movement:o,lastOffset:s}=this.state;n==="wheel"?this.state.offset=xt.add(o,s):this.state.offset=[(1+o[0])*s[0],o[1]+s[1]]}computeMovement(){const{offset:n,lastOffset:o}=this.state;this.state.movement=[n[0]/o[0],n[1]-o[1]]}axisIntent(){const n=this.state,[o,s]=n._movement;if(!n.axis){const l=Math.abs(o)*uc-Math.abs(s);l<0?n.axis="angle":l>0&&(n.axis="scale")}}restrictToAxis(n){this.config.lockDirection&&(this.state.axis==="scale"?n[1]=0:this.state.axis==="angle"&&(n[0]=0))}cancel(){const n=this.state;n.canceled||setTimeout(()=>{n.canceled=!0,n._active=!1,this.compute(),this.emit()},0)}touchStart(n){this.ctrl.setEventIds(n);const o=this.state,s=this.ctrl.touchIds;if(o._active&&o._touchIds.every(c=>s.has(c))||s.size<2)return;this.start(n),o._touchIds=Array.from(s).slice(0,2);const l=r0(n,o._touchIds);this.pinchStart(n,l)}pointerStart(n){if(n.buttons!=null&&n.buttons%2!==1)return;this.ctrl.setEventIds(n),n.target.setPointerCapture(n.pointerId);const o=this.state,s=o._pointerEvents,l=this.ctrl.pointerIds;if(o._active&&Array.from(s.keys()).every(d=>l.has(d))||(s.size<2&&s.set(n.pointerId,n),o._pointerEvents.size<2))return;this.start(n);const c=na(...Array.from(s.values()));this.pinchStart(n,c)}pinchStart(n,o){const s=this.state;s.origin=o.origin,this.computeValues([o.distance,o.angle]),this.computeInitial(),this.compute(n),this.emit()}touchMove(n){if(!this.state._active)return;const o=r0(n,this.state._touchIds);this.pinchMove(n,o)}pointerMove(n){const o=this.state._pointerEvents;if(o.has(n.pointerId)&&o.set(n.pointerId,n),!this.state._active)return;const s=na(...Array.from(o.values()));this.pinchMove(n,s)}pinchMove(n,o){const s=this.state,l=s._values[1],c=o.angle-l;let d=0;Math.abs(c)>270&&(d+=Math.sign(c)),this.computeValues([o.distance,o.angle-360*d]),s.origin=o.origin,s.turns=d,s._movement=[s._values[0]/s._initial[0]-1,s._values[1]-s._initial[1]],this.compute(n),this.emit()}touchEnd(n){this.ctrl.setEventIds(n),!!this.state._active&&this.state._touchIds.some(o=>!this.ctrl.touchIds.has(o))&&(this.state._active=!1,this.compute(n),this.emit())}pointerEnd(n){const o=this.state;this.ctrl.setEventIds(n);try{n.target.releasePointerCapture(n.pointerId)}catch{}o._pointerEvents.has(n.pointerId)&&o._pointerEvents.delete(n.pointerId),!!o._active&&o._pointerEvents.size<2&&(o._active=!1,this.compute(n),this.emit())}gestureStart(n){n.cancelable&&n.preventDefault();const o=this.state;o._active||(this.start(n),this.computeValues([n.scale,n.rotation]),o.origin=[n.clientX,n.clientY],this.compute(n),this.emit())}gestureMove(n){if(n.cancelable&&n.preventDefault(),!this.state._active)return;const o=this.state;this.computeValues([n.scale,n.rotation]),o.origin=[n.clientX,n.clientY];const s=o._movement;o._movement=[n.scale-1,n.rotation],o._delta=xt.sub(o._movement,s),this.compute(n),this.emit()}gestureEnd(n){!this.state._active||(this.state._active=!1,this.compute(n),this.emit())}wheel(n){const o=this.config.modifierKey;o&&!n[o]||(this.state._active?this.wheelChange(n):this.wheelStart(n),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(n){this.start(n),this.wheelChange(n)}wheelChange(n){"uv"in n||n.cancelable&&n.preventDefault();const s=this.state;s._delta=[-i0(n)[1]/fc*s.offset[0],0],xt.addTo(s._movement,s._delta),this.state.origin=[n.clientX,n.clientY],this.compute(n),this.emit()}wheelEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(n){const o=this.config.device;o&&(n(o,"start",this[o+"Start"].bind(this)),n(o,"change",this[o+"Move"].bind(this)),n(o,"end",this[o+"End"].bind(this)),n(o,"cancel",this[o+"End"].bind(this))),n("wheel","",this.wheel.bind(this),{passive:!1})}}const pc=Pt(Pt({},c0),{},{device(e,n,{shared:o,pointer:{touch:s=!1}={}}){if(o.target&&!O1.touch&&O1.gesture)return"gesture";if(O1.touch&&s)return"touch";if(O1.touchscreen){if(O1.pointer)return"pointer";if(O1.touch)return"touch"}},bounds(e,n,{scaleBounds:o={},angleBounds:s={}}){const l=d=>{const p=s0(Vi(o,d),{min:-1/0,max:1/0});return[p.min,p.max]},c=d=>{const p=s0(Vi(s,d),{min:-1/0,max:1/0});return[p.min,p.max]};return typeof o!="function"&&typeof s!="function"?[l(),c()]:d=>[l(d),c(d)]},threshold(e,n,o){return this.lockDirection=o.axis==="lock",xt.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e}});class gc extends Go{constructor(...n){super(...n),Vt(this,"ingKey","moving")}move(n){this.config.mouseOnly&&n.pointerType!=="mouse"||(this.state._active?this.moveChange(n):this.moveStart(n),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(n){this.start(n),this.computeValues(Yn(n)),this.compute(n),this.computeInitial(),this.emit()}moveChange(n){if(!this.state._active)return;const o=Yn(n),s=this.state;s._delta=xt.sub(o,s._values),xt.addTo(s._movement,s._delta),this.computeValues(o),this.compute(n),this.emit()}moveEnd(n){!this.state._active||(this.state._active=!1,this.compute(n),this.emit())}bind(n){n("pointer","change",this.move.bind(this)),n("pointer","leave",this.moveEnd.bind(this))}}const vc=Pt(Pt({},gn),{},{mouseOnly:(e=!0)=>e});class Cc extends Go{constructor(...n){super(...n),Vt(this,"ingKey","scrolling")}scroll(n){this.state._active||this.start(n),this.scrollChange(n),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(n){n.cancelable&&n.preventDefault();const o=this.state,s=N5(n);o._delta=xt.sub(s,o._values),xt.addTo(o._movement,o._delta),this.computeValues(s),this.compute(n),this.emit()}scrollEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(n){n("scroll","",this.scroll.bind(this))}}const mc=gn;class _c extends Go{constructor(...n){super(...n),Vt(this,"ingKey","wheeling")}wheel(n){this.state._active||this.start(n),this.wheelChange(n),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(n){const o=this.state;o._delta=i0(n),xt.addTo(o._movement,o._delta);const[s,l]=o.overflow,[c,d]=o._delta,[p,h]=o._direction;(s<0&&c>0&&p<0||s>0&&c<0&&p>0)&&(o._movement[0]=o._movementBound[0]),(l<0&&d>0&&h<0||l>0&&d<0&&h>0)&&(o._movement[1]=o._movementBound[1]),this.compute(n),this.emit()}wheelEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(n){n("wheel","",this.wheel.bind(this))}}const wc=gn;class bc extends Go{constructor(...n){super(...n),Vt(this,"ingKey","hovering")}enter(n){this.config.mouseOnly&&n.pointerType!=="mouse"||(this.start(n),this.computeValues(Yn(n)),this.compute(n),this.emit())}leave(n){if(this.config.mouseOnly&&n.pointerType!=="mouse")return;const o=this.state;if(!o._active)return;o._active=!1;const s=Yn(n);o._movement=o._delta=xt.sub(s,o._values),this.computeValues(s),this.compute(n),o.delta=o.movement,this.emit()}bind(n){n("pointer","enter",this.enter.bind(this)),n("pointer","leave",this.leave.bind(this))}}const xc=Pt(Pt({},gn),{},{mouseOnly:(e=!0)=>e}),ia=new Map,sa=new Map;function yc(e){ia.set(e.key,e.engine),sa.set(e.key,e.resolver)}const Ec={key:"drag",engine:Q5,resolver:dc},Lc={key:"hover",engine:bc,resolver:xc},Sc={key:"move",engine:gc,resolver:vc},Rc={key:"pinch",engine:hc,resolver:pc},Ic={key:"scroll",engine:Cc,resolver:mc},Mc={key:"wheel",engine:_c,resolver:wc};function Pc(e,n){if(e==null)return{};var o={},s=Object.keys(e),l,c;for(c=0;c<s.length;c++)l=s[c],!(n.indexOf(l)>=0)&&(o[l]=e[l]);return o}function $c(e,n){if(e==null)return{};var o=Pc(e,n),s,l;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(l=0;l<c.length;l++)s=c[l],!(n.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,s)||(o[s]=e[s]))}return o}const Hc={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=O1.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:n=!1}={}){return{passive:e,capture:n}},transform(e){return e}},kc=["target","eventOptions","window","enabled","transform"];function Ai(e={},n){const o={};for(const[s,l]of Object.entries(n))switch(typeof l){case"function":o[s]=l.call(o,e[s],s,e);break;case"object":o[s]=Ai(e[s],l);break;case"boolean":l&&(o[s]=e[s]);break}return o}function Oc(e,n){const o=e,{target:s,eventOptions:l,window:c,enabled:d,transform:p}=o,h=$c(o,kc),g={shared:Ai({target:s,eventOptions:l,window:c,enabled:d,transform:p},Hc)};if(n){const v=sa.get(n);g[n]=Ai(Pt({shared:g.shared},h),v)}else for(const v in h){const w=sa.get(v);w&&(g[v]=Ai(Pt({shared:g.shared},h[v]),w))}return g}class h0{constructor(n,o){Vt(this,"_listeners",new Set),this._ctrl=n,this._gestureKey=o}add(n,o,s,l,c){const d=this._listeners,p=Z5(o,s),h=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},g=Pt(Pt({},h),c);n.addEventListener(p,l,g);const v=()=>{n.removeEventListener(p,l,g),d.delete(v)};return d.add(v),v}clean(){this._listeners.forEach(n=>n()),this._listeners.clear()}}class Tc{constructor(){Vt(this,"_timeouts",new Map)}add(n,o,s=140,...l){this.remove(n),this._timeouts.set(n,window.setTimeout(o,s,...l))}remove(n){const o=this._timeouts.get(n);o&&window.clearTimeout(o)}clean(){this._timeouts.forEach(n=>void window.clearTimeout(n)),this._timeouts.clear()}}class Bc{constructor(n){Vt(this,"gestures",new Set),Vt(this,"_targetEventStore",new h0(this)),Vt(this,"gestureEventStores",{}),Vt(this,"gestureTimeoutStores",{}),Vt(this,"handlers",{}),Vt(this,"config",{}),Vt(this,"pointerIds",new Set),Vt(this,"touchIds",new Set),Vt(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Vc(this,n)}setEventIds(n){if(Bi(n))return this.touchIds=new Set(F5(n)),this.touchIds;if("pointerId"in n)return n.type==="pointerup"||n.type==="pointercancel"?this.pointerIds.delete(n.pointerId):n.type==="pointerdown"&&this.pointerIds.add(n.pointerId),this.pointerIds}applyHandlers(n,o){this.handlers=n,this.nativeHandlers=o}applyConfig(n,o){this.config=Oc(n,o)}clean(){this._targetEventStore.clean();for(const n of this.gestures)this.gestureEventStores[n].clean(),this.gestureTimeoutStores[n].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...n){const o=this.config.shared,s={};let l;if(!(o.target&&(l=o.target(),!l))){if(o.enabled){for(const d of this.gestures){const p=this.config[d],h=p0(s,p.eventOptions,!!l);if(p.enabled){const g=ia.get(d);new g(this,n,d).bind(h)}}const c=p0(s,o.eventOptions,!!l);for(const d in this.nativeHandlers)c(d,"",p=>this.nativeHandlers[d](Pt(Pt({},this.state.shared),{},{event:p,args:n})),void 0,!0)}for(const c in s)s[c]=X5(...s[c]);if(!l)return s;for(const c in s){const{device:d,capture:p,passive:h}=D5(c);this._targetEventStore.add(l,d,"",s[c],{capture:p,passive:h})}}}}function qn(e,n){e.gestures.add(n),e.gestureEventStores[n]=new h0(e,n),e.gestureTimeoutStores[n]=new Tc}function Vc(e,n){n.drag&&qn(e,"drag"),n.wheel&&qn(e,"wheel"),n.scroll&&qn(e,"scroll"),n.move&&qn(e,"move"),n.pinch&&qn(e,"pinch"),n.hover&&qn(e,"hover")}const p0=(e,n,o)=>(s,l,c,d={},p=!1)=>{var h,g;const v=(h=d.capture)!==null&&h!==void 0?h:n.capture,w=(g=d.passive)!==null&&g!==void 0?g:n.passive;let x=p?s:j5(s,l,v);o&&w&&(x+="Passive"),e[x]=e[x]||[],e[x].push(c)},jc=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function Ac(e){const n={},o={},s=new Set;for(let l in e)jc.test(l)?(s.add(RegExp.lastMatch),o[l]=e[l]):n[l]=e[l];return[o,n,s]}function Jn(e,n,o,s,l,c){if(!e.has(o)||!ia.has(s))return;const d=o+"Start",p=o+"End",h=g=>{let v;return g.first&&d in n&&n[d](g),o in n&&(v=n[o](g)),g.last&&p in n&&n[p](g),v};l[s]=h,c[s]=c[s]||{}}function Dc(e,n){const[o,s,l]=Ac(e),c={};return Jn(l,o,"onDrag","drag",c,n),Jn(l,o,"onWheel","wheel",c,n),Jn(l,o,"onScroll","scroll",c,n),Jn(l,o,"onPinch","pinch",c,n),Jn(l,o,"onMove","move",c,n),Jn(l,o,"onHover","hover",c,n),{handlers:c,config:n,nativeHandlers:s}}function vn(e,n={},o,s){const l=f.useMemo(()=>new Bc(e),[]);if(l.applyHandlers(e,s),l.applyConfig(n,o),f.useEffect(l.effect.bind(l)),f.useEffect(()=>l.clean.bind(l),[]),n.target===void 0)return l.bind.bind(l)}function Ep(e,n){return registerAction(dragAction),vn({drag:e},n||{},"drag")}function Lp(e,n){return registerAction(pinchAction),vn({pinch:e},n||{},"pinch")}function Sp(e,n){return registerAction(wheelAction),vn({wheel:e},n||{},"wheel")}function Rp(e,n){return registerAction(scrollAction),vn({scroll:e},n||{},"scroll")}function Ip(e,n){return registerAction(moveAction),vn({move:e},n||{},"move")}function Mp(e,n){return registerAction(hoverAction),vn({hover:e},n||{},"hover")}function Zc(e){return e.forEach(yc),function(o,s){const{handlers:l,nativeHandlers:c,config:d}=Dc(o,s||{});return vn(l,d,void 0,c)}}function zc(e,n){return Zc([Ec,Rc,Ic,Mc,Sc,Lc])(e,n||{})}var Wc=Object.defineProperty,Fc=(e,n,o)=>n in e?Wc(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,We=(e,n,o)=>(Fc(e,typeof n!="symbol"?n+"":n,o),o),Ve=class{static clamp(e,n,o){return Math.max(n,typeof o<"u"?Math.min(e,o):e)}static clampV(e,n,o){return e.map(s=>o?Ve.clamp(s,n,o):Ve.clamp(s,n))}static cross(e,n,o){return(n[0]-e[0])*(o[1]-e[1])-(o[0]-e[0])*(n[1]-e[1])}static snap(e,n=1){return[Math.round(e[0]/n)*n,Math.round(e[1]/n)*n]}},L=Ve;We(L,"neg",e=>[-e[0],-e[1]]),We(L,"add",(e,n)=>[e[0]+n[0],e[1]+n[1]]),We(L,"addScalar",(e,n)=>[e[0]+n,e[1]+n]),We(L,"sub",(e,n)=>[e[0]-n[0],e[1]-n[1]]),We(L,"subScalar",(e,n)=>[e[0]-n,e[1]-n]),We(L,"vec",(e,n)=>[n[0]-e[0],n[1]-e[1]]),We(L,"mul",(e,n)=>[e[0]*n,e[1]*n]),We(L,"mulV",(e,n)=>[e[0]*n[0],e[1]*n[1]]),We(L,"div",(e,n)=>[e[0]/n,e[1]/n]),We(L,"divV",(e,n)=>[e[0]/n[0],e[1]/n[1]]),We(L,"per",e=>[e[1],-e[0]]),We(L,"dpr",(e,n)=>e[0]*n[0]+e[1]*n[1]),We(L,"cpr",(e,n)=>e[0]*n[1]-n[0]*e[1]),We(L,"len2",e=>e[0]*e[0]+e[1]*e[1]),We(L,"len",e=>Math.hypot(e[0],e[1])),We(L,"pry",(e,n)=>Ve.dpr(e,n)/Ve.len(n)),We(L,"uni",e=>Ve.div(e,Ve.len(e))),We(L,"normalize",e=>Ve.uni(e)),We(L,"tangent",(e,n)=>Ve.uni(Ve.sub(e,n))),We(L,"dist2",(e,n)=>Ve.len2(Ve.sub(e,n))),We(L,"dist",(e,n)=>Math.hypot(e[1]-n[1],e[0]-n[0])),We(L,"fastDist",(e,n)=>{let o=[n[0]-e[0],n[1]-e[1]],s=[Math.abs(o[0]),Math.abs(o[1])],l=1/Math.max(s[0],s[1]);return l=l*(1.29289-(s[0]+s[1])*l*.29289),[o[0]*l,o[1]*l]}),We(L,"ang",(e,n)=>Math.atan2(Ve.cpr(e,n),Ve.dpr(e,n))),We(L,"angle",(e,n)=>Math.atan2(n[1]-e[1],n[0]-e[0])),We(L,"med",(e,n)=>Ve.mul(Ve.add(e,n),.5)),We(L,"rot",(e,n=0)=>[e[0]*Math.cos(n)-e[1]*Math.sin(n),e[0]*Math.sin(n)+e[1]*Math.cos(n)]),We(L,"rotWith",(e,n,o=0)=>{if(o===0)return e;let s=Math.sin(o),l=Math.cos(o),c=e[0]-n[0],d=e[1]-n[1],p=c*l-d*s,h=c*s+d*l;return[p+n[0],h+n[1]]}),We(L,"isEqual",(e,n)=>e[0]===n[0]&&e[1]===n[1]),We(L,"lrp",(e,n,o)=>Ve.add(e,Ve.mul(Ve.sub(n,e),o))),We(L,"int",(e,n,o,s,l=1)=>{let c=(Ve.clamp(o,s)-o)/(s-o);return Ve.add(Ve.mul(e,1-c),Ve.mul(n,l))}),We(L,"ang3",(e,n,o)=>{let s=Ve.vec(n,e),l=Ve.vec(n,o);return Ve.ang(s,l)}),We(L,"abs",e=>[Math.abs(e[0]),Math.abs(e[1])]),We(L,"rescale",(e,n)=>{let o=Ve.len(e);return[n*e[0]/o,n*e[1]/o]}),We(L,"isLeft",(e,n,o)=>(n[0]-e[0])*(o[1]-e[1])-(o[0]-e[0])*(n[1]-e[1])),We(L,"clockwise",(e,n,o)=>Ve.isLeft(e,n,o)>0),We(L,"toFixed",e=>e.map(n=>Math.round(n*100)/100)),We(L,"nearestPointOnLineThroughPoint",(e,n,o)=>Ve.add(e,Ve.mul(n,Ve.pry(Ve.sub(o,e),n)))),We(L,"distanceToLineThroughPoint",(e,n,o)=>Ve.dist(o,Ve.nearestPointOnLineThroughPoint(e,n,o))),We(L,"nearestPointOnLineSegment",(e,n,o,s=!0)=>{let l=Ve.uni(Ve.sub(n,e)),c=Ve.add(e,Ve.mul(l,Ve.pry(Ve.sub(o,e),l)));if(s){if(c[0]<Math.min(e[0],n[0]))return e[0]<n[0]?e:n;if(c[0]>Math.max(e[0],n[0]))return e[0]>n[0]?e:n;if(c[1]<Math.min(e[1],n[1]))return e[1]<n[1]?e:n;if(c[1]>Math.max(e[1],n[1]))return e[1]>n[1]?e:n}return c}),We(L,"distanceToLineSegment",(e,n,o,s=!0)=>Ve.dist(o,Ve.nearestPointOnLineSegment(e,n,o,s))),We(L,"nearestPointOnBounds",(e,n)=>[Ve.clamp(n[0],e.minX,e.maxX),Ve.clamp(n[1],e.minY,e.maxY)]),We(L,"distanceToBounds",(e,n)=>Ve.dist(n,Ve.nearestPointOnBounds(e,n))),We(L,"nudge",(e,n,o)=>Ve.isEqual(e,n)?e:Ve.add(e,Ve.mul(Ve.uni(Ve.sub(n,e)),o))),We(L,"nudgeAtAngle",(e,n,o)=>[Math.cos(n)*o+e[0],Math.sin(n)*o+e[1]]),We(L,"toPrecision",(e,n=4)=>[+e[0].toPrecision(n),+e[1].toPrecision(n)]),We(L,"pointsBetween",(e,n,o=6)=>Array.from(Array(o)).map((s,l)=>{let c=l/(o-1),d=Math.min(1,.5+Math.abs(.5-c));return[...Ve.lrp(e,n,c),d]})),We(L,"slope",(e,n)=>e[0]===n[0]?NaN:(e[1]-n[1])/(e[0]-n[0])),We(L,"max",(...e)=>[Math.max(...e.map(n=>n[0])),Math.max(...e.map(n=>n[1]))]),We(L,"min",(...e)=>[Math.min(...e.map(n=>n[0])),Math.min(...e.map(n=>n[1]))]);var J=L,g0=function(){if(typeof Map<"u")return Map;function e(n,o){var s=-1;return n.some(function(l,c){return l[0]===o?(s=c,!0):!1}),s}return function(){function n(){this.__entries__=[]}return Object.defineProperty(n.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),n.prototype.get=function(o){var s=e(this.__entries__,o),l=this.__entries__[s];return l&&l[1]},n.prototype.set=function(o,s){var l=e(this.__entries__,o);~l?this.__entries__[l][1]=s:this.__entries__.push([o,s])},n.prototype.delete=function(o){var s=this.__entries__,l=e(s,o);~l&&s.splice(l,1)},n.prototype.has=function(o){return!!~e(this.__entries__,o)},n.prototype.clear=function(){this.__entries__.splice(0)},n.prototype.forEach=function(o,s){s===void 0&&(s=null);for(var l=0,c=this.__entries__;l<c.length;l++){var d=c[l];o.call(s,d[1],d[0])}},n}()}(),aa=typeof window<"u"&&typeof document<"u"&&window.document===document,Di=function(){return typeof V.g<"u"&&V.g.Math===Math?V.g:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Nc=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Di):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),Uc=2;function Kc(e,n){var o=!1,s=!1,l=0;function c(){o&&(o=!1,e()),s&&p()}function d(){Nc(c)}function p(){var h=Date.now();if(o){if(h-l<Uc)return;s=!0}else o=!0,s=!1,setTimeout(d,n);l=h}return p}var Xc=20,Gc=["top","right","bottom","left","width","height","size","weight"],Yc=typeof MutationObserver<"u",qc=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Kc(this.refresh.bind(this),Xc)}return e.prototype.addObserver=function(n){~this.observers_.indexOf(n)||this.observers_.push(n),this.connected_||this.connect_()},e.prototype.removeObserver=function(n){var o=this.observers_,s=o.indexOf(n);~s&&o.splice(s,1),!o.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var n=this.updateObservers_();n&&this.refresh()},e.prototype.updateObservers_=function(){var n=this.observers_.filter(function(o){return o.gatherActive(),o.hasActive()});return n.forEach(function(o){return o.broadcastActive()}),n.length>0},e.prototype.connect_=function(){!aa||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Yc?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!aa||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(n){var o=n.propertyName,s=o===void 0?"":o,l=Gc.some(function(c){return!!~s.indexOf(c)});l&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),v0=function(e,n){for(var o=0,s=Object.keys(n);o<s.length;o++){var l=s[o];Object.defineProperty(e,l,{value:n[l],enumerable:!1,writable:!1,configurable:!0})}return e},Qn=function(e){var n=e&&e.ownerDocument&&e.ownerDocument.defaultView;return n||Di},C0=zi(0,0,0,0);function Zi(e){return parseFloat(e)||0}function m0(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return n.reduce(function(s,l){var c=e["border-"+l+"-width"];return s+Zi(c)},0)}function Jc(e){for(var n=["top","right","bottom","left"],o={},s=0,l=n;s<l.length;s++){var c=l[s],d=e["padding-"+c];o[c]=Zi(d)}return o}function Qc(e){var n=e.getBBox();return zi(0,0,n.width,n.height)}function e3(e){var n=e.clientWidth,o=e.clientHeight;if(!n&&!o)return C0;var s=Qn(e).getComputedStyle(e),l=Jc(s),c=l.left+l.right,d=l.top+l.bottom,p=Zi(s.width),h=Zi(s.height);if(s.boxSizing==="border-box"&&(Math.round(p+c)!==n&&(p-=m0(s,"left","right")+c),Math.round(h+d)!==o&&(h-=m0(s,"top","bottom")+d)),!r3(e)){var g=Math.round(p+c)-n,v=Math.round(h+d)-o;Math.abs(g)!==1&&(p-=g),Math.abs(v)!==1&&(h-=v)}return zi(l.left,l.top,p,h)}var t3=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Qn(e).SVGGraphicsElement}:function(e){return e instanceof Qn(e).SVGElement&&typeof e.getBBox=="function"}}();function r3(e){return e===Qn(e).document.documentElement}function n3(e){return aa?t3(e)?Qc(e):e3(e):C0}function o3(e){var n=e.x,o=e.y,s=e.width,l=e.height,c=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,d=Object.create(c.prototype);return v0(d,{x:n,y:o,width:s,height:l,top:o,right:n+s,bottom:l+o,left:n}),d}function zi(e,n,o,s){return{x:e,y:n,width:o,height:s}}var i3=function(){function e(n){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=zi(0,0,0,0),this.target=n}return e.prototype.isActive=function(){var n=n3(this.target);return this.contentRect_=n,n.width!==this.broadcastWidth||n.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var n=this.contentRect_;return this.broadcastWidth=n.width,this.broadcastHeight=n.height,n},e}(),s3=function(){function e(n,o){var s=o3(o);v0(this,{target:n,contentRect:s})}return e}(),a3=function(){function e(n,o,s){if(this.activeObservations_=[],this.observations_=new g0,typeof n!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=n,this.controller_=o,this.callbackCtx_=s}return e.prototype.observe=function(n){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(n instanceof Qn(n).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;o.has(n)||(o.set(n,new i3(n)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(n){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(n instanceof Qn(n).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;!o.has(n)||(o.delete(n),o.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var n=this;this.clearActive(),this.observations_.forEach(function(o){o.isActive()&&n.activeObservations_.push(o)})},e.prototype.broadcastActive=function(){if(!!this.hasActive()){var n=this.callbackCtx_,o=this.activeObservations_.map(function(s){return new s3(s.target,s.broadcastRect())});this.callback_.call(n,o,n),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),_0=typeof WeakMap<"u"?new WeakMap:new g0,w0=function(){function e(n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var o=qc.getInstance(),s=new a3(n,o,this);_0.set(this,s)}return e}();["observe","unobserve","disconnect"].forEach(function(e){w0.prototype[e]=function(){var n;return(n=_0.get(this))[e].apply(n,arguments)}});var l3=function(){return typeof Di.ResizeObserver<"u"?Di.ResizeObserver:w0}();const c3=l3;function b0(e,n,o,s=l=>l){return e*s(.5-n*(.5-o))}function d3(e){return[-e[0],-e[1]]}function G1(e,n){return[e[0]+n[0],e[1]+n[1]]}function T1(e,n){return[e[0]-n[0],e[1]-n[1]]}function Y1(e,n){return[e[0]*n,e[1]*n]}function u3(e,n){return[e[0]/n,e[1]/n]}function qo(e){return[e[1],-e[0]]}function f3(e,n){return e[0]*n[0]+e[1]*n[1]}function h3(e,n){return e[0]===n[0]&&e[1]===n[1]}function p3(e){return Math.hypot(e[0],e[1])}function g3(e){return e[0]*e[0]+e[1]*e[1]}function x0(e,n){return g3(T1(e,n))}function y0(e){return u3(e,p3(e))}function v3(e,n){return Math.hypot(e[1]-n[1],e[0]-n[0])}function Jo(e,n,o){let s=Math.sin(o),l=Math.cos(o),c=e[0]-n[0],d=e[1]-n[1],p=c*l-d*s,h=c*s+d*l;return[p+n[0],h+n[1]]}function la(e,n,o){return G1(e,Y1(T1(n,e),o))}function E0(e,n,o){return G1(e,Y1(n,o))}var{min:eo,PI:C3}=Math,L0=.275,Qo=C3+1e-4;function ca(e,n={}){let{size:o=16,smoothing:s=.5,thinning:l=.5,simulatePressure:c=!0,easing:d=ye=>ye,start:p={},end:h={},last:g=!1}=n,{cap:v=!0,easing:w=ye=>ye*(2-ye)}=p,{cap:x=!0,easing:y=ye=>--ye*ye*ye+1}=h;if(e.length===0||o<=0)return[];let E=e[e.length-1].runningLength,R=p.taper===!1?0:p.taper===!0?Math.max(o,E):p.taper,P=h.taper===!1?0:h.taper===!0?Math.max(o,E):h.taper,$=Math.pow(o*s,2),I=[],B=[],j=e.slice(0,10).reduce((ye,Ye)=>{let le=Ye.pressure;if(c){let Ne=eo(1,Ye.distance/o),Gt=eo(1,1-Ne);le=eo(1,ye+(Gt-ye)*(Ne*L0))}return(ye+le)/2},e[0].pressure),T=b0(o,l,e[e.length-1].pressure,d),D,A=e[0].vector,X=e[0].point,ne=X,he=X,Se=ne;for(let ye=0;ye<e.length;ye++){let{pressure:Ye}=e[ye],{point:le,vector:Ne,distance:Gt,runningLength:s1}=e[ye];if(ye<e.length-1&&E-s1<3)continue;if(l){if(c){let _r=eo(1,Gt/o),mo=eo(1,1-_r);Ye=eo(1,j+(mo-j)*(_r*L0))}T=b0(o,l,Ye,d)}else T=o/2;D===void 0&&(D=T);let yn=s1<R?w(s1/R):1,fi=E-s1<P?y((E-s1)/P):1;if(T=Math.max(.01,T*Math.min(yn,fi)),ye===e.length-1){let _r=Y1(qo(Ne),T);I.push(T1(le,_r)),B.push(G1(le,_r));continue}let h1=e[ye+1].vector,Br=f3(Ne,h1);if(Br<0){let _r=Y1(qo(A),T);for(let mo=1/13,Is=0;Is<=1;Is+=mo)he=Jo(T1(le,_r),le,Qo*Is),I.push(he),Se=Jo(G1(le,_r),le,Qo*-Is),B.push(Se);X=he,ne=Se;continue}let Co=Y1(qo(la(h1,Ne,Br)),T);he=T1(le,Co),(ye<=1||x0(X,he)>$)&&(I.push(he),X=he),Se=G1(le,Co),(ye<=1||x0(ne,Se)>$)&&(B.push(Se),ne=Se),j=Ye,A=Ne}let ve=e[0].point.slice(0,2),me=e.length>1?e[e.length-1].point.slice(0,2):G1(e[0].point,[1,1]),rt=[],ht=[];if(e.length===1){if(!(R||P)||g){let ye=E0(ve,y0(qo(T1(ve,me))),-(D||T)),Ye=[];for(let le=1/13,Ne=le;Ne<=1;Ne+=le)Ye.push(Jo(ye,ve,Qo*2*Ne));return Ye}}else{if(!(R||P&&e.length===1))if(v)for(let Ye=1/13,le=Ye;le<=1;le+=Ye){let Ne=Jo(B[0],ve,Qo*le);rt.push(Ne)}else{let Ye=T1(I[0],B[0]),le=Y1(Ye,.5),Ne=Y1(Ye,.51);rt.push(T1(ve,le),T1(ve,Ne),G1(ve,Ne),G1(ve,le))}let ye=qo(d3(e[e.length-1].vector));if(P||R&&e.length===1)ht.push(me);else if(x){let Ye=E0(me,ye,T);for(let le=1/29,Ne=le;Ne<1;Ne+=le)ht.push(Jo(Ye,me,Qo*3*Ne))}else ht.push(G1(me,Y1(ye,T)),G1(me,Y1(ye,T*.99)),T1(me,Y1(ye,T*.99)),T1(me,Y1(ye,T)))}return I.concat(ht,B.reverse(),rt)}function to(e,n={}){var o;let{streamline:s=.5,size:l=16,last:c=!1}=n;if(e.length===0)return[];let d=.15+(1-s)*.85,p=Array.isArray(e[0])?e:e.map(({x:y,y:E,pressure:R=.5})=>[y,E,R]);if(p.length===2){let y=p[1];p=p.slice(0,-1);for(let E=1;E<5;E++)p.push(la(p[0],y,E/4))}p.length===1&&(p=[...p,[...G1(p[0],[1,1]),...p[0].slice(2)]]);let h=[{point:[p[0][0],p[0][1]],pressure:p[0][2]>=0?p[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],g=!1,v=0,w=h[0],x=p.length-1;for(let y=1;y<p.length;y++){let E=c&&y===x?p[y].slice(0,2):la(w.point,p[y],d);if(h3(w.point,E))continue;let R=v3(E,w.point);if(v+=R,y<x&&!g){if(v<l)continue;g=!0}w={point:E,pressure:p[y][2]>=0?p[y][2]:.5,vector:y0(T1(w.point,E)),distance:R,runningLength:v},h.push(w)}return h[0].vector=((o=h[1])==null?void 0:o.vector)||[0,0],h}function m3(e,n={}){return ca(to(e,n),n)}var ei=m3,_3=Object.defineProperty,w3=Object.defineProperties,b3=Object.getOwnPropertyDescriptors,S0=Object.getOwnPropertySymbols,x3=Object.prototype.hasOwnProperty,y3=Object.prototype.propertyIsEnumerable,R0=(e,n,o)=>n in e?_3(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,da=(e,n)=>{for(var o in n||(n={}))x3.call(n,o)&&R0(e,o,n[o]);if(S0)for(var o of S0(n))y3.call(n,o)&&R0(e,o,n[o]);return e},ua=(e,n)=>w3(e,b3(n));function ft(e,...n){return{didIntersect:n.length>0,message:e,points:n}}function Gr(e,n,o=0){const s=[e[0]+n[0]/2,e[1]+n[1]/2],l=L.rotWith(e,s,o),c=L.rotWith(L.add(e,[n[0],0]),s,o),d=L.rotWith(L.add(e,n),s,o),p=L.rotWith(L.add(e,[0,n[1]]),s,o);return[["top",[l,c]],["right",[c,d]],["bottom",[d,p]],["left",[p,l]]]}function E3(e,n,o){if(o===e||o===n)return!0;const s=Math.PI*2,l=(n-e+s)%s,c=(o-e+s)%s;return l<=Math.PI!=c>l}function L3(e,n){const o=L.slope(e[0],e[1]),s=L.slope(n[0],n[1]);if(o===s)return;if(Number.isNaN(o)&&!Number.isNaN(s))return[e[0][0],(e[0][0]-n[0][0])*s+n[0][1]];if(Number.isNaN(s)&&!Number.isNaN(o))return[n[0][0],(n[0][0]-e[0][0])*o+e[0][1]];const l=(o*e[0][0]-s*n[0][0]+n[0][1]-e[0][1])/(o-s),c=s*(l-n[0][0])+n[0][1];return[l,c]}function Pp(e,n,o,s){const l=o[0]-e[0],c=o[1]-e[1],d=s[0]*n[1]-s[1]*n[0],p=(c*s[0]-l*s[1])/d,h=(c*n[0]-l*n[1])/d;if(p<0||h<0)return ft("miss");const g=n[1]/n[0],v=s[1]/s[0],w=e[1]-g*e[0],y=(o[1]-v*o[0]-w)/(g-v),E=g*y+w;return Number.isFinite(y)?ft("intersection",[y,E]):ft("parallel")}function ti(e,n,o,s){const[l,c]=e,[d,p]=n,[h,g]=o,[v,w]=s;if(p/d!==(w-g)/(v-h)){const x=d*(w-g)-p*(v-h);if(x!==0){const y=((c-g)*(v-h)-(l-h)*(w-g))/x,E=((c-g)*d-(l-h)*p)/x;if(y>=0&&E>=0&&E<=1)return ft("intersection",[l+y*d,c+y*p])}}return ft("no intersection")}function I0(e,n,o,s,l=0){return M3(o,s,l,e,n)}function fa(e,n,o,s,l,c){const d=e,p=L.mul(n,999999999);return ro(d,p,o,s,l,c)}function Wi(e,n,o,s=0){const{minX:l,minY:c,width:d,height:p}=o;return I0(e,n,[l,c],[d,p],s)}function $p(e,n,o,s){return ti(o,s,e,n)}function ri(e,n,o,s){const l=L.sub(e,o),c=L.sub(s,o),d=L.sub(n,e),p=c[0]*l[1]-c[1]*l[0],h=d[0]*l[1]-d[1]*l[0],g=c[1]*d[0]-c[0]*d[1];if(p===0||h===0)return ft("coincident");if(g===0)return ft("parallel");if(g!==0){const v=p/g,w=h/g;if(0<=v&&v<=1&&0<=w&&w<=1)return ft("intersection",L.add(e,L.mul(d,v)))}return ft("no intersection")}function S3(e,n,o,s){return M0(o,s,e,n)}function R3(e,n,o,s,l,c){const d=L.angle(o,l),p=L.angle(o,c),h=V3(o,s,s,0,e,n);if(!h.didIntersect)return ft("no intersection");const g=h.points.filter(v=>E3(d,p,L.angle(o,v)));return g.length===0?ft("no intersection"):ft("intersection",...g)}function ha(e,n,o,s){const l=(n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]),c=2*((n[0]-e[0])*(e[0]-o[0])+(n[1]-e[1])*(e[1]-o[1])),d=o[0]*o[0]+o[1]*o[1]+e[0]*e[0]+e[1]*e[1]-2*(o[0]*e[0]+o[1]*e[1])-s*s,p=c*c-4*l*d;if(p<0)return ft("outside");if(p===0)return ft("tangent");const h=Math.sqrt(p),g=(-c+h)/(2*l),v=(-c-h)/(2*l);if((g<0||g>1)&&(v<0||v>1))return g<0&&v<0||g>1&&v>1?ft("outside"):ft("inside");const w=[];return 0<=g&&g<=1&&w.push(L.lrp(e,n,g)),0<=v&&v<=1&&w.push(L.lrp(e,n,v)),ft("intersection",...w)}function ro(e,n,o,s,l,c=0){if(s===0||l===0||L.isEqual(e,n))return ft("no intersection");s=s<0?s:-s,l=l<0?l:-l,e=L.sub(L.rotWith(e,o,-c),o),n=L.sub(L.rotWith(n,o,-c),o);const d=L.sub(n,e),p=d[0]*d[0]/s/s+d[1]*d[1]/l/l,h=2*e[0]*d[0]/s/s+2*e[1]*d[1]/l/l,g=e[0]*e[0]/s/s+e[1]*e[1]/l/l-1,v=[],w=h*h-4*p*g;if(w===0)v.push(-h/2/p);else if(w>0){const y=Math.sqrt(w);v.push((-h+y)/2/p),v.push((-h-y)/2/p)}const x=v.filter(y=>y>=0&&y<=1).map(y=>L.add(o,L.add(e,L.mul(L.sub(n,e),y)))).map(y=>L.rotWith(y,o,c));return ft("intersection",...x)}function pa(e,n,o){return D3(o,e,n)}function ni(e,n,o){const s=[];for(let l=1;l<o.length;l++){const c=ri(e,n,o[l-1],o[l]);c&&s.push(...c.points)}return s.length===0?ft("no intersection"):ft("intersection",...o)}function I3(e,n,o){const s=[];for(let l=1;l<o.length+1;l++){const c=ri(e,n,o[l-1],o[l%o.length]);c&&s.push(...c.points)}return s.length===0?ft("no intersection"):ft("intersection",...o)}function M3(e,n,o,s,l){return Gr(e,n,o).reduce((d,[p,[h,g]])=>{const v=ti(s,l,h,g);return v&&d.push(ft(p,...v.points)),d},[]).filter(d=>d.didIntersect)}function M0(e,n,o,s){return Gr(e,n).reduce((c,[d,[p,h]])=>{const g=ri(o,s,p,h);return g&&c.push(ft(d,...g.points)),c},[]).filter(c=>c.didIntersect)}function ga(e,n,o,s){return Gr(e,n).reduce((c,[d,[p,h]])=>{const g=M0(o,s,p,h);return c.push(...g.map(v=>ft(`${d} ${v.message}`,...v.points))),c},[]).filter(c=>c.didIntersect)}function P3(e,n,o,s,l,c){return Gr(e,n).reduce((p,[h,[g,v]])=>{const w=k3(o,s,l,c,g,v);return w&&p.push(ua(da({},w),{message:h})),p},[]).filter(p=>p.didIntersect)}function P0(e,n,o,s){return Gr(e,n).reduce((c,[d,[p,h]])=>{const g=ha(p,h,o,s);return g&&c.push(ua(da({},g),{message:d})),c},[]).filter(c=>c.didIntersect)}function $3(e,n,o,s,l,c=0){return Gr(e,n).reduce((p,[h,[g,v]])=>{const w=ro(g,v,o,s,l,c);return w&&p.push(ua(da({},w),{message:h})),p},[]).filter(p=>p.didIntersect)}function Hp(e,n,o){const{minX:s,minY:l,width:c,height:d}=o;return ga(e,n,[s,l],[c,d])}function va(e,n,o){return Gr(e,n).reduce((l,[c,[d,p]])=>{const h=ni(d,p,o);return h.didIntersect&&l.push(ft(c,...h.points)),l},[]).filter(l=>l.didIntersect)}function H3(e,n,o){return Gr(e,n).reduce((l,[c,[d,p]])=>{const h=I3(d,p,o);return h.didIntersect&&l.push(ft(c,...h.points)),l},[]).filter(l=>l.didIntersect)}function k3(e,n,o,s,l,c){return R3(l,c,e,n,o,s)}function $0(e,n,o,s,l,c){return P3(l,c,e,n,o,s)}function O3(e,n,o,s,l){const{minX:c,minY:d,width:p,height:h}=l;return $0(e,n,o,s,[c,d],[p,h])}function T3(e,n,o,s){return ha(o,s,e,n)}function B3(e,n,o,s){let l=o[0]-e[0],c=o[1]-e[1];const d=Math.sqrt(l*l+c*c),p=(d*d-s*s+n*n)/(2*d),h=Math.sqrt(n*n-p*p);return l/=d,c/=d,ft("intersection",[e[0]+l*p-c*h,e[1]+c*p+l*h],[e[0]+l*p+c*h,e[1]+c*p-l*h])}function H0(e,n,o,s){return P0(o,s,e,n)}function kp(e,n,o){const{minX:s,minY:l,width:c,height:d}=o;return H0(e,n,[s,l],[c,d])}function Op(e,n,o,s,l,c){return fa(l,c,e,n,o,s)}function V3(e,n,o,s=0,l,c){return n===o?ha(l,c,e,n):ro(l,c,e,n,o,s)}function k0(e,n,o,s=0,l,c){return n===o?P0(l,c,e,n):$3(l,c,e,n,o,s)}function j3(e,n,o,s,l,c,d,p){return ft("no intersection")}function Tp(e,n,o,s,l,c){return j3(e,n,o,s,l,c,c,0)}function A3(e,n,o,s,l){const{minX:c,minY:d,width:p,height:h}=l;return k0(e,n,o,s,[c,d],[p,h])}function Bp(e,n,o){const{minX:s,minY:l,width:c,height:d}=e;return I0(n,o,[s,l],[c,d])}function D3(e,n,o){const{minX:s,minY:l,width:c,height:d}=e;return S3(n,o,[s,l],[c,d])}function Vp(e,n,o){const{minX:s,minY:l,width:c,height:d}=e;return ga(n,o,[s,l],[c,d])}function Z3(e,n){return ga([e.minX,e.minY],[e.width,e.height],[n.minX,n.minY],[n.width,n.height])}function jp(e,n,o,s,l){const{minX:c,minY:d,width:p,height:h}=e;return $0(n,o,s,l,[c,d],[p,h])}function Ap(e,n,o){const{minX:s,minY:l,width:c,height:d}=e;return H0(n,o,[s,l],[c,d])}function Dp(e,n,o,s,l=0){const{minX:c,minY:d,width:p,height:h}=e;return k0(n,o,s,l,[c,d],[p,h])}function O0(e,n){return W3(n,e)}function z3(e,n){return T0(n,e)}function Zp(e,n,o){return ni(n,o,e)}function zp(e,n,o){return va(n,o,e)}function W3(e,n){return va([n.minX,n.minY],[n.width,n.height],e)}function Wp(e,n,o){return ni(n,o,e)}function Fp(e,n,o){return va(n,o,e)}function T0(e,n){return H3([n.minX,n.minY],[n.width,n.height],e)}function Np(e,n,o){return F3(o,!0).reduce((l,[c,d],p)=>{const h=ti(e,n,c,d);return h&&l.push(ft(p.toString(),...h.points)),l},[]).filter(l=>l.didIntersect)}function F3(e,n=!1){const o=[];for(let s=1;s<e.length;s++)o.push([e[s-1],e[s]]);return n&&o.push([e[e.length-1],e[0]]),o}var N3=Object.defineProperty,U3=Object.defineProperties,K3=Object.getOwnPropertyDescriptors,Fi=Object.getOwnPropertySymbols,B0=Object.prototype.hasOwnProperty,V0=Object.prototype.propertyIsEnumerable,Ca=(e,n,o)=>n in e?N3(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,lt=(e,n)=>{for(var o in n||(n={}))B0.call(n,o)&&Ca(e,o,n[o]);if(Fi)for(var o of Fi(n))V0.call(n,o)&&Ca(e,o,n[o]);return e},q1=(e,n)=>U3(e,K3(n)),no=(e,n)=>{var o={};for(var s in e)B0.call(e,s)&&n.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&Fi)for(var s of Fi(e))n.indexOf(s)<0&&V0.call(e,s)&&(o[s]=e[s]);return o},vt=(e,n,o)=>(Ca(e,typeof n!="symbol"?n+"":n,o),o),ma=f.createContext({});function d1(){return f.useContext(ma)}var X3=(e=>(e.TransformSelected="transform_selected",e.TranslateSelected="translate_selected",e.TransformAll="transform_all",e.TranslateAll="translate_all",e))(X3||{}),G3=(e=>(e.Top="top_edge",e.Right="right_edge",e.Bottom="bottom_edge",e.Left="left_edge",e))(G3||{}),kr=(e=>(e.TopLeft="top_left_corner",e.TopRight="top_right_corner",e.BottomRight="bottom_right_corner",e.BottomLeft="bottom_left_corner",e))(kr||{}),Y3=(e=>(e.minX="minX",e.midX="midX",e.maxX="maxX",e.minY="minY",e.midY="midY",e.maxY="maxY",e))(Y3||{});String.prototype.replaceAll||(String.prototype.replaceAll=function(e,n){return Object.prototype.toString.call(e).toLowerCase()==="[object regexp]"?this.replace(e,n):this.replace(new RegExp(e,"g"),n)});var Ni=Math.PI*2,zt=class{static lerp(e,n,o){return o=zt.clamp(o,0,1),e*(1-o)+n*o}static lerpColor(e,n,o=.5){function s(h){let g=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(h);return[parseInt(g[1],16),parseInt(g[2],16),parseInt(g[3],16)]}function l(h){return"#"+((1<<24)+(h[0]<<16)+(h[1]<<8)+h[2]).toString(16).slice(1)}let c=s(e)||[0,0,0],d=s(n)||[0,0,0],p=c.slice();for(let h=0;h<3;h++)p[h]=Math.round(p[h]+o*(d[h]-c[h]));return l(p)}static modulate(e,n,o,s=!1){let[l,c]=n,[d,p]=o,h=d+(e-l)/(c-l)*(p-d);return s?d<p?Math.max(Math.min(h,p),d):Math.max(Math.min(h,d),p):h}static clamp(e,n,o){return Math.max(n,typeof o<"u"?Math.min(e,o):e)}static deepClone(e){if(e===null)return e;if(Array.isArray(e))return[...e];if(typeof e=="object"){let n=lt({},e);return Object.keys(n).forEach(o=>n[o]=typeof e[o]=="object"?zt.deepClone(e[o]):e[o]),n}return e}static rng(e=""){let n=0,o=0,s=0,l=0;function c(){let d=n^n<<11;return n=o,o=s,s=l,l^=(l>>>19^d^d>>>8)>>>0,l/4294967296}for(let d=0;d<e.length+64;d++)n^=e.charCodeAt(d)|0,c();return c}static pointsToLineSegments(e,n=!1){let o=[];for(let s=1;s<e.length;s++)o.push([e[s-1],e[s]]);return n&&o.push([e[e.length-1],e[0]]),o}static getRectangleSides(e,n,o=0){let s=[e[0]+n[0]/2,e[1]+n[1]/2],l=L.rotWith(e,s,o),c=L.rotWith(L.add(e,[n[0],0]),s,o),d=L.rotWith(L.add(e,n),s,o),p=L.rotWith(L.add(e,[0,n[1]]),s,o);return[["top",[l,c]],["right",[c,d]],["bottom",[d,p]],["left",[p,l]]]}static circleFromThreePoints(e,n,o){let[s,l]=e,[c,d]=n,[p,h]=o,g=s*(d-h)-l*(c-p)+c*h-p*d,v=(s*s+l*l)*(h-d)+(c*c+d*d)*(l-h)+(p*p+h*h)*(d-l),w=(s*s+l*l)*(c-p)+(c*c+d*d)*(p-s)+(p*p+h*h)*(s-c),x=-v/(2*g),y=-w/(2*g);return[x,y,Math.hypot(x-s,y-l)]}static perimeterOfEllipse(e,n){let o=Math.pow(e-n,2)/Math.pow(e+n,2);return Math.PI*(e+n)*(1+3*o/(10+Math.sqrt(4-3*o)))}static shortAngleDist(e,n){let o=Math.PI*2,s=(n-e)%o;return 2*s%o-s}static longAngleDist(e,n){return Math.PI*2-zt.shortAngleDist(e,n)}static lerpAngles(e,n,o){return e+zt.shortAngleDist(e,n)*o}static angleDelta(e,n){return zt.shortAngleDist(e,n)}static getSweep(e,n,o){return zt.angleDelta(L.angle(e,n),L.angle(e,o))}static clampRadians(e){return(Math.PI*2+e)%(Math.PI*2)}static snapAngleToSegments(e,n){let o=Math.PI*2/n;return Math.floor((zt.clampRadians(e)+o/2)/o)*o}static isAngleBetween(e,n,o){if(o===e||o===n)return!0;let s=(n-e+Ni)%Ni,l=(o-e+Ni)%Ni;return s<=Math.PI!=l>s}static degreesToRadians(e){return e*Math.PI/180}static radiansToDegrees(e){return e*180/Math.PI}static getArcLength(e,n,o,s){let l=zt.getSweep(e,o,s);return n*(2*Math.PI)*(l/(2*Math.PI))}static getSweepFlag(e,n,o){let s=L.angle(e,o);return(L.angle(e,n)-s+3*Math.PI)%(2*Math.PI)-Math.PI>0?0:1}static getLargeArcFlag(e,n,o){let s=L.angle(o,e),l=(L.angle(o,n)-s+3*Math.PI)%(2*Math.PI)-Math.PI;return Math.abs(l)>Math.PI/2?0:1}static getArcDashOffset(e,n,o,s,l){let c=zt.getSweepFlag(e,o,s),d=zt.getArcLength(e,n,o,s);return-(c<0?d:2*Math.PI*e[2]-d)/2+l}static getEllipseDashOffset(e,n){return-(2*Math.PI*e[2])/2+-n}static pointInCircle(e,n,o){return L.dist(e,n)<=o}static pointInEllipse(e,n,o,s,l=0){l=l||0;let c=Math.cos(l),d=Math.sin(l),p=L.sub(e,n),h=c*p[0]+d*p[1],g=d*p[0]-c*p[1];return h*h/(o*o)+g*g/(s*s)<=1}static pointInRect(e,n){return!(e[0]<n[0]||e[0]>e[0]+n[0]||e[1]<n[1]||e[1]>e[1]+n[1])}static pointInPolygon(e,n){let o=0;return n.forEach((s,l)=>{let c=n[(l+1)%n.length];s[1]<=e[1]?c[1]>e[1]&&L.cross(s,c,e)>0&&(o+=1):c[1]<=e[1]&&L.cross(s,c,e)<0&&(o-=1)}),o!==0}static pointInBounds(e,n){return!(e[0]<n.minX||e[0]>n.maxX||e[1]<n.minY||e[1]>n.maxY)}static pointInPolyline(e,n,o=3){for(let s=1;s<n.length;s++)if(L.distanceToLineSegment(n[s-1],n[s],e)<o)return!0;return!1}static getBoundsSides(e){return this.getRectangleSides([e.minX,e.minY],[e.width,e.height])}static expandBounds(e,n){return{minX:e.minX-n,minY:e.minY-n,maxX:e.maxX+n,maxY:e.maxY+n,width:e.width+n*2,height:e.height+n*2}}static boundsCollide(e,n){return!(e.maxX<n.minX||e.minX>n.maxX||e.maxY<n.minY||e.minY>n.maxY)}static boundsContain(e,n){return e.minX<n.minX&&e.minY<n.minY&&e.maxY>n.maxY&&e.maxX>n.maxX}static boundsContained(e,n){return zt.boundsContain(n,e)}static boundsAreEqual(e,n){return!(n.maxX!==e.maxX||n.minX!==e.minX||n.maxY!==e.maxY||n.minY!==e.minY)}static getBoundsFromPoints(e,n=0){let o=1/0,s=1/0,l=-1/0,c=-1/0;if(e.length<2)o=0,s=0,l=1,c=1;else for(let[d,p]of e)o=Math.min(d,o),s=Math.min(p,s),l=Math.max(d,l),c=Math.max(p,c);return n!==0?zt.getBoundsFromPoints(e.map(d=>L.rotWith(d,[(o+l)/2,(s+c)/2],n))):{minX:o,minY:s,maxX:l,maxY:c,width:Math.max(1,l-o),height:Math.max(1,c-s)}}static centerBounds(e,n){let o=this.getBoundsCenter(e),s=n[0]-o[0],l=n[1]-o[1];return this.translateBounds(e,[s,l])}static snapBoundsToGrid(e,n){let o=Math.round(e.minX/n)*n,s=Math.round(e.minY/n)*n,l=Math.round(e.maxX/n)*n,c=Math.round(e.maxY/n)*n;return{minX:o,minY:s,maxX:l,maxY:c,width:Math.max(1,l-o),height:Math.max(1,c-s)}}static translateBounds(e,n){return{minX:e.minX+n[0],minY:e.minY+n[1],maxX:e.maxX+n[0],maxY:e.maxY+n[1],width:e.width,height:e.height}}static rotateBounds(e,n,o){let[s,l]=L.rotWith([e.minX,e.minY],n,o),[c,d]=L.rotWith([e.maxX,e.maxY],n,o);return{minX:s,minY:l,maxX:c,maxY:d,width:e.width,height:e.height}}static getRotatedEllipseBounds(e,n,o,s,l=0){let c=Math.cos(l),d=Math.sin(l),p=Math.hypot(o*c,s*d),h=Math.hypot(o*d,s*c);return{minX:e+o-p,minY:n+s-h,maxX:e+o+p,maxY:n+s+h,width:p*2,height:h*2}}static getExpandedBounds(e,n){let o=Math.min(e.minX,n.minX),s=Math.min(e.minY,n.minY),l=Math.max(e.maxX,n.maxX),c=Math.max(e.maxY,n.maxY),d=Math.abs(l-o),p=Math.abs(c-s);return{minX:o,minY:s,maxX:l,maxY:c,width:d,height:p}}static getCommonBounds(e){if(e.length<2)return e[0];let n=e[0];for(let o=1;o<e.length;o++)n=zt.getExpandedBounds(n,e[o]);return n}static getRotatedCorners(e,n=0){let o=[e.minX+e.width/2,e.minY+e.height/2];return[[e.minX,e.minY],[e.maxX,e.minY],[e.maxX,e.maxY],[e.minX,e.maxY]].map(s=>L.rotWith(s,o,n))}static getTransformedBoundingBox(e,n,o,s=0,l=!1){let[c,d]=[e.minX,e.minY],[p,h]=[e.maxX,e.maxY],[g,v]=[e.minX,e.minY],[w,x]=[e.maxX,e.maxY];if(n==="center")return{minX:g+o[0],minY:v+o[1],maxX:w+o[0],maxY:x+o[1],width:w-g,height:x-v,scaleX:1,scaleY:1};let[y,E]=L.rot(o,-s);switch(n){case"top_edge":case"top_left_corner":case"top_right_corner":{v+=E;break}case"bottom_edge":case"bottom_left_corner":case"bottom_right_corner":{x+=E;break}}switch(n){case"left_edge":case"top_left_corner":case"bottom_left_corner":{g+=y;break}case"right_edge":case"top_right_corner":case"bottom_right_corner":{w+=y;break}}let R=p-c,P=h-d,$=(w-g)/R,I=(x-v)/P,B=$<0,j=I<0,T=Math.abs(w-g),D=Math.abs(x-v);if(l){let A=R/P,X=A<T/D,ne=T*(I<0?1:-1)*(1/A),he=D*($<0?1:-1)*A;switch(n){case"top_left_corner":{X?v=x+ne:g=w+he;break}case"top_right_corner":{X?v=x+ne:w=g-he;break}case"bottom_right_corner":{X?x=v-ne:w=g-he;break}case"bottom_left_corner":{X?x=v-ne:g=w+he;break}case"bottom_edge":case"top_edge":{let Se=(g+w)/2,ve=D*A;g=Se-ve/2,w=Se+ve/2;break}case"left_edge":case"right_edge":{let Se=(v+x)/2,ve=T/A;v=Se-ve/2,x=Se+ve/2;break}}}if(s%(Math.PI*2)!==0){let A=[0,0],X=L.med([c,d],[p,h]),ne=L.med([g,v],[w,x]);switch(n){case"top_left_corner":{A=L.sub(L.rotWith([w,x],ne,s),L.rotWith([p,h],X,s));break}case"top_right_corner":{A=L.sub(L.rotWith([g,x],ne,s),L.rotWith([c,h],X,s));break}case"bottom_right_corner":{A=L.sub(L.rotWith([g,v],ne,s),L.rotWith([c,d],X,s));break}case"bottom_left_corner":{A=L.sub(L.rotWith([w,v],ne,s),L.rotWith([p,d],X,s));break}case"top_edge":{A=L.sub(L.rotWith(L.med([g,x],[w,x]),ne,s),L.rotWith(L.med([c,h],[p,h]),X,s));break}case"left_edge":{A=L.sub(L.rotWith(L.med([w,v],[w,x]),ne,s),L.rotWith(L.med([p,d],[p,h]),X,s));break}case"bottom_edge":{A=L.sub(L.rotWith(L.med([g,v],[w,v]),ne,s),L.rotWith(L.med([c,d],[p,d]),X,s));break}case"right_edge":{A=L.sub(L.rotWith(L.med([g,v],[g,x]),ne,s),L.rotWith(L.med([c,d],[c,h]),X,s));break}}[g,v]=L.sub([g,v],A),[w,x]=L.sub([w,x],A)}return w<g&&([w,g]=[g,w]),x<v&&([x,v]=[v,x]),{minX:g,minY:v,maxX:w,maxY:x,width:w-g,height:x-v,scaleX:(w-g)/(p-c||1)*(B?-1:1),scaleY:(x-v)/(h-d||1)*(j?-1:1)}}static getTransformAnchor(e,n,o){let s=e;switch(e){case"top_left_corner":{n&&o?s="bottom_right_corner":n?s="top_right_corner":o?s="bottom_left_corner":s="bottom_right_corner";break}case"top_right_corner":{n&&o?s="bottom_left_corner":n?s="top_left_corner":o?s="bottom_right_corner":s="bottom_left_corner";break}case"bottom_right_corner":{n&&o?s="top_left_corner":n?s="bottom_left_corner":o?s="top_right_corner":s="top_left_corner";break}case"bottom_left_corner":{n&&o?s="top_right_corner":n?s="bottom_right_corner":o?s="top_left_corner":s="top_right_corner";break}}return s}static getRelativeTransformedBoundingBox(e,n,o,s,l){let c=(s?n.maxX-o.maxX:o.minX-n.minX)/n.width,d=(l?n.maxY-o.maxY:o.minY-n.minY)/n.height,p=o.width/n.width,h=o.height/n.height,g=e.minX+e.width*c,v=e.minY+e.height*d,w=e.width*p,x=e.height*h;return{minX:g,minY:v,maxX:g+w,maxY:v+x,width:w,height:x}}static getRotatedSize(e,n){let o=L.div(e,2),s=[[0,0],[e[0],0],e,[0,e[1]]].map(c=>L.rotWith(c,o,n)),l=zt.getBoundsFromPoints(s);return[l.width,l.height]}static getBoundsCenter(e){return[e.minX+e.width/2,e.minY+e.height/2]}static getBoundsWithCenter(e){let n=zt.getBoundsCenter(e);return q1(lt({},e),{midX:n[0],midY:n[1]})}static getCommonTopLeft(e){let n=[1/0,1/0];return e.forEach(o=>{n[0]=Math.min(n[0],o[0]),n[1]=Math.min(n[1],o[1])}),n}static getFromCache(e,n,o){let s=e.get(n);if(s===void 0&&(e.set(n,o()),s=e.get(n),s===void 0))throw Error("Cache did not include item!");return s}static uniqueId(e=""){return e?((Number(e)^Math.random()*16)>>Number(e)/4).toString(16):`${1e7}-${1e3}-${4e3}-${8e3}-${1e11}`.replace(/[018]/g,zt.uniqueId)}static rotateArray(e,n){return e.map((o,s)=>e[(s+n)%e.length])}static debounce(e,n=0){let o;return function(...s){clearTimeout(o),o=setTimeout(()=>e.apply(s),n)}}static getSvgPathFromStroke(e,n=!0){if(!e.length)return"";let o=e.length-1;return e.reduce((s,l,c,d)=>(c===o?n&&s.push("Z"):s.push(l,L.med(l,d[c+1])),s),["M",e[0],"Q"]).join(" ").replaceAll(this.TRIM_NUMBERS,"$1")}static getPerfectDashProps(e,n,o,s=1,l=!0,c=2){let d,p,h;if(o.toLowerCase()==="dashed")d=n*c,h=1,p=l?(d/2).toString():"0";else if(o.toLowerCase()==="dotted")d=n/100,h=100,p="0";else return{strokeDasharray:"none",strokeDashoffset:"none"};let g=Math.floor(e/d/(2*h));g-=g%s,g=Math.max(g,4);let v=Math.max(d,(e-g*d)/(l?g:g-1));return{strokeDasharray:[d,v].join(" "),strokeDashoffset:p}}static isMobileSize(){return typeof window>"u"?!1:window.innerWidth<768}static isMobileSafari(){if(typeof window>"u")return!1;let e=window.navigator.userAgent,n=!!e.match(/iPad/i)||!!e.match(/iPhone/i),o=!!e.match(/WebKit/i);return n&&o&&!e.match(/CriOS/i)}static throttle(e,n){let o,s;return function(...l){return o||(o=!0,setTimeout(()=>o=!1,n),s=e(...l)),s}}static isDarwin(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}static metaKey(e){return zt.isDarwin()?e.metaKey:e.ctrlKey}static lns(e){let n=e.split("");return n.push(...n.splice(0,Math.round(n.length/5))),n.push(...n.splice(0,Math.round(n.length/4))),n.push(...n.splice(0,Math.round(n.length/3))),n.push(...n.splice(0,Math.round(n.length/2))),n.reverse().map(o=>+o?+o<5?5+ +o:+o>5?+o-5:o:o).join("")}},H=zt;vt(H,"getSnapPoints",(e,n,o)=>{let s=lt({},e),l=[0,0],c=[],d={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},p=["midX","minX","maxX"],h=["midY","minY","maxY"],g=n.map(E=>{let R=p.flatMap(($,I)=>p.map((B,j)=>{let T=s[$]-E[B],D=Math.abs(T);return{f:$,t:B,gap:T,distance:D,isCareful:I===0||I+j===3}})),P=h.flatMap(($,I)=>h.map((B,j)=>{let T=s[$]-E[B],D=Math.abs(T);return{f:$,t:B,gap:T,distance:D,isCareful:I===0||I+j===3}}));return[E,R,P]}),v=1/0,w=1/0,x=1/0,y=1/0;return g.forEach(([E,R,P])=>{R.forEach($=>{$.distance<o&&$.distance<x&&(x=$.distance,v=$.gap)}),P.forEach($=>{$.distance<o&&$.distance<y&&(y=$.distance,w=$.gap)})}),g.forEach(([E,R,P])=>{v!==1/0&&R.forEach($=>{Math.abs($.gap-v)<2&&(d[$.f]=q1(lt({},d[$.f]),{isSnapped:!0,to:E[$.t],B:E,distance:$.distance}))}),w!==1/0&&P.forEach($=>{Math.abs($.gap-w)<2&&(d[$.f]=q1(lt({},d[$.f]),{isSnapped:!0,to:E[$.t],B:E,distance:$.distance}))})}),l[0]=v===1/0?0:v,l[1]=w===1/0?0:w,s.minX-=l[0],s.midX-=l[0],s.maxX-=l[0],s.minY-=l[1],s.midY-=l[1],s.maxY-=l[1],p.forEach(E=>{let R=d[E];if(!R.isSnapped)return;let{id:P,B:$}=R,I=s[P];c.push(P==="minX"?[[I,s.midY],[I,$.minY],[I,$.maxY]]:[[I,s.minY],[I,s.maxY],[I,$.minY],[I,$.maxY]])}),h.forEach(E=>{let R=d[E];if(!R.isSnapped)return;let{id:P,B:$}=R,I=s[P];c.push(P==="midY"?[[s.midX,I],[$.minX,I],[$.maxX,I]]:[[s.minX,I],[s.maxX,I],[$.minX,I],[$.maxX,I]])}),{offset:l,snapLines:c}}),vt(H,"deepMerge",(e,n)=>{let o=lt({},e),s=Object.entries(n);for(let[l,c]of s)o[l]=c===Object(c)&&!Array.isArray(c)?zt.deepMerge(o[l],c):c;return o}),vt(H,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var y1=H;function q3(e,n){let o=f.useRef(void 0),s=f.useRef(void 0),l=f.useRef([0,0]),{inputs:c,bounds:d,callbacks:p}=d1();f.useEffect(()=>{let x=y=>y.preventDefault();return document.addEventListener("gesturestart",x),document.addEventListener("gesturechange",x),()=>{document.removeEventListener("gesturestart",x),document.removeEventListener("gesturechange",x)}},[]);let h=f.useCallback(({event:x})=>{var y,E,R,P;if(x.preventDefault(),c.isPinching)return;let{offset:$}=J3(x);if((x.altKey||x.ctrlKey||x.metaKey)&&x.buttons===0){let j=[...(E=(y=c.pointer)==null?void 0:y.point)!=null?E:[d.width/2,d.height/2],$[1]*.618],T=c.pan(j,x);(R=p.onZoom)==null||R.call(p,q1(lt({},T),{delta:j}),x);return}let I=L.mul(x.shiftKey&&!y1.isDarwin?[$[1],0]:[...$],.5);if(L.isEqual(I,[0,0]))return;let B=c.pan(I,x);(P=p.onPan)==null||P.call(p,B,x)},[p,c,d]),g=f.useCallback(({origin:x,event:y})=>{var E;if(y instanceof WheelEvent)return;let R=n.current;if(!R||!(y.target===R||R.contains(y.target)))return;let P=c.pinch(x,x);c.isPinching=!0,(E=p.onPinchStart)==null||E.call(p,P,y),s.current=P.point,o.current=P.origin,l.current=[0,0]},[p,c,d]),v=f.useCallback(({origin:x,offset:y,event:E})=>{var R;if(E instanceof WheelEvent)return;let P=n.current;if(!(E.target===P||P?.contains(E.target))||!o.current)return;let $=c.pinch(x,o.current),I=L.sub($.delta,l.current);l.current=$.delta,(R=p.onPinch)==null||R.call(p,q1(lt({},$),{point:$.point,origin:o.current,delta:[...I,y[0]]}),E),s.current=x},[p,c,d]),w=f.useCallback(({origin:x,event:y})=>{var E;let R=n.current;if(!(y.target===R||R?.contains(y.target)))return;let P=c.pinch(x,x);c.isPinching=!1,(E=p.onPinchEnd)==null||E.call(p,P,y),s.current=void 0,o.current=void 0,l.current=[0,0]},[]);zc({onWheel:h,onPinchStart:g,onPinch:v,onPinchEnd:w},{target:n,eventOptions:{passive:!1},pinch:{from:[e.current,0],scaleBounds:()=>({from:e.current,max:5,min:.1})}})}var j0=10,A0=40,D0=800;function J3(e){let n=0,o=0,s=0,l=0;return"detail"in e&&(o=e.detail),"wheelDelta"in e&&(o=-e.wheelDelta/120),"wheelDeltaY"in e&&(o=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(n=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(n=o,o=0),s="deltaX"in e?e.deltaX:n*j0,l="deltaY"in e?e.deltaY:o*j0,(s||l)&&e.deltaMode&&(e.deltaMode==1?(s*=A0,l*=A0):(s*=D0,l*=D0)),s&&!n&&(n=s<1?-1:1),l&&!o&&(o=l<1?-1:1),{spin:[n,o],offset:[s,l]}}function Q3(){let{callbacks:e}=d1();(0,f.useEffect)(()=>{function n(){var o;(o=e.onShapeBlur)==null||o.call(e)}return y1.isMobileSafari()?(document.addEventListener("focusout",n),()=>document.removeEventListener("focusout",n)):()=>null},[e])}function e7(){let{callbacks:e,inputs:n}=d1();return f.useMemo(()=>({onPointerDown:o=>{var s,l;if(o.dead||(o.dead=!0,!n.pointerIsValid(o))||o.button!==0&&o.button!==1||!n.pointerIsValid(o))return;o.currentTarget.setPointerCapture(o.pointerId);let c=n.pointerDown(o,"canvas");(o.button===0||o.button===1)&&((s=e.onPointCanvas)==null||s.call(e,c,o),(l=e.onPointerDown)==null||l.call(e,c,o))},onPointerMove:o=>{var s,l;if(o.dead||(o.dead=!0,!n.pointerIsValid(o)))return;let c=n.pointerMove(o,"canvas");o.currentTarget.hasPointerCapture(o.pointerId)&&((s=e.onDragCanvas)==null||s.call(e,c,o)),(l=e.onPointerMove)==null||l.call(e,c,o)},onPointerUp:o=>{var s,l,c,d;if(o.dead||(o.dead=!0,o.button!==0&&o.button!==1)||(n.activePointer=void 0,!n.pointerIsValid(o)))return;let p=n.isDoubleClick(),h=n.pointerUp(o,"canvas");o.currentTarget.hasPointerCapture(o.pointerId)&&((s=o.currentTarget)==null||s.releasePointerCapture(o.pointerId)),p&&!(h.altKey||h.metaKey)&&((l=e.onDoubleClickCanvas)==null||l.call(e,h,o)),(c=e.onReleaseCanvas)==null||c.call(e,h,o),(d=e.onPointerUp)==null||d.call(e,h,o)},onDrop:e.onDrop,onDragOver:e.onDragOver}),[e,n])}function t7(e){let{rPageState:n,rSelectionBounds:o,callbacks:s,inputs:l}=f.useContext(ma);return f.useMemo(()=>({onPointerDown:c=>{var d,p,h,g,v,w,x;if(c.dead||(c.dead=!0,!l.pointerIsValid(c)))return;if(c.button===2){(d=s.onRightPointShape)==null||d.call(s,l.pointerDown(c,e),c);return}if(c.button!==0)return;let y=l.pointerDown(c,e);if((p=c.currentTarget)==null||p.setPointerCapture(c.pointerId),o.current&&H.pointInBounds(y.point,o.current)&&!n.current.selectedIds.includes(e)){(h=s.onPointBounds)==null||h.call(s,l.pointerDown(c,"bounds"),c),(g=s.onPointShape)==null||g.call(s,y,c),(v=s.onPointerDown)==null||v.call(s,y,c);return}(w=s.onPointShape)==null||w.call(s,y,c),(x=s.onPointerDown)==null||x.call(s,y,c)},onPointerUp:c=>{var d,p,h,g;if(c.dead||(c.dead=!0,c.button!==0)||(l.activePointer=void 0,!l.pointerIsValid(c)))return;let v=l.isDoubleClick(),w=l.pointerUp(c,e);c.currentTarget.hasPointerCapture(c.pointerId)&&((d=c.currentTarget)==null||d.releasePointerCapture(c.pointerId)),v&&!(w.altKey||w.metaKey)&&((p=s.onDoubleClickShape)==null||p.call(s,w,c)),(h=s.onReleaseShape)==null||h.call(s,w,c),(g=s.onPointerUp)==null||g.call(s,w,c)},onPointerMove:c=>{var d,p;if(c.dead||(c.dead=!0,!l.pointerIsValid(c))||l.pointer&&c.pointerId!==l.pointer.pointerId)return;let h=l.pointerMove(c,e);c.currentTarget.hasPointerCapture(c.pointerId)&&((d=s.onDragShape)==null||d.call(s,h,c)),(p=s.onPointerMove)==null||p.call(s,h,c)},onPointerEnter:c=>{var d;if(!l.pointerIsValid(c))return;let p=l.pointerEnter(c,e);(d=s.onHoverShape)==null||d.call(s,p,c)},onPointerLeave:c=>{var d;if(!l.pointerIsValid(c))return;let p=l.pointerEnter(c,e);(d=s.onUnhoverShape)==null||d.call(s,p,c)}}),[l,s,e])}function Z0(e,n,o,s,l,c=!1,d=!1,p){let h={shape:e,asset:e.assetId?l[e.assetId]:void 0,meta:p,isChildOfSelected:d,isGhost:e.isGhost||c,isEditing:s.editingId===e.id,isBinding:s.bindingTargetId===e.id,isSelected:s.selectedIds.includes(e.id),isHovered:s.hoveredId===e.id||e.children!==void 0&&(s.hoveredId&&e.children.includes(s.hoveredId)||e.children.some(g=>s.selectedIds.includes(g)))};n.push(h),e.children&&(h.children=[],e.children.map(g=>o[g]).filter(Boolean).sort((g,v)=>g.childIndex-v.childIndex).forEach(g=>Z0(g,h.children,o,s,l,h.isGhost,h.isSelected||h.isChildOfSelected,p)))}function r7(e,n){return H.boundsContain(n,e)||H.boundsCollide(n,e)}function n7(e,n,o,s){let{callbacks:l,shapeUtils:c,bounds:d}=d1(),p=f.useRef(),h=f.useRef(-1),g=f.useRef(new Set),v=f.useRef(new Set),{selectedIds:w,camera:x}=n,[y,E]=L.sub(L.div([0,0],x.zoom),x.point),[R,P]=L.sub(L.div([d.width,d.height],x.zoom),x.point),$={minX:y,minY:E,maxX:R,maxY:P,height:R-y,width:P-E},I=v.current,B=g.current;I.clear(),B.clear(),Object.values(e.shapes).filter(D=>c[D.type].isStateful||w.includes(D.id)||r7(c[D.type].getBounds(D),$)).forEach(D=>{if(D.parentId===e.id){B.add(D.id),I.add(D);return}let A=e.shapes[D.parentId];if(A===void 0)throw Error(`A shape (${D.id}) has a parent (${D.parentId}) that does not exist!`);B.add(A.id),I.add(A)}),I.size!==h.current&&(p.current&&clearTimeout(p.current),p.current=requestAnimationFrame(()=>{var D;(D=l.onRenderCountChange)==null||D.call(l,Array.from(B.values()))}),h.current=I.size);let j=n.bindingId?e.bindings[n.bindingId].toId:void 0,T=[];return I.forEach(D=>{if(D===void 0)throw Error("Rendered shapes included a missing shape");Z0(D,T,e.shapes,q1(lt({},n),{bindingTargetId:j}),o,D.isGhost,!1,s)}),T.sort((D,A)=>D.shape.childIndex-A.shape.childIndex),T}var _a=new Map;function o7(e,n){return Object.keys(n).reduce((o,s)=>{let l=n[s];return l?o+`${`--${e}-${s}`}: ${l};
`:o},"")}function i7(e,n,o=":root"){f.useLayoutEffect(()=>{let s=document.createElement("style"),l=o7(e,n);return s.setAttribute("id",`${e}-theme`),s.setAttribute("data-selector",o),s.innerHTML=`
        ${o} {
          ${l}
        }
      `,document.head.appendChild(s),()=>{s&&document.head.contains(s)&&document.head.removeChild(s)}},[e,n,o])}function s7(e,n){f.useLayoutEffect(()=>{if(_a.get(e))return()=>{};let o=document.createElement("style");return o.innerHTML=n,o.setAttribute("id",e),document.head.appendChild(o),_a.set(e,o),()=>{o&&document.head.contains(o)&&(document.head.removeChild(o),_a.delete(e))}},[e,n])}var a7=(e,...n)=>e.reduce((o,s,l)=>o+s+(l<n.length?n[l]:""),""),l7={accent:"rgb(255, 0, 0)",brushFill:"rgba(0,0,0,.05)",brushStroke:"rgba(0,0,0,.25)",brushDashStroke:"rgba(0,0,0,.6)",selectStroke:"rgb(66, 133, 244)",selectFill:"rgba(65, 132, 244, 0.05)",binding:"rgba(65, 132, 244, 0.12)",background:"rgb(248, 249, 250)",foreground:"rgb(51, 51, 51)",grid:"rgba(144, 144, 144, 1)"},c7=a7`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: calc(64px * max(1, var(--tl-scale)));
    --tl-performance-all: auto;
    --tl-performance-selected: auto;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    z-index: 100;
    overflow: hidden;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
  }
  .tl-container * {
    box-sizing: border-box;
  }
  .tl-overlay {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }
  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }
  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }
  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }
  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
  }
  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }
  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }
  .tl-positioned {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
    will-change: var(--tl-performance-all);
  }
  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
  }
  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden;
    padding: var(--tl-padding);
    overflow: hidden;
    contain: layout style size;
  }
  .tl-positioned-selected {
    will-change: var(--tl-performance-selected);
  }
  .tl-inner-div {
    position: relative;
    width: 100%;
    height: 100%;
  }
  .tl-stroke-hitarea {
    fill: none;
    stroke: transparent;
    stroke-width: calc(24px * var(--tl-scale));
    pointer-events: stroke;
    stroke-linecap: round;
    stroke-linejoin: round;
  }
  .tl-fill-hitarea {
    fill: transparent;
    stroke: transparent;
    stroke-width: calc(24px * var(--tl-scale));
    pointer-events: all;
    stroke-linecap: round;
    stroke-linejoin: round;
  }
  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }
  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }
  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }
  .tl-cursor-ns {
    cursor: ns-resize;
  }
  .tl-cursor-ew {
    cursor: ew-resize;
  }
  .tl-cursor-nesw {
    cursor: nesw-resize;
  }
  .tl-cursor-nwse {
    cursor: nwse-resize;
  }
  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }
  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
    cursor: grab;
  }
  .tl-binding {
    fill: var(--tl-selectFill);
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }
  .tl-user {
    left: calc(-15px * var(--tl-scale));
    top: calc(-15px * var(--tl-scale));
    height: calc(35px * var(--tl-scale));
    width: calc(35px * var(--tl-scale));
    transform: scale(var(--tl-scale));
    pointer-events: none;
    will-change: transform;
  }
  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }
  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }
  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }
  .tl-selected {
    stroke: var(--tl-selectStroke);
  }
  .tl-locked {
    stroke-dasharray: calc(3px * var(--tl-scale)) calc(3px * var(--tl-scale));
  }
  .tl-editing {
    stroke-width: calc(2.5px * min(5, var(--tl-scale)));
  }
  .tl-performance {
    will-change: transform, contents;
  }
  .tl-clone-target {
    pointer-events: all;
  }
  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }
  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }
  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }
  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }
  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }
  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }
  .tl-bounds-center {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }
  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
    contain: layout style size;
  }
  .tl-dashed-brush-line {
    fill: none;
    stroke: var(--tl-brushDashStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }
  .tl-brush.dashed {
    stroke: none;
  }
  .tl-handle {
    pointer-events: all;
    cursor: grab;
  }
  .tl-handle:hover .tl-handle-bg {
    fill: var(--tl-selectFill);
  }
  .tl-handle:hover .tl-handle-bg > * {
    stroke: var(--tl-selectFill);
  }
  .tl-handle:active .tl-handle-bg {
    cursor: grabbing;
    fill: var(--tl-selectFill);
  }
  .tl-handle:active .tl-handle-bg > * {
    stroke: var(--tl-selectFill);
  }
  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
  }
  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    pointer-events: all;
    r: calc(16px / max(1, var(--tl-zoom)));
  }
  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }
  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }
  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }
  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }
  .tl-grid-dot {
    fill: var(--tl-grid);
  }
  .tl-erase-line {
    stroke-linejoin: round;
    stroke-linecap: round;
    pointer-events: none;
    fill: var(--tl-grid);
    opacity: 0.32;
  }
`;function d7(e,n){let o=f.useMemo(()=>lt(lt({},l7),e),[e]);i7("tl",o,n),s7("tl-canvas",c7)}function oo(e){let{callbacks:n,inputs:o}=d1(),s=f.useCallback(h=>{var g,v,w;if(h.dead||(h.dead=!0,h.button!==0)||!o.pointerIsValid(h))return;let x=o.pointerDown(h,e);o.isDoubleClick()&&!(x.altKey||x.metaKey)&&((g=n.onDoubleClickBoundsHandle)==null||g.call(n,x,h)),(v=n.onPointBoundsHandle)==null||v.call(n,x,h),(w=n.onPointerDown)==null||w.call(n,x,h)},[o,n,e]),l=f.useCallback(h=>{var g,v;if(h.dead||(h.dead=!0,h.button!==0)||!o.pointerIsValid(h))return;let w=o.pointerUp(h,e);(g=n.onReleaseBoundsHandle)==null||g.call(n,w,h),(v=n.onPointerUp)==null||v.call(n,w,h)},[o,n,e]),c=f.useCallback(h=>{var g,v;if(h.dead||(h.dead=!0,!o.pointerIsValid(h)))return;h.currentTarget.hasPointerCapture(h.pointerId)&&((g=n.onDragBoundsHandle)==null||g.call(n,o.pointerMove(h,e),h));let w=o.pointerMove(h,e);(v=n.onPointerMove)==null||v.call(n,w,h)},[o,n,e]),d=f.useCallback(h=>{var g;!o.pointerIsValid(h)||(g=n.onHoverBoundsHandle)==null||g.call(n,o.pointerEnter(h,e),h)},[o,n,e]),p=f.useCallback(h=>{var g;!o.pointerIsValid(h)||(g=n.onUnhoverBoundsHandle)==null||g.call(n,o.pointerEnter(h,e),h)},[o,n,e]);return{onPointerDown:s,onPointerUp:l,onPointerEnter:d,onPointerMove:c,onPointerLeave:p}}function u7(e,n,o){let s=f.useRef(),l=f.useRef();f.useLayoutEffect(()=>Fn(()=>{let{zoom:c,point:d}=o.camera,p=c!==s.current,h=d!==l.current;if(s.current=c,l.current=d,p||h){let g=e.current;if(n&&"current"in n){let v=n.current;p&&v&&v.style.setProperty("--tl-zoom",c.toString()),g&&g.style.setProperty("transform",`scale(${c}) translateX(${d[0]}px) translateY(${d[1]}px)`)}}}),[o])}function z0(e,n){return[(e[0]+n.point[0])*n.zoom,(e[1]+n.point[1])*n.zoom]}function wa(e,n){return e[n.type]}function f7(e,n,o){let{rSelectionBounds:s}=d1(),{selectedIds:l}=n,c=f.useRef(),d,p=0,h=!1,g=!1;if(l.length===1){let w=l[0],x=e.shapes[w];if(!x)throw Error(`selectedIds is set to the id of a shape that doesn't exist: ${w}`);p=x.rotation||0,h=x.isLocked||!1;let y=wa(o,x);d=y.hideBounds?void 0:y.getBounds(x)}else if(l.length>1){let w=l.map(x=>e.shapes[x]);p=0,h=w.every(x=>x.isLocked),d=w.reduce((x,y,E)=>E===0?wa(o,y).getRotatedBounds(y):y1.getExpandedBounds(x,wa(o,y).getRotatedBounds(y)),{})}if(d){let[w,x]=z0([d.minX,d.minY],n.camera),[y,E]=z0([d.maxX,d.maxY],n.camera);g=!!Object.values(e.bindings).find(R=>l.includes(R.toId)||l.includes(R.fromId)),s.current={minX:w,minY:x,maxX:y,maxY:E,width:y-w,height:E-x}}else s.current=null;let v=c.current;return!v||!d?c.current=d:d&&v.minX===d.minX&&v.minY===d.minY&&v.maxX===d.maxX&&v.maxY===d.maxY&&(d=c.current),{bounds:d,rotation:p,isLocked:h,isLinked:g}}function h7(e){let{inputs:n,callbacks:o}=d1();return f.useMemo(()=>({onPointerDown:s=>{var l,c,d;if(s.dead||(s.dead=!0,!n.pointerIsValid(s))||s.button!==0||!n.pointerIsValid(s))return;(l=s.currentTarget)==null||l.setPointerCapture(s.pointerId);let p=n.pointerDown(s,e);(c=o.onPointHandle)==null||c.call(o,p,s),(d=o.onPointerDown)==null||d.call(o,p,s)},onPointerUp:s=>{var l,c,d,p;if(s.dead||(s.dead=!0,s.button!==0)||!n.pointerIsValid(s))return;let h=n.isDoubleClick(),g=n.pointerUp(s,e);s.currentTarget.hasPointerCapture(s.pointerId)&&((l=s.currentTarget)==null||l.releasePointerCapture(s.pointerId),h&&!(g.altKey||g.metaKey)&&((c=o.onDoubleClickHandle)==null||c.call(o,g,s)),(d=o.onReleaseHandle)==null||d.call(o,g,s)),(p=o.onPointerUp)==null||p.call(o,g,s)},onPointerMove:s=>{var l,c;if(s.dead||(s.dead=!0,!n.pointerIsValid(s)))return;let d=n.pointerMove(s,e);s.currentTarget.hasPointerCapture(s.pointerId)&&((l=o.onDragHandle)==null||l.call(o,d,s)),(c=o.onPointerMove)==null||c.call(o,d,s)},onPointerEnter:s=>{var l;if(!n.pointerIsValid(s))return;let c=n.pointerEnter(s,e);(l=o.onHoverHandle)==null||l.call(o,c,s)},onPointerLeave:s=>{var l;if(!n.pointerIsValid(s))return;let c=n.pointerEnter(s,e);(l=o.onUnhoverHandle)==null||l.call(o,c,s)}}),[n,o,e])}function p7(e){let{bounds:n}=d1();f.useEffect(()=>{let o=c=>{c.preventDefault()},s=c=>{let d=c.touches[0].pageX,p=c.touches[0].radiusX||0;(d-p<10||d+p>n.width-10)&&c.preventDefault()},l=e.current;return l?(l.addEventListener("touchstart",o),l.addEventListener("gestureend",o),l.addEventListener("gesturechange",o),l.addEventListener("gesturestart",o),l.addEventListener("touchstart",s),()=>{l&&(l.removeEventListener("touchstart",o),l.removeEventListener("gestureend",o),l.removeEventListener("gesturechange",o),l.removeEventListener("gesturestart",o),l.removeEventListener("touchstart",s))}):()=>{}},[e,n.width])}function g7(){let{callbacks:e,inputs:n}=d1();return f.useMemo(()=>({onPointerDown:o=>{var s,l,c,d;if(o.dead||(o.dead=!0,!n.pointerIsValid(o)))return;if(o.button===2){(s=e.onRightPointBounds)==null||s.call(e,n.pointerDown(o,"bounds"),o);return}if(o.button!==0)return;(l=o.currentTarget)==null||l.setPointerCapture(o.pointerId);let p=n.pointerDown(o,"bounds");(c=e.onPointBounds)==null||c.call(e,p,o),(d=e.onPointerDown)==null||d.call(e,p,o)},onPointerUp:o=>{var s,l,c,d;if(o.dead||(o.dead=!0,o.button!==0)||(n.activePointer=void 0,!n.pointerIsValid(o)))return;let p=n.isDoubleClick(),h=n.pointerUp(o,"bounds");o.currentTarget.hasPointerCapture(o.pointerId)&&((s=o.currentTarget)==null||s.releasePointerCapture(o.pointerId)),p&&!(h.altKey||h.metaKey)&&((l=e.onDoubleClickBounds)==null||l.call(e,h,o)),(c=e.onReleaseBounds)==null||c.call(e,h,o),(d=e.onPointerUp)==null||d.call(e,h,o)},onPointerMove:o=>{var s,l;if(o.dead||(o.dead=!0,!n.pointerIsValid(o)))return;o.currentTarget.hasPointerCapture(o.pointerId)&&((s=e.onDragBounds)==null||s.call(e,n.pointerMove(o,"bounds"),o));let c=n.pointerMove(o,"bounds");(l=e.onPointerMove)==null||l.call(e,c,o)},onPointerEnter:o=>{var s;!n.pointerIsValid(o)||(s=e.onHoverBounds)==null||s.call(e,n.pointerEnter(o,"bounds"),o)},onPointerLeave:o=>{var s;!n.pointerIsValid(o)||(s=e.onUnhoverBounds)==null||s.call(e,n.pointerEnter(o,"bounds"),o)}}),[n,e])}function W0(e,n=0){let o=f.useRef(null);return f.useLayoutEffect(()=>Fn(()=>{let s=o.current,l=`
    translate(
      calc(${e.minX}px - var(--tl-padding)),
      calc(${e.minY}px - var(--tl-padding))
    )
    rotate(${n+(e.rotation||0)}rad)`;s.style.setProperty("transform",l),s.style.setProperty("width",`calc(${Math.floor(e.width)}px + (var(--tl-padding) * 2))`),s.style.setProperty("height",`calc(${Math.floor(e.height)}px + (var(--tl-padding) * 2))`)}),[e,n]),o}function v7(){let{inputs:e,callbacks:n}=d1();f.useEffect(()=>{let o=l=>{var c;(c=n.onKeyDown)==null||c.call(n,l.key,e.keydown(l),l)},s=l=>{var c;e.keyup(l),(c=n.onKeyUp)==null||c.call(n,l.key,e.keyup(l),l)};return window.addEventListener("keydown",o),window.addEventListener("keyup",s),()=>{window.removeEventListener("keydown",o),window.removeEventListener("keyup",s)}},[e,n])}function C7(e,n,o=!1){let s=f.useRef("idle"),l=f.useRef(n),c=f.useRef([]),d=f.useRef(performance.now()),p=f.useRef(0),h=f.useRef(0),[g]=f.useState(()=>new m7);f.useLayoutEffect(()=>{if(o){let y=e.current;if(!y)return;s.current="stopped",l.current=n,y.style.setProperty("transform",`translate(${n[0]}px, ${n[1]}px)`);return}let v=y=>{let E=performance.now();function R(){let P=(performance.now()-E)/y.duration;if(P<=1){let I=e.current;if(!I)return;let B=y.curve?g.getSplinePoint(P+y.start):J.lrp(y.from,y.to,P);I.style.setProperty("transform",`translate(${B[0]}px, ${B[1]}px)`),p.current=requestAnimationFrame(R);return}let $=c.current.shift();$?(s.current="animating",v($)):(s.current="idle",h.current=setTimeout(()=>{s.current="stopped"},250))}R()},w=performance.now();s.current==="stopped"&&(d.current=w,l.current=n,g.clear()),g.addPoint(n);let x={distance:g.totalLength,curve:g.points.length>3,start:g.points.length-3,from:l.current,to:n,timeStamp:w,duration:Math.min(w-d.current,300)};switch(d.current=w,s.current){case"stopped":{l.current=n,s.current="idle";break}case"idle":{s.current="animating",v(x);break}case"animating":{l.current=n,c.current.push(x);break}}return()=>clearTimeout(h.current)},[o,n,g])}var m7=class{constructor(){vt(this,"points",[]),vt(this,"lengths",[]),vt(this,"totalLength",0),vt(this,"prev")}addPoint(e){if(this.prev){let n=J.dist(this.prev,e);this.lengths.push(n),this.totalLength+=n,this.points.push(e)}this.prev=e}getSplinePoint(e){let{points:n}=this,o=n.length-1,s=Math.trunc(e),l=Math.min(s+1,o),c=Math.min(l+1,o),d=Math.min(c+1,o),p=l-1;e=e-s;let h=e*e,g=h*e,v=-g+2*h-e,w=3*g-5*h+2,x=-3*g+4*h+e,y=g-h;return n[p]&&n[l]&&n[c]&&n[d]?[.5*(n[p][0]*v+n[l][0]*w+n[c][0]*x+n[d][0]*y),.5*(n[p][1]*v+n[l][1]*w+n[c][1]*x+n[d][1]*y)]:[0,0]}clear(){this.points=[],this.totalLength=0}};function _7(e,n){f.useLayoutEffect(()=>{if(n&&"current"in n){let o=n?.current;if(!o)return;switch(e){case"transform_selected":{o.style.setProperty("--tl-performance-all","auto"),o.style.setProperty("--tl-performance-selected","transform, contents");break}case"transform_all":{o.style.setProperty("--tl-performance-all","transform, contents"),o.style.setProperty("--tl-performance-selected","transform, contents");break}case"translate_selected":{o.style.setProperty("--tl-performance-all","auto"),o.style.setProperty("--tl-performance-selected","transform");break}case"translate_all":{o.style.setProperty("--tl-performance-all","transform"),o.style.setProperty("--tl-performance-selected","transform");break}default:o.style.setProperty("--tl-performance-all","auto"),o.style.setProperty("--tl-performance-selected","auto")}}},[e])}var oi=$t(function(e){var n=e,{id:o,bounds:s,rotation:l=0,isGhost:c=!1,isSelected:d=!1,children:p}=n,h=no(n,["id","bounds","rotation","isGhost","isSelected","children"]);let g=W0(s,l);return f.createElement("div",lt({id:o,ref:g,className:`tl-positioned${c?" tl-ghost":""}${d?" tl-positioned-selected":""}`,"aria-label":"container","data-testid":"container"},h),p)}),w7=$t(function({brush:e,zoom:n,dashed:o}){return f.createElement(oi,{bounds:e,rotation:0},f.createElement(B1,null,f.createElement("rect",{className:"tl-brush"+(o?" dashed":""),opacity:1,x:0,y:0,width:e.width,height:e.height,"aria-label":"brush"}),o&&f.createElement("g",{className:"tl-dashed-brush-line"},f.createElement(Ui,{x1:0,y1:0,x2:e.width,y2:0,zoom:n}),f.createElement(Ui,{x1:e.width,y1:0,x2:e.width,y2:e.height,zoom:n}),f.createElement(Ui,{x1:0,y1:e.height,x2:e.width,y2:e.height,zoom:n}),f.createElement(Ui,{x1:0,y1:0,x2:0,y2:e.height,zoom:n}))))});function Ui({x1:e,y1:n,x2:o,y2:s,zoom:l}){let c=y1.getPerfectDashProps(Math.hypot(o-e,s-n),1/l,"dashed",1,!0,3);return f.createElement("line",{x1:e,y1:n,x2:o,y2:s,strokeWidth:1/l,strokeDasharray:c.strokeDasharray,strokeDashoffset:c.strokeDashoffset})}var b7=$t(function({bounds:e,isLocked:n,isHidden:o}){return f.createElement("rect",{className:["tl-bounds-center",n?"tl-dashed":""].join(" "),x:-1,y:-1,width:e.width+2,height:e.height+2,opacity:o?0:1,pointerEvents:"none","aria-label":"center handle"})}),x7=$t(function({bounds:e,targetSize:n,size:o,isHidden:s}){let l=oo("rotate");return f.createElement("g",{cursor:"grab",opacity:s?0:1},f.createElement("circle",lt({className:"tl-transparent","aria-label":"rotate handle transparent",cx:e.width/2,cy:o*-2,r:n,pointerEvents:s?"none":"all"},l)),f.createElement("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:e.width/2,cy:o*-2,r:o/2,pointerEvents:"none"}))}),y7={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},Ki=$t(function({size:e,targetSize:n,isHidden:o,corner:s,bounds:l}){let c=oo(s),d=s==="top_left_corner"||s==="top_right_corner",p=s==="top_left_corner"||s==="bottom_left_corner";return f.createElement("g",{opacity:o?0:1},f.createElement("rect",lt({className:"tl-transparent "+(o?"":y7[s]),"aria-label":"corner transparent",x:(p?-1:l.width+1)-n,y:(d?-1:l.height+1)-n,width:n*2,height:n*2,pointerEvents:o?"none":"all"},c)),f.createElement("rect",{className:"tl-corner-handle","aria-label":"corner handle",x:(p?-1:l.width+1)-e/2,y:(d?-1:l.height+1)-e/2,width:e,height:e,pointerEvents:"none"}))});function E7({size:e,bounds:n,isHidden:o}){let s=oo("left"),l=oo("center"),c=oo("right");return f.createElement("g",{cursor:"grab",transform:`translate(${n.width/2-e*4}, ${n.height+e*2})`,"aria-label":"link handle"},f.createElement("g",{className:"tl-transparent",pointerEvents:o?"none":"all"},f.createElement("rect",lt({x:0,y:0,width:e*2,height:e*2},s)),f.createElement("rect",lt({x:e*3,y:0,width:e*2,height:e*2},l)),f.createElement("rect",lt({x:e*6,y:0,width:e*2,height:e*2},c))),f.createElement("g",{className:"tl-rotate-handle",transform:`translate(${e/2}, ${e/2})`,"aria-label":"link rotate handle"},f.createElement("path",{d:`M 0,${e/2} L ${e},${e} ${e},0 Z`,pointerEvents:"none",opacity:o?0:1}),f.createElement("path",{transform:`translate(${e*3}, 0)`,d:`M 0,0 L ${e},0 ${e/2},${e} Z`,pointerEvents:"none",opacity:o?0:1}),f.createElement("path",{transform:`translate(${e*6}, 0)`,d:`M ${e},${e/2} L 0,0 0,${e} Z`,pointerEvents:"none",opacity:o?0:1})))}var L7={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},Xi=$t(function({size:e,isHidden:n,bounds:o,edge:s}){let l=oo(s),c=s==="top_edge"||s==="bottom_edge",d=s==="right_edge"||s==="bottom_edge",{height:p,width:h}=o;return f.createElement("rect",lt({pointerEvents:n?"none":"all",className:"tl-transparent tl-edge-handle "+(n?"":L7[s]),"aria-label":`${s} handle`,opacity:n?0:1,x:c?e/2:(d?h+1:-1)-e/2,y:c?(d?p+1:-1)-e/2:e/2,width:c?Math.max(0,h+1-e):e,height:c?e:Math.max(0,p+1-e)},l))}),S7={right:0,bottomRight:45,bottom:90,bottomLeft:135,left:180,topLeft:225,top:270,topRight:315},Yr=$t(function({bounds:e,side:n,targetSize:o,size:s}){let l=o*2,c={left:-l,topLeft:-l,bottomLeft:-l,right:e.width,topRight:e.width,bottomRight:e.width,top:e.width/2-l/2,bottom:e.width/2-l/2}[n],d={left:e.height/2-l/2,right:e.height/2-l/2,top:-l*2,topLeft:-l,topRight:-l,bottom:e.height,bottomLeft:e.height,bottomRight:e.height}[n],{callbacks:p,inputs:h}=d1(),g=f.useCallback(v=>{var w;v.stopPropagation();let x=h.pointerDown(v,n);(w=p.onShapeClone)==null||w.call(p,x,v)},[p.onShapeClone]);return f.createElement("g",{className:"tl-clone-target",transform:`translate(${c}, ${d})`,"aria-label":"clone button"},f.createElement("rect",{className:"tl-transparent",width:o*2,height:o*2}),f.createElement("g",{className:"tl-clone-button-target",onPointerDown:g,transform:`translate(${o}, ${o}) rotate(${S7[n]})`},f.createElement("circle",{className:"tl-transparent ",r:o}),f.createElement("path",{className:"tl-clone-button",d:`M -${s/2},-${s/2} L ${s/2},0 -${s/2},${s/2} Z`,strokeLinejoin:"round"})))});function R7({targetSize:e,size:n,bounds:o}){return f.createElement(f.Fragment,null,f.createElement(Yr,{targetSize:e,size:n,bounds:o,side:"top"}),f.createElement(Yr,{targetSize:e,size:n,bounds:o,side:"right"}),f.createElement(Yr,{targetSize:e,size:n,bounds:o,side:"bottom"}),f.createElement(Yr,{targetSize:e,size:n,bounds:o,side:"left"}),f.createElement(Yr,{targetSize:e,size:n,bounds:o,side:"topLeft"}),f.createElement(Yr,{targetSize:e,size:n,bounds:o,side:"topRight"}),f.createElement(Yr,{targetSize:e,size:n,bounds:o,side:"bottomLeft"}),f.createElement(Yr,{targetSize:e,size:n,bounds:o,side:"bottomRight"}))}var B1=f.forwardRef(function(e,n){var o=e,{id:s,className:l="",children:c}=o,d=no(o,["id","className","children"]);return f.createElement(ra,null,()=>f.createElement("svg",lt({ref:n,className:`tl-positioned-svg ${l}`},d),f.createElement("g",{id:s,className:"tl-centered-g"},c)))}),I7=$t(function({zoom:e,bounds:n,viewportWidth:o,rotation:s,isHidden:l,isLocked:c,hideCloneHandles:d,hideResizeHandles:p,hideRotateHandle:h,hideBindingHandles:g}){let v=(o<768?16:8)/e,w=8/e,x=Math.min(n.width,n.height)*e,y=!h&&!l&&!c&&x>32,E=!l&&!c&&x>24,R=!l&&!c&&x>20,P=!d&&x>24;return f.createElement(oi,{bounds:n,rotation:s},f.createElement(B1,null,f.createElement(b7,{bounds:n,isLocked:c,isHidden:l}),!p&&!c?f.createElement(f.Fragment,null,f.createElement(Xi,{targetSize:v,size:w,bounds:n,edge:"top_edge",isHidden:!E}),f.createElement(Xi,{targetSize:v,size:w,bounds:n,edge:"right_edge",isHidden:!E}),f.createElement(Xi,{targetSize:v,size:w,bounds:n,edge:"bottom_edge",isHidden:!E}),f.createElement(Xi,{targetSize:v,size:w,bounds:n,edge:"left_edge",isHidden:!E}),f.createElement(Ki,{targetSize:v,size:w,bounds:n,isHidden:l||!R,corner:"top_left_corner"}),f.createElement(Ki,{targetSize:v,size:w,bounds:n,isHidden:l||!R,corner:"top_right_corner"}),f.createElement(Ki,{targetSize:v,size:w,bounds:n,isHidden:l||!R,corner:"bottom_right_corner"}),f.createElement(Ki,{targetSize:v,size:w,bounds:n,isHidden:l||!R,corner:"bottom_left_corner"})):null,y&&f.createElement(x7,{targetSize:v,size:w,bounds:n,isHidden:!E}),P&&f.createElement(R7,{bounds:n,targetSize:v,size:w}),!g&&f.createElement(E7,{targetSize:v,size:w,bounds:n,isHidden:!E})))}),M7=$t(function({bounds:e,rotation:n,isHidden:o}){let s=g7();return f.createElement(oi,{bounds:e,rotation:n},f.createElement(B1,null,f.createElement("rect",lt({className:"tl-bounds-bg","aria-label":"bounds bg",width:e.width,height:e.height,opacity:o?0:1},s))))}),P7=$t(function({id:e,point:n}){let o=h7(e);return f.createElement(oi,{bounds:y1.translateBounds({minX:0,minY:0,maxX:0,maxY:0,width:0,height:0},n)},f.createElement(B1,null,f.createElement("g",lt({className:"tl-handle","aria-label":"handle"},o),f.createElement("circle",{className:"tl-handle-bg",pointerEvents:"all"}),f.createElement("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4}))))}),$7=$t(function({shape:e,zoom:n}){if(e.handles===void 0)return null;let o=null,s=Object.values(e.handles).reduce((l,c)=>{let d=L.add(c.point,e.point);return(!o||L.dist(d,o)*n>=32)&&(l.push(c),o=d),l},[]);return s.length===1?null:f.createElement(f.Fragment,null,s.map(l=>f.createElement(P7,{key:e.id+"_"+l.id,id:l.id,point:L.add(l.point,e.point)})))}),H7=$t(function(e){let n=e.utils.getRef(e.shape);return f.createElement(e.utils.Component,lt({ref:n},e))}),k7=f.memo(H7,(e,n)=>e.isHovered!==n.isHovered||e.isSelected!==n.isSelected||e.isEditing!==n.isEditing||e.isBinding!==n.isBinding||e.isGhost!==n.isGhost||e.meta!==n.meta?!1:n.shape!==e.shape?!n.utils.shouldRender(n.shape,e.shape):!0),O7=$t(function(e){var n=e,{shape:o,utils:s,meta:l}=n,c=no(n,["shape","utils","meta"]);let{callbacks:d}=d1(),p=s.getBounds(o),h=t7(o.id);return f.createElement(oi,{id:o.id,bounds:p,rotation:o.rotation,"data-shape":o.type,isGhost:c.isGhost,isSelected:c.isSelected},f.createElement(k7,lt({shape:o,utils:s,meta:l,events:h,bounds:p,onShapeChange:d.onShapeChange,onShapeBlur:d.onShapeBlur},c)))}),T7=$t(function e(n){var o=n,{shape:s,utils:l,meta:c,children:d}=o,p=no(o,["shape","utils","meta","children"]);return f.createElement(f.Fragment,null,f.createElement(O7,lt({shape:s,utils:l[s.type],meta:c},p)),d&&d.map(h=>f.createElement(e,lt({key:h.shape.id,utils:l},h))))}),ba=$t(function({isHovered:e=!1,isSelected:n=!1,isEditing:o=!1,shape:s,user:l,meta:c}){let{shapeUtils:d}=d1(),p=d[s.type],h=p.getBounds(s),g=W0(h,s.rotation);return f.createElement("div",{ref:g,draggable:!1,className:["tl-indicator","tl-absolute",n&&!l?"tl-selected":"tl-hovered",o?"tl-editing":"",s.isLocked?"tl-locked":""].join(" ")},f.createElement("svg",{width:"100%",height:"100%"},f.createElement("g",{className:"tl-centered-g",stroke:l?.color},f.createElement(p.Indicator,{shape:s,meta:c,user:l,bounds:h,isSelected:n,isHovered:e}))))}),B7=$t(function({page:e,pageState:n,assets:o,hideBounds:s,hideHandles:l,hideIndicators:c,hideBindingHandles:d,hideCloneHandles:p,hideRotateHandle:h,hideResizeHandles:g,meta:v}){let{bounds:w,shapeUtils:x}=d1(),y=n7(e,n,o,v),{bounds:E,isLinked:R,isLocked:P,rotation:$}=f7(e,n,x),{selectedIds:I,hoveredId:B,editingId:j,camera:{zoom:T}}=n,D=c,A=!0,X=!1,ne,he=I.map(Se=>e.shapes[Se]);if(he.length===1){let Se=he[0];X=j===Se.id,X&&(D=!0);let ve=x[Se.type];A=p||!ve.showCloneHandles,Se.handles!==void 0&&!X&&(ne=Se)}return f.createElement(f.Fragment,null,E&&f.createElement(M7,{bounds:E,rotation:$,isHidden:s}),y.map(Se=>f.createElement(T7,lt({key:Se.shape.id,utils:x},Se))),!D&&he.map(Se=>f.createElement(ba,{key:"selected_"+Se.id,shape:Se,meta:v,isSelected:!0,isEditing:X})),!D&&B&&B!==j&&f.createElement(ba,{key:"hovered_"+B,shape:e.shapes[B],meta:v,isHovered:!0}),E&&f.createElement(I7,{zoom:T,bounds:E,viewportWidth:w.width,isLocked:P,rotation:$,isHidden:s,hideRotateHandle:h,hideResizeHandles:g,hideBindingHandles:d||!R,hideCloneHandles:A}),!l&&ne&&f.createElement($7,{shape:ne,zoom:T}))});function V7({user:e}){let n=f.useRef(null);return C7(n,e.point,e.session),f.createElement("svg",{ref:n,className:"tl-absolute tl-user tl-counter-scaled",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 35 35",fill:"none",fillRule:"evenodd"},f.createElement("g",{fill:"rgba(0,0,0,.2)",transform:"translate(1,1)"},f.createElement("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),f.createElement("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})),f.createElement("g",{fill:"white"},f.createElement("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),f.createElement("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})),f.createElement("g",{fill:e.color},f.createElement("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),f.createElement("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"})))}function j7({userId:e,users:n}){return f.createElement(f.Fragment,null,Object.values(n).filter(o=>o&&o.id!==e).map(o=>f.createElement(V7,{key:o.id,user:o})))}var A7=e=>{let n=e.parentElement;for(;n;){if(n===document.body)return document;let{overflowY:o}=window.getComputedStyle(n);if(n.scrollHeight>n.clientHeight&&(o==="auto"||o==="scroll"||o==="overlay"))return n;n=n.parentElement}return document};function D7(e,n){let{inputs:o,callbacks:s}=d1(),l=f.useRef(!1),c=f.useCallback(()=>{var d,p;if(l.current){let h=(d=e.current)==null?void 0:d.getBoundingClientRect();if(h){let g={minX:h.left,maxX:h.left+h.width,minY:h.top,maxY:h.top+h.height,width:h.width,height:h.height};o.bounds=g,n(g),(p=s.onBoundsChange)==null||p.call(s,g)}}else l.current=!0},[e,o,s.onBoundsChange]);f.useEffect(()=>{let d=e.current?A7(e.current):document,p=H.debounce(c,100);return d.addEventListener("scroll",p),window.addEventListener("resize",p),()=>{d.removeEventListener("scroll",p),window.removeEventListener("resize",p)}},[]),f.useEffect(()=>{let d=new c3(p=>{o.isPinching||p[0].contentRect&&c()});return e.current&&d.observe(e.current),()=>{d.disconnect()}},[e,o]),f.useEffect(()=>{c()},[e])}function Z7({userId:e,users:n,meta:o,page:s}){let{shapeUtils:l}=d1();return f.createElement(f.Fragment,null,Object.values(n).filter(Boolean).filter(c=>c.id!==e&&c.selectedIds.length>0).map(c=>{let d=c.selectedIds.map(h=>s.shapes[h]).filter(Boolean);if(d.length===0)return null;let p=y1.getCommonBounds(d.map(h=>l[h.type].getBounds(h)));return f.createElement(f.Fragment,{key:c.id+"_shapes"},f.createElement("div",{className:"tl-absolute tl-user-indicator-bounds",style:{backgroundColor:c.color+"0d",borderColor:c.color+"78",transform:`translate(${p.minX}px, ${p.minY}px)`,width:p.width,height:p.height,pointerEvents:"none"}}),d.map(h=>f.createElement(ba,{key:`${c.id}_${h.id}_indicator`,shape:h,user:c,meta:o,isHovered:!0})))}))}var z7=$t(function({snapLines:e}){return f.createElement(f.Fragment,null,e.map((n,o)=>f.createElement(W7,{key:o,snapLine:n})))}),W7=$t(function({snapLine:e}){let n=y1.getBoundsFromPoints(e);return f.createElement(f.Fragment,null,f.createElement("line",{className:"tl-snap-line",x1:n.minX,y1:n.minY,x2:n.maxX,y2:n.maxY}),e.map(([o,s],l)=>f.createElement("use",{key:l,href:"#tl-snap-point",x:o,y:s})))}),F0=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]];function F7({grid:e,camera:n}){return f.createElement("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},f.createElement("defs",null,F0.map(([o,s,l],c)=>{let d=l*e*n.zoom,p=n.point[0]*n.zoom,h=n.point[1]*n.zoom,g=p>0?p%d:d+p%d,v=h>0?h%d:d+h%d,w=n.zoom<s?y1.modulate(n.zoom,[o,s],[0,1]):1;return f.createElement("pattern",{key:`grid-pattern-${c}`,id:`grid-${c}`,width:d,height:d,patternUnits:"userSpaceOnUse"},f.createElement("circle",{className:"tl-grid-dot",cx:g,cy:v,r:1,opacity:w}))})),F0.map((o,s)=>f.createElement("rect",{key:`grid-rect-${s}`,width:"100%",height:"100%",fill:`url(#grid-${s})`})))}var N7=$t(function({camera:{zoom:e,point:n},children:o}){let s=2.5/e;return f.createElement("svg",{className:"tl-overlay"},f.createElement("defs",null,f.createElement("g",{id:"tl-snap-point"},f.createElement("path",{className:"tl-snap-point",d:`M ${-s},${-s} L ${s},${s} M ${-s},${s} L ${s},${-s}`}))),f.createElement("g",{transform:`scale(${e}) translate(${n})`},o))}),U7=$t(function({points:e,zoom:n}){if(e.length===0)return null;let o=y1.getSvgPathFromStroke(ei(e,{size:16/n,start:{taper:!0}}));return f.createElement("path",{d:o,className:"tl-erase-line"})}),K7=$t(function({id:e,page:n,pageState:o,assets:s,snapLines:l,eraseLine:c,grid:d,users:p,userId:h,meta:g,performanceMode:v,externalContainerRef:w,showDashedBrush:x,hideHandles:y,hideBounds:E,hideIndicators:R,hideBindingHandles:P,hideCloneHandles:$,hideResizeHandles:I,hideRotateHandle:B,hideGrid:j,onBoundsChange:T}){let D=f.useRef(null),A=f.useRef(o.camera.zoom);A.current=o.camera.zoom,q3(A,w||D),D7(D,T),Q3(),p7(D);let X=f.useRef(null),ne=f.useRef(null);u7(ne,X,o),_7(v,X),v7();let he=e7();return f.createElement("div",{id:e,className:"tl-container",ref:X},f.createElement("div",lt({id:"canvas",className:"tl-absolute tl-canvas",ref:D},he),!j&&d&&f.createElement(F7,{grid:d,camera:o.camera}),f.createElement("div",{ref:ne,className:"tl-absolute tl-layer","data-testid":"layer"},f.createElement(B7,{page:n,pageState:o,assets:s,hideBounds:E,hideIndicators:R,hideHandles:y,hideBindingHandles:P,hideCloneHandles:$,hideResizeHandles:I,hideRotateHandle:B,meta:g}),p&&h&&f.createElement(Z7,{userId:h,users:p,page:n,meta:g}),o.brush&&f.createElement(w7,{brush:o.brush,dashed:x,zoom:o.camera.zoom}),p&&f.createElement(j7,{userId:h,users:p})),f.createElement(N7,{camera:o.camera},c&&f.createElement(U7,{points:c,zoom:o.camera.zoom}),l&&f.createElement(z7,{snapLines:l}))))}),X7=250,jt=class{constructor(){vt(this,"pointer"),vt(this,"keyboard"),vt(this,"keys",{}),vt(this,"isPinching",!1),vt(this,"bounds",{minX:0,maxX:640,minY:0,maxY:480,width:640,height:480}),vt(this,"pointerUpTime",0),vt(this,"activePointer"),vt(this,"panStart",e=>{var n,o;let{shiftKey:s,ctrlKey:l,metaKey:c,altKey:d}=e,p={target:"wheel",pointerId:((n=this.pointer)==null?void 0:n.pointerId)||0,origin:((o=this.pointer)==null?void 0:o.origin)||[0,0],delta:[0,0],pressure:.5,point:jt.getPoint(e,this.bounds),shiftKey:s,ctrlKey:l,metaKey:c,altKey:d,spaceKey:this.keys[" "]};return this.pointer=p,p}),vt(this,"pan",(e,n)=>{if(!this.pointer||this.pointer.target!=="wheel")return this.panStart(n);let{shiftKey:o,ctrlKey:s,metaKey:l,altKey:c}=n,d=this.pointer,p=jt.getPoint(n,this.bounds),h=q1(lt({},d),{target:"wheel",delta:e,point:p,shiftKey:o,ctrlKey:s,metaKey:l,altKey:c,spaceKey:this.keys[" "]});return this.pointer=h,h}),vt(this,"keydown",e=>{var n,o;let{shiftKey:s,ctrlKey:l,metaKey:c,altKey:d}=e;return this.keys[e.key]=!0,{point:((n=this.pointer)==null?void 0:n.point)||[0,0],origin:((o=this.pointer)==null?void 0:o.origin)||[0,0],key:e.key,keys:Object.keys(this.keys),shiftKey:s,ctrlKey:l,metaKey:H.isDarwin()?c:l,altKey:d}}),vt(this,"keyup",e=>{var n,o;let{shiftKey:s,ctrlKey:l,metaKey:c,altKey:d}=e;return delete this.keys[e.key],{point:((n=this.pointer)==null?void 0:n.point)||[0,0],origin:((o=this.pointer)==null?void 0:o.origin)||[0,0],key:e.key,keys:Object.keys(this.keys),shiftKey:s,ctrlKey:l,metaKey:H.isDarwin()?c:l,altKey:d}})}pointerIsValid(e){if("pointerId"in e&&this.activePointer&&this.activePointer!==e.pointerId)return!1;if("touches"in e){let n=e.changedTouches[0];if(this.activePointer&&this.activePointer!==n.identifier)return!1}return!0}touchStart(e,n){let{shiftKey:o,ctrlKey:s,metaKey:l,altKey:c}=e,d=e.changedTouches[0];this.activePointer=d.identifier;let p={target:n,pointerId:d.identifier,origin:jt.getPoint(d,this.bounds),delta:[0,0],point:jt.getPoint(d,this.bounds),pressure:jt.getPressure(d),shiftKey:o,ctrlKey:s,metaKey:H.isDarwin()?l:s,altKey:c,spaceKey:this.keys[" "]};return this.pointer=p,p}touchEnd(e,n){let{shiftKey:o,ctrlKey:s,metaKey:l,altKey:c}=e,d=e.changedTouches[0],p={target:n,pointerId:d.identifier,origin:jt.getPoint(d,this.bounds),delta:[0,0],point:jt.getPoint(d,this.bounds),pressure:jt.getPressure(d),shiftKey:o,ctrlKey:s,metaKey:H.isDarwin()?l:s,altKey:c,spaceKey:this.keys[" "]};return this.pointer=p,this.activePointer=void 0,p}touchMove(e,n){let{shiftKey:o,ctrlKey:s,metaKey:l,altKey:c}=e,d=e.changedTouches[0],p=this.pointer,h=jt.getPoint(d,this.bounds),g=p?.point?L.sub(h,p.point):[0,0],v=q1(lt({origin:h},p),{target:n,pointerId:d.identifier,point:h,delta:g,pressure:jt.getPressure(d),shiftKey:o,ctrlKey:s,metaKey:H.isDarwin()?l:s,altKey:c,spaceKey:this.keys[" "]});return this.pointer=v,v}pointerDown(e,n){let{shiftKey:o,ctrlKey:s,metaKey:l,altKey:c}=e,d=jt.getPoint(e,this.bounds);this.activePointer=e.pointerId;let p={target:n,pointerId:e.pointerId,origin:d,point:d,delta:[0,0],pressure:jt.getPressure(e),shiftKey:o,ctrlKey:s,metaKey:H.isDarwin()?l:s,altKey:c,spaceKey:this.keys[" "]};return this.pointer=p,p}pointerEnter(e,n){let{shiftKey:o,ctrlKey:s,metaKey:l,altKey:c}=e,d=jt.getPoint(e,this.bounds),p={target:n,pointerId:e.pointerId,origin:d,delta:[0,0],point:d,pressure:jt.getPressure(e),shiftKey:o,ctrlKey:s,metaKey:H.isDarwin()?l:s,altKey:c,spaceKey:this.keys[" "]};return this.pointer=p,p}pointerMove(e,n){let{shiftKey:o,ctrlKey:s,metaKey:l,altKey:c}=e,d=this.pointer,p=jt.getPoint(e,this.bounds),h=d?.point?L.sub(p,d.point):[0,0],g=q1(lt({origin:p},d),{target:n,pointerId:e.pointerId,point:p,delta:h,pressure:jt.getPressure(e),shiftKey:o,ctrlKey:s,metaKey:H.isDarwin()?l:s,altKey:c,spaceKey:this.keys[" "]});return this.pointer=g,g}pointerUp(e,n){let{shiftKey:o,ctrlKey:s,metaKey:l,altKey:c}=e,d=this.pointer,p=jt.getPoint(e,this.bounds),h=d?.point?L.sub(p,d.point):[0,0];this.activePointer=void 0;let g=q1(lt({origin:p},d),{target:n,pointerId:e.pointerId,point:p,delta:h,pressure:jt.getPressure(e),shiftKey:o,ctrlKey:s,metaKey:H.isDarwin()?l:s,altKey:c,spaceKey:this.keys[" "]});return this.pointer=g,this.pointerUpTime=performance.now(),g}isDoubleClick(){if(!this.pointer)return!1;let{origin:e,point:n}=this.pointer,o=performance.now()-this.pointerUpTime<X7&&L.dist(e,n)<4;return o&&(this.activePointer=void 0),o}clear(){this.pointer=void 0}resetDoubleClick(){this.pointerUpTime=0}pinch(e,n){let{shiftKey:o,ctrlKey:s,metaKey:l,altKey:c}=this.keys,d=L.sub(n,e),p={pointerId:0,target:"pinch",origin:n,delta:d,point:L.sub(L.toFixed(e),[this.bounds.minX,this.bounds.minY]),pressure:.5,shiftKey:o,ctrlKey:s,metaKey:H.isDarwin()?l:s,altKey:c,spaceKey:this.keys[" "]};return this.pointer=p,p}reset(){this.pointerUpTime=0,this.pointer=void 0,this.keyboard=void 0,this.activePointer=void 0,this.keys={}}static getPoint(e,n){return[+e.clientX.toFixed(2)-n.minX,+e.clientY.toFixed(2)-n.minY]}static getPressure(e){return"pressure"in e&&+e.pressure.toFixed(2)||.5}static commandKey(){return H.isDarwin()?"\u2318":"Ctrl"}},Up=new jt,G7=$t(function(e){var n=e,{id:o="tl",shapeUtils:s,page:l,pageState:c,assets:d=Y7,users:p,userId:h,theme:g,meta:v,snapLines:w,eraseLine:x,grid:y,containerRef:E,performanceMode:R,hideHandles:P=!1,hideIndicators:$=!1,hideCloneHandles:I=!1,hideBindingHandles:B=!1,hideResizeHandles:j=!1,hideRotateHandles:T=!1,hideBounds:D=!1,hideGrid:A=!0,showDashedBrush:X=!1}=n,ne=no(n,["id","shapeUtils","page","pageState","assets","users","userId","theme","meta","snapLines","eraseLine","grid","containerRef","performanceMode","hideHandles","hideIndicators","hideCloneHandles","hideBindingHandles","hideResizeHandles","hideRotateHandles","hideBounds","hideGrid","showDashedBrush"]);d7(g,"#"+o);let he=f.useRef(null),Se=f.useRef(c);f.useEffect(()=>{Se.current=c},[c]);let[ve,me]=f.useState(()=>({callbacks:ne,shapeUtils:s,rSelectionBounds:he,rPageState:Se,bounds:{minX:0,minY:0,maxX:1/0,maxY:1/0,width:1/0,height:1/0},inputs:new jt})),rt=f.useCallback(ht=>{me(ye=>q1(lt({},ye),{bounds:ht}))},[]);return f.createElement(ma.Provider,{value:ve},f.createElement(K7,{id:o,page:l,pageState:c,assets:d,snapLines:w,eraseLine:x,grid:y,users:p,userId:h,externalContainerRef:E,hideBounds:D,hideIndicators:$,hideHandles:P,hideCloneHandles:I,hideBindingHandles:B,hideRotateHandle:T,hideResizeHandles:j,hideGrid:A,showDashedBrush:X,onBoundsChange:rt,performanceMode:R,meta:v}))}),Y7={},Gi=f.forwardRef(function(e,n){var o=e,{children:s,className:l=""}=o,c=no(o,["children","className"]);return f.createElement(ra,null,()=>f.createElement("div",lt({ref:n,className:`tl-positioned-div ${l}`,draggable:!1},c),f.createElement("div",{className:"tl-inner-div"},s)))}),xa=class{constructor(){vt(this,"refMap",new Map),vt(this,"boundsCache",new WeakMap),vt(this,"showCloneHandles",!1),vt(this,"hideBounds",!1),vt(this,"isStateful",!1),vt(this,"shouldRender",(e,n)=>!0),vt(this,"getRef",e=>(this.refMap.has(e.id)||this.refMap.set(e.id,f.createRef()),this.refMap.get(e.id))),vt(this,"hitTestBounds",(e,n)=>{let o=this.getBounds(e),s=y1.getRotatedCorners(o,e.rotation);return s.every(l=>y1.pointInBounds(l,n))||T0(s,n).length>0}),vt(this,"getRotatedBounds",e=>y1.getBoundsFromPoints(y1.getRotatedCorners(this.getBounds(e),e.rotation)))}};vt(xa,"Component",e=>f.forwardRef(e)),vt(xa,"Indicator",e=>e);/**
 * String.prototype.replaceAll() polyfill
 * https://gomakethings.com/how-to-replace-a-section-of-a-string-with-another-one-with-vanilla-js/
 * @author Chris Ferdinandi
 * @license MIT
 */var io=V(7807);function C1(e){return new Promise((n,o)=>{e.oncomplete=e.onsuccess=()=>n(e.result),e.onabort=e.onerror=()=>o(e.error)})}function q7(e,n){const o=indexedDB.open(e);o.onupgradeneeded=()=>o.result.createObjectStore(n);const s=C1(o);return(l,c)=>s.then(d=>c(d.transaction(n,l).objectStore(n)))}let ya;function J1(){return ya||(ya=q7("keyval-store","keyval")),ya}function Ea(e,n=J1()){return n("readonly",o=>C1(o.get(e)))}function Yi(e,n,o=J1()){return o("readwrite",s=>(s.put(n,e),C1(s.transaction)))}function Kp(e,n=J1()){return n("readwrite",o=>(e.forEach(s=>o.put(s[1],s[0])),C1(o.transaction)))}function Xp(e,n=J1()){return n("readonly",o=>Promise.all(e.map(s=>C1(o.get(s)))))}function Gp(e,n,o=J1()){return o("readwrite",s=>new Promise((l,c)=>{s.get(e).onsuccess=function(){try{s.put(n(this.result),e),l(C1(s.transaction))}catch(d){c(d)}}}))}function Yp(e,n=J1()){return n("readwrite",o=>(o.delete(e),C1(o.transaction)))}function qp(e,n=J1()){return n("readwrite",o=>(e.forEach(s=>o.delete(s)),C1(o.transaction)))}function Jp(e=J1()){return e("readwrite",n=>(n.clear(),C1(n.transaction)))}function La(e,n){return e.openCursor().onsuccess=function(){!this.result||(n(this.result),this.result.continue())},C1(e.transaction)}function Qp(e=J1()){return e("readonly",n=>{if(n.getAllKeys)return C1(n.getAllKeys());const o=[];return La(n,s=>o.push(s.key)).then(()=>o)})}function eg(e=J1()){return e("readonly",n=>{if(n.getAll)return C1(n.getAll());const o=[];return La(n,s=>o.push(s.value)).then(()=>o)})}function tg(e=J1()){return e("readonly",n=>{if(n.getAll&&n.getAllKeys)return Promise.all([C1(n.getAllKeys()),C1(n.getAll())]).then(([s,l])=>s.map((c,d)=>[c,l[d]]));const o=[];return e("readonly",s=>La(s,l=>o.push([l.key,l.value])).then(()=>o))})}function J7(e){let n;const o=new Set,s=(g,v)=>{const w=typeof g=="function"?g(n):g;if(w!==n){const x=n;n=v?w:Object.assign({},n,w),o.forEach(y=>y(n,x))}},l=()=>n,c=(g,v=l,w=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let x=v(n);function y(){const E=v(n);if(!w(x,E)){const R=x;g(x=E,R)}}return o.add(y),()=>o.delete(y)},h={setState:s,getState:l,subscribe:(g,v,w)=>v||w?c(g,v,w):(o.add(g),()=>o.delete(g)),destroy:()=>o.clear()};return n=e(s,l,h),h}var Q7=V(3403),Sa=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Ra(e,n,o,s){e.addEventListener?e.addEventListener(n,o,s):e.attachEvent&&e.attachEvent("on".concat(n),function(){o(window.event)})}function N0(e,n){for(var o=n.slice(0,n.length-1),s=0;s<o.length;s++)o[s]=e[o[s].toLowerCase()];return o}function U0(e){typeof e!="string"&&(e=""),e=e.replace(/\s/g,"");for(var n=e.split(","),o=n.lastIndexOf("");o>=0;)n[o-1]+=",",n.splice(o,1),o=n.lastIndexOf("");return n}function e4(e,n){for(var o=e.length>=n.length?e:n,s=e.length>=n.length?n:e,l=!0,c=0;c<o.length;c++)s.indexOf(o[c])===-1&&(l=!1);return l}for(var Ia={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":Sa?173:189,"=":Sa?61:187,";":Sa?59:186,"'":222,"[":219,"]":221,"\\":220},qr={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},Ma={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},n1={16:!1,18:!1,17:!1,91:!1},At={},qi=1;qi<20;qi++)Ia["f".concat(qi)]=111+qi;var St=[],K0=!1,X0="all",G0=[],Ji=function(n){return Ia[n.toLowerCase()]||qr[n.toLowerCase()]||n.toUpperCase().charCodeAt(0)};function Y0(e){X0=e||"all"}function ii(){return X0||"all"}function t4(){return St.slice(0)}function r4(e){var n=e.target||e.srcElement,o=n.tagName,s=!0;return(n.isContentEditable||(o==="INPUT"||o==="TEXTAREA"||o==="SELECT")&&!n.readOnly)&&(s=!1),s}function n4(e){return typeof e=="string"&&(e=Ji(e)),St.indexOf(e)!==-1}function o4(e,n){var o,s;e||(e=ii());for(var l in At)if(Object.prototype.hasOwnProperty.call(At,l))for(o=At[l],s=0;s<o.length;)o[s].scope===e?o.splice(s,1):s++;ii()===e&&Y0(n||"all")}function i4(e){var n=e.keyCode||e.which||e.charCode,o=St.indexOf(n);if(o>=0&&St.splice(o,1),e.key&&e.key.toLowerCase()==="meta"&&St.splice(0,St.length),(n===93||n===224)&&(n=91),n in n1){n1[n]=!1;for(var s in qr)qr[s]===n&&(E1[s]=!1)}}function s4(e){if(!e)Object.keys(At).forEach(function(d){return delete At[d]});else if(Array.isArray(e))e.forEach(function(d){d.key&&Pa(d)});else if(typeof e=="object")e.key&&Pa(e);else if(typeof e=="string"){for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];var l=o[0],c=o[1];typeof l=="function"&&(c=l,l=""),Pa({key:e,scope:l,method:c,splitKey:"+"})}}var Pa=function(n){var o=n.key,s=n.scope,l=n.method,c=n.splitKey,d=c===void 0?"+":c,p=U0(o);p.forEach(function(h){var g=h.split(d),v=g.length,w=g[v-1],x=w==="*"?"*":Ji(w);if(!!At[x]){s||(s=ii());var y=v>1?N0(qr,g):[];At[x]=At[x].filter(function(E){var R=l?E.method===l:!0;return!(R&&E.scope===s&&e4(E.mods,y))})}})};function q0(e,n,o,s){if(n.element===s){var l;if(n.scope===o||n.scope==="all"){l=n.mods.length>0;for(var c in n1)Object.prototype.hasOwnProperty.call(n1,c)&&(!n1[c]&&n.mods.indexOf(+c)>-1||n1[c]&&n.mods.indexOf(+c)===-1)&&(l=!1);(n.mods.length===0&&!n1[16]&&!n1[18]&&!n1[17]&&!n1[91]||l||n.shortcut==="*")&&n.method(e,n)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}}function J0(e,n){var o=At["*"],s=e.keyCode||e.which||e.charCode;if(!!E1.filter.call(this,e)){if((s===93||s===224)&&(s=91),St.indexOf(s)===-1&&s!==229&&St.push(s),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(E){var R=Ma[E];e[E]&&St.indexOf(R)===-1?St.push(R):!e[E]&&St.indexOf(R)>-1?St.splice(St.indexOf(R),1):E==="metaKey"&&e[E]&&St.length===3&&(e.ctrlKey||e.shiftKey||e.altKey||(St=St.slice(St.indexOf(R))))}),s in n1){n1[s]=!0;for(var l in qr)qr[l]===s&&(E1[l]=!0);if(!o)return}for(var c in n1)Object.prototype.hasOwnProperty.call(n1,c)&&(n1[c]=e[Ma[c]]);e.getModifierState&&!(e.altKey&&!e.ctrlKey)&&e.getModifierState("AltGraph")&&(St.indexOf(17)===-1&&St.push(17),St.indexOf(18)===-1&&St.push(18),n1[17]=!0,n1[18]=!0);var d=ii();if(o)for(var p=0;p<o.length;p++)o[p].scope===d&&(e.type==="keydown"&&o[p].keydown||e.type==="keyup"&&o[p].keyup)&&q0(e,o[p],d,n);if(s in At){for(var h=0;h<At[s].length;h++)if((e.type==="keydown"&&At[s][h].keydown||e.type==="keyup"&&At[s][h].keyup)&&At[s][h].key){for(var g=At[s][h],v=g.splitKey,w=g.key.split(v),x=[],y=0;y<w.length;y++)x.push(Ji(w[y]));x.sort().join("")===St.sort().join("")&&q0(e,g,d,n)}}}}function a4(e){return G0.indexOf(e)>-1}function E1(e,n,o){St=[];var s=U0(e),l=[],c="all",d=document,p=0,h=!1,g=!0,v="+",w=!1;for(o===void 0&&typeof n=="function"&&(o=n),Object.prototype.toString.call(n)==="[object Object]"&&(n.scope&&(c=n.scope),n.element&&(d=n.element),n.keyup&&(h=n.keyup),n.keydown!==void 0&&(g=n.keydown),n.capture!==void 0&&(w=n.capture),typeof n.splitKey=="string"&&(v=n.splitKey)),typeof n=="string"&&(c=n);p<s.length;p++)e=s[p].split(v),l=[],e.length>1&&(l=N0(qr,e)),e=e[e.length-1],e=e==="*"?"*":Ji(e),e in At||(At[e]=[]),At[e].push({keyup:h,keydown:g,scope:c,mods:l,shortcut:s[p],method:o,key:s[p],splitKey:v,element:d});typeof d<"u"&&!a4(d)&&window&&(G0.push(d),Ra(d,"keydown",function(x){J0(x,d)},w),K0||(K0=!0,Ra(window,"focus",function(){St=[]},w)),Ra(d,"keyup",function(x){J0(x,d),i4(x)},w))}function l4(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(At).forEach(function(o){var s=At[o].find(function(l){return l.scope===n&&l.shortcut===e});s&&s.method&&s.method()})}var $a={setScope:Y0,getScope:ii,deleteScope:o4,getPressedKeyCodes:t4,isPressed:n4,filter:r4,trigger:l4,unbind:s4,keyMap:Ia,modifier:qr,modifierMap:Ma};for(var Ha in $a)Object.prototype.hasOwnProperty.call($a,Ha)&&(E1[Ha]=$a[Ha]);if(typeof window<"u"){var c4=window.hotkeys;E1.noConflict=function(e){return e&&window.hotkeys===E1&&(window.hotkeys=c4),E1},window.hotkeys=E1}function rg(){return hotkeys.isPressed}E1.filter=function(){return!0};var Q0=function(n,o){var s=n.target,l=s&&s.tagName;return Boolean(l&&o&&o.includes(l))},d4=function(n){return Q0(n,["INPUT","TEXTAREA","SELECT"])};function ke(e,n,o,s){o instanceof Array&&(s=o,o=void 0);var l=o||{},c=l.enableOnTags,d=l.filter,p=l.keyup,h=l.keydown,g=l.filterPreventDefault,v=g===void 0?!0:g,w=l.enabled,x=w===void 0?!0:w,y=l.enableOnContentEditable,E=y===void 0?!1:y,R=(0,f.useRef)(null),P=(0,f.useCallback)(function($,I){var B;return d&&!d($)?!v:d4($)&&!Q0($,c)||(B=$.target)!=null&&B.isContentEditable&&!E?!0:R.current===null||document.activeElement===R.current?(n($,I),!0):!1},s?[R,c,d].concat(s):[R,c,d]);return(0,f.useEffect)(function(){if(!x){E1.unbind(e,P);return}return p&&h!==!0&&(o.keydown=!1),E1(e,o||{},P),function(){return E1.unbind(e,P)}},[P,e,x]),R}var ng=E1.isPressed,dt=V(863);function Ge(e,n){if(e==null)return{};var o={},s=Object.keys(e),l,c;for(c=0;c<s.length;c++)l=s[c],!(n.indexOf(l)>=0)&&(o[l]=e[l]);return o}var og=null,ig=null,sg=null,ag=null,lg=null,cg=null,u4=["color"],e2=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,u4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M9 3C9 2.44772 8.55229 2 8 2H7C6.44772 2 6 2.44772 6 3L6 14H1.5C1.22386 14 1 14.2239 1 14.5C1 14.7761 1.22386 15 1.5 15L6 15H9H13.5C13.7761 15 14 14.7761 14 14.5C14 14.2239 13.7761 14 13.5 14H9V3Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),f4=["color"],t2=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,f4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M1.99988 6C1.44759 6 0.999877 6.44772 0.999877 7L0.999877 8C0.999877 8.55228 1.44759 9 1.99988 9L6.99988 9L6.99988 13.5C6.99988 13.7761 7.22374 14 7.49988 14C7.77602 14 7.99988 13.7761 7.99988 13.5L7.99988 9L12.9999 9C13.5522 9 13.9999 8.55228 13.9999 8L13.9999 7C13.9999 6.44772 13.5522 6 12.9999 6L7.99988 6L7.99988 1.5C7.99988 1.22386 7.77602 1 7.49988 1C7.22373 1 6.99988 1.22386 6.99988 1.5L6.99988 6L1.99988 6Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),h4=["color"],r2=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,h4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M6.99988 1C6.44759 1 5.99988 1.44772 5.99988 2V7H1.49988C1.22374 7 0.999878 7.22386 0.999878 7.5C0.999878 7.77614 1.22374 8 1.49988 8H5.99988V13C5.99988 13.5523 6.44759 14 6.99988 14H7.99988C8.55216 14 8.99988 13.5523 8.99988 13V8H13.4999C13.776 8 13.9999 7.77614 13.9999 7.5C13.9999 7.22386 13.776 7 13.4999 7H8.99988V2C8.99988 1.44772 8.55216 1 7.99988 1L6.99988 1Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),p4=["color"],n2=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,p4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M0.499995 0.999995C0.223855 0.999995 -5.58458e-07 1.22385 -5.46388e-07 1.49999L-2.18554e-08 13.4999C-9.78492e-09 13.776 0.223855 13.9999 0.499995 13.9999C0.776136 13.9999 0.999991 13.776 0.999991 13.4999L0.999991 8.99993L12 8.99993C12.5523 8.99993 13 8.55222 13 7.99993L13 6.99994C13 6.44766 12.5523 5.99995 12 5.99995L0.999991 5.99995L0.999991 1.49999C0.999991 1.22385 0.776135 0.999995 0.499995 0.999995Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),g4=["color"],o2=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,g4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M14.4999 1C14.2237 1 13.9999 1.22386 13.9999 1.5L13.9999 6L2.99988 6C2.44759 6 1.99988 6.44772 1.99988 7L1.99988 8C1.99988 8.55228 2.44759 9 2.99988 9L13.9999 9L13.9999 13.5C13.9999 13.7761 14.2237 14 14.4999 14C14.776 14 14.9999 13.7761 14.9999 13.5L14.9999 9L14.9999 6L14.9999 1.5C14.9999 1.22386 14.776 1 14.4999 1Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),v4=["color"],i2=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,v4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M1.5 0C1.22386 0 1 0.223858 1 0.5C1 0.776142 1.22386 1 1.5 1H6V12C6 12.5523 6.44772 13 7 13H8C8.55228 13 9 12.5523 9 12V1H13.5C13.7761 1 14 0.776142 14 0.5C14 0.223858 13.7761 0 13.5 0H9H6H1.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),dg=null,ug=null,C4=["color"],m4=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,C4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M8.8914 2.1937C9.1158 2.35464 9.16725 2.66701 9.00631 2.89141L2.47388 12H13.5C13.7761 12 14 12.2239 14 12.5C14 12.7762 13.7761 13 13.5 13H1.5C1.31254 13 1.14082 12.8952 1.0552 12.7284C0.969578 12.5616 0.984438 12.361 1.09369 12.2086L8.19369 2.30862C8.35462 2.08422 8.667 2.03277 8.8914 2.1937ZM11.1 6.50001C11.1 6.22387 11.3238 6.00001 11.6 6.00001C11.8761 6.00001 12.1 6.22387 12.1 6.50001C12.1 6.77615 11.8761 7.00001 11.6 7.00001C11.3238 7.00001 11.1 6.77615 11.1 6.50001ZM10.4 4.00001C10.1239 4.00001 9.90003 4.22387 9.90003 4.50001C9.90003 4.77615 10.1239 5.00001 10.4 5.00001C10.6762 5.00001 10.9 4.77615 10.9 4.50001C10.9 4.22387 10.6762 4.00001 10.4 4.00001ZM12.1 8.50001C12.1 8.22387 12.3238 8.00001 12.6 8.00001C12.8761 8.00001 13.1 8.22387 13.1 8.50001C13.1 8.77615 12.8761 9.00001 12.6 9.00001C12.3238 9.00001 12.1 8.77615 12.1 8.50001ZM13.4 10C13.1239 10 12.9 10.2239 12.9 10.5C12.9 10.7761 13.1239 11 13.4 11C13.6762 11 13.9 10.7761 13.9 10.5C13.9 10.2239 13.6762 10 13.4 10Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),fg=null,hg=null,pg=null,gg=null,vg=null,Cg=null,_4=["color"],w4=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,_4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M7.5 2C7.77614 2 8 2.22386 8 2.5L8 11.2929L11.1464 8.14645C11.3417 7.95118 11.6583 7.95118 11.8536 8.14645C12.0488 8.34171 12.0488 8.65829 11.8536 8.85355L7.85355 12.8536C7.75979 12.9473 7.63261 13 7.5 13C7.36739 13 7.24021 12.9473 7.14645 12.8536L3.14645 8.85355C2.95118 8.65829 2.95118 8.34171 3.14645 8.14645C3.34171 7.95118 3.65829 7.95118 3.85355 8.14645L7 11.2929L7 2.5C7 2.22386 7.22386 2 7.5 2Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),mg=null,_g=null,wg=null,bg=null,xg=null,yg=null,b4=["color"],x4=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,b4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M3.64645 11.3536C3.45118 11.1583 3.45118 10.8417 3.64645 10.6465L10.2929 4L6 4C5.72386 4 5.5 3.77614 5.5 3.5C5.5 3.22386 5.72386 3 6 3L11.5 3C11.6326 3 11.7598 3.05268 11.8536 3.14645C11.9473 3.24022 12 3.36739 12 3.5L12 9.00001C12 9.27615 11.7761 9.50001 11.5 9.50001C11.2239 9.50001 11 9.27615 11 9.00001V4.70711L4.35355 11.3536C4.15829 11.5488 3.84171 11.5488 3.64645 11.3536Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),y4=["color"],E4=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,y4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M7.14645 2.14645C7.34171 1.95118 7.65829 1.95118 7.85355 2.14645L11.8536 6.14645C12.0488 6.34171 12.0488 6.65829 11.8536 6.85355C11.6583 7.04882 11.3417 7.04882 11.1464 6.85355L8 3.70711L8 12.5C8 12.7761 7.77614 13 7.5 13C7.22386 13 7 12.7761 7 12.5L7 3.70711L3.85355 6.85355C3.65829 7.04882 3.34171 7.04882 3.14645 6.85355C2.95118 6.65829 2.95118 6.34171 3.14645 6.14645L7.14645 2.14645Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),L4=["color"],S4=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,L4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M2.5 2H12.5C12.7761 2 13 2.22386 13 2.5V12.5C13 12.7761 12.7761 13 12.5 13H2.5C2.22386 13 2 12.7761 2 12.5V2.5C2 2.22386 2.22386 2 2.5 2ZM1 2.5C1 1.67157 1.67157 1 2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5ZM7.5 4C7.77614 4 8 3.77614 8 3.5C8 3.22386 7.77614 3 7.5 3C7.22386 3 7 3.22386 7 3.5C7 3.77614 7.22386 4 7.5 4ZM8 5.5C8 5.77614 7.77614 6 7.5 6C7.22386 6 7 5.77614 7 5.5C7 5.22386 7.22386 5 7.5 5C7.77614 5 8 5.22386 8 5.5ZM7.5 8C7.77614 8 8 7.77614 8 7.5C8 7.22386 7.77614 7 7.5 7C7.22386 7 7 7.22386 7 7.5C7 7.77614 7.22386 8 7.5 8ZM10 7.5C10 7.77614 9.77614 8 9.5 8C9.22386 8 9 7.77614 9 7.5C9 7.22386 9.22386 7 9.5 7C9.77614 7 10 7.22386 10 7.5ZM11.5 8C11.7761 8 12 7.77614 12 7.5C12 7.22386 11.7761 7 11.5 7C11.2239 7 11 7.22386 11 7.5C11 7.77614 11.2239 8 11.5 8Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Eg=null,Lg=null,Sg=null,Rg=null,Ig=null,Mg=null,Pg=null,$g=null,Hg=null,kg=null,Og=null,Tg=null,Bg=null,Vg=null,jg=null,Ag=null,Dg=null,Zg=null,zg=null,Wg=null,Fg=null,Ng=null,Ug=null,Kg=null,Xg=null,Gg=null,Yg=null,qg=null,Jg=null,Qg=null,ev=null,tv=null,rv=null,nv=null,ov=null,iv=null,sv=null,av=null,lv=null,cv=null,R4=["color"],I4=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,R4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M12.5 2H2.5C2.22386 2 2 2.22386 2 2.5V12.5C2 12.7761 2.22386 13 2.5 13H12.5C12.7761 13 13 12.7761 13 12.5V2.5C13 2.22386 12.7761 2 12.5 2ZM2.5 1C1.67157 1 1 1.67157 1 2.5V12.5C1 13.3284 1.67157 14 2.5 14H12.5C13.3284 14 14 13.3284 14 12.5V2.5C14 1.67157 13.3284 1 12.5 1H2.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),dv=null,uv=null,fv=null,hv=null,pv=null,gv=null,vv=null,Cv=null,mv=null,_v=null,wv=null,bv=null,xv=null,yv=null,Ev=null,Lv=null,Sv=null,Rv=null,Iv=null,Mv=null,Pv=null,$v=null,Hv=null,kv=null,Ov=null,Tv=null,M4=["color"],ka=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,M4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Bv=null,Vv=null,jv=null,Av=null,Dv=null,Zv=null,zv=null,Wv=null,P4=["color"],$4=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,P4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Fv=null,Nv=null,H4=["color"],k4=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,H4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M0.877075 7.49991C0.877075 3.84222 3.84222 0.877075 7.49991 0.877075C11.1576 0.877075 14.1227 3.84222 14.1227 7.49991C14.1227 11.1576 11.1576 14.1227 7.49991 14.1227C3.84222 14.1227 0.877075 11.1576 0.877075 7.49991ZM7.49991 1.82708C4.36689 1.82708 1.82708 4.36689 1.82708 7.49991C1.82708 10.6329 4.36689 13.1727 7.49991 13.1727C10.6329 13.1727 13.1727 10.6329 13.1727 7.49991C13.1727 4.36689 10.6329 1.82708 7.49991 1.82708Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Uv=null,Kv=null,O4=["color"],T4=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,O4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H11.5C12.3284 14 13 13.3284 13 12.5V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM11 2V2.25C11 2.66421 10.6642 3 10.25 3H4.75C4.33579 3 4 2.66421 4 2.25V2H3.5C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V2.5C12 2.22386 11.7761 2 11.5 2H11Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Xv=null,Gv=null,Yv=null,qv=null,Jv=null,Qv=null,eC=null,tC=null,rC=null,nC=null,oC=null,iC=null,sC=null,aC=null,lC=null,cC=null,dC=null,uC=null,fC=null,hC=null,pC=null,gC=null,vC=null,CC=null,mC=null,_C=null,wC=null,bC=null,xC=null,yC=null,EC=null,LC=null,B4=["color"],V4=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,B4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M1 9.50006C1 10.3285 1.67157 11.0001 2.5 11.0001H4L4 10.0001H2.5C2.22386 10.0001 2 9.7762 2 9.50006L2 2.50006C2 2.22392 2.22386 2.00006 2.5 2.00006L9.5 2.00006C9.77614 2.00006 10 2.22392 10 2.50006V4.00002H5.5C4.67158 4.00002 4 4.67159 4 5.50002V12.5C4 13.3284 4.67158 14 5.5 14H12.5C13.3284 14 14 13.3284 14 12.5V5.50002C14 4.67159 13.3284 4.00002 12.5 4.00002H11V2.50006C11 1.67163 10.3284 1.00006 9.5 1.00006H2.5C1.67157 1.00006 1 1.67163 1 2.50006V9.50006ZM5 5.50002C5 5.22388 5.22386 5.00002 5.5 5.00002H12.5C12.7761 5.00002 13 5.22388 13 5.50002V12.5C13 12.7762 12.7761 13 12.5 13H5.5C5.22386 13 5 12.7762 5 12.5V5.50002Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),SC=null,RC=null,IC=null,MC=null,PC=null,$C=null,HC=null,kC=null,OC=null,TC=null,BC=null,VC=null,jC=null,AC=null,DC=null,ZC=null,zC=null,WC=null,FC=null,NC=null,UC=null,KC=null,XC=null,GC=null,YC=null,qC=null,JC=null,QC=null,em=null,tm=null,j4=["color"],s2=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,j4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M3.29227 0.048984C3.47033 -0.032338 3.67946 -0.00228214 3.8274 0.125891L12.8587 7.95026C13.0134 8.08432 13.0708 8.29916 13.0035 8.49251C12.9362 8.68586 12.7578 8.81866 12.5533 8.82768L9.21887 8.97474L11.1504 13.2187C11.2648 13.47 11.1538 13.7664 10.9026 13.8808L8.75024 14.8613C8.499 14.9758 8.20255 14.8649 8.08802 14.6137L6.15339 10.3703L3.86279 12.7855C3.72196 12.934 3.50487 12.9817 3.31479 12.9059C3.1247 12.8301 3 12.6461 3 12.4414V0.503792C3 0.308048 3.11422 0.130306 3.29227 0.048984ZM4 1.59852V11.1877L5.93799 9.14425C6.05238 9.02363 6.21924 8.96776 6.38319 8.99516C6.54715 9.02256 6.68677 9.12965 6.75573 9.2809L8.79056 13.7441L10.0332 13.178L8.00195 8.71497C7.93313 8.56376 7.94391 8.38824 8.03072 8.24659C8.11753 8.10494 8.26903 8.01566 8.435 8.00834L11.2549 7.88397L4 1.59852Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),rm=null,nm=null,om=null,im=null,sm=null,am=null,lm=null,cm=null,dm=null,um=null,fm=null,hm=null,pm=null,gm=null,vm=null,Cm=null,mm=null,_m=null,wm=null,bm=null,A4=["color"],D4=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,A4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:s}))}),Z4=["color"],z4=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,Z4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),xm=null,ym=null,Em=null,Lm=null,Sm=null,Rm=null,Im=null,Mm=null,Pm=null,$m=null,Hm=null,km=null,Om=null,Tm=null,Bm=null,Vm=null,jm=null,Am=null,Dm=null,Zm=null,zm=null,Wm=null,Fm=null,Nm=null,Um=null,Km=null,Xm=null,Gm=null,Ym=null,qm=null,Jm=null,Qm=null,e_=null,t_=null,r_=null,n_=null,o_=null,i_=null,W4=["color"],F4=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,W4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M3 1C2.44771 1 2 1.44772 2 2V13C2 13.5523 2.44772 14 3 14H10.5C10.7761 14 11 13.7761 11 13.5C11 13.2239 10.7761 13 10.5 13H3V2L10.5 2C10.7761 2 11 1.77614 11 1.5C11 1.22386 10.7761 1 10.5 1H3ZM12.6036 4.89645C12.4083 4.70118 12.0917 4.70118 11.8964 4.89645C11.7012 5.09171 11.7012 5.40829 11.8964 5.60355L13.2929 7H6.5C6.22386 7 6 7.22386 6 7.5C6 7.77614 6.22386 8 6.5 8H13.2929L11.8964 9.39645C11.7012 9.59171 11.7012 9.90829 11.8964 10.1036C12.0917 10.2988 12.4083 10.2988 12.6036 10.1036L14.8536 7.85355C15.0488 7.65829 15.0488 7.34171 14.8536 7.14645L12.6036 4.89645Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),s_=null,a_=null,l_=null,c_=null,d_=null,u_=null,f_=null,h_=null,p_=null,g_=null,v_=null,C_=null,m_=null,__=null,w_=null,b_=null,x_=null,y_=null,E_=null,L_=null,S_=null,R_=null,I_=null,M_=null,P_=null,$_=null,H_=null,k_=null,O_=null,T_=null,B_=null,V_=null,j_=null,A_=null,D_=null,Z_=null,z_=null,W_=null,F_=null,N_=null,N4=["color"],U4=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,N4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M7.49933 0.25C3.49635 0.25 0.25 3.49593 0.25 7.50024C0.25 10.703 2.32715 13.4206 5.2081 14.3797C5.57084 14.446 5.70302 14.2222 5.70302 14.0299C5.70302 13.8576 5.69679 13.4019 5.69323 12.797C3.67661 13.235 3.25112 11.825 3.25112 11.825C2.92132 10.9874 2.44599 10.7644 2.44599 10.7644C1.78773 10.3149 2.49584 10.3238 2.49584 10.3238C3.22353 10.375 3.60629 11.0711 3.60629 11.0711C4.25298 12.1788 5.30335 11.8588 5.71638 11.6732C5.78225 11.205 5.96962 10.8854 6.17658 10.7043C4.56675 10.5209 2.87415 9.89918 2.87415 7.12104C2.87415 6.32925 3.15677 5.68257 3.62053 5.17563C3.54576 4.99226 3.29697 4.25521 3.69174 3.25691C3.69174 3.25691 4.30015 3.06196 5.68522 3.99973C6.26337 3.83906 6.8838 3.75895 7.50022 3.75583C8.1162 3.75895 8.73619 3.83906 9.31523 3.99973C10.6994 3.06196 11.3069 3.25691 11.3069 3.25691C11.7026 4.25521 11.4538 4.99226 11.3795 5.17563C11.8441 5.68257 12.1245 6.32925 12.1245 7.12104C12.1245 9.9063 10.4292 10.5192 8.81452 10.6985C9.07444 10.9224 9.30633 11.3648 9.30633 12.0413C9.30633 13.0102 9.29742 13.7922 9.29742 14.0299C9.29742 14.2239 9.42828 14.4496 9.79591 14.3788C12.6746 13.4179 14.75 10.7025 14.75 7.50024C14.75 3.49593 11.5036 0.25 7.49933 0.25Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),U_=null,K_=null,X_=null,G_=null,K4=["color"],X4=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,K4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M1.44995 0.949951C1.31734 0.949951 1.19016 1.00263 1.0964 1.0964C1.00263 1.19017 0.949951 1.31735 0.949951 1.44995L0.949966 3.44995C0.949969 3.7261 1.17383 3.94995 1.44997 3.94995C1.72611 3.94995 1.94997 3.72609 1.94997 3.44995L1.94995 1.94995H3.44997C3.72611 1.94995 3.94997 1.72609 3.94997 1.44995C3.94997 1.17381 3.72611 0.949951 3.44997 0.949951H1.44995ZM5.94995 0.949951C5.67381 0.949951 5.44995 1.17381 5.44995 1.44995C5.44995 1.72609 5.67381 1.94995 5.94995 1.94995H8.94995C9.22609 1.94995 9.44995 1.72609 9.44995 1.44995C9.44995 1.17381 9.22609 0.949951 8.94995 0.949951H5.94995ZM5.44995 13.45C5.44995 13.1738 5.67381 12.95 5.94995 12.95H8.94995C9.22609 12.95 9.44995 13.1738 9.44995 13.45C9.44995 13.7261 9.22609 13.95 8.94995 13.95H5.94995C5.67381 13.95 5.44995 13.7261 5.44995 13.45ZM1.94995 5.94995C1.94995 5.67381 1.72609 5.44995 1.44995 5.44995C1.17381 5.44995 0.949951 5.67381 0.949951 5.94995V8.94995C0.949951 9.22609 1.17381 9.44995 1.44995 9.44995C1.72609 9.44995 1.94995 9.22609 1.94995 8.94995V5.94995ZM13.45 5.44995C13.7261 5.44995 13.95 5.67381 13.95 5.94995V8.94995C13.95 9.22609 13.7261 9.44995 13.45 9.44995C13.1738 9.44995 12.95 9.22609 12.95 8.94995V5.94995C12.95 5.67381 13.1738 5.44995 13.45 5.44995ZM11.45 0.949951C11.1738 0.949951 10.95 1.17381 10.95 1.44995C10.95 1.72609 11.1738 1.94995 11.45 1.94995H12.9499V3.44995C12.9499 3.72609 13.1738 3.94995 13.4499 3.94995C13.7261 3.94995 13.9499 3.72609 13.9499 3.44995V1.44995C13.9499 1.17381 13.7252 0.949951 13.449 0.949951H11.45ZM1.44995 10.95C1.72609 10.95 1.94995 11.1738 1.94995 11.45V12.95H3.44997C3.72611 12.95 3.94997 13.1738 3.94997 13.45C3.94997 13.7261 3.72611 13.95 3.44997 13.95H1.44995C1.17381 13.95 0.949951 13.7261 0.949951 13.45V11.45C0.949951 11.1738 1.17381 10.95 1.44995 10.95ZM13.95 11.45C13.95 11.1738 13.7261 10.95 13.45 10.95C13.1738 10.9499 12.95 11.1738 12.95 11.4499L12.9491 12.95H11.45C11.1738 12.95 10.95 13.1738 10.95 13.45C10.95 13.7261 11.1738 13.95 11.45 13.95H13.4499C13.7261 13.95 13.9499 13.7261 13.9499 13.45L13.95 11.45Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Y_=null,q_=null,J_=null,Q_=null,G4=["color"],Y4=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,G4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M1.5 3C1.22386 3 1 3.22386 1 3.5C1 3.77614 1.22386 4 1.5 4H13.5C13.7761 4 14 3.77614 14 3.5C14 3.22386 13.7761 3 13.5 3H1.5ZM1 7.5C1 7.22386 1.22386 7 1.5 7H13.5C13.7761 7 14 7.22386 14 7.5C14 7.77614 13.7761 8 13.5 8H1.5C1.22386 8 1 7.77614 1 7.5ZM1 11.5C1 11.2239 1.22386 11 1.5 11H13.5C13.7761 11 14 11.2239 14 11.5C14 11.7761 13.7761 12 13.5 12H1.5C1.22386 12 1 11.7761 1 11.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),ew=null,tw=null,rw=null,nw=null,ow=null,iw=null,sw=null,aw=null,lw=null,cw=null,dw=null,uw=null,fw=null,hw=null,pw=null,gw=null,vw=null,Cw=null,mw=null,_w=null,ww=null,bw=null,xw=null,yw=null,Ew=null,Lw=null,Sw=null,Rw=null,Iw=null,Mw=null,Pw=null,$w=null,Hw=null,kw=null,Ow=null,Tw=null,Bw=null,Vw=null,jw=null,Aw=null,Dw=null,Zw=null,zw=null,Ww=null,Fw=null,Nw=null,Uw=null,Kw=null,Xw=null,Gw=null,Yw=null,qw=null,Jw=null,Qw=null,eb=null,tb=null,rb=null,nb=null,ob=null,ib=null,sb=null,ab=null,lb=null,cb=null,db=null,ub=null,q4=["color"],J4=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,q4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Q4=["color"],ed=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,Q4);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M7.4986 0C6.3257 0 5.36107 0.38943 4.73753 1.19361C4.23745 1.83856 4 2.68242 4 3.63325H5C5 2.84313 5.19691 2.23312 5.5278 1.80636C5.91615 1.30552 6.55152 1 7.4986 1C8.35683 1 8.96336 1.26502 9.35846 1.68623C9.75793 2.11211 10 2.76044 10 3.63601V6H3C2.44772 6 2 6.44772 2 7V13C2 13.5523 2.44772 14 3 14H12C12.5523 14 13 13.5523 13 13V7C13 6.44771 12.5523 6 12 6H11V3.63601C11 2.58135 10.7065 1.66167 10.0878 1.0021C9.46477 0.337871 8.57061 0 7.4986 0ZM3 7H12V13H3V7Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),fb=null,hb=null,pb=null,gb=null,vb=null,Cb=null,mb=null,_b=null,wb=null,bb=null,xb=null,yb=null,Eb=null,Lb=null,Sb=null,Rb=null,Ib=null,Mb=null,Pb=null,$b=null,Hb=null,kb=null,td=["color"],rd=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,td);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M5 1.5C5 1.22386 4.77614 1 4.5 1C4.22386 1 4 1.22386 4 1.5L4 7C4 7.01671 4.00082 7.03323 4.00242 7.04952C2.86009 7.28022 2 8.28967 2 9.5C2 10.7103 2.86009 11.7198 4.00242 11.9505C4.00082 11.9668 4 11.9833 4 12V13.5C4 13.7761 4.22386 14 4.5 14C4.77614 14 5 13.7761 5 13.5V12C5 11.9833 4.99918 11.9668 4.99758 11.9505C6.1399 11.7198 7 10.7103 7 9.5C7 8.28967 6.1399 7.28022 4.99758 7.04952C4.99918 7.03323 5 7.01671 5 7L5 1.5ZM11 1.5C11 1.22386 10.7761 1 10.5 1C10.2239 1 10 1.22386 10 1.5V3C10 3.01671 10.0008 3.03323 10.0024 3.04952C8.8601 3.28022 8 4.28967 8 5.5C8 6.71033 8.8601 7.71978 10.0024 7.95048C10.0008 7.96677 10 7.98329 10 8V13.5C10 13.7761 10.2239 14 10.5 14C10.7761 14 11 13.7761 11 13.5V8C11 7.98329 10.9992 7.96677 10.9976 7.95048C12.1399 7.71978 13 6.71033 13 5.5C13 4.28967 12.1399 3.28022 10.9976 3.04952C10.9992 3.03323 11 3.01671 11 3V1.5ZM4.5 8C3.67157 8 3 8.67157 3 9.5C3 10.3284 3.67157 11 4.5 11C5.32843 11 6 10.3284 6 9.5C6 8.67157 5.32843 8 4.5 8ZM9 5.5C9 4.67157 9.67157 4 10.5 4C11.3284 4 12 4.67157 12 5.5C12 6.32843 11.3284 7 10.5 7C9.67157 7 9 6.32843 9 5.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Ob=null,Tb=null,Bb=null,Vb=null,jb=null,Ab=null,Db=null,Zb=null,zb=null,Wb=null,Fb=null,Nb=null,Ub=null,Kb=null,Xb=null,Gb=null,Yb=null,qb=null,Jb=null,Qb=null,ex=null,tx=null,nd=["color"],od=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,nd);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M11.8536 1.14645C11.6583 0.951184 11.3417 0.951184 11.1465 1.14645L3.71455 8.57836C3.62459 8.66832 3.55263 8.77461 3.50251 8.89155L2.04044 12.303C1.9599 12.491 2.00189 12.709 2.14646 12.8536C2.29103 12.9981 2.50905 13.0401 2.69697 12.9596L6.10847 11.4975C6.2254 11.4474 6.3317 11.3754 6.42166 11.2855L13.8536 3.85355C14.0488 3.65829 14.0488 3.34171 13.8536 3.14645L11.8536 1.14645ZM4.42166 9.28547L11.5 2.20711L12.7929 3.5L5.71455 10.5784L4.21924 11.2192L3.78081 10.7808L4.42166 9.28547Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),id=["color"],sd=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,id);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M12.1464 1.14645C12.3417 0.951184 12.6583 0.951184 12.8535 1.14645L14.8535 3.14645C15.0488 3.34171 15.0488 3.65829 14.8535 3.85355L10.9109 7.79618C10.8349 7.87218 10.7471 7.93543 10.651 7.9835L6.72359 9.94721C6.53109 10.0435 6.29861 10.0057 6.14643 9.85355C5.99425 9.70137 5.95652 9.46889 6.05277 9.27639L8.01648 5.34897C8.06455 5.25283 8.1278 5.16507 8.2038 5.08907L12.1464 1.14645ZM12.5 2.20711L8.91091 5.79618L7.87266 7.87267L8.12731 8.12732L10.2038 7.08907L13.7929 3.5L12.5 2.20711ZM9.99998 2L8.99998 3H4.9C4.47171 3 4.18056 3.00039 3.95552 3.01877C3.73631 3.03668 3.62421 3.06915 3.54601 3.10899C3.35785 3.20487 3.20487 3.35785 3.10899 3.54601C3.06915 3.62421 3.03669 3.73631 3.01878 3.95552C3.00039 4.18056 3 4.47171 3 4.9V11.1C3 11.5283 3.00039 11.8194 3.01878 12.0445C3.03669 12.2637 3.06915 12.3758 3.10899 12.454C3.20487 12.6422 3.35785 12.7951 3.54601 12.891C3.62421 12.9309 3.73631 12.9633 3.95552 12.9812C4.18056 12.9996 4.47171 13 4.9 13H11.1C11.5283 13 11.8194 12.9996 12.0445 12.9812C12.2637 12.9633 12.3758 12.9309 12.454 12.891C12.6422 12.7951 12.7951 12.6422 12.891 12.454C12.9309 12.3758 12.9633 12.2637 12.9812 12.0445C12.9996 11.8194 13 11.5283 13 11.1V6.99998L14 5.99998V11.1V11.1207C14 11.5231 14 11.8553 13.9779 12.1259C13.9549 12.407 13.9057 12.6653 13.782 12.908C13.5903 13.2843 13.2843 13.5903 12.908 13.782C12.6653 13.9057 12.407 13.9549 12.1259 13.9779C11.8553 14 11.5231 14 11.1207 14H11.1H4.9H4.87934C4.47686 14 4.14468 14 3.87409 13.9779C3.59304 13.9549 3.33469 13.9057 3.09202 13.782C2.7157 13.5903 2.40973 13.2843 2.21799 12.908C2.09434 12.6653 2.04506 12.407 2.0221 12.1259C1.99999 11.8553 1.99999 11.5231 2 11.1207V11.1206V11.1V4.9V4.87935V4.87932V4.87931C1.99999 4.47685 1.99999 4.14468 2.0221 3.87409C2.04506 3.59304 2.09434 3.33469 2.21799 3.09202C2.40973 2.71569 2.7157 2.40973 3.09202 2.21799C3.33469 2.09434 3.59304 2.04506 3.87409 2.0221C4.14468 1.99999 4.47685 1.99999 4.87932 2H4.87935H4.9H9.99998Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),rx=null,nx=null,ox=null,ix=null,sx=null,ax=null,ad=["color"],ld=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,ad);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M13.5 13.95C13.7485 13.95 13.95 13.7485 13.95 13.5C13.95 13.2514 13.7485 13.05 13.5 13.05L1.49995 13.05C1.25142 13.05 1.04995 13.2514 1.04995 13.5C1.04995 13.7485 1.25142 13.95 1.49995 13.95L13.5 13.95ZM11.0681 7.5683C11.2439 7.39257 11.2439 7.10764 11.0681 6.93191C10.8924 6.75617 10.6075 6.75617 10.4317 6.93191L7.94993 9.41371L7.94993 1.49998C7.94993 1.25146 7.74846 1.04998 7.49993 1.04998C7.2514 1.04998 7.04993 1.25146 7.04993 1.49998L7.04993 9.41371L4.56813 6.93191C4.39239 6.75617 4.10746 6.75617 3.93173 6.93191C3.75599 7.10764 3.75599 7.39257 3.93173 7.5683L7.18173 10.8183C7.35746 10.994 7.64239 10.994 7.81812 10.8183L11.0681 7.5683Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),lx=null,cx=null,dx=null,ux=null,cd=["color"],dd=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,cd);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M1.50005 1.05005C1.25152 1.05005 1.05005 1.25152 1.05005 1.50005C1.05005 1.74858 1.25152 1.95005 1.50005 1.95005L13.5 1.95005C13.7486 1.95005 13.95 1.74858 13.95 1.50005C13.95 1.25152 13.7486 1.05005 13.5 1.05005H1.50005ZM3.93188 7.43169C3.75614 7.60743 3.75614 7.89236 3.93188 8.06809C4.10761 8.24383 4.39254 8.24383 4.56827 8.06809L7.05007 5.58629V13.5C7.05007 13.7485 7.25155 13.95 7.50007 13.95C7.7486 13.95 7.95007 13.7485 7.95007 13.5L7.95007 5.58629L10.4319 8.06809C10.6076 8.24383 10.8925 8.24383 11.0683 8.06809C11.244 7.89235 11.244 7.60743 11.0683 7.43169L7.81827 4.18169C7.64254 4.00596 7.35761 4.00596 7.18188 4.18169L3.93188 7.43169Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),fx=null,hx=null,ud=["color"],fd=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,ud);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M8 2.75C8 2.47386 7.77614 2.25 7.5 2.25C7.22386 2.25 7 2.47386 7 2.75V7H2.75C2.47386 7 2.25 7.22386 2.25 7.5C2.25 7.77614 2.47386 8 2.75 8H7V12.25C7 12.5261 7.22386 12.75 7.5 12.75C7.77614 12.75 8 12.5261 8 12.25V8H12.25C12.5261 8 12.75 7.77614 12.75 7.5C12.75 7.22386 12.5261 7 12.25 7H8V2.75Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),px=null,gx=null,vx=null,Cx=null,mx=null,_x=null,wx=null,bx=null,xx=null,yx=null,Ex=null,Lx=null,Sx=null,Rx=null,Ix=null,Mx=null,Px=null,$x=null,Hx=null,kx=null,hd=["color"],pd=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,hd);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M7.59664 2.93628C7.76085 3.06401 8.00012 2.94698 8.00012 2.73895V1.99998C9.98143 2 11.1848 2.3637 11.9105 3.08945C12.6363 3.81522 13 5.0186 13 6.99998C13 7.27613 13.2239 7.49998 13.5 7.49998C13.7761 7.49998 14 7.27613 14 6.99998C14 4.9438 13.6325 3.39719 12.6176 2.38234C11.6028 1.36752 10.0562 0.999999 8.00012 0.999984V0.261266C8.00012 0.0532293 7.76085 -0.0637944 7.59664 0.063928L6.00384 1.30277C5.87516 1.40286 5.87516 1.59735 6.00384 1.69744L7.59664 2.93628ZM9.5 5H2.5C2.22386 5 2 5.22386 2 5.5V12.5C2 12.7761 2.22386 13 2.5 13H9.5C9.77614 13 10 12.7761 10 12.5V5.5C10 5.22386 9.77614 5 9.5 5ZM2.5 4C1.67157 4 1 4.67157 1 5.5V12.5C1 13.3284 1.67157 14 2.5 14H9.5C10.3284 14 11 13.3284 11 12.5V5.5C11 4.67157 10.3284 4 9.5 4H2.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Ox=null,Tx=null,Bx=null,Vx=null,jx=null,Ax=null,Dx=null,Zx=null,zx=null,Wx=null,Fx=null,Nx=null,Ux=null,Kx=null,Xx=null,Gx=null,Yx=null,qx=null,Jx=null,Qx=null,ey=null,ty=null,ry=null,ny=null,oy=null,iy=null,sy=null,ay=null,ly=null,cy=null,dy=null,uy=null,fy=null,hy=null,py=null,gy=null,vy=null,Cy=null,my=null,_y=null,wy=null,by=null,gd=["color"],a2=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,gd);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M14.4999 0.999992C14.2237 0.999992 13.9999 1.22385 13.9999 1.49999L13.9999 13.4999C13.9999 13.776 14.2237 13.9999 14.4999 13.9999C14.776 13.9999 14.9999 13.776 14.9999 13.4999L14.9999 1.49999C14.9999 1.22385 14.776 0.999992 14.4999 0.999992ZM0.499996 0.999992C0.223856 0.999992 -9.78509e-09 1.22385 -2.18556e-08 1.49999L4.07279e-07 13.4999C3.95208e-07 13.776 0.223855 13.9999 0.499996 13.9999C0.776136 13.9999 0.999992 13.776 0.999992 13.4999L0.999992 1.49999C0.999992 1.22385 0.776136 0.999992 0.499996 0.999992ZM1.99998 6.99994C1.99998 6.44766 2.44769 5.99995 2.99998 5.99995L5.99995 5.99995C6.55223 5.99995 6.99994 6.44766 6.99994 6.99994L6.99994 7.99993C6.99994 8.55221 6.55223 8.99992 5.99995 8.99992L2.99998 8.99992C2.4477 8.99992 1.99998 8.55221 1.99998 7.99993L1.99998 6.99994ZM8.99993 5.99995C8.44765 5.99995 7.99993 6.44766 7.99993 6.99994L7.99993 7.99993C7.99993 8.55221 8.44765 8.99992 8.99993 8.99992L11.9999 8.99992C12.5522 8.99992 12.9999 8.55221 12.9999 7.99993L12.9999 6.99994C12.9999 6.44766 12.5522 5.99995 11.9999 5.99995L8.99993 5.99995Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),vd=["color"],l2=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,vd);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M0.999878 0.5C0.999878 0.223858 1.22374 0 1.49988 0H13.4999C13.776 0 13.9999 0.223858 13.9999 0.5C13.9999 0.776142 13.776 1 13.4999 1H1.49988C1.22374 1 0.999878 0.776142 0.999878 0.5ZM7 2C6.44772 2 6 2.44772 6 3V6C6 6.55228 6.44772 7 7 7H8C8.55228 7 9 6.55228 9 6V3C9 2.44772 8.55228 2 8 2H7ZM7 8C6.44772 8 6 8.44771 6 9V12C6 12.5523 6.44772 13 7 13H8C8.55228 13 9 12.5523 9 12V9C9 8.44772 8.55228 8 8 8H7ZM1.49988 14C1.22374 14 0.999878 14.2239 0.999878 14.5C0.999878 14.7761 1.22374 15 1.49988 15H13.4999C13.776 15 13.9999 14.7761 13.9999 14.5C13.9999 14.2239 13.776 14 13.4999 14H1.49988Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),xy=null,yy=null,Ey=null,Ly=null,Sy=null,Ry=null,Iy=null,My=null,Cd=["color"],md=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,Cd);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M1 1H1.5H13.5H14V1.5V13.5V14H13.5H1.5H1V13.5V1.5V1ZM2 2V13H13V2H2Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Py=null,$y=null,Hy=null,ky=null,Oy=null,Ty=null,By=null,Vy=null,jy=null,Ay=null,Dy=null,Zy=null,_d=["color"],c2=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,_d);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M14.4999 0.999992C14.2237 0.999992 13.9999 1.22385 13.9999 1.49999L13.9999 5.99995L0.999992 5.99995L0.999992 1.49999C0.999992 1.22385 0.776136 0.999992 0.499996 0.999992C0.223856 0.999992 -9.78509e-09 1.22385 -2.18556e-08 1.49999L4.07279e-07 13.4999C3.95208e-07 13.776 0.223855 13.9999 0.499996 13.9999C0.776136 13.9999 0.999992 13.776 0.999992 13.4999L0.999992 8.99992L13.9999 8.99992L13.9999 13.4999C13.9999 13.776 14.2237 13.9999 14.4999 13.9999C14.776 13.9999 14.9999 13.776 14.9999 13.4999L14.9999 1.49999C14.9999 1.22385 14.776 0.999992 14.4999 0.999992Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),wd=["color"],d2=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,wd);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M0.999878 0.5C0.999878 0.223858 1.22374 0 1.49988 0H13.4999C13.776 0 13.9999 0.223858 13.9999 0.5C13.9999 0.776142 13.776 1 13.4999 1H6H1.49988C1.22374 1 0.999878 0.776142 0.999878 0.5ZM9 14V1L6 1V14H1.49988C1.22374 14 0.999878 14.2239 0.999878 14.5C0.999878 14.7761 1.22374 15 1.49988 15H13.4999C13.776 15 13.9999 14.7761 13.9999 14.5C13.9999 14.2239 13.776 14 13.4999 14H9Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),zy=null,Wy=null,Fy=null,Ny=null,Uy=null,Ky=null,Xy=null,Gy=null,Yy=null,qy=null,Jy=null,Qy=null,bd=["color"],xd=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,bd);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M3.94993 2.95002L3.94993 4.49998C3.94993 4.74851 3.74845 4.94998 3.49993 4.94998C3.2514 4.94998 3.04993 4.74851 3.04993 4.49998V2.50004C3.04993 2.45246 3.05731 2.40661 3.07099 2.36357C3.12878 2.18175 3.29897 2.05002 3.49993 2.05002H11.4999C11.6553 2.05002 11.7922 2.12872 11.8731 2.24842C11.9216 2.32024 11.9499 2.40682 11.9499 2.50002L11.9499 2.50004V4.49998C11.9499 4.74851 11.7485 4.94998 11.4999 4.94998C11.2514 4.94998 11.0499 4.74851 11.0499 4.49998V2.95002H8.04993V12.05H9.25428C9.50281 12.05 9.70428 12.2515 9.70428 12.5C9.70428 12.7486 9.50281 12.95 9.25428 12.95H5.75428C5.50575 12.95 5.30428 12.7486 5.30428 12.5C5.30428 12.2515 5.50575 12.05 5.75428 12.05H6.94993V2.95002H3.94993Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),eE=null,tE=null,yd=["color"],Ed=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,yd);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M2 4.5C2 4.22386 2.22386 4 2.5 4H12.5C12.7761 4 13 4.22386 13 4.5C13 4.77614 12.7761 5 12.5 5H2.5C2.22386 5 2 4.77614 2 4.5ZM4 7.5C4 7.22386 4.22386 7 4.5 7H10.5C10.7761 7 11 7.22386 11 7.5C11 7.77614 10.7761 8 10.5 8H4.5C4.22386 8 4 7.77614 4 7.5ZM3 10.5C3 10.2239 3.22386 10 3.5 10H11.5C11.7761 10 12 10.2239 12 10.5C12 10.7761 11.7761 11 11.5 11H3.5C3.22386 11 3 10.7761 3 10.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Ld=["color"],Sd=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,Ld);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M2.5 4C2.22386 4 2 4.22386 2 4.5C2 4.77614 2.22386 5 2.5 5H12.5C12.7761 5 13 4.77614 13 4.5C13 4.22386 12.7761 4 12.5 4H2.5ZM2 7.5C2 7.22386 2.22386 7 2.5 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H2.5C2.22386 8 2 7.77614 2 7.5ZM2 10.5C2 10.2239 2.22386 10 2.5 10H12.5C12.7761 10 13 10.2239 13 10.5C13 10.7761 12.7761 11 12.5 11H2.5C2.22386 11 2 10.7761 2 10.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Rd=["color"],Id=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,Rd);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M2 4.5C2 4.22386 2.22386 4 2.5 4H12.5C12.7761 4 13 4.22386 13 4.5C13 4.77614 12.7761 5 12.5 5H2.5C2.22386 5 2 4.77614 2 4.5ZM2 7.5C2 7.22386 2.22386 7 2.5 7H7.5C7.77614 7 8 7.22386 8 7.5C8 7.77614 7.77614 8 7.5 8H2.5C2.22386 8 2 7.77614 2 7.5ZM2 10.5C2 10.2239 2.22386 10 2.5 10H10.5C10.7761 10 11 10.2239 11 10.5C11 10.7761 10.7761 11 10.5 11H2.5C2.22386 11 2 10.7761 2 10.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),rE=null,nE=null,Md=["color"],Pd=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,Md);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M2 4.5C2 4.22386 2.22386 4 2.5 4H12.5C12.7761 4 13 4.22386 13 4.5C13 4.77614 12.7761 5 12.5 5H2.5C2.22386 5 2 4.77614 2 4.5ZM7 7.5C7 7.22386 7.22386 7 7.5 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H7.5C7.22386 8 7 7.77614 7 7.5ZM4 10.5C4 10.2239 4.22386 10 4.5 10H12.5C12.7761 10 13 10.2239 13 10.5C13 10.7761 12.7761 11 12.5 11H4.5C4.22386 11 4 10.7761 4 10.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),oE=null,iE=null,sE=null,aE=null,lE=null,cE=null,dE=null,uE=null,fE=null,hE=null,pE=null,gE=null,vE=null,CE=null,mE=null,_E=null,wE=null,bE=null,xE=null,yE=null,EE=null,LE=null,SE=null,RE=null,IE=null,ME=null,PE=null,$E=null,HE=null,kE=null,OE=null,TE=null,BE=null,VE=null,$d=["color"],Hd=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,$d);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M7.23336 4.69629C7.23336 2.96884 8.63335 1.56857 10.36 1.56857C11.3736 1.56857 12.183 2.04804 12.7254 2.74385C13.3079 2.62467 13.8557 2.40913 14.3513 2.11508C14.1559 2.72598 13.7424 3.2396 13.2033 3.56463C13.2038 3.56568 13.2042 3.56674 13.2047 3.56779C13.7334 3.50361 14.2364 3.36302 14.7048 3.15546L14.7037 3.15715C14.3667 3.66183 13.9431 4.10736 13.4561 4.47034C13.4823 4.64672 13.4956 4.82427 13.4956 5.00079C13.4956 8.6871 10.6873 12.9746 5.52122 12.9746C3.93906 12.9746 2.46544 12.511 1.22505 11.7152C0.992632 11.5661 0.925108 11.2568 1.07423 11.0244C1.0874 11.0038 1.10183 10.9846 1.11734 10.9666C1.20582 10.8202 1.37438 10.7309 1.5554 10.7522C2.47066 10.8601 3.38568 10.7485 4.19219 10.3962C3.39226 10.0434 2.77129 9.35975 2.50204 8.51974C2.45359 8.3686 2.48835 8.20311 2.59351 8.08422C2.59716 8.0801 2.60087 8.07606 2.60464 8.0721C1.96391 7.50819 1.55973 6.68208 1.55973 5.76143V5.72759C1.55973 5.56814 1.64411 5.42059 1.78155 5.33974C1.82671 5.31317 1.87537 5.29511 1.92532 5.28558C1.70549 4.86154 1.58116 4.37984 1.58116 3.86958C1.58116 3.40165 1.58384 2.81192 1.91332 2.28081C1.98718 2.16175 2.10758 2.08915 2.2364 2.07195C2.42588 2.01237 2.64087 2.06969 2.77406 2.23302C3.86536 3.57126 5.44066 4.49583 7.23366 4.73961L7.23336 4.69629ZM5.52122 11.9746C4.73387 11.9746 3.97781 11.8435 3.27248 11.6023C4.13012 11.4538 4.95307 11.1159 5.66218 10.5602C5.81211 10.4427 5.87182 10.2435 5.81126 10.0629C5.7507 9.88234 5.583 9.75943 5.39255 9.75607C4.68968 9.74366 4.06712 9.39716 3.67793 8.86845C3.86828 8.85306 4.05428 8.82039 4.23445 8.77167C4.43603 8.71716 4.57363 8.53114 4.56674 8.32243C4.55985 8.11372 4.41029 7.93718 4.20555 7.89607C3.42694 7.73977 2.79883 7.16764 2.56169 6.42174C2.76255 6.47025 2.97102 6.4991 3.18482 6.5061C3.38563 6.51267 3.56646 6.38533 3.62795 6.19405C3.68943 6.00277 3.61666 5.79391 3.44963 5.68224C2.86523 5.29155 2.48116 4.62464 2.48116 3.86958C2.48116 3.70213 2.48352 3.55268 2.49355 3.41719C3.85115 4.79913 5.70873 5.68931 7.77588 5.79338C7.93225 5.80126 8.08328 5.73543 8.18395 5.61553C8.28463 5.49562 8.32332 5.33548 8.28851 5.18284C8.25255 5.02517 8.23336 4.86284 8.23336 4.69629C8.23336 3.52085 9.18591 2.56857 10.36 2.56857C11.5943 2.56857 12.4956 3.71208 12.4956 5.00079C12.4956 8.25709 10.0202 11.9746 5.52122 11.9746Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),jE=null,AE=null,DE=null,ZE=null,zE=null,WE=null,FE=null,NE=null,UE=null,KE=null,kd=["color"],Od=(0,f.forwardRef)(function(e,n){var o=e.color,s=o===void 0?"currentColor":o,l=Ge(e,kd);return(0,f.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),(0,f.createElement)("path",{d:"M7.49998 1L6.92321 2.00307L1.17498 12L0.599976 13H1.7535H13.2464H14.4L13.825 12L8.07674 2.00307L7.49998 1ZM7.49998 3.00613L2.3285 12H12.6714L7.49998 3.00613Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),XE=null,GE=null,YE=null,qE=null,JE=null,QE=null,eL=null,tL=null,rL=null,nL=null,oL=null,iL=null,sL=null,aL=null,lL=null,cL=null,Qi=V(4867),Td=V(8210),so=V(9600),lr=V(3688),u2=V(4135),f2=V(8841),o1=V(8886),h2=Object.getOwnPropertySymbols,Bd=Object.prototype.hasOwnProperty,Vd=Object.prototype.propertyIsEnumerable,Cn=(e,n)=>{var o={};for(var s in e)Bd.call(e,s)&&n.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&h2)for(var s of h2(e))n.indexOf(s)<0&&Vd.call(e,s)&&(o[s]=e[s]);return o};const[jd,dL]=(0,f2.b)("AlertDialog",[lr.p8]),mn=(0,lr.p8)(),Ad=e=>{const n=e,{__scopeAlertDialog:o}=n,s=Cn(n,["__scopeAlertDialog"]),l=mn(o);return f.createElement(lr.fC,(0,o1.Z)({},l,s,{modal:!0}))},Dd=f.forwardRef((e,n)=>{const o=e,{__scopeAlertDialog:s}=o,l=Cn(o,["__scopeAlertDialog"]),c=mn(s);return f.createElement(lr.xz,(0,o1.Z)({},c,l,{ref:n}))}),Zd=e=>{const n=e,{__scopeAlertDialog:o}=n,s=Cn(n,["__scopeAlertDialog"]),l=mn(o);return f.createElement(lr.h_,(0,o1.Z)({},l,s))},zd=f.forwardRef((e,n)=>{const o=e,{__scopeAlertDialog:s}=o,l=Cn(o,["__scopeAlertDialog"]),c=mn(s);return f.createElement(lr.aV,(0,o1.Z)({},c,l,{ref:n}))}),[Wd,Fd]=jd("AlertDialogContent"),Nd=f.forwardRef((e,n)=>{const o=e,{__scopeAlertDialog:s,children:l}=o,c=Cn(o,["__scopeAlertDialog","children"]),d=mn(s),p=f.useRef(null),h=(0,u2.e)(n,p),g=f.useRef(null);return f.createElement(lr.jm,{contentName:"AlertDialogContent",titleName:Ud,docsSlug:"alert-dialog"},f.createElement(Wd,{scope:s,cancelRef:g},f.createElement(lr.VY,(0,o1.Z)({role:"alertdialog"},d,c,{ref:h,onOpenAutoFocus:(0,so.M)(c.onOpenAutoFocus,v=>{var w;v.preventDefault(),(w=g.current)===null||w===void 0||w.focus({preventScroll:!0})}),onPointerDownOutside:v=>v.preventDefault(),onInteractOutside:v=>v.preventDefault()}),f.createElement(Td.A4,null,l),!1)))}),Ud="AlertDialogTitle",uL=null,fL=null,Kd=f.forwardRef((e,n)=>{const o=e,{__scopeAlertDialog:s}=o,l=Cn(o,["__scopeAlertDialog"]),c=mn(s);return f.createElement(lr.x8,(0,o1.Z)({},c,l,{ref:n}))}),Xd=f.forwardRef((e,n)=>{const o=e,{__scopeAlertDialog:s}=o,l=Cn(o,["__scopeAlertDialog"]),{cancelRef:c}=Fd("AlertDialogCancel",s),d=mn(s),p=(0,u2.e)(n,c);return f.createElement(lr.x8,(0,o1.Z)({},d,l,{ref:p}))}),Gd=Ad,Yd=Dd,qd=Zd,Jd=zd,Qd=Nd,e8=Kd,t8=Xd,hL=null,pL=null;var r8=V(3084),cr=V(2486),n8=V(3118),o8=Object.defineProperty,i8=Object.defineProperties,s8=Object.getOwnPropertyDescriptors,es=Object.getOwnPropertySymbols,p2=Object.prototype.hasOwnProperty,g2=Object.prototype.propertyIsEnumerable,v2=(e,n,o)=>n in e?o8(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,ts=(e,n)=>{for(var o in n||(n={}))p2.call(n,o)&&v2(e,o,n[o]);if(es)for(var o of es(n))g2.call(n,o)&&v2(e,o,n[o]);return e},C2=(e,n)=>i8(e,s8(n)),ao=(e,n)=>{var o={};for(var s in e)p2.call(e,s)&&n.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&es)for(var s of es(e))n.indexOf(s)<0&&g2.call(e,s)&&(o[s]=e[s]);return o};const[m2,gL]=(0,f2.b)("ContextMenu",[cr.Wf]),_n=(0,cr.Wf)(),[_2,Oa]=m2("ContextMenu"),a8=e=>{const{__scopeContextMenu:n,children:o,onOpenChange:s,dir:l,modal:c=!0}=e,[d,p]=f.useState(!1),h=c8("ContextMenu",n),g=_n(n),v=(0,r8.W)(s),w=f.useCallback(x=>{p(x),v(x)},[v]);return h.isInsideContent?f.createElement(_2,{scope:n,isRootMenu:!1,open:d,onOpenChange:w,modal:c},f.createElement(cr.Tr,(0,o1.Z)({},g,{open:d,onOpenChange:w}),o)):f.createElement(_2,{scope:n,isRootMenu:!0,open:d,onOpenChange:w,modal:c},f.createElement(cr.fC,(0,o1.Z)({},g,{dir:l,open:d,onOpenChange:w,modal:c}),o))},l8=f.forwardRef((e,n)=>{const o=e,{__scopeContextMenu:s}=o,l=ao(o,["__scopeContextMenu"]),c=Oa("ContextMenuTrigger",s),d=_n(s),p=f.useRef({x:0,y:0}),h=f.useRef({getBoundingClientRect:()=>DOMRect.fromRect(ts({width:0,height:0},p.current))}),g=f.useRef(0),v=f.useCallback(()=>window.clearTimeout(g.current),[]),w=x=>{p.current={x:x.clientX,y:x.clientY},c.onOpenChange(!0)};return f.useEffect(()=>v,[v]),f.createElement(w2,{scope:s,isInsideContent:!1},f.createElement(cr.ee,(0,o1.Z)({},d,{virtualRef:h})),f.createElement(n8.W.span,(0,o1.Z)({},l,{ref:n,style:ts({WebkitTouchCallout:"none"},e.style),onContextMenu:(0,so.M)(e.onContextMenu,x=>{v(),x.preventDefault(),w(x)}),onPointerDown:(0,so.M)(e.onPointerDown,rs(x=>{v(),g.current=window.setTimeout(()=>w(x),700)})),onPointerMove:(0,so.M)(e.onPointerMove,rs(v)),onPointerCancel:(0,so.M)(e.onPointerCancel,rs(v)),onPointerUp:(0,so.M)(e.onPointerUp,rs(v))})))}),[w2,c8]=m2("ContextMenuContent",{isInsideContent:!1}),d8=f.forwardRef((e,n)=>{const o=e,{__scopeContextMenu:s}=o,l=ao(o,["__scopeContextMenu"]),c=Oa("ContextMenuContent",s),d=_n(s),p=C2(ts({},l),{style:C2(ts({},e.style),{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)"})});return f.createElement(w2,{scope:s,isInsideContent:!0},c.isRootMenu?f.createElement(u8,(0,o1.Z)({__scopeContextMenu:s},p,{ref:n})):f.createElement(cr.VY,(0,o1.Z)({},d,p,{ref:n})))}),u8=f.forwardRef((e,n)=>{const o=e,{__scopeContextMenu:s}=o,l=ao(o,["__scopeContextMenu"]),c=Oa("ContextMenuContent",s),d=_n(s),p=f.useRef(!1);return f.createElement(cr.VY,(0,o1.Z)({},d,l,{ref:n,portalled:!0,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:h=>{var g;(g=e.onCloseAutoFocus)===null||g===void 0||g.call(e,h),!h.defaultPrevented&&p.current&&h.preventDefault(),p.current=!1},onInteractOutside:h=>{var g;(g=e.onInteractOutside)===null||g===void 0||g.call(e,h),h.defaultPrevented||c.modal||(p.current=!0)}}))}),vL=null,CL=null,b2=f.forwardRef((e,n)=>{const o=e,{__scopeContextMenu:s}=o,l=ao(o,["__scopeContextMenu"]),c=_n(s);return f.createElement(cr.ck,(0,o1.Z)({},c,l,{ref:n}))}),f8=f.forwardRef((e,n)=>{const o=e,{__scopeContextMenu:s}=o,l=ao(o,["__scopeContextMenu"]),c=_n(s);return f.createElement(cr.fF,(0,o1.Z)({},c,l,{ref:n}))}),mL=null,_L=null,wL=null,bL=null,xL=null,h8=f.forwardRef((e,n)=>{const o=e,{__scopeContextMenu:s}=o,l=ao(o,["__scopeContextMenu"]),c=_n(s);return f.createElement(cr.Eh,(0,o1.Z)({},c,l,{ref:n}))});function rs(e){return n=>n.pointerType!=="mouse"?e(n):void 0}const ns=a8,p8=l8,os=d8,yL=null,EL=null,LL=null,SL=null,RL=null,IL=null,ML=null,PL=null,$L=null,HL=null;var x2=Object.defineProperty,g8=Object.defineProperties,v8=Object.getOwnPropertyDescriptors,C8=Object.getOwnPropertyNames,is=Object.getOwnPropertySymbols,y2=Object.prototype.hasOwnProperty,E2=Object.prototype.propertyIsEnumerable,Ta=(e,n,o)=>n in e?x2(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,k=(e,n)=>{for(var o in n||(n={}))y2.call(n,o)&&Ta(e,o,n[o]);if(is)for(var o of is(n))E2.call(n,o)&&Ta(e,o,n[o]);return e},U=(e,n)=>g8(e,v8(n)),dr=(e,n)=>{var o={};for(var s in e)y2.call(e,s)&&n.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&is)for(var s of is(e))n.indexOf(s)<0&&E2.call(e,s)&&(o[s]=e[s]);return o},Q1=(e,n)=>function(){return e&&(n=(0,e[C8(e)[0]])(e=0)),n},wn=(e,n)=>{for(var o in n)x2(e,o,{get:n[o],enumerable:!0})},m=(e,n,o)=>(Ta(e,typeof n!="symbol"?n+"":n,o),o),Fe=(e,n,o)=>new Promise((s,l)=>{var c=h=>{try{p(o.next(h))}catch(g){l(g)}},d=h=>{try{p(o.throw(h))}catch(g){l(g)}},p=h=>h.done?s(h.value):Promise.resolve(h.value).then(c,d);p((o=o.apply(e,n)).next())}),L2,si,ss=Q1({"src/state/data/browser-fs-access/supported.js"(){L2=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.location+""}catch{return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),si=L2}}),S2={};wn(S2,{default:()=>R2});var R2,m8=Q1({"src/state/data/browser-fs-access/legacy/file-open.js"(){R2=(...e)=>Fe(void 0,[...e],function*(n=[{}]){return Array.isArray(n)||(n=[n]),new Promise((o,s)=>{const l=document.createElement("input");l.type="file";const c=[...n.map(g=>g.mimeTypes||[]).join(),n.map(g=>g.extensions||[]).join()].join();l.multiple=n[0].multiple||!1,l.accept=c||"";const d=()=>h(s),p=g=>{typeof h=="function"&&h(),o(g)},h=n[0].legacySetup&&n[0].legacySetup(p,d,l);l.addEventListener("change",()=>{p(l.multiple?Array.from(l.files):l.files[0])}),l.click()})})}}),I2={};wn(I2,{default:()=>P2});var M2,P2,_8=Q1({"src/state/data/browser-fs-access/fs-access/file-open.js"(){M2=e=>Fe(void 0,null,function*(){const n=yield e.getFile();return n.handle=e,n}),P2=(...e)=>Fe(void 0,[...e],function*(n=[{}]){Array.isArray(n)||(n=[n]);const o=[];n.forEach((c,d)=>{o[d]={description:c.description||"",accept:{}},c.mimeTypes?c.mimeTypes.map(p=>{o[d].accept[p]=c.extensions||[]}):o[d].accept["*/*"]=c.extensions||[]});const s=yield window.showOpenFilePicker({id:n[0].id,startIn:n[0].startIn,types:o,multiple:n[0].multiple||!1,excludeAcceptAllOption:n[0].excludeAcceptAllOption||!1}),l=yield Promise.all(s.map(M2));return n[0].multiple?l:l[0]})}});function w8(...e){return Fe(this,null,function*(){return(yield $2).default(...e)})}var $2,b8=Q1({"src/state/data/browser-fs-access/file-open.js"(){ss(),$2=si?Promise.resolve().then(()=>(_8(),I2)):Promise.resolve().then(()=>(m8(),S2))}}),H2={};wn(H2,{default:()=>k2});var k2,x8=Q1({"src/state/data/browser-fs-access/legacy/directory-open.js"(){k2=(...e)=>Fe(void 0,[...e],function*(n=[{}]){return Array.isArray(n)||(n=[n]),n[0].recursive=n[0].recursive||!1,new Promise((o,s)=>{const l=document.createElement("input");l.type="file",l.webkitdirectory=!0;const c=()=>p(s),d=h=>{typeof p=="function"&&p(),o(h)},p=n[0].legacySetup&&n[0].legacySetup(d,c,l);l.addEventListener("change",()=>{let h=Array.from(l.files);n[0].recursive?n[0].recursive&&n[0].skipDirectory&&(h=h.filter(g=>g.webkitRelativePath.split("/").every(w=>!n[0].skipDirectory({name:w,kind:"directory"})))):h=h.filter(g=>g.webkitRelativePath.split("/").length===2),d(h)}),l.click()})})}}),O2={};wn(O2,{default:()=>T2});var Ba,T2,y8=Q1({"src/state/data/browser-fs-access/fs-access/directory-open.js"(){Ba=(e,n,...o)=>Fe(void 0,[e,n,...o],function*(s,l,c=s.name,d){const p=[],h=[];for(const g of s.values()){const v=`${c}/${g.name}`;g.kind==="file"?h.push(yield g.getFile().then(w=>(w.directoryHandle=s,Object.defineProperty(w,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>v})))):g.kind==="directory"&&l&&(!d||!d(g))&&p.push(yield Ba(g,l,v,d))}return[...(yield Promise.all(p)).flat(),...yield Promise.all(h)]}),T2=(...e)=>Fe(void 0,[...e],function*(n={}){n.recursive=n.recursive||!1;const o=yield window.showDirectoryPicker({id:n.id,startIn:n.startIn});return Ba(o,n.recursive,void 0,n.skipDirectory)})}});function E8(...e){return Fe(this,null,function*(){return(yield B2).default(...e)})}var B2,L8=Q1({"src/state/data/browser-fs-access/directory-open.js"(){ss(),B2=si?Promise.resolve().then(()=>(y8(),O2)):Promise.resolve().then(()=>(x8(),H2))}}),V2={};wn(V2,{default:()=>j2});function S8(e,n){return Fe(this,null,function*(){const o=e.getReader(),s=new ReadableStream({start(c){return d();function d(){return Fe(this,null,function*(){return o.read().then(({done:p,value:h})=>{if(p){c.close();return}return c.enqueue(h),d()})})}}}),l=new Response(s);return o.releaseLock(),new Blob([yield l.blob()],{type:n})})}var j2,R8=Q1({"src/state/data/browser-fs-access/legacy/file-save.js"(){j2=(e,...n)=>Fe(void 0,[e,...n],function*(o,s={}){Array.isArray(s)&&(s=s[0]);const l=document.createElement("a");let c=o;"body"in o&&(c=yield S8(o.body,o.headers.get("content-type"))),l.download=s.fileName||"Untitled",l.href=URL.createObjectURL(c);const d=()=>h(reject),p=()=>{typeof h=="function"&&h()},h=s.legacySetup&&s.legacySetup(p,d,l);return l.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(l.href),30*1e3),p(null)}),l.click(),null})}}),A2={};wn(A2,{default:()=>D2});var D2,I8=Q1({"src/state/data/browser-fs-access/fs-access/file-save.js"(){D2=(e,...n)=>Fe(void 0,[e,...n],function*(o,s=[{}],l=null,c=!1){Array.isArray(s)||(s=[s]),s[0].fileName=s[0].fileName||"Untitled";const d=[];if(s.forEach((g,v)=>{d[v]={description:g.description||"",accept:{}},g.mimeTypes?(v===0&&(o.type?g.mimeTypes.push(o.type):o.headers&&o.headers.get("content-type")&&g.mimeTypes.push(o.headers.get("content-type"))),g.mimeTypes.map(w=>{d[v].accept[w]=g.extensions||[]})):o.type&&(d[v].accept[o.type]=g.extensions||[])}),l)try{yield l.getFile()}catch(g){if(l=null,c)throw g}const p=l||(yield window.showSaveFilePicker({suggestedName:s[0].fileName,id:s[0].id,startIn:s[0].startIn,types:d,excludeAcceptAllOption:s[0].excludeAcceptAllOption||!1})),h=yield p.createWritable();return"stream"in o?(yield o.stream().pipeTo(h),p):"body"in o?(yield o.body.pipeTo(h),p):(yield h.write(blob),yield h.close(),p)})}});function M8(...e){return Fe(this,null,function*(){return(yield Z2).default(...e)})}var Z2,P8=Q1({"src/state/data/browser-fs-access/file-save.js"(){ss(),Z2=si?Promise.resolve().then(()=>(I8(),A2)):Promise.resolve().then(()=>(R8(),V2))}}),as={};wn(as,{directoryOpen:()=>E8,fileOpen:()=>w8,fileSave:()=>M8,supported:()=>si});var ls=Q1({"src/state/data/browser-fs-access/index.js"(){b8(),L8(),P8(),ss()}}),{styled:Me,createTheme:$8}=(0,io.Th)({themeMap:k({},io.E6),theme:{colors:{bounds:"rgba(65, 132, 244, 1.000)",boundsBg:"rgba(65, 132, 244, 0.05)",hover:"#ececec",overlay:"rgba(0, 0, 0, 0.15)",overlayContrast:"rgba(255, 255, 255, 0.15)",panel:"#fefefe",panelContrast:"#ffffff",selected:"rgba(66, 133, 244, 1.000)",selectedContrast:"#fefefe",sponsor:"#ec6cb9",sponsorContrast:"#ec6cb944",text:"#333333",tooltip:"#1d1d1d",tooltipContrast:"#ffffff",warn:"rgba(255, 100, 100, 1)"},shadows:{2:"0px 1px 1px rgba(0, 0, 0, 0.14)",3:"0px 2px 3px rgba(0, 0, 0, 0.14)",4:"0px 4px 5px -1px rgba(0, 0, 0, 0.14)",8:"0px 12px 17px rgba(0, 0, 0, 0.14)",12:"0px 12px 17px rgba(0, 0, 0, 0.14)",24:"0px 24px 38px rgba(0, 0, 0, 0.14)",key:"1px 1px rgba(0,0,0,1)",panel:`0px 0px 16px -1px rgba(0, 0, 0, 0.05), 
        0px 0px 16px -8px rgba(0, 0, 0, 0.05), 
        0px 0px 16px -12px rgba(0, 0, 0, 0.12),
        0px 0px 2px 0px rgba(0, 0, 0, 0.08)`},space:{0:"2px",1:"3px",2:"4px",3:"8px",4:"12px",5:"16px"},fontSizes:{0:"10px",1:"12px",2:"13px",3:"16px",4:"18px"},fonts:{ui:'"Recursive", system-ui, sans-serif',body:'"Recursive", system-ui, sans-serif',mono:'"Recursive Mono", monospace'},fontWeights:{},lineHeights:{},letterSpacings:{},sizes:{},borderWidths:{0:"$1"},borderStyles:{},radii:{0:"2px",1:"4px",2:"8px",3:"12px",4:"16px"},zIndices:{},transitions:{}},media:{micro:"(max-width: 370px)",sm:"(min-width: 640px)",md:"(min-width: 768px)",lg:"(min-width: 1024px)"},utils:{zStrokeWidth:()=>e=>Array.isArray(e)?{strokeWidth:`calc(${e[0]}px / var(--camera-zoom))`}:{strokeWidth:`calc(${e}px / var(--camera-zoom))`}}}),H8=$8({colors:{bounds:"rgba(38, 150, 255, 1.000)",boundsBg:"rgba(38, 150, 255, 0.05)",hover:"#444A50",overlay:"rgba(0, 0, 0, 0.15)",overlayContrast:"rgba(255, 255, 255, 0.15)",panel:"#363D44",panelContrast:"#49555f",selected:"rgba(38, 150, 255, 1.000)",selectedContrast:"#fefefe",text:"#f8f9fa",tooltip:"#1d1d1d",tooltipContrast:"#ffffff"},shadows:{2:"0px 1px 1px rgba(0, 0, 0, 0.24)",3:"0px 2px 3px rgba(0, 0, 0, 0.24)",4:"0px 4px 5px -1px rgba(0, 0, 0, 0.24)",8:"0px 12px 17px rgba(0, 0, 0, 0.24)",12:"0px 12px 17px rgba(0, 0, 0, 0.24)",24:"0px 24px 38px rgba(0, 0, 0, 0.24)",panel:`0px 0px 16px -1px rgba(0, 0, 0, 0.05), 
      0px 0px 16px -8px rgba(0, 0, 0, 0.09), 
      0px 0px 16px -12px rgba(0, 0, 0, 0.2)`}}),k8=class{constructor(){m(this,"onPinchStart"),m(this,"onPinchEnd"),m(this,"onPinch"),m(this,"onKeyDown"),m(this,"onKeyUp"),m(this,"onPointerMove"),m(this,"onPointerUp"),m(this,"onPan"),m(this,"onZoom"),m(this,"onPointerDown"),m(this,"onPointCanvas"),m(this,"onDoubleClickCanvas"),m(this,"onRightPointCanvas"),m(this,"onDragCanvas"),m(this,"onReleaseCanvas"),m(this,"onPointShape"),m(this,"onDoubleClickShape"),m(this,"onRightPointShape"),m(this,"onDragShape"),m(this,"onHoverShape"),m(this,"onUnhoverShape"),m(this,"onReleaseShape"),m(this,"onPointBounds"),m(this,"onDoubleClickBounds"),m(this,"onRightPointBounds"),m(this,"onDragBounds"),m(this,"onHoverBounds"),m(this,"onUnhoverBounds"),m(this,"onReleaseBounds"),m(this,"onPointBoundsHandle"),m(this,"onDoubleClickBoundsHandle"),m(this,"onRightPointBoundsHandle"),m(this,"onDragBoundsHandle"),m(this,"onHoverBoundsHandle"),m(this,"onUnhoverBoundsHandle"),m(this,"onReleaseBoundsHandle"),m(this,"onPointHandle"),m(this,"onDoubleClickHandle"),m(this,"onRightPointHandle"),m(this,"onDragHandle"),m(this,"onHoverHandle"),m(this,"onUnhoverHandle"),m(this,"onReleaseHandle"),m(this,"onShapeBlur"),m(this,"onShapeClone")}},O8=(e=>(e.Idle="idle",e.Connecting="connecting",e.Connected="connected",e.Disconnected="disconnected",e))(O8||{}),T8=(e=>(e.Transform="transform",e.Translate="translate",e.TransformSingle="transformSingle",e.Brush="brush",e.Arrow="arrow",e.Draw="draw",e.Erase="erase",e.Rotate="rotate",e.Handle="handle",e.Grid="grid",e))(T8||{}),B8=(e=>(e.Idle="idle",e.PointingHandle="pointingHandle",e.PointingBounds="pointingBounds",e.PointingBoundsHandle="pointingBoundsHandle",e.TranslatingLabel="translatingLabel",e.TranslatingHandle="translatingHandle",e.Translating="translating",e.Transforming="transforming",e.Rotating="rotating",e.Pinching="pinching",e.Brushing="brushing",e.Creating="creating",e.EditingText="editing-text",e))(B8||{}),V8=(e=>(e.Backward="backward",e.Forward="forward",e.ToFront="toFront",e.ToBack="toBack",e))(V8||{}),j8=(e=>(e.Top="top",e.CenterVertical="centerVertical",e.Bottom="bottom",e.Left="left",e.CenterHorizontal="centerHorizontal",e.Right="right",e))(j8||{}),A8=(e=>(e.Horizontal="horizontal",e.Vertical="vertical",e))(A8||{}),D8=(e=>(e.Horizontal="horizontal",e.Vertical="vertical",e))(D8||{}),Z8=(e=>(e.Horizontal="horizontal",e.Vertical="vertical",e))(Z8||{}),z8=(e=>(e.Sticky="sticky",e.Ellipse="ellipse",e.Rectangle="rectangle",e.Triangle="triangle",e.Draw="draw",e.Arrow="arrow",e.Line="line",e.Text="text",e.Group="group",e.Image="image",e.Video="video",e))(z8||{}),W8=(e=>(e.Arrow="arrow",e))(W8||{}),F8=(e=>(e.White="white",e.LightGray="lightGray",e.Gray="gray",e.Black="black",e.Green="green",e.Cyan="cyan",e.Blue="blue",e.Indigo="indigo",e.Violet="violet",e.Red="red",e.Orange="orange",e.Yellow="yellow",e))(F8||{}),z2=(e=>(e.Small="small",e.Medium="medium",e.Large="large",e))(z2||{}),W2=(e=>(e.Draw="draw",e.Solid="solid",e.Dashed="dashed",e.Dotted="dotted",e))(W2||{}),N8=(e=>(e.Small="small",e.Medium="medium",e.Large="large",e.ExtraLarge="extraLarge",e))(N8||{}),F2=(e=>(e.Start="start",e.Middle="middle",e.End="end",e.Justify="justify",e))(F2||{}),N2=(e=>(e.Script="script",e.Sans="sans",e.Serif="erif",e.Mono="mono",e))(N2||{}),U8=(e=>(e.Image="image",e.Video="video",e))(U8||{}),K8=(e=>(e.PNG="png",e.JPG="jpeg",e.WEBP="webp",e.PDF="pdf",e.SVG="svg",e.JSON="json",e))(K8||{});function Jr(e,n){const{version:o=0}=e;if("assets"in e){const s=new Set;Object.values(e.pages).forEach(l=>Object.values(l.shapes).forEach(c=>{c.assetId&&s.add(c.assetId)})),Object.keys(e.assets).forEach(l=>{s.has(l)||delete e.assets[l]})}return o===n||(o<14&&Object.values(e.pages).forEach(s=>{Object.values(s.shapes).filter(l=>l.type==="text").forEach(l=>l.style.font==="script")}),o<=13&&Object.values(e.pages).forEach(s=>{Object.values(s.bindings).forEach(l=>{Object.assign(l,l.meta)}),Object.values(s.shapes).forEach(l=>{Object.entries(l.style).forEach(([c,d])=>{typeof d=="string"&&(l.style[c]=d.toLowerCase())}),l.type==="arrow"&&l.decorations&&Object.entries(l.decorations).forEach(([c,d])=>{d==="Arrow"&&(l.decorations=U(k({},l.decorations),{[c]:"arrow"}))})})}),o<=13.1&&(e.name="New Document"),o<15&&(e.assets={}),Object.values(e.pages).forEach(s=>{Object.values(s.shapes).forEach(l=>{o<15.2&&(l.type==="image"||l.type==="video")&&(l.style.isFilled=!0),o<15.3&&(l.type==="rectangle"||l.type==="triangle"||l.type==="ellipse"||l.type==="arrow")&&(l.label=l.text||"",l.labelPoint=[.5,.5])})}),Object.values(e.pageStates).forEach(s=>{s.selectedIds=s.selectedIds.filter(l=>e.pages[s.id].shapes[l]!==void 0),s.bindingId=void 0,s.editingId=void 0,s.hoveredId=void 0,s.pointedId=void 0}),e.version=n),e}var cs="-0.03em",X8=1.3,lo=8,ds=16,m1=16,V1=32,us=128,Va=5,ja=10,L1=.3,co=3,Aa=[.5,.5],kL=Math.PI*2,fs={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e*e:-1+(4-2*e)*e,easeInCubic:e=>e*e*e,easeOutCubic:e=>--e*e*e+1,easeInOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1- --e*e*e*e,easeInOutQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1+--e*e*e*e*e,easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e<=0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e>=1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e<=0?0:e>=1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2},U2=["#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467","#FF802B"],G8=typeof Window>"u"?!1:/^((?!chrome|android).)*safari/i.test(navigator.userAgent),K2=[".png",".svg",".jpg",".jpeg",".gif"],X2=G8?[]:[".mp4",".webm"],G2={mode:"readwrite"},Y8=e=>Fe(void 0,null,function*(){return(yield e.queryPermission(G2))==="granted"||(yield e.requestPermission(G2))==="granted"});function q8(){return Fe(this,null,function*(){if(typeof Window>"u"||!("_location"in Window))return;const e=yield Ea(`Tldraw_file_handle_${window.location.origin}`);return e||null})}function Y2(e){return Fe(this,null,function*(){return Yi(`Tldraw_file_handle_${window.location.origin}`,e)})}function q2(e,n){return Fe(this,null,function*(){const o={name:e.name||"New Document",fileHandle:n??null,document:e,assets:{}},s=JSON.stringify(o,null,2),l=new Blob([s],{type:"application/vnd.Tldraw+json"});if(n&&!(yield Y8(n)))return null;const d=(yield Promise.resolve().then(()=>(ls(),as))).fileSave,p=yield d(l,{fileName:`${o.name}.tldr`,description:"Tldraw File",extensions:[".tldr"]},n);return yield Y2(p),p})}function J8(){return Fe(this,null,function*(){var e;const o=(yield Promise.resolve().then(()=>(ls(),as))).fileOpen,s=yield o({description:"Tldraw File",extensions:[".tldr"],multiple:!1});if(!s)return null;const l=yield new Promise(p=>{const h=new FileReader;h.onloadend=()=>{h.readyState===FileReader.DONE&&p(h.result)},h.readAsText(s,"utf8")}),c=JSON.parse(l),d=(e=s.handle)!=null?e:null;return yield Y2(d),{fileHandle:d,document:c.document}})}function Q8(){return Fe(this,null,function*(){const n=(yield Promise.resolve().then(()=>(ls(),as))).fileOpen;return n({description:"Image or Video",extensions:[...K2,...X2],multiple:!1})})}function eu(e){return new Promise((n,o)=>{if(e){const s=new FileReader;s.readAsDataURL(e),s.onload=()=>n(s.result),s.onerror=l=>o(l),s.onabort=l=>o(l)}})}function tu(e){return new Promise((n,o)=>{const s=new Image;s.onload=()=>n([s.width,s.height]),s.onerror=()=>o(new Error("Could not get image size")),s.src=e})}function ru(e){return new Promise((n,o)=>{const s=document.createElement("video");s.onloadedmetadata=()=>n([s.videoWidth,s.videoHeight]),s.onerror=()=>o(new Error("Could not get video size")),s.src=e})}ls();var J2="#fafafa",Da="#343d45",uo={white:"#f0f1f3",lightGray:"#c6cbd1",gray:"#788492",black:"#1d1d1d",green:"#36b24d",cyan:"#0e98ad",blue:"#1c7ed6",indigo:"#4263eb",violet:"#7746f1",red:"#ff2133",orange:"#ff9433",yellow:"#ffc936"},nu={light:U(k({},Object.fromEntries(Object.entries(uo).map(([e,n])=>[e,H.lerpColor(n,J2,.45)]))),{white:"#ffffff",black:"#3d3d3d"}),dark:U(k({},Object.fromEntries(Object.entries(uo).map(([e,n])=>[e,H.lerpColor(H.lerpColor(n,"#999999",.3),Da,.4)]))),{white:"#1d1d1d",black:"#bbbbbb"})},ai={light:U(k({},uo),{white:"#1d1d1d"}),dark:U(k({},Object.fromEntries(Object.entries(uo).map(([e,n])=>[e,H.lerpColor(n,Da,.1)]))),{white:"#cecece",black:"#cecece"})},Za={light:U(k({},Object.fromEntries(Object.entries(uo).map(([e,n])=>[e,H.lerpColor(n,J2,.82)]))),{white:"#fefefe"}),dark:U(k({},Object.fromEntries(Object.entries(uo).map(([e,n])=>[e,H.lerpColor(n,Da,.82)]))),{white:"rgb(30,33,37)",black:"#1e1e1f"})},ou={small:2,medium:3.5,large:5},iu={small:28,medium:48,large:96,auto:"auto"},su={script:'"Caveat Brush"',sans:'"Source Sans Pro", sans-serif',erif:'"Crimson Pro", serif',mono:'"Source Code Pro", monospace'},au={script:1,sans:1,erif:1,mono:1},lu={small:24,medium:36,large:48,auto:"auto"};function cu(e){return ou[e]}function Q2(e,n="script"){return iu[e]*au[n]}function za(e="script"){return su[e]}function du(e){return lu[e]}function Qr(e){const n=Q2(e.size,e.font),o=za(e.font),{scale:s=1}=e;return`${n*s}px/1 ${o}`}function uu(e){const n=du(e.size),o=za(e.font),{scale:s=1}=e;return`${n*s}px/1 ${o}`}function e9(e,n=!1){const{color:o}=e,s=n?"dark":"light",l=o==="white"||o==="black"?"yellow":o;return{fill:nu[s][l],stroke:ai[s][l],color:n?"#1d1d1d":"#0d0d0d"}}function Ct(e,n){const{color:o,size:s,isFilled:l}=e,c=cu(s),d=n?"dark":"light";return{stroke:ai[d][o],fill:l?Za[d][o]:"none",strokeWidth:c}}var ur={color:"black",size:"small",isFilled:!1,dash:"draw",scale:1},Wa=U(k({},ur),{font:"script",textAlign:"middle"}),fu={start:"left",middle:"center",end:"right",justify:"justify"};function t9(e="start"){return fu[e]}function Fa(e,n,o){const s=Q2(n.size,n.font),l=document.createElementNS("http://www.w3.org/2000/svg","g"),c=e.split(`
`).map((d,p)=>{const h=document.createElementNS("http://www.w3.org/2000/svg","text");return h.textContent=d,h.setAttribute("y",X8*s*(.5+p)+""),l.appendChild(h),h});switch(l.setAttribute("font-size",s+""),l.setAttribute("font-family",za(n.font).slice(1,-1)),l.setAttribute("text-align",t9(n.textAlign)),n.textAlign){case"middle":{l.setAttribute("text-align","center"),l.setAttribute("text-anchor","middle"),c.forEach(d=>d.setAttribute("x",o.width/2+""));break}case"end":{l.setAttribute("text-align","right"),l.setAttribute("text-anchor","end"),c.forEach(d=>d.setAttribute("x",o.width+""));break}case"start":l.setAttribute("text-anchor","start"),l.setAttribute("alignment-baseline","central")}return l}var en;function hu(){var e;(e=document.getElementById("__textLabelMeasure"))==null||e.remove();const n=document.createElement("pre");return n.id="__textLabelMeasure",Object.assign(n.style,{whiteSpace:"pre",width:"auto",border:"1px solid transparent",padding:"4px",margin:"0px",letterSpacing:cs,opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",pointerEvents:"none",userSelect:"none",alignmentBaseline:"mathematical",dominantBaseline:"mathematical"}),n.tabIndex=-1,document.body.appendChild(n),n}typeof window<"u"&&(en=hu());var r9="",n9="",Na=[0,0];function hs(e,n){if(!e)return[16,32];if(!en)return[10,10];if(en.parent||document.body.appendChild(en),e===r9&&n===n9)return Na;r9=e,n9=n,en.textContent=`${e}`,en.style.font=n;const o=en.offsetWidth||1,s=en.offsetHeight||1;return Na=[o,s],Na}function fo(e,n){const o=H.getFromCache(n,e,()=>{const[s,l]=e.size;return{minX:0,maxX:s,minY:0,maxY:l,width:s,height:l}});return H.translateBounds(o,e.point)}function ps(e,n,{initialShape:o,transformOrigin:s,scaleX:l,scaleY:c}){if(e.rotation||o.isAspectRatioLocked){const d=J.toFixed(J.mul(o.size,Math.min(Math.abs(l),Math.abs(c)))),p=J.toFixed([n.minX+(n.width-e.size[0])*(l<0?1-s[0]:s[0]),n.minY+(n.height-e.size[1])*(c<0?1-s[1]:s[1])]),h=l<0&&c>=0||c<0&&l>=0?o.rotation?-o.rotation:0:o.rotation;return{size:d,point:p,rotation:h}}else return{point:J.toFixed([n.minX,n.minY]),size:J.toFixed([n.width,n.height])}}function gs(e,n){return{size:J.toFixed([n.width,n.height]),point:J.toFixed([n.minX,n.minY])}}var o9="  ",S1=class{static insertTextFirefox(e,n){e.setRangeText(n,e.selectionStart||0,e.selectionEnd||0,"end"),e.dispatchEvent(new InputEvent("input",{data:n,inputType:"insertText",isComposing:!1}))}static insert(e,n){const o=e.ownerDocument,s=o.activeElement;s!==e&&e.focus(),o.execCommand("insertText",!1,n)||S1.insertTextFirefox(e,n),s===o.body?e.blur():s instanceof HTMLElement&&s!==e&&s.focus()}static set(e,n){e.select(),S1.insert(e,n)}static getSelection(e){const{selectionStart:n,selectionEnd:o}=e;return e.value.slice(n||void 0,o||void 0)}static wrapSelection(e,n,o){const{selectionStart:s,selectionEnd:l}=e,c=S1.getSelection(e);S1.insert(e,n+c+(o??n)),e.selectionStart=(s||0)+n.length,e.selectionEnd=(l||0)+n.length}static replace(e,n,o){let s=0;e.value.replace(n,(...l)=>{const c=s+l[l.length-2],d=l[0].length;e.selectionStart=c,e.selectionEnd=c+d;const p=typeof o=="string"?o:o(...l);return S1.insert(e,p),e.selectionStart=c,s+=p.length-d,p})}static findLineEnd(e,n){const o=e.lastIndexOf(`
`,n-1)+1;return e.charAt(o)!=="	"?n:o+1}static indent(e){var n;const{selectionStart:o,selectionEnd:s,value:l}=e,c=l.slice(o,s),d=(n=/\n/g.exec(c))==null?void 0:n.length;if(d&&d>0){const p=l.lastIndexOf(`
`,o-1)+1,h=e.value.slice(p,s-1),g=h.replace(/^|\n/g,`$&${o9}`),v=g.length-h.length;e.setSelectionRange(p,s-1),S1.insert(e,g),e.setSelectionRange(o+1,s+v)}else S1.insert(e,o9)}static unindent(e){const{selectionStart:n,selectionEnd:o,value:s}=e,l=s.lastIndexOf(`
`,n-1)+1,c=S1.findLineEnd(s,o),d=e.value.slice(l,c),p=d.replace(/(^|\n)(\t| {1,2})/g,"$1"),h=d.length-p.length;e.setSelectionRange(l,c),S1.insert(e,p);const g=/\t| {1,2}/.exec(s.slice(l,n)),v=g?g[0].length:0,w=n-v;e.setSelectionRange(n-v,Math.max(w,o-h))}},vs=e=>e.stopPropagation();function i9(e){return f.useCallback(o=>{switch(o.metaKey&&o.stopPropagation(),o.key){case"Meta":{o.stopPropagation();break}case"z":{o.metaKey&&(o.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1),o.preventDefault());break}case"Escape":{o.currentTarget.blur();break}case"Enter":{(o.ctrlKey||o.metaKey)&&o.currentTarget.blur();break}case"Tab":{o.preventDefault(),o.shiftKey?S1.unindent(o.currentTarget):S1.indent(o.currentTarget),e(z.normalizeText(o.currentTarget.value));break}}},[e])}var Cs=f.memo(function({font:n,text:o,color:s,offsetX:l=0,offsetY:c=0,scale:d=1,isEditing:p=!1,onBlur:h,onChange:g}){const v=f.useRef(null),w=f.useRef(!1),x=hs(o,n),y=f.useRef(o),E=f.useCallback(j=>{y.current=z.normalizeText(j.currentTarget.value),g(y.current)},[g]),R=i9(g),P=f.useCallback(j=>{j.currentTarget.setSelectionRange(0,0),h?.()},[h]),$=f.useCallback(j=>{!p||!w.current||document.activeElement===j.currentTarget&&j.currentTarget.select()},[p]),I=f.useCallback(j=>{p&&j.stopPropagation()},[p]);f.useEffect(()=>{p?(y.current=o,requestAnimationFrame(()=>{w.current=!0;const j=v.current;j&&(j.focus(),j.select())})):h?.()},[p,h]);const B=f.useRef(null);return f.useLayoutEffect(()=>{const j=B.current;!j||(j.style.transform=`scale(${d}, ${d}) translate(${l}px, ${c}px)`,j.style.width=x[0]+"px",j.style.height=x[1]+"px")},[x,c,l,d]),f.createElement(pu,null,f.createElement(gu,{ref:B,hasText:!!o,isEditing:p,style:{font:n,color:s}},p?f.createElement(vu,{ref:v,style:{font:n,color:s},name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:y.current,color:s,onFocus:$,onChange:E,onKeyDown:R,onBlur:P,onPointerDown:I,onContextMenu:vs}):o,"\u200B"))}),pu=Me("div",{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",userSelect:"none",variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:L1}}}}),s9={whiteSpace:"pre-wrap",overflowWrap:"break-word"},gu=Me("div",k({position:"absolute",padding:"4px",zIndex:1,minHeight:1,minWidth:1,lineHeight:1,letterSpacing:cs,outline:0,fontWeight:"500",textAlign:"center",backfaceVisibility:"hidden",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",variants:{hasText:{false:{pointerEvents:"none"},true:{pointerEvents:"all"}},isEditing:{false:{userSelect:"none"},true:{background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text"}}}},s9)),vu=Me("textarea",k({position:"absolute",top:0,left:0,zIndex:1,width:"100%",height:"100%",border:"none",padding:"4px",resize:"none",textAlign:"inherit",minHeight:"inherit",minWidth:"inherit",lineHeight:"inherit",letterSpacing:"inherit",outline:0,fontWeight:"inherit",overflow:"hidden",backfaceVisibility:"hidden",display:"inline-block",pointerEvents:"all",background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text",fontSmooth:"always",WebkitFontSmoothing:"subpixel-antialiased",MozOsxFontSmoothing:"auto"},s9)),gt=class extends xa{constructor(){super(...arguments),m(this,"canBind",!1),m(this,"canEdit",!1),m(this,"canClone",!1),m(this,"isAspectRatioLocked",!1),m(this,"hideResizeHandles",!1),m(this,"bindingDistance",m1),m(this,"hitTestPoint",(e,n)=>H.pointInBounds(n,this.getRotatedBounds(e))),m(this,"hitTestLineSegment",(e,n,o)=>{const s=H.getBoundsFromPoints([n,o]),l=this.getBounds(e);return H.boundsContain(l,s)||e.rotation?ni(n,o,H.getRotatedCorners(this.getBounds(e))).didIntersect:pa(n,o,this.getBounds(e)).length>0}),m(this,"create",e=>(this.refMap.set(e.id,f.createRef()),this.getShape(e))),m(this,"getCenter",e=>H.getBoundsCenter(this.getBounds(e))),m(this,"getExpandedBounds",e=>H.expandBounds(this.getBounds(e),this.bindingDistance)),m(this,"getBindingPoint",(e,n,o,s,l,c)=>{const d=this.getBounds(e),p=this.getExpandedBounds(e);if(!H.pointInBounds(o,p))return;const h=Wi(s,l,p).filter(R=>R.didIntersect).map(R=>R.points[0]);if(!h.length)return;const g=this.getCenter(e),v=h.sort((R,P)=>L.dist(P,s)-L.dist(R,s))[0],w=L.med(o,v);let x,y;c?(x=L.dist(o,g)<m1/2?g:o,y=0):(L.distanceToLineSegment(o,w,g)<m1/2?x=g:x=w,H.pointInBounds(o,d)?y=this.bindingDistance:y=Math.max(this.bindingDistance,H.getBoundsSides(d).map(R=>L.distanceToLineSegment(R[1][0],R[1][1],o)).sort((R,P)=>R-P)[0]));const E=L.divV(L.sub(x,[p.minX,p.minY]),[p.width,p.height]);return{point:L.clampV(E,0,1),distance:y}}),m(this,"mutate",(e,n)=>n),m(this,"transform",(e,n,o)=>U(k({},e),{point:[n.minX,n.minY]})),m(this,"transformSingle",(e,n,o)=>this.transform(e,n,o)),m(this,"updateChildren"),m(this,"onChildrenChange"),m(this,"onHandleChange"),m(this,"onRightPointHandle"),m(this,"onDoubleClickHandle"),m(this,"onDoubleClickBoundsHandle"),m(this,"onSessionComplete"),m(this,"getSvgElement",e=>{var n;const o=(n=document.getElementById(e.id+"_svg"))==null?void 0:n.cloneNode(!0);if(!!o){if("label"in e&&e.label!==void 0){const s=e,l=document.createElementNS("http://www.w3.org/2000/svg","g"),c=this.getBounds(e),d=Fa(s.label,e.style,c);d.setAttribute("fill",Ct(e.style).stroke);const p=Qr(e.style),h=hs(s.label,p);return d.setAttribute("transform-origin","top left"),d.setAttribute("transform",`translate(${(c.width-h[0])/2}, ${(c.height-h[1])/2})`),l.appendChild(o),l.appendChild(d),l}return o}})}};function Cu(e,n,o){const s=Ct(n),l=H.rng(e),c=s.strokeWidth,d=Math.max(0,o[0]),p=Math.max(0,o[1]),h=Array.from(Array(4)).map(()=>[l()*c*.75,l()*c*.75]),g=J.add([c/2,c/2],h[0]),v=J.add([d-c/2,c/2],h[1]),w=J.add([d-c/2,p-c/2],h[2]),x=J.add([c/2,p-c/2],h[3]),y=Math.round(Math.abs(l()*2*4)),E=Math.min(d/2,c*2),R=Math.min(p/2,c*2),P=Math.max(8,Math.floor(d/16)),$=Math.max(8,Math.floor(p/16)),I=H.rotateArray([J.pointsBetween(J.add(g,[E,0]),J.sub(v,[E,0]),P),J.pointsBetween(J.add(v,[0,R]),J.sub(w,[0,R]),$),J.pointsBetween(J.sub(w,[E,0]),J.add(x,[E,0]),P),J.pointsBetween(J.sub(x,[0,R]),J.add(g,[0,R]),$)],y);return{points:[...I.flat(),...I[0]].slice(5,Math.floor((y%2===0?P:$)/-2)+3)}}function a9(e,n,o){const{points:s}=Cu(e,n,o),{strokeWidth:l}=Ct(n);return{points:s,options:{size:l,thinning:.65,streamline:.3,smoothing:1,simulatePressure:!1,last:!0}}}function mu(e,n,o){const{points:s,options:l}=a9(e,n,o),c=ei(s,l);return H.getSvgPathFromStroke(c)}function l9(e,n,o){const{points:s,options:l}=a9(e,n,o),c=to(s,l);return H.getSvgPathFromStroke(c.map(d=>d.point.slice(0,2)),!1)}var _u=f.memo(function({id:n,style:o,size:s,isSelected:l,isDarkMode:c}){const{isFilled:d}=o,{stroke:p,strokeWidth:h,fill:g}=Ct(o,c),v=mu(n,o,s),w=l9(n,o,s);return f.createElement(f.Fragment,null,f.createElement("path",{className:o.isFilled||l?"tl-fill-hitarea":"tl-stroke-hitarea",d:w}),d&&f.createElement("path",{d:w,fill:g,pointerEvents:"none"}),f.createElement("path",{d:v,fill:p,stroke:p,strokeWidth:h,pointerEvents:"none"}))}),wu=f.memo(function({id:n,style:o,size:s,isSelected:l,isDarkMode:c}){const{stroke:d,strokeWidth:p,fill:h}=Ct(o,c),g=1+p*1.618,v=Math.max(0,s[0]-g/2),w=Math.max(0,s[1]-g/2),y=[[[g/2,g/2],[v,g/2],v-g/2],[[v,g/2],[v,w],w-g/2],[[v,w],[g/2,w],v-g/2],[[g/2,w],[g/2,g/2],w-g/2]].map(([E,R,P],$)=>{const{strokeDasharray:I,strokeDashoffset:B}=H.getPerfectDashProps(P,p*1.618,o.dash);return f.createElement("line",{key:n+"_"+$,x1:E[0],y1:E[1],x2:R[0],y2:R[1],strokeDasharray:I,strokeDashoffset:B})});return f.createElement(f.Fragment,null,f.createElement("rect",{className:l||o.isFilled?"tl-fill-hitarea":"tl-stroke-hitarea",x:g/2,y:g/2,width:v,height:w,strokeWidth:m1}),o.isFilled&&f.createElement("rect",{x:g/2,y:g/2,width:v,height:w,fill:h,pointerEvents:"none"}),f.createElement("g",{pointerEvents:"none",stroke:d,strokeWidth:g,strokeLinecap:"round"},y))});function bu({strokeWidth:e,size:n}){return f.createElement("rect",{className:"tl-binding-indicator",x:e,y:e,width:Math.max(0,n[0]-e/2),height:Math.max(0,n[1]-e/2),strokeWidth:m1*2})}var xu=class extends gt{constructor(){super(...arguments),m(this,"type","rectangle"),m(this,"canBind",!0),m(this,"canClone",!0),m(this,"canEdit",!0),m(this,"getShape",e=>H.deepMerge({id:"id",type:"rectangle",name:"Rectangle",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:ur,label:"",labelPoint:[.5,.5]},e)),m(this,"Component",gt.Component(({shape:e,isEditing:n,isBinding:o,isSelected:s,isGhost:l,meta:c,bounds:d,events:p,onShapeBlur:h,onShapeChange:g},v)=>{const{id:w,size:x,style:y,label:E="",labelPoint:R=Aa}=e,P=Qr(y),$=Ct(y,c.isDarkMode),I=y.dash==="draw"?_u:wu,B=f.useCallback(j=>g?.({id:w,label:j}),[g]);return f.createElement(yu,k({ref:v},p),f.createElement(Cs,{isEditing:n,onChange:B,onBlur:h,font:P,text:E,color:$.stroke,offsetX:(R[0]-.5)*d.width,offsetY:(R[1]-.5)*d.height}),f.createElement(B1,{id:e.id+"_svg",opacity:l?L1:1},o&&f.createElement(bu,{strokeWidth:$.strokeWidth,size:x}),f.createElement(I,{id:w,style:y,size:x,isSelected:s,isDarkMode:c.isDarkMode})))})),m(this,"Indicator",gt.Indicator(({shape:e})=>{const{id:n,style:o,size:s}=e,c=Ct(o,!1).strokeWidth;return o.dash==="draw"?f.createElement("path",{d:l9(n,o,s)}):f.createElement("rect",{x:c,y:c,rx:1,ry:1,width:Math.max(1,s[0]-c*2),height:Math.max(1,s[1]-c*2)})})),m(this,"getBounds",e=>fo(e,this.boundsCache)),m(this,"shouldRender",(e,n)=>n.size!==e.size||n.style!==e.style||n.label!==e.label),m(this,"transform",ps),m(this,"transformSingle",gs)}},yu=Me("div",{width:"100%",height:"100%"}),ms=Math.PI*2,j1=class{static inwardEdgeNormal(e){const n=J.sub(e[1],e[0]),o=J.len2(n);return[-n[0]/o,n[1]/o]}static outwardEdgeNormal(e){return J.neg(j1.inwardEdgeNormal(e))}static isReflexVertex(e,n){const o=e.length,s=e[(n+o-1)%o],l=e[n],c=e[(n+1)%o];return j1.leftSide(s,c,l)<0}static getEdges(e){return e.map((n,o)=>[n,e[(o+1)%e.length]])}static edgesIntersection([e,n],[o,s]){const l=(s[1]-o[1])*(n[0]-e[0])-(s[0]-o[0])*(n[1]-e[1]);if(l==0)return null;const c=((s[0]-o[0])*(e[1]-o[1])-(s[1]-o[1])*(e[0]-o[0]))/l,d=((n[0]-e[0])*(e[1]-o[1])-(n[1]-e[1])*(e[0]-o[0]))/l;return c<0||d<0||c>1||d>1?null:[e[0]+c*(n[0]-e[0]),e[1]+c*(n[1]-e[1])]}static appendArc(e,n,o,s,l,c=!1){const d=[...e];let p=Math.atan2(s[1]-n[1],s[0]-n[0]),h=Math.atan2(l[1]-n[1],l[0]-n[0]);p<0&&(p+=ms),h<0&&(h+=ms);const g=5,v=p>h?p-h:p+ms-h,w=(c?-v:ms-v)/g;d.push(s);for(let x=1;x<g;++x){const y=p+w*x;d.push([n[0]+Math.cos(y)*o,n[1]+Math.sin(y)*o])}return d.push(l),d}static createOffsetEdge(e,n){return e.map(o=>J.add(o,n))}static getOffsetPolygon(e,n=0){const o=j1.getEdges(e),s=o.map(c=>j1.createOffsetEdge(c,J.mul(j1.outwardEdgeNormal(c),n))),l=[];for(let c=0;c<s.length;c++){const d=s[c],p=s[(c+s.length-1)%s.length],h=j1.edgesIntersection(p,d);h?l.push(h):j1.appendArc(l,o[c][0],n,p[1],d[0],!1)}return l}static createPaddingPolygon(e,n=0){const o=e.map(l=>j1.createOffsetEdge(l,j1.inwardEdgeNormal(l))),s=[];for(let l=0;l<o.length;l++){const c=o[l],d=o[(l+o.length-1)%o.length],p=j1.edgesIntersection(d,c);p?s.push(p):j1.appendArc(s,e[l][0],n,d[1],c[0],!0)}return s}},Eu=j1;m(Eu,"leftSide",J.isLeft);function Lu(e,n){if(e.length<3)throw Error("Polygon must have at least 3 points");const o=e.length;return e.map((s,l)=>[s,e[(l+1)%o]]).map(([s,l])=>{const c=J.mul(J.per(J.uni(J.sub(l,s))),n);return[J.add(s,c),J.add(l,c)]}).map((s,l,c)=>{const d=L3(s,c[(l+1)%c.length]);if(d===void 0)throw Error("Expected an intersection");return d})}function bn(e,n=0,o=0){const[s,l]=e;let c=[[s/2,0],[s,l],[0,l]];return n&&(c=Lu(c,n)),o&&(c=c.map(d=>J.rotWith(d,[s/2,l/2],o))),c}function c9(e){const[n,o]=e,s=[[n/2,0],[n,o],[0,o]];return[(s[0][0]+s[1][0]+s[2][0])/3,(s[0][1]+s[1][1]+s[2][1])/3]}function Su(e,n,o){const[s,l]=n,c=H.rng(e),d=Array.from(Array(3)).map(()=>[c()*o*.75,c()*o*.75]),p=[J.add([s/2,0],d[0]),J.add([s,l],d[1]),J.add([0,l],d[2])],h=Math.round(Math.abs(c()*2*3)),g=H.rotateArray([J.pointsBetween(p[0],p[1],32),J.pointsBetween(p[1],p[2],32),J.pointsBetween(p[2],p[0],32)],h);return{points:[...g.flat(),...g[0]]}}function d9(e,n,o){const{strokeWidth:s}=Ct(o),{points:l}=Su(e,n,s);return{points:l,options:{size:s,thinning:.65,streamline:.3,smoothing:1,simulatePressure:!1,last:!0}}}function Ru(e,n,o){const{points:s,options:l}=d9(e,n,o),c=ei(s,l);return H.getSvgPathFromStroke(c)}function Iu(e,n,o){const{points:s,options:l}=d9(e,n,o),c=to(s,l);return H.getSvgPathFromStroke(c.map(d=>d.point.slice(0,2)),!1)}var Mu=f.memo(function({id:n,size:o,style:s,isSelected:l,isDarkMode:c}){const{stroke:d,strokeWidth:p,fill:h}=Ct(s,c),g=Ru(n,o,s),v=Iu(n,o,s);return f.createElement(f.Fragment,null,f.createElement("path",{className:s.isFilled||l?"tl-fill-hitarea":"tl-stroke-hitarea",d:v}),s.isFilled&&f.createElement("path",{d:v,fill:h,pointerEvents:"none"}),f.createElement("path",{d:g,fill:d,stroke:d,strokeWidth:p,pointerEvents:"none"}))}),Pu=f.memo(function({id:n,size:o,style:s,isSelected:l,isDarkMode:c}){const{stroke:d,strokeWidth:p,fill:h}=Ct(s,c),g=1+p*1.618,v=bn(o),x=H.pointsToLineSegments(v,!0).map(([E,R],P)=>{const{strokeDasharray:$,strokeDashoffset:I}=H.getPerfectDashProps(J.dist(E,R),p*1.618,s.dash);return f.createElement("line",{key:n+"_"+P,x1:E[0],y1:E[1],x2:R[0],y2:R[1],stroke:d,strokeWidth:g,strokeLinecap:"round",strokeDasharray:$,strokeDashoffset:I})}),y=v.join();return f.createElement(f.Fragment,null,f.createElement("polygon",{className:s.isFilled||l?"tl-fill-hitarea":"tl-stroke-hitarea",points:y}),s.isFilled&&f.createElement("polygon",{fill:h,points:y,pointerEvents:"none"}),f.createElement("g",{pointerEvents:"stroke"},x))});function $u({size:e}){const n=bn(e).join();return f.createElement("polygon",{className:"tl-binding-indicator",points:n,strokeWidth:m1*2})}var Hu=class extends gt{constructor(){super(...arguments),m(this,"type","triangle"),m(this,"canBind",!0),m(this,"canClone",!0),m(this,"canEdit",!0),m(this,"getShape",e=>H.deepMerge({id:"id",type:"triangle",name:"Triangle",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:ur,label:"",labelPoint:[.5,.5]},e)),m(this,"Component",gt.Component(({shape:e,bounds:n,isBinding:o,isEditing:s,isSelected:l,isGhost:c,meta:d,events:p,onShapeChange:h,onShapeBlur:g},v)=>{const{id:w,label:x="",size:y,style:E,labelPoint:R=Aa}=e,P=Qr(E),$=Ct(E,d.isDarkMode),I=E.dash==="draw"?Mu:Pu,B=f.useCallback(T=>h?.({id:w,label:T}),[h]),j=f.useMemo(()=>{const T=J.div(y,2);return(c9(y)[1]-T[1])*.72},[y]);return f.createElement(ku,k({ref:v},p),f.createElement(Cs,{font:P,text:x,color:$.stroke,offsetX:(R[0]-.5)*n.width,offsetY:j+(R[1]-.5)*n.height,isEditing:s,onChange:B,onBlur:g}),f.createElement(B1,{id:e.id+"_svg",opacity:c?L1:1},o&&f.createElement($u,{size:y}),f.createElement(I,{id:w,style:E,size:y,isSelected:l,isDarkMode:d.isDarkMode})))})),m(this,"Indicator",gt.Indicator(({shape:e})=>{const{size:n}=e;return f.createElement("polygon",{points:bn(n).join()})})),m(this,"shouldRender",(e,n)=>n.size!==e.size||n.style!==e.style||n.label!==e.label),m(this,"getBounds",e=>fo(e,this.boundsCache)),m(this,"getExpandedBounds",e=>H.getBoundsFromPoints(bn(e.size,this.bindingDistance).map(n=>J.add(n,e.point)))),m(this,"hitTestLineSegment",(e,n,o)=>ni(n,o,this.getPoints(e)).didIntersect),m(this,"hitTestBounds",(e,n)=>H.boundsContained(this.getBounds(e),n)||z3(n,this.getPoints(e)).length>0),m(this,"getBindingPoint",(e,n,o,s,l,c)=>{const d=this.getExpandedBounds(e);if(!H.pointInBounds(o,d))return;const p=bn(e.size).map($=>J.add($,e.point)),h=bn(e.size,this.bindingDistance).map($=>J.add($,e.point)),g=H.pointsToLineSegments(p,!0).map(([$,I])=>J.distanceToLineSegment($,I,o)).sort(($,I)=>$-I)[0];if(!(H.pointInPolygon(o,h)||g<this.bindingDistance))return;const v=H.pointsToLineSegments(h.concat([h[0]])).map($=>ti(s,l,$[0],$[1])).filter($=>$.didIntersect).flatMap($=>$.points);if(!v.length)return;const w=J.add(c9(e.size),e.point),x=v.sort(($,I)=>J.dist(I,s)-J.dist($,s))[0],y=J.med(o,x);let E,R;c?(E=J.dist(o,w)<m1/2?w:o,R=0):(J.distanceToLineSegment(o,y,w)<m1/2?E=w:E=y,H.pointInPolygon(o,p)?R=this.bindingDistance:R=Math.max(this.bindingDistance,g));const P=J.divV(J.sub(E,[d.minX,d.minY]),[d.width,d.height]);return{point:J.clampV(P,0,1),distance:R}}),m(this,"transform",ps),m(this,"transformSingle",gs)}getPoints(e){const{rotation:n=0,point:[o,s],size:[l,c]}=e;return[[o+l/2,s],[o,s+c],[o+l,s+c]].map(d=>J.rotWith(d,this.getCenter(e),n))}},ku=Me("div",{width:"100%",height:"100%"});function u9(e,n,o){const{strokeWidth:s}=Ct(o),l=H.rng(e),c=n[0]+l()*s*2,d=n[1]+l()*s*2,p=H.perimeterOfEllipse(c,d),h=[],g=Math.PI+Math.PI*l(),v=Math.abs(l()),w=Math.max(16,p/10);for(let x=0;x<w;x++){const y=fs.easeInOutSine(x/(w+1)),E=g*2+Math.PI*(2+v)*y,R=Math.cos(E),P=Math.sin(E);h.push([c*R+n[0],d*P+n[1],y+.5+l()/2])}return to(h,{size:1+s*2,thinning:.618,end:{taper:p/8},start:{taper:p/12},streamline:0,simulatePressure:!0})}function Ou(e,n,o){const{strokeWidth:s}=Ct(o),l=H.rng(e),c=n[0]+l()*s*2,d=n[1]+l()*s*2,p=H.perimeterOfEllipse(c,d);return H.getSvgPathFromStroke(ca(u9(e,n,o),{size:2+s*2,thinning:.618,end:{taper:p/8},start:{taper:p/12},streamline:0,simulatePressure:!0}))}function f9(e,n,o){return H.getSvgPathFromStroke(u9(e,n,o).map(s=>s.point.slice(0,2)),!1)}var Tu=f.memo(function({id:n,radius:o,style:s,isSelected:l,isDarkMode:c}){const{stroke:d,strokeWidth:p,fill:h}=Ct(s,c),g=Ou(n,o,s);return f.createElement(f.Fragment,null,f.createElement("ellipse",{className:s.isFilled||l?"tl-fill-hitarea":"tl-stroke-hitarea",cx:o[0],cy:o[1],rx:o[0],ry:o[1]}),s.isFilled&&f.createElement("path",{d:f9(n,o,s),stroke:"none",fill:h,pointerEvents:"none"}),f.createElement("path",{d:g,fill:d,stroke:d,strokeWidth:p,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round"}))}),Bu=f.memo(function({radius:n,style:o,isSelected:s,isDarkMode:l}){const{stroke:c,strokeWidth:d,fill:p}=Ct(o,l),h=1+d*1.618,g=Math.max(0,n[0]-h/2),v=Math.max(0,n[1]-h/2),w=H.perimeterOfEllipse(g,v),{strokeDasharray:x,strokeDashoffset:y}=H.getPerfectDashProps(w<64?w*2:w,d*1.618,o.dash,4);return f.createElement(f.Fragment,null,f.createElement("ellipse",{className:o.isFilled||s?"tl-fill-hitarea":"tl-stroke-hitarea",cx:n[0],cy:n[1],rx:n[0],ry:n[1]}),f.createElement("ellipse",{cx:n[0],cy:n[1],rx:g,ry:v,fill:p,stroke:c,strokeWidth:h,strokeDasharray:x,strokeDashoffset:y,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round"}))}),Vu=class extends gt{constructor(){super(...arguments),m(this,"type","ellipse"),m(this,"canBind",!0),m(this,"canClone",!0),m(this,"canEdit",!0),m(this,"getShape",e=>H.deepMerge({id:"id",type:"ellipse",name:"Ellipse",parentId:"page",childIndex:1,point:[0,0],radius:[1,1],rotation:0,style:ur,label:"",labelPoint:[.5,.5]},e)),m(this,"Component",gt.Component(({shape:e,isGhost:n,isSelected:o,isBinding:s,isEditing:l,meta:c,bounds:d,events:p,onShapeChange:h,onShapeBlur:g},v)=>{const{id:w,radius:x,style:y,label:E="",labelPoint:R=Aa}=e,P=Qr(e.style),$=Ct(y,c.isDarkMode),I=$.strokeWidth,B=1+I*1.618,j=Math.max(0,x[0]-B/2),T=Math.max(0,x[1]-B/2),D=y.dash==="draw"?Tu:Bu,A=f.useCallback(X=>h?.({id:w,label:X}),[h]);return f.createElement(ju,k({ref:v},p),f.createElement(Cs,{isEditing:l,onChange:A,onBlur:g,font:P,text:E,color:$.stroke,offsetX:(R[0]-.5)*d.width,offsetY:(R[1]-.5)*d.height}),f.createElement(B1,{id:e.id+"_svg",opacity:n?L1:1},s&&f.createElement("ellipse",{className:"tl-binding-indicator",cx:x[0],cy:x[1],rx:j,ry:T,strokeWidth:this.bindingDistance}),f.createElement(D,{id:w,radius:x,style:y,isSelected:o,isDarkMode:c.isDarkMode})))})),m(this,"Indicator",gt.Indicator(({shape:e})=>{const{id:n,radius:o,style:s}=e,c=Ct(s).strokeWidth,d=1+c*1.618,p=Math.max(0,o[0]-d/2),h=Math.max(0,o[1]-d/2);return s.dash==="draw"?f.createElement("path",{d:f9(n,o,s)}):f.createElement("ellipse",{cx:o[0],cy:o[1],rx:p,ry:h})})),m(this,"hitTestPoint",(e,n)=>H.pointInBounds(n,this.getRotatedBounds(e))&&H.pointInEllipse(n,this.getCenter(e),e.radius[0],e.radius[1],e.rotation||0)),m(this,"hitTestLineSegment",(e,n,o)=>ro(n,o,this.getCenter(e),e.radius[0],e.radius[1],e.rotation||0).didIntersect),m(this,"getBounds",e=>H.getFromCache(this.boundsCache,e,()=>H.getRotatedEllipseBounds(e.point[0],e.point[1],e.radius[0],e.radius[1],0))),m(this,"getRotatedBounds",e=>H.getRotatedEllipseBounds(e.point[0],e.point[1],e.radius[0],e.radius[1],e.rotation)),m(this,"hitTestBounds",(e,n)=>{const o=this.getBounds(e);return H.boundsContained(o,n)||A3(this.getCenter(e),e.radius[0],e.radius[1],e.rotation||0,n).length>0}),m(this,"shouldRender",(e,n)=>n.radius!==e.radius||n.style!==e.style||n.label!==e.label),m(this,"getCenter",e=>L.add(e.point,e.radius)),m(this,"getBindingPoint",(e,n,o,s,l,c)=>{{const d=this.getExpandedBounds(e),p=this.getCenter(e);let h,g;if(!H.pointInEllipse(o,p,e.radius[0]+this.bindingDistance,e.radius[1]+this.bindingDistance))return;if(c)L.dist(o,this.getCenter(e))<12?h=[.5,.5]:h=L.divV(L.sub(o,[d.minX,d.minY]),[d.width,d.height]),g=0;else{let v=fa(s,l,p,e.radius[0],e.radius[1],e.rotation||0).points.sort((x,y)=>L.dist(x,s)-L.dist(y,s))[0];if(v||(v=ro(o,p,p,e.radius[0],e.radius[1],e.rotation||0).points.sort((x,y)=>L.dist(x,o)-L.dist(y,o))[0]),!v)return;const w=L.med(o,v);if(L.distanceToLineSegment(o,w,this.getCenter(e))<12?h=[.5,.5]:h=L.divV(L.sub(w,[d.minX,d.minY]),[d.width,d.height]),H.pointInEllipse(o,p,e.radius[0],e.radius[1],e.rotation||0))g=this.bindingDistance/2;else{const x=ro(o,p,p,e.radius[0],e.radius[1],e.rotation||0).points[0];if(!x)return;g=Math.max(this.bindingDistance/2,L.dist(o,x))}}return{point:h,distance:g}}}),m(this,"transform",(e,n,{scaleX:o,scaleY:s,initialShape:l})=>{const{rotation:c=0}=l;return{point:[n.minX,n.minY],radius:[n.width/2,n.height/2],rotation:o<0&&s>=0||s<0&&o>=0?-(c||0):c||0}}),m(this,"transformSingle",(e,n)=>({point:L.toFixed([n.minX,n.minY]),radius:L.div([n.width,n.height],2)}))}},ju=Me("div",{width:"100%",height:"100%"});function Au(e,n,o,s){return["M",e[0],e[1],"A",o[2],o[2],0,0,s<0?0:1,n[0],n[1]].join(" ")}function Ua(e,n){const{start:o,end:s}=e,l=J.dist(o.point,s.point),c=J.med(o.point,s.point),d=l/2*n,p=J.uni(J.vec(o.point,s.point));return J.toFixed(Math.abs(d)<10?c:J.add(c,J.mul(J.per(p),d)))}function Du(e,n,o,s,l,c){const d=H.rng(e),p=Ct(n).strokeWidth,h=l?J.nudge(o,s,p):o,g=c?J.nudge(s,o,p):s,v=ei([h,g],{size:p,thinning:.618+d()*.2,easing:fs.easeOutQuad,simulatePressure:!0,streamline:0,last:!0});return H.getSvgPathFromStroke(v)}function Zu(e,n,o,s,l,c,d,p,h,g){const v=H.rng(e),w=Ct(n).strokeWidth,x=l?J.rotWith(o,d,w/h):o,y=c?J.rotWith(s,d,-(w/h)):s,E=J.angle(d,x),R=J.angle(d,y),P=[],$=8+Math.floor(Math.abs(h)/20*1+v()/2);for(let B=0;B<$;B++){const j=g(B/$),T=H.lerpAngles(E,R,j);P.push(J.toFixed(J.nudgeAtAngle(d,T,p)))}const I=ei([x,...P,y],{size:1+w,thinning:.618+v()*.2,easing:fs.easeOutQuad,simulatePressure:!1,streamline:0,last:!0});return H.getSvgPathFromStroke(I)}function ho(e,n,o){return H.circleFromThreePoints(e,o,n)}function Ka(e,n,o,s,l){const c=B3(e,n*.618,o,s).points;if(!c)return z.warn("Could not find an intersection for the arrow head."),{left:e,right:e};const d=l?c[0]:c[1],p=d?J.nudge(J.rotWith(d,e,Math.PI/6),e,n*-.382):e,h=d?J.nudge(J.rotWith(d,e,-Math.PI/6),e,n*-.382):e;return{left:p,right:h}}function Xa(e,n,o){const s=T3(e,o,e,n).points;if(!s)return z.warn("Could not find an intersection for the arrow head."),{left:e,right:e};const l=s[0],c=l?J.rotWith(l,e,Math.PI/6):e,d=l?J.rotWith(l,e,-Math.PI/6):e;return{left:c,right:d}}function h9(e,n,o,s,l){const{left:c,right:d}=Ka(e,n,o,s,l);return`M ${c} L ${e} ${d}`}function p9(e,n,o){const{left:s,right:l}=Xa(e,n,o);return`M ${s} L ${e} ${l}`}function zu(e,n,o,s,l,c){const{strokeWidth:d}=Ct(e,!1),p=J.dist(n,s),h=Math.min(p/3,d*8),g=[];if(J.dist(o,J.toFixed(J.med(n,s)))<1)g.push(`M ${n} L ${s}`),l&&g.push(p9(n,s,h)),c&&g.push(p9(s,n,h));else{const w=ho(n,o,s),x=[w[0],w[1]],y=w[2],E=ws(x,y,n,s);g.push(`M ${n} A ${y} ${y} 0 0 ${E>0?"1":"0"} ${s}`),l&&g.push(h9(n,h,x,y,E<0)),c&&g.push(h9(s,h,x,y,E>=0))}return g.join(" ")}function _s(e,n,o){if(J.dist2(n,J.med(e,o))<=4)return[e,o];const s=[],l=ho(e,n,o),c=[l[0],l[1]],d=l[2],p=J.angle(c,e),h=J.angle(c,o);for(let g=1/20;g<1;g+=1/20){const v=H.lerpAngles(p,h,g);s.push(J.nudgeAtAngle(c,v,d))}return s}function Wu(e,n,o){if(o===e||o===n)return!0;const s=Math.PI*2,l=(n-e+s)%s,c=(o-e+s)%s;return l<=Math.PI!=c>l}function ws(e,n,o,s){const l=H.getSweep(e,o,s);return n*(2*Math.PI)*(l/(2*Math.PI))}function bs({left:e,middle:n,right:o,stroke:s,strokeWidth:l}){return f.createElement("g",null,f.createElement("path",{className:"tl-stroke-hitarea",d:`M ${e} L ${n} ${o}`}),f.createElement("path",{d:`M ${e} L ${n} ${o}`,fill:"none",stroke:s,strokeWidth:l,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"}))}var Fu=f.memo(function({id:n,style:o,start:s,end:l,decorationStart:c,decorationEnd:d,isDraw:p,isDarkMode:h}){const g=J.dist(s,l);if(g<2)return null;const v=Ct(o,h),{strokeWidth:w}=v,x=1+w*1.618,y=p?Du(n,o,s,l,c,d):"M"+J.toFixed(s)+"L"+J.toFixed(l),{strokeDasharray:E,strokeDashoffset:R}=H.getPerfectDashProps(g,w*1.618,o.dash,2,!1),P=Math.min(g/3,w*8),$=c?Xa(s,l,P):null,I=d?Xa(l,s,P):null;return f.createElement(f.Fragment,null,f.createElement("path",{className:"tl-stroke-hitarea",d:y}),f.createElement("path",{d:y,fill:v.stroke,stroke:v.stroke,strokeWidth:p?x/2:x,strokeDasharray:E,strokeDashoffset:R,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"stroke"}),$&&f.createElement(bs,{left:$.left,middle:s,right:$.right,stroke:v.stroke,strokeWidth:x}),I&&f.createElement(bs,{left:I.left,middle:l,right:I.right,stroke:v.stroke,strokeWidth:x}))}),Nu=f.memo(function({id:n,style:o,start:s,bend:l,end:c,arrowBend:d,decorationStart:p,decorationEnd:h,isDraw:g,isDarkMode:v}){const w=J.dist(s,c);if(w<2)return null;const x=Ct(o,v),{strokeWidth:y}=x,E=1+y*1.618,R=ho(s,l,c),P=[R[0],R[1]],$=R[2],I=ws(P,$,s,c),B=H.rng(n),j=fs[B()>0?"easeInOutSine":"easeInOutCubic"],T=g?Zu(n,o,s,c,p,h,P,$,I,j):Au(s,c,R,d),{strokeDasharray:D,strokeDashoffset:A}=H.getPerfectDashProps(Math.abs(I),E,o.dash,2,!1),X=Math.min(w/3,y*8),ne=p?Ka(s,X,P,$,I<0):null,he=h?Ka(c,X,P,$,I>=0):null;return f.createElement(f.Fragment,null,f.createElement("path",{className:"tl-stroke-hitarea",d:T}),f.createElement("path",{d:T,fill:g?x.stroke:"none",stroke:x.stroke,strokeWidth:g?0:E,strokeDasharray:D,strokeDashoffset:A,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"}),ne&&f.createElement(bs,{left:ne.left,middle:s,right:ne.right,stroke:x.stroke,strokeWidth:E}),he&&f.createElement(bs,{left:he.left,middle:c,right:he.right,stroke:x.stroke,strokeWidth:E}))});function Uu({id:e,bounds:n,labelSize:o,offset:s,scale:l=1}){return f.createElement("defs",null,f.createElement("mask",{id:e+"_clip"},f.createElement("rect",{x:-100,y:-100,width:n.width+200,height:n.height+200,fill:"white"}),f.createElement("rect",{x:n.width/2-o[0]/2*l+(s?.[0]||0),y:n.height/2-o[1]/2*l+(s?.[1]||0),width:o[0]*l,height:o[1]*l,rx:4*l,ry:4*l,fill:"black",opacity:Math.max(l,.8)})))}var Ku=class extends gt{constructor(){super(...arguments),m(this,"type","arrow"),m(this,"hideBounds",!0),m(this,"canEdit",!0),m(this,"pathCache",new WeakMap),m(this,"getShape",e=>{var n,o,s,l;return k({id:"id",type:"arrow",name:"Arrow",parentId:"page",childIndex:1,point:[0,0],rotation:0,bend:0,handles:{start:k({id:"start",index:0,point:[0,0],canBind:!0},(n=e.handles)==null?void 0:n.start),end:k({id:"end",index:1,point:[1,1],canBind:!0},(o=e.handles)==null?void 0:o.end),bend:k({id:"bend",index:2,point:[.5,.5]},(s=e.handles)==null?void 0:s.bend)},decorations:(l=e.decorations)!=null?l:{end:"arrow"},style:k(U(k({},ur),{isFilled:!1}),e.style),label:"",labelPoint:[.5,.5]},e)}),m(this,"Component",gt.Component(({shape:e,isEditing:n,isGhost:o,meta:s,events:l,onShapeChange:c,onShapeBlur:d},p)=>{const{id:h,label:g="",handles:{start:v,bend:w,end:x},decorations:y={},style:E}=e,R=L.dist(w.point,L.toFixed(L.med(v.point,x.point)))<1,P=Qr(E),$=Ct(E,s.isDarkMode),I=g||n?hs(g,P):[0,0],B=this.getBounds(e),j=f.useMemo(()=>{const{start:ne,bend:he,end:Se}=e.handles;if(R)return L.dist(ne.point,Se.point);const ve=ho(ne.point,he.point,Se.point),me=ve.slice(0,2),rt=ve[2],ht=ws(me,rt,ne.point,Se.point);return Math.abs(ht)},[e.handles]),T=Math.max(.5,Math.min(1,Math.max(j/(I[1]+128),j/(I[0]+128)))),D=f.useMemo(()=>{const ne=this.getBounds(e);return L.sub(e.handles.bend.point,L.toFixed([ne.width/2,ne.height/2]))},[e,T]),A=f.useCallback(ne=>{c?.({id:h,label:ne})},[c]),X=R?Fu:Nu;return f.createElement(Xu,k({ref:p},l),f.createElement(Cs,{font:P,text:g,color:$.stroke,offsetX:D[0],offsetY:D[1],scale:T,isEditing:n,onChange:A,onBlur:d}),f.createElement(B1,{id:e.id+"_svg"},f.createElement("defs",null,f.createElement("mask",{id:e.id+"_clip"},f.createElement("rect",{x:-100,y:-100,width:B.width+200,height:B.height+200,fill:"white"}),f.createElement("rect",{x:B.width/2-I[0]/2*T+D[0],y:B.height/2-I[1]/2*T+D[1],width:I[0]*T,height:I[1]*T,rx:4*T,ry:4*T,fill:"black",opacity:1}))),f.createElement("g",{pointerEvents:"none",opacity:o?L1:1,mask:g||n?`url(#${e.id}_clip)`:""},f.createElement(X,{id:h,style:E,start:v.point,end:x.point,bend:w.point,arrowBend:e.bend,decorationStart:y?.start,decorationEnd:y?.end,isDraw:E.dash==="draw",isDarkMode:s.isDarkMode}))))})),m(this,"Indicator",gt.Indicator(({shape:e,bounds:n})=>{const{style:o,decorations:s,label:l,handles:{start:c,bend:d,end:p}}=e,h=Qr(o),g=l?hs(l,h):[0,0],v=L.dist(d.point,L.toFixed(L.med(c.point,p.point)))<1,w=f.useMemo(()=>{const{start:E,bend:R,end:P}=e.handles;if(v)return L.dist(E.point,P.point);const $=ho(E.point,R.point,P.point),I=$.slice(0,2),B=$[2],j=ws(I,B,E.point,P.point);return Math.abs(j)},[e.handles]),x=Math.max(.5,Math.min(1,Math.max(w/(g[1]+128),w/(g[0]+128)))),y=f.useMemo(()=>{const E=this.getBounds(e);return L.sub(e.handles.bend.point,[E.width/2,E.height/2])},[e,x]);return f.createElement(f.Fragment,null,f.createElement(Uu,{id:e.id,scale:x,offset:y,bounds:n,labelSize:g}),f.createElement("path",{d:zu(o,c.point,d.point,p.point,s?.start,s?.end),mask:l?`url(#${e.id}_clip)`:""}),l&&f.createElement("rect",{x:n.width/2-g[0]/2*x+y[0],y:n.height/2-g[1]/2*x+y[1],width:g[0]*x,height:g[1]*x,rx:4*x,ry:4*x,fill:"transparent"}))})),m(this,"getBounds",e=>{const n=H.getFromCache(this.boundsCache,e,()=>{const{handles:{start:o,bend:s,end:l}}=e;return H.getBoundsFromPoints(_s(o.point,s.point,l.point))});return H.translateBounds(n,e.point)}),m(this,"getRotatedBounds",e=>{const{handles:{start:n,bend:o,end:s}}=e;let l=_s(n.point,o.point,s.point);const{minX:c,minY:d,maxX:p,maxY:h}=H.getBoundsFromPoints(l);return e.rotation!==0&&(l=l.map(g=>L.rotWith(g,[(c+p)/2,(d+h)/2],e.rotation||0))),H.translateBounds(H.getBoundsFromPoints(l),e.point)}),m(this,"getCenter",e=>{const{start:n,end:o}=e.handles;return L.add(e.point,L.med(n.point,o.point))}),m(this,"shouldRender",(e,n)=>n.decorations!==e.decorations||n.handles!==e.handles||n.style!==e.style||n.label!==e.label),m(this,"hitTestPoint",(e,n)=>{const{handles:{start:o,bend:s,end:l}}=e,c=L.sub(n,e.point),d=_s(o.point,s.point,l.point);for(let p=1;p<d.length;p++)if(L.distanceToLineSegment(d[p-1],d[p],c)<1)return!0;return!1}),m(this,"hitTestLineSegment",(e,n,o)=>{const{handles:{start:s,bend:l,end:c}}=e,d=L.sub(n,e.point),p=L.sub(o,e.point),h=_s(s.point,l.point,c.point);for(let g=1;g<h.length;g++)if(ri(h[g-1],h[g],d,p).didIntersect)return!0;return!1}),m(this,"hitTestBounds",(e,n)=>{const{start:o,end:s,bend:l}=e.handles,c=L.add(e.point,o.point),d=L.add(e.point,s.point);if(H.pointInBounds(c,n)||H.pointInBounds(d,n))return!0;if(L.isEqual(L.med(o.point,s.point),l.point))return pa(c,d,n).length>0;{const[p,h,g]=ho(o.point,l.point,s.point),v=L.add(e.point,[p,h]);return O3(v,g,c,d,n).length>0}}),m(this,"transform",(e,n,{initialShape:o,scaleX:s,scaleY:l})=>{const c=this.getBounds(o),d=["start","end"],p=k({},o.handles);d.forEach(P=>{const[$,I]=p[P].point,B=$/c.width,j=I/c.height;p[P]=U(k({},p[P]),{point:[n.width*(s<0?1-B:B),n.height*(l<0?1-j:j)]})});const{start:h,bend:g,end:v}=p,w=L.dist(h.point,v.point),x=L.med(h.point,v.point),y=w/2*o.bend,E=L.uni(L.vec(h.point,v.point)),R=L.add(x,L.mul(L.per(E),y));return p.bend=U(k({},g),{point:L.toFixed(Math.abs(y)<10?x:R)}),{point:L.toFixed([n.minX,n.minY]),handles:p}}),m(this,"onDoubleClickHandle",(e,n)=>{var o,s;switch(n){case"bend":return{bend:0,handles:U(k({},e.handles),{bend:U(k({},e.handles.bend),{point:Ua(e.handles,e.bend)})})};case"start":return{decorations:U(k({},e.decorations),{start:(o=e.decorations)!=null&&o.start?void 0:"arrow"})};case"end":return{decorations:U(k({},e.decorations),{end:(s=e.decorations)!=null&&s.end?void 0:"arrow"})}}return this}),m(this,"onHandleChange",(e,n)=>{let o=H.deepMerge(e.handles,n),s=e.bend;if(o=H.deepMerge(o,{start:{point:L.toFixed(o.start.point)},end:{point:L.toFixed(o.end.point)}}),L.isEqual(o.start.point,o.end.point))return;if("bend"in n){const{start:h,end:g,bend:v}=o,w=L.dist(h.point,g.point),x=L.med(h.point,g.point),y=L.angle(h.point,g.point),E=L.uni(L.vec(h.point,g.point)),R=L.add(x,L.mul(L.per(E),w/2)),P=L.sub(x,L.mul(L.per(E),w/2)),$=L.nearestPointOnLineSegment(R,P,v.point,!0),I=L.dist(x,$);s=H.clamp(I/(w/2),-.99,.99);const B=L.angle(h.point,$);L.isEqual(x,Ua(o,s))?s=0:Wu(y,y+Math.PI,B)&&(s*=-1)}const l={point:e.point,bend:s,handles:U(k({},o),{bend:U(k({},o.bend),{point:Ua(o,s)})})},c=e.point,d=this.getBounds(k({},l)),p=L.sub([d.minX,d.minY],c);if(!L.isEqual(p,[0,0])&&(Object.values(l.handles).forEach(h=>{h.point=L.toFixed(L.sub(h.point,p))}),l.point=L.toFixed(L.add(l.point,p)),L.isEqual(l.point,[0,0])))throw Error("here!");return l})}},Xu=Me("div",{width:"100%",height:"100%"}),Gu=class extends gt{constructor(){super(...arguments),m(this,"type","group"),m(this,"canBind",!0),m(this,"getShape",e=>H.deepMerge({id:"id",type:"group",name:"Group",parentId:"page",childIndex:1,point:[0,0],size:[100,100],rotation:0,children:[],style:ur},e)),m(this,"Component",gt.Component(({shape:e,isBinding:n,isGhost:o,isHovered:s,isSelected:l,events:c},d)=>{const{id:p,size:h}=e,g=2,v=Math.max(0,h[0]-g/2),w=Math.max(0,h[1]-g/2),y=[[[g/2,g/2],[v,g/2],v-g/2],[[v,g/2],[v,w],w-g/2],[[v,w],[g/2,w],v-g/2],[[g/2,w],[g/2,g/2],w-g/2]].map(([E,R],P)=>f.createElement("line",{key:p+"_"+P,x1:E[0],y1:E[1],x2:R[0],y2:R[1]}));return f.createElement(B1,k({ref:d},c),n&&f.createElement("rect",{className:"tl-binding-indicator",strokeWidth:this.bindingDistance}),f.createElement("g",{opacity:o?L1:1},f.createElement("rect",{x:0,y:0,width:h[0],height:h[1],fill:"transparent",pointerEvents:"all"}),f.createElement(g9,{stroke:"black",opacity:s||l?1:0,strokeLinecap:"round",pointerEvents:"stroke"},y)))})),m(this,"Indicator",gt.Indicator(({shape:e})=>{const{id:n,size:o}=e,s=2,l=Math.max(0,o[0]-s/2),c=Math.max(0,o[1]-s/2),p=[[[s/2,s/2],[l,s/2],l-s/2],[[l,s/2],[l,c],c-s/2],[[l,c],[s/2,c],l-s/2],[[s/2,c],[s/2,s/2],c-s/2]].map(([h,g],v)=>f.createElement("line",{key:n+"_"+v,x1:h[0],y1:h[1],x2:g[0],y2:g[1]}));return f.createElement(g9,{strokeLinecap:"round",pointerEvents:"stroke"},p)})),m(this,"getBounds",e=>fo(e,this.boundsCache)),m(this,"shouldRender",(e,n)=>n.size!==e.size||n.style!==e.style)}},g9=Me("g",{strokeWidth:"calc(1.5px * var(--tl-scale))",strokeDasharray:"calc(1px * var(--tl-scale)), calc(3px * var(--tl-scale))"}),Yu=class extends gt{constructor(){super(...arguments),m(this,"type","sticky"),m(this,"canBind",!0),m(this,"canEdit",!0),m(this,"canClone",!0),m(this,"hideResizeHandles",!0),m(this,"showCloneHandles",!0),m(this,"getShape",e=>H.deepMerge({id:"id",type:"sticky",name:"Sticky",parentId:"page",childIndex:1,point:[0,0],size:[200,200],text:"",rotation:0,style:Wa},e)),m(this,"Component",gt.Component(({shape:e,meta:n,events:o,isGhost:s,isBinding:l,isEditing:c,onShapeBlur:d,onShapeChange:p},h)=>{const g=uu(e.style),{color:v,fill:w}=e9(e.style,n.isDarkMode),x=f.useRef(null),y=f.useRef(null),E=f.useRef(null),R=f.useRef(e.text),P=f.useRef(!1),$=f.useCallback(A=>{A.stopPropagation()},[]),I=f.useCallback(A=>{R.current=z.normalizeText(A.currentTarget.value),p?.({id:e.id,type:e.type,text:R.current})},[p]),B=f.useCallback(A=>{if(A.key!=="Escape"){if(A.key==="Tab"&&e.text.length===0){A.preventDefault();return}if(!(A.key==="Meta"||A.metaKey))A.stopPropagation();else if(A.key==="z"&&A.metaKey){A.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1),A.stopPropagation(),A.preventDefault();return}A.key==="Tab"&&(A.preventDefault(),A.shiftKey?S1.unindent(A.currentTarget):S1.indent(A.currentTarget),R.current=z.normalizeText(A.currentTarget.value),p?.(U(k({},e),{text:R.current})))}},[e,p]),j=f.useCallback(A=>{A.currentTarget.setSelectionRange(0,0),d?.()},[]),T=f.useCallback(A=>{!c||!P.current||A.currentTarget.select()},[c]);f.useEffect(()=>{if(c){R.current=e.text,P.current=!0;const A=y.current;A.focus(),A.select()}},[c]),f.useEffect(()=>{const A=E.current,{size:X}=e,{offsetHeight:ne}=A,he=Ga-fr*2,Se=X[1]-fr*2;if(ne===Se)return;if(ne>he){p?.({id:e.id,size:[X[0],ne+fr*2]});return}if(ne<he&&X[1]>Ga){p?.({id:e.id,size:[X[0],Ga]});return}const ve=y.current;ve?.focus()},[e.text,e.size[1],e.style]);const D={font:g,color:v,textShadow:n.isDarkMode?"0.5px 0.5px 2px rgba(255, 255, 255,.25)":"0.5px 0.5px 2px rgba(255, 255, 255,.5)"};return f.createElement(Gi,k({ref:h},o),f.createElement(qu,{ref:x,isDarkMode:n.isDarkMode,isGhost:s,style:k({backgroundColor:w},D)},l&&f.createElement("div",{className:"tl-binding-indicator",style:{position:"absolute",top:-this.bindingDistance,left:-this.bindingDistance,width:`calc(100% + ${this.bindingDistance*2}px)`,height:`calc(100% + ${this.bindingDistance*2}px)`,backgroundColor:"var(--tl-selectFill)"}}),f.createElement(Ju,{ref:E,isEditing:c,alignment:e.style.textAlign},c?R.current:e.text,"\u200B"),c&&f.createElement(Qu,{ref:y,onPointerDown:$,value:c?R.current:e.text,onChange:I,onKeyDown:B,onFocus:T,onBlur:j,tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,spellCheck:!0,alignment:e.style.textAlign,onContextMenu:vs})))})),m(this,"Indicator",gt.Indicator(({shape:e})=>{const{size:[n,o]}=e;return f.createElement("rect",{x:0,y:0,rx:3,ry:3,width:Math.max(1,n),height:Math.max(1,o)})})),m(this,"getBounds",e=>fo(e,this.boundsCache)),m(this,"shouldRender",(e,n)=>n.size!==e.size||n.style!==e.style||n.text!==e.text),m(this,"transform",(e,n,{scaleX:o,scaleY:s,transformOrigin:l})=>({point:L.toFixed([n.minX+(n.width-e.size[0])*(o<0?1-l[0]:l[0]),n.minY+(n.height-e.size[1])*(s<0?1-l[1]:l[1])])})),m(this,"transformSingle",e=>e),m(this,"getSvgElement",e=>{const n=this.getBounds(e),o=H.expandBounds(n,-fr),s=Fa(e.text,e.style,o),l=e9(e.style);s.setAttribute("fill",l.color),s.setAttribute("transform",`translate(${fr}, ${fr})`);const c=document.createElementNS("http://www.w3.org/2000/svg","g"),d=document.createElementNS("http://www.w3.org/2000/svg","rect");return d.setAttribute("width",n.width+""),d.setAttribute("height",n.height+""),d.setAttribute("fill",l.fill),d.setAttribute("rx","3"),d.setAttribute("ry","3"),c.appendChild(d),c.appendChild(s),c})}},fr=16,Ga=200,qu=Me("div",{pointerEvents:"all",position:"relative",backgroundColor:"rgba(255, 220, 100)",fontFamily:"sans-serif",height:"100%",width:"100%",padding:fr+"px",borderRadius:"3px",perspective:"800px",variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:L1}},isDarkMode:{true:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.3), 1px 1px 4px rgba(0,0,0,.3), 1px 1px 2px rgba(0,0,0,.3)"},false:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.2), 1px 1px 4px rgba(0,0,0,.16),  1px 1px 2px rgba(0,0,0,.16)"}}}}),v9={whiteSpace:"pre-wrap",overflowWrap:"break-word"},Ju=Me("div",k({position:"absolute",top:fr,left:fr,width:`calc(100% - ${fr*2}px)`,height:"fit-content",font:"inherit",pointerEvents:"none",userSelect:"none",variants:{isEditing:{true:{opacity:1},false:{opacity:1}},alignment:{start:{textAlign:"left"},middle:{textAlign:"center"},end:{textAlign:"right"},justify:{textAlign:"justify"}}}},v9)),Qu=Me("textarea",U(k({width:"100%",height:"100%",border:"none",overflow:"hidden",background:"none",outline:"none",textAlign:"left",font:"inherit",padding:0,color:"transparent",verticalAlign:"top",resize:"none",caretColor:"black"},v9),{variants:{alignment:{start:{textAlign:"left"},middle:{textAlign:"center"},end:{textAlign:"right"},justify:{textAlign:"justify"}}}})),e6=class extends gt{constructor(){super(...arguments),m(this,"type","text"),m(this,"isAspectRatioLocked",!0),m(this,"canEdit",!0),m(this,"canBind",!0),m(this,"canClone",!0),m(this,"bindingDistance",m1/2),m(this,"getShape",e=>H.deepMerge({id:"id",type:"text",name:"Text",parentId:"page",childIndex:1,point:[0,0],rotation:0,text:" ",style:Wa},e)),m(this,"texts",new Map),m(this,"Component",gt.Component(({shape:e,isBinding:n,isGhost:o,isEditing:s,onShapeBlur:l,onShapeChange:c,meta:d,events:p},h)=>{const{text:g,style:v}=e,w=Ct(v,d.isDarkMode),x=Qr(e.style),y=f.useRef(null),E=f.useRef(!1),R=f.useCallback(T=>{let D=[0,0];const A=z.normalizeText(T.currentTarget.value),X=this.getBounds(e);this.texts.set(e.id,A);const ne=this.getBounds(U(k({},e),{text:A}));switch(e.style.textAlign){case"start":break;case"middle":{D=L.div([ne.width-X.width,0],2);break}case"end":{D=[ne.width-X.width,0];break}}c?.(U(k({},e),{id:e.id,point:L.sub(e.point,D),text:A}))},[e.id,e.point]),P=f.useCallback(T=>{this.texts.set(e.id,z.normalizeText(T)),c?.({id:e.id,text:this.texts.get(e.id)})},[e.id]),$=i9(P),I=f.useCallback(T=>{T.currentTarget.setSelectionRange(0,0),l?.()},[]),B=f.useCallback(T=>{!s||!E.current||document.activeElement===T.currentTarget&&T.currentTarget.select()},[s]),j=f.useCallback(T=>{s&&T.stopPropagation()},[s]);return f.useEffect(()=>{s?(this.texts.set(e.id,g),requestAnimationFrame(()=>{E.current=!0;const T=y.current;T&&(T.focus(),T.select())})):l?.()},[s]),f.createElement(Gi,k({ref:h},p),f.createElement(r6,{isGhost:o,isEditing:s,onPointerDown:j},f.createElement(n6,{style:{font:x,color:w.stroke,textAlign:t9(v.textAlign)}},n&&f.createElement("div",{className:"tl-binding-indicator",style:{position:"absolute",top:-this.bindingDistance,left:-this.bindingDistance,width:`calc(100% + ${this.bindingDistance*2}px)`,height:`calc(100% + ${this.bindingDistance*2}px)`,backgroundColor:"var(--tl-selectFill)"}}),s?f.createElement(o6,{ref:y,style:{font:x,color:w.stroke},name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:g,color:w.stroke,onFocus:B,onChange:R,onKeyDown:$,onBlur:I,onPointerDown:j,onContextMenu:vs}):g,"\u200B")))})),m(this,"Indicator",gt.Indicator(({shape:e})=>{const{width:n,height:o}=this.getBounds(e);return f.createElement("rect",{x:0,y:0,width:n,height:o})})),m(this,"getBounds",e=>{const n=H.getFromCache(this.boundsCache,e,()=>{var o;if(!tn)return{minX:0,minY:0,maxX:10,maxY:10,width:10,height:10};tn.parentNode||document.body.appendChild(tn),tn.textContent=(o=this.texts.get(e.id))!=null?o:e.text,tn.style.font=Qr(e.style);const s=tn.offsetWidth||1,l=tn.offsetHeight||1;return{minX:0,maxX:s,minY:0,maxY:l,width:s,height:l}});return H.translateBounds(n,e.point)}),m(this,"shouldRender",(e,n)=>n.text!==e.text||n.style.scale!==e.style.scale||n.style!==e.style),m(this,"transform",(e,n,{initialShape:o,scaleX:s,scaleY:l})=>{const{rotation:c=0,style:{scale:d=1}}=o,p=d*Math.abs(Math.min(s,l));return{point:[n.minX,n.minY],rotation:s<0&&l>=0||l<0&&s>=0?-(c||0):c,style:U(k({},o.style),{scale:p})}}),m(this,"transformSingle",(e,n,{initialShape:o,scaleX:s,scaleY:l})=>{const{style:{scale:c=1}}=o;return{point:L.toFixed([n.minX,n.minY]),style:U(k({},o.style),{scale:c*Math.max(Math.abs(l),Math.abs(s))})}}),m(this,"onDoubleClickBoundsHandle",e=>{const n=this.getCenter(e),o=this.getCenter(U(k({},e),{style:U(k({},e.style),{scale:1})}));return{style:U(k({},e.style),{scale:1}),point:L.toFixed(L.add(e.point,L.sub(n,o)))}}),m(this,"getSvgElement",e=>{const n=this.getBounds(e),o=Fa(e.text,e.style,n);return o.setAttribute("fill",Ct(e.style).stroke),o})}},tn;function t6(){var e;(e=document.getElementById("__textMeasure"))==null||e.remove();const n=document.createElement("pre");return n.id="__textMeasure",Object.assign(n.style,{whiteSpace:"pre",width:"auto",border:"1px solid transparent",padding:"4px",margin:"0px",letterSpacing:cs,opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",pointerEvents:"none",userSelect:"none",alignmentBaseline:"mathematical",dominantBaseline:"mathematical"}),n.tabIndex=-1,document.body.appendChild(n),n}typeof window<"u"&&(tn=t6());var r6=Me("div",{width:"100%",height:"100%",variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:L1}},isEditing:{false:{pointerEvents:"all",userSelect:"all"},true:{pointerEvents:"none",userSelect:"none"}}}}),C9={whiteSpace:"pre-wrap",overflowWrap:"break-word"},n6=Me("div",k({position:"absolute",width:"100%",height:"100%",padding:"4px",zIndex:1,minHeight:1,minWidth:1,lineHeight:1,letterSpacing:cs,outline:0,fontWeight:"500",backfaceVisibility:"hidden",userSelect:"none",pointerEvents:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",isEditing:{false:{},true:{pointerEvents:"all",background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text"}}},C9)),o6=Me("textarea",k({position:"absolute",top:0,left:0,zIndex:1,width:"100%",height:"100%",border:"none",padding:"4px",resize:"none",textAlign:"inherit",minHeight:"inherit",minWidth:"inherit",lineHeight:"inherit",letterSpacing:"inherit",outline:0,fontWeight:"inherit",overflow:"hidden",backfaceVisibility:"hidden",display:"inline-block",pointerEvents:"all",background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text"},C9)),i6={easing:e=>Math.sin(e*Math.PI/2),simulatePressure:!0},s6={easing:e=>e*e,simulatePressure:!1};function Ya(e){const n=Ct(e.style);return U(k({size:1+n.strokeWidth*1.5,thinning:.65,streamline:.65,smoothing:.65},e.points[1][2]===.5?i6:s6),{last:e.isComplete})}function a6(e){return e.points.length<2?"":H.getSvgPathFromStroke(to(e.points,Ya(e)).map(n=>n.point))}function m9(e,n){return to(e.points,n)}function l6(e){if(e.points.length<2)return"";const n=Ya(e),o=m9(e,n);return H.getSvgPathFromStroke(ca(o,n))}function _9(e){const{points:n}=e;if(n.length<2)return"M 0 0 L 0 0";const o=Ya(e),s=m9(e,o).map(d=>d.point.slice(0,2)),l=n[n.length-1].slice(0,2);return J.isEqual(s[0],l)||s.push(l),H.getSvgPathFromStroke(s,!1)}var c6=class extends gt{constructor(){super(...arguments),m(this,"type","draw"),m(this,"pointsBoundsCache",new WeakMap([])),m(this,"shapeBoundsCache",new Map),m(this,"rotatedCache",new WeakMap([])),m(this,"pointCache",{}),m(this,"canClone",!0),m(this,"getShape",e=>H.deepMerge({id:"id",type:"draw",name:"Draw",parentId:"page",childIndex:1,point:[0,0],rotation:0,style:ur,points:[],isComplete:!1},e)),m(this,"Component",gt.Component(({shape:e,meta:n,isSelected:o,isGhost:s,events:l},c)=>{const{points:d,style:p,isComplete:h}=e,g=f.useMemo(()=>a6(e),[d,p.size]),v=f.useMemo(()=>p.dash==="draw"?l6(e):_9(e),[d,p.size,p.dash,h]),w=Ct(p,n.isDarkMode),{stroke:x,fill:y,strokeWidth:E}=w,R=this.getBounds(e);if(R.width<=E/2&&R.height<=E/2){const T=1+E;return f.createElement(B1,k({ref:c,id:e.id+"_svg"},l),f.createElement("circle",{r:T,fill:x,stroke:x,pointerEvents:"all",opacity:s?L1:1}))}const $=p.isFilled&&d.length>3&&L.dist(d[0],d[d.length-1])<E*2;if(e.style.dash==="draw")return f.createElement(B1,k({ref:c,id:e.id+"_svg"},l),f.createElement("g",{opacity:s?L1:1},f.createElement("path",{className:$||o?"tl-fill-hitarea":"tl-stroke-hitarea",d:v}),$&&f.createElement("path",{d:g,stroke:"none",fill:y,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"}),f.createElement("path",{d:v,fill:x,stroke:x,strokeWidth:E/2,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"})));const I={draw:"none",solid:"none",dotted:`0.1 ${E*4}`,dashed:`${E*4} ${E*4}`}[p.dash],B={draw:"none",solid:"none",dotted:"0",dashed:"0"}[p.dash],j=1+E*1.5;return f.createElement(B1,k({ref:c,id:e.id+"_svg"},l),f.createElement("g",{opacity:s?L1:1},f.createElement("path",{className:$&&o?"tl-fill-hitarea":"tl-stroke-hitarea",d:v}),f.createElement("path",{d:v,fill:$?y:"none",stroke:"none",strokeWidth:Math.min(4,E*2),strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"}),f.createElement("path",{d:v,fill:"none",stroke:x,strokeWidth:j,strokeDasharray:I,strokeDashoffset:B,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"})))})),m(this,"Indicator",gt.Indicator(({shape:e})=>{const{points:n}=e,o=f.useMemo(()=>_9(e),[n]),s=this.getBounds(e);return s.width<4&&s.height<4?f.createElement("circle",{x:s.width/2,y:s.height/2,r:1}):f.createElement("path",{d:o})})),m(this,"transform",(e,n,{initialShape:o,scaleX:s,scaleY:l})=>{const c=H.getFromCache(this.boundsCache,o,()=>H.getBoundsFromPoints(o.points)),d=o.points.map(([g,v,w])=>[n.width*(s<0?1-g/c.width:g/c.width),n.height*(l<0?1-v/c.height:v/c.height),w]),p=H.getBoundsFromPoints(e.points),h=L.sub([n.minX,n.minY],[p.minX,p.minY]);return{points:d,point:h}}),m(this,"getBounds",e=>{const n=!this.pointsBoundsCache.has(e.points),o=this.pointCache[e.id]!==e.point;if(n){const s=H.getBoundsFromPoints(e.points);this.pointsBoundsCache.set(e.points,s),this.shapeBoundsCache.set(e.id,H.translateBounds(s,e.point)),this.pointCache[e.id]=e.point}else o&&!n&&(this.pointCache[e.id]=e.point,this.shapeBoundsCache.set(e.id,H.translateBounds(this.pointsBoundsCache.get(e.points),e.point)));return this.shapeBoundsCache.get(e.id)}),m(this,"shouldRender",(e,n)=>n.points!==e.points||n.style!==e.style||n.isComplete!==e.isComplete),m(this,"hitTestPoint",(e,n)=>{const o=L.sub(n,e.point);return H.pointInPolyline(o,e.points)}),m(this,"hitTestLineSegment",(e,n,o)=>{const{points:s,point:l}=e,c=L.sub(n,l),d=L.sub(o,l),p=this.getBounds(e);if(s.length<=2)return L.distanceToLineSegment(n,o,e.point)<4;if(pa(c,d,p)){for(let h=1;h<s.length;h++)if(ri(s[h-1],s[h],c,d).didIntersect)return!0}return!1}),m(this,"hitTestBounds",(e,n)=>{if(!e.rotation){const l=this.getBounds(e);return H.boundsContain(n,l)||(H.boundsContain(l,n)||Z3(l,n).length>0)&&O0(H.translateBounds(n,L.neg(e.point)),e.points).length>0}const o=this.getRotatedBounds(e),s=H.getFromCache(this.rotatedCache,e,()=>{const l=H.getBoundsCenter(H.getBoundsFromPoints(e.points));return e.points.map(c=>L.rotWith(c,l,e.rotation||0))});return H.boundsContain(n,o)||O0(H.translateBounds(n,L.neg(e.point)),s).length>0})}},d6=class extends gt{constructor(){super(...arguments),m(this,"type","image"),m(this,"canBind",!0),m(this,"canClone",!0),m(this,"isAspectRatioLocked",!0),m(this,"showCloneHandles",!0),m(this,"getShape",e=>H.deepMerge({id:"image",type:"image",name:"Image",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:U(k({},ur),{isFilled:!0}),assetId:"assetId"},e)),m(this,"Component",gt.Component(({shape:e,asset:n={src:""},isBinding:o,isGhost:s,meta:l,events:c,onShapeChange:d},p)=>{const{size:h,style:g}=e,v=f.useRef(null),w=f.useRef(null);return f.useLayoutEffect(()=>{const x=w.current;if(!x)return;const[y,E]=h;x.style.width=`${y}px`,x.style.height=`${E}px`},[h]),f.createElement(Gi,k({ref:p},c),o&&f.createElement("div",{className:"tl-binding-indicator",style:{position:"absolute",top:`calc(${-this.bindingDistance}px * var(--tl-zoom))`,left:`calc(${-this.bindingDistance}px * var(--tl-zoom))`,width:`calc(100% + ${this.bindingDistance*2}px * var(--tl-zoom))`,height:`calc(100% + ${this.bindingDistance*2}px * var(--tl-zoom))`,backgroundColor:"var(--tl-selectFill)"}}),f.createElement(u6,{ref:w,isDarkMode:l.isDarkMode,isFilled:g.isFilled,isGhost:s},f.createElement(f6,{id:e.id+"_image",ref:v,src:n.src,alt:"tl_image_asset",draggable:!1})))})),m(this,"Indicator",gt.Indicator(({shape:e})=>{const{size:[n,o]}=e;return f.createElement("rect",{x:0,y:0,rx:2,ry:2,width:Math.max(1,n),height:Math.max(1,o)})})),m(this,"getBounds",e=>fo(e,this.boundsCache)),m(this,"shouldRender",(e,n)=>n.size!==e.size||n.style!==e.style),m(this,"transform",ps),m(this,"transformSingle",gs),m(this,"getSvgElement",e=>{const n=this.getBounds(e),o=document.createElementNS("http://www.w3.org/2000/svg","image");return o.setAttribute("width",`${n.width}`),o.setAttribute("height",`${n.height}`),o.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),o})}},u6=(0,io.zo)("div",{pointerEvents:"all",position:"relative",fontFamily:"sans-serif",fontSize:"2em",height:"100%",width:"100%",borderRadius:"3px",perspective:"800px",overflow:"hidden",p:{userSelect:"none"},img:{userSelect:"none"},variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:L1}},isFilled:{true:{},false:{}},isDarkMode:{true:{},false:{}}},compoundVariants:[{isFilled:!0,isDarkMode:!0,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.3), 1px 1px 4px rgba(0,0,0,.3), 1px 1px 2px rgba(0,0,0,.3)"}},{isFilled:!0,isDarkMode:!1,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.2), 1px 1px 4px rgba(0,0,0,.16),  1px 1px 2px rgba(0,0,0,.16)"}}]}),f6=(0,io.zo)("img",{position:"absolute",top:0,left:0,width:"100%",height:"100%",maxWidth:"100%",minWidth:"100%",pointerEvents:"none",objectFit:"cover",userSelect:"none",borderRadius:2}),h6=class extends gt{constructor(){super(...arguments),m(this,"type","video"),m(this,"canBind",!0),m(this,"canEdit",!0),m(this,"canClone",!0),m(this,"isAspectRatioLocked",!0),m(this,"showCloneHandles",!0),m(this,"isStateful",!0),m(this,"getShape",e=>H.deepMerge({id:"video",type:"video",name:"Video",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:ur,assetId:"assetId",isPlaying:!0,currentTime:0},e)),m(this,"Component",gt.Component(({shape:e,asset:n={src:""},isBinding:o,isEditing:s,isGhost:l,meta:c,events:d,onShapeChange:p},h)=>{const g=f.useRef(null),v=f.useRef(null),{currentTime:w=0,size:x,isPlaying:y,style:E}=e;f.useLayoutEffect(()=>{const I=v.current;if(!I)return;const[B,j]=x;I.style.width=`${B}px`,I.style.height=`${j}px`},[x]),f.useLayoutEffect(()=>{const I=g.current;!I||(y?I.play():I.pause())},[y]),f.useLayoutEffect(()=>{const I=g.current;!I||w!==I.currentTime&&(I.currentTime=w)},[w]);const R=f.useCallback(()=>{p?.({id:e.id,isPlaying:!0})},[]),P=f.useCallback(()=>{p?.({id:e.id,isPlaying:!1})},[]),$=f.useCallback(()=>{const I=g.current;!I||!s||p?.({id:e.id,currentTime:I.currentTime})},[s]);return f.createElement(Gi,k({ref:h},d),o&&f.createElement("div",{className:"tl-binding-indicator",style:{position:"absolute",top:-this.bindingDistance,left:-this.bindingDistance,width:`calc(100% + ${this.bindingDistance*2}px)`,height:`calc(100% + ${this.bindingDistance*2}px)`,backgroundColor:"var(--tl-selectFill)"}}),f.createElement(p6,{ref:v,isDarkMode:c.isDarkMode,isGhost:l,isFilled:E.isFilled},f.createElement(g6,{ref:g,id:e.id+"_video",muted:!0,loop:!0,playsInline:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:s,autoPlay:y,onPlay:R,onPause:P,onTimeUpdate:$},f.createElement("source",{src:n.src}))))})),m(this,"Indicator",gt.Indicator(({shape:e})=>{const{size:[n,o]}=e;return f.createElement("rect",{x:0,y:0,rx:2,ry:2,width:Math.max(1,n),height:Math.max(1,o)})})),m(this,"getBounds",e=>fo(e,this.boundsCache)),m(this,"shouldRender",(e,n)=>n.size!==e.size||n.style!==e.style||n.isPlaying!==e.isPlaying),m(this,"getSvgElement",e=>{const n=this.getBounds(e),o=document.createElementNS("http://www.w3.org/2000/svg","image");return o.setAttribute("width",`${n.width}`),o.setAttribute("height",`${n.height}`),o.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),o}),m(this,"transform",ps),m(this,"transformSingle",gs)}},p6=(0,io.zo)("div",{pointerEvents:"all",position:"relative",fontFamily:"sans-serif",fontSize:"2em",height:"100%",width:"100%",borderRadius:"3px",perspective:"800px",overflow:"hidden",p:{userSelect:"none"},img:{userSelect:"none"},variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:L1}},isFilled:{true:{},false:{}},isDarkMode:{true:{},false:{}}},compoundVariants:[{isFilled:!0,isDarkMode:!0,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.3), 1px 1px 4px rgba(0,0,0,.3), 1px 1px 2px rgba(0,0,0,.3)"}},{isFilled:!0,isDarkMode:!1,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.2), 1px 1px 4px rgba(0,0,0,.16),  1px 1px 2px rgba(0,0,0,.16)"}}]}),g6=(0,io.zo)("video",{position:"absolute",top:0,left:0,width:"100%",height:"100%",maxWidth:"100%",minWidth:"100%",pointerEvents:"none",objectFit:"cover",userSelect:"none",borderRadius:2}),w9=new xu,b9=new Hu,x9=new Vu,y9=new c6,qa=new Ku,v6=new e6,C6=new Gu,Ja=new Yu,m6=new d6,_6=new h6,po={rectangle:w9,triangle:b9,ellipse:x9,draw:y9,arrow:qa,text:v6,group:C6,sticky:Ja,image:m6,video:_6},w6=e=>typeof e=="string"?po[e]:po[e.type];function hr(e){if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(typeof e=="object")if(typeof e[Symbol.iterator]=="function"){const n=[];if(e.length>0)for(const o of e)n.push(hr(o));return n}else{const n=Object.keys(e),o={};if(n.length>0)for(const s of n)o[s]=hr(e[s]);return o}return e}var E9=!1,je=class{static getShapeUtil(e){return w6(e)}static getSelectedShapes(e,n){const o=je.getPage(e,n);return je.getSelectedIds(e,n).map(l=>o.shapes[l])}static screenToWorld(e,n){const o=je.getPageState(e,e.appState.currentPageId).camera;return L.sub(L.div(n,o.zoom),o.point)}static getCameraZoom(e){return H.clamp(e,.1,5)}static getPage(e,n){return e.document.pages[n]}static getPageState(e,n){return e.document.pageStates[n]}static getSelectedIds(e,n){return je.getPageState(e,n).selectedIds}static getShapes(e,n){return Object.values(je.getPage(e,n).shapes)}static getCamera(e,n){return je.getPageState(e,n).camera}static getShape(e,n,o){return je.getPage(e,o).shapes[n]}static getCenter(e){return je.getShapeUtil(e).getCenter(e)}static getBounds(e){return je.getShapeUtil(e).getBounds(e)}static getRotatedBounds(e){return je.getShapeUtil(e).getRotatedBounds(e)}static getSelectedBounds(e){return H.getCommonBounds(je.getSelectedShapes(e,e.appState.currentPageId).map(n=>je.getShapeUtil(n).getBounds(n)))}static getParentId(e,n,o){return je.getShape(e,n,o).parentId}static getDocumentBranch(e,n,o){const s=je.getShape(e,n,o);return s.children===void 0?[n]:[n,...s.children.flatMap(l=>je.getDocumentBranch(e,l,o))]}static getSelectedBranchSnapshot(e,n,o){const s=je.getPage(e,n),l=je.getSelectedIds(e,n).flatMap(c=>je.getDocumentBranch(e,c,n).map(d=>s.shapes[d])).filter(c=>!c.isLocked).map(H.deepClone);return o!==void 0?l.map(c=>k({id:c.id},o(c))):l}static getSelectedShapeSnapshot(e,n,o){const s=je.getSelectedShapes(e,n).filter(l=>!l.isLocked).map(H.deepClone);return o!==void 0?s.map(l=>k({id:l.id},o(l))):s}static getAllEffectedShapeIds(e,n,o){const s=je.getPage(e,o),l=new Set(n);return n.forEach(c=>{const d=s.shapes[c];function p(g){g.children!==void 0&&g.children.filter(v=>!l.has(v)).forEach(v=>{l.add(v),p(s.shapes[v])})}p(d);function h(g){const v=g.parentId;v!==s.id&&(l.has(v)||(l.add(v),h(s.shapes[v])))}h(d),l.forEach(g=>{Object.values(s.bindings).filter(v=>v.fromId===g||v.toId===g).forEach(v=>l.add(v.fromId===g?v.toId:v.fromId))})}),Array.from(l.values())}static getLinkedShapeIds(e,n,o,s=!0){const l=je.getSelectedIds(e,n),c=je.getPage(e,n),d=new Set(l),p=new Set,h=[...l],g=new Set(Object.values(c.shapes).filter(v=>{var w;return v.type==="arrow"&&(v.handles.start.bindingId||((w=v.handles)==null?void 0:w.end.bindingId))}));for(;h.length;){const v=h.pop();if(!(v&&g.size))break;p.has(v)||(p.add(v),g.forEach(w=>{var x,y;const{handles:{start:{bindingId:E},end:{bindingId:R}}}=w,P=E?c.bindings[E]:null,$=R?c.bindings[R]:null;let I=!1;P&&P.toId===v?(o==="center"?I=!0:((x=w.decorations)==null?void 0:x.start)&&$?I=o==="left":I=o==="right",I&&(s&&d.add(w.id),d.add(v),$&&(d.add($.toId),h.push($.toId)))):$&&$.toId===v&&(o==="center"?I=!0:((y=w.decorations)==null?void 0:y.end)&&P?I=o==="left":I=o==="right",I&&(s&&d.add(w.id),d.add(v),P&&(d.add(P.toId),h.push(P.toId)))),(!P||d.has(P.toId))&&(!$||d.has($.toId))&&g.delete(w)}))}return Array.from(d.values())}static getChildIndexAbove(e,n,o){const s=e.document.pages[o],l=s.shapes[n];let c;if(l.parentId===s.id)c=Object.values(s.shapes).filter(h=>h.parentId===s.id).sort((h,g)=>h.childIndex-g.childIndex);else{const h=s.shapes[l.parentId];if(!h.children)throw Error("No children in parent!");c=h.children.map(g=>s.shapes[g]).sort((g,v)=>g.childIndex-v.childIndex)}const d=c.indexOf(l),p=c[d+1];return p?p.childIndex:l.childIndex+1}static getBeforeShape(e,n){return Object.fromEntries(Object.keys(n).map(o=>[o,e[o]]))}static mutateShapes(e,n,o,s){const l={},c={};n.forEach((p,h)=>{const g=je.getShape(e,p,s);if(g.isLocked)return;const v=o(g,h);v&&(l[p]=je.getBeforeShape(g,v),c[p]=v)});const d=H.deepMerge(e,{document:{pages:{[e.appState.currentPageId]:{shapes:c}}}});return{before:l,after:c,data:d}}static createShapes(e,n,o){const s={document:{pages:{[o]:{shapes:k({},Object.fromEntries(n.flatMap(c=>{const d=[[c.id,void 0]];if(c.parentId!==o){const p=je.getShape(e,c.parentId,o);if(!p.children)throw Error("No children in parent!");d.push([p.id,{children:p.children}])}return d})))}}}},l={document:{pages:{[o]:{shapes:{shapes:k({},Object.fromEntries(n.flatMap(c=>{const d=[[c.id,c]];if(c.parentId!==o){const p=je.getShape(e,c.parentId,o);if(!p.children)throw Error("No children in parent!");d.push([p.id,{children:[...p.children,c.id]}])}return d})))}}}}};return{before:s,after:l}}static deleteShapes(e,n,o){o=o||e.appState.currentPageId;const s=je.getPage(e,o),l=typeof n[0]=="string"?n:n.map(p=>p.id),c={document:{pages:{[o]:{shapes:k({},Object.fromEntries(l.flatMap(p=>{const h=s.shapes[p],g=[[h.id,h]];if(h.parentId!==o){const v=s.shapes[h.parentId];if(!v.children)throw Error("No children in parent!");g.push([v.id,{children:v.children}])}return g}))),bindings:k({},Object.fromEntries(Object.values(s.bindings).filter(p=>l.includes(p.fromId)||l.includes(p.toId)).map(p=>[p.id,p])))}}}},d={document:{pages:{[o]:{shapes:k({},Object.fromEntries(l.flatMap(p=>{const h=s.shapes[p],g=[[h.id,void 0]];if(h.parentId!==s.id){const v=s.shapes[h.parentId];if(!v.children)throw Error("No children in parent!");g.push([v.id,{children:v.children.filter(w=>w!==h.id)}])}return g})))}}}};return{before:c,after:d}}static onSessionComplete(e){var n,o;const s=(o=(n=je.getShapeUtil(e)).onSessionComplete)==null?void 0:o.call(n,e);return s?k(k({},e),s):e}static onChildrenChange(e,n,o){var s,l;if(!n.children)return;const c=(l=(s=je.getShapeUtil(n)).onChildrenChange)==null?void 0:l.call(s,n,n.children.map(d=>je.getShape(e,d,o)));return c?k(k({},n),c):n}static updateArrowBindings(e,n){var o,s,l,c,d,p;const h={start:hr(n.handles.start),end:hr(n.handles.end)};let g={isBound:!1,handle:n.handles.start,point:L.add(n.handles.start.point,n.point)},v={isBound:!1,handle:n.handles.end,point:L.add(n.handles.end.point,n.point)};if(n.handles.start.bindingId){const w=((o=n.decorations)==null?void 0:o.start)!==void 0,x=n.handles.start,y=e.bindings[n.handles.start.bindingId];if(!y)throw Error("Could not find a binding to match the start handle's bindingId");const E=e.shapes[y.toId],R=je.getShapeUtil(E),P=R.getBounds(E),$=R.getExpandedBounds(E),I=w?H.expandBounds(P,y.distance):P,{minX:B,minY:j,width:T,height:D}=$,A=L.add([B,j],L.mulV([T,D],L.rotWith(y.point,[.5,.5],E.rotation||0)));g={isBound:!0,hasDecoration:w,binding:y,handle:x,point:A,util:R,target:E,bounds:P,expandedBounds:$,intersectBounds:I,center:R.getCenter(E)}}if(n.handles.end.bindingId){const w=((s=n.decorations)==null?void 0:s.end)!==void 0,x=n.handles.end,y=e.bindings[n.handles.end.bindingId];if(!y)throw Error("Could not find a binding to match the end handle's bindingId");const E=e.shapes[y.toId],R=je.getShapeUtil(E),P=R.getBounds(E),$=R.getExpandedBounds(E),I=w?H.expandBounds(P,y.distance):P,{minX:B,minY:j,width:T,height:D}=$,A=L.add([B,j],L.mulV([T,D],L.rotWith(y.point,[.5,.5],E.rotation||0)));v={isBound:!0,hasDecoration:w,binding:y,handle:x,point:A,util:R,target:E,bounds:P,expandedBounds:$,intersectBounds:I,center:R.getCenter(E)}}for(const w of["end","start"]){const x=w==="start"?g:v,y=w==="start"?v:g;if(x.isBound)if(!x.binding.distance)h[w].point=L.sub(x.point,n.point);else{const E=L.uni(L.sub(x.point,y.point));switch(x.target.type){case"ellipse":{const R=fa(y.point,E,x.center,x.target.radius[0]+(x.hasDecoration?x.binding.distance:0),x.target.radius[1]+(x.hasDecoration?x.binding.distance:0),x.target.rotation||0).points.sort((P,$)=>L.dist(P,y.point)-L.dist($,y.point));R[0]!==void 0&&(h[w].point=L.toFixed(L.sub(R[0],n.point)));break}case"triangle":{const R=x.target.point,P=bn(x.target.size,x.hasDecoration?m1:0,x.target.rotation).map(I=>L.add(I,R)),$=H.pointsToLineSegments(P,!0).map(([I,B])=>ti(y.point,E,I,B)).filter(I=>I.didIntersect).flatMap(I=>I.points).sort((I,B)=>L.dist(I,y.point)-L.dist(B,y.point));$[0]!==void 0&&(h[w].point=L.toFixed(L.sub($[0],n.point)));break}default:{const R=Wi(y.point,E,x.intersectBounds,x.target.rotation).filter($=>$.didIntersect).map($=>$.points[0]).sort(($,I)=>L.dist($,y.point)-L.dist(I,y.point));if(!R[0])continue;let P;if(y.isBound&&(P=Wi(y.point,E,y.intersectBounds,y.target.rotation).filter(I=>I.didIntersect).map(I=>I.points[0]).sort((I,B)=>L.dist(I,y.point)-L.dist(B,y.point))[0]),y.isBound&&(R.length<2||P&&R[0]&&Math.ceil(L.dist(R[0],P))<m1*2.5||H.boundsContain(x.expandedBounds,y.expandedBounds)||H.boundsCollide(x.expandedBounds,y.expandedBounds))){const $=L.uni(L.sub(y.point,x.point)),I=Wi(x.point,$,x.bounds,x.target.rotation).filter(B=>B.didIntersect).map(B=>B.points[0]);if(!I[0])continue;h[w].point=L.toFixed(L.sub(I[0],n.point)),h[w==="start"?"end":"start"].point=L.toFixed(L.add(L.sub(I[0],n.point),L.mul($,Math.min(L.dist(I[0],y.point),m1*2.5*(H.boundsContain(y.bounds,x.intersectBounds)?-1:1)))))}else if(!y.isBound&&(R[0]&&L.dist(R[0],y.point)<m1*2.5||H.pointInBounds(y.point,x.intersectBounds))){const $=L.uni(L.sub(x.center,y.point));return(c=(l=je.getShapeUtil(n)).onHandleChange)==null?void 0:c.call(l,n,{[w]:U(k({},n.handles[w]),{point:L.toFixed(L.add(L.sub(y.point,n.point),L.mul($,m1*2.5)))})})}else R[0]&&(h[w].point=L.toFixed(L.sub(R[0],n.point)))}}}}return(p=(d=je.getShapeUtil(n)).onHandleChange)==null?void 0:p.call(d,n,h)}static transform(e,n,o){const s=je.getShapeUtil(e).transform(e,n,o);return s?k(k({},e),s):e}static transformSingle(e,n,o){const s=je.getShapeUtil(e).transformSingle(e,n,o);return s?k(k({},e),s):e}static getRotatedShapeMutation(e,n,o,s){var l,c;const d=L.sub(n,e.point),p=L.rotWith(n,o,s),h=L.toFixed(L.sub(p,d));if(e.handles!==void 0)return(c=(l=this.getShapeUtil(e)).onHandleChange)==null?void 0:c.call(l,U(k({},e),{point:h}),Object.fromEntries(Object.entries(e.handles).map(([w,x])=>{const y=L.toFixed(L.rotWith(x.point,d,s));return[w,U(k({},x),{point:y})]})));const g=H.clampRadians((e.rotation||0)+s);return{point:h,rotation:g}}static updateParents(e,n,o){const s=je.getPage(e,n);if(o.length===0)return;const{shapes:l}=je.getPage(e,n),c=Array.from(new Set(o.map(d=>l[d].parentId).values())).filter(d=>d!==s.id);for(const d of c){const p=l[d];if(!p.children)throw Error("A shape is parented to a shape without a children array.");je.onChildrenChange(e,p,n)}je.updateParents(e,n,c)}static getBinding(e,n,o){return je.getPage(e,o).bindings[n]}static getBindings(e,n){const o=je.getPage(e,n);return Object.values(o.bindings)}static getBindableShapeIds(e){return je.getShapes(e,e.appState.currentPageId).filter(n=>je.getShapeUtil(n).canBind).sort((n,o)=>o.childIndex-n.childIndex).map(n=>n.id)}static getBindingsWithShapeIds(e,n,o){return Array.from(new Set(je.getBindings(e,o).filter(s=>n.includes(s.toId)||n.includes(s.fromId))).values())}static getRelatedBindings(e,n,o){const s=new Set(n),l=je.getPage(e,o),c=Object.values(l.bindings),d=new Set(c.filter(g=>s.has(g.toId)||s.has(g.fromId)));let p=d.size,h=-1;for(;h!==0;)d.forEach(g=>{const v=g.fromId;for(const w of c)w.fromId===v&&d.add(w),w.toId===v&&d.add(w)}),h=d.size-p,p=d.size;return Array.from(d.values())}static normalizeText(e){return e.replace(je.fixNewLines,`
`).split(`
`).map(n=>n||" ").join(`
`)}static assertShapeHasProperty(e,n){if(e[n]===void 0)throw new Error}static warn(e){E9&&console.warn(e)}static error(e){E9&&console.error(e)}},z=je;m(z,"copyStringToClipboard",e=>{try{navigator.clipboard.writeText(e)}catch{const o=document.createElement("textarea");o.setAttribute("position","fixed"),o.setAttribute("top","0"),o.setAttribute("readonly","true"),o.setAttribute("contenteditable","true"),o.style.position="fixed",o.value=e,document.body.appendChild(o),o.focus(),o.select();try{const s=document.createRange();s.selectNodeContents(o);const l=window.getSelection();l&&(l.removeAllRanges(),l.addRange(s),o.setSelectionRange(0,o.value.length))}catch{}finally{document.body.removeChild(o)}}}),m(z,"flattenShape",(e,n)=>{var o;return[n,...((o=n.children)!=null?o:[]).map(s=>je.getShape(e,s,e.appState.currentPageId)).sort((s,l)=>s.childIndex-l.childIndex).flatMap(s=>je.flattenShape(e,s))]}),m(z,"flattenPage",(e,n)=>Object.values(e.document.pages[n].shapes).sort((o,s)=>o.childIndex-s.childIndex).reduce((o,s)=>[...o,...je.flattenShape(e,s)],[])),m(z,"getTopChildIndex",(e,n)=>{const o=je.getShapes(e,n);return o.length===0?1:o.filter(s=>s.parentId===n).sort((s,l)=>l.childIndex-s.childIndex)[0].childIndex+1}),m(z,"fixNewLines",/\r?\n|\r/g);function b6(e,n,o){const{currentPageId:s}=e,l=n.map(x=>e.getShape(x)),c=l.map(x=>({id:x.id,point:[...x.point],bounds:z.getBounds(x)})),d=H.getCommonBounds(c.map(({bounds:x})=>x)),p=d.minX+d.width/2,h=d.minY+d.height/2,g=Object.fromEntries(c.map(({id:x,point:y,bounds:E})=>[x,{prev:y,next:{centerVertical:[y[0],h-E.height/2],centerHorizontal:[p-E.width/2,y[1]],top:[y[0],d.minY],bottom:[y[0],d.maxY-E.height],left:[d.minX,y[1]],right:[d.maxX-E.width,y[1]]}[o]}])),{before:v,after:w}=z.mutateShapes(e.state,n,x=>g[x.id]?{point:g[x.id].next}:x,s);return l.forEach(x=>{if(x.type==="group"){const y=L.sub(w[x.id].point,v[x.id].point);x.children.forEach(E=>{const R=e.getShape(E);v[R.id]={point:R.point},w[R.id]={point:L.add(R.point,y)}}),delete v[x.id],delete w[x.id]}}),{id:"align",before:{document:{pages:{[s]:{shapes:v}},pageStates:{[s]:{selectedIds:n}}}},after:{document:{pages:{[s]:{shapes:w}},pageStates:{[s]:{selectedIds:n}}}}}}function x6(e,n){return{id:"change_page",before:{appState:{currentPageId:e.currentPageId}},after:{appState:{currentPageId:n}}}}function y6(e,n,o=H.uniqueId()){const{currentPageId:s}=e,l=Object.values(e.state.document.pages).sort((g,v)=>(v.childIndex||0)-(g.childIndex||0))[0],c=l?.childIndex?l?.childIndex+1:1,p={id:o,name:"New Page",childIndex:c,shapes:{},bindings:{}},h={id:o,selectedIds:[],camera:{point:n,zoom:1},editingId:void 0,bindingId:void 0,hoveredId:void 0,pointedId:void 0};return{id:"create_page",before:{appState:{currentPageId:s},document:{pages:{[o]:void 0},pageStates:{[o]:void 0}}},after:{appState:{currentPageId:p.id},document:{pages:{[o]:p},pageStates:{[o]:h}}}}}function L9(e,n,o=[]){const{currentPageId:s}=e,l={},c={};n.forEach(h=>{l[h.id]=void 0,c[h.id]=h});const d={},p={};return o.forEach(h=>{d[h.id]=void 0,p[h.id]=h}),{id:"create",before:{document:{pages:{[s]:{shapes:l,bindings:d}},pageStates:{[s]:{selectedIds:[...e.selectedIds]}}}},after:{document:{pages:{[s]:{shapes:c,bindings:p}},pageStates:{[s]:{selectedIds:n.map(h=>h.id)}}}}}}function E6(e,n){const{currentPageId:o,document:{pages:s,pageStates:l}}=e,c=Object.values(s).sort((h,g)=>(h.childIndex||0)-(g.childIndex||0)),d=c.findIndex(h=>h.id===n);let p;return n===o?d===c.length-1?p=c[c.length-2].id:p=c[d+1].id:p=o,{id:"delete_page",before:{appState:{currentPageId:n},document:{pages:{[n]:k({},s[n])},pageStates:{[n]:k({},l[n])}}},after:{appState:{currentPageId:p},document:{pages:{[n]:void 0},pageStates:{[n]:void 0}}}}}function L6(e,n,o){const s={shapes:{},bindings:{}},l={shapes:{},bindings:{}},c=[],d=new Set,p=new Set;n.filter(g=>!z.getShape(e,g,o).isLocked).forEach(g=>{d.add(g);const v=z.getShape(e,g,o);s.shapes[g]=v,l.shapes[g]=void 0,v.children!==void 0&&v.children.forEach(w=>{d.add(w);const x=z.getShape(e,w,o);s.shapes[w]=x,l.shapes[w]=void 0}),v.parentId!==o&&c.push(z.getShape(e,v.parentId,o)),v.assetId&&p.add(v.assetId)}),c.forEach(g=>{var v;n.includes(g.id)||(d.add(g.id),s.shapes[g.id]={children:g.children},l.shapes[g.id]={children:g.children.filter(w=>!n.includes(w))},((v=l.shapes[g.id])==null?void 0:v.children.length)===0&&(l.shapes[g.id]=void 0,s.shapes[g.id]=z.getShape(e,g.id,o)))});const h=z.getPage(e,o);return Object.values(h.bindings).filter(g=>d.has(g.fromId)||d.has(g.toId)).forEach(g=>{for(const v of[g.toId,g.fromId])if(l.shapes[v]===void 0){s.bindings[g.id]=g,l.bindings[g.id]=void 0;const w=h.shapes[v];w&&w.handles&&Object.values(w.handles).filter(x=>x.bindingId===g.id).forEach(x=>{var y,E,R,P,$,I;s.shapes[v]=U(k({},s.shapes[v]),{handles:U(k({},(y=s.shapes[v])==null?void 0:y.handles),{[x.id]:U(k({},(R=(E=s.shapes[v])==null?void 0:E.handles)==null?void 0:R[x.id]),{bindingId:g.id})})}),d.has(v)||(l.shapes[v]=U(k({},l.shapes[v]),{handles:U(k({},(P=l.shapes[v])==null?void 0:P.handles),{[x.id]:U(k({},(I=($=l.shapes[v])==null?void 0:$.handles)==null?void 0:I[x.id]),{bindingId:void 0})})}))})}}),Object.values(e.document.pages).flatMap(g=>Object.values(g.shapes)).forEach(g=>{"assetId"in g&&g.assetId&&!d.has(g.id)&&p.delete(g.assetId)}),{before:s,after:l,assetsToRemove:Array.from(p)}}var S6=(e,n)=>{const o=k({},e);return n.forEach(s=>o[s]=void 0),o};function S9(e,n,o=e.currentPageId){const{pageState:s,selectedIds:l,document:{assets:c}}=e,{before:d,after:p,assetsToRemove:h}=L6(e.state,n,o),g=S6(c,h);return{id:"delete",before:{document:{assets:c,pages:{[o]:d},pageStates:{[o]:{selectedIds:[...e.selectedIds]}}}},after:{document:{assets:g,pages:{[o]:p},pageStates:{[o]:{selectedIds:l.filter(v=>!n.includes(v)),hoveredId:s.hoveredId&&n.includes(s.hoveredId)?void 0:s.hoveredId}}}}}}function R6(e,n,o){const{currentPageId:s}=e,l=n.map(h=>e.getShape(h)),c=Object.fromEntries(I6(l,o).map(h=>[h.id,h])),{before:d,after:p}=z.mutateShapes(e.state,n.filter(h=>c[h]!==void 0),h=>({point:c[h.id].next}),s);return l.forEach(h=>{if(h.type==="group"){const g=J.sub(p[h.id].point,d[h.id].point);h.children.forEach(v=>{const w=e.getShape(v);d[w.id]={point:w.point},p[w.id]={point:J.add(w.point,g)}}),delete d[h.id],delete p[h.id]}}),{id:"distribute",before:{document:{pages:{[s]:{shapes:d}},pageStates:{[s]:{selectedIds:n}}}},after:{document:{pages:{[s]:{shapes:p}},pageStates:{[s]:{selectedIds:n}}}}}}function I6(e,n){const o=e.map(d=>{const p=z.getShapeUtil(d);return{id:d.id,point:[...d.point],bounds:p.getBounds(d),center:p.getCenter(d)}}),s=o.length,l=H.getCommonBounds(o.map(({bounds:d})=>d)),c=[];switch(n){case"horizontal":{const d=o.reduce((p,h)=>p+h.bounds.width,0);if(d>l.width){const p=o.sort((x,y)=>x.bounds.minX-y.bounds.minX)[0],h=o.sort((x,y)=>y.bounds.maxX-x.bounds.maxX)[0],g=o.filter(x=>x!==p&&x!==h).sort((x,y)=>x.center[0]-y.center[0]),v=(h.center[0]-p.center[0])/(s-1),w=p.center[0]+v;g.forEach(({id:x,point:y,bounds:E},R)=>{c.push({id:x,prev:y,next:[w+v*R-E.width/2,E.minY]})})}else{const p=o.sort((v,w)=>v.center[0]-w.center[0]);let h=l.minX;const g=(l.width-d)/(s-1);p.forEach(({id:v,point:w,bounds:x})=>{c.push({id:v,prev:w,next:[h,x.minY]}),h+=x.width+g})}break}case"vertical":{const d=o.reduce((p,h)=>p+h.bounds.height,0);if(d>l.height){const p=o.sort((x,y)=>x.bounds.minY-y.bounds.minY)[0],h=o.sort((x,y)=>y.bounds.maxY-x.bounds.maxY)[0],g=o.filter(x=>x!==p&&x!==h).sort((x,y)=>x.center[1]-y.center[1]),v=(h.center[1]-p.center[1])/(s-1),w=p.center[1]+v;g.forEach(({id:x,point:y,bounds:E},R)=>{c.push({id:x,prev:y,next:[E.minX,w+v*R-E.height/2]})})}else{const p=o.sort((v,w)=>v.center[1]-w.center[1]);let h=l.minY;const g=(l.height-d)/(s-1);p.forEach(({id:v,point:w,bounds:x})=>{c.push({id:v,prev:w,next:[x.minX,h]}),h+=x.height+g})}break}}return c}function M6(e,n){const o=H.uniqueId(),{currentPageId:s,page:l,pageState:{camera:c}}=e,d=U(k({},l),{id:o,name:l.name+" Copy",shapes:Object.fromEntries(Object.entries(l.shapes).map(([p,h])=>[p,U(k({},h),{parentId:h.parentId===n?o:h.parentId})]))});return{id:"duplicate_page",before:{appState:{currentPageId:s},document:{pages:{[o]:void 0},pageStates:{[o]:void 0}}},after:{appState:{currentPageId:o},document:{pages:{[o]:d},pageStates:{[o]:U(k({},l),{id:o,selectedIds:[],camera:k({},c),editingId:void 0,bindingId:void 0,hoveredId:void 0,pointedId:void 0})}}}}}function P6(e,n,o){const{selectedIds:s,currentPageId:l,page:c,shapes:d}=e,p={shapes:{},bindings:{}},h={shapes:{},bindings:{}},g={},v=n.map(y=>e.getShape(y)).filter(y=>!n.includes(y.parentId));v.forEach(y=>{const E=H.uniqueId();if(p.shapes[E]=void 0,h.shapes[E]=U(k({},H.deepClone(y)),{id:E,childIndex:z.getChildIndexAbove(e.state,y.id,l)}),y.children&&(h.shapes[E].children=[]),y.parentId!==l){const R=e.getShape(y.parentId);p.shapes[R.id]=U(k({},p.shapes[R.id]),{children:R.children}),h.shapes[R.id]=U(k({},h.shapes[R.id]),{children:[...(h.shapes[R.id]||R).children,E]})}g[y.id]=E}),v.forEach(y=>{y.children&&y.children.forEach(E=>{var R,P;const $=e.getShape(E),I=H.uniqueId(),B=g[y.id];p.shapes[I]=void 0,h.shapes[I]=U(k({},H.deepClone($)),{id:I,parentId:B,childIndex:z.getChildIndexAbove(e.state,$.id,l)}),g[E]=I,(P=(R=h.shapes[g[y.id]])==null?void 0:R.children)==null||P.push(I)})});const w=new Set(Object.keys(g));Object.values(c.bindings).filter(y=>w.has(y.fromId)||w.has(y.toId)).forEach(y=>{if(w.has(y.fromId))if(w.has(y.toId)){const E=H.uniqueId(),R=U(k({},H.deepClone(y)),{id:E,fromId:g[y.fromId],toId:g[y.toId]});p.bindings[E]=void 0,h.bindings[E]=R;const P=h.shapes[R.fromId];Object.values(P.handles).forEach($=>{$.bindingId===y.id&&($.bindingId=E)})}else{const E=h.shapes[g[y.fromId]];Object.values(E.handles).forEach(R=>{R.bindingId===y.id&&(R.bindingId=void 0)})}});const x=Object.values(h.shapes);if(o){const y=H.getCommonBounds(x.map(R=>z.getBounds(R))),E=H.getBoundsCenter(y);x.forEach(R=>{!R.point||(R.point=L.sub(o,L.sub(E,R.point)))})}else{const y=[16,16];x.forEach(E=>{!E.point||(E.point=L.add(E.point,y))})}return x.forEach(y=>{y.isLocked&&(y.isLocked=!1)}),{id:"duplicate",before:{document:{pages:{[l]:p},pageStates:{[l]:{selectedIds:s}}}},after:{document:{pages:{[l]:h},pageStates:{[l]:{selectedIds:Array.from(w.values()).map(y=>g[y])}}}}}}function R9(e,n,o){const{selectedIds:s,currentPageId:l,shapes:c}=e,d=c.map(v=>z.getBounds(v)),p=H.getCommonBounds(d),{before:h,after:g}=z.mutateShapes(e.state,n,v=>{const w=z.getBounds(v);switch(o){case"horizontal":{const x=H.getRelativeTransformedBoundingBox(p,p,w,!0,!1);return z.getShapeUtil(v).transform(v,x,{type:kr.TopLeft,scaleX:-1,scaleY:1,initialShape:v,transformOrigin:[.5,.5]})}case"vertical":{const x=H.getRelativeTransformedBoundingBox(p,p,w,!1,!0);return z.getShapeUtil(v).transform(v,x,{type:kr.TopLeft,scaleX:1,scaleY:-1,initialShape:v,transformOrigin:[.5,.5]})}}},l);return{id:"flip",before:{document:{pages:{[l]:{shapes:h}},pageStates:{[l]:{selectedIds:s}}}},after:{document:{pages:{[l]:{shapes:g}},pageStates:{[l]:{selectedIds:n}}}}}}function $6(e,n,o,s){var l,c;if(n.length<2)return;const d={},p={},h={},g={},v=[...n],w=[],x=[],y=[];for(const T of n){const D=e.getShape(T);if(!D.isLocked)if(D.children===void 0)w.push(D);else{const A=D.children.filter(X=>!e.getShape(X).isLocked);y.push(D),v.push(...A),w.push(...A.map(X=>e.getShape(X)).filter(Boolean))}}if(w.every(T=>T.parentId===w[0].parentId)&&w[0].parentId!==s&&((l=e.getShape(w[0].parentId).children)==null?void 0:l.length)===v.length)return;const E=z.flattenPage(e.state,s),R=Object.fromEntries(w.map(T=>[T.id,E.indexOf(T)])),P=w.sort((T,D)=>R[T.id]-R[D.id]),$=s,I=(P.filter(T=>T.parentId===s)[0]||P[0]).childIndex,B=H.getCommonBounds(w.map(T=>z.getBounds(T)));for(d[o]=void 0,p[o]=z.getShapeUtil("group").create({id:o,childIndex:I,parentId:$,point:[B.minX,B.minY],size:[B.width,B.height],children:P.map(T=>T.id)}),P.forEach((T,D)=>{if(T.parentId!==s){const A=e.getShape(T.parentId);y.push(A)}d[T.id]=U(k({},d[T.id]),{parentId:T.parentId,childIndex:T.childIndex}),p[T.id]=U(k({},p[T.id]),{parentId:o,childIndex:D+1})});y.length>0;){const T=y.pop();if(!T)break;const D=(((c=d[T.id])==null?void 0:c.children)||T.children).filter(A=>A&&!(v.includes(A)||x.includes(A)));D.length===0?(d[T.id]=T,p[T.id]=void 0,T.parentId!==s&&(x.push(T.id),y.push(e.getShape(T.parentId)))):(d[T.id]=U(k({},d[T.id]),{children:T.children}),p[T.id]=U(k({},p[T.id]),{children:D}))}const{bindings:j}=e;return j.forEach(T=>{for(const D of[T.toId,T.fromId])if(p[D]===void 0){h[T.id]=T,g[T.id]=void 0;const A=e.getShape(D);A.handles&&Object.values(A.handles).filter(X=>X.bindingId===T.id).forEach(X=>{var ne,he;d[D]=U(k({},d[D]),{handles:U(k({},(ne=d[D])==null?void 0:ne.handles),{[X.id]:{bindingId:T.id}})}),x.includes(D)||(p[D]=U(k({},p[D]),{handles:U(k({},(he=p[D])==null?void 0:he.handles),{[X.id]:{bindingId:void 0}})}))})}}),{id:"group",before:{document:{pages:{[s]:{shapes:d,bindings:h}},pageStates:{[s]:{selectedIds:n}}}},after:{document:{pages:{[s]:{shapes:p,bindings:h}},pageStates:{[s]:{selectedIds:[o]}}}}}}function H6(e,n,o,s,l){const{page:c}=e,d={before:{shapes:{},bindings:{}},after:{shapes:{},bindings:{}}},p={before:{shapes:{},bindings:{}},after:{shapes:{},bindings:{}}},h=new Set,g=new Set;n.map(I=>e.getShape(I,s)).filter(I=>!I.isLocked).forEach(I=>{h.add(I.id),g.add(I),I.children!==void 0&&I.children.forEach(B=>{h.add(B),g.add(e.getShape(B,s))})});const v=z.getTopChildIndex(e.state,l),w=Array.from(g.values());w.forEach((I,B)=>{if(d.before.shapes[I.id]=I,d.after.shapes[I.id]=void 0,p.before.shapes[I.id]=void 0,p.after.shapes[I.id]=I,!h.has(I.parentId)&&(p.after.shapes[I.id]=U(k({},I),{parentId:l,childIndex:v+B}),I.parentId!==s)){const j=e.getShape(I.parentId,s);d.before.shapes[j.id]={children:j.children},d.after.shapes[j.id]={children:j.children.filter(T=>T!==I.id)}}}),Object.values(c.bindings).filter(I=>h.has(I.fromId)||h.has(I.toId)).forEach(I=>{d.before.bindings[I.id]=I,d.after.bindings[I.id]=void 0;const B=e.getShape(I.fromId,s);if(h.has(I.fromId)&&h.has(I.toId))p.before.bindings[I.id]=void 0,p.after.bindings[I.id]=I;else if(h.has(I.fromId)){const T=e.getShape(I.fromId,s),A=Object.values(B.handles).find(ne=>ne.bindingId===I.id).id,X=p.after.shapes[T.id];X.handles=U(k({},X.handles),{[A]:U(k({},X.handles[A]),{bindingId:void 0})})}else{const T=e.getShape(I.fromId,s),D=Object.values(B.handles).find(A=>A.bindingId===I.id);d.before.shapes[T.id]={handles:{[D.id]:{bindingId:I.id}}},d.after.shapes[T.id]={handles:{[D.id]:{bindingId:void 0}}}}});const x=e.state.document.pageStates[l],y=H.getCommonBounds(w.map(I=>z.getBounds(I))),E=z.getCameraZoom(o.width<o.height?(o.width-128)/y.width:(o.height-128)/y.height),R=(o.width-y.width*E)/2/E,P=(o.height-y.height*E)/2/E,$=L.toFixed(L.add([-y.minX,-y.minY],[R,P]));return{id:"move_to_page",before:{appState:{currentPageId:s},document:{pages:{[s]:d.before,[l]:p.before},pageStates:{[s]:{selectedIds:n},[l]:{selectedIds:x.selectedIds,camera:x.camera}}}},after:{appState:{currentPageId:l},document:{pages:{[s]:d.after,[l]:p.after},pageStates:{[s]:{selectedIds:[]},[l]:{selectedIds:n,camera:{zoom:E,point:$}}}}}}}function xs(e,n,o){const{currentPageId:s,page:l}=e,c=new Set(n.map(v=>e.getShape(v).parentId));let d={before:{},after:{}},p,h,g;return Array.from(c.values()).forEach(v=>{let w=[];if(v===l.id)w=Object.values(l.shapes).sort((E,R)=>E.childIndex-R.childIndex);else{const E=e.getShape(v);if(!E.children)throw Error("No children in parent!");w=E.children.map(R=>e.getShape(R)).sort((R,P)=>R.childIndex-P.childIndex)}const x=w.map(E=>E.id),y=n.filter(E=>x.includes(E)).map(E=>x.indexOf(E)).sort((E,R)=>E-R);if(y.length!==x.length)switch(o){case"toBack":{for(let E=0;E<x.length;E++)if(!y.includes(E)){p=E;break}h=w[p].childIndex,g=h/(y.length+1),d=z.mutateShapes(e.state,y.map(E=>w[E].id).reverse(),(E,R)=>({childIndex:h-(R+1)*g}),s);break}case"toFront":{for(let E=x.length-1;E>=0;E--)if(!y.includes(E)){p=E;break}h=w[p].childIndex,g=1,d=z.mutateShapes(e.state,y.map(E=>w[E].id),(E,R)=>({childIndex:h+(R+1)}),s);break}case"backward":{const E={};for(let R=x.length-1;R>=0;R--)if(y.includes(R)){for(let P=R;P>=0;P--)if(!y.includes(P)){const $=w[P].childIndex;let I,B;P===0?(I=$/2,B=$/2/(R-P+1)):(I=w[P-1].childIndex,B=($-I)/(R-P+1),I+=B);for(let j=0;j<R-P;j++)E[w[P+j+1].id]=I+B*j;break}}Object.values(E).length>0&&(d=z.mutateShapes(e.state,y.map(R=>w[R].id),R=>({childIndex:E[R.id]}),s));break}case"forward":{const E={};for(let R=0;R<x.length;R++)if(y.includes(R)){for(let P=R;P<x.length;P++)if(!y.includes(P)){h=w[P].childIndex;const $=P===x.length-1?1:(w[P+1].childIndex-h)/(P-R+1);for(let I=0;I<P-R;I++)E[w[R+I].id]=h+$*(I+1);break}}Object.values(E).length>0&&(d=z.mutateShapes(e.state,y.map(R=>w[R].id),R=>({childIndex:E[R.id]}),s));break}}}),{id:"move",before:{document:{pages:{[s]:{shapes:d.before}},pageStates:{[s]:{selectedIds:n}}}},after:{document:{pages:{[s]:{shapes:d.after}},pageStates:{[s]:{selectedIds:n}}}}}}function k6(e,n,o){const{page:s}=e;return{id:"rename_page",before:{document:{pages:{[n]:{name:s.name}}}},after:{document:{pages:{[n]:{name:o}}}}}}function I9(e,n,o){const{currentPageId:s}=e,{before:l,after:c}=z.mutateShapes(e.state,n,d=>{var p,h;return(h=(p=e.getShapeUtil(d)).onDoubleClickBoundsHandle)==null?void 0:h.call(p,d)},o);return{id:"reset_bounds",before:{document:{pages:{[s]:{shapes:l}},pageStates:{[s]:{selectedIds:n}}}},after:{document:{pages:{[s]:{shapes:c}},pageStates:{[s]:{selectedIds:n}}}}}}var O6=Math.PI*2;function T6(e,n,o=-O6/4){const{currentPageId:s}=e,l={},c={},d=n.flatMap(h=>{const g=e.getShape(h);return g.children?g.children.map(v=>e.getShape(v)):g}).filter(h=>!h.isLocked),p=H.getBoundsCenter(H.getCommonBounds(d.map(h=>z.getBounds(h))));return d.forEach(h=>{const g=z.getRotatedShapeMutation(h,z.getCenter(h),p,o);!g||(l[h.id]=z.getBeforeShape(h,g),c[h.id]=g)}),{id:"rotate",before:{document:{pages:{[s]:{shapes:l}},pageStates:{[s]:{selectedIds:n}}}},after:{document:{pages:{[s]:{shapes:c}},pageStates:{[s]:{selectedIds:n}}}}}}function B6(e,n,o){const{currentPageId:s,selectedIds:l}=e,c=n.map(w=>e.getShape(w)),d=c.map(w=>z.getBounds(w)),p=H.getCommonBounds(d),h=n.flatMap(w=>{const x=e.getShape(w);return x.children?x.children:x.id}).filter(w=>!e.getShape(w).isLocked),{before:g,after:v}=z.mutateShapes(e.state,h,w=>{const x=z.getBounds(w);switch(o){case"horizontal":{const y=U(k({},x),{minX:p.minX,maxX:p.maxX,width:p.width});return z.getShapeUtil(w).transformSingle(w,y,{type:kr.TopLeft,scaleX:y.width/x.width,scaleY:1,initialShape:w,transformOrigin:[.5,.5]})}case"vertical":{const y=U(k({},x),{minY:p.minY,maxY:p.maxY,height:p.height});return z.getShapeUtil(w).transformSingle(w,y,{type:kr.TopLeft,scaleX:1,scaleY:y.height/x.height,initialShape:w,transformOrigin:[.5,.5]})}}},s);return c.forEach(w=>{w.type==="group"&&(delete g[w.id],delete v[w.id])}),{id:"stretch",before:{document:{pages:{[s]:{shapes:g}},pageStates:{[s]:{selectedIds:l}}}},after:{document:{pages:{[s]:{shapes:v}},pageStates:{[s]:{selectedIds:n}}}}}}function V6(e,n,o){const{currentPageId:s,selectedIds:l}=e,c=n.flatMap(h=>z.getDocumentBranch(e.state,h,s)).filter(h=>!e.getShape(h).isLocked),d={},p={};return c.map(h=>e.getShape(h)).filter(h=>!h.isLocked).forEach(h=>{d[h.id]={style:k({},Object.fromEntries(Object.keys(o).map(g=>[g,h.style[g]])))},p[h.id]={style:o},h.type==="text"&&(d[h.id].point=h.point,p[h.id].point=L.toFixed(L.add(h.point,L.sub(e.getShapeUtil(h).getCenter(h),e.getShapeUtil(h).getCenter(U(k({},h),{style:k(k({},h.style),o)}))))))}),{id:"style",before:{document:{pages:{[s]:{shapes:d}},pageStates:{[s]:{selectedIds:l}}},appState:{currentStyle:k({},e.appState.currentStyle)}},after:{document:{pages:{[s]:{shapes:p}},pageStates:{[s]:{selectedIds:n}}},appState:{currentStyle:o}}}}function j6(e,n,o){const{currentPageId:s,selectedIds:l}=e,c=Object.fromEntries(n.map(p=>{var h;return[p,{decorations:{[o]:(h=e.getShape(p).decorations)==null?void 0:h[o]}}]})),d=Object.fromEntries(n.filter(p=>!e.getShape(p).isLocked).map(p=>{var h;return[p,{decorations:{[o]:(h=e.getShape(p).decorations)!=null&&h[o]?void 0:"arrow"}}]}));return{id:"toggle_decorations",before:{document:{pages:{[s]:{shapes:c}},pageStates:{[s]:{selectedIds:l}}}},after:{document:{pages:{[s]:{shapes:d}},pageStates:{[s]:{selectedIds:n}}}}}}function Qa(e,n,o){const{currentPageId:s}=e,l=n.map(h=>e.getShape(h)).filter(h=>o==="isLocked"?!0:!h.isLocked),c=l.every(h=>h[o]),d={},p={};return l.forEach(h=>{d[h.id]={[o]:h[o]},p[h.id]={[o]:!c}}),{id:"toggle",before:{document:{pages:{[s]:{shapes:d}},pageStates:{[s]:{selectedIds:n}}}},after:{document:{pages:{[s]:{shapes:p}},pageStates:{[s]:{selectedIds:n}}}}}}function A6(e,n,o){const{currentPageId:s,selectedIds:l}=e;e.rotationInfo.selectedIds=[...l];const c={shapes:{},bindings:{}},d={shapes:{},bindings:{}},p=n.flatMap(v=>{const w=e.getShape(v);return w.children?w.children:w.id}).filter(v=>!e.getShape(v).isLocked),h=z.mutateShapes(e.state,p,v=>({point:L.toFixed(L.add(v.point,o))}),s);return c.shapes=h.before,d.shapes=h.after,z.getBindings(e.state,s).filter(v=>n.includes(v.fromId)&&!n.includes(v.toId)).forEach(v=>{c.bindings[v.id]=v,d.bindings[v.id]=void 0;for(const w of[v.toId,v.fromId]){const x=e.getShape(w);!x.handles||Object.values(x.handles).filter(y=>y.bindingId===v.id).forEach(y=>{var E,R;c.shapes[w]=U(k({},c.shapes[w]),{handles:U(k({},(E=c.shapes[w])==null?void 0:E.handles),{[y.id]:{bindingId:v.id}})}),d.shapes[w]=U(k({},d.shapes[w]),{handles:U(k({},(R=d.shapes[w])==null?void 0:R.handles),{[y.id]:{bindingId:void 0}})})})}}),{id:"translate",before:{document:{pages:{[s]:c},pageStates:{[s]:{selectedIds:n}}}},after:{document:{pages:{[s]:d},pageStates:{[s]:{selectedIds:n}}}}}}function D6(e,n,o,s){const{bindings:l}=e,c={},d={},p={},h={},g=n,v=n.filter(w=>!o.find(x=>x.id===w));return o.filter(w=>!w.isLocked).forEach(w=>{const x=[],y=[];c[w.id]=w,d[w.id]=void 0,w.children.forEach(I=>{v.push(I);const B=e.getShape(I,s);x.push(B)});const E=w.childIndex,P=(z.getChildIndexAbove(e.state,w.id,s)-E)/x.length;x.sort((I,B)=>I.childIndex-B.childIndex).forEach((I,B)=>{c[I.id]={parentId:I.parentId,childIndex:I.childIndex},d[I.id]={parentId:s,childIndex:E+P*B}}),l.filter(I=>I.toId===w.id||I.fromId===w.id).forEach(I=>{for(const B of[I.toId,I.fromId])if(d[B]===void 0){p[I.id]=I,h[I.id]=void 0;const j=e.getShape(B,s);j.handles&&Object.values(j.handles).filter(T=>T.bindingId===I.id).forEach(T=>{var D,A;c[B]=U(k({},c[B]),{handles:U(k({},(D=c[B])==null?void 0:D.handles),{[T.id]:{bindingId:I.id}})}),y.includes(B)||(d[B]=U(k({},d[B]),{handles:U(k({},(A=d[B])==null?void 0:A.handles),{[T.id]:{bindingId:void 0}})}))})}})}),{id:"ungroup",before:{document:{pages:{[s]:{shapes:c,bindings:p}},pageStates:{[s]:{selectedIds:g}}}},after:{document:{pages:{[s]:{shapes:d,bindings:p}},pageStates:{[s]:{selectedIds:v}}}}}}function Z6(e,n,o){const s=n.map(c=>c.id),l=z.mutateShapes(e.state,s.filter(c=>!e.getShape(c,o).isLocked),(c,d)=>n[d],o);return{id:"update",before:{document:{pages:{[o]:{shapes:l.before}}}},after:{document:{pages:{[o]:{shapes:l.after}}}}}}function z6(e,n,o){const{currentPageId:s,selectedIds:l}=e,c=n.map(g=>e.getShape(g)).filter(g=>o.isLocked?!0:!g.isLocked),d={},p={},h=Object.keys(o);return c.forEach(g=>{d[g.id]=Object.fromEntries(h.map(v=>[v,g[v]])),p[g.id]=o}),{id:"set_props",before:{document:{pages:{[s]:{shapes:d}},pageStates:{[s]:{selectedIds:l}}}},after:{document:{pages:{[s]:{shapes:p}},pageStates:{[s]:{selectedIds:l}}}}}}var pr=class{constructor(e){this.app=e}},W6=class extends pr{constructor(e,n,o,s=!1){super(e),m(this,"type","arrow"),m(this,"performanceMode"),m(this,"status","translatingHandle"),m(this,"newStartBindingId",H.uniqueId()),m(this,"draggedBindingId",H.uniqueId()),m(this,"didBind",!1),m(this,"initialShape"),m(this,"handleId"),m(this,"bindableShapeIds"),m(this,"initialBinding"),m(this,"startBindingShapeId"),m(this,"isCreate"),m(this,"start",()=>{}),m(this,"update",()=>{var w,x,y;const{initialShape:E}=this,{currentPoint:R,shiftKey:P,altKey:$,metaKey:I,currentGrid:B,settings:{showGrid:j}}=this.app,T=this.app.getShape(E.id);if(T.isLocked)return;const D=T.handles,A=this.handleId;if(!D[A].canBind)return;let X=L.sub(R,D[A].point);if(P){const le=D[A==="start"?"end":"start"].point,Ne=D[A].point,Gt=L.toFixed(L.sub(L.add(Ne,X),T.point)),s1=L.angle(le,Gt),yn=L.rotWith(Gt,le,H.snapAngleToSegments(s1,24)-s1);X=L.add(X,L.sub(yn,Gt))}const ne=L.sub(L.add(D[A].point,X),T.point),he=U(k({},D[A]),{point:j?L.snap(ne,B):L.toFixed(ne),bindingId:void 0}),Se=po.arrow,ve=(w=Se.onHandleChange)==null?void 0:w.call(Se,T,{[A]:he});if(!ve)return;const me={shape:H.deepMerge(T,ve),bindings:{}};let rt;const ht=me.shape.handles[this.handleId],ye=me.shape.handles[this.handleId==="start"?"end":"start"];if(this.startBindingShapeId){let le;const Ne=this.app.page.shapes[this.startBindingShapeId],Gt=z.getShapeUtil(Ne),s1=Gt.getCenter(Ne),yn=me.shape.handles.start,fi=me.shape.handles.end,h1=L.add(yn.point,me.shape.point);L.isEqual(h1,s1)&&h1[1]++;const Br=s1,Co=Gt.hitTestPoint(Ne,R),_r=L.uni(L.sub(h1,Br)),mo=this.app.getBinding(this.newStartBindingId)!==void 0;!I&&!Gt.hitTestPoint(Ne,L.add(me.shape.point,fi.point))&&(le=this.findBindingPoint(T,Ne,"start",this.newStartBindingId,s1,Br,_r,Co)),le&&!mo?(this.didBind=!0,me.bindings[this.newStartBindingId]=le,me.shape=H.deepMerge(me.shape,{handles:{start:{bindingId:le.id}}})):!le&&mo&&(this.didBind=!1,me.bindings[this.newStartBindingId]=void 0,me.shape=H.deepMerge(E,{handles:{start:{bindingId:void 0}}}))}if(!I){const le=L.add(ye.point,me.shape.point),Ne=L.add(ht.point,me.shape.point),Gt=L.uni(L.sub(Ne,le)),s1=L.add(me.shape.point,me.shape.handles.start.point),yn=L.add(me.shape.point,me.shape.handles.end.point),fi=this.bindableShapeIds.map(h1=>this.app.page.shapes[h1]).sort((h1,Br)=>Br.childIndex-h1.childIndex).filter(h1=>{const Br=z.getShapeUtil(h1);return![s1,yn].every(Co=>Br.hitTestPoint(h1,Co))});for(const h1 of fi)if(rt=this.findBindingPoint(T,h1,this.handleId,this.draggedBindingId,Ne,le,Gt,$),rt)break}if(rt)this.didBind=!0,me.bindings[this.draggedBindingId]=rt,me.shape=H.deepMerge(me.shape,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}});else{this.didBind=this.didBind||!1;const le=T.handles[this.handleId].bindingId;le!==void 0&&(me.bindings[le]=void 0,me.shape=H.deepMerge(me.shape,{handles:{[this.handleId]:{bindingId:void 0}}}))}const Ye=(y=(x=z.getShapeUtil(me.shape)).onHandleChange)==null?void 0:y.call(x,me.shape,me.shape.handles);return{document:{pages:{[this.app.currentPageId]:{shapes:{[T.id]:k(k({},me.shape),Ye??{})},bindings:me.bindings}},pageStates:{[this.app.currentPageId]:{bindingId:me.shape.handles[A].bindingId}}}}}),m(this,"cancel",()=>{const{initialShape:w,initialBinding:x,newStartBindingId:y,draggedBindingId:E}=this,R=z.onSessionComplete(this.app.page.shapes[w.id]),P=this.isCreate||L.dist(R.handles.start.point,R.handles.end.point)<4,$={};return $[E]=void 0,x&&($[x.id]=P?void 0:x),y&&($[y]=void 0),{document:{pages:{[this.app.currentPageId]:{shapes:{[w.id]:P?void 0:w},bindings:$}},pageStates:{[this.app.currentPageId]:{selectedIds:P?[]:[w.id],bindingId:void 0,hoveredId:void 0,editingId:void 0}}}}}),m(this,"complete",()=>{const{initialShape:w,initialBinding:x,newStartBindingId:y,startBindingShapeId:E,handleId:R}=this,P=z.onSessionComplete(this.app.page.shapes[w.id]),$=P.handles[R].bindingId,I=L.dist(P.handles.start.point,P.handles.end.point);if(!($||x)&&I<4)return this.cancel();const B={},j={};return x&&(B[x.id]=this.isCreate?void 0:x,j[x.id]=void 0),$&&(B[$]=void 0,j[$]=this.app.page.bindings[$]),E&&(B[y]=void 0,j[y]=this.app.page.bindings[y]),{id:"arrow",before:{document:{pages:{[this.app.currentPageId]:{shapes:{[w.id]:this.isCreate?void 0:w},bindings:B}},pageStates:{[this.app.currentPageId]:{selectedIds:this.isCreate?[]:[w.id],bindingId:void 0,hoveredId:void 0,editingId:void 0}}}},after:{document:{pages:{[this.app.currentPageId]:{shapes:{[w.id]:P},bindings:j}},pageStates:{[this.app.currentPageId]:{selectedIds:[w.id],bindingId:void 0,hoveredId:void 0,editingId:void 0}}}}}}),m(this,"findBindingPoint",(w,x,y,E,R,P,$,I)=>{const j=z.getShapeUtil(x.type).getBindingPoint(x,w,R,P,$,I);if(!!j)return{id:E,type:"arrow",fromId:w.id,toId:x.id,handleId:y,point:L.toFixed(j.point),distance:j.distance}});var l,c,d;this.isCreate=s;const{currentPageId:p}=e.state.appState,h=e.state.document.pages[p];this.handleId=o,this.initialShape=hr(h.shapes[n]),this.bindableShapeIds=z.getBindableShapeIds(e.state).filter(w=>!(w===this.initialShape.id||w===this.initialShape.parentId));const g=(l=this.initialShape.handles[o==="start"?"end":"start"])==null?void 0:l.bindingId;if(g){const w=(c=h.bindings[g])==null?void 0:c.toId;w&&(this.bindableShapeIds=this.bindableShapeIds.filter(x=>x!==w))}const{originPoint:v}=this.app;if(this.isCreate)this.startBindingShapeId=(d=this.bindableShapeIds.map(w=>h.shapes[w]).filter(w=>H.pointInBounds(v,z.getShapeUtil(w).getBounds(w))).sort((w,x)=>x.childIndex-w.childIndex)[0])==null?void 0:d.id,this.startBindingShapeId&&this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1);else{const w=this.initialShape.handles[this.handleId].bindingId;w?this.initialBinding=h.bindings[w]:this.initialShape.handles[this.handleId].bindingId=void 0}}},F6=class extends pr{constructor(e){super(e),m(this,"type","brush"),m(this,"performanceMode"),m(this,"status","brushing"),m(this,"initialSelectedIds"),m(this,"shapesToTest"),m(this,"start",()=>{}),m(this,"update",()=>{const{initialSelectedIds:o,shapesToTest:s,app:{originPoint:l,currentPoint:c}}=this,d=H.getBoundsFromPoints([l,c]),p=new Set,h=new Set(o);s.forEach(({id:x,selectId:y})=>{const{metaKey:E}=this.app,R=this.app.getShape(x);if(!p.has(y)){const P=this.app.getShapeUtil(R);(E?H.boundsContain(d,P.getBounds(R)):P.hitTestBounds(R,d))?(p.add(y),h.has(y)||h.add(y)):h.has(y)&&h.delete(y)}});const g=this.app.selectedIds,w=h.size!==g.length||g.some(x=>!h.has(x))?Array.from(h.values()):g;return{document:{pageStates:{[this.app.currentPageId]:{brush:d,selectedIds:w}}}}}),m(this,"cancel",()=>({document:{pageStates:{[this.app.currentPageId]:{brush:null,selectedIds:Array.from(this.initialSelectedIds.values())}}}})),m(this,"complete",()=>({document:{pageStates:{[this.app.currentPageId]:{brush:null,selectedIds:[...this.app.selectedIds]}}}}));const{currentPageId:n}=e;this.initialSelectedIds=new Set(this.app.selectedIds),this.shapesToTest=this.app.shapes.filter(o=>!(o.isLocked||o.isHidden||o.parentId!==n||this.initialSelectedIds.has(o.id)||this.initialSelectedIds.has(o.parentId))).map(o=>({id:o.id,bounds:this.app.getShapeUtil(o).getBounds(o),selectId:o.id})),this.update()}},N6=class extends pr{constructor(e,n){super(e),m(this,"type","draw"),m(this,"performanceMode"),m(this,"status","creating"),m(this,"topLeft"),m(this,"points"),m(this,"initialShape"),m(this,"lastAdjustedPoint"),m(this,"shiftedPoints",[]),m(this,"shapeId"),m(this,"isLocked"),m(this,"isExtending"),m(this,"lockedDirection"),m(this,"start",()=>{var h;const g=this.app.originPoint,v=[0,0,(h=g[2])!=null?h:.5];this.points.push(v);const w=[Math.min(this.topLeft[0],g[0]),Math.min(this.topLeft[1],g[1])],x=L.sub(w,g);return this.topLeft=w,this.shiftedPoints=this.points.map(y=>L.toFixed(L.sub(y,x)).concat(y[2])),{document:{pages:{[this.app.currentPageId]:{shapes:{[this.shapeId]:{point:this.topLeft,points:this.shiftedPoints}}}},pageStates:{[this.app.currentPageId]:{selectedIds:[this.shapeId]}}}}}),m(this,"update",()=>{const{shapeId:h}=this,{currentPoint:g,originPoint:v,shiftKey:w}=this.app;if(!this.lockedDirection&&this.points.length>1){const y=H.getBoundsFromPoints(this.points);(y.width>8||y.height>8)&&(this.lockedDirection=y.width>y.height?"horizontal":"vertical")}if(w){if(!this.isLocked&&this.points.length>2){if(!this.lockedDirection){const E=H.getBoundsFromPoints(this.points);this.lockedDirection=E.width>E.height?"horizontal":"vertical"}this.isLocked=!0;const y=[...this.lastAdjustedPoint];this.lockedDirection==="vertical"?y[0]=0:y[1]=0,this.points.push(y.concat(g[2]))}}else this.isLocked&&(this.isLocked=!1);this.isLocked&&(this.lockedDirection==="vertical"?g[0]=v[0]:g[1]=v[1]);const x=this.addPoint(g);if(!!x)return{document:{pages:{[this.app.currentPageId]:{shapes:{[h]:x}}},pageStates:{[this.app.currentPageId]:{selectedIds:[h]}}}}}),m(this,"cancel",()=>{const{shapeId:h}=this,g=this.app.currentPageId;return{document:{pages:{[g]:{shapes:{[h]:this.isExtending?this.initialShape:void 0}}},pageStates:{[g]:{selectedIds:[]}}}}}),m(this,"complete",()=>{const{shapeId:h}=this,g=this.app.currentPageId,v=this.app.getShape(h);return{id:"create_draw",before:{document:{pages:{[g]:{shapes:{[h]:this.isExtending?this.initialShape:void 0}}},pageStates:{[g]:{selectedIds:[]}}}},after:{document:{pages:{[g]:{shapes:{[h]:U(k({},v),{point:L.toFixed(v.point),points:v.points.map(w=>L.toFixed(w)),isComplete:!0})}}},pageStates:{[this.app.currentPageId]:{selectedIds:[]}}}}}}),m(this,"addPoint",h=>{const{originPoint:g}=this.app,v=L.toFixed(L.sub(h,g)).concat(h[2]);if(L.isEqual(this.lastAdjustedPoint,v))return;this.points.push(v),this.lastAdjustedPoint=v;const w=[...this.topLeft],x=[Math.min(this.topLeft[0],h[0]),Math.min(this.topLeft[1],h[1])],y=L.sub(x,g);let E;return w[0]!==x[0]||w[1]!==x[1]?(this.topLeft=x,E=this.points.map(R=>L.toFixed(L.sub(R,y)).concat(R[2]))):E=[...this.shiftedPoints,L.sub(v,y).concat(v[2])],this.shiftedPoints=E,{point:this.topLeft,points:E}});var o;const{originPoint:s}=this.app;this.shapeId=n,this.initialShape=this.app.getShape(n),this.topLeft=[...this.initialShape.point];const l=[0,0,(o=s[2])!=null?o:.5],c=L.sub(s,this.topLeft),d=this.initialShape.points.map(h=>L.sub(h,c).concat(h[2]));this.isExtending=d.length>0;const p=[];if(this.isExtending){const h=d[d.length-1];p.push(h,h);const g=Math.ceil(L.dist(h,l)/16);for(let v=0;v<g;v++){const w=v/(g-1);p.push(L.lrp(h,l,w).concat(h[2]))}}else p.push(l);this.points=[...d,...p],this.shiftedPoints=this.points.map(h=>L.add(h,c).concat(h[2])),this.lastAdjustedPoint=this.points[this.points.length-1]}},U6=class extends pr{constructor(e,n,o,s="move_handle"){super(e),m(this,"type","handle"),m(this,"performanceMode"),m(this,"status","translatingHandle"),m(this,"commandId"),m(this,"topLeft"),m(this,"shiftKey",!1),m(this,"initialShape"),m(this,"handleId"),m(this,"start",()=>{}),m(this,"update",()=>{var c,d;const{initialShape:p,app:{currentPageId:h,currentPoint:g,shiftKey:v,altKey:w,metaKey:x}}=this,y=this.app.getShape(p.id);if(y.isLocked)return;const E=y.handles,R=this.handleId,P=L.sub(g,E[R].point),$=U(k({},E[R]),{point:L.sub(L.add(E[R].point,P),y.point)}),I=(d=(c=z.getShapeUtil(y)).onHandleChange)==null?void 0:d.call(c,y,{[R]:$});if(!!I)return{document:{pages:{[h]:{shapes:{[y.id]:I}}}}}}),m(this,"cancel",()=>{const{initialShape:c,app:{currentPageId:d}}=this;return{document:{pages:{[d]:{shapes:{[c.id]:c}}}}}}),m(this,"complete",()=>{const{initialShape:c,app:{currentPageId:d}}=this;return{id:this.commandId,before:{document:{pages:{[d]:{shapes:{[c.id]:c}}}}},after:{document:{pages:{[d]:{shapes:{[c.id]:z.onSessionComplete(this.app.getShape(this.initialShape.id))}}}}}}});const{originPoint:l}=e;this.topLeft=[...l],this.handleId=o,this.initialShape=this.app.getShape(n),this.commandId=s}},K6=class extends pr{constructor(e){super(e),m(this,"type","rotate"),m(this,"status","transforming"),m(this,"performanceMode"),m(this,"delta",[0,0]),m(this,"commonBoundsCenter"),m(this,"initialAngle"),m(this,"initialShapes"),m(this,"changes",{}),m(this,"start",()=>{}),m(this,"update",()=>{const{commonBoundsCenter:c,initialShapes:d,app:{currentPageId:p,currentPoint:h,shiftKey:g}}=this,v={};let w=L.angle(c,h)-this.initialAngle;return g&&(w=H.snapAngleToSegments(w,24)),d.forEach(({center:x,shape:y})=>{const{rotation:E=0}=y;let R=0;g&&(R=H.snapAngleToSegments(E,24)-E);const P=z.getRotatedShapeMutation(y,x,c,g?w+R:w);P&&(v[y.id]=P)}),this.changes=v,{document:{pages:{[p]:{shapes:v}}}}}),m(this,"cancel",()=>{const{initialShapes:c,app:{currentPageId:d}}=this,p={};return c.forEach(({shape:h})=>p[h.id]=h),{document:{pages:{[d]:{shapes:p}}}}}),m(this,"complete",()=>{const{initialShapes:c,app:{currentPageId:d}}=this,p={},h=this.changes;return c.forEach(({shape:{id:g,point:v,rotation:w,handles:x}})=>{p[g]={point:v,rotation:w,handles:x}}),{id:"rotate",before:{document:{pages:{[d]:{shapes:p}}}},after:{document:{pages:{[d]:{shapes:h}}}}}});const{app:{currentPageId:n,pageState:o,originPoint:s}}=this,l=z.getSelectedBranchSnapshot(e.state,n).filter(c=>!c.isLocked);if(l.length===0)throw Error("No selected shapes!");if(e.rotationInfo.selectedIds===o.selectedIds){if(e.rotationInfo.center===void 0)throw Error("We should have a center for rotation!");this.commonBoundsCenter=e.rotationInfo.center}else this.commonBoundsCenter=H.getBoundsCenter(H.getCommonBounds(l.map(z.getBounds))),e.rotationInfo.selectedIds=o.selectedIds,e.rotationInfo.center=this.commonBoundsCenter;this.initialShapes=l.filter(c=>c.children===void 0).map(c=>({shape:c,center:this.app.getShapeUtil(c).getCenter(c)})),this.initialAngle=L.angle(this.commonBoundsCenter,s)}},X6=class extends pr{constructor(e,n=kr.BottomRight,o=!1){super(e),this.transformType=n,this.isCreate=o,m(this,"type","transform"),m(this,"performanceMode"),m(this,"status","transforming"),m(this,"scaleX",1),m(this,"scaleY",1),m(this,"initialShapes"),m(this,"initialShapeIds"),m(this,"initialSelectedIds"),m(this,"shapeBounds"),m(this,"hasUnlockedShapes"),m(this,"isAllAspectRatioLocked"),m(this,"initialCommonBounds"),m(this,"snapInfo",{state:"empty"}),m(this,"prevPoint",[0,0]),m(this,"speed",1),m(this,"start",()=>{this.snapInfo={state:"ready",bounds:this.app.shapes.filter(d=>!this.initialShapeIds.includes(d.id)).map(d=>H.getBoundsWithCenter(z.getRotatedBounds(d)))}}),m(this,"update",()=>{const{transformType:d,shapeBounds:p,initialCommonBounds:h,isAllAspectRatioLocked:g,app:{currentPageId:v,pageState:{camera:w},viewport:x,currentPoint:y,previousPoint:E,originPoint:R,shiftKey:P,altKey:$,metaKey:I,currentGrid:B,settings:{isSnapping:j,showGrid:T}}}=this,D={},A=$?L.mul(L.sub(y,R),2):L.sub(y,R);let X=H.getTransformedBoundingBox(h,d,A,0,P||g);$&&(X=k(k({},X),H.centerBounds(X,H.getBoundsCenter(h)))),T&&(X=k(k({},X),H.snapBoundsToGrid(X,B)));const he=L.dist(y,E)-this.speed;this.speed=this.speed+he*(he>1?.5:.15);let Se=[];if((j&&!I||!j&&I)&&this.speed*w.zoom<ja&&this.snapInfo.state==="ready"){const ve=H.getSnapPoints(H.getBoundsWithCenter(X),this.snapInfo.bounds.filter(me=>H.boundsContain(x,me)||H.boundsCollide(x,me)),Va/w.zoom);ve&&(Se=ve.snapLines,X=H.getTransformedBoundingBox(h,d,L.sub(A,ve.offset),0,P||g))}return this.scaleX=X.scaleX,this.scaleY=X.scaleY,p.forEach(({initialShape:ve,initialShapeBounds:me,transformOrigin:rt})=>{let ht=H.getRelativeTransformedBoundingBox(X,h,me,this.scaleX<0,this.scaleY<0);T&&(ht=H.snapBoundsToGrid(ht,B));const ye=z.transform(this.app.getShape(ve.id),ht,{type:this.transformType,initialShape:ve,scaleX:this.scaleX,scaleY:this.scaleY,transformOrigin:rt});D[ve.id]=ye}),{appState:{snapLines:Se},document:{pages:{[v]:{shapes:D}}}}}),m(this,"cancel",()=>{const{shapeBounds:d,app:{currentPageId:p}}=this,h={};return this.isCreate?d.forEach(g=>h[g.initialShape.id]=void 0):d.forEach(g=>h[g.initialShape.id]=g.initialShape),{appState:{snapLines:[]},document:{pages:{[p]:{shapes:h}},pageStates:{[p]:{selectedIds:this.isCreate?[]:d.map(g=>g.initialShape.id)}}}}}),m(this,"complete",()=>{const{isCreate:d,shapeBounds:p,hasUnlockedShapes:h,app:{currentPageId:g}}=this;if(!h)return;const v={},w={};let x,y;return d?(x=[],y=[],p.forEach(({initialShape:E})=>{v[E.id]=void 0,w[E.id]=this.app.getShape(E.id)})):(x=this.initialSelectedIds,y=this.initialSelectedIds,p.forEach(({initialShape:E})=>{v[E.id]=E,w[E.id]=this.app.getShape(E.id)})),{id:"transform",before:{appState:{snapLines:[]},document:{pages:{[g]:{shapes:v}},pageStates:{[g]:{selectedIds:x,hoveredId:void 0,editingId:void 0}}}},after:{appState:{snapLines:[]},document:{pages:{[g]:{shapes:w}},pageStates:{[g]:{selectedIds:y,hoveredId:void 0,editingId:void 0}}}}}}),this.initialSelectedIds=[...this.app.selectedIds],this.app.rotationInfo.selectedIds=[...this.initialSelectedIds],this.initialShapes=z.getSelectedBranchSnapshot(this.app.state,this.app.currentPageId).filter(d=>!d.isLocked),this.initialShapeIds=this.initialShapes.map(d=>d.id),this.hasUnlockedShapes=this.initialShapes.length>0,this.isAllAspectRatioLocked=this.initialShapes.every(d=>d.isAspectRatioLocked||z.getShapeUtil(d).isAspectRatioLocked);const s=Object.fromEntries(this.initialShapes.map(d=>[d.id,z.getBounds(d)])),l=Object.values(s);this.initialCommonBounds=H.getCommonBounds(l);const c=H.getBoundsFromPoints(l.map(H.getBoundsCenter));this.shapeBounds=this.initialShapes.map(d=>{const p=s[d.id],h=H.getBoundsCenter(p),g=(h[0]-c.minX)/c.width,v=(h[1]-c.minY)/c.height;return{initialShape:d,initialShapeBounds:p,transformOrigin:[g,v]}})}},G6=class extends pr{constructor(e,n,o,s=!1){super(e),m(this,"type","transformSingle"),m(this,"status","transforming"),m(this,"performanceMode"),m(this,"transformType"),m(this,"scaleX",1),m(this,"scaleY",1),m(this,"isCreate"),m(this,"initialShape"),m(this,"initialShapeBounds"),m(this,"initialCommonBounds"),m(this,"snapInfo",{state:"empty"}),m(this,"prevPoint",[0,0]),m(this,"speed",1),m(this,"start",()=>{this.snapInfo={state:"ready",bounds:this.app.shapes.filter(c=>c.id!==this.initialShape.id).map(c=>H.getBoundsWithCenter(z.getRotatedBounds(c)))}}),m(this,"update",()=>{const{transformType:c,initialShape:d,initialShapeBounds:p,app:{settings:{isSnapping:h,showGrid:g},currentPageId:v,pageState:{camera:w},viewport:x,currentPoint:y,previousPoint:E,originPoint:R,currentGrid:P,shiftKey:$,altKey:I,metaKey:B}}=this;if(d.isLocked)return;const j={},T=I?L.mul(L.sub(y,R),2):L.sub(y,R),D=this.app.getShape(d.id),A=z.getShapeUtil(D);let X=H.getTransformedBoundingBox(p,c,T,D.rotation,$||D.isAspectRatioLocked||A.isAspectRatioLocked);I&&(X=k(k({},X),H.centerBounds(X,H.getBoundsCenter(p)))),g&&(X=k(k({},X),H.snapBoundsToGrid(X,P)));const he=L.dist(y,E)-this.speed;this.speed=this.speed+he*(he>1?.5:.15);let Se=[];if((h&&!B||!h&&B)&&!d.rotation&&this.speed*w.zoom<ja&&this.snapInfo.state==="ready"){const me=H.getSnapPoints(H.getBoundsWithCenter(X),this.snapInfo.bounds.filter(rt=>H.boundsContain(x,rt)||H.boundsCollide(x,rt)),Va/w.zoom);me&&(Se=me.snapLines,X=H.getTransformedBoundingBox(p,c,L.sub(T,me.offset),D.rotation,$||D.isAspectRatioLocked||A.isAspectRatioLocked))}const ve=z.getShapeUtil(D).transformSingle(D,X,{initialShape:d,type:this.transformType,scaleX:X.scaleX,scaleY:X.scaleY,transformOrigin:[.5,.5]});return ve&&(j[D.id]=ve),g&&ve&&ve.point&&(ve.point=L.snap(ve.point,P)),{appState:{snapLines:Se},document:{pages:{[v]:{shapes:j}}}}}),m(this,"cancel",()=>{const{initialShape:c,app:{currentPageId:d}}=this,p={};return this.isCreate?p[c.id]=void 0:p[c.id]=c,{appState:{snapLines:[]},document:{pages:{[d]:{shapes:p}},pageStates:{[d]:{selectedIds:this.isCreate?[]:[c.id]}}}}}),m(this,"complete",()=>{const{initialShape:c,app:{currentPageId:d}}=this;if(c.isLocked)return;const p={},h={};return p[c.id]=this.isCreate?void 0:c,h[c.id]=z.onSessionComplete(this.app.getShape(c.id)),{id:"transform_single",before:{appState:{snapLines:[]},document:{pages:{[d]:{shapes:p}},pageStates:{[d]:{selectedIds:this.isCreate?[]:[c.id],editingId:void 0,hoveredId:void 0}}}},after:{appState:{snapLines:[]},document:{pages:{[d]:{shapes:h}},pageStates:{[d]:{selectedIds:[c.id],editingId:void 0,hoveredId:void 0}}}}}}),this.isCreate=s,this.transformType=o;const l=this.app.getShape(n);this.initialShape=l,this.initialShapeBounds=z.getBounds(l),this.initialCommonBounds=z.getRotatedBounds(l),this.app.rotationInfo.selectedIds=[l.id]}},Y6=class extends pr{constructor(e,n=!1,o=!1){super(e),m(this,"performanceMode"),m(this,"type","translate"),m(this,"status","translating"),m(this,"delta",[0,0]),m(this,"prev",[0,0]),m(this,"prevPoint",[0,0]),m(this,"speed",1),m(this,"cloneInfo",{state:"empty"}),m(this,"snapInfo",{state:"empty"}),m(this,"snapLines",[]),m(this,"isCloning",!1),m(this,"isCreate"),m(this,"link"),m(this,"initialIds"),m(this,"hasUnlockedShapes"),m(this,"initialSelectedIds"),m(this,"initialCommonBounds"),m(this,"initialShapes"),m(this,"initialParentChildren"),m(this,"bindingsToDelete"),m(this,"start",()=>{const{bindingsToDelete:h,initialIds:g,app:{currentPageId:v,page:w}}=this,x=[],y=[];if(Object.values(w.shapes).forEach(R=>{const P=H.getBoundsWithCenter(z.getRotatedBounds(R));x.push(P),g.has(R.id)||y.push(P)}),this.snapInfo={state:"ready",bounds:x,others:y},h.length===0)return;const E={};return h.forEach(R=>E[R.id]=void 0),{document:{pages:{[v]:{bindings:E}}}}}),m(this,"update",()=>{const{initialParentChildren:h,initialShapes:g,initialCommonBounds:v,bindingsToDelete:w,app:{pageState:{camera:x},settings:{isSnapping:y,showGrid:E},currentPageId:R,viewport:P,selectedIds:$,currentPoint:I,previousPoint:B,originPoint:j,altKey:T,shiftKey:D,metaKey:A,currentGrid:X}}=this,ne={},he={},Se={};let ve=L.sub(I,j),me=!1;this.isCreate||(T&&!this.isCloning?(this.isCloning=!0,me=!0):!T&&this.isCloning&&(this.isCloning=!1,me=!0)),D&&(Math.abs(ve[0])<Math.abs(ve[1])?ve[0]=0:ve[1]=0);const ht=L.dist(I,B)-this.speed;if(this.speed=this.speed+ht*(ht>1?.5:.15),this.snapLines=[],(y&&!A||!y&&A)&&this.speed*x.zoom<ja&&this.snapInfo.state==="ready"){const ye=H.getSnapPoints(H.getBoundsWithCenter(E?H.snapBoundsToGrid(H.translateBounds(v,ve),X):H.translateBounds(v,ve)),(this.isCloning?this.snapInfo.bounds:this.snapInfo.others).filter(Ye=>H.boundsContain(P,Ye)||H.boundsCollide(P,Ye)),Va/x.zoom);ye&&(this.snapLines=ye.snapLines,ve=L.sub(ve,ye.offset))}if(this.prev=ve,this.isCloning)if(me){if(this.cloneInfo.state==="empty"&&this.createCloneInfo(),this.cloneInfo.state==="empty")throw Error;const{clones:ye,clonedBindings:Ye}=this.cloneInfo;this.isCloning=!0,w.forEach(le=>ne[le.id]=le),g.forEach(le=>he[le.id]={point:le.point}),ye.forEach(le=>{var Ne;if(he[le.id]=k({},le),le.parentId!==R&&!$.includes(le.parentId)){const Gt=((Ne=he[le.parentId])==null?void 0:Ne.children)||h[le.parentId];Gt.includes(le.id)||(he[le.parentId]=U(k({},he[le.parentId]),{children:[...Gt,le.id]}))}});for(const le of Ye)ne[le.id]=le;Se.selectedIds=ye.map(le=>le.id),ye.forEach(le=>{he[le.id]=U(k({},le),{point:E?L.snap(L.toFixed(L.add(le.point,ve)),X):L.toFixed(L.add(le.point,ve))})})}else{if(this.cloneInfo.state==="empty")throw Error;const{clones:ye}=this.cloneInfo;ye.forEach(Ye=>{he[Ye.id]={point:E?L.snap(L.toFixed(L.add(Ye.point,ve)),X):L.toFixed(L.add(Ye.point,ve))}})}else if(me){if(this.cloneInfo.state==="empty")throw Error;const{clones:ye,clonedBindings:Ye}=this.cloneInfo;this.isCloning=!1,w.forEach(le=>ne[le.id]=void 0),ye.forEach(le=>{le.parentId!==R&&(he[le.parentId]=U(k({},he[le.parentId]),{children:h[le.parentId]}))}),ye.forEach(le=>he[le.id]=void 0),g.forEach(le=>{he[le.id]={point:E?L.snap(L.toFixed(L.add(le.point,ve)),X):L.toFixed(L.add(le.point,ve))}});for(const le of Ye)ne[le.id]=void 0;Se.selectedIds=g.map(le=>le.id)}else g.forEach(ye=>{he[ye.id]={point:E?L.snap(L.toFixed(L.add(ye.point,ve)),X):L.toFixed(L.add(ye.point,ve))}});return{appState:{snapLines:this.snapLines},document:{pages:{[R]:{shapes:he,bindings:ne}},pageStates:{[R]:Se}}}}),m(this,"cancel",()=>{const{initialShapes:h,initialSelectedIds:g,bindingsToDelete:v,app:{currentPageId:w}}=this,x={},y={},E={editingId:void 0,hoveredId:void 0};if(v.forEach(R=>x[R.id]=R),this.isCreate?(h.forEach(({id:R})=>y[R]=void 0),E.selectedIds=[]):(h.forEach(({id:R,point:P})=>y[R]=U(k({},y[R]),{point:P})),E.selectedIds=g),this.cloneInfo.state==="ready"){const{clones:R,clonedBindings:P}=this.cloneInfo;R.forEach($=>y[$.id]=void 0),P.forEach($=>x[$.id]=void 0)}return{appState:{snapLines:[]},document:{pages:{[w]:{shapes:y,bindings:x}},pageStates:{[w]:E}}}}),m(this,"complete",()=>{const{initialShapes:h,initialParentChildren:g,bindingsToDelete:v,app:{currentPageId:w}}=this,x={},y={},E={},R={};if(this.isCloning){if(this.cloneInfo.state==="empty"&&this.createCloneInfo(),this.cloneInfo.state!=="ready")throw Error;const{clones:P,clonedBindings:$}=this.cloneInfo;P.forEach(I=>{y[I.id]=void 0,R[I.id]=this.app.getShape(I.id),I.parentId!==w&&(y[I.parentId]=U(k({},y[I.parentId]),{children:g[I.parentId]}),R[I.parentId]=U(k({},R[I.parentId]),{children:this.app.getShape(I.parentId).children}))}),$.forEach(I=>{x[I.id]=void 0,E[I.id]=this.app.getBinding(I.id)})}else h.forEach(P=>{y[P.id]=this.isCreate?void 0:U(k({},y[P.id]),{point:P.point}),R[P.id]=k(k({},R[P.id]),this.isCreate?this.app.getShape(P.id):{point:this.app.getShape(P.id).point})});return v.forEach(P=>{x[P.id]=P;for(const $ of[P.toId,P.fromId]){const I=this.app.getShape($);!I.handles||Object.values(I.handles).filter(B=>B.bindingId===P.id).forEach(B=>{y[$]=U(k({},y[$]),{handles:{}}),R[$]=U(k({},R[$]),{handles:{}}),y[$].handles[B.id]={bindingId:P.id},R[$].handles[B.id]={bindingId:void 0}})}}),{id:"translate",before:{appState:{snapLines:[]},document:{pages:{[w]:{shapes:y,bindings:x}},pageStates:{[w]:{selectedIds:this.isCreate?[]:[...this.initialSelectedIds]}}}},after:{appState:{snapLines:[]},document:{pages:{[w]:{shapes:R,bindings:E}},pageStates:{[w]:{selectedIds:[...this.app.selectedIds]}}}}}}),m(this,"createCloneInfo",()=>{const{initialShapes:h,initialParentChildren:g,app:{selectedIds:v,currentPageId:w,page:x}}=this,y={},E={},R=[],P=[];h.forEach(I=>{const B=H.uniqueId();g[B]=g[I.id],y[I.id]=B;const j=U(k({},H.deepClone(I)),{id:B,parentId:I.parentId,childIndex:z.getChildIndexAbove(this.app.state,I.id,w)});if(j.type==="video"){const T=document.getElementById(I.id+"_video");T&&(j.currentTime=(T.currentTime+16)%T.duration)}P.push(j)}),P.forEach(I=>{I.children!==void 0&&(I.children=I.children.map(B=>y[B]))}),P.forEach(I=>{v.includes(I.parentId)&&(I.parentId=y[I.parentId])});const $=new Set(Object.keys(y));Object.values(x.bindings).filter(I=>$.has(I.fromId)||$.has(I.toId)).forEach(I=>{if($.has(I.fromId)&&$.has(I.toId)){const B=H.uniqueId(),j=U(k({},H.deepClone(I)),{id:B,fromId:y[I.fromId]||I.fromId,toId:y[I.toId]||I.toId});E[I.id]=B,R.push(j)}}),P.forEach(I=>{if(I.handles&&I.handles)for(const B in I.handles){const j=I.handles[B];j.bindingId=j.bindingId?E[j.bindingId]:void 0}}),P.forEach(I=>{if(x.shapes[I.id])throw Error("uh oh, we didn't clone correctly")}),this.cloneInfo={state:"ready",clones:P,cloneMap:y,clonedBindings:R}}),this.isCreate=n,this.link=o;const{currentPageId:s,selectedIds:l,page:c}=this.app;this.initialSelectedIds=[...l];const d=(o?z.getLinkedShapeIds(this.app.state,s,o,!1):l).map(h=>this.app.getShape(h)).filter(h=>!h.isLocked),p=new Set(d.map(h=>h.id));this.hasUnlockedShapes=d.length>0,this.initialShapes=Array.from(new Set(d.filter(h=>!p.has(h.parentId)).flatMap(h=>h.children?[h,...h.children.map(g=>this.app.getShape(g))]:[h])).values()),this.initialIds=new Set(this.initialShapes.map(h=>h.id)),this.bindingsToDelete=[],Object.values(c.bindings).filter(h=>this.initialIds.has(h.fromId)||this.initialIds.has(h.toId)).forEach(h=>{this.initialIds.has(h.fromId)&&(this.initialIds.has(h.toId)||this.bindingsToDelete.push(h))}),this.initialParentChildren={},this.initialShapes.map(h=>h.parentId).filter(h=>h!==c.id).forEach(h=>{this.initialParentChildren[h]=this.app.getShape(h).children}),this.initialCommonBounds=H.getCommonBounds(this.initialShapes.map(z.getRotatedBounds)),this.app.rotationInfo.selectedIds=[...this.app.selectedIds]}},q6=class extends pr{constructor(e){super(e),m(this,"type","draw"),m(this,"performanceMode"),m(this,"status","creating"),m(this,"isLocked"),m(this,"lockedDirection"),m(this,"erasedShapes",new Set),m(this,"erasedBindings",new Set),m(this,"initialSelectedShapes"),m(this,"erasableShapes"),m(this,"prevPoint"),m(this,"start",()=>{}),m(this,"update",()=>{const{page:n,shiftKey:o,originPoint:s,currentPoint:l}=this.app;if(o){if(!this.isLocked&&L.dist(s,l)>4){if(!this.lockedDirection){const h=L.sub(l,s);this.lockedDirection=h[0]>h[1]?"horizontal":"vertical"}this.isLocked=!0}}else this.isLocked&&(this.isLocked=!1);this.isLocked&&(this.lockedDirection==="vertical"?l[0]=s[0]:l[1]=s[1]);const c=L.toFixed(L.add(s,L.sub(l,s))),d=new Set([]);this.erasableShapes.forEach(h=>{if(!this.erasedShapes.has(h)&&this.app.getShapeUtil(h).hitTestLineSegment(h,this.prevPoint,c)&&(this.erasedShapes.add(h),d.add(h.id),h.children!==void 0))for(const g of h.children)this.erasedShapes.add(this.app.getShape(g)),d.add(g)}),Object.values(n.bindings).forEach(h=>{for(const g of[h.toId,h.fromId])d.has(g)&&this.erasedBindings.add(h)}),this.erasedShapes.forEach(h=>{this.app.getShape(h.id)||(this.erasedShapes.delete(h),this.erasableShapes.delete(h),d.delete(h.id))});const p=Array.from(this.erasedShapes.values());return this.prevPoint=c,{document:{pages:{[n.id]:{shapes:Object.fromEntries(p.map(h=>[h.id,{isGhost:!0}]))}}}}}),m(this,"cancel",()=>{const{page:n}=this.app;this.erasedShapes.forEach(s=>{this.app.getShape(s.id)||(this.erasedShapes.delete(s),this.erasableShapes.delete(s))});const o=Array.from(this.erasedShapes.values());return{document:{pages:{[n.id]:{shapes:Object.fromEntries(o.map(s=>[s.id,{isGhost:!1}]))}},pageStates:{[n.id]:{selectedIds:this.initialSelectedShapes.map(s=>s.id)}}}}}),m(this,"complete",()=>{const{page:n}=this.app;this.erasedShapes.forEach(h=>{this.app.getShape(h.id)||(this.erasedShapes.delete(h),this.erasableShapes.delete(h))}),this.erasedBindings.forEach(h=>{this.app.getBinding(h.id)||this.erasedBindings.delete(h)});const o=Array.from(this.erasedShapes.values()),s=Array.from(this.erasedBindings.values()),l=o.map(h=>h.id),c=s.map(h=>h.id),d={shapes:Object.fromEntries(o.map(h=>[h.id,h])),bindings:Object.fromEntries(s.map(h=>[h.id,h]))},p={shapes:Object.fromEntries(o.map(h=>[h.id,void 0])),bindings:Object.fromEntries(s.map(h=>[h.id,void 0]))};return this.app.shapes.forEach(h=>{h.handles&&!p.shapes[h.id]&&Object.values(h.handles).forEach(g=>{var v,w;g.bindingId&&c.includes(g.bindingId)&&(d.shapes[h.id]=U(k({},d.shapes[h.id]),{handles:U(k({},(v=d.shapes[h.id])==null?void 0:v.handles),{[g.id]:g})}),l.includes(h.id)||(p.shapes[h.id]=U(k({},p.shapes[h.id]),{handles:U(k({},(w=p.shapes[h.id])==null?void 0:w.handles),{[g.id]:U(k({},g),{bindingId:void 0})})})))})}),{id:"erase",before:{document:{pages:{[n.id]:d},pageStates:{[n.id]:{selectedIds:this.initialSelectedShapes.filter(h=>!!this.app.getShape(h.id)).map(h=>h.id)}}}},after:{document:{pages:{[n.id]:p},pageStates:{[n.id]:{selectedIds:this.initialSelectedShapes.filter(h=>!!this.app.getShape(h.id)).filter(h=>!l.includes(h.id)).map(h=>h.id)}}}}}}),this.prevPoint=[...e.originPoint],this.initialSelectedShapes=this.app.selectedIds.map(n=>this.app.getShape(n)),this.erasableShapes=new Set(this.app.shapes.filter(n=>!n.isLocked))}},J6=class extends pr{constructor(e,n){super(e),m(this,"type","grid"),m(this,"performanceMode"),m(this,"status","translating"),m(this,"shape"),m(this,"bounds"),m(this,"initialSelectedIds"),m(this,"initialSiblings"),m(this,"grid",{}),m(this,"columns",1),m(this,"rows",1),m(this,"isCopying",!1),m(this,"start",()=>{}),m(this,"update",()=>{const{currentPageId:s,altKey:l,shiftKey:c,currentPoint:d}=this.app,p={},h={},g=H.getBoundsCenter(this.bounds),v=L.sub(d,g);c&&(Math.abs(v[0])<Math.abs(v[1])?v[0]=0:v[1]=0);const w=this.bounds.width+32,x=this.bounds.height+32,y=Math.ceil(v[0]/w),E=Math.ceil(v[1]/x),R=Math.min(y,0),P=Math.min(E,0),$=Math.max(y,1),I=Math.max(E,1),B=new Set,j=l;j!==this.isCopying&&(Object.values(this.grid).filter(T=>T!==this.shape.id).forEach(T=>p[T]=void 0),this.grid={"0_0":this.shape.id},this.isCopying=j);for(let T=R;T<$;T++)for(let D=P;D<I;D++){const A=`${T}_${D}`;if(B.add(A),this.grid[A]||T===0&&D===0)continue;const X=this.getClone(L.add(this.shape.point,[T*w,D*x]),j);p[X.id]=X,this.grid[A]=X.id}if(Object.entries(this.grid).forEach(([T,D])=>{B.has(T)||(p[D]=void 0,delete this.grid[T])}),Object.values(p).length!==0)return this.initialSiblings&&(p[this.shape.parentId]={children:[...this.initialSiblings,...Object.values(this.grid)]}),{document:{pages:{[s]:{shapes:p}},pageStates:{[s]:h}}}}),m(this,"cancel",()=>{const{currentPageId:s}=this.app,l={};return Object.values(this.grid).forEach(c=>{l[c]=void 0}),l[this.shape.id]=U(k({},l[this.shape.id]),{point:this.shape.point}),this.initialSiblings&&(l[this.shape.parentId]={children:[...this.initialSiblings,this.shape.id]}),{document:{pages:{[s]:{shapes:l}},pageStates:{[s]:{selectedIds:[this.shape.id]}}}}}),m(this,"complete",()=>{const{currentPageId:s}=this.app,l={},c={},d=[];if(Object.values(this.grid).forEach(p=>{l[p]=void 0,c[p]=this.app.getShape(p),d.push(p)}),l[this.shape.id]=this.shape,this.initialSiblings&&(l[this.shape.parentId]={children:[...this.initialSiblings,this.shape.id]},c[this.shape.parentId]={children:[...this.initialSiblings,...Object.values(this.grid)]}),d.length!==1)return{id:"grid",before:{document:{pages:{[s]:{shapes:l}},pageStates:{[s]:{selectedIds:[],hoveredId:void 0}}}},after:{document:{pages:{[s]:{shapes:c}},pageStates:{[s]:{selectedIds:d,hoveredId:void 0}}}}}}),m(this,"getClone",(s,l)=>{const c=U(k({},this.shape),{id:H.uniqueId(),point:s});return l||c.type==="sticky"&&(c.text=""),c});var o;this.shape=this.app.getShape(n),this.grid["0_0"]=this.shape.id,this.bounds=this.app.getShapeBounds(n),this.initialSelectedIds=[...this.app.selectedIds],this.shape.parentId!==this.app.currentPageId&&(this.initialSiblings=(o=this.app.getShape(this.shape.parentId).children)==null?void 0:o.filter(s=>s!==this.shape.id))}},Q6={arrow:W6,brush:F6,draw:N6,erase:q6,handle:U6,rotate:K6,transform:X6,transformSingle:G6,translate:Y6,grid:J6},ef=e=>Q6[e],gr=class extends k8{constructor(e){super(),this.app=e,m(this,"type","select"),m(this,"previous"),m(this,"status","idle"),m(this,"setStatus",n=>{this.status=n,this.app.setStatus(this.status)}),m(this,"onEnter",()=>{this.setStatus("idle")}),m(this,"onExit",()=>{this.setStatus("idle")}),m(this,"onCancel",()=>{this.status==="idle"?this.app.selectTool("select"):this.setStatus("idle"),this.app.cancelSession()}),m(this,"getNextChildIndex",()=>{const{shapes:n,appState:{currentPageId:o}}=this.app;return n.length===0?1:n.filter(s=>s.parentId===o).sort((s,l)=>l.childIndex-s.childIndex)[0].childIndex+1}),m(this,"onPinchStart",()=>{this.app.cancelSession(),this.setStatus("pinching")}),m(this,"onPinchEnd",()=>{H.isMobileSafari()&&this.app.undoSelect(),this.setStatus("idle")}),m(this,"onPinch",(n,o)=>{var s;this.status==="pinching"&&(isNaN(n.delta[0])||isNaN(n.delta[1])||(this.app.pinchZoom(n.point,n.delta,n.delta[2]),(s=this.onPointerMove)==null||s.call(this,n,o)))}),m(this,"onKeyDown",n=>{if(n==="Escape"){this.onCancel();return}if(n==="Meta"||n==="Control"||n==="Alt"){this.app.updateSession();return}}),m(this,"onKeyUp",n=>{if(n==="Meta"||n==="Control"||n==="Alt"){this.app.updateSession();return}}),m(this,"onPointerMove",()=>{this.status==="creating"&&this.app.updateSession()}),m(this,"onPointerUp",()=>{if(this.status==="creating"){this.app.completeSession();const{isToolLocked:n}=this.app.appState;n||this.app.selectTool("select")}this.setStatus("idle")})}},M9=class extends gr{constructor(){super(...arguments),m(this,"type","select"),m(this,"pointedId"),m(this,"selectedGroupId"),m(this,"pointedHandleId"),m(this,"pointedBoundsHandle"),m(this,"pointedLinkHandleId"),m(this,"onEnter",()=>{this.setStatus("idle")}),m(this,"onExit",()=>{this.setStatus("idle")}),m(this,"clonePaint",e=>{if(this.app.selectedIds.length===0)return;const n=this.app.selectedIds.map(h=>this.app.getShape(h)),o=H.expandBounds(H.getCommonBounds(n.map(z.getBounds)),16),s=H.getBoundsCenter(o),l=[o.width,o.height],c=[s[0]+l[0]*Math.floor((e[0]+l[0]/2-s[0])/l[0]),s[1]+l[1]*Math.floor((e[1]+l[1]/2-s[1])/l[1])],d=H.centerBounds(o,c);this.app.shapes.some(h=>z.getShapeUtil(h).hitTestBounds(h,d))||this.app.duplicate(this.app.selectedIds,c)}),m(this,"getShapeClone",(e,n)=>{const o=this.app.getShape(e),s=z.getShapeUtil(o);if(s.canClone){const l=s.getBounds(o),c=s.getCenter(o);let d={top:[l.minX,l.minY-(l.height+V1)],right:[l.maxX+V1,l.minY],bottom:[l.minX,l.maxY+V1],left:[l.minX-(l.width+V1),l.minY],topLeft:[l.minX-(l.width+V1),l.minY-(l.height+V1)],topRight:[l.maxX+V1,l.minY-(l.height+V1)],bottomLeft:[l.minX-(l.width+V1),l.maxY+V1],bottomRight:[l.maxX+V1,l.maxY+V1]}[n];if(o.rotation!==0){const g=J.add(d,[l.width/2,l.height/2]),v=J.rotWith(g,c,o.rotation||0);d=J.sub(v,[l.width/2,l.height/2])}const p=H.uniqueId(),h=U(k({},o),{id:p,point:d});return h.type==="sticky"&&(h.text=""),h}}),m(this,"onCancel",()=>{this.app.pageState.editingId?this.app.setEditingId():this.selectNone(),this.app.cancelSession(),this.setStatus("idle")}),m(this,"onKeyDown",(e,n,o)=>{switch(e){case"Escape":{this.onCancel();break}case"Tab":{if(!this.app.pageState.editingId&&this.status==="idle"&&this.app.selectedIds.length===1){const[s]=this.app.selectedIds,l=this.getShapeClone(s,"right");l&&(this.app.createShapes(l),this.setStatus("idle"),l.type==="sticky"&&(this.app.select(l.id),this.app.setEditingId(l.id)))}break}case"Meta":case"Control":case"Alt":{this.app.updateSession();break}case"Enter":{const{pageState:s}=this.app;s.selectedIds.length===1&&!s.editingId&&(this.app.setEditingId(s.selectedIds[0]),o.preventDefault())}}}),m(this,"onKeyUp",(e,n)=>{if(this.status==="clonePainting"&&!(n.altKey&&n.shiftKey)){this.setStatus("idle");return}if(e==="Meta"||e==="Control"||e==="Alt"){this.app.updateSession();return}}),m(this,"onPointerMove",(e,n)=>{const{originPoint:o,currentPoint:s}=this.app;switch(this.status){case"pointingBoundsHandle":{if(!this.pointedBoundsHandle)throw Error("No pointed bounds handle");if(J.dist(o,s)>co){if(this.pointedBoundsHandle==="rotate")this.setStatus("rotating"),this.app.startSession("rotate");else if(this.pointedBoundsHandle==="center"||this.pointedBoundsHandle==="left"||this.pointedBoundsHandle==="right")this.setStatus("translating"),this.app.startSession("translate",!1,this.pointedBoundsHandle);else{this.setStatus("transforming");const l=this.app.selectedIds.flatMap(c=>z.getDocumentBranch(this.app.state,c,this.app.currentPageId));l.length===1?this.app.startSession("transformSingle",l[0],this.pointedBoundsHandle):this.app.startSession("transform",this.pointedBoundsHandle)}this.app.updateSession()}break}case"pointingCanvas":{J.dist(o,s)>co&&(this.app.startSession("brush"),this.setStatus("brushing"));break}case"pointingClone":{J.dist(o,s)>co&&(this.setStatus("translatingClone"),this.app.startSession("translate"),this.app.updateSession());break}case"pointingBounds":{J.dist(o,s)>co&&(this.setStatus("translating"),this.app.startSession("translate"),this.app.updateSession());break}case"pointingHandle":{if(!this.pointedHandleId)throw Error("No pointed handle");if(J.dist(o,s)>co){this.setStatus("translatingHandle");const l=this.app.getShape(this.app.selectedIds[0]);l&&(this.pointedHandleId==="bend"?(this.app.startSession("handle",l.id,this.pointedHandleId),this.app.updateSession()):(this.app.startSession("arrow",l.id,this.pointedHandleId,!1),this.app.updateSession()))}break}case"clonePainting":{this.clonePaint(s);break}default:if(this.app.session){this.app.updateSession();break}}}),m(this,"onPointerDown",(e,n)=>{if(e.target==="canvas"&&this.status==="idle"){const{currentPoint:o}=this.app;if(e.spaceKey&&n.buttons===1)return;if(this.status==="idle"&&e.altKey&&e.shiftKey){this.setStatus("clonePainting"),this.clonePaint(o);return}if(!e.shiftKey){if(this.app.onShapeBlur(),e.altKey&&this.app.selectedIds.length>0){this.app.duplicate(this.app.selectedIds,o);return}this.selectNone()}this.setStatus("pointingCanvas")}}),m(this,"onPointerUp",e=>{if(this.status==="translatingClone"||this.status==="pointingClone"){this.pointedId&&(this.app.completeSession(),this.app.setEditingId(this.pointedId)),this.setStatus("idle"),this.pointedId=void 0;return}if(this.status==="pointingBounds"){if(e.target==="bounds")this.selectNone();else if(this.app.isSelected(e.target))e.shiftKey?this.pointedId!==e.target&&this.deselect(e.target):this.pointedId!==e.target&&this.app.selectedIds.length>1&&this.select(e.target);else if(this.pointedId===e.target){if(this.app.getShape(e.target).isLocked)return;e.shiftKey?this.pushSelect(e.target):this.select(e.target)}}this.app.completeSession(),this.setStatus("idle"),this.pointedBoundsHandle=void 0,this.pointedHandleId=void 0,this.pointedId=void 0}),m(this,"onDoubleClickCanvas",()=>{}),m(this,"onPointShape",(e,n)=>{if(e.spaceKey&&n.buttons===1||this.app.getShape(e.target).isLocked)return;const{editingId:o,hoveredId:s}=this.app.pageState;if(o&&e.target!==o&&this.app.onShapeBlur(),(this.status==="idle"||this.status==="pointingBounds")&&e.metaKey&&e.shiftKey&&s){this.pointedId=s,this.app.isSelected(s)?this.deselect(s):(this.pushSelect(s),this.setStatus("pointingBounds"));return}if(this.status==="pointingBounds"){const{parentId:l}=this.app.getShape(e.target);this.pointedId=l===this.app.currentPageId?e.target:l;return}if(this.status==="idle"){if(this.setStatus("pointingBounds"),e.metaKey){e.shiftKey||this.selectNone(),this.app.startSession("brush"),this.setStatus("brushing");return}let l;const{parentId:c}=this.app.getShape(e.target);c===this.app.currentPageId?(l=e.target,this.selectedGroupId=void 0):c===this.selectedGroupId?l=e.target:(l=c,this.selectedGroupId=void 0),this.app.isSelected(l)||(this.pointedId=l,e.shiftKey?this.pushSelect(l):this.select(l))}}),m(this,"onDoubleClickShape",e=>{const n=this.app.getShape(e.target);if(n.isLocked){this.app.select(e.target);return}z.getShapeUtil(n.type).canEdit&&(n.parentId===this.app.currentPageId||n.parentId===this.selectedGroupId)&&this.app.setEditingId(e.target),n.parentId!==this.app.currentPageId&&(this.selectedGroupId=n.parentId),this.app.select(e.target)}),m(this,"onRightPointShape",e=>{this.app.isSelected(e.target)||this.app.select(e.target)}),m(this,"onHoverShape",e=>{this.app.setHoveredId(e.target)}),m(this,"onUnhoverShape",e=>{const{currentPageId:n}=this.app;requestAnimationFrame(()=>{n===this.app.currentPageId&&this.app.pageState.hoveredId===e.target&&this.app.setHoveredId(void 0)})}),m(this,"onPointBounds",e=>{if(e.metaKey){e.shiftKey||this.selectNone(),this.app.startSession("brush"),this.setStatus("brushing");return}this.setStatus("pointingBounds")}),m(this,"onRightPointBounds",(e,n)=>{n.stopPropagation()}),m(this,"onReleaseBounds",()=>{(this.status==="translating"||this.status==="brushing")&&this.app.completeSession(),this.setStatus("idle")}),m(this,"onPointBoundsHandle",e=>{this.pointedBoundsHandle=e.target,this.setStatus("pointingBoundsHandle")}),m(this,"onDoubleClickBoundsHandle",e=>{switch(e.target){case"center":case"left":case"right":{this.app.select(...z.getLinkedShapeIds(this.app.state,this.app.currentPageId,e.target,e.shiftKey));break}default:if(this.app.selectedIds.length===1){this.app.resetBounds(this.app.selectedIds);const n=this.app.getShape(this.app.selectedIds[0]);"label"in n&&this.app.setEditingId(n.id)}}}),m(this,"onReleaseBoundsHandle",()=>{this.setStatus("idle")}),m(this,"onPointHandle",e=>{this.pointedHandleId=e.target,this.setStatus("pointingHandle")}),m(this,"onDoubleClickHandle",e=>{if(e.target==="bend"){const{selectedIds:n}=this.app;if(n.length!==1)return;const o=this.app.getShape(n[0]);z.getShapeUtil(o.type).canEdit&&(o.parentId===this.app.currentPageId||o.parentId===this.selectedGroupId)&&this.app.setEditingId(o.id);return}this.app.toggleDecoration(e.target)}),m(this,"onReleaseHandle",()=>{this.setStatus("idle")}),m(this,"onShapeClone",e=>{const n=this.app.selectedIds[0],o=this.getShapeClone(n,e.target);e.target==="left"||e.target==="right"||e.target==="top"||e.target==="bottom"?o&&(this.app.createShapes(o),this.pointedId=o.id,this.setStatus("pointingClone")):(this.setStatus("gridCloning"),this.app.startSession("grid",n))})}deselect(e){this.app.select(...this.app.selectedIds.filter(n=>n!==e))}select(e){this.app.select(e)}pushSelect(e){const n=this.app.getShape(e);this.app.select(...this.app.selectedIds.filter(o=>o!==n.parentId),e)}selectNone(){this.app.selectNone()}},P9=class extends gr{constructor(){super(...arguments),m(this,"type","erase"),m(this,"status","idle"),m(this,"onPointerDown",()=>{this.status==="idle"&&this.setStatus("pointing")}),m(this,"onPointerMove",e=>{switch(this.status){case"pointing":{J.dist(e.origin,e.point)>co&&(this.app.startSession("erase"),this.app.updateSession(),this.setStatus("erasing"));break}case"erasing":this.app.updateSession()}}),m(this,"onPointerUp",()=>{switch(this.status){case"pointing":{const e=this.app.shapes.filter(n=>!n.isLocked).filter(n=>this.app.getShapeUtil(n).hitTestPoint(n,this.app.currentPoint)).flatMap(n=>n.children?[n.id,...n.children]:n.id);this.app.delete(e);break}case"erasing":this.app.completeSession()}this.setStatus("idle")}),m(this,"onCancel",()=>{this.status==="idle"?this.previous?this.app.selectTool(this.previous):this.app.selectTool("select"):this.setStatus("idle"),this.app.cancelSession()})}},$9=class extends gr{constructor(){super(...arguments),m(this,"type","text"),m(this,"stopEditingShape",()=>{this.setStatus("idle"),this.app.appState.isToolLocked||this.app.selectTool("select")}),m(this,"onKeyUp",()=>{}),m(this,"onKeyDown",()=>{}),m(this,"onPointerDown",()=>{if(this.status==="creating"){this.stopEditingShape();return}if(this.status==="idle"){const{currentPoint:e,currentGrid:n,settings:{showGrid:o}}=this.app;this.app.createTextShapeAtPoint(o?J.snap(e,n):e),this.setStatus("creating");return}}),m(this,"onPointerUp",()=>{}),m(this,"onPointShape",e=>{const n=this.app.getShape(e.target);n.type==="text"&&(this.setStatus("idle"),this.app.setEditingId(n.id))}),m(this,"onShapeBlur",()=>{this.stopEditingShape()})}},H9=class extends gr{constructor(){super(...arguments),m(this,"type","draw"),m(this,"lastShapeId"),m(this,"onEnter",()=>{this.lastShapeId=void 0}),m(this,"onCancel",()=>{switch(this.status){case"idle":{this.app.selectTool("select");break}default:{this.setStatus("idle");break}}this.app.cancelSession()}),m(this,"onPointerDown",e=>{if(this.status!=="idle")return;const{currentPoint:n,appState:{currentPageId:o,currentStyle:s}}=this.app,l=this.lastShapeId&&this.app.getShape(this.lastShapeId);if(e.shiftKey&&l)this.app.startSession("draw",l.id),this.setStatus("extending");else{const c=this.getNextChildIndex(),d=H.uniqueId(),p=y9.create({id:d,parentId:o,childIndex:c,point:n,style:k({},s)});this.lastShapeId=d,this.app.patchCreate([p]),this.app.startSession("draw",d),this.setStatus("creating")}}),m(this,"onPointerMove",()=>{switch(this.status){case"extending":case"creating":this.app.updateSession()}}),m(this,"onPointerUp",()=>{this.app.completeSession(),this.setStatus("idle")})}},k9=class extends gr{constructor(){super(...arguments),m(this,"type","ellipse"),m(this,"onPointerDown",()=>{if(this.status!=="idle")return;const{currentPoint:e,currentGrid:n,settings:{showGrid:o},appState:{currentPageId:s,currentStyle:l}}=this.app,c=this.getNextChildIndex(),d=H.uniqueId(),p=x9.create({id:d,parentId:s,childIndex:c,point:o?J.snap(e,n):e,style:k({},l)});this.app.patchCreate([p]),this.app.startSession("transformSingle",p.id,kr.BottomRight,!0),this.setStatus("creating")})}},O9=class extends gr{constructor(){super(...arguments),m(this,"type","rectangle"),m(this,"onPointerDown",()=>{if(this.status!=="idle")return;const{currentPoint:e,currentGrid:n,settings:{showGrid:o},appState:{currentPageId:s,currentStyle:l}}=this.app,c=this.getNextChildIndex(),d=H.uniqueId(),p=w9.create({id:d,parentId:s,childIndex:c,point:o?J.snap(e,n):e,style:k({},l)});this.app.patchCreate([p]),this.app.startSession("transformSingle",p.id,kr.BottomRight,!0),this.setStatus("creating")})}},T9=class extends gr{constructor(){super(...arguments),m(this,"type","triangle"),m(this,"onPointerDown",()=>{if(this.status!=="idle")return;const{currentPoint:e,currentGrid:n,settings:{showGrid:o},appState:{currentPageId:s,currentStyle:l}}=this.app,c=this.getNextChildIndex(),d=H.uniqueId(),p=b9.create({id:d,parentId:s,childIndex:c,point:o?J.snap(e,n):e,style:k({},l)});this.app.patchCreate([p]),this.app.startSession("transformSingle",p.id,kr.BottomRight,!0),this.setStatus("creating")})}},B9=class extends gr{constructor(){super(...arguments),m(this,"type","line"),m(this,"onPointerDown",()=>{if(this.status!=="idle")return;const{currentPoint:e,currentGrid:n,settings:{showGrid:o},appState:{currentPageId:s,currentStyle:l}}=this.app,c=this.getNextChildIndex(),d=H.uniqueId(),p=qa.create({id:d,parentId:s,childIndex:c,point:o?J.snap(e,n):e,decorations:{start:void 0,end:void 0},style:k({},l)});this.app.patchCreate([p]),this.app.startSession("arrow",p.id,"end",!0),this.setStatus("creating")})}},V9=class extends gr{constructor(){super(...arguments),m(this,"type","arrow"),m(this,"onPointerDown",()=>{if(this.status!=="idle")return;const{currentPoint:e,currentGrid:n,settings:{showGrid:o},appState:{currentPageId:s,currentStyle:l}}=this.app,c=this.getNextChildIndex(),d=H.uniqueId(),p=qa.create({id:d,parentId:s,childIndex:c,point:o?J.snap(e,n):e,style:k({},l)});this.app.patchCreate([p]),this.app.startSession("arrow",p.id,"end",!0),this.setStatus("creating")})}},j9=class extends gr{constructor(){super(...arguments),m(this,"type","sticky"),m(this,"shapeId"),m(this,"onPointerDown",()=>{if(this.status==="creating"){this.setStatus("idle"),this.app.appState.isToolLocked||this.app.selectTool("select");return}if(this.status==="idle"){const{currentPoint:e,currentGrid:n,settings:{showGrid:o},appState:{currentPageId:s,currentStyle:l}}=this.app,c=this.getNextChildIndex(),d=H.uniqueId();this.shapeId=d;const p=Ja.create({id:d,parentId:s,childIndex:c,point:o?J.snap(e,n):e,style:k({},l)}),h=Ja.getBounds(p);p.point=J.sub(p.point,[h.width/2,h.height/2]),this.app.createShapes(p),this.app.startSession("translate"),this.setStatus("creating")}}),m(this,"onPointerUp",()=>{this.status==="creating"&&(this.setStatus("idle"),this.app.completeSession(),this.app.selectTool("select"),this.app.setEditingId(this.shapeId))})}},tf=class{constructor(e,n,o,s){m(this,"_idbId"),m(this,"initialState"),m(this,"store"),m(this,"pointer",-1),m(this,"_state"),m(this,"_status","loading"),m(this,"stack",[]),m(this,"_snapshot"),m(this,"useStore"),m(this,"ready"),m(this,"isPaused",!1),m(this,"persist",l=>{if(this._status==="ready"&&(this.onPersist&&this.onPersist(this._state,l),this._idbId))return Yi(this._idbId,this._state).catch(c=>console.error(c))}),m(this,"applyPatch",(l,c)=>{const d=this._state,p=H.deepMerge(this._state,l),h=this.cleanup(p,d,l,c);return this.onStateWillChange&&this.onStateWillChange(h,c),this._state=h,this.store.setState(this._state,!0),this.onStateDidChange&&this.onStateDidChange(this._state,c),this}),m(this,"cleanup",(l,c,d,p)=>l),m(this,"onStateWillChange"),m(this,"onStateDidChange"),m(this,"patchState",(l,c)=>(this.applyPatch(l,c),this.onPatch&&this.onPatch(this._state,c),this)),m(this,"replaceState",(l,c)=>{const d=this.cleanup(l,this._state,l,c);return this.onStateWillChange&&this.onStateWillChange(d,"replace"),this._state=d,this.store.setState(this._state,!0),this.onStateDidChange&&this.onStateDidChange(this._state,"replace"),this}),m(this,"setState",(l,c=l.id)=>(this.pointer<this.stack.length-1&&(this.stack=this.stack.slice(0,this.pointer+1)),this.stack.push(U(k({},l),{id:c})),this.pointer=this.stack.length-1,this.applyPatch(l.after,c),this.onCommand&&this.onCommand(this._state,c),this.persist(c),this)),m(this,"onReady"),m(this,"onPatch"),m(this,"onCommand"),m(this,"onPersist"),m(this,"onReplace"),m(this,"onReset"),m(this,"onResetHistory"),m(this,"onUndo"),m(this,"onRedo"),m(this,"reset",()=>(this.onStateWillChange&&this.onStateWillChange(this.initialState,"reset"),this._state=this.initialState,this.store.setState(this._state,!0),this.resetHistory(),this.persist("reset"),this.onStateDidChange&&this.onStateDidChange(this._state,"reset"),this.onReset&&this.onReset(this._state),this)),m(this,"replaceHistory",(l,c=l.length-1)=>(this.stack=l,this.pointer=c,this.onReplace&&this.onReplace(this._state),this)),m(this,"resetHistory",()=>(this.stack=[],this.pointer=-1,this.onResetHistory&&this.onResetHistory(this._state),this)),m(this,"undo",()=>{if(!this.isPaused){if(!this.canUndo)return this;const l=this.stack[this.pointer];this.pointer--,this.applyPatch(l.before,"undo"),this.persist("undo")}return this.onUndo&&this.onUndo(this._state),this}),m(this,"redo",()=>{if(!this.isPaused){if(!this.canRedo)return this;this.pointer++;const l=this.stack[this.pointer];this.applyPatch(l.after,"redo"),this.persist("undo")}return this.onRedo&&this.onRedo(this._state),this}),m(this,"setSnapshot",()=>(this._snapshot=k({},this._state),this)),m(this,"forceUpdate",()=>{this.store.setState(this._state,!0)}),this._idbId=n,this._state=hr(e),this._snapshot=hr(e),this.initialState=hr(e),this.store=J7(()=>this._state),this.useStore=(0,Q7.Z)(this.store),this.ready=new Promise(l=>{let c="none";this._idbId?(c="restored",Ea(this._idbId).then(d=>Fe(this,null,function*(){if(d){let p=d;if(o){const g=yield Ea(n+"_version");g&&g<o&&(p=s?s(d,e,g):e,c="migrated")}yield Yi(n+"_version",o||-1);const h=this._state.appState.isEmptyCanvas;this._state=hr(p),this._snapshot=hr(p),this._state.appState.isEmptyCanvas=h,this.store.setState(this._state,!0)}else yield Yi(n+"_version",o||-1);this._status="ready",l(c)})).catch(d=>console.error(d))):(this._status="ready",l(c))}).then(l=>(this.onReady&&this.onReady(l),l))}pause(){this.isPaused=!0}resume(){this.isPaused=!1}get canUndo(){return this.pointer>-1}get canRedo(){return this.pointer<this.stack.length-1}get state(){return this._state}get status(){return this._status}get snapshot(){return this._snapshot}},el=H.uniqueId(),i1=class extends tf{constructor(e,n={}){super(i1.defaultState,e,i1.version,(o,s,l)=>U(k({},s),{document:Jr(U(k(k({},s.document),o.document),{version:l}),i1.version)})),m(this,"callbacks",{}),m(this,"tools",{select:new M9(this),erase:new P9(this),text:new $9(this),draw:new H9(this),ellipse:new k9(this),rectangle:new O9(this),triangle:new T9(this),line:new B9(this),arrow:new V9(this),sticky:new j9(this)}),m(this,"currentTool",this.tools.select),m(this,"session"),m(this,"readOnly",!1),m(this,"isDirty",!1),m(this,"isCreating",!1),m(this,"originPoint",[0,0]),m(this,"currentPoint",[0,0]),m(this,"previousPoint",[0,0]),m(this,"shiftKey",!1),m(this,"altKey",!1),m(this,"metaKey",!1),m(this,"ctrlKey",!1),m(this,"spaceKey",!1),m(this,"isPointing",!1),m(this,"isForcePanning",!1),m(this,"editingStartTime",-1),m(this,"fileSystemHandle",null),m(this,"viewport",H.getBoundsFromPoints([[0,0],[100,100]])),m(this,"rendererBounds",H.getBoundsFromPoints([[0,0],[100,100]])),m(this,"selectHistory",{stack:[[]],pointer:0}),m(this,"clipboard"),m(this,"rotationInfo",{selectedIds:[],center:[0,0]}),m(this,"pasteInfo",{center:[0,0],offset:[0,0]}),m(this,"onReady",()=>{var o,s;this.loadDocument(this.document),q8().then(l=>{this.fileSystemHandle=l});try{this.patchState({appState:{status:"idle"},document:Jr(this.document,i1.version)})}catch(l){console.error("The data appears to be corrupted. Resetting!",l),localStorage.setItem(this.document.id+"_corrupted",JSON.stringify(this.document)),this.patchState(U(k({},i1.defaultState),{appState:U(k({},i1.defaultState.appState),{status:"idle"})}))}(s=(o=this.callbacks).onMount)==null||s.call(o,this)}),m(this,"cleanup",(o,s)=>{var l;const c=k({},o);c.document!==s.document&&Object.entries(c.document.pages).forEach(([h,g])=>{if(g===void 0){delete c.document.pages[h],delete c.document.pageStates[h];return}const v=s.document.pages[h],w={};if(!v||g.shapes!==v.shapes||g.bindings!==v.bindings){g.shapes=k({},g.shapes),g.bindings=k({},g.bindings);const y=new Set;Object.entries(g.shapes).forEach(([P,$])=>{var I;let B;$?B=$.parentId:(B=(I=v?.shapes[P])==null?void 0:I.parentId,delete g.shapes[P]),g.id===c.appState.currentPageId&&v?.shapes[P]!==$&&(w[P]=$),B&&B!==h&&g.shapes[B]!==void 0&&y.add(g.shapes[B])}),Object.keys(g.bindings).forEach(P=>{g.bindings[P]||delete g.bindings[P]}),c.document.pages[h]=g;const E=z.getRelatedBindings(c,Object.keys(w),h),R=new Set;E.forEach(P=>{if(!g.bindings[P.id])return;const $=g.shapes[P.toId],I=g.shapes[P.fromId];if(!($&&I)){delete c.document.pages[h].bindings[P.id];return}if(R.has(I))return;const B=z.updateArrowBindings(g,I);if(R.add(I),B){const j=k(k({},I),B);g.shapes[I.id]=j}}),y.forEach(P=>{if(!P)throw Error("no group!");const $=P.children.filter(B=>g.shapes[B]!==void 0),I=H.getCommonBounds($.map(B=>g.shapes[B]).filter(Boolean).map(B=>z.getRotatedBounds(B)));g.shapes[P.id]=U(k({},P),{point:[I.minX,I.minY],size:[I.width,I.height],children:$})})}const x=k({},c.document.pageStates[h]);x.brush||delete x.brush,x.hoveredId&&!g.shapes[x.hoveredId]&&delete x.hoveredId,x.bindingId&&!g.bindings[x.bindingId]&&(z.warn(`Could not find the binding of ${h}`),delete x.bindingId),x.editingId&&!g.shapes[x.editingId]&&(z.warn("Could not find the editing shape!"),delete x.editingId),c.document.pageStates[h]=x}),Object.keys((l=c.document.assets)!=null?l:{}).forEach(h=>{var g,v;(g=c.document.assets)!=null&&g[h]||(v=c.document.assets)==null||delete v[h]});const d=c.appState.currentPageId,p=c.document.pageStates[d];if(c.room&&c.room!==s.room){const h=U(k({},c.room),{users:k({},c.room.users)});s.room&&Object.values(s.room.users).filter(Boolean).forEach(g=>{h.users[g.id]===void 0&&delete h.users[g.id]}),c.room=h}return c.room&&(c.room.users[c.room.userId]=U(k({},c.room.users[c.room.userId]),{point:this.currentPoint,selectedIds:p.selectedIds})),this.readOnly&&(c.document.pages=s.document.pages),c}),m(this,"onPatch",(o,s)=>{var l,c;(c=(l=this.callbacks).onPatch)==null||c.call(l,this,s)}),m(this,"onCommand",(o,s)=>{var l,c;this.clearSelectHistory(),this.isDirty=!0,(c=(l=this.callbacks).onCommand)==null||c.call(l,this,s)}),m(this,"onReplace",()=>{this.clearSelectHistory(),this.isDirty=!1}),m(this,"onUndo",()=>{var o,s;this.rotationInfo.selectedIds=[...this.selectedIds],(s=(o=this.callbacks).onUndo)==null||s.call(o,this)}),m(this,"onRedo",()=>{var o,s;this.rotationInfo.selectedIds=[...this.selectedIds],(s=(o=this.callbacks).onRedo)==null||s.call(o,this)}),m(this,"onPersist",()=>{var o,s;this.callbacks.onChangePage&&this.broadcastPageChanges(),(s=(o=this.callbacks).onPersist)==null||s.call(o,this)}),m(this,"prevSelectedIds",this.selectedIds),m(this,"onStateDidChange",(o,s)=>{var l,c,d,p;(c=(l=this.callbacks).onChange)==null||c.call(l,this,s),this.room&&this.selectedIds!==this.prevSelectedIds&&((p=(d=this.callbacks).onChangePresence)==null||p.call(d,this,U(k({},this.room.users[this.room.userId]),{selectedIds:this.selectedIds})),this.prevSelectedIds=this.selectedIds)}),m(this,"justSent",!1),m(this,"prevShapes",this.page.shapes),m(this,"prevBindings",this.page.bindings),m(this,"prevAssets",this.document.assets),m(this,"broadcastPageChanges",()=>{var o,s;const l=new Set,c={},d={},p={};this.shapes.forEach(h=>{l.add(h.id),this.prevShapes[h.id]!==h&&(c[h.id]=h)}),Object.keys(this.prevShapes).filter(h=>!l.has(h)).forEach(h=>{c[h]=void 0}),this.bindings.forEach(h=>{l.add(h.id),this.prevBindings[h.id]!==h&&(d[h.id]=h)}),Object.keys(this.prevBindings).filter(h=>!l.has(h)).forEach(h=>{d[h]=void 0}),this.assets.forEach(h=>{l.add(h.id),this.prevAssets[h.id]!==h&&(p[h.id]=h)}),Object.keys(this.prevAssets).filter(h=>!l.has(h)).forEach(h=>{p[h]=void 0}),(Object.keys(d).length>0||Object.keys(c).length>0||Object.keys(p).length>0)&&(this.justSent=!0,(s=(o=this.callbacks).onChangePage)==null||s.call(o,this,c,d,p),this.prevShapes=this.page.shapes,this.prevBindings=this.page.bindings,this.prevAssets=this.document.assets)}),m(this,"getReservedContent",(o,s=this.currentPageId)=>{const{bindings:l}=this.document.pages[s],c={},d={},p=Object.values(l),h=new Map(p.map(E=>[E.toId,E])),g=new Map(p.map(E=>[E.fromId,E])),v=[h,g],w=[];this.session&&o.forEach(E=>w.push(E)),this.pageState.editingId&&w.push(this.pageState.editingId);const x=new Set(w),y=new Set;for(;w.length>0;){const E=w.pop();if(!E)break;if(y.has(E))continue;y.add(E);const R=this.getShape(E);c[E]=R,R.parentId!==s&&w.push(R.parentId),R.children&&w.push(...R.children),v.map(P=>P.get(R.id)).filter(Boolean).forEach(P=>{d[P.id]=P,w.push(P.toId,P.fromId)})}return{reservedShapes:c,reservedBindings:d,strongReservedShapeIds:x}}),m(this,"replacePageContent",(o,s,l,c=this.currentPageId)=>this.justSent?(this.justSent=!1,this):(this.useStore.setState(d=>{const{hoveredId:p,editingId:h,bindingId:g,selectedIds:v}=d.document.pageStates[c],w=[...v],x=h&&d.document.pages[this.currentPageId].shapes[h];x&&w.push(x.id);const{reservedShapes:y,reservedBindings:E,strongReservedShapeIds:R}=this.getReservedContent(w,this.currentPageId);Object.values(y).filter(A=>!("text"in A)).forEach(A=>{const X=o[A.id];if(!!X){if(!(A.type==="arrow"||R.has(A.id))){o[A.id]=X;return}"decorations"in X&&"decorations"in A&&(o[A.id]=U(k({},A),{decorations:X.decorations})),A.style=X.style}}),this.prevShapes=o,this.prevBindings=s,this.prevAssets=l;const P=k(k({},o),y);x&&(P[x.id]=x);const $=k(k({},s),E),I=k({},l),B=U(k({},d),{document:U(k({},d.document),{pages:{[c]:U(k({},d.document.pages[c]),{shapes:P,bindings:$})},assets:I,pageStates:U(k({},d.document.pageStates),{[c]:U(k({},d.document.pageStates[c]),{selectedIds:v.filter(A=>P[A]!==void 0),hoveredId:p?P[p]===void 0?void 0:p:void 0,editingId:h,bindingId:g?$[g]===void 0?void 0:g:void 0})})})}),j=B.document.pages[c],T=z.getRelatedBindings(B,Object.keys(P),c),D=new Set;return T.forEach(A=>{if(!j.bindings[A.id])return;const X=j.shapes[A.fromId];if(D.has(X))return;const ne=z.updateArrowBindings(j,X);if(D.add(X),ne){const he=k(k({},X),ne);j.shapes[X.id]=he}}),Object.values(P).forEach(A=>{if(A.type!=="group")return;const X=A.children.filter(he=>j.shapes[he]!==void 0),ne=H.getCommonBounds(X.map(he=>j.shapes[he]).filter(Boolean).map(he=>z.getRotatedBounds(he)));j.shapes[A.id]=U(k({},A),{point:[ne.minX,ne.minY],size:[ne.width,ne.height],children:X})}),this.state.document=B.document,B},!0),this)),m(this,"updateBounds",o=>{this.rendererBounds=o;const{point:s,zoom:l}=this.pageState.camera;this.updateViewport(s,l),!this.readOnly&&this.session&&this.session.update()}),m(this,"updateViewport",(o,s)=>{const{width:l,height:c}=this.rendererBounds,[d,p]=L.sub(L.div([0,0],s),o),[h,g]=L.sub(L.div([l,c],s),o);this.viewport={minX:d,minY:p,maxX:h,maxY:g,height:h-d,width:g-p}}),m(this,"setEditingId",o=>{this.readOnly||(this.editingStartTime=performance.now(),this.patchState({document:{pageStates:{[this.currentPageId]:{editingId:o}}}},"set_editing_id"))}),m(this,"setHoveredId",o=>{this.patchState({document:{pageStates:{[this.currentPageId]:{hoveredId:o}}}},"set_hovered_id")}),m(this,"setSetting",(o,s)=>this.session?this:(this.patchState({settings:{[o]:typeof s=="function"?s(this.settings[o]):s}},`settings:${o}`),this.persist(),this)),m(this,"toggleFocusMode",()=>this.session?this:(this.patchState({settings:{isFocusMode:!this.settings.isFocusMode}},"settings:toggled_focus_mode"),this.persist(),this)),m(this,"togglePenMode",()=>this.session?this:(this.patchState({settings:{isPenMode:!this.settings.isPenMode}},"settings:toggled_pen_mode"),this.persist(),this)),m(this,"toggleDarkMode",()=>this.session?this:(this.patchState({settings:{isDarkMode:!this.settings.isDarkMode}},"settings:toggled_dark_mode"),this.persist(),this)),m(this,"toggleZoomSnap",()=>this.session?this:(this.patchState({settings:{isZoomSnap:!this.settings.isZoomSnap}},"settings:toggled_zoom_snap"),this.persist(),this)),m(this,"toggleDebugMode",()=>this.session?this:(this.patchState({settings:{isDebugMode:!this.settings.isDebugMode}},"settings:toggled_debug"),this.persist(),this)),m(this,"setMenuOpen",o=>(this.patchState({appState:{isMenuOpen:o}},"ui:toggled_menu_opened"),this.persist(),this)),m(this,"setIsLoading",o=>(this.patchState({appState:{isLoading:o}},"ui:toggled_is_loading"),this.persist(),this)),m(this,"setDisableAssets",o=>(this.patchState({appState:{disableAssets:o}},"ui:toggled_disable_images"),this)),m(this,"toggleGrid",()=>this.session?this:(this.patchState({settings:{showGrid:!this.settings.showGrid}},"settings:toggled_grid"),this.persist(),this)),m(this,"selectTool",o=>{if(this.readOnly||this.session)return this;this.isPointing=!1;const s=this.tools[o];return s===this.currentTool?(this.patchState({appState:{isToolLocked:!1}}),this):(this.currentTool.onExit(),s.previous=this.currentTool.type,this.currentTool=s,this.currentTool.onEnter(),this.patchState({appState:{activeTool:o,isToolLocked:!1}},`selected_tool:${o}`))}),m(this,"toggleToolLock",()=>this.session?this:this.patchState({appState:{isToolLocked:!this.appState.isToolLocked}},"toggled_tool_lock")),m(this,"resetDocument",()=>this.session?this:(this.session=void 0,this.pasteInfo.offset=[0,0],this.currentTool=this.tools.select,this.resetHistory().clearSelectHistory().loadDocument(Jr(i1.defaultDocument,i1.version)).persist(),this)),m(this,"updateUsers",(o,s=!1)=>{this.patchState({room:{users:Object.fromEntries(o.map(l=>[l.id,l]))}},s?"room:self:update":"room:user:update")}),m(this,"removeUser",o=>{this.patchState({room:{users:{[o]:void 0}}})}),m(this,"mergeDocument",o=>{if(this.document.id!==o.id)return this.replaceState(U(k({},this.state),{appState:U(k({},this.appState),{currentPageId:Object.keys(o.pages)[0]}),document:Jr(o,i1.version)})),this;const s=k({},this.document.pageStates),l=U(k({},this.appState),{currentPageId:o.pages[this.currentPageId]?this.currentPageId:Object.keys(o.pages)[0],pages:Object.values(o.pages).map((d,p)=>({id:d.id,name:d.name,childIndex:d.childIndex||p}))});this.resetHistory(),Object.keys(this.document.pages).forEach(d=>{o.pages[d]||(d===this.appState.currentPageId&&(this.cancelSession(),this.selectNone()),s[d]=void 0)}),this.session&&this.selectedIds.filter(d=>!o.pages[this.currentPageId].shapes[d]).forEach(d=>o.pages[this.currentPageId].shapes[d]=this.page.shapes[d]),Object.entries(s).forEach(([d,p])=>{p.selectedIds=p.selectedIds.filter(h=>!!o.pages[d].shapes[h])});const{editingId:c}=this.pageState;return c&&(o.pages[this.currentPageId].shapes[c]=this.page.shapes[c],s[this.currentPageId].selectedIds=[c]),this.replaceState(U(k({},this.state),{appState:l,document:U(k({},Jr(o,i1.version)),{pageStates:s})}),"merge")}),m(this,"updateDocument",(o,s="updated_document")=>{const l=this.state,c=U(k({},l),{document:k({},l.document)});o.pages[this.currentPageId]||(c.appState=U(k({},l.appState),{currentPageId:Object.keys(o.pages)[0]}));let d=1;for(const p of Object.values(o.pages))p!==l.document.pages[p.id]&&(c.document.pages[p.id]=p,p.name||(c.document.pages[p.id].name=`Page ${d+1}`,d++));for(const p of Object.values(o.pageStates))if(p!==l.document.pageStates[p.id]){c.document.pageStates[p.id]=p;const h=o.pages[p.id],g=["bindingId","editingId","hoveredId","pointedId"];for(const v of g)h.shapes[v]||(p[v]=void 0);p.selectedIds=p.selectedIds.filter(v=>!!o.pages[h.id].shapes[v])}return c.document=Jr(c.document,c.document.version||0),this.replaceState(c,`${s}:${o.id}`)}),m(this,"loadRoom",o=>(this.patchState({room:{id:o,userId:el,users:{[el]:{id:el,color:U2[Math.floor(Math.random()*U2.length)],point:[100,100],selectedIds:[],activeShapes:[]}}}}),this)),m(this,"loadDocument",o=>{this.selectNone(),this.resetHistory(),this.clearSelectHistory(),this.session=void 0,this.replaceState(U(k({},i1.defaultState),{settings:k({},this.state.settings),document:Jr(o,i1.version),appState:U(k(k({},i1.defaultState.appState),this.state.appState),{currentPageId:Object.keys(o.pages)[0],disableAssets:this.disableAssets})}),"loaded_document");const{point:s,zoom:l}=this.pageState.camera;return this.updateViewport(s,l),this}),m(this,"newProject",()=>{!this.isLocal||(this.fileSystemHandle=null,this.resetDocument())}),m(this,"saveProject",()=>Fe(this,null,function*(){if(!this.readOnly){try{const o=yield q2(Jr(this.document,i1.version),this.fileSystemHandle);this.fileSystemHandle=o,this.persist(),this.isDirty=!1}catch(o){console.error(o.message)}return this}})),m(this,"saveProjectAs",()=>Fe(this,null,function*(){try{const o=yield q2(this.document,null);this.fileSystemHandle=o,this.persist(),this.isDirty=!1}catch(o){console.error(o.message)}return this})),m(this,"openProject",()=>Fe(this,null,function*(){if(!!this.isLocal)try{const o=yield J8();if(!o)throw Error();const{fileHandle:s,document:l}=o;this.loadDocument(l),this.fileSystemHandle=s,this.zoomToFit(),this.persist()}catch(o){console.error(o)}finally{this.persist()}})),m(this,"openAsset",()=>Fe(this,null,function*(){if(!this.disableAssets)try{const o=yield Q8();if(!o)return;this.addMediaFromFile(o)}catch(o){console.error(o)}finally{this.persist()}})),m(this,"signOut",()=>{}),m(this,"getAppState",()=>this.appState),m(this,"getPage",(o=this.currentPageId)=>z.getPage(this.state,o||this.currentPageId)),m(this,"getShapes",(o=this.currentPageId)=>z.getShapes(this.state,o||this.currentPageId)),m(this,"getBindings",(o=this.currentPageId)=>z.getBindings(this.state,o||this.currentPageId)),m(this,"getShape",(o,s=this.currentPageId)=>z.getShape(this.state,o,s)),m(this,"getShapeBounds",(o,s=this.currentPageId)=>z.getBounds(this.getShape(o,s))),m(this,"getBinding",(o,s=this.currentPageId)=>z.getBinding(this.state,o,s)),m(this,"getPageState",(o=this.currentPageId)=>z.getPageState(this.state,o||this.currentPageId)),m(this,"getPagePoint",(o,s=this.currentPageId)=>{const{camera:l}=this.getPageState(s);return L.sub(L.div(o,l.zoom),l.point)}),m(this,"createPage",o=>{if(this.readOnly)return this;const{width:s,height:l}=this.rendererBounds;return this.setState(y6(this,[-s/2,-l/2],o))}),m(this,"changePage",o=>this.setState(x6(this,o))),m(this,"renamePage",(o,s)=>this.readOnly?this:this.setState(k6(this,o,s))),m(this,"duplicatePage",o=>this.readOnly?this:this.setState(M6(this,o))),m(this,"deletePage",o=>this.readOnly?this:Object.values(this.document.pages).length<=1?this:this.setState(E6(this,o||this.currentPageId))),m(this,"copy",(o=this.selectedIds)=>{const s=o.flatMap(p=>z.getDocumentBranch(this.state,p,this.currentPageId)),l=s.map(p=>H.deepClone(this.getShape(p,this.currentPageId)));if(l.length===0)return this;const c=Object.values(this.page.bindings).filter(p=>s.includes(p.fromId)&&s.includes(p.toId)),d=l.map(p=>{if(!!p.assetId)return this.document.assets[p.assetId]}).filter(Boolean);this.clipboard={shapes:l,bindings:c,assets:d};try{const p=JSON.stringify(k({type:"tldr/clipboard"},this.clipboard));navigator.clipboard.writeText(p).then(()=>{},()=>{})}catch{}return this.pasteInfo.offset=[0,0],this.pasteInfo.center=[0,0],this}),m(this,"cut",(o=this.selectedIds)=>(this.copy(o),this.delete(o),this)),m(this,"paste",o=>{if(this.readOnly)return;const s=(l,c,d)=>{const p={},h=d.filter(P=>this.document.assets[P.id]===void 0);h.length&&this.patchState({document:{assets:Object.fromEntries(h.map(P=>[P.id,P]))}}),l.forEach(P=>p[P.id]=H.uniqueId()),c.forEach(P=>p[P.id]=H.uniqueId());let g=z.getTopChildIndex(this.state,this.currentPageId);const v=l.sort((P,$)=>P.childIndex-$.childIndex).map(P=>{const $=p[P.parentId],I=U(k({},P),{id:p[P.id],parentId:$||this.currentPageId});return P.children&&(I.children=P.children.map(B=>p[B])),$||(I.childIndex=g,g++),I.handles&&Object.values(I.handles).forEach(B=>{B.bindingId&&(B.bindingId=p[B.bindingId])}),I}),w=c.map(P=>U(k({},P),{id:p[P.id],toId:p[P.toId],fromId:p[P.fromId]})),x=H.getCommonBounds(v.map(z.getBounds));let y=L.toFixed(this.getPagePoint(o||this.centerPoint));L.dist(y,this.pasteInfo.center)<2||L.dist(y,L.toFixed(H.getBoundsCenter(x)))<2?(y=L.add(y,this.pasteInfo.offset),this.pasteInfo.offset=L.add(this.pasteInfo.offset,[lo,lo])):(this.pasteInfo.center=y,this.pasteInfo.offset=[0,0]);const E=H.centerBounds(x,y),R=L.sub(H.getBoundsCenter(E),H.getBoundsCenter(x));this.create(v.map(P=>z.getShapeUtil(P.type).create(U(k({},P),{point:L.toFixed(L.add(P.point,R)),parentId:P.parentId||this.currentPageId}))),w)};if(!("clipboard"in navigator&&navigator.clipboard.readText)){z.warn("This browser does not support the Clipboard API!"),this.clipboard&&s(this.clipboard.shapes,this.clipboard.bindings,this.clipboard.assets);return}return navigator.clipboard.readText().then(l=>{const c=JSON.parse(l);if(c.type==="tldr/clipboard")s(c.shapes,c.bindings,c.assets);else{z.warn("The selected shape was not a tldraw shape, treating as text.");const d=H.uniqueId();this.createShapes({id:d,type:"text",parentId:this.appState.currentPageId,text:z.normalizeText(l),point:this.getPagePoint(this.centerPoint,this.currentPageId),style:k({},this.appState.currentStyle)}),this.select(d)}}).catch(()=>{z.warn("Read permissions denied!"),this.clipboard&&s(this.clipboard.shapes,this.clipboard.bindings,this.clipboard.assets)}),this}),m(this,"copySvg",(o=this.selectedIds,s=this.currentPageId)=>{if(o.length===0&&(o=Object.keys(this.page.shapes)),o.length===0)return;const l=document.createElementNS("http://www.w3.org/2000/svg","svg"),c=document.createElementNS("http://www.w3.org/2000/svg","defs"),d=document.createElementNS("http://www.w3.org/2000/svg","style");d.textContent="@import url('https://fonts.googleapis.com/css2?family=Caveat+Brush&family=Source+Code+Pro&family=Source+Sans+Pro&family=Crimson+Pro&display=block');",c.appendChild(d),l.appendChild(c);const p=o.map(w=>this.getShape(w,s)).sort((w,x)=>w.childIndex-x.childIndex),h=H.getCommonBounds(p.map(z.getRotatedBounds)),g=w=>{const x=z.getShapeUtil(w),y=x.getBounds(w),E=x.getSvgElement(w);if(!!E)return w.type==="image"?E.setAttribute("xlink:href",this.document.assets[w.assetId].src):w.type==="video"&&E.setAttribute("xlink:href",this.serializeVideo(w.id)),E.setAttribute("transform",`translate(${ds+w.point[0]-h.minX}, ${ds+w.point[1]-h.minY}) rotate(${(w.rotation||0)*180/Math.PI}, ${y.width/2}, ${y.height/2})`),E};p.forEach(w=>{var x;if((x=w.children)!=null&&x.length){const E=document.createElementNS("http://www.w3.org/2000/svg","g");w.children.forEach(R=>{const P=this.getShape(R,s),$=g(P);$&&E.appendChild($)}),l.appendChild(E);return}const y=g(w);y&&l.appendChild(y)}),l.setAttribute("viewBox",[0,0,h.width+ds*2,h.height+ds*2].join(" ")),l.setAttribute("width",String(h.width)),l.setAttribute("height",String(h.height)),l.setAttribute("fill","transparent"),l.querySelectorAll(".tl-fill-hitarea, .tl-stroke-hitarea, .tl-binding-indicator").forEach(w=>w.remove());const v=new XMLSerializer().serializeToString(l).replaceAll("&#10;      ","").replaceAll(/((\s|")[0-9]*\.[0-9]{2})([0-9]*)(\b|"|\))/g,"$1");return z.copyStringToClipboard(v),v}),m(this,"copyJson",(o=this.selectedIds,s=this.currentPageId)=>{if(o.length===0&&(o=Object.keys(this.page.shapes)),o.length===0)return;const l=o.map(d=>this.getShape(d,s)),c=JSON.stringify(l,null,2);return z.copyStringToClipboard(c),c}),m(this,"setCamera",(o,s,l)=>(this.updateViewport(o,s),this.patchState({document:{pageStates:{[this.currentPageId]:{camera:{point:o,zoom:s}}}}},l),this)),m(this,"resetCamera",()=>this.setCamera(this.centerPoint,1,"reset_camera")),m(this,"pan",o=>{const{camera:s}=this.pageState;return this.setCamera(L.toFixed(L.sub(s.point,o)),s.zoom,"panned")}),m(this,"pinchZoom",(o,s,l)=>{const{camera:c}=this.pageState,d=L.sub(c.point,L.div(s,c.zoom)),p=l,h=L.sub(L.div(o,c.zoom),d),g=L.sub(L.div(o,p),d);return this.setCamera(L.toFixed(L.add(d,L.sub(g,h))),p,"pinch_zoomed")}),m(this,"zoomTo",(o,s=this.centerPoint)=>{const{zoom:l,point:c}=this.pageState.camera,d=L.sub(L.div(s,l),c),p=L.sub(L.div(s,o),c);return this.setCamera(L.toFixed(L.add(c,L.sub(p,d))),o,"zoomed_camera")}),m(this,"zoomIn",()=>{const o=Math.round(this.pageState.camera.zoom*100/25),s=z.getCameraZoom((o+1)*.25);return this.zoomTo(s)}),m(this,"zoomOut",()=>{const o=Math.round(this.pageState.camera.zoom*100/25),s=z.getCameraZoom((o-1)*.25);return this.zoomTo(s)}),m(this,"zoomToFit",()=>{const{shapes:o,pageState:{camera:s}}=this;if(o.length===0)return this;const{rendererBounds:l}=this,c=H.getCommonBounds(o.map(z.getBounds));let d=z.getCameraZoom(Math.min((l.width-us)/c.width,(l.height-us)/c.height));d=s.zoom===d||s.zoom<1?Math.min(1,d):d;const p=(l.width-c.width*d)/2/d,h=(l.height-c.height*d)/2/d;return this.setCamera(L.toFixed(L.sub([p,h],[c.minX,c.minY])),d,"zoomed_to_fit")}),m(this,"zoomToSelection",()=>{if(this.selectedIds.length===0)return this;const{rendererBounds:o}=this,s=z.getSelectedBounds(this.state);let l=z.getCameraZoom(Math.min((o.width-us)/s.width,(o.height-us)/s.height));l=this.pageState.camera.zoom===l||this.pageState.camera.zoom<1?Math.min(1,l):l;const c=(o.width-s.width*l)/2/l,d=(o.height-s.height*l)/2/l;return this.setCamera(L.toFixed(L.sub([c,d],[s.minX,s.minY])),l,"zoomed_to_selection")}),m(this,"zoomToContent",()=>{const o=this.shapes,s=this.pageState;if(o.length===0)return this;const{rendererBounds:l}=this,{zoom:c}=s.camera,d=H.getCommonBounds(o.map(z.getBounds)),p=(l.width-d.width*c)/2/c,h=(l.height-d.height*c)/2/c;return this.setCamera(L.toFixed(L.sub([p,h],[d.minX,d.minY])),this.pageState.camera.zoom,"zoomed_to_content")}),m(this,"resetZoom",()=>this.zoomTo(1)),m(this,"zoomBy",H.throttle((o,s)=>{const{zoom:l}=this.pageState.camera,c=z.getCameraZoom(l-o*l);return this.zoomTo(c,s)},16)),m(this,"clearSelectHistory",()=>(this.selectHistory.pointer=0,this.selectHistory.stack=[this.selectedIds],this)),m(this,"addToSelectHistory",o=>(this.selectHistory.pointer<this.selectHistory.stack.length&&(this.selectHistory.stack=this.selectHistory.stack.slice(0,this.selectHistory.pointer+1)),this.selectHistory.pointer++,this.selectHistory.stack.push(o),this)),m(this,"setSelectedIds",(o,s=!1)=>{const l=s?[...this.pageState.selectedIds,...o]:[...o];return this.patchState({appState:{activeTool:"select"},document:{pageStates:{[this.currentPageId]:{selectedIds:l}}}},"selected")}),m(this,"undoSelect",()=>(this.selectHistory.pointer>0&&(this.selectHistory.pointer--,this.setSelectedIds(this.selectHistory.stack[this.selectHistory.pointer])),this)),m(this,"redoSelect",()=>(this.selectHistory.pointer<this.selectHistory.stack.length-1&&(this.selectHistory.pointer++,this.setSelectedIds(this.selectHistory.stack[this.selectHistory.pointer])),this)),m(this,"select",(...o)=>(o.forEach(s=>{if(!this.page.shapes[s])throw Error(`That shape does not exist on page ${this.currentPageId}`)}),this.setSelectedIds(o),this.addToSelectHistory(o),this)),m(this,"selectAll",(o=this.currentPageId)=>this.session?this:(this.setSelectedIds(Object.values(this.document.pages[o].shapes).filter(s=>s.parentId===o).map(s=>s.id)),this.addToSelectHistory(this.selectedIds),this.selectTool("select"),this)),m(this,"selectNone",()=>(this.setSelectedIds([]),this.addToSelectHistory(this.selectedIds),this)),m(this,"startSession",(o,...s)=>{if(this.readOnly&&o!=="brush")return this;this.session&&(z.warn(`Already in a session! (${this.session.constructor.name})`),this.cancelSession());const l=ef(o);this.session=new l(this,...s);const c=this.session.start();return c&&this.patchState(c,`session:start_${this.session.constructor.name}`),this}),m(this,"updateSession",()=>{const{session:o}=this;if(!o)return this;const s=o.update();return s?this.patchState(s,`session:${o?.constructor.name}`):this}),m(this,"cancelSession",()=>{const{session:o}=this;if(!o)return this;this.session=void 0;const s=o.cancel();return s&&this.patchState(s,`session:cancel:${o.constructor.name}`),this}),m(this,"completeSession",()=>{var o,s,l,c,d,p,h;const{session:g}=this;if(!g)return this;this.session=void 0;const v=g.complete();if(v===void 0)return this.isCreating=!1,this.patchState({appState:{status:"idle"},document:{pageStates:{[this.currentPageId]:{editingId:void 0,bindingId:void 0,hoveredId:void 0}}}},`session:complete:${g.constructor.name}`);if("after"in v){if(this.isCreating){if(v.before={appState:U(k({},v.before.appState),{status:"idle"}),document:{pages:{[this.currentPageId]:{shapes:Object.fromEntries(this.selectedIds.map(w=>[w,void 0]))}},pageStates:{[this.currentPageId]:{selectedIds:[],editingId:null,bindingId:null,hoveredId:null}}}},this.appState.isToolLocked){const w=((l=(s=(o=v.after)==null?void 0:o.document)==null?void 0:s.pageStates)==null?void 0:l[this.currentPageId])||{};w.selectedIds=[]}this.isCreating=!1}v.after.appState=U(k({},v.after.appState),{status:"idle"}),v.after.document=U(k({},v.after.document),{pageStates:U(k({},(c=v.after.document)==null?void 0:c.pageStates),{[this.currentPageId]:U(k({},(((d=v.after.document)==null?void 0:d.pageStates)||{})[this.currentPageId]),{editingId:null})})}),this.setState(v,`session:complete:${g.constructor.name}`)}else this.patchState(U(k({},v),{appState:U(k({},v.appState),{status:"idle"}),document:U(k({},v.document),{pageStates:{[this.currentPageId]:U(k({},(h=(p=v.document)==null?void 0:p.pageStates)==null?void 0:h[this.currentPageId]),{editingId:null})}})}),`session:complete:${g.constructor.name}`);return this}),m(this,"createShapes",(...o)=>o.length===0?this:this.create(o.map(s=>z.getShapeUtil(s.type).create(k({parentId:this.currentPageId},s))))),m(this,"updateShapes",(...o)=>{const s=this.document.pages[this.currentPageId].shapes,l=o.filter(c=>s[c.id]);return l.length===0?this:this.setState(Z6(this,l,this.currentPageId),"updated_shapes")}),m(this,"create",(o=[],s=[])=>o.length===0?this:this.setState(L9(this,o,s))),m(this,"patchCreate",(o=[],s=[])=>o.length===0?this:this.patchState(L9(this,o,s).after)),m(this,"delete",(o=this.selectedIds)=>{var s,l;if(o.length===0)return this;const c=S9(this,o);if(this.callbacks.onAssetDelete&&((s=c.before.document)==null?void 0:s.assets)&&((l=c.after.document)==null?void 0:l.assets)){const d=Object.keys(c.before.document.assets).filter(g=>!!c.before.document.assets[g]),p=Object.keys(c.after.document.assets).filter(g=>!!c.after.document.assets[g]);d.filter(g=>!p.includes(g)).forEach(g=>this.callbacks.onAssetDelete(g))}return this.setState(c)}),m(this,"deleteAll",()=>(this.selectAll(),this.delete(),this)),m(this,"style",(o,s=this.selectedIds)=>this.setState(V6(this,s,o))),m(this,"align",(o,s=this.selectedIds)=>s.length<2?this:this.setState(b6(this,s,o))),m(this,"distribute",(o,s=this.selectedIds)=>s.length<3?this:this.setState(R6(this,s,o))),m(this,"stretch",(o,s=this.selectedIds)=>s.length<2?this:this.setState(B6(this,s,o))),m(this,"flipHorizontal",(o=this.selectedIds)=>o.length===0?this:this.setState(R9(this,o,"horizontal"))),m(this,"flipVertical",(o=this.selectedIds)=>o.length===0?this:this.setState(R9(this,o,"vertical"))),m(this,"moveToPage",(o,s=this.currentPageId,l=this.selectedIds)=>{if(l.length===0)return this;const{rendererBounds:c}=this;return this.setState(H6(this,l,c,s,o)),this}),m(this,"moveToBack",(o=this.selectedIds)=>o.length===0?this:this.setState(xs(this,o,"toBack"))),m(this,"moveBackward",(o=this.selectedIds)=>o.length===0?this:this.setState(xs(this,o,"backward"))),m(this,"moveForward",(o=this.selectedIds)=>o.length===0?this:this.setState(xs(this,o,"forward"))),m(this,"moveToFront",(o=this.selectedIds)=>o.length===0?this:this.setState(xs(this,o,"toFront"))),m(this,"nudge",(o,s=!1,l=this.selectedIds)=>{if(l.length===0)return this;const c=s?this.settings.showGrid?this.currentGrid*4:10:this.settings.showGrid?this.currentGrid:1;return this.setState(A6(this,l,L.mul(o,c)))}),m(this,"duplicate",(o=this.selectedIds,s)=>this.readOnly?this:o.length===0?this:this.setState(P6(this,o,s))),m(this,"resetBounds",(o=this.selectedIds)=>{const s=I9(this,o,this.currentPageId);return this.setState(I9(this,o,this.currentPageId),s.id)}),m(this,"toggleHidden",(o=this.selectedIds)=>o.length===0?this:this.setState(Qa(this,o,"isHidden"))),m(this,"toggleLocked",(o=this.selectedIds)=>o.length===0?this:this.setState(Qa(this,o,"isLocked"))),m(this,"toggleAspectRatioLocked",(o=this.selectedIds)=>o.length===0?this:this.setState(Qa(this,o,"isAspectRatioLocked"))),m(this,"toggleDecoration",(o,s=this.selectedIds)=>s.length===0||!(o==="start"||o==="end")?this:this.setState(j6(this,s,o))),m(this,"setShapeProps",(o,s=this.selectedIds)=>this.setState(z6(this,s,o))),m(this,"rotate",(o=Math.PI*-.5,s=this.selectedIds)=>{if(s.length===0)return this;const l=T6(this,s,o);return l?this.setState(l):this}),m(this,"group",(o=this.selectedIds,s=H.uniqueId(),l=this.currentPageId)=>{if(this.readOnly)return this;if(o.length===1&&this.getShape(o[0],l).type==="group")return this.ungroup(o,l);if(o.length<2)return this;const c=$6(this,o,s,l);return c?this.setState(c):this}),m(this,"ungroup",(o=this.selectedIds,s=this.currentPageId)=>{if(this.readOnly)return this;const l=o.map(d=>this.getShape(d,s)).filter(d=>d.type==="group");if(l.length===0)return this;const c=D6(this,o,l,s);return c?this.setState(c):this}),m(this,"cancel",()=>{var o,s;return(s=(o=this.currentTool).onCancel)==null||s.call(o),this}),m(this,"addMediaFromFile",(o,...s)=>Fe(this,[o,...s],function*(l,c=this.centerPoint){this.setIsLoading(!0);const d=H.uniqueId(),p=this.getPagePoint(c),h=l.name.match(/\.[0-9a-z]+$/i);if(!h)throw Error("No extension");const g=K2.includes(h[0].toLowerCase()),v=X2.includes(h[0].toLowerCase());if(!(g||v))throw Error("Wrong extension");const w=g?"image":"video",x=g?"image":"video";let y;try{if(this.callbacks.onAssetCreate){const E=yield this.callbacks.onAssetCreate(l,d);if(!E)throw Error("Asset creation callback returned false");y=E}else y=yield eu(l);if(typeof y=="string"){const E=g?yield tu(y):yield ru(y),R=Object.values(this.document.assets).find($=>$.type===x&&$.src===y);let P;if(R)P=R.id;else{P=H.uniqueId();const $={id:P,type:x,src:y,size:E};this.patchState({document:{assets:{[P]:$}}})}this.createImageOrVideoShapeAtPoint(d,w,p,E,P)}}catch(E){return console.warn(E),this.setIsLoading(!1),this}return this.setIsLoading(!1),this})),m(this,"onKeyDown",(o,s,l)=>{var c,d;switch(l.key){case"/":{if(this.status==="idle"&&!this.pageState.editingId){const{shiftKey:p,metaKey:h,altKey:g,ctrlKey:v,spaceKey:w}=this;this.onPointerDown({target:"canvas",pointerId:0,origin:s.point,point:s.point,delta:[0,0],pressure:.5,shiftKey:p,ctrlKey:v,metaKey:h,altKey:g,spaceKey:w},{shiftKey:p,altKey:g,ctrlKey:v,pointerId:0,clientX:s.point[0],clientY:s.point[1]})}break}case"Escape":{this.cancel();break}case"Meta":{this.metaKey=!0;break}case"Alt":{this.altKey=!0;break}case"Control":{this.ctrlKey=!0;break}case" ":{this.isForcePanning=!0,this.spaceKey=!0;break}}return(d=(c=this.currentTool).onKeyDown)==null||d.call(c,o,s,l),this}),m(this,"onKeyUp",(o,s,l)=>{var c,d;if(!!s){switch(l.key){case"/":{const{currentPoint:p,shiftKey:h,metaKey:g,altKey:v,ctrlKey:w,spaceKey:x}=this;this.onPointerUp({target:"canvas",pointerId:0,origin:p,point:p,delta:[0,0],pressure:.5,shiftKey:h,ctrlKey:w,metaKey:g,altKey:v,spaceKey:x},{shiftKey:h,altKey:v,ctrlKey:w,pointerId:0,clientX:p[0],clientY:p[1]});break}case"Meta":{this.metaKey=!1;break}case"Alt":{this.altKey=!1;break}case"Control":{this.ctrlKey=!1;break}case" ":{this.isForcePanning=!1,this.spaceKey=!1;break}}(d=(c=this.currentTool).onKeyUp)==null||d.call(c,o,s,l)}}),m(this,"onDragOver",o=>{o.preventDefault()}),m(this,"onDrop",o=>Fe(this,null,function*(){var s;if(o.preventDefault(),this.disableAssets)return this;if((s=o.dataTransfer.files)!=null&&s.length){const l=o.dataTransfer.files[0];this.addMediaFromFile(l,[o.clientX,o.clientY])}return this})),m(this,"onPinchStart",(o,s)=>{var l,c;(c=(l=this.currentTool).onPinchStart)==null||c.call(l,o,s)}),m(this,"onPinchEnd",(o,s)=>{var l,c;return(c=(l=this.currentTool).onPinchEnd)==null?void 0:c.call(l,o,s)}),m(this,"onPinch",(o,s)=>{var l,c;return(c=(l=this.currentTool).onPinch)==null?void 0:c.call(l,o,s)}),m(this,"onPan",(o,s)=>{if(this.appState.status==="pinching")return;const l=L.div(o.delta,this.pageState.camera.zoom),c=this.pageState.camera.point,d=L.sub(c,l);L.isEqual(d,c)||(this.pan(l),this.isForcePanning||this.onPointerMove(o,s))}),m(this,"onZoom",(o,s)=>{if(this.state.appState.status!=="idle")return;const l=o.delta[2]/50;this.zoomBy(l,o.point),this.onPointerMove(o,s)}),m(this,"updateInputs",o=>{this.currentPoint=this.getPagePoint(o.point).concat(o.pressure),this.shiftKey=o.shiftKey,this.altKey=o.altKey,this.ctrlKey=o.ctrlKey,this.metaKey=o.metaKey}),m(this,"onPointerMove",(o,s)=>{var l,c,d,p,h;if(this.previousPoint=this.currentPoint,this.updateInputs(o,s),this.isForcePanning&&this.isPointing){(l=this.onPan)==null||l.call(this,U(k({},o),{delta:L.neg(o.delta)}),s);return}if((d=(c=this.currentTool).onPointerMove)==null||d.call(c,o,s),this.state.room){const{users:g,userId:v}=this.state.room;(h=(p=this.callbacks).onChangePresence)==null||h.call(p,this,U(k({},g[v]),{point:this.getPagePoint(o.point)}))}}),m(this,"onPointerDown",(o,s)=>{var l,c;if(s.buttons===4)this.isForcePanning=!0;else if(this.isPointing)return;this.isPointing=!0,this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),!this.isForcePanning&&((c=(l=this.currentTool).onPointerDown)==null||c.call(l,o,s))}),m(this,"onPointerUp",(o,s)=>{var l,c;this.isPointing=!1,this.shiftKey||(this.isForcePanning=!1),this.updateInputs(o,s),(c=(l=this.currentTool).onPointerUp)==null||c.call(l,o,s)}),m(this,"onPointCanvas",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onPointCanvas)==null||c.call(l,o,s)}),m(this,"onDoubleClickCanvas",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onDoubleClickCanvas)==null||c.call(l,o,s)}),m(this,"onRightPointCanvas",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onRightPointCanvas)==null||c.call(l,o,s)}),m(this,"onDragCanvas",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onDragCanvas)==null||c.call(l,o,s)}),m(this,"onReleaseCanvas",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onReleaseCanvas)==null||c.call(l,o,s)}),m(this,"onPointShape",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onPointShape)==null||c.call(l,o,s)}),m(this,"onReleaseShape",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onReleaseShape)==null||c.call(l,o,s)}),m(this,"onDoubleClickShape",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onDoubleClickShape)==null||c.call(l,o,s)}),m(this,"onRightPointShape",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onRightPointShape)==null||c.call(l,o,s)}),m(this,"onDragShape",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onDragShape)==null||c.call(l,o,s)}),m(this,"onHoverShape",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onHoverShape)==null||c.call(l,o,s)}),m(this,"onUnhoverShape",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onUnhoverShape)==null||c.call(l,o,s)}),m(this,"onPointBounds",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onPointBounds)==null||c.call(l,o,s)}),m(this,"onDoubleClickBounds",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onDoubleClickBounds)==null||c.call(l,o,s)}),m(this,"onRightPointBounds",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onRightPointBounds)==null||c.call(l,o,s)}),m(this,"onDragBounds",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onDragBounds)==null||c.call(l,o,s)}),m(this,"onHoverBounds",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onHoverBounds)==null||c.call(l,o,s)}),m(this,"onUnhoverBounds",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onUnhoverBounds)==null||c.call(l,o,s)}),m(this,"onReleaseBounds",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onReleaseBounds)==null||c.call(l,o,s)}),m(this,"onPointBoundsHandle",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onPointBoundsHandle)==null||c.call(l,o,s)}),m(this,"onDoubleClickBoundsHandle",(o,s)=>{var l,c;if(this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onDoubleClickBoundsHandle)==null||c.call(l,o,s),this.selectedIds.length!==1)return;const d=this.getShape(this.selectedIds[0]);if(d.type==="image"||d.type==="video"){const p=this.document.assets[d.assetId],h=z.getShapeUtil(d),g=h.getCenter(d),v=h.getCenter(U(k({},d),{size:p.size})),w=L.sub(v,g);this.updateShapes({id:d.id,point:L.sub(d.point,w),size:p.size})}}),m(this,"onRightPointBoundsHandle",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onRightPointBoundsHandle)==null||c.call(l,o,s)}),m(this,"onDragBoundsHandle",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onDragBoundsHandle)==null||c.call(l,o,s)}),m(this,"onHoverBoundsHandle",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onHoverBoundsHandle)==null||c.call(l,o,s)}),m(this,"onUnhoverBoundsHandle",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onUnhoverBoundsHandle)==null||c.call(l,o,s)}),m(this,"onReleaseBoundsHandle",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onReleaseBoundsHandle)==null||c.call(l,o,s)}),m(this,"onPointHandle",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onPointHandle)==null||c.call(l,o,s)}),m(this,"onDoubleClickHandle",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onDoubleClickHandle)==null||c.call(l,o,s)}),m(this,"onRightPointHandle",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onRightPointHandle)==null||c.call(l,o,s)}),m(this,"onDragHandle",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onDragHandle)==null||c.call(l,o,s)}),m(this,"onHoverHandle",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onHoverHandle)==null||c.call(l,o,s)}),m(this,"onUnhoverHandle",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onUnhoverHandle)==null||c.call(l,o,s)}),m(this,"onReleaseHandle",(o,s)=>{var l,c;this.updateInputs(o,s),(c=(l=this.currentTool).onReleaseHandle)==null||c.call(l,o,s)}),m(this,"onShapeChange",o=>{this.updateShapes(o)}),m(this,"onShapeBlur",()=>{var o,s;if(performance.now()-this.editingStartTime<50)return;const{editingId:l}=this.pageState,{isToolLocked:c}=this.getAppState();if(l){const d=this.getShape(l);this.setEditingId(),d.type==="text"&&(d.text.trim().length<=0?this.patchState(S9(this,[l]).after,"delete_empty_text"):c||this.select(l))}(s=(o=this.currentTool).onShapeBlur)==null||s.call(o)}),m(this,"onShapeClone",(o,s)=>{var l,c;this.originPoint=this.getPagePoint(o.point).concat(o.pressure),this.updateInputs(o,s),(c=(l=this.currentTool).onShapeClone)==null||c.call(l,o,s)}),m(this,"onRenderCountChange",o=>{const s=this.getAppState();s.isEmptyCanvas&&o.length>0?this.patchState({appState:{isEmptyCanvas:!1}},"empty_canvas:false"):!s.isEmptyCanvas&&o.length<=0&&this.patchState({appState:{isEmptyCanvas:!0}},"empty_canvas:true")}),m(this,"onError",()=>{}),m(this,"getShapeUtil",z.getShapeUtil),this.callbacks=n}setStatus(e){return this.patchState({appState:{status:e}},`set_status:${e}`)}get isMenuOpen(){return this.appState.isMenuOpen}get isLoading(){return this.appState.isLoading}get disableAssets(){return this.appState.disableAssets}get history(){return this.stack.slice(0,this.pointer+1)}set history(e){this.replaceHistory(e)}get document(){return this.state.document}get settings(){return this.state.settings}get appState(){return this.state.appState}get currentPageId(){return this.state.appState.currentPageId}get page(){return this.state.document.pages[this.currentPageId]}get shapes(){return Object.values(this.page.shapes)}get bindings(){return Object.values(this.page.bindings)}get assets(){return Object.values(this.document.assets)}get pageState(){return this.state.document.pageStates[this.currentPageId]}get selectedIds(){return this.pageState.selectedIds}createTextShapeAtPoint(e,n){const{shapes:o,appState:{currentPageId:s,currentStyle:l}}=this,c=o.length===0?1:o.filter(g=>g.parentId===s).sort((g,v)=>v.childIndex-g.childIndex)[0].childIndex+1,d=po.text,p=d.create({id:n||H.uniqueId(),parentId:s,childIndex:c,point:e,style:k({},l)}),h=d.getBounds(p);return p.point=L.sub(p.point,[h.width/2,h.height/2]),this.createShapes(p),this.setEditingId(p.id),this}createImageOrVideoShapeAtPoint(e,n,o,s,l){const{shapes:c,appState:{currentPageId:d,currentStyle:p}}=this,h=c.length===0?1:c.filter(x=>x.parentId===d).sort((x,y)=>y.childIndex-x.childIndex)[0].childIndex+1,g=po[n],v=g.create({id:e,parentId:d,childIndex:h,point:o,size:s,style:k({},p),assetId:l}),w=g.getBounds(v);return v.point=L.sub(v.point,[w.width/2,w.height/2]),this.createShapes(v),this}isSelected(e){return this.selectedIds.includes(e)}serializeVideo(e){const n=document.getElementById(e+"_video");if(n){const o=document.createElement("canvas");return o.width=n.videoWidth,o.height=n.videoHeight,o.getContext("2d").drawImage(n,0,0),o.toDataURL("image/png")}else throw new Error("Video with id "+e+" not found")}serializeImage(e){const n=document.getElementById(e+"_image");if(n){const o=document.createElement("canvas");return o.width=n.width,o.height=n.height,o.getContext("2d").drawImage(n,0,0),o.toDataURL("image/png")}else throw new Error("Image with id "+e+" not found")}patchAssets(e){this.document.assets=k(k({},this.document.assets),e)}exportAllShapesAs(e){return Fe(this,null,function*(){const n=[...this.selectedIds];this.selectAll();const{width:o,height:s}=H.expandBounds(z.getSelectedBounds(this.state),64),l=z.getAllEffectedShapeIds(this.state,this.selectedIds,this.currentPageId);this.setSelectedIds(n),yield this.exportShapesAs(l,[o,s],e)})}exportSelectedShapesAs(e){return Fe(this,null,function*(){const{width:n,height:o}=H.expandBounds(z.getSelectedBounds(this.state),64),s=z.getAllEffectedShapeIds(this.state,this.selectedIds,this.currentPageId);yield this.exportShapesAs(s,[n,o],e)})}exportShapesAs(e,n,o){return Fe(this,null,function*(){var s;if(!!this.callbacks.onExport){this.setIsLoading(!0);try{const l={},c=e.map(h=>{const g=k({},this.getShape(h));if(g.assetId){const v=k({},this.document.assets[g.assetId]);v.src.toLowerCase().endsWith("gif")&&(v.src=this.serializeImage(g.id)),g.type==="video"&&(v.src=this.serializeVideo(g.id),v.type="image",g.type="image"),l[g.assetId]=v}return g});let d;o==="svg"?d=this.copySvg(e):o==="json"&&(d=this.copyJson(e));const p={currentPageId:this.currentPageId,name:(s=this.page.name)!=null?s:"export",shapes:c,assets:l,type:o,serialized:d,size:o==="png"?L.mul(n,2):n};yield this.callbacks.onExport(p)}catch(l){console.error(l)}finally{this.setIsLoading(!1)}}})}get room(){return this.state.room}get isLocal(){return this.state.room===void 0||this.state.room.id==="local"}get status(){return this.appState.status}get currentUser(){if(!!this.state.room)return this.state.room.users[this.state.room.userId]}get centerPoint(){const{width:e,height:n}=this.rendererBounds;return L.toFixed([e/2,n/2])}get currentGrid(){const{zoom:e}=this.pageState.camera;return e<.15?lo*16:e<1?lo*4:lo*1}},li=i1;m(li,"version",15.3),m(li,"defaultDocument",{id:"doc",name:"New Document",version:i1.version,pages:{page:{id:"page",name:"Page 1",childIndex:1,shapes:{},bindings:{}}},pageStates:{page:{id:"page",selectedIds:[],camera:{point:[0,0],zoom:1}}},assets:{}}),m(li,"defaultState",{settings:{isPenMode:!1,isDarkMode:!1,isZoomSnap:!1,isFocusMode:!1,isSnapping:!1,isDebugMode:!1,isReadonlyMode:!1,nudgeDistanceLarge:16,nudgeDistanceSmall:1,showRotateHandles:!0,showBindingHandles:!0,showCloneHandles:!1,showGrid:!1},appState:{status:"idle",activeTool:"select",hoveredId:void 0,currentPageId:"page",currentStyle:ur,isToolLocked:!1,isMenuOpen:!1,isEmptyCanvas:!1,snapLines:[],isLoading:!1,disableAssets:!1},document:i1.defaultDocument});var OL={select:M9,erase:P9,text:$9,draw:H9,ellipse:k9,rectangle:O9,triangle:T9,line:B9,arrow:V9,sticky:j9};function rf(e){const n=Rt(),o=f.useCallback((h=!1)=>{const g=e.current;return h&&n.isMenuOpen?!0:g&&(document.activeElement===g||g.contains(document.activeElement))},[e]);ke("v,1",()=>{!o(!0)||n.selectTool("select")},[n,e.current]),ke("d,p,2",()=>{!o(!0)||n.selectTool("draw")},void 0,[n]),ke("e,3",()=>{!o(!0)||n.selectTool("erase")},void 0,[n]),ke("r,4",()=>{!o(!0)||n.selectTool("rectangle")},void 0,[n]),ke("o,5",()=>{!o(!0)||n.selectTool("ellipse")},void 0,[n]),ke("g,6",()=>{!o()||n.selectTool("triangle")},void 0,[n]),ke("l,7",()=>{!o(!0)||n.selectTool("line")},void 0,[n]),ke("a,8",()=>{!o(!0)||n.selectTool("arrow")},void 0,[n]),ke("t,9",()=>{!o(!0)||n.selectTool("text")},void 0,[n]),ke("s,0",()=>{!o(!0)||n.selectTool("sticky")},void 0,[n]),ke("ctrl+shift+d,\u2318+shift+d",h=>{!o(!0)||(n.toggleDarkMode(),h.preventDefault())},void 0,[n]),ke("ctrl+.,\u2318+.",()=>{!o(!0)||n.toggleFocusMode()},void 0,[n]),ke("ctrl+shift+g,\u2318+shift+g",()=>{!o(!0)||n.toggleGrid()},void 0,[n]);const{onNewProject:s,onOpenProject:l,onSaveProject:c,onSaveProjectAs:d,onOpenMedia:p}=Z9();ke("ctrl+n,\u2318+n",h=>{!o()||s(h)},void 0,[n]),ke("ctrl+s,\u2318+s",h=>{!o()||c(h)},void 0,[n]),ke("ctrl+shift+s,\u2318+shift+s",h=>{!o()||d(h)},void 0,[n]),ke("ctrl+o,\u2318+o",h=>{!o()||l(h)},void 0,[n]),ke("ctrl+u,\u2318+u",h=>{!o()||p(h)},void 0,[n]),ke("\u2318+z,ctrl+z",()=>{!o(!0)||(n.session?n.cancelSession():n.undo())},void 0,[n]),ke("ctrl+shift+z,\u2318+shift+z",()=>{!o(!0)||(n.session?n.cancelSession():n.redo())},void 0,[n]),ke("\u2318+u,ctrl+u",()=>{!o()||n.undoSelect()},void 0,[n]),ke("ctrl+shift-u,\u2318+shift+u",()=>{!o()||n.redoSelect()},void 0,[n]),ke("ctrl+=,\u2318+=,ctrl+num_subtract,\u2318+num_subtract",h=>{!o(!0)||(n.zoomIn(),h.preventDefault())},void 0,[n]),ke("ctrl+-,\u2318+-,ctrl+num_add,\u2318+num_add",h=>{!o(!0)||(n.zoomOut(),h.preventDefault())},void 0,[n]),ke("shift+0,ctrl+numpad_0,\u2318+numpad_0",()=>{!o(!0)||n.resetZoom()},void 0,[n]),ke("shift+1",()=>{!o(!0)||n.zoomToFit()},void 0,[n]),ke("shift+2",()=>{!o(!0)||n.zoomToSelection()},void 0,[n]),ke("ctrl+d,\u2318+d",h=>{!o()||(n.duplicate(),h.preventDefault())},void 0,[n]),ke("shift+h",()=>{!o(!0)||n.flipHorizontal()},void 0,[n]),ke("shift+v",()=>{!o(!0)||n.flipVertical()},void 0,[n]),ke("escape",()=>{!o(!0)||n.cancel()},void 0,[n]),ke("backspace,del",()=>{!o()||n.delete()},void 0,[n]),ke("\u2318+a,ctrl+a",()=>{!o(!0)||n.selectAll()},void 0,[n]),ke("up",()=>{!o()||n.nudge([0,-1],!1)},void 0,[n]),ke("right",()=>{!o()||n.nudge([1,0],!1)},void 0,[n]),ke("down",()=>{!o()||n.nudge([0,1],!1)},void 0,[n]),ke("left",()=>{!o()||n.nudge([-1,0],!1)},void 0,[n]),ke("shift+up",()=>{!o()||n.nudge([0,-1],!0)},void 0,[n]),ke("shift+right",()=>{!o()||n.nudge([1,0],!0)},void 0,[n]),ke("shift+down",()=>{!o()||n.nudge([0,1],!0)},void 0,[n]),ke("shift+left",()=>{!o()||n.nudge([-1,0],!0)},void 0,[n]),ke("\u2318+shift+l,ctrl+shift+l",()=>{!o()||n.toggleLocked()},void 0,[n]),ke("\u2318+c,ctrl+c",()=>{!o()||n.copy()},void 0,[n]),ke("\u2318+shift+c,ctrl+shift+c",h=>{!o()||(n.copySvg(),h.preventDefault())},void 0,[n]),ke("\u2318+x,ctrl+x",()=>{!o()||n.cut()},void 0,[n]),ke("\u2318+v,ctrl+v",()=>{!o()||n.paste()},void 0,[n]),ke("\u2318+g,ctrl+g",h=>{!o()||(n.group(),h.preventDefault())},void 0,[n]),ke("\u2318+shift+g,ctrl+shift+g",h=>{!o()||(n.ungroup(),h.preventDefault())},void 0,[n]),ke("[",()=>{!o(!0)||n.moveBackward()},void 0,[n]),ke("]",()=>{!o(!0)||n.moveForward()},void 0,[n]),ke("shift+[",()=>{!o(!0)||n.moveToBack()},void 0,[n]),ke("shift+]",()=>{!o(!0)||n.moveToFront()},void 0,[n]),ke("ctrl+shift+backspace,\u2318+shift+backspace",h=>{!o()||(n.settings.isDebugMode&&n.resetDocument(),h.preventDefault())},void 0,[n]),ke("alt+command+l,alt+ctrl+l",h=>{!o(!0)||(n.style({textAlign:"start"}),h.preventDefault())},void 0,[n]),ke("alt+command+t,alt+ctrl+t",h=>{!o(!0)||(n.style({textAlign:"middle"}),h.preventDefault())},void 0,[n]),ke("alt+command+r,alt+ctrl+r",h=>{!o(!0)||(n.style({textAlign:"end"}),h.preventDefault())},void 0,[n])}var A9=f.createContext({});function Rt(){return f.useContext(A9)}var tl=new Map,ci="Tldraw-fonts",D9=`
@import url('https://fonts.googleapis.com/css2?family=Caveat+Brush&family=Source+Code+Pro&family=Source+Sans+Pro&family=Crimson+Pro&display=block');
`;function nf(){f.useLayoutEffect(()=>{if(tl.get(ci))return;const e=document.createElement("style");return e.innerHTML=D9,e.setAttribute("id",ci),document.head.appendChild(e),tl.set(ci,e),()=>{e&&document.head.contains(e)&&(document.head.removeChild(e),tl.delete(ci))}},[ci,D9])}function Z9(){const e=Rt(),n=f.useCallback(d=>Fe(this,null,function*(){var p,h;d&&e.callbacks.onOpenProject&&d.preventDefault(),(h=(p=e.callbacks).onNewProject)==null||h.call(p,e)}),[e]),o=f.useCallback(d=>{var p,h;d&&e.callbacks.onOpenProject&&d.preventDefault(),(h=(p=e.callbacks).onSaveProject)==null||h.call(p,e)},[e]),s=f.useCallback(d=>{var p,h;d&&e.callbacks.onOpenProject&&d.preventDefault(),(h=(p=e.callbacks).onSaveProjectAs)==null||h.call(p,e)},[e]),l=f.useCallback(d=>Fe(this,null,function*(){var p,h;d&&e.callbacks.onOpenProject&&d.preventDefault(),(h=(p=e.callbacks).onOpenProject)==null||h.call(p,e)}),[e]),c=f.useCallback(d=>Fe(this,null,function*(){var p,h;d&&e.callbacks.onOpenMedia&&d.preventDefault(),(h=(p=e.callbacks).onOpenMedia)==null||h.call(p,e)}),[e]);return{onNewProject:n,onSaveProject:o,onSaveProjectAs:s,onOpenProject:l,onOpenMedia:c}}function TL(){const e=React30.useCallback(d=>Fe(this,null,function*(){d.isDirty&&(d.fileSystemHandle?window.confirm("Do you want to save changes to your current project?")&&(yield d.saveProject()):window.confirm("Do you want to save your current project?")&&(yield d.saveProject()))}),[]),n=React30.useCallback(d=>Fe(this,null,function*(){window.confirm("Do you want to create a new project?")&&(yield e(d),d.newProject())}),[e]),o=React30.useCallback(d=>{d.saveProject()},[]),s=React30.useCallback(d=>{d.saveProjectAs()},[]),l=React30.useCallback(d=>Fe(this,null,function*(){yield e(d),d.openProject()}),[e]),c=React30.useCallback(d=>Fe(this,null,function*(){var p;(p=d.openAsset)==null||p.call(d)}),[]);return{onNewProject:n,onSaveProject:o,onSaveProjectAs:s,onOpenProject:l,onOpenMedia:c}}var vr={"@initial":"mobile","@micro":"micro","@sm":"small","@md":"medium","@lg":"large"},of=e=>e.appState.status,sf=e=>e.appState.activeTool;function af(){const e=Rt(),n=e.useStore(of),o=e.useStore(sf);return f.createElement(lf,{bp:vr,id:"TD-StatusBar"},f.createElement(cf,null,o," | ",n))}var lf=Me("div",{height:40,userSelect:"none",borderTop:"1px solid $panelContrast",gridArea:"status",display:"flex",color:"$text",justifyContent:"space-between",alignItems:"center",backgroundColor:"$panel",gap:8,fontFamily:"$ui",fontSize:"$0",padding:"0 16px",variants:{bp:{small:{fontSize:"$1"}}}}),cf=Me("div",{whiteSpace:"nowrap",overflow:"hidden"}),df=()=>H.isDarwin()?"\u2318":"Ctrl";function z9({variant:e,children:n}){return f.createElement(uf,{variant:e},n.split("").map((o,s)=>f.createElement("span",{key:s},o.replace("#",df()))))}var uf=Me("kbd",{marginLeft:"$3",textShadow:"$2",textAlign:"center",fontSize:"$0",fontFamily:"$ui",color:"$text",background:"none",fontWeight:400,gap:"$1",display:"flex",alignItems:"center","& > span":{padding:"$0",borderRadius:"$0",display:"flex",alignItems:"center",justifyContent:"center"},variants:{variant:{tooltip:{"& > span":{color:"$tooltipContrast",background:"$overlayContrast",boxShadow:"$key",width:"20px",height:"20px"}},menu:{}}}}),er=Me("div",{height:"100%",borderRadius:"4px",marginRight:"1px",width:"fit-content",display:"grid",alignItems:"center",justifyContent:"center",outline:"none",border:"none",pointerEvents:"all",cursor:"pointer",color:"currentColor","& svg":{height:16,width:16,strokeWidth:1},"& > *":{gridRow:1,gridColumn:1}}),Cr=f.forwardRef((e,n)=>{var o=e,{onClick:s,isActive:l=!1,isWarning:c=!1,hasIndicator:d=!1,hasArrow:p=!1,disabled:h=!1,isSponsor:g=!1,variant:v,kbd:w,children:x}=o,y=dr(o,["onClick","isActive","isWarning","hasIndicator","hasArrow","disabled","isSponsor","variant","kbd","children"]);return f.createElement(ff,k({ref:n,bp:vr,isWarning:c,isActive:l,isSponsor:g,disabled:h,onClick:s,variant:v},y),f.createElement(ys,null,x,w?f.createElement(z9,{variant:"menu"},w):void 0,d&&f.createElement(dt.wU,{dir:"ltr"},f.createElement(er,null,f.createElement(ka,null))),p&&f.createElement(er,null,f.createElement($4,null))))}),ys=Me("div",{height:"100%",width:"100%",backgroundColor:"$panel",borderRadius:"$2",display:"flex",gap:"$1",flexDirection:"row",alignItems:"center",padding:"0 $3",justifyContent:"space-between",border:"1px solid transparent","& svg":{position:"relative",stroke:"$overlay",strokeWidth:1,zIndex:1}}),ff=Me("button",{position:"relative",width:"100%",background:"none",border:"none",cursor:"pointer",height:"32px",outline:"none",color:"$text",fontFamily:"$ui",fontWeight:400,fontSize:"$1",borderRadius:4,userSelect:"none",margin:0,padding:"0 0","&[data-disabled]":{opacity:.3},"&:disabled":{opacity:.3},[`&:focus:not(:disabled) ${ys}`]:{backgroundColor:"$hover"},"& a":{textDecoration:"none",color:"$text"},variants:{bp:{mobile:{},small:{}},variant:{styleMenu:{margin:"$1 0 $1 0"},wide:{gridColumn:"1 / span 4"}},size:{icon:{padding:"4px ",width:"auto"}},isSponsor:{true:{color:"#eb30a2"},false:{}},isWarning:{true:{color:"$warn"}},isActive:{true:{backgroundColor:"$hover"},false:{}}},compoundVariants:[{isActive:!1,isSponsor:!0,bp:"small",css:{[`&:hover:not(:disabled) ${ys}`]:{backgroundColor:"$sponsorContrast",border:"1px solid $panel",'& *[data-shy="true"]':{opacity:1}}}},{isActive:!1,isSponsor:!1,bp:"small",css:{[`&:hover:not(:disabled) ${ys}`]:{backgroundColor:"$hover",border:"1px solid $panel",'& *[data-shy="true"]':{opacity:1}}}}]}),xn=Me("div",{position:"relative",overflow:"hidden",userSelect:"none",display:"flex",flexDirection:"column",zIndex:180,minWidth:180,pointerEvents:"all",backgroundColor:"$panel",boxShadow:"$panel",padding:"$2 $2",borderRadius:"$3",font:"$ui",variants:{size:{small:{minWidth:72}}}}),hf=e=>e.appState.isEmptyCanvas&&Object.keys(e.document.pages[e.appState.currentPageId].shapes).length>0,pf=f.memo(function(){const n=Rt();return n.useStore(hf)?f.createElement(gf,{id:"TD-Tools-Back_to_content"},f.createElement(Cr,{onClick:n.zoomToContent},"Back to content")):null}),gf=Me(xn,{pointerEvents:"all",width:"fit-content",minWidth:0,gridRow:1,flexGrow:2,display:"block"});function R1({children:e,label:n,kbd:o,id:s,side:l="top"}){return f.createElement("span",{id:s},f.createElement(Qi.fC,null,f.createElement(Qi.xz,{dir:"ltr",asChild:!0},f.createElement("span",null,e)),f.createElement(vf,{dir:"ltr",side:l,sideOffset:8},n,o?f.createElement(z9,{variant:"tooltip"},o):null,f.createElement(Cf,null))))}var vf=Me(Qi.VY,{borderRadius:3,padding:"$3 $3 $3 $3",fontSize:"$1",backgroundColor:"$tooltip",color:"$tooltipContrast",boxShadow:"$3",display:"flex",alignItems:"center",fontFamily:"$ui",userSelect:"none"}),Cf=Me(Qi.Eh,{fill:"$tooltip",margin:"0 8px"}),ct=f.forwardRef((e,n)=>{var o=e,{onSelect:s,onClick:l,onDoubleClick:c,variant:d,children:p,isToolLocked:h=!1,disabled:g=!1,isActive:v=!1,isSponsor:w=!1,onKeyDown:x,id:y}=o,E=dr(o,["onSelect","onClick","onDoubleClick","variant","children","isToolLocked","disabled","isActive","isSponsor","onKeyDown","id"]);return f.createElement(mf,k({ref:n,isActive:v,isSponsor:w,variant:d,onClick:l,disabled:g,onPointerDown:s,onDoubleClick:c,onKeyDown:x,bp:vr,id:y},E),f.createElement(A1,null,p),h&&f.createElement(_f,null))});function go(e){var n=e,{label:o,kbd:s,isLocked:l}=n,c=dr(n,["label","kbd","isLocked"]);const d=Rt(),p=f.useCallback(()=>{d.toggleToolLock()},[]),h=f.useCallback(g=>{g.key===" "&&d.isForcePanning&&g.preventDefault()},[]);return f.createElement(R1,{label:o[0].toUpperCase()+o.slice(1),kbd:s},f.createElement(ct,U(k({},c),{variant:"primary",isToolLocked:l&&c.isActive,onDoubleClick:p,onKeyDown:h})))}var A1=Me("div",{position:"relative",height:"100%",width:"100%",backgroundColor:"$panel",borderRadius:"$2",margin:"0",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"$ui",color:"inherit",userSelect:"none",boxSizing:"border-box",border:"1px solid transparent"}),mf=Me("button",{position:"relative",color:"$text",fontSize:"$0",background:"none",margin:"0",padding:"$2",display:"flex",alignItems:"center",justifyContent:"center",outline:"none",cursor:"pointer",pointerEvents:"all",border:"none",height:"40px",width:"40px",[`&:disabled ${A1}`]:{opacity:.618},variants:{variant:{primary:{marginTop:"0"},icon:{[`& ${A1}`]:{display:"grid","& > *":{gridRow:1,gridColumn:1}}},text:{width:"auto",[`& ${A1}`]:{fontSize:"$1",padding:"0 $3",gap:"$3"}},circle:{padding:"$2",[`& ${A1}`]:{border:"1px solid $panelContrast",borderRadius:"100%",boxShadow:"$panel"},[`& ${A1} > svg`]:{width:14,height:14}}},isSponsor:{true:{[`${A1}`]:{backgroundColor:"$sponsorContrast"}}},isActive:{true:{},false:{}},bp:{mobile:{},small:{}}},compoundVariants:[{variant:"primary",bp:"mobile",css:{height:"40px",width:"40px",[`& ${A1} > svg`]:{width:16,height:16}}},{variant:"primary",bp:"small",css:{height:"44px",width:"44px",[`& ${A1} > svg`]:{width:20,height:20}}},{isActive:!0,isSponsor:!1,css:{[`${A1}`]:{backgroundColor:"$selected",color:"$selectedContrast"}}},{isActive:!1,isSponsor:!1,bp:"small",css:{[`&:hover:not(:disabled) ${A1}`]:{backgroundColor:"$hover",border:"1px solid $panel"},[`&:focus:not(:disabled) ${A1}`]:{backgroundColor:"$hover"}}}]}),_f=Me("div",{position:"absolute",width:10,height:10,backgroundColor:"$selected",borderRadius:"100%",bottom:-2,border:"2px solid $panel",zIndex:100}),Es=Me("div",{backgroundColor:"$panel",display:"flex",flexDirection:"row",boxShadow:"$panel",padding:"$2",border:"1px solid $panelContrast",gap:0,variants:{side:{center:{borderRadius:"$4"},left:{padding:0,borderTop:0,borderLeft:0,borderTopRightRadius:"$1",borderBottomRightRadius:"$3",borderBottomLeftRadius:"$1"},right:{padding:0,borderTop:0,borderRight:0,borderTopLeftRadius:"$1",borderBottomLeftRadius:"$3",borderBottomRightRadius:"$1"}}}});function W9(e){const n=e,{size:o=16}=n,s=dr(n,["size"]);return f.createElement("svg",k({width:24,height:24},s),f.createElement("circle",{cx:12,cy:12,r:o/2}))}function wf(){return f.createElement("svg",{width:"24",height:"24",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},f.createElement("circle",{cx:12,cy:12,r:8,fill:"none",strokeWidth:2.5,strokeLinecap:"round",strokeDasharray:50.26548*.1}))}var bf=`${50.26548*.025} ${50.26548*.1}`;function xf(){return f.createElement("svg",{width:"24",height:"24",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},f.createElement("circle",{cx:12,cy:12,r:8,fill:"none",strokeWidth:2.5,strokeLinecap:"round",strokeDasharray:bf}))}function yf(){return f.createElement("svg",{width:"24",height:"24",viewBox:"1 1.5 21 22",fill:"currentColor",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},f.createElement("path",{d:"M10.0162 19.2768C10.0162 19.2768 9.90679 19.2517 9.6879 19.2017C9.46275 19.1454 9.12816 19.0422 8.68413 18.8921C8.23384 18.7358 7.81482 18.545 7.42707 18.3199C7.03307 18.101 6.62343 17.7883 6.19816 17.3818C5.77289 16.9753 5.33511 16.3718 4.88482 15.5713C4.43453 14.7645 4.1531 13.8545 4.04053 12.8414C3.92795 11.822 4.04991 10.8464 4.40639 9.91451C4.76286 8.98266 5.39452 8.10084 6.30135 7.26906C7.21444 6.44353 8.29325 5.83377 9.5378 5.43976C10.7823 5.05202 11.833 4.92068 12.6898 5.04576C13.5466 5.16459 14.3878 5.43664 15.2133 5.86191C16.0388 6.28718 16.7768 6.8688 17.4272 7.60678C18.0714 8.34475 18.5404 9.21406 18.8344 10.2147C19.1283 11.2153 19.1721 12.2598 18.9657 13.348C18.7593 14.4299 18.2872 15.4337 17.5492 16.3593C16.8112 17.2849 15.9263 18.0072 14.8944 18.5263C13.8624 19.0391 12.9056 19.3174 12.0238 19.3612C11.142 19.405 10.2101 19.2705 9.22823 18.9578C8.24635 18.6451 7.35828 18.151 6.56402 17.4756C5.77601 16.8002 6.08871 16.8658 7.50212 17.6726C8.90927 18.4731 10.1444 18.8484 11.2076 18.7983C12.2645 18.7545 13.2965 18.4825 14.3034 17.9822C15.3102 17.4819 16.1264 16.8221 16.7518 16.0028C17.3772 15.1835 17.7681 14.3111 17.9244 13.3855C18.0808 12.4599 18.0401 11.5781 17.8025 10.74C17.5586 9.902 17.1739 9.15464 16.6486 8.49797C16.1233 7.8413 15.2289 7.27844 13.9656 6.80939C12.7086 6.34034 11.4203 6.20901 10.1007 6.41539C8.78732 6.61552 7.69599 7.06893 6.82669 7.77564C5.96363 8.48859 5.34761 9.26409 4.97863 10.1021C4.60964 10.9402 4.45329 11.8376 4.50958 12.7945C4.56586 13.7513 4.79101 14.6238 5.18501 15.4118C5.57276 16.1998 5.96363 16.8002 6.35764 17.2129C6.75164 17.6257 7.13313 17.9509 7.50212 18.1886C7.87736 18.4325 8.28074 18.642 8.71227 18.8171C9.15005 18.9922 9.47839 19.111 9.69728 19.1736C9.91617 19.2361 10.0256 19.2705 10.0256 19.2768H10.0162Z",strokeWidth:"2"}))}function Ef(){return f.createElement("svg",{width:"24",height:"24",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},f.createElement("circle",{cx:12,cy:12,r:8,fill:"none",strokeWidth:2,strokeLinecap:"round"}))}function Lf(e){return f.createElement("svg",k({width:32,height:32,viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),f.createElement("path",{d:"M4.32978 8.5081C4.32978 10.1923 5.70009 11.5625 7.38418 11.5625H8.46539C8.64456 11.5625 8.78975 11.4173 8.78975 11.2382V11.13C8.78975 10.9508 8.64457 10.8057 8.46539 10.8057H7.38418C6.11736 10.8057 5.08662 9.77492 5.08662 8.5081C5.08662 7.24128 6.11736 6.21054 7.38418 6.21054H9.37894L8.00515 7.58433C7.8576 7.73183 7.8576 7.97195 8.00515 8.11944C8.14833 8.26251 8.39751 8.2623 8.54036 8.11944L10.56 6.09971C10.6315 6.02824 10.6709 5.93321 10.6709 5.8321C10.6709 5.73106 10.6315 5.63598 10.56 5.56454L8.54025 3.54472C8.3974 3.40176 8.14801 3.40176 8.00513 3.54472C7.85758 3.69218 7.85758 3.93234 8.00513 4.07979L9.37892 5.45368H7.38418C5.70009 5.45368 4.32978 6.82393 4.32978 8.5081Z"}))}function Sf(e){return f.createElement("svg",k({width:18,height:18,viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 4.656a.5.5 0 01.5-.5h9.7a.5.5 0 010 1H2.5a.5.5 0 01-.5-.5z"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.272 3a.578.578 0 00-.578.578v.578h3.311v-.578A.578.578 0 008.428 3H6.272zm3.733 1.156v-.578A1.578 1.578 0 008.428 2H6.272a1.578 1.578 0 00-1.578 1.578v.578H3.578a.5.5 0 00-.5.5V12.2a1.578 1.578 0 001.577 1.578h5.39a1.578 1.578 0 001.577-1.578V4.656a.5.5 0 00-.5-.5h-1.117zm-5.927 1V12.2a.578.578 0 00.577.578h5.39a.578.578 0 00.577-.578V5.156H4.078z"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.272 6.85a.5.5 0 01.5.5v3.233a.5.5 0 11-1 0V7.35a.5.5 0 01.5-.5zM8.428 6.85a.5.5 0 01.5.5v3.233a.5.5 0 11-1 0V7.35a.5.5 0 01.5-.5z"}))}function Rf(e){return f.createElement("svg",k({width:32,height:32,viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),f.createElement("path",{d:"M10.6707 8.5081C10.6707 10.1923 9.3004 11.5625 7.61631 11.5625H6.5351C6.35593 11.5625 6.21074 11.4173 6.21074 11.2382V11.13C6.21074 10.9508 6.35591 10.8057 6.5351 10.8057H7.61631C8.88313 10.8057 9.91387 9.77492 9.91387 8.5081C9.91387 7.24128 8.88313 6.21054 7.61631 6.21054H5.62155L6.99534 7.58433C7.14289 7.73183 7.14289 7.97195 6.99534 8.11944C6.85216 8.26251 6.60298 8.2623 6.46013 8.11944L4.44045 6.09971C4.36898 6.02824 4.32959 5.93321 4.32959 5.8321C4.32959 5.73106 4.36898 5.63598 4.44045 5.56454L6.46024 3.54472C6.60309 3.40176 6.85248 3.40176 6.99535 3.54472C7.14291 3.69218 7.14291 3.93234 6.99535 4.07979L5.62156 5.45368H7.61631C9.3004 5.45368 10.6707 6.82393 10.6707 8.5081Z"}))}function If(e){return f.createElement("svg",k({width:24,height:24,viewBox:"-2 -2 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),f.createElement("path",{d:"M12.4239 4.62C13.3572 4.62 14.1572 4.73333 14.8239 4.96C15.4906 5.17333 15.9772 5.43333 16.2839 5.74C16.3639 5.82 16.4039 5.94 16.4039 6.1V8.86H14.0639C13.9172 8.86 13.8439 8.78666 13.8439 8.64V7.26C13.4306 7.12666 12.9572 7.06 12.4239 7.06C11.6506 7.06 11.0639 7.18 10.6639 7.42C10.2639 7.66 10.0639 8.04666 10.0639 8.58V9C10.0639 9.38666 10.1639 9.69333 10.3639 9.92C10.5772 10.1333 11.0306 10.3467 11.7239 10.56L13.6439 11.14C14.4706 11.38 15.1172 11.66 15.5839 11.98C16.0506 12.3 16.3772 12.68 16.5639 13.12C16.7639 13.5467 16.8639 14.0733 16.8639 14.7V15.62C16.8639 16.7933 16.4039 17.7133 15.4839 18.38C14.5639 19.0467 13.2839 19.38 11.6439 19.38C10.6706 19.38 9.79723 19.2867 9.0239 19.1C8.2639 18.9133 7.71056 18.6533 7.3639 18.32C7.3239 18.28 7.29056 18.24 7.2639 18.2C7.25056 18.1467 7.2439 18.06 7.2439 17.94V15.74H7.6239C8.2239 16.1533 8.85056 16.4533 9.5039 16.64C10.1572 16.8267 10.9306 16.92 11.8239 16.92C12.6506 16.92 13.2506 16.7867 13.6239 16.52C14.0106 16.2533 14.2039 15.9333 14.2039 15.56V14.88C14.2039 14.6667 14.1639 14.48 14.0839 14.32C14.0172 14.16 13.8706 14.0133 13.6439 13.88C13.4172 13.7467 13.0572 13.6067 12.5639 13.46L10.6639 12.88C9.7839 12.6133 9.11056 12.3 8.6439 11.94C8.17723 11.58 7.85056 11.18 7.6639 10.74C7.49056 10.3 7.4039 9.83333 7.4039 9.34V8.38C7.4039 7.64666 7.61056 7 8.0239 6.44C8.43723 5.88 9.01723 5.44 9.7639 5.12C10.5239 4.78666 11.4106 4.62 12.4239 4.62Z"}))}function Mf(e){return f.createElement("svg",k({width:24,height:24,viewBox:"-2 -2 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),f.createElement("path",{d:"M8.16191 19H5.68191C5.53525 19 5.46191 18.9267 5.46191 18.78V5H8.76191C8.88191 5 8.97525 5.03333 9.04191 5.1C9.10858 5.15333 9.17525 5.27333 9.24191 5.46C9.72191 6.59333 10.1686 7.7 10.5819 8.78C11.0086 9.84667 11.4352 10.98 11.8619 12.18H12.1619C12.6019 10.9667 13.0352 9.79333 13.4619 8.66C13.8886 7.52667 14.3552 6.30667 14.8619 5H18.3219C18.4686 5 18.5419 5.07333 18.5419 5.22V19H16.0619C15.9152 19 15.8419 18.9267 15.8419 18.78V16.26C15.8419 15.5267 15.8486 14.8133 15.8619 14.12C15.8886 13.4267 15.9286 12.6867 15.9819 11.9C16.0486 11.1 16.1419 10.1933 16.2619 9.18H15.9019C15.4352 10.3533 14.9486 11.5667 14.4419 12.82C13.9486 14.06 13.4819 15.2333 13.0419 16.34H11.1019C11.0619 16.34 11.0152 16.3333 10.9619 16.32C10.9219 16.2933 10.8886 16.2467 10.8619 16.18C10.4619 15.18 10.0086 14.06 9.50191 12.82C9.00858 11.58 8.53525 10.3667 8.08191 9.18H7.70191C7.83525 10.18 7.93525 11.0733 8.00191 11.86C8.06858 12.6467 8.10858 13.3933 8.12191 14.1C8.14858 14.8067 8.16191 15.5267 8.16191 16.26V19Z"}))}function Pf(e){return f.createElement("svg",k({width:24,height:24,viewBox:"-2 -2 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),f.createElement("path",{d:"M7.68191 19C7.53525 19 7.46191 18.9267 7.46191 18.78V5H10.1219C10.2686 5 10.3419 5.07333 10.3419 5.22V16.56H13.4419V15.02H15.7619C15.9086 15.02 15.9819 15.0933 15.9819 15.24V19H7.68191Z"}))}function $f(){return f.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("path",{d:"M1.72838 9.33987L8.84935 2.34732C9.23874 1.96494 9.86279 1.96539 10.2516 2.34831L13.5636 5.60975C13.9655 6.00555 13.9607 6.65526 13.553 7.04507L8.13212 12.2278C7.94604 12.4057 7.69851 12.505 7.44107 12.505L6.06722 12.505L3.83772 12.505C3.5673 12.505 3.30842 12.3954 3.12009 12.2014L1.7114 10.7498C1.32837 10.3551 1.33596 9.72521 1.72838 9.33987Z",stroke:"currentColor"}),f.createElement("line",{x1:"6.01807",y1:"12.5",x2:"10.7959",y2:"12.5",stroke:"currentColor",strokeLinecap:"round"}),f.createElement("line",{x1:"5.50834",y1:"5.74606",x2:"10.1984",y2:"10.4361",stroke:"currentColor"}))}function Hf(){return f.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.73545 0.0494623C5.93029 -0.0395285 6.15915 -0.00663838 6.32104 0.133622L14.8111 7.48911C14.9804 7.63581 15.0432 7.87091 14.9696 8.08249C14.8959 8.29408 14.7007 8.4394 14.4769 8.44927L11.4564 8.58248L13.2249 12.4682C13.35 12.7431 13.2286 13.0675 12.9537 13.1927L10.9304 14.1145C10.6554 14.2397 10.331 14.1184 10.2057 13.8435L8.43441 9.95846L6.42883 12.0731L7.0482 13.434C7.17335 13.709 7.05195 14.0333 6.77702 14.1586L5.03829 14.9506C4.76335 15.0759 4.43894 14.9546 4.31361 14.6797L2.83886 11.445L1.13458 13.242C0.980476 13.4045 0.742914 13.4566 0.534904 13.3737C0.326893 13.2907 0.19043 13.0894 0.19043 12.8654V3.2218C0.19043 3.0076 0.315424 2.81309 0.510266 2.7241C0.705108 2.63511 0.933961 2.668 1.09586 2.80826L5.41561 6.55076V0.547159C5.41561 0.332956 5.54061 0.138453 5.73545 0.0494623ZM6.74741 10.147L6.50992 10.3974V10.1575V9.0621V8.94669V7.49882V1.74513L13.0561 7.41656L10.5986 7.52495C10.417 7.53296 10.2512 7.63066 10.1562 7.78567C10.1444 7.80505 10.1338 7.825 10.1245 7.84541C10.0596 7.98828 10.0589 8.15342 10.1247 8.2982V8.2982L12.0023 12.4236L10.9745 12.8919L9.09356 8.7663C9.0181 8.60079 8.86531 8.4836 8.68589 8.45361C8.50647 8.42363 8.32389 8.48478 8.19871 8.61676L8.019 8.80624L6.74741 10.147ZM5.41561 9.11037V7.99863L1.28473 4.41977V11.4934L2.60315 10.1033C2.72833 9.97131 2.91091 9.91016 3.09033 9.94014C3.26975 9.97013 3.42254 10.0873 3.498 10.2528L5.08241 13.728L5.82563 13.3895L4.24404 9.91441C4.16873 9.74894 4.18053 9.55687 4.27553 9.40186C4.37052 9.24685 4.53631 9.14915 4.71793 9.14114L5.41561 9.11037Z",fill:"currentColor"}))}function kf(){return f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},f.createElement("path",{d:"M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"}))}function Of(){return f.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},f.createElement("path",{d:"M3.64645 11.3536C3.45118 11.1583 3.45118 10.8417 3.64645 10.6465L11.1464 3.14645C11.3417 2.95118 11.6583 2.95118 11.8536 3.14645C12.0488 3.34171 12.0488 3.65829 11.8536 3.85355L4.35355 11.3536C4.15829 11.5488 3.84171 11.5488 3.64645 11.3536Z"}))}var rl=["rectangle","ellipse","triangle","line"],F9={rectangle:f.createElement(md,null),ellipse:f.createElement(k4,null),triangle:f.createElement(Od,null),line:f.createElement(Of,null)},Tf=e=>e.appState.status,Bf=f.memo(function({activeTool:n,isToolLocked:o}){const s=Rt(),l=s.useStore(Tf),[c,d]=f.useState("rectangle");f.useEffect(()=>{rl.includes(n)&&c!==n&&d(n)},[n]);const p=f.useCallback(()=>{s.selectTool(c)},[n,s]),h=f.useCallback(()=>{s.toggleToolLock()},[s]),g=f.useCallback(w=>{w.key===" "&&s.shiftKey&&w.preventDefault()},[]),v=rl.includes(n);return f.createElement(dt.fC,{dir:"ltr",onOpenChange:p},f.createElement(dt.xz,{dir:"ltr",asChild:!0,id:"TD-PrimaryTools-Shapes"},f.createElement(ct,{disabled:v&&s.shiftKey,variant:"primary",onDoubleClick:h,isToolLocked:v&&o,isActive:v,onKeyDown:g},F9[c])),f.createElement(dt.VY,{asChild:!0,dir:"ltr",side:"top",sideOffset:12},f.createElement(Es,{side:"center"},rl.map((w,x)=>f.createElement(R1,{key:w,label:w[0].toUpperCase()+w.slice(1),kbd:(4+x).toString(),id:`TD-PrimaryTools-Shapes-${w}`},f.createElement(dt.ck,{asChild:!0},f.createElement(ct,{variant:"primary",onClick:()=>{s.selectTool(w),d(w)}},F9[w])))))))}),Vf=e=>e.appState.activeTool,jf=e=>e.appState.isToolLocked,Af=f.memo(function(){const n=Rt(),o=n.useStore(Vf),s=n.useStore(jf),l=f.useCallback(()=>{n.selectTool("select")},[n]),c=f.useCallback(()=>{n.selectTool("erase")},[n]),d=f.useCallback(()=>{n.selectTool("draw")},[n]),p=f.useCallback(()=>{n.selectTool("arrow")},[n]),h=f.useCallback(()=>{n.selectTool("text")},[n]),g=f.useCallback(()=>{n.selectTool("sticky")},[n]);return f.createElement(Es,{side:"center",id:"TD-PrimaryTools"},f.createElement(go,{kbd:"1",label:"select",onClick:l,isActive:o==="select",id:"TD-PrimaryTools-CursorArrow"},f.createElement(s2,null)),f.createElement(go,{kbd:"2",label:"draw",onClick:d,isActive:o==="draw",id:"TD-PrimaryTools-Pencil"},f.createElement(od,null)),f.createElement(go,{kbd:"3",label:"eraser",onClick:c,isActive:o==="erase",id:"TD-PrimaryTools-Eraser"},f.createElement($f,null)),f.createElement(Bf,{activeTool:o,isToolLocked:s}),f.createElement(go,{kbd:"8",label:"arrow",onClick:p,isLocked:s,isActive:o==="arrow",id:"TD-PrimaryTools-ArrowTopRight"},f.createElement(x4,null)),f.createElement(go,{kbd:"9",label:"text",onClick:h,isLocked:s,isActive:o==="text",id:"TD-PrimaryTools-Text"},f.createElement(xd,null)),f.createElement(go,{kbd:"0",label:"sticky",onClick:g,isActive:o==="sticky",id:"TD-PrimaryTools-Pencil2"},f.createElement(sd,null)))}),BL=Me(dt.Eh,{fill:"$panel",bp:vr});function tt(e){var n=e,{onSelect:o,id:s}=n,l=dr(n,["onSelect","id"]);return f.createElement(dt.ck,{dir:"ltr",asChild:!0,onSelect:o,id:s},f.createElement(Cr,k({},l)))}var yt=e=>e.preventDefault();function Or({checked:e,disabled:n=!1,variant:o,onCheckedChange:s,kbd:l,id:c,children:d}){return f.createElement(dt.oC,{dir:"ltr",onSelect:yt,onCheckedChange:s,checked:e,disabled:n,asChild:!0,id:c},f.createElement(Cr,{kbd:l,variant:o,hasIndicator:!0},d))}function vo({sideOffset:e=8,children:n,align:o,variant:s,id:l}){return f.createElement(dt.VY,{dir:"ltr",align:o,sideOffset:e,onEscapeKeyDown:vs,asChild:!0,id:l},f.createElement(Df,{variant:s},n))}var Df=Me(xn,{width:"fit-content",height:"fit-content",minWidth:0,variants:{variant:{horizontal:{flexDirection:"row"},menu:{minWidth:128}}}}),Tr=Me(dt.Z0,{backgroundColor:"$hover",height:1,marginTop:"$2",marginRight:"-$2",marginBottom:"$2",marginLeft:"-$2"}),Ls=Me(dt.Rk,{height:"32px",width:"32px",backgroundColor:"$panel",borderRadius:"4px",padding:"0",margin:"0",display:"flex",alignItems:"center",justifyContent:"center",outline:"none",border:"none",pointerEvents:"all",cursor:"pointer",variants:{isActive:{true:{backgroundColor:"$selected",color:"$panel"},false:{}},bp:{mobile:{},small:{}}},compoundVariants:[{isActive:!1,bp:"small",css:{"&:focus":{backgroundColor:"$hover"},"&:hover:not(:disabled)":{backgroundColor:"$hover"}}}]});function di({children:e,size:n,disabled:o=!1,label:s,id:l}){return f.createElement("span",{id:l},f.createElement(dt.fC,{dir:"ltr"},f.createElement(dt.ce,{dir:"ltr",asChild:!0},f.createElement(Cr,{disabled:o,hasArrow:!0},s)),f.createElement(dt.VY,{dir:"ltr",asChild:!0,sideOffset:2,alignOffset:-2},f.createElement(xn,{size:n},e,f.createElement(dt.Eh,{offset:13})))))}function N9(e){var n=e,{id:o,children:s}=n,l=dr(n,["id","children"]);return f.createElement(dt.xz,{asChild:!0,id:o},f.createElement(ct,k({},l),s))}var D1=Me("hr",{height:1,marginTop:"$1",marginRight:"-$2",marginBottom:"$1",marginLeft:"-$2",border:"none",borderBottom:"1px solid $hover"}),Zf=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.length,zf=e=>{const n=e.document.pages[e.appState.currentPageId],{selectedIds:o}=e.document.pageStates[e.appState.currentPageId];return o.every(s=>n.shapes[s].isLocked)},Wf=e=>{const n=e.document.pages[e.appState.currentPageId],{selectedIds:o}=e.document.pageStates[e.appState.currentPageId];return o.every(s=>n.shapes[s].isAspectRatioLocked)},Ff=e=>{const n=e.document.pages[e.appState.currentPageId],o=e.document.pageStates[e.appState.currentPageId].selectedIds.map(s=>n.shapes[s]);return o.every(s=>s.children!==void 0||s.parentId===o[0].parentId&&o[0].parentId!==e.appState.currentPageId)},Nf=e=>{const{selectedIds:n}=e.document.pageStates[e.appState.currentPageId];return n.length>0},Uf=e=>{const{selectedIds:n}=e.document.pageStates[e.appState.currentPageId];return n.length>1};function Kf(){const e=Rt(),n=e.useStore(zf),o=e.useStore(Wf),s=e.useStore(Ff),l=e.useStore(Nf),c=e.useStore(Uf),d=e.useStore(Zf),p=d>1,h=d>2,g=f.useCallback(()=>{e.rotate()},[e]),v=f.useCallback(()=>{e.duplicate()},[e]),w=f.useCallback(()=>{e.toggleLocked()},[e]),x=f.useCallback(()=>{e.toggleAspectRatioLocked()},[e]),y=f.useCallback(()=>{e.group()},[e]),E=f.useCallback(()=>{e.moveToBack()},[e]),R=f.useCallback(()=>{e.moveBackward()},[e]),P=f.useCallback(()=>{e.moveForward()},[e]),$=f.useCallback(()=>{e.moveToFront()},[e]),I=f.useCallback(()=>{e.setShapeProps({rotation:0})},[e]),B=f.useCallback(()=>{e.align("top")},[e]),j=f.useCallback(()=>{e.align("centerVertical")},[e]),T=f.useCallback(()=>{e.align("bottom")},[e]),D=f.useCallback(()=>{e.stretch("vertical")},[e]),A=f.useCallback(()=>{e.distribute("vertical")},[e]),X=f.useCallback(()=>{e.align("left")},[e]),ne=f.useCallback(()=>{e.align("centerHorizontal")},[e]),he=f.useCallback(()=>{e.align("right")},[e]),Se=f.useCallback(()=>{e.stretch("horizontal")},[e]),ve=f.useCallback(()=>{e.distribute("horizontal")},[e]),me=f.useCallback(rt=>{e.setMenuOpen(rt)},[e]);return f.createElement(dt.fC,{dir:"ltr",onOpenChange:me},f.createElement(dt.xz,{dir:"ltr",asChild:!0,id:"TD-Tools-Dots"},f.createElement(ct,{variant:"circle"},f.createElement(z4,null))),f.createElement(vo,{sideOffset:16},f.createElement(f.Fragment,null,f.createElement(Ss,null,f.createElement(ct,{variant:"icon",disabled:!l,onClick:v},f.createElement(R1,{label:"Duplicate",kbd:"#D",id:"TD-Tools-Copy"},f.createElement(V4,null))),f.createElement(ct,{disabled:!l,onClick:g},f.createElement(R1,{label:"Rotate",id:"TD-Tools-Rotate"},f.createElement(pd,null))),f.createElement(ct,{disabled:!l,onClick:w},f.createElement(R1,{label:"Toggle Locked",kbd:"#L",id:"TD-Tools-Lock"},n?f.createElement(J4,null):f.createElement(ed,null))),f.createElement(ct,{disabled:!l,onClick:x},f.createElement(R1,{label:"Toggle Aspect Ratio Lock",id:"TD-Tools-AspectRatio"},o?f.createElement(S4,null):f.createElement(I4,null))),f.createElement(ct,{disabled:!l||!s&&!c,onClick:y},f.createElement(R1,{label:"Group",kbd:"#G",id:"TD-Tools-Group"},f.createElement(X4,null)))),f.createElement(Ss,null,f.createElement(ct,{disabled:!l,onClick:E},f.createElement(R1,{label:"Move to Back",kbd:"#\u21E7[",id:"TD-Tools-PinBottom"},f.createElement(ld,null))),f.createElement(ct,{disabled:!l,onClick:R},f.createElement(R1,{label:"Move Backward",kbd:"#[",id:"TD-Tools-ArrowDown"},f.createElement(w4,null))),f.createElement(ct,{disabled:!l,onClick:P},f.createElement(R1,{label:"Move Forward",kbd:"#]",id:"TD-Tools-ArrowUp"},f.createElement(E4,null))),f.createElement(ct,{disabled:!l,onClick:$},f.createElement(R1,{label:"Move to Front",kbd:"#\u21E7]",id:"TD-Tools-PinTop"},f.createElement(dd,null))),f.createElement(ct,{disabled:!l,onClick:I},f.createElement(R1,{label:"Reset Angle",id:"TD-Tools-ResetAngle"},f.createElement(m4,null)))),f.createElement(D1,null),f.createElement(Ss,null,f.createElement(ct,{disabled:!p,onClick:X,id:"TD-Tools-AlignLeft"},f.createElement(n2,null)),f.createElement(ct,{disabled:!p,onClick:ne,id:"TD-Tools-AlignCenterHorizontal"},f.createElement(t2,null)),f.createElement(ct,{disabled:!p,onClick:he,id:"TD-Tools-AlignRight"},f.createElement(o2,null)),f.createElement(ct,{disabled:!p,onClick:Se,id:"TD-Tools-StretchHorizontal"},f.createElement(c2,null)),f.createElement(ct,{disabled:!h,onClick:ve,id:"TD-Tools-SpaceEvenlyHorizontal"},f.createElement(a2,null))),f.createElement(Ss,null,f.createElement(ct,{disabled:!p,onClick:B,id:"TD-Tools-AlignTop"},f.createElement(i2,null)),f.createElement(ct,{disabled:!p,onClick:j,id:"TD-Tools-AlignCenterVertical"},f.createElement(r2,null)),f.createElement(ct,{disabled:!p,onClick:T,id:"TD-Tools-AlignBottom"},f.createElement(e2,null)),f.createElement(ct,{disabled:!p,onClick:D,id:"TD-Tools-tretchVertical"},f.createElement(d2,null)),f.createElement(ct,{disabled:!h,onClick:A,id:"TD-Tools-SpaceEvenlyVertical"},f.createElement(l2,null))))))}var Ss=Me("div",{position:"relative",display:"flex",width:"100%",background:"none",border:"none",cursor:"pointer",outline:"none",alignItems:"center",justifyContent:"flex-start",padding:0});function Xf(){const e=Rt(),n=f.useCallback(()=>{e.delete()},[e]),o=e.useStore(s=>s.appState.status==="idle"&&s.document.pageStates[s.appState.currentPageId].selectedIds.length>0);return f.createElement(R1,{label:"Delete",kbd:"\u232B",id:"TD-Delete"},f.createElement(ct,{variant:"circle",disabled:!o,onSelect:n},f.createElement(Sf,null)))}var Gf=e=>e.settings.isDebugMode,Yf=f.memo(function({onBlur:n}){const s=Rt().useStore(Gf);return f.createElement(qf,{onBlur:n},f.createElement(Jf,{id:"TD-Tools"},f.createElement(pf,null),f.createElement(eh,null,f.createElement(Kf,null),f.createElement(Af,null),f.createElement(Xf,null))),s&&f.createElement(Qf,null,f.createElement(af,null)))}),qf=Me("div",{position:"absolute",bottom:0,left:0,right:0,width:"100%",minWidth:0,maxWidth:"100%",display:"grid",gridTemplateColumns:"auto auto auto",gridTemplateRows:"auto auto",justifyContent:"space-between",padding:"0",gap:"$4",zIndex:200,pointerEvents:"none","& > div > *":{pointerEvents:"all"}}),Jf=Me("div",{gridRow:1,gridColumn:2,display:"flex",width:"fit-content",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"$4"}),Qf=Me("div",{gridRow:2,gridColumn:"1 / span 3"}),eh=Me("div",{position:"relative",display:"flex",alignItems:"center",gap:"$2"}),th=e=>e.settings;function rh(){const e=Rt(),n=e.useStore(th),o=f.useCallback(()=>{e.setSetting("isDebugMode",v=>!v)},[e]),s=f.useCallback(()=>{e.setSetting("isDarkMode",v=>!v)},[e]),l=f.useCallback(()=>{e.setSetting("isFocusMode",v=>!v)},[e]),c=f.useCallback(()=>{e.setSetting("showRotateHandles",v=>!v)},[e]),d=f.useCallback(()=>{e.setSetting("showGrid",v=>!v)},[e]),p=f.useCallback(()=>{e.setSetting("showBindingHandles",v=>!v)},[e]),h=f.useCallback(()=>{e.setSetting("isSnapping",v=>!v)},[e]),g=f.useCallback(()=>{e.setSetting("showCloneHandles",v=>!v)},[e]);return f.createElement(di,{label:"Preferences",id:"TD-MenuItem-Preferences"},f.createElement(Or,{checked:n.isDarkMode,onCheckedChange:s,kbd:"#\u21E7D",id:"TD-MenuItem-Preferences-Dark_Mode"},"Dark Mode"),f.createElement(Or,{checked:n.isFocusMode,onCheckedChange:l,kbd:"#.",id:"TD-MenuItem-Preferences-Focus_Mode"},"Focus Mode"),f.createElement(Or,{checked:n.isDebugMode,onCheckedChange:o,id:"TD-MenuItem-Preferences-Debug_Mode"},"Debug Mode"),f.createElement(Tr,null),f.createElement(Or,{checked:n.showRotateHandles,onCheckedChange:c,id:"TD-MenuItem-Preferences-Rotate_Handles"},"Rotate Handles"),f.createElement(Or,{checked:n.showBindingHandles,onCheckedChange:p,id:"TD-MenuItem-Preferences-Binding_Handles"},"Binding Handles"),f.createElement(Or,{checked:n.showCloneHandles,onCheckedChange:g,id:"TD-MenuItem-Preferences-Clone_Handles"},"Clone Handles"),f.createElement(Or,{checked:n.showGrid,onCheckedChange:d,kbd:"#\u21E7G",id:"TD-MenuItem-Preferences-Grid"},"Grid"),f.createElement(Or,{checked:n.isSnapping,onCheckedChange:h,id:"TD-MenuItem-Preferences-Always_Show_Snaps"},"Always Show Snaps"))}function nh(){return f.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},f.createElement("path",{fill:"none",stroke:"currentColor",strokeWidth:2,d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"}))}var oh=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.length,ih=e=>e.appState.disableAssets,sh=f.memo(function({showSponsorLink:n,readOnly:o}){const s=Rt(),l=s.useStore(oh),c=s.useStore(ih),[d,p]=f.useState(0);f.useEffect(()=>p(1),[]);const{onNewProject:h,onOpenProject:g,onSaveProject:v,onSaveProjectAs:w}=Z9(),x=f.useCallback(()=>Fe(this,null,function*(){yield s.exportAllShapesAs("png")}),[s]),y=f.useCallback(()=>Fe(this,null,function*(){yield s.exportAllShapesAs("jpeg")}),[s]),E=f.useCallback(()=>Fe(this,null,function*(){yield s.exportAllShapesAs("webp")}),[s]),R=f.useCallback(()=>Fe(this,null,function*(){yield s.exportAllShapesAs("pdf")}),[s]),P=f.useCallback(()=>Fe(this,null,function*(){yield s.exportAllShapesAs("svg")}),[s]),$=f.useCallback(()=>Fe(this,null,function*(){yield s.exportAllShapesAs("json")}),[s]),I=f.useCallback(()=>{var ye,Ye;(Ye=(ye=s.callbacks).onSignIn)==null||Ye.call(ye,s)},[s]),B=f.useCallback(()=>{var ye,Ye;(Ye=(ye=s.callbacks).onSignOut)==null||Ye.call(ye,s)},[s]),j=f.useCallback(()=>{s.cut()},[s]),T=f.useCallback(()=>{s.copy()},[s]),D=f.useCallback(()=>{s.paste()},[s]),A=f.useCallback(()=>{s.copySvg()},[s]),X=f.useCallback(()=>{s.copyJson()},[s]),ne=f.useCallback(()=>{s.selectAll()},[s]),he=f.useCallback(()=>{s.selectNone()},[s]),Se=f.useCallback(()=>{s.openAsset()},[s]),ve=f.useCallback(()=>{s.zoomTo(1)},[s]),me=s.callbacks.onNewProject||s.callbacks.onOpenProject||s.callbacks.onSaveProject||s.callbacks.onSaveProjectAs||s.callbacks.onExport,rt=s.callbacks.onSignIn||s.callbacks.onSignOut||n,ht=l>0;return f.createElement(dt.fC,{dir:"ltr"},f.createElement(N9,{isSponsor:n,id:"TD-MenuIcon"},f.createElement(Y4,null)),f.createElement(vo,{variant:"menu",id:"TD-Menu"},me&&f.createElement(di,{label:"File...",id:"TD-MenuItem-File"},s.callbacks.onNewProject&&f.createElement(tt,{onClick:h,kbd:"#N",id:"TD-MenuItem-File-New_Project"},"New Project"),s.callbacks.onOpenProject&&f.createElement(tt,{onClick:g,kbd:"#O",id:"TD-MenuItem-File-Open"},"Open..."),s.callbacks.onSaveProject&&f.createElement(tt,{onClick:v,kbd:"#S",id:"TD-MenuItem-File-Save"},"Save"),s.callbacks.onSaveProjectAs&&f.createElement(tt,{onClick:w,kbd:"#\u21E7S",id:"TD-MenuItem-File-Save_As"},"Save As..."),s.callbacks.onExport&&f.createElement(f.Fragment,null,f.createElement(D1,null),f.createElement(di,{label:"Export",size:"small",id:"TD-MenuItem-File-Export"},f.createElement(tt,{onClick:x,id:"TD-MenuItem-File-Export-PNG"},"PNG"),f.createElement(tt,{onClick:y,id:"TD-MenuItem-File-Export-JPG"},"JPG"),f.createElement(tt,{onClick:E,id:"TD-MenuItem-File-Export-WEBP"},"WEBP"),f.createElement(tt,{onClick:P,id:"TD-MenuItem-File-Export-SVG"},"SVG"),f.createElement(tt,{onClick:$,id:"TD-MenuItem-File-Export-JSON"},"JSON"))),!c&&f.createElement(f.Fragment,null,f.createElement(D1,null),f.createElement(tt,{onClick:Se,kbd:"#U",id:"TD-MenuItem-File-Upload_Media"},"Upload Media"))),!o&&f.createElement(f.Fragment,null,f.createElement(di,{label:"Edit...",id:"TD-MenuItem-Edit"},f.createElement(tt,{onSelect:yt,onClick:s.undo,kbd:"#Z",id:"TD-MenuItem-Edit-Undo"},"Undo"),f.createElement(tt,{onSelect:yt,onClick:s.redo,kbd:"#\u21E7Z",id:"TD-MenuItem-Edit-Redo"},"Redo"),f.createElement(Tr,{dir:"ltr"}),f.createElement(tt,{onSelect:yt,disabled:!ht,onClick:j,kbd:"#X",id:"TD-MenuItem-Edit-Cut"},"Cut"),f.createElement(tt,{onSelect:yt,disabled:!ht,onClick:T,kbd:"#C",id:"TD-MenuItem-Edit-Copy"},"Copy"),f.createElement(tt,{onSelect:yt,onClick:D,kbd:"#V",id:"TD-MenuItem-Edit-Paste"},"Paste"),f.createElement(Tr,{dir:"ltr"}),f.createElement(tt,{onSelect:yt,disabled:!ht,onClick:A,kbd:"#\u21E7C",id:"TD-MenuItem-Edit-Copy_as_SVG"},"Copy as SVG"),f.createElement(tt,{onSelect:yt,disabled:!ht,onClick:X,id:"TD-MenuItem-Edit-Copy_as_JSON"},"Copy as JSON"),f.createElement(Tr,{dir:"ltr"}),f.createElement(tt,{onSelect:yt,onClick:ne,kbd:"#A",id:"TD-MenuItem-Select_All"},"Select All"),f.createElement(tt,{onSelect:yt,onClick:he,id:"TD-MenuItem-Select_None"},"Select None"))),f.createElement(di,{label:"View",id:"TD-MenuItem-Edit"},f.createElement(tt,{onSelect:yt,onClick:s.zoomIn,kbd:"#+",id:"TD-MenuItem-View-ZoomIn"},"Zoom In"),f.createElement(tt,{onSelect:yt,onClick:s.zoomOut,kbd:"#-",id:"TD-MenuItem-View-ZoomOut"},"Zoom Out"),f.createElement(tt,{onSelect:yt,onClick:ve,kbd:"\u21E7+0",id:"TD-MenuItem-View-ZoomTo100"},"Zoom to 100%"),f.createElement(tt,{onSelect:yt,onClick:s.zoomToFit,kbd:"\u21E7+1",id:"TD-MenuItem-View-ZoomToFit"},"Zoom to Fit"),f.createElement(tt,{onSelect:yt,onClick:s.zoomToSelection,kbd:"\u21E7+2",id:"TD-MenuItem-View-ZoomToSelection"},"Zoom to Selection")),f.createElement(Tr,{dir:"ltr"}),f.createElement(rh,null),f.createElement(Tr,{dir:"ltr"}),f.createElement("a",{href:"https://github.com/Tldraw/Tldraw",target:"_blank",rel:"nofollow"},f.createElement(tt,{id:"TD-MenuItem-Github"},"GitHub",f.createElement(er,null,f.createElement(U4,null)))),f.createElement("a",{href:"https://twitter.com/Tldraw",target:"_blank",rel:"nofollow"},f.createElement(tt,{id:"TD-MenuItem-Twitter"},"Twitter",f.createElement(er,null,f.createElement(Hd,null)))),f.createElement("a",{href:"https://discord.gg/SBBEVCA4PG",target:"_blank",rel:"nofollow"},f.createElement(tt,{id:"TD-MenuItem-Discord"},"Discord",f.createElement(er,null,f.createElement(kf,null)))),n&&f.createElement("a",{href:"https://github.com/sponsors/steveruizok",target:"_blank",rel:"nofollow"},f.createElement(tt,{isSponsor:!0,id:"TD-MenuItem-Become_a_Sponsor"},"Become a Sponsor"," ",f.createElement(er,null,f.createElement(nh,null)))),rt&&f.createElement(f.Fragment,null,f.createElement(Tr,{dir:"ltr"})," ",s.callbacks.onSignIn&&f.createElement(tt,{onSelect:I,id:"TD-MenuItem-Sign_in"},"Sign In"),s.callbacks.onSignOut&&f.createElement(tt,{onSelect:B,id:"TD-MenuItem-Sign_out"},"Sign Out",f.createElement(er,null,f.createElement(F4,null))))))}),U9=Me("button",{position:"relative",height:"32px",width:"32px",backgroundColor:"$panel",borderRadius:"4px",padding:"0",margin:"0",outline:"none",border:"none",pointerEvents:"all",fontSize:"$0",color:"$text",cursor:"pointer",display:"grid",alignItems:"center",justifyContent:"center","& > *":{gridRow:1,gridColumn:1},"&:disabled":{opacity:"0.5"},"& > span":{width:"100%",height:"100%",display:"flex",alignItems:"center"},variants:{bp:{mobile:{backgroundColor:"transparent"},small:{"&:hover:not(:disabled)":{backgroundColor:"$hover"}}},size:{small:{height:32,width:32,"& svg:nth-of-type(1)":{height:"16px",width:"16px"}},medium:{height:44,width:44,"& svg:nth-of-type(1)":{height:"18px",width:"18px"}},large:{height:44,width:44,"& svg:nth-of-type(1)":{height:"20px",width:"20px"}}},isActive:{true:{color:"$selected"}}}}),ah=e=>Object.keys(e.document.pages).length>1;function lh({page:e,onOpen:n,onClose:o}){const s=Rt(),[l,c]=f.useState(!1),d=s.useStore(ah),p=f.useRef(null),h=f.useCallback(()=>{s.duplicatePage(e.id),o?.()},[s]),g=f.useCallback(()=>{window.confirm("Are you sure you want to delete this page?")&&(s.deletePage(e.id),o?.())},[s]),v=f.useCallback(E=>{if(c(E),E){n?.();return}},[s]),w=f.useCallback(()=>c(!1),[]);function x(E){E.stopPropagation()}function y(){const E=window.prompt("New name:",e.name);s.renamePage(e.id,E||e.name||"Page")}return f.useEffect(()=>{l&&requestAnimationFrame(()=>{const E=p.current;E&&(E.focus(),E.select())})},[l]),f.createElement(Gd,{open:l,onOpenChange:v},f.createElement(Yd,{asChild:!0,"data-shy":"true"},f.createElement(U9,{bp:vr},f.createElement(er,null,f.createElement(rd,null)))),f.createElement(qd,null,f.createElement(dh,{onPointerDown:w}),f.createElement(ch,{dir:"ltr",onKeyDown:x,onKeyUp:x},f.createElement(nl,{onSelect:y},"Rename"),f.createElement(nl,{onSelect:h},"Duplicate"),f.createElement(nl,{disabled:!d,onSelect:g},"Delete"),f.createElement(D1,null),f.createElement(t8,{asChild:!0},f.createElement(Cr,null,"Cancel")))))}var ch=Me(Qd,{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:240,maxWidth:"fit-content",maxHeight:"85vh",marginTop:"-5vh",pointerEvents:"all",backgroundColor:"$panel",padding:"$0",borderRadius:"$2",font:"$ui","&:focus":{outline:"none"}}),dh=Me(Jd,{backgroundColor:"rgba(0, 0, 0, .15)",position:"fixed",pointerEvents:"all",inset:0});function nl(e){var n=e,{onSelect:o}=n,s=dr(n,["onSelect"]);return f.createElement(e8,{asChild:!0,onClick:o,onSelect:o},f.createElement(Cr,k({},s)))}var uh=e=>Object.values(e.document.pages).sort((n,o)=>(n.childIndex||0)-(o.childIndex||0)),fh=e=>e.document.pages[e.appState.currentPageId].name,hh=e=>e.document.pages[e.appState.currentPageId].id;function ph(){const e=Rt(),n=f.useRef(!1),[o,s]=f.useState(!1);f.useEffect(()=>{n.current!==o&&(n.current=o)},[o]);const l=f.useCallback(()=>{s(!1)},[s]),c=f.useCallback(p=>{n.current!==p&&s(p)},[s]),d=e.useStore(fh);return f.createElement(dt.fC,{dir:"ltr",open:o,onOpenChange:c},f.createElement(dt.xz,{dir:"ltr",asChild:!0,id:"TD-Page"},f.createElement(ct,{variant:"text"},d||"Page")),f.createElement(vo,{variant:"menu",align:"start"},o&&f.createElement(gh,{onClose:l})))}function gh({onClose:e}){const n=Rt(),o=n.useStore(uh),s=n.useStore(hh),l=f.useCallback(()=>{n.createPage()},[n]),c=f.useCallback(d=>{e(),n.changePage(d)},[n]);return f.createElement(f.Fragment,null,f.createElement(dt.Ee,{dir:"ltr",value:s,onValueChange:c},o.map(d=>f.createElement(vh,{key:d.id},f.createElement(dt.Rk,{title:d.name||"Page",value:d.id,key:d.id,asChild:!0},f.createElement(Ch,null,f.createElement("span",null,d.name||"Page"),f.createElement(dt.wU,null,f.createElement(er,null,f.createElement(ka,null))))),f.createElement(lh,{page:d,onClose:e})))),f.createElement(Tr,null),f.createElement(dt.ck,{onSelect:l,asChild:!0},f.createElement(Cr,null,f.createElement("span",null,"Create Page"),f.createElement(er,null,f.createElement(fd,null)))))}var vh=Me("div",{display:"grid",gridTemplateColumns:"1fr auto",gridAutoFlow:"column",'& > *[data-shy="true"]':{opacity:0},'&:hover > *[data-shy="true"]':{opacity:1}}),Ch=Me(Cr,{minWidth:128}),mh=e=>e.document.pageStates[e.appState.currentPageId].camera.zoom,_h=f.memo(function(){const n=Rt(),o=n.useStore(mh);return f.createElement(dt.fC,{dir:"ltr"},f.createElement(dt.xz,{dir:"ltr",asChild:!0,id:"TD-Zoom"},f.createElement(wh,{onDoubleClick:n.resetZoom,variant:"text"},Math.round(o*100),"%")),f.createElement(vo,{align:"end"},f.createElement(tt,{onSelect:yt,onClick:n.zoomIn,kbd:"#+",id:"TD-Zoom-Zoom_In"},"Zoom In"),f.createElement(tt,{onSelect:yt,onClick:n.zoomOut,kbd:"#\u2212",id:"TD-Zoom-Zoom_Out"},"Zoom Out"),f.createElement(tt,{onSelect:yt,onClick:n.resetZoom,kbd:"\u21E70",id:"TD-Zoom-Zoom_To_100%"},"To 100%"),f.createElement(tt,{onSelect:yt,onClick:n.zoomToFit,kbd:"\u21E71",id:"TD-Zoom-To_Fit"},"To Fit"),f.createElement(tt,{onSelect:yt,onClick:n.zoomToSelection,kbd:"\u21E72",id:"TD-Zoom-To_Selection"},"To Selection")))}),wh=Me(ct,{minWidth:56}),bh=e=>e.appState.currentStyle,xh=e=>e.document.pageStates[e.appState.currentPageId].selectedIds,yh=Object.keys(Wa),K9={draw:f.createElement(yf,null),solid:f.createElement(Ef,null),dashed:f.createElement(wf,null),dotted:f.createElement(xf,null)},Eh={small:f.createElement(If,null),medium:f.createElement(Mf,null),large:f.createElement(Pf,null)},Lh={start:f.createElement(Id,null),middle:f.createElement(Ed,null),end:f.createElement(Pd,null),justify:f.createElement(Sd,null)},Sh=e=>e.settings.isDarkMode?"dark":"light",Rh=e=>{const{activeTool:n,currentPageId:o}=e.appState;switch(n){case"select":{const s=e.document.pages[o];let l=!1,c=!1;for(const d of e.document.pageStates[o].selectedIds)"text"in s.shapes[d]&&(l=!0),"label"in s.shapes[d]&&(c=!0);return l?"text":c?"label":""}case"text":return"text";case"rectangle":return"label";case"ellipse":return"label";case"triangle":return"label";case"arrow":return"label";case"line":return"label"}return!1},Ih=f.memo(function(){const n=Rt(),o=n.useStore(Sh),s=n.useStore(Rh),l=n.useStore(bh),c=n.useStore(xh),[d,p]=f.useState(l),h=f.useRef(l);f.useEffect(()=>{const{appState:{currentStyle:R},page:P,selectedIds:$}=n;let I={};if($.length<=0)I=R;else{const B=new Set([]);n.selectedIds.map(j=>P.shapes[j]).forEach(j=>{yh.forEach(T=>{if(!B.has(T))if(I[T]===void 0)I[T]=j.style[T];else{if(I[T]===j.style[T])return;I[T]=j.style[T],B.add(T)}})})}JSON.stringify(I)!==JSON.stringify(h.current)&&(h.current=I,p(I))},[l,c]);const g=f.useCallback(R=>{n.style({isFilled:R})},[]),v=f.useCallback(R=>{n.style({dash:R})},[]),w=f.useCallback(R=>{n.style({size:R})},[]),x=f.useCallback(R=>{n.style({font:R})},[]),y=f.useCallback(R=>{n.style({textAlign:R})},[]),E=f.useCallback(R=>{n.setMenuOpen(R)},[n]);return f.createElement(dt.fC,{dir:"ltr",onOpenChange:E},f.createElement(dt.xz,{asChild:!0,id:"TD-Styles"},f.createElement(ct,{variant:"text"},"Styles",f.createElement(Ph,{style:{color:ai[o][d.color]}},d.isFilled&&f.createElement(W9,{size:16,stroke:"none",fill:Za[o][d.color]}),K9[d.dash]))),f.createElement(vo,null,f.createElement(ui,{variant:"tall",id:"TD-Styles-Color-Container"},f.createElement("span",null,"Color"),f.createElement(Mh,null,Object.keys(ai.light).map(R=>f.createElement(dt.ck,{key:R,onSelect:yt,asChild:!0,id:`TD-Styles-Color-Swatch-${R}`},f.createElement(ct,{variant:"icon",isActive:d.color===R,onClick:()=>n.style({color:R})},f.createElement(W9,{size:18,strokeWidth:2.5,fill:d.isFilled?Za.light[R]:"transparent",stroke:ai.light[R]})))))),f.createElement(Or,{variant:"styleMenu",checked:!!d.isFilled,onCheckedChange:g,id:"TD-Styles-Fill"},"Fill"),f.createElement(ui,{id:"TD-Styles-Dash-Container"},"Dash",f.createElement(Rs,{dir:"ltr",value:d.dash,onValueChange:v},Object.values(W2).map(R=>f.createElement(Ls,{key:R,isActive:R===d.dash,value:R,onSelect:yt,bp:vr,id:`TD-Styles-Dash-${R}`},K9[R])))),f.createElement(ui,{id:"TD-Styles-Size-Container"},"Size",f.createElement(Rs,{dir:"ltr",value:d.size,onValueChange:w},Object.values(z2).map(R=>f.createElement(Ls,{key:R,isActive:R===d.size,value:R,onSelect:yt,bp:vr,id:`TD-Styles-Dash-${R}`},Eh[R])))),(s==="text"||s==="label")&&f.createElement(f.Fragment,null,f.createElement(D1,null),f.createElement(ui,{id:"TD-Styles-Font-Container"},"Font",f.createElement(Rs,{dir:"ltr",value:d.font,onValueChange:x},Object.values(N2).map(R=>f.createElement(Ls,{key:R,isActive:R===d.font,value:R,onSelect:yt,bp:vr,id:`TD-Styles-Font-${R}`},f.createElement($h,{fontStyle:R},"Aa"))))),s==="text"&&f.createElement(ui,{id:"TD-Styles-Align-Container"},"Align",f.createElement(Rs,{dir:"ltr",value:d.textAlign,onValueChange:y},Object.values(F2).map(R=>f.createElement(Ls,{key:R,isActive:R===d.textAlign,value:R,onSelect:yt,bp:vr,id:`TD-Styles-Align-${R}`},Lh[R])))))))}),Mh=Me("div",{display:"grid",gridTemplateColumns:"repeat(4, auto)",gap:0}),ui=Me("div",{position:"relative",width:"100%",background:"none",border:"none",cursor:"pointer",minHeight:"32px",outline:"none",color:"$text",fontFamily:"$ui",fontWeight:400,fontSize:"$1",padding:"$2 0 $2 $3",borderRadius:4,userSelect:"none",margin:0,display:"flex",gap:"$3",flexDirection:"row",alignItems:"center",justifyContent:"space-between",variants:{variant:{tall:{alignItems:"flex-start",padding:"0 0 0 $3","& > span":{paddingTop:"$4"}}}}}),Rs=Me(dt._x,{display:"flex",flexDirection:"row",gap:"$1"}),Ph=Me("div",{display:"grid","& > *":{gridColumn:1,gridRow:1}}),$h=Me("div",{width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"$3",variants:{fontStyle:{script:{fontFamily:"Caveat Brush"},sans:{fontFamily:"Recursive"},erif:{fontFamily:"Georgia"},mono:{fontFamily:"Recursive Mono"}}}}),Hh=e=>e.room,kh=f.memo(function(){const n=Rt(),o=n.useStore(Hh),[s,l]=f.useState(!1),c=f.useCallback(()=>{l(!0),z.copyStringToClipboard(window.location.href),setTimeout(()=>l(!1),1200)},[]),d=f.useCallback(()=>Fe(this,null,function*(){n.isDirty?n.fileSystemHandle?window.confirm("Do you want to save changes to your current project?")&&(yield n.saveProject()):window.confirm("Do you want to save your current project?")&&(yield n.saveProject()):n.fileSystemHandle||window.confirm("Do you want to save your current project?")&&(yield n.saveProject())}),[]),p=f.useCallback(()=>Fe(this,null,function*(){const h=new Headers({"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}),g=yield fetch("http://tldraw.com/api/create-multiplayer-room",{headers:h,method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(n.document)}).then(v=>v.json());window.location.href=`http://tldraw.com/r/${g.roomId}`}),[]);return f.createElement(dt.fC,{dir:"ltr"},f.createElement(N9,{id:"TD-MultiplayerMenuIcon"},o?f.createElement(Hf,null):f.createElement(s2,null)),f.createElement(vo,{variant:"menu",align:"start",id:"TD-MultiplayerMenu"},f.createElement(tt,{id:"TD-Multiplayer-CopyInviteLink",onClick:c,disabled:!o},"Copy Invite Link",f.createElement(er,null,s?f.createElement(ka,null):f.createElement(T4,null))),f.createElement(Tr,{id:"TD-Multiplayer-CopyInviteLinkDivider"}),f.createElement(tt,{id:"TD-Multiplayer-CreateMultiplayerRoom",onClick:d},f.createElement("a",{href:"https://tldraw.com/r"},"Create a Multiplayer Project"))))});function Oh({readOnly:e,showPages:n,showMenu:o,showStyles:s,showZoom:l,showSponsorLink:c,showMultiplayerMenu:d}){const p=Rt();return f.createElement(Th,null,(o||n)&&f.createElement(Es,{side:"left",id:"TD-MenuPanel"},o&&f.createElement(sh,{showSponsorLink:c,readOnly:e}),d&&f.createElement(kh,null),n&&f.createElement(ph,null)),f.createElement(Bh,null),(s||l)&&f.createElement(Es,{side:"right"},s&&!e&&f.createElement(Ih,null),f.createElement(Vh,{bp:vr},f.createElement(ct,null,f.createElement(Rf,{onClick:p.undo})),f.createElement(ct,null,f.createElement(Lf,{onClick:p.redo}))),l&&f.createElement(_h,null)))}var Th=Me("div",{width:"100%",position:"absolute",top:0,left:0,right:0,display:"flex",flexDirection:"row",pointerEvents:"none","& > *":{pointerEvents:"all"}}),Bh=Me("div",{flexGrow:2,pointerEvents:"none"}),Vh=Me("div",{display:"flex",flexDirection:"row",variants:{bp:{small:{display:"inherit"},large:{display:"none"}}}}),jh=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.length,Ah=e=>e.settings.isDebugMode,Dh=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.some(n=>e.document.pages[e.appState.currentPageId].shapes[n].children!==void 0),Zh=e=>e.stopPropagation(),zh=({onBlur:e,children:n})=>f.createElement(ns,{dir:"ltr"},f.createElement(p8,{dir:"ltr"},n),f.createElement(Wh,{onBlur:e})),Wh=f.memo(function({onBlur:n}){const o=Rt(),s=o.useStore(jh),l=o.useStore(Ah),c=o.useStore(Dh),d=f.useRef(null),p=f.useCallback(()=>{o.flipHorizontal()},[o]),h=f.useCallback(()=>{o.flipVertical()},[o]),g=f.useCallback(()=>{o.duplicate()},[o]),v=f.useCallback(()=>{o.toggleLocked()},[o]),w=f.useCallback(()=>{o.group()},[o]),x=f.useCallback(()=>{o.moveToBack()},[o]),y=f.useCallback(()=>{o.moveBackward()},[o]),E=f.useCallback(()=>{o.moveForward()},[o]),R=f.useCallback(()=>{o.moveToFront()},[o]),P=f.useCallback(()=>{o.delete()},[o]),$=f.useCallback(()=>{o.copyJson()},[o]),I=f.useCallback(()=>{o.cut()},[o]),B=f.useCallback(()=>{o.copy()},[o]),j=f.useCallback(()=>{o.paste()},[o]),T=f.useCallback(()=>{o.copySvg()},[o]),D=f.useCallback(()=>{o.undo()},[o]),A=f.useCallback(()=>{o.redo()},[o]),X=f.useCallback(()=>Fe(this,null,function*(){yield o.exportSelectedShapesAs("png")}),[o]),ne=f.useCallback(()=>Fe(this,null,function*(){yield o.exportSelectedShapesAs("jpeg")}),[o]),he=f.useCallback(()=>Fe(this,null,function*(){yield o.exportSelectedShapesAs("webp")}),[o]),Se=f.useCallback(()=>Fe(this,null,function*(){yield o.exportSelectedShapesAs("svg")}),[o]),ve=f.useCallback(()=>Fe(this,null,function*(){yield o.exportSelectedShapesAs("json")}),[o]),me=s>0,rt=s>1,ht=s>2;return f.createElement(os,{dir:"ltr",ref:d,onEscapeKeyDown:Zh,asChild:!0,tabIndex:-1,onBlur:n},f.createElement(xn,{id:"TD-ContextMenu"},me?f.createElement(f.Fragment,null,f.createElement(mt,{onClick:g,kbd:"#D",id:"TD-ContextMenu-Duplicate"},"Duplicate"),f.createElement(mt,{onClick:p,kbd:"\u21E7H",id:"TD-ContextMenu-Flip_Horizontal"},"Flip Horizontal"),f.createElement(mt,{onClick:h,kbd:"\u21E7V",id:"TD-ContextMenu-Flip_Vertical"},"Flip Vertical"),f.createElement(mt,{onClick:v,kbd:"#\u21E7L",id:"TD-ContextMenu- Lock_Unlock"},"Lock / Unlock"),(rt||c)&&f.createElement(D1,null),rt&&f.createElement(mt,{onClick:w,kbd:"#G",id:"TD-ContextMenu-Group"},"Group"),c&&f.createElement(mt,{onClick:w,kbd:"#G",id:"TD-ContextMenu-Ungroup"},"Ungroup"),f.createElement(D1,null),f.createElement(X9,{label:"Move",id:"TD-ContextMenu-Move"},f.createElement(mt,{onClick:R,kbd:"\u21E7]",id:"TD-ContextMenu-Move-To_Front"},"To Front"),f.createElement(mt,{onClick:E,kbd:"]",id:"TD-ContextMenu-Move-Forward"},"Forward"),f.createElement(mt,{onClick:y,kbd:"[",id:"TD-ContextMenu-Move-Backward"},"Backward"),f.createElement(mt,{onClick:x,kbd:"\u21E7[",id:"TD-ContextMenu-Move-To_Back"},"To Back")),f.createElement(Xh,null),rt&&f.createElement(Fh,{hasTwoOrMore:rt,hasThreeOrMore:ht}),o.callbacks.onExport?f.createElement(f.Fragment,null,f.createElement(D1,null),f.createElement(X9,{label:"Export",size:"small",id:"TD-ContextMenu-Export"},f.createElement(mt,{onClick:X,id:"TD-ContextMenu-Export-PNG"},"PNG"),f.createElement(mt,{onClick:ne,id:"TD-ContextMenu-Export-JPG"},"JPG"),f.createElement(mt,{onClick:he,id:"TD-ContextMenu-Export-WEBP"},"WEBP"),f.createElement(mt,{onClick:Se,id:"TD-ContextMenu-Export-SVG"},"SVG"),f.createElement(mt,{onClick:ve,id:"TD-ContextMenu-Export-JSON"},"JSON"),f.createElement(D1,null),f.createElement(mt,{onClick:T,kbd:"#\u21E7C",id:"TD-ContextMenu-Export-Copy_as_SVG"},"Copy as SVG"),l&&f.createElement(mt,{onClick:$,id:"TD-ContextMenu-Export-Copy_as_JSON"},"Copy as JSON"))):f.createElement(f.Fragment,null,f.createElement(D1,null),f.createElement(mt,{onClick:T,kbd:"#\u21E7C",id:"TD-ContextMenu-Export-Copy_as_SVG"},"Copy as SVG"),l&&f.createElement(mt,{onClick:$,id:"TD-ContextMenu-Export-Copy_as_JSON"},"Copy as JSON")),f.createElement(D1,null),f.createElement(mt,{onClick:I,kbd:"#X",id:"TD-ContextMenu-Cut"},"Cut"),f.createElement(mt,{onClick:B,kbd:"#C",id:"TD-ContextMenu-Copy"},"Copy"),f.createElement(mt,{onClick:j,kbd:"#V",id:"TD-ContextMenu-Paste"},"Paste"),f.createElement(D1,null),f.createElement(mt,{onClick:P,kbd:"\u232B",id:"TD-ContextMenu-Delete"},"Delete")):f.createElement(f.Fragment,null,f.createElement(mt,{onClick:j,kbd:"#V",id:"TD-ContextMenu-Paste"},"Paste"),f.createElement(mt,{onClick:D,kbd:"#Z",id:"TD-ContextMenu-Undo"},"Undo"),f.createElement(mt,{onClick:A,kbd:"#\u21E7Z",id:"TD-ContextMenu-Redo"},"Redo"))))});function Fh({hasThreeOrMore:e}){const n=Rt(),o=f.useCallback(()=>{n.align("top")},[n]),s=f.useCallback(()=>{n.align("centerVertical")},[n]),l=f.useCallback(()=>{n.align("bottom")},[n]),c=f.useCallback(()=>{n.stretch("vertical")},[n]),d=f.useCallback(()=>{n.distribute("vertical")},[n]),p=f.useCallback(()=>{n.align("left")},[n]),h=f.useCallback(()=>{n.align("centerHorizontal")},[n]),g=f.useCallback(()=>{n.align("right")},[n]),v=f.useCallback(()=>{n.stretch("horizontal")},[n]),w=f.useCallback(()=>{n.distribute("horizontal")},[n]);return f.createElement("span",{id:"TD-ContextMenu-Align_Duplicate"},f.createElement(ns,{dir:"ltr"},f.createElement(il,{isSubmenu:!0},"Align / Distribute"),f.createElement(os,{asChild:!0,sideOffset:2,alignOffset:-2},f.createElement(Nh,{numberOfSelected:e?"threeOrMore":"twoOrMore"},f.createElement(mr,{onClick:p,id:"TD-ContextMenu-Align_Duplicate-AlignLeft"},f.createElement(n2,null)),f.createElement(mr,{onClick:h,id:"TD-ContextMenu-Align_Duplicate-AlignCenterHorizontal"},f.createElement(t2,null)),f.createElement(mr,{onClick:g,id:"TD-ContextMenu-Align_Duplicate-AlignRight"},f.createElement(o2,null)),f.createElement(mr,{onClick:v,id:"TD-ContextMenu-Align_Duplicate-StretchHorizontal"},f.createElement(c2,null)),e&&f.createElement(mr,{onClick:w,id:"TD-ContextMenu-Align_Duplicate-SpaceEvenlyHorizontal"},f.createElement(a2,null)),f.createElement(mr,{onClick:o,id:"TD-ContextMenu-Align_Duplicate-AlignTop"},f.createElement(i2,null)),f.createElement(mr,{onClick:s,id:"TD-ContextMenu-Align_Duplicate-AlignCenterVertical"},f.createElement(r2,null)),f.createElement(mr,{onClick:l,id:"TD-ContextMenu-Align_Duplicate-AlignBottom"},f.createElement(e2,null)),f.createElement(mr,{onClick:c,id:"TD-ContextMenu-Align_Duplicate-StretchVertical"},f.createElement(d2,null)),e&&f.createElement(mr,{onClick:d,id:"TD-ContextMenu-Align_Duplicate-SpaceEvenlyVertical"},f.createElement(l2,null)),f.createElement(ol,{offset:13})))))}var Nh=Me(xn,{display:"grid",variants:{numberOfSelected:{threeOrMore:{gridTemplateColumns:"repeat(5, auto)"},twoOrMore:{gridTemplateColumns:"repeat(4, auto)"}}}}),Uh=e=>e.appState.currentPageId,Kh=e=>e.document.pages;function Xh(){const e=Rt(),n=e.useStore(Uh),o=e.useStore(Kh),s=Object.values(o).sort((l,c)=>(l.childIndex||0)-(c.childIndex||0)).filter(l=>l.id!==n);return s.length===0?null:f.createElement(ns,{dir:"ltr"},f.createElement(il,{isSubmenu:!0},"Move To Page"),f.createElement(os,{dir:"ltr",sideOffset:2,alignOffset:-2,asChild:!0},f.createElement(xn,null,s.map(({id:l,name:c},d)=>f.createElement(mt,{key:l,disabled:l===n,onClick:()=>e.moveToPage(l)},c||`Page ${d}`)),f.createElement(ol,{offset:13}))))}function X9({children:e,label:n,size:o,id:s}){return f.createElement("span",{id:s},f.createElement(ns,{dir:"ltr"},f.createElement(il,{isSubmenu:!0},n),f.createElement(os,{dir:"ltr",sideOffset:2,alignOffset:-2,asChild:!0},f.createElement(xn,{size:o},e,f.createElement(ol,{offset:13})))))}var ol=Me(h8,{fill:"$panel"});function mr(e){var n=e,{onSelect:o}=n,s=dr(n,["onSelect"]);return f.createElement(b2,{dir:"ltr",onSelect:o,asChild:!0},f.createElement(ct,k({},s)))}var mt=e=>{var n=e,{id:o}=n,s=dr(n,["id"]);return f.createElement(b2,{asChild:!0,id:o},f.createElement(Cr,k({},s)))},il=e=>{var n=e,{isSubmenu:o}=n,s=dr(n,["isSubmenu"]);return f.createElement(f8,{asChild:!0},f.createElement(Cr,k({hasArrow:o},s)))};function Gh({onSelect:e}){return f.createElement(Yh,null,f.createElement(U9,{onClick:e},f.createElement(D4,null)))}var Yh=Me("div",{opacity:1,zIndex:100,backgroundColor:"transparent","& svg":{color:"$text"},"&:hover svg":{color:"$text"}}),qh=e=>e.appState.isLoading;function Jh(){const n=Rt().useStore(qh);return f.createElement(Qh,{hidden:!n},"Loading...")}var Qh=Me("div",{position:"absolute",top:0,left:"50%",transform:"translate(-50%, 0)",borderBottomLeftRadius:"12px",borderBottomRightRadius:"12px",padding:"8px 16px",fontFamily:"var(--fonts-ui)",fontSize:"var(--fontSizes-1)",boxShadow:"var(--shadows-panel)",backgroundColor:"white",zIndex:200,pointerEvents:"none","& > div > *":{pointerEvents:"all"},variants:{transform:{hidden:{transform:"translate(-50%, 100%)"},visible:{transform:"translate(-50%, 0%)"}}}});function ep({id:e,document:n,currentPageId:o,autofocus:s=!0,showMenu:l=!0,showMultiplayerMenu:c=!0,showPages:d=!0,showTools:p=!0,showZoom:h=!0,showStyles:g=!0,showUI:v=!0,readOnly:w=!1,showSponsorLink:x=!1,disableAssets:y=!1,onMount:E,onChange:R,onChangePresence:P,onNewProject:$,onSaveProject:I,onSaveProjectAs:B,onOpenProject:j,onOpenMedia:T,onSignOut:D,onSignIn:A,onUndo:X,onRedo:ne,onPersist:he,onPatch:Se,onCommand:ve,onChangePage:me,onAssetCreate:rt,onAssetDelete:ht,onExport:ye}){const[Ye,le]=f.useState(e),[Ne,Gt]=f.useState(()=>new li(e,{onMount:E,onChange:R,onChangePresence:P,onNewProject:$,onSaveProject:I,onSaveProjectAs:B,onOpenProject:j,onOpenMedia:T,onSignOut:D,onSignIn:A,onUndo:X,onRedo:ne,onPersist:he,onPatch:Se,onCommand:ve,onChangePage:me,onAssetDelete:ht,onAssetCreate:rt}));return f.useLayoutEffect(()=>{if(e===Ye)return;const s1=new li(e,{onMount:E,onChange:R,onChangePresence:P,onNewProject:$,onSaveProject:I,onSaveProjectAs:B,onOpenProject:j,onOpenMedia:T,onSignOut:D,onSignIn:A,onUndo:X,onRedo:ne,onPersist:he,onPatch:Se,onCommand:ve,onChangePage:me,onAssetDelete:ht,onAssetCreate:rt,onExport:ye});le(e),Gt(s1)},[Ye,e]),f.useEffect(()=>{!n||(n.id===Ne.document.id?Ne.updateDocument(n):Ne.loadDocument(n))},[n,Ne]),f.useEffect(()=>{Ne.setDisableAssets(y)},[Ne,y]),f.useEffect(()=>{!o||Ne.changePage(o)},[o,Ne]),f.useEffect(()=>{Ne.readOnly=w},[Ne,w]),f.useEffect(()=>{Ne.callbacks={onMount:E,onChange:R,onChangePresence:P,onNewProject:$,onSaveProject:I,onSaveProjectAs:B,onOpenProject:j,onOpenMedia:T,onSignOut:D,onSignIn:A,onUndo:X,onRedo:ne,onPersist:he,onPatch:Se,onCommand:ve,onChangePage:me,onAssetDelete:ht,onAssetCreate:rt,onExport:ye}},[E,R,P,$,I,B,j,T,D,A,X,ne,he,Se,ve,me,ht,rt,ye]),f.createElement(A9.Provider,{value:Ne},f.createElement(tp,{key:Ye||"Tldraw",id:Ye,autofocus:s,showPages:d,showMenu:l,showMultiplayerMenu:c,showStyles:g,showZoom:h,showTools:p,showUI:v,showSponsorLink:x,readOnly:w}))}var tp=f.memo(function({id:n,autofocus:o,showPages:s,showMenu:l,showMultiplayerMenu:c,showZoom:d,showStyles:p,showTools:h,showSponsorLink:g,readOnly:v,showUI:w}){var x,y;const E=Rt(),R=f.useRef(null),P=E.useStore(),{document:$,settings:I,appState:B,room:j}=P,T=P.appState.activeTool==="select",D=$.pages[B.currentPageId],A=$.pageStates[D.id],X=$.assets,{selectedIds:ne}=A,he=ne.length===1&&D.shapes[ne[0]]&&z.getShapeUtil(D.shapes[ne[0]].type).hideBounds,Se=ne.length===1&&D.shapes[ne[0]]&&z.getShapeUtil(D.shapes[ne[0]].type).hideResizeHandles,ve=f.useMemo(()=>({isDarkMode:I.isDarkMode}),[I.isDarkMode]),me=f.useMemo(()=>I.isDarkMode?{brushFill:"rgba(180, 180, 180, .05)",brushStroke:"rgba(180, 180, 180, .25)",selected:"rgba(38, 150, 255, 1.000)",selectFill:"rgba(38, 150, 255, 0.05)",background:"#212529",foreground:"#49555f"}:{},[I.isDarkMode]),rt=E.session!==void 0,ht=rt&&((x=E.session)==null?void 0:x.constructor.name)!=="BrushSession"||!T||he||!!A.editingId,ye=rt||!T,Ye=rt&&P.appState.status!=="brushing"||!T,le=rt||!T||!I.showCloneHandles||A.camera.zoom<.2;return f.createElement(np,{ref:R,tabIndex:-0,className:I.isDarkMode?H8:""},f.createElement(Jh,null),f.createElement(rp,{focusableRef:R,autofocus:o}),f.createElement(zh,null,f.createElement(G7,{id:n,containerRef:R,shapeUtils:po,page:D,pageState:A,assets:X,snapLines:B.snapLines,grid:lo,users:j?.users,userId:j?.userId,theme:me,meta:ve,hideBounds:ht,hideHandles:ye,hideResizeHandles:Se,hideIndicators:Ye,hideBindingHandles:!I.showBindingHandles,hideCloneHandles:le,hideRotateHandles:!I.showRotateHandles,hideGrid:!I.showGrid,performanceMode:(y=E.session)==null?void 0:y.performanceMode,onPinchStart:E.onPinchStart,onPinchEnd:E.onPinchEnd,onPinch:E.onPinch,onPan:E.onPan,onZoom:E.onZoom,onPointerDown:E.onPointerDown,onPointerMove:E.onPointerMove,onPointerUp:E.onPointerUp,onPointCanvas:E.onPointCanvas,onDoubleClickCanvas:E.onDoubleClickCanvas,onRightPointCanvas:E.onRightPointCanvas,onDragCanvas:E.onDragCanvas,onReleaseCanvas:E.onReleaseCanvas,onPointShape:E.onPointShape,onDoubleClickShape:E.onDoubleClickShape,onRightPointShape:E.onRightPointShape,onDragShape:E.onDragShape,onHoverShape:E.onHoverShape,onUnhoverShape:E.onUnhoverShape,onReleaseShape:E.onReleaseShape,onPointBounds:E.onPointBounds,onDoubleClickBounds:E.onDoubleClickBounds,onRightPointBounds:E.onRightPointBounds,onDragBounds:E.onDragBounds,onHoverBounds:E.onHoverBounds,onUnhoverBounds:E.onUnhoverBounds,onReleaseBounds:E.onReleaseBounds,onPointBoundsHandle:E.onPointBoundsHandle,onDoubleClickBoundsHandle:E.onDoubleClickBoundsHandle,onRightPointBoundsHandle:E.onRightPointBoundsHandle,onDragBoundsHandle:E.onDragBoundsHandle,onHoverBoundsHandle:E.onHoverBoundsHandle,onUnhoverBoundsHandle:E.onUnhoverBoundsHandle,onReleaseBoundsHandle:E.onReleaseBoundsHandle,onPointHandle:E.onPointHandle,onDoubleClickHandle:E.onDoubleClickHandle,onRightPointHandle:E.onRightPointHandle,onDragHandle:E.onDragHandle,onHoverHandle:E.onHoverHandle,onUnhoverHandle:E.onUnhoverHandle,onReleaseHandle:E.onReleaseHandle,onError:E.onError,onRenderCountChange:E.onRenderCountChange,onShapeChange:E.onShapeChange,onShapeBlur:E.onShapeBlur,onShapeClone:E.onShapeClone,onBoundsChange:E.updateBounds,onKeyDown:E.onKeyDown,onKeyUp:E.onKeyUp,onDragOver:E.onDragOver,onDrop:E.onDrop})),w&&f.createElement(op,null,I.isFocusMode?f.createElement(Gh,{onSelect:E.toggleFocusMode}):f.createElement(f.Fragment,null,f.createElement(Oh,{readOnly:v,showPages:s,showMenu:l,showMultiplayerMenu:c,showStyles:p,showZoom:d,showSponsorLink:g}),f.createElement(ip,null),h&&!v&&f.createElement(Yf,null))))}),rp=f.memo(function({focusableRef:n,autofocus:o}){return rf(n),nf(),f.useEffect(()=>{var s;o&&((s=n.current)==null||s.focus())},[o]),null}),np=Me("div",{position:"absolute",height:"100%",width:"100%",minHeight:0,minWidth:0,maxHeight:"100%",maxWidth:"100%",overflow:"hidden",boxSizing:"border-box",outline:"none","& .tl-container":{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:1},"& input, textarea, button, select, label, button":{webkitTouchCallout:"none",webkitUserSelect:"none","-webkit-tap-highlight-color":"transparent","tap-highlight-color":"transparent"}}),op=Me("div",{position:"absolute",top:0,left:0,height:"100%",width:"100%",padding:"8px 8px 0 8px",display:"flex",alignItems:"flex-start",justifyContent:"flex-start",pointerEvents:"none",zIndex:2,"& > *":{pointerEvents:"all"}}),ip=Me("div",{flexGrow:2});// @license © 2020 Google LLC. Licensed under the Apache License, Version 2.0.
}}]);

//# sourceMappingURL=742.58cf11a7.js.map