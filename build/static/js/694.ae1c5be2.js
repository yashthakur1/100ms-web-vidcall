"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[694],{9112:(Ae,q,t)=>{t.d(q,{M:()=>i});var e=t(3751),S=t(9130),b=t(5581);const i=()=>(0,e._U)((0,S.EP)(b._8.appConfig))},5213:(Ae,q,t)=>{t.d(q,{jc:()=>c,R:()=>A,Kx:()=>k});var e=t(8160),S=t(3751),b=t(9130),i=t(5581);const c=()=>!!(0,S._U)((0,b.EP)(i._8.chatOpen)),A=()=>{const j=(0,S.cw)(),L=(0,S.gg)();return(0,e.useCallback)(()=>{const z=L.getState((0,b.EP)(i._8.chatOpen));j.setAppData(i._8.chatOpen,!z,!0)},[L,j])},k=()=>{const j=(0,S.cw)();let L=(0,S._U)((0,b.EP)(i._8.chatDraft));L==null&&(L="");const G=(0,e.useCallback)(z=>{j.setAppData(i._8.chatDraft,z,!0)},[j]);return[L,G]}},8961:(Ae,q,t)=>{t.d(q,{Z:()=>b});var e=t(9130),S=t(3751);const b=i=>{const c=i===e.Mv.audio,A=c?e.Hx:e.k0,k=(0,S._U)(A.selectedItem),j=(0,S._U)(A.selection),L=(0,S._U)(A.list),G=(0,S.cw)(),z=c?G.audioPlaylist:G.videoPlaylist;return{active:k,hasNext:j.hasNext,hasPrevious:j.hasPrevious,actions:z,list:L}}},9121:(Ae,q,t)=>{t.d(q,{VK:()=>Y,nN:()=>M,l0:()=>le.l});var e=t(8160),S=t(4696),b=t(3751),i=t(9130),c=t(108),A=t.n(c),k=Object.defineProperty,j=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,z=(R,m,u)=>m in R?k(R,m,{enumerable:!0,configurable:!0,writable:!0,value:u}):R[m]=u,J=(R,m)=>{for(var u in m||(m={}))L.call(m,u)&&z(R,u,m[u]);if(j)for(var u of j(m))G.call(m,u)&&z(R,u,m[u]);return R},re=(R,m,u)=>(z(R,typeof m!="symbol"?m+"":m,u),u);const de=R=>JSON.stringify(R,(m,u)=>u===void 0?null:u);class W{constructor(){re(this,"init",(m="")=>{this.initialized||(this.pusher=new(A())("",{cluster:"ap2",authEndpoint:""}),this.channel=this.pusher.subscribe(`private-${m}`),this.channel.bind("pusher:subscription_succeeded",this.resendLastEvents),console.log("Whiteboard initialized communication through Pusher"),this.initialized=!0)}),re(this,"storeEvent",(m,u)=>{this.lastMessage[m]=J({eventName:m},u)}),re(this,"getStoredEvent",m=>this.lastMessage[m]),re(this,"broadcastEvent",(m,u={})=>{this.storeEvent(m,u),this.channel.trigger(`client-${m}`,de(J({eventName:m},u)))}),re(this,"subscribe",(m,u)=>(this.channel.bind(`client-${m}`,C=>this.storeEvent(m,C)),this.channel.bind(`client-${m}`,u),()=>{this.channel.unbind(`client-${m}`,u)})),re(this,"resendLastEvents",()=>{for(const m in this.lastMessage)this.lastMessage[m]&&this.channel.trigger(`client-${m}`,this.lastMessage[m])}),this.initialized=!1,this.lastMessage={}}}const T=new W;var le=t(802);const Q={STATE_CHANGE:"state-change",CURRENT_STATE:"current-state",REQUEST_STATE:"request-state"},ie=()=>{const{amIWhiteboardOwner:R}=(0,le.l)();return{shouldRequestState:(0,b._U)((0,i._u)(850)),amIWhiteboardOwner:R}};function B(R){const[m,u]=(0,e.useState)(null),[C,Se]=(0,e.useState)(!1),{amIWhiteboardOwner:pe,shouldRequestState:V}=ie(),X=(0,e.useRef)(new Map),$=(0,e.useRef)(new Map),F=(0,e.useCallback)(()=>({shapes:X.current?Object.fromEntries(X.current):{},bindings:$.current?Object.fromEntries($.current):{}}),[]),ee=(0,e.useCallback)(()=>{pe&&C&&T.broadcastEvent(Q.CURRENT_STATE,F())},[pe,C,F]),Ee=(0,e.useCallback)(({shapes:te,bindings:d,merge:f=!0})=>{if(!!(te&&d))if(f){const P=X.current,H=$.current;if(!(P&&H))return;Object.entries(te).forEach(([Z,se])=>{se?P.set(se.id,se):P.delete(Z)}),Object.entries(d).forEach(([Z,se])=>{se?H.set(se.id,se):H.delete(Z)})}else X.current=new Map(Object.entries(te)),$.current=new Map(Object.entries(d))},[]),me=(0,e.useCallback)(te=>{m==null||m.replacePageContent(te.shapes,te.bindings,{})},[m]),K=(0,e.useCallback)(te=>{if(!te)return;const{shapes:d,bindings:f,eventName:P}=te;Ee({shapes:d,bindings:f,merge:P===Q.STATE_CHANGE}),me(F())},[me,F,Ee]),_e=(0,e.useCallback)(()=>{!C||(pe?(K(T.getStoredEvent(Q.CURRENT_STATE)),ee()):V&&T.broadcastEvent(Q.REQUEST_STATE))},[C,pe,V,K,ee]),fe=(0,e.useCallback)(te=>{te.loadRoom(R),te.pause(),u(te)},[R]),Te=(0,e.useCallback)((te,d,f,P)=>{Ee({shapes:d,bindings:f}),T.broadcastEvent(Q.STATE_CHANGE,{shapes:d,bindings:f}),me(F())},[Ee,me,F]);return(0,e.useEffect)(()=>{if(!m)return;const te=[];let d=!0;function f(){d&&(te.push(T.subscribe(Q.STATE_CHANGE,K)),te.push(T.subscribe(Q.CURRENT_STATE,K)),te.push(T.subscribe(Q.REQUEST_STATE,ee)),Se(!0))}return T.init(),f(),_e(),()=>{d=!1,te.forEach(P=>P())}},[m,_e,ee,K]),(0,e.useEffect)(()=>()=>{C&&!V&&(console.log("Whiteboard unmount storing",F()),T.storeEvent(Q.CURRENT_STATE,F()))},[C,V,F]),{onMount:fe,onChangePage:Te}}var y=Object.defineProperty,D=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,h=(R,m,u)=>m in R?y(R,m,{enumerable:!0,configurable:!0,writable:!0,value:u}):R[m]=u,O=(R,m)=>{for(var u in m||(m={}))I.call(m,u)&&h(R,u,m[u]);if(D)for(var u of D(m))E.call(m,u)&&h(R,u,m[u]);return R};const M=e.memo(({roomId:R})=>{const m=B(R);return e.createElement(S.Dr,O({autofocus:!0,disableAssets:!0,showSponsorLink:!1,showPages:!1,showMenu:!1},m))});var U=t(455),oe=t(5861),x=t(9168),w=t(8160);const Y=()=>{const{whiteboardEnabled:R,whiteboardOwner:m,amIWhiteboardOwner:u,toggleWhiteboard:C}=(0,le.l)();return R?w.createElement(U.u,{title:`${m?u?"Stop whiteboard":"Can't stop whiteboard":"Start whiteboard"}`,key:"whiteboard"},w.createElement(oe.h,{css:{mx:"$4"},onClick:C,active:!m,disabled:m&&!u,"data-testid":"white_board_btn"},w.createElement(x.Z,null))):null}},9990:(Ae,q,t)=>{t.d(q,{iS:()=>B,Nc:()=>y});var e=t(8160),S=t(9130),b=t(3751),i=t(6905),c=t(4817),A=t(8338),k=t(4053),j=t(4334),L=t(7506),G=t(8651),z=t(6939),J=t(8485),re=t(8721),de=t(5861),W=t(8961);const T=({type:D,duration:I})=>{const E=D===S.Mv.audio?S.Hx:S.k0,h=(0,b._U)(E.progress),O=(0,b.cw)(),M=D===S.Mv.audio?O.audioPlaylist:O.videoPlaylist;return I?e.createElement(G.i,{step:1,value:[h],onValueChange:U=>{M.seekTo(U[0]*.01*I)}}):null},le=({type:D,onToggle:I})=>{var E,h;const M=D===S.Mv.audio?S.Hx:S.k0,U=(0,b._U)(M.selectedItem);return U?e.createElement(z.x,{css:{mt:"$8"}},e.createElement(J.k,{justify:"between",css:{w:"100%"}},e.createElement(z.x,null,e.createElement(re.x,{variant:"md"},U.name),((E=U.metadata)==null?void 0:E.description)&&e.createElement(re.x,{variant:"xs"},(h=U.metadata)==null?void 0:h.description)),e.createElement(de.h,{onClick:I,css:{alignSelf:"center"},"data-testid":"playlist_collapse_btn"},e.createElement(i.Z,null)))):null},Q=({type:D,css:I={}})=>{const{active:E,hasNext:h,hasPrevious:O,actions:M}=(0,W.Z)(D);return E?e.createElement(J.k,{justify:"center",css:I},e.createElement(de.h,{disabled:!O,onClick:()=>{M.playPrevious()},"data-testid":"playlist_prev_btn"},e.createElement(c.Z,null)),e.createElement(de.h,{onClick:()=>{E.playing?M.pause():M.play(E.id)},"data-testid":"playlist_play_pause_btn"},E.playing?e.createElement(A.Z,{width:32,height:32}):e.createElement(k.Z,{width:32,height:32})),e.createElement(de.h,{disabled:!h,onClick:()=>{M.playNext()},"data-testid":"playlist_next_btn"},e.createElement(j.Z,null))):null},ie=()=>{const D=(0,b.cw)(),I=(0,b._U)(S.k0.volume),E=(0,b._U)(S.k0.selectedItem),h=(0,b._U)(S.Oq),O=(0,b._U)((0,S.n2)(h==null?void 0:h.id)),M=(0,b._U)((0,S.BF)(O==null?void 0:O.id)),U=E?I:M;return e.createElement(J.k,{align:"center",css:{color:"$white"}},e.createElement(L.Z,null),e.createElement(G.i,{css:{mx:"$4",w:"$20"},min:0,max:100,step:1,value:[Math.floor(U)],onValueChange:oe=>{const x=oe[0];E?D.videoPlaylist.setVolume(x):O&&D.setVolume(x,O.id)},thumbStyles:{w:"$6",h:"$6"}}))},B=({onToggle:D})=>{const{active:I}=(0,W.Z)(S.Mv.audio);return I?e.createElement(z.x,{css:{p:"$8",borderTop:"1px solid $borderLight",bg:"$menuBg"}},e.createElement(Q,{type:S.Mv.audio}),e.createElement(T,{type:S.Mv.audio,duration:I.duration}),e.createElement(le,{type:S.Mv.audio,onToggle:D})):null},y=({children:D})=>{const{active:I}=(0,W.Z)(S.Mv.video);return e.createElement(z.x,{css:{p:"$8",mt:"-$24",w:"100%",zIndex:1,"@lg":{mt:0,p:"$6"}}},I&&e.createElement(T,{type:S.Mv.video,duration:I.duration}),e.createElement(J.k,{align:"center",justify:"between"},e.createElement(ie,null),I&&e.createElement(Q,{css:{flex:"1 1 0"}}),D))}},9477:(Ae,q,t)=>{t.d(q,{Z:()=>ie});var e=t(8160),S=t(1280),b=t(4299),i=t(3074),c=t(3751),A=t(9130),k=t(6532),j=t(7854),L=t(6118),G=t(6567),z=t(3844),J=t(8523),re=t.n(J),de=t(5581),W=t(6773);const T={position:"unset",width:"100%",textAlign:"center",transform:"none",mt:"$2",flexShrink:0},le=({peerId:B,showStatsOnTiles:y,width:D="100%",height:I="100%"})=>{const E=(0,c._U)((0,A.K6)(B)),h=(0,c._U)((0,A.Nm)(B)),O=(0,W.L3)(de.JZ.isAudioOnly),M=(0,W.tQ)(),[U,oe]=(0,e.useState)(!1),x=(0,z.O)({peerName:h.name,isLocal:!1,track:E}),w=(0,e.useRef)(null),[Y,R]=(0,e.useState)(!1),m=(0,L.Z)(w,Y,{onClose:()=>R(!1)}),u=re().isEnabled,C=(0,c._U)((0,A.Qq)(h==null?void 0:h.id));return e.createElement(S.i.Root,{css:{width:D,height:I},"data-testid":"screenshare_tile"},h?e.createElement(S.i.Container,{transparentBg:!0,ref:w,css:{flexDirection:"column"},onMouseEnter:()=>oe(!0),onMouseLeave:()=>{oe(!1)}},y?e.createElement(b.q8,{audioTrackID:C==null?void 0:C.id,videoTrackID:E==null?void 0:E.id}):null,u&&!M?e.createElement(S.i.FullScreenButton,{onClick:()=>R(!Y)},m?e.createElement(k.Z,null):e.createElement(j.Z,null)):null,E?e.createElement(i.n,{screenShare:!0,mirror:h.isLocal&&(E==null?void 0:E.source)==="regular",attach:!O,trackId:E.id}):null,e.createElement(S.i.Info,{css:T},x),U&&!M&&!(h==null?void 0:h.isLocal)?e.createElement(G.Z,{isScreenshare:!0,peerID:h==null?void 0:h.id,audioTrackID:C==null?void 0:C.id,videoTrackID:E==null?void 0:E.id}):null):null)},ie=e.memo(le)},6567:(Ae,q,t)=>{t.d(q,{Z:()=>le});var e=t(8160),S=t(4328),b=t(8111),i=t(7923),c=t(6548),A=t(8981),k=t(7506),j=t(9540),L=t(3751),G=t(9130),z=t(4866),J=t(8414),re=t(8485),de=t(8651),W=(Q,ie,B)=>new Promise((y,D)=>{var I=O=>{try{h(B.next(O))}catch(M){D(M)}},E=O=>{try{h(B.throw(O))}catch(M){D(M)}},h=O=>O.done?y(O.value):Promise.resolve(O.value).then(I,E);h((B=B.apply(Q,ie)).next())});const le=({audioTrackID:Q,videoTrackID:ie,peerID:B,isScreenshare:y=!1})=>{const D=(0,L.cw)();let{removeOthers:I}=(0,L._U)(G.AI);I=I&&!y;const{isAudioEnabled:E,isVideoEnabled:h,setVolume:O,toggleAudio:M,toggleVideo:U,volume:oe}=(0,z.T)(Q,ie);return I||M||U||O?e.createElement(J.R.Root,null,e.createElement(J.R.Trigger,{"data-testid":"participant_menu_btn"},e.createElement(S.Z,null)),e.createElement(J.R.Content,{side:"left",align:"start",sideOffset:10},U?e.createElement(J.R.ItemButton,{onClick:U,"data-testid":h?"mute_video_participant_btn":"unmute_video_participant_btn"},h?e.createElement(b.Z,null):e.createElement(i.Z,null),e.createElement("span",null,`${h?"Mute":"Request Unmute"}`)):null,M?e.createElement(J.R.ItemButton,{onClick:M,"data-testid":h?"mute_audio_participant_btn":"unmute_audio_participant_btn"},E?e.createElement(c.Z,null):e.createElement(A.Z,null),e.createElement("span",null,`${E?"Mute":"Request Unmute"}`)):null,Q?e.createElement(J.R.VolumeItem,{"data-testid":"participant_volume_slider"},e.createElement(re.k,{align:"center",gap:1},e.createElement(k.Z,null)," ",e.createElement("span",null,"Volume (",oe,")")),e.createElement(de.i,{css:{my:"0.5rem"},step:5,value:[oe],onValueChange:x=>O(x[0])})):null,I?e.createElement(J.R.RemoveItem,{onClick:()=>W(void 0,null,function*(){try{yield D.removePeer(B,"")}catch{}}),"data-testid":"remove_participant_btn"},e.createElement(j.Z,null),e.createElement("span",null,"Remove Participant")):null)):null}},8051:(Ae,q,t)=>{t.d(q,{Z:()=>ie});var e=t(8160),S=t(5683),b=t(9314),i=t(8613),c=t(8534),A=t(871),k=t(8329),j=t(9477),L=t(9478),G=t(4674),z=t(4718),J=t(3385);const re=({page:B,setPage:y,numPages:D})=>{const I=B===0,E=B===D-1,h=()=>{y(Math.min(B+1,D-1))},O=()=>{y(Math.max(B-1,0))};return e.createElement(G.I.Root,null,e.createElement(G.I.Chevron,{disabled:I,onClick:O},e.createElement(z.Z,{width:16,height:16,style:{cursor:I?"not-allowed":"pointer"}})),e.createElement(G.I.Dots,null,[...Array(D)].map((M,U)=>e.createElement(G.I.Dot,{key:U,active:B===U,onClick:()=>y(U)}))),e.createElement(G.I.Chevron,{disabled:E,onClick:h},e.createElement(J.Z,{width:16,height:16,style:{cursor:E?"not-allowed":"pointer"}})))};var de=t(9112),W=t(6773);const T=({maxTileCount:B,peers:y,showStatsOnTiles:D,maxColCount:I,maxRowCount:E,includeScreenShareForPeer:h})=>{const{aspectRatio:O}=(0,b.Fg)(),M=(0,de.M)(),U=(0,W.tQ)(),{ref:oe,pagesWithTiles:x}=(0,A.i)({peers:y,maxTileCount:B,maxColCount:I,maxRowCount:E,includeScreenShareForPeer:h,aspectRatio:O,offsetY:Q({isHeadless:U,appConfig:M})}),[w,Y]=(0,e.useState)(0);(0,e.useEffect)(()=>{w>=x.length&&Y(0)},[x.length,w]);const R=L.T.freezeVideoList();return e.createElement(i.d.Root,{ref:oe},e.createElement(i.d.Container,null,x&&x.length>0?x.map((m,u)=>e.createElement(S.f,{freeze:R&&w!==u,key:u},e.createElement(i.d.View,{css:{left:(0,c.I)(u,w),transition:"left 0.3s ease-in-out"}},m.map((C,Se)=>{var pe,V,X,$;return((pe=C.track)==null?void 0:pe.source)==="screen"?e.createElement(j.Z,{showStatsOnTiles:D,key:C.track.id,width:C.width,height:C.height,peerId:C.peer.id}):e.createElement(k.Z,{showStatsOnTiles:D,key:((V=C.track)==null?void 0:V.id)||C.peer.id,width:C.width,height:C.height,peerId:(X=C.peer)==null?void 0:X.id,trackId:($=C.track)==null?void 0:$.id})})))):null),x.length>1?e.createElement(re,{page:w,setPage:Y,numPages:x.length}):null)},le=e.memo(T),Q=({appConfig:B,isHeadless:y})=>{var D;const I=(D=B==null?void 0:B.headlessConfig)==null?void 0:D.tileOffset;return!y||typeof I!="number"?32:I},ie=le},8329:(Ae,q,t)=>{t.d(q,{Z:()=>E});var e=t(8160),S=t(5470),b=t(1280),i=t(4299),c=t(3074),A=t(1959),k=t(9130),j=t(3751),L=t(8981),G=t(3712),z=t(3988),J=t(6567),re=t(3844),de=t(853),W=t(5581),T=t(6773),le=t(9112);const Q=({peerId:h,trackId:O,showStatsOnTiles:M,width:U,height:oe})=>{var x,w;const Y=O?(0,k.M)(O):(0,k.t$)(h),R=(0,j._U)(Y),m=(0,j._U)((0,k.I_)(h)),u=(0,j._U)((0,k.L6)(h)),C=(0,j._U)(k.I3),Se=(0,T.L3)(W.JZ.isAudioOnly),pe=(0,T.tQ)(),V=!(0,j._U)((0,k.xn)(h)),X=!(R==null?void 0:R.enabled),[$,F]=(0,e.useState)(!1),ee=(0,S.W)(u==null?void 0:u.id),Ee=R==null?void 0:R.degraded,me=C===h,K=(0,re.O)({peerName:m,track:R,isLocal:me}),_e=(0,e.useCallback)(Te=>{F(Te.type==="mouseenter")},[]),fe=(0,le.M)();return e.createElement(b.i.Root,{css:{width:U,height:oe,padding:I({isHeadless:pe,appConfig:fe})},"data-testid":`participant_tile_${m}`},m!==void 0?e.createElement(b.i.Container,{onMouseEnter:_e,onMouseLeave:_e,ref:pe&&((x=fe==null?void 0:fe.headlessConfig)==null?void 0:x.hideAudioLevel)?void 0:ee},e.createElement(de.Y,{isTile:!0,peerId:h}),M?e.createElement(i.q8,{audioTrackID:u==null?void 0:u.id,videoTrackID:R==null?void 0:R.id,peerID:h}):null,R?e.createElement(c.n,{trackId:R==null?void 0:R.id,attach:me?void 0:!Se,mirror:h===C&&(R==null?void 0:R.source)==="regular",degraded:Ee,"data-testid":"participant_video_tile"}):null,X||Ee||Se?e.createElement(A.q,{name:m||"","data-testid":"participant_avatar_icon"}):null,(!pe||pe&&!((w=fe==null?void 0:fe.headlessConfig)==null?void 0:w.hideTileName))&&e.createElement(b.i.Info,{"data-testid":"participant_name_onTile"},K),D({appConfig:fe,isHeadless:pe,isAudioMuted:V})?e.createElement(b.i.AudioIndicator,{"data-testid":"participant_audio_mute_icon"},e.createElement(L.Z,null)):null,$&&!pe&&!me?e.createElement(J.Z,{peerID:h,audioTrackID:u==null?void 0:u.id,videoTrackID:R==null?void 0:R.id}):null,e.createElement(B,{peerId:h})):null)},ie={left:"20px",bottom:"20px"},B=({peerId:h})=>{const O=(0,j._U)((0,k.cH)(h)),M=(O==null?void 0:O.isHandRaised)||!1,U=(O==null?void 0:O.isBRBOn)||!1;return e.createElement(e.Fragment,null,M?e.createElement(b.i.AttributeBox,{css:ie,"data-testid":"raiseHand_icon_onTile"},e.createElement(G.Z,{width:40,height:40})):null,U?e.createElement(b.i.AttributeBox,{css:ie,"data-testid":"brb_icon_onTile"},e.createElement(z.Z,{width:40,height:40})):null)},y=e.memo(Q),D=({appConfig:h,isHeadless:O,isAudioMuted:M})=>{var U;if(!O)return M;const oe=(U=h==null?void 0:h.headlessConfig)==null?void 0:U.hideTileAudioMute;return M&&!oe},I=({isHeadless:h,appConfig:O})=>{var M;const U=(M=O==null?void 0:O.headlessConfig)==null?void 0:M.tileOffset;if(!(!h||typeof U!="number"))return U===0?0:void 0},E=y},6500:(Ae,q,t)=>{t.d(q,{i:()=>te});var e=t(8160),S=t(5840),b=t(3133),i=t(3751),c=t(8485),A=t(6939),k=t(7688),j=t(9290),L=t(5861),G=t(7097),z=t(1745),J=t(5213),re=(d,f,P)=>new Promise((H,Z)=>{var se=Ce=>{try{ae(P.next(Ce))}catch(ge){Z(ge)}},ce=Ce=>{try{ae(P.throw(Ce))}catch(ge){Z(ge)}},ae=Ce=>Ce.done?H(Ce.value):Promise.resolve(Ce.value).then(se,ce);ae((P=P.apply(d,f)).next())});const de=(0,j.zo)("textarea",{width:"100%",bg:"transparent",color:"$textPrimary",resize:"none",lineHeight:"1rem","&:focus":{boxShadow:"none",outline:"none"}}),W=({role:d,peerId:f,onSend:P,children:H})=>{const Z=(0,i.cw)(),se=(0,e.useRef)(null),[ce,ae]=(0,J.Kx)(),Ce=(0,e.useCallback)(()=>re(void 0,null,function*(){const ge=se.current.value;if(!(!ge||!ge.trim().length))try{d?yield Z.sendGroupMessage(ge,[d]):f?yield Z.sendDirectMessage(ge,f):yield Z.sendBroadcastMessage(ge),se.current.value="",setTimeout(()=>{P()},0)}catch(je){G.y.addToast({title:je.message})}}),[d,f,Z,P]);return(0,e.useEffect)(()=>{const ge=se.current;ge&&(ge.value=ce)},[ce]),(0,e.useEffect)(()=>{const ge=se.current;return()=>{ae((ge==null?void 0:ge.value)||"")}},[ae]),e.createElement(c.k,{align:"center",css:{borderTop:"1px solid $borderDefault",bg:"$menuBg",minHeight:"$16",maxHeight:"$24",position:"relative",py:"$4",pl:"$8"}},H,e.createElement(de,{placeholder:"Write something here",ref:se,autoFocus:!0,onKeyPress:ge=>re(void 0,null,function*(){ge.key==="Enter"&&(ge.shiftKey||(ge.preventDefault(),yield Ce()))})}),e.createElement(L.h,{onClick:Ce,css:{ml:"auto",height:"max-content",mr:"$4"},"data-testid":"send_msg_btn"},e.createElement(z.Z,null)))};var T=t(8721),le=t(4740),Q=t(300),ie=t(9057);const B=e.memo(({selection:d,selectorOpen:f,onToggle:P})=>{const H=(0,J.R)();return e.createElement(c.k,{onClick:P,align:"center",css:{bg:"$menuBg",color:"$textPrimary",h:"$16",borderTopLeftRadius:"$2",borderTopRightRadius:"$2",pl:"$8",pr:"$4"}},e.createElement(c.k,{align:"center",css:{cursor:"pointer"}},e.createElement(le.Z,null),e.createElement(T.x,{css:{mx:"$2"}},d),f?e.createElement(Q.Z,{width:18,height:18}):e.createElement(b.Z,{width:18,height:18})),e.createElement(L.h,{css:{ml:"auto"},onClick:Z=>{Z.stopPropagation(),f?P():H()},"data-testid":"close_chat"},e.createElement(ie.Z,null)))});var y=t(9130);const D=d=>{if(!(d instanceof Date))return"";let f=d.getHours(),P=d.getMinutes();return f<10&&(f="0"+f),P<10&&(P="0"+P),`${f}:${P}`},I=({roles:d,hasCurrentUserSent:f,receiver:P})=>{const H=(0,i._U)((0,y.I_)(P));return P?e.createElement(T.x,{variant:"sm",css:{mx:"$4"}},f?`to ${H}`:"to me",e.createElement(T.x,{as:"span",variant:"sm",css:{color:"$error",mx:"$4"}},"(Privately)")):d&&d.length?e.createElement(T.x,{variant:"sm",css:{mx:"$4"}},"to",e.createElement(T.x,{as:"span",variant:"sm",css:{color:"$error",mx:"$4"}},"(",d.join(","),")")):e.createElement(T.x,{variant:"sm",css:{mx:"$4"}},"to",e.createElement(T.x,{as:"span",variant:"sm",css:{color:"$brandDefault",mx:"$4"}},"Everyone"))},E=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,h=(0,j.zo)("a",{color:"$brandDefault",wordBreak:"break-all","&:hover":{textDecoration:"underline"}}),O=({message:d})=>d?e.createElement(e.Fragment,null,d.trim().split(" ").map(f=>E.test(f)?e.createElement(h,{href:f,key:f,target:"_blank",rel:"noopener noreferrer"},f," "):`${f} `)):e.createElement(e.Fragment,null),M=e.memo(({message:d})=>{const{ref:f,inView:P}=(0,S.YD)({threshold:.5,triggerOnce:!0}),H=(0,i.cw)(),Z=(0,i._U)(y.I3);return(0,e.useEffect)(()=>{d.id&&!d.read&&P&&H.setMessageRead(!0,d.id)},[d.read,H,P,d.id]),e.createElement(c.k,{ref:f,css:{flexWrap:"wrap",p:"$4 $8"},key:d.time,"data-testid":"chat_msg"},e.createElement(T.x,{variant:"sm",css:{color:"$textSecondary"}},d.senderName||"Anonymous"),e.createElement(I,{hasCurrentUserSent:d.sender===Z,receiver:d.recipientPeer,roles:d.recipientRoles}),e.createElement(T.x,{variant:"sm",css:{ml:"auto",color:"$textSecondary"}},D(d.time)),e.createElement(T.x,{css:{w:"100%",my:"$2",wordBreak:"break-word"}},e.createElement(O,{message:d.message})))}),U=({role:d,peerId:f})=>{const P=d?(0,y.a7)(d):f?(0,y.Ik)(f):y.SF,H=(0,i._U)(P)||[];return H.length===0?e.createElement(c.k,{css:{width:"100%",height:"calc(100% - 1px)",textAlign:"center",px:"$4"},align:"center",justify:"center"},e.createElement(T.x,null,"There are no messages here")):e.createElement(e.Fragment,null,H.map(Z=>e.createElement(M,{key:Z.id,message:Z})))};var oe=t(455),x=t(7273),w=t(7884),Y=t(8565);const R=()=>e.createElement(A.x,{css:{size:"$6",bg:"$brandDefault",mx:"$2",r:"$round"}}),m=({value:d,active:f,onClick:P,unreadCount:H})=>e.createElement(c.k,{onClick:P,css:{cursor:"pointer",p:"$4 $8",flexShrink:0,"&:hover":{bg:"$menuBg"}},align:"center","data-testid":"chat_members"},e.createElement(T.x,{variant:"sm"},d),e.createElement(c.k,{align:"center",css:{ml:"auto",color:"$textPrimary"}},H>0&&e.createElement(oe.u,{title:`${H} unread`},e.createElement(A.x,{css:{mr:f?"$3":0}},e.createElement(R,null))),f&&e.createElement(Y.Z,{width:16,height:16}))),u=e.memo(({children:d})=>e.createElement(A.x,{css:{flexShrink:0}},e.createElement(x.E,{space:4}),e.createElement(T.x,{variant:"md",css:{p:"$4 $8",fontWeight:"$semiBold"}},d))),C=e.memo(({onSelect:d,active:f})=>{const P=(0,i._U)(y.SI);return e.createElement(m,{value:"Everyone",active:f,unreadCount:P,onClick:()=>{d({role:"",peerId:"",selection:"Everyone"})}})}),Se=e.memo(({onSelect:d,role:f,active:P})=>{const H=(0,i._U)((0,y.ci)(f));return e.createElement(m,{value:f,active:P,unreadCount:H,onClick:()=>{d({role:f,selection:f})}})}),pe=({onSelect:d,peerId:f,name:P,active:H})=>{const Z=(0,i._U)((0,y.Do)(f));return e.createElement(m,{value:P,active:H,unreadCount:Z,onClick:()=>{d({role:"",peerId:f,selection:P})}})},V=({role:d,peerId:f,onSelect:P})=>{const H=(0,i._U)(y.on),Z=(0,i._U)(y.LY),[se,ce]=(0,e.useState)("");return e.createElement(c.k,{direction:"column",css:{size:"100%",position:"absolute",top:0,left:0,bg:"$bgSecondary",py:"$4",overflowY:"auto"}},e.createElement(A.x,{css:{p:"$4",flexShrink:0,position:"relative"}},e.createElement(w.I,{type:"text",autoCorrect:"off",autoComplete:"name",value:se,placeholder:"Search Participants",css:{bg:"$menuBg",w:"100%",pr:"$12","$:focus":{boxShadow:"none",outline:"none"}},onChange:ae=>{ce(ae.target.value)}}),e.createElement(c.k,{align:"center",css:{position:"absolute",right:0,top:0,mr:"$6",height:"100%"}},e.createElement(L.h,{onClick:()=>ce("")},e.createElement(ie.Z,{width:18,height:18})))),e.createElement(C,{onSelect:P,active:!d&&!f}),H.length>0&&e.createElement(u,null,"Roles"),H.map(ae=>e.createElement(Se,{key:ae,active:d===ae,role:ae,onSelect:P})),Z.length>0&&e.createElement(u,null,"Participants"),Z.filter(ae=>!se||ae.name.toLowerCase().includes(se)).map(ae=>e.createElement(pe,{key:ae.id,name:ae.name,peerId:ae.id,active:ae.id===f,onSelect:P})))},X=({role:d,peerId:f})=>{const P=d?(0,y.ci)(d):f?(0,y.Do)(f):y.SI;return(0,i._U)(P)};var $=Object.defineProperty,F=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable,me=(d,f,P)=>f in d?$(d,f,{enumerable:!0,configurable:!0,writable:!0,value:P}):d[f]=P,K=(d,f)=>{for(var P in f||(f={}))ee.call(f,P)&&me(d,P,f[P]);if(F)for(var P of F(f))Ee.call(f,P)&&me(d,P,f[P]);return d};const _e=()=>{const[d,f]=(0,e.useState)({role:"",peerId:"",selection:"Everyone"}),[P,H]=(0,e.useState)(!1),Z=(0,e.useRef)(null),se=(0,i.cw)(),ce=(0,e.useCallback)((ae=!1)=>{!Z.current||(Z.current.scrollTo({top:Z.current.scrollHeight,behavior:ae?"instant":"smooth"}),se.setMessageRead(!0))},[se]);return(0,e.useEffect)(()=>{ce(!0)},[ce]),e.createElement(c.k,{direction:"column",css:{size:"100%"}},e.createElement(B,{selectorOpen:P,selection:d.selection,onToggle:()=>{H(ae=>!ae)}}),e.createElement(A.x,{css:{flex:"1 1 0",overflowY:P?"hidden":"auto",bg:"$bgSecondary",pt:"$4",position:"relative"},ref:Z},P?e.createElement(V,{role:d.role,peerId:d.peerId,onSelect:ae=>{f(Ce=>K(K({},Ce),ae)),H(!1)}}):e.createElement(e.Fragment,null,e.createElement(U,{role:d.role,peerId:d.peerId}),e.createElement(Te,{scrollToBottom:ce,role:d.role,peerId:d.peerId}))),e.createElement(W,{role:d.role,peerId:d.peerId,onSend:ce},!P&&e.createElement(fe,{role:d.role,peerId:d.peerId,scrollToBottom:ce})))},fe=({role:d,peerId:f,scrollToBottom:P})=>X({role:d,peerId:f})?e.createElement(c.k,{justify:"center",css:{width:"100%",left:0,bottom:"100%",position:"absolute"}},e.createElement(k.z,{onClick:()=>{P()},css:{p:"$2 $4","& > svg":{ml:"$4"}}},"New Messages",e.createElement(b.Z,{width:16,height:16}))):null,Te=({scrollToBottom:d,role:f,peerId:P})=>{const{ref:H,inView:Z}=(0,S.YD)({threshold:.5}),se=X({role:f,peerId:P});return(0,e.useEffect)(()=>{Z&&se&&d()},[Z,se,d]),e.createElement("div",{ref:H,style:{height:1}})},te=()=>e.createElement(_e,null)},8694:(Ae,q,t)=>{t.r(q),t.d(q,{default:()=>Sn});var e=t(8160),S=t(841),b=t(3738),i=t(3751),c=t(9130),A=t(8485),k=t(6939),j=t(1193),L=t(510),G=t(9163),z=t(3988),J=t(9156),re=t(370),de=t(9660),W=t(455),T=t(5861),le=t(7273),Q=t(8275),ie=t(6545),B=t(4892),y=t(7688),D=t(622),I=t(9290),E=t(2266),h=t(8160);const O=()=>{const s=(0,S.s0)(),n=(0,S.UO)(),[a,o]=(0,e.useState)(!1),[l,p]=(0,e.useState)(!1),g=(0,i._U)(c.AI),v=(0,i.cw)(),r=()=>{n.role?s("/leave/"+n.roomId+"/"+n.role):s("/leave/"+n.roomId)},_=()=>{v.leave(),r()},N=()=>{v.endRoom(l,"End Room"),r()};return h.createElement(e.Fragment,null,g.endRoom?h.createElement(B.J.Root,null,h.createElement(B.J.Trigger,{asChild:!0},h.createElement(M,{variant:"danger",key:"LeaveRoom","data-testid":"leave_room_btn"},h.createElement(W.u,{title:"Leave Room"},h.createElement(k.x,null,h.createElement(ie.Z,{key:"hangUp"}))))),h.createElement(B.J.Content,{sideOffset:10},h.createElement(y.z,{variant:"standard",css:{w:"100%"},onClick:()=>{o(!0)},"data-testid":"end_room_btn"},"End Room"),h.createElement(y.z,{variant:"danger",css:{mt:"$4"},onClick:_,"data-testid":"just_leave_btn"},"Just Leave"))):h.createElement(M,{onClick:_,variant:"danger",key:"LeaveRoom"},h.createElement(W.u,{title:"Leave Room"},h.createElement(k.x,null,h.createElement(ie.Z,{key:"hangUp"})))),h.createElement(D.V.Root,{open:a,onOpenChange:ue=>{ue||p(!1),o(ue)}},h.createElement(E.cZ,{title:"End Room",Icon:ie.Z},h.createElement(E.Uj,{id:"lockRoom",title:"Disable future joins",value:l,onChange:p}),h.createElement(E.DP,{justify:"end"},h.createElement(y.z,{variant:"danger",onClick:N,"data-testid":"lock_end_room"},"End Room")))))},M=(0,I.zo)(T.h,{color:"$white",width:"$15",mx:"$4",bg:"$error","&:not([disabled]):hover":{bg:"$errorTint"},"&:not([disabled]):active":{bg:"$errorTint"}});var U=t(5408),oe=t(2216),x=t(8546),w=t(8981),Y=t(9995),R=t(8230),m=t(7632),u=t(9024),C=t(8721),Se=t(32),pe=t(8953),V=t(5873),X=t(8565),$=t(9953),F=t(5431),ee=t(7097),Ee=Object.defineProperty,me=Object.defineProperties,K=Object.getOwnPropertyDescriptors,_e=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,te=(s,n,a)=>n in s?Ee(s,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[n]=a,d=(s,n)=>{for(var a in n||(n={}))fe.call(n,a)&&te(s,a,n[a]);if(_e)for(var a of _e(n))Te.call(n,a)&&te(s,a,n[a]);return s},f=(s,n)=>me(s,K(n)),P=(s,n,a)=>new Promise((o,l)=>{var p=r=>{try{v(a.next(r))}catch(_){l(_)}},g=r=>{try{v(a.throw(r))}catch(_){l(_)}},v=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,g);v((a=a.apply(s,n)).next())});const H=({css:s,onClick:n})=>{const a=(0,i._U)(c.on),o=(0,i._U)(c.AI),l=(0,i._U)(c.I3),p=(0,i._U)(c.fo),g=(0,i.cw)(),v=(0,Se.Z)(I.vc.media.sm),{appPolicyConfig:{selfRoleChangeTo:r}}=(0,e.useContext)(F.I),_=(0,e.useMemo)(()=>(0,$.tN)(r,a),[a,r]);return o.changeRole?v?e.createElement(u.L.Item,{css:s,onClick:n},e.createElement(pe.Z,null),e.createElement(C.x,{variant:"sm",css:{mx:"$4"}},"Change My Role")):e.createElement(u.L.Root,null,e.createElement(u.L.TriggerItem,{css:s,"data-testid":"change_my_role_btn"},e.createElement(pe.Z,null),e.createElement(C.x,{variant:"sm",css:{flex:"1 1 0",mx:"$4"}},"Change My Role"),e.createElement(V.Z,null)),e.createElement(u.L.Content,{sideOffset:2,alignOffset:-5,css:{maxHeight:"$64"}},_.map((N,ue)=>e.createElement(u.L.Item,{key:N,css:f(d({},s),{justifyContent:"space-between"}),onClick:()=>P(void 0,null,function*(){try{yield g.changeRole(l,N,!0)}catch(ve){ee.y.addToast({title:ve.message})}}),"data-testid":"change_to_role_"+N},e.createElement(C.x,{variant:"sm"},N),p===N&&e.createElement(X.Z,{width:16,height:16}))))):null};var Z=t(3210),se=t(8523),ce=t.n(se),ae=(s,n,a)=>new Promise((o,l)=>{var p=r=>{try{v(a.next(r))}catch(_){l(_)}},g=r=>{try{v(a.throw(r))}catch(_){l(_)}},v=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,g);v((a=a.apply(s,n)).next())});const Ce=()=>{const[s,n]=(0,e.useState)(ce().isFullscreen),a=(0,e.useCallback)(()=>ae(void 0,null,function*(){if(!ce().isEnabled){ee.y.addToast({title:"Fullscreen feature not supported"});return}try{s?yield ce().exit():yield ce().request()}catch(o){ee.y.addToast({title:o.message})}}),[s]);return(0,e.useEffect)(()=>{const o=()=>{n(ce().isFullscreen)};return ce().isEnabled&&ce().on("change",o),()=>{ce().isEnabled&&ce().off("change",o)}},[]),{allowed:ce().isEnabled,isFullscreen:s,toggleFullscreen:a}},ge=({hoverStyles:s})=>{const{allowed:n,isFullscreen:a,toggleFullscreen:o}=Ce();return n?e.createElement(u.L.Item,{onClick:()=>{o()},css:s,"data-testid":"full_screen_btn"},e.createElement(Z.Z,null),e.createElement(C.x,{variant:"sm",css:{ml:"$4"}},a?"Exit ":"","Full Screen")):null};var je=t(7281),$e=t(6081),pt=t(8651),Pe=t(5581),ye=t(6773),mt=(s,n,a)=>new Promise((o,l)=>{var p=r=>{try{v(a.next(r))}catch(_){l(_)}},g=r=>{try{v(a.throw(r))}catch(_){l(_)}},v=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,g);v((a=a.apply(s,n)).next())});const Ze={flexDirection:"column",alignItems:"flex-start"},we=({onClick:s,type:n,label:a,checked:o})=>e.createElement(A.k,{align:"center",key:n,css:{my:"$2"}},e.createElement(je.X.Root,{id:a,checked:o,onCheckedChange:l=>{s({type:n,isSubscribed:l})}},e.createElement(je.X.Indicator,null,e.createElement(X.Z,{width:16,height:16}))),e.createElement($e._,{htmlFor:a,css:{ml:"$4",fontSize:"$sm",cursor:"pointer"}},a)),_t=({open:s,onOpenChange:n})=>{const{setMaxTileCount:a,maxTileCount:o,subscribedNotifications:l,setSubscribedNotifications:p,uiViewMode:g,setuiViewMode:v}=(0,e.useContext)(F.I),r=(0,i.cw)(),_=(0,i._U)(c.um),N=(0,i._U)(c.VP),[ue,ve]=(0,ye.iz)(Pe.JZ.isAudioOnly),ne=(0,e.useCallback)(he=>mt(void 0,null,function*(){he&&(_&&(yield r.setLocalVideoEnabled(!1)),N&&(yield r.setScreenShareEnabled(!1))),ve(he)}),[r,_,N,ve]);return e.createElement(D.V.Root,{open:s,onOpenChange:n},e.createElement(E.cZ,{title:"UI Settings",Icon:Y.Z},e.createElement(E.DP,{css:Ze},e.createElement(C.x,{variant:"md",css:{mb:"$8",fontWeight:"$semiBold"}},"Configure Notifications"),e.createElement(A.k,{justify:"between",css:{w:"100%"}},e.createElement(k.x,{css:{flex:"1 1 0"}},e.createElement(we,{label:"Peer Joined",type:"PEER_JOINED",onClick:p,checked:l.PEER_JOINED}),e.createElement(we,{label:"Peer Leave",type:"PEER_LEFT",onClick:p,checked:l.PEER_LEFT}),e.createElement(we,{label:"New Message",type:"NEW_MESSAGE",onClick:p,checked:l.NEW_MESSAGE})),e.createElement(k.x,{css:{flex:"1 1 0",ml:"$4"}},e.createElement(we,{label:"Error",type:"ERROR",onClick:p,checked:l.ERROR}),e.createElement(we,{label:"Hand Raised",type:"METADATA_UPDATED",onClick:p,checked:l.METADATA_UPDATED})))),e.createElement(le.E,null),e.createElement(E.DP,{css:Ze},e.createElement(C.x,{variant:"md",css:{mb:"$4",fontWeight:"$semiBold"}},"View Layout"),e.createElement(E.Uj,{title:"Active Speaker Mode",id:"activeSpeakerMode",value:g===Pe.FU,onChange:he=>{v(he?Pe.FU:Pe.Je)},css:{margin:"0 0"}}),e.createElement(E.Uj,{title:"Audio Only Mode",id:"audioOnlyMode",value:ue,onChange:ne,css:{margin:"$4 0"}}),e.createElement(A.k,{css:{w:"100%","@md":{display:"none"}}},e.createElement(C.x,{variant:"md"},"Tiles In View"),e.createElement(A.k,{justify:"end",css:{flex:"1 1 0"}},e.createElement(pt.i,{step:1,value:[o],min:1,max:49,onValueChange:he=>{a(he[0])},css:{w:"70%"}}))))))};var ut=t(8876),gt=t(198),Ge=t(3620),vt=Object.defineProperty,Et=Object.defineProperties,ht=Object.getOwnPropertyDescriptors,ze=Object.getOwnPropertySymbols,ft=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable,Je=(s,n,a)=>n in s?vt(s,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[n]=a,At=(s,n)=>{for(var a in n||(n={}))ft.call(n,a)&&Je(s,a,n[a]);if(ze)for(var a of ze(n))Pt.call(n,a)&&Je(s,a,n[a]);return s},Ct=(s,n)=>Et(s,ht(n)),Ye=(s,n,a)=>new Promise((o,l)=>{var p=r=>{try{v(a.next(r))}catch(_){l(_)}},g=r=>{try{v(a.throw(r))}catch(_){l(_)}},v=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,g);v((a=a.apply(s,n)).next())});const St=({onOpenChange:s})=>{const[n,a]=(0,Ge.o)(Ge.l.PREVIEW),o=(0,i.cw)(),l=(0,i._U)(c.lA),[p,g]=(0,e.useState)(l),v=()=>Ye(void 0,null,function*(){const r=p.trim();if(!(!r||r===l))try{yield o.changeName(r),a(Ct(At({},n||{}),{name:r}))}catch(_){console.error("failed to update name",_),ee.y.addToast({title:_.message})}finally{s(!1)}});return e.createElement(D.V.Root,{defaultOpen:!0,onOpenChange:s},e.createElement(E.cZ,{title:"Change my name",Icon:oe.Z},e.createElement("form",{onSubmit:r=>{r.preventDefault()}},e.createElement(E.OD,{title:"Name",value:p,onChange:g,autoComplete:"name",required:!0,"data-testid":"change_name_field"}),e.createElement(E.DP,{justify:"end"},e.createElement(y.z,{variant:"primary",type:"submit",disabled:!p.trim()||p.trim()===l,onClick:()=>Ye(void 0,null,function*(){yield v()}),"data-testid":"popup_change_btn"},"Change")))))},Rt=({onOpenChange:s})=>{const n=bt(),a=(0,e.useMemo)(()=>[{id:"local-peer",label:"Local Peer Stats"},...n],[n]),[o,l]=(0,e.useState)("local-peer"),{showStatsOnTiles:p,setShowStatsOnTiles:g}=(0,e.useContext)(F.I);return(0,e.useEffect)(()=>{o!=="local-peer"&&!n.find(v=>v.id===o)&&l("local-peer")},[n,o]),e.createElement(D.V.Root,{defaultOpen:!0,onOpenChange:s},e.createElement(E.cZ,{Icon:m.Z,title:"Stats For Nerds"},e.createElement(E.nr,{title:"Show Stats on Tiles",onChange:g,value:p}),e.createElement(E.z2,{title:"Stats For",options:a,keyField:"id",labelField:"label",selected:o,onChange:l}),o==="local-peer"?e.createElement(Tt,null):e.createElement(Ot,{trackID:o})))},bt=()=>{const s=(0,i._U)(c.zK),n=(0,i._U)(c.iZ);return(0,e.useMemo)(()=>Object.values(s).map(o=>{var l;const p=(l=n[o.peerId])==null?void 0:l.name;return{id:o.id,label:`${p} ${o.source} ${o.type}`}}),[s,n])},Tt=()=>{var s,n,a,o,l,p;const g=(0,i.p5)(c.fA.localPeerStats);return g?e.createElement(e.Fragment,null,e.createElement(Re,{label:"Packets Lost",value:(s=g.subscribe)==null?void 0:s.packetsLost}),e.createElement(Re,{label:"Jitter",value:(n=g.subscribe)==null?void 0:n.jitter}),e.createElement(Re,{label:"Publish Bitrate",value:Ie((a=g.publish)==null?void 0:a.bitrate,"b/s")}),e.createElement(Re,{label:"Subscribe Bitrate",value:Ie((o=g.subscribe)==null?void 0:o.bitrate,"b/s")}),e.createElement(Re,{label:"Total Bytes Sent",value:Ie((l=g.publish)==null?void 0:l.bytesSent)}),e.createElement(Re,{label:"Total Bytes Received",value:Ie((p=g.subscribe)==null?void 0:p.bytesReceived)})):null},Ot=({trackID:s})=>{const n=(0,i.p5)(c.fA.trackStatsByID(s));if(!n)return null;const a=n.type.includes("inbound");return e.createElement(e.Fragment,null,e.createElement(Re,{label:"Type",value:n.type+" "+n.kind}),e.createElement(Re,{label:"Bitrate",value:Ie(n.bitrate,"b/s")}),e.createElement(Re,{label:"Packets Lost",value:n.packetsLost||"-"}),e.createElement(Re,{label:"Jitter",value:n.jitter||"-"}),e.createElement(Re,{label:a?"Bytes Received":"Bytes Sent",value:Ie(a?n.bytesReceived:n.bytesSent)}),n.kind==="video"&&e.createElement(e.Fragment,null,e.createElement(Re,{label:"Framerate",value:n.framesPerSecond}),!a&&e.createElement(Re,{label:"Quality Limitation Reason",value:n.qualityLimitationReason||"-"})))},Re=({label:s,value:n})=>e.createElement(E.DP,{justify:"between",css:{my:"0.5rem"}},e.createElement(C.x,null,s," "),e.createElement(C.x,null,n)),Ie=(s,n="B",a=2)=>{if(s===0)return"0 "+n;const o=1024,l=a<0?0:a,p=["","K","M","G","T","P","E","Z","Y"].map(v=>v+n),g=Math.floor(Math.log(s)/Math.log(o));return parseFloat((s/Math.pow(o,g)).toFixed(l))+" "+p[g]};var Ne=t(8673),Dt=(s,n,a)=>new Promise((o,l)=>{var p=r=>{try{v(a.next(r))}catch(_){l(_)}},g=r=>{try{v(a.throw(r))}catch(_){l(_)}},v=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,g);v((a=a.apply(s,n)).next())});const kt=[{label:"All Track Sources",value:""},{label:"regular",value:"regular"},{label:"screen",value:"screen"},{label:"audioplaylist",value:"audioplaylist"},{label:"videoplaylist",value:"videoplaylist"}],yt=[{label:"All Track Types",value:""},{label:"audio",value:"audio"},{label:"video",value:"video"}],It=({onOpenChange:s})=>{const n=(0,i._U)(c.on),a=(0,i.cw)(),[o,l]=(0,e.useState)(!1),[p,g]=(0,e.useState)(),[v,r]=(0,e.useState)(),[_,N]=(0,e.useState)(),ue=(0,e.useCallback)(()=>Dt(void 0,null,function*(){yield a.setRemoteTracksEnabled({enabled:o,type:p,source:_,roles:v?[v]:void 0}),s(!1)}),[v,o,p,_,a,s]);return e.createElement(D.V.Root,{defaultOpen:!0,onOpenChange:s},e.createElement(E.cZ,{title:"Mute/Unmute Remote Tracks",Icon:w.Z},e.createElement(E.z2,{title:"Role",options:[{label:"All Roles",value:""},...n.map(ve=>({label:ve,value:ve}))],selected:v,keyField:"value",labelField:"label",onChange:r}),e.createElement(E.z2,{title:"Track type",options:yt,selected:p,onChange:g,keyField:"value",labelField:"label"}),e.createElement(E.z2,{title:"Track source",options:kt,selected:_,onChange:N,keyField:"value",labelField:"label"}),e.createElement(E.DP,null,e.createElement(C.x,{variant:"md"},"Track status"),e.createElement(Ne.E.Root,{value:o,onValueChange:l},e.createElement(A.k,{align:"center",css:{mr:"$8"}},e.createElement(Ne.E.Item,{value:!1,id:"trackDisableRadio",css:{mr:"$4"}},e.createElement(Ne.E.Indicator,null)),e.createElement($e._,{htmlFor:"trackDisableRadio"},"Mute")),e.createElement(A.k,{align:"center",css:{cursor:"pointer"}},e.createElement(Ne.E.Item,{value:!0,id:"trackEnableRadio",css:{mr:"$4"}},e.createElement(Ne.E.Indicator,null)),e.createElement($e._,{htmlFor:"trackEnableRadio"},"Request Unmute")))),e.createElement(E.DP,{justify:"end"},e.createElement(y.z,{variant:"primary",onClick:ue},"Apply"))))};var Mt=t(7158),Xe=t(7884);const xt=({onResolutionChange:s,disabled:n,tooltipText:a})=>{const[o,l]=(0,e.useState)(Pe.w7),p=(0,e.useCallback)(g=>{const{name:v,value:r}=g.target;let _=v==="resWidth"?Number(r):o.width,N=v==="resHeight"?Number(r):o.height;_===0&&(_=null),N===0&&(N=null);const ue={width:isNaN(_)?Pe.w7.width:_,height:isNaN(N)?Pe.w7.height:N};l(ue)},[o]);return e.createElement(E.DP,{breakSm:!0},e.createElement(A.k,{gap:1},e.createElement($e._,{css:{"@sm":{mb:"$8"}}},"Resolution"),e.createElement(W.u,{title:a},e.createElement("div",null,e.createElement(m.Z,{color:"#B0C3DB"})))),e.createElement(A.k,{justify:"between",css:{width:"70%","@sm":{width:"100%"}},gap:2,direction:"column"},e.createElement(A.k,{justify:"between",gap:2},e.createElement(A.k,{direction:"column",css:{width:"50%"}},e.createElement(C.x,{variant:"xs"},"Width"),e.createElement(Xe.I,{css:{width:"100%"},name:"resWidth",value:o.width,onChange:p,readOnly:n,min:Pe.c_,max:Pe.FO,onBlur:()=>s(o),type:"number"})),e.createElement(A.k,{direction:"column",css:{width:"50%"}},e.createElement(C.x,{variant:"xs"},"Height"),e.createElement(Xe.I,{css:{width:"100%"},name:"resHeight",value:o.height,onChange:p,onBlur:()=>s(o),readOnly:n,min:Pe.c_,max:Pe.FO,type:"number"})))))};var Lt=(s,n,a)=>new Promise((o,l)=>{var p=r=>{try{v(a.next(r))}catch(_){l(_)}},g=r=>{try{v(a.throw(r))}catch(_){l(_)}},v=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,g);v((a=a.apply(s,n)).next())});const Ut=window.location.href.replace("meeting","preview")+`?${Pe.z$}=true`,wt=({onOpenChange:s})=>{const n=(0,i.cw)(),a=(0,i._U)(c.AI),{isHLSRecordingOn:o,isHLSRunning:l,isStreamingOn:p,isBrowserRecordingOn:g}=(0,Mt.v)(),v=(0,i._U)((0,c.EP)(Pe._8.recordingUrl)),[r,_]=(0,e.useState)(v||Ut),[N,ue]=(0,e.useState)(""),[ve,ne]=(0,e.useState)(!1),[he,Be]=(0,e.useState)(Pe.w7),[Le,Fe]=(0,e.useState)(!1),Ue=g||o,ke=Ue||p,Rn=(0,e.useMemo)(()=>{let be="";return p&&(be+="Streaming"),Ue&&(be&&(be+="/"),be+="Recording"),be+=" is running",be},[p,Ue]),bn=(0,e.useCallback)(be=>Be(be),[]),ot=be=>Lt(void 0,null,function*(){try{if(be==="start"){const Oe=r.replace("app.100ms.live/meeting","app.100ms.live/preview");if(ve)yield n.startHLSStreaming({variants:[{meetingURL:Oe}],recording:Le?{hlsVod:!0,singleFilePerLayer:!0}:void 0});else{const ct={meetingURL:Oe,rtmpURLs:N.length>0?[N]:void 0,record:Le},dt=Tn();dt&&(ct.resolution=dt),yield n.startRTMPOrRecording(ct)}}else l?yield n.stopHLSStreaming():yield n.stopRTMPAndRecording();s(!1)}catch(Oe){console.error(`failed to start/stop ${ve?"hls streaming":"rtmp/recording"}`,Oe),ee.y.addToast({title:Oe.message})}function Tn(){const Oe={};if(he.width&&(Oe.width=he.width),he.height&&(Oe.height=he.height),Object.keys(Oe).length>0)return Oe}});return e.createElement(D.V.Root,{defaultOpen:!0,onOpenChange:s},e.createElement(E.cZ,{title:"Streaming/Recording",Icon:x.Z},e.createElement(k.x,{as:"form",onSubmit:be=>be.preventDefault()},e.createElement(E.OD,{title:"Meeting URL",value:r,onChange:_,placeholder:"Enter meeting url",disabled:ke,"data-testid":"metting_url_field"}),a.streaming&&e.createElement(E.OD,{title:"RTMP Out",value:N,onChange:ue,placeholder:"Enter rtmp out url",disabled:ke||ve,"data-testid":"rtmp_url_field"}),e.createElement(xt,{onResolutionChange:bn,disabled:ve||l,tooltipText:Pe.uZ}),a.streaming&&e.createElement(E.Uj,{title:"HLS",id:"hlsCheckbox",value:ve||l,onChange:ne,disabled:ke||N[0]}),a.recording&&e.createElement(E.Uj,{title:"Recording",value:Le||Ue,disabled:ke,id:"recordingCheckbox",onChange:Fe}),e.createElement(E.DP,{justify:"end"},ke&&e.createElement(C.x,{variant:"sm",css:{color:"$error"}},Rn),e.createElement(y.z,{variant:"danger",type:"reset",css:{mx:"$4"},onClick:()=>ot("stop"),disabled:!ke,"data-testid":"rtmp_recording_stop"},"Stop"),e.createElement(y.z,{variant:"primary",type:"submit",onClick:()=>ot("start"),disabled:ke||!ve&&!Le&&!N,"data-testid":"rtmp_recording_start"},"Start")))))};var Me=t(9478);const De={"&:hover":{cursor:"pointer",bg:"$iconHoverBg"},"&:focus-visible":{bg:"$iconHoverBg"}},Nt=()=>{const s=(0,i._U)(c.AI),n=(0,i._U)(c.I3),[a,o]=(0,e.useState)(!1),[l,p]=(0,e.useState)(!1),[g,v]=(0,e.useState)(!1),[r,_]=(0,e.useState)(!1),[N,ue]=(0,e.useState)(!1),[ve,ne]=(0,e.useState)(!1),[he,Be]=(0,e.useState)(!1),[Le,Fe]=(0,e.useState)(!1);return e.createElement(e.Fragment,null,e.createElement(u.L.Root,{open:a,onOpenChange:o},e.createElement(u.L.Trigger,{asChild:!0,"data-testid":"more_settings_btn"},e.createElement(T.h,{css:{mx:"$4"}},e.createElement(W.u,{title:"More Options"},e.createElement(k.x,null,e.createElement(U.Z,null))))),e.createElement(u.L.Content,{sideOffset:5,align:"center",css:{maxHeight:"$96"}},e.createElement(u.L.Item,{css:De,onClick:()=>p(Ue=>!Ue),"data-testid":"change_name_btn"},e.createElement(oe.Z,null),e.createElement(C.x,{variant:"sm",css:{ml:"$4"}},"Change Name")),e.createElement(H,{css:De,onClick:()=>Fe(!0)}),(s.streaming||s.recording)&&e.createElement(u.L.Item,{onClick:()=>v(!0),css:De,"data-testid":"streaming_recording_btn"},e.createElement(x.Z,null),e.createElement(C.x,{variant:"sm",css:{ml:"$4"}},"Streaming/Recording")),e.createElement(ge,{hoverStyles:De}),s.mute&&e.createElement(u.L.Item,{onClick:()=>_(!0),css:De,"data-testid":"mute_all_btn"},e.createElement(w.Z,null),e.createElement(C.x,{variant:"sm",css:{ml:"$4"}},"Mute All")),e.createElement(u.L.ItemSeparator,null),e.createElement(u.L.Item,{onClick:()=>Be(!0),css:De,"data-testid":"ui_settings_btn"},e.createElement(Y.Z,null),e.createElement(C.x,{variant:"sm",css:{ml:"$4"}},"UI Settings")),e.createElement(u.L.Item,{onClick:()=>ue(!0),css:De,"data-testid":"device_settings_btn"},e.createElement(R.Z,null),e.createElement(C.x,{variant:"sm",css:{ml:"$4"}},"Device Settings")),Me.T.enableStatsForNerds&&e.createElement(u.L.Item,{onClick:()=>ne(!0),css:De,"data-testid":"stats_for_nreds_btn"},e.createElement(m.Z,null),e.createElement(C.x,{variant:"sm",css:{ml:"$4"}},"Stats for Nerds")))),r&&e.createElement(It,{onOpenChange:_}),l&&e.createElement(St,{onOpenChange:p}),g&&e.createElement(wt,{onOpenChange:v}),N&&e.createElement(ut.Z,{open:!0,onOpenChange:ue}),Me.T.enableStatsForNerds&&ve&&e.createElement(Rt,{open:ve,onOpenChange:ne}),he&&e.createElement(_t,{open:he,onOpenChange:Be}),Le&&e.createElement(gt.t,{peerId:n,onOpenChange:Fe}))};var jt=t(4685),He=t(8160);const $t=({css:s})=>{const n=(0,i._U)(c.xf),a=(0,ye.L3)(Pe.JZ.isAudioOnly),{amIScreenSharing:o,screenShareVideoTrackId:l,toggleScreenShare:p}=(0,de.N)(),g=o&&!!l;return!n.screen||!(0,$.Lo)()?null:He.createElement(W.u,{title:`${g?"Stop":"Start"} Screen sharing`},He.createElement(T.h,{active:!g,css:s,disabled:a,onClick:()=>{p()},"data-testid":"screen_share_btn"},He.createElement(jt.Z,null)))},Bt=({onClose:s})=>{const n=(0,i.cw)();return e.createElement(D.V.Root,{defaultOpen:!0,onOpenChange:a=>!a&&s()},e.createElement(E.cZ,{title:"AudioOnly Screenshare"},e.createElement("img",{src:"/share-audio.png",alt:"AudioOnly Screenshare instructions"}),e.createElement(E.DP,{justify:"end"},e.createElement(y.z,{variant:"primary",onClick:()=>{n.setScreenShareEnabled(!0,!0),s()},"data-testid":"audio_screenshare_continue"},"Continue"))))};var Ft=t(550),Ht=t(1290),Ve=t(8160),xe=(s,n,a)=>new Promise((o,l)=>{var p=r=>{try{v(a.next(r))}catch(_){l(_)}},g=r=>{try{v(a.throw(r))}catch(_){l(_)}},v=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,g);v((a=a.apply(s,n)).next())});const Vt=()=>{const s=(0,e.useRef)(null),n=(0,i.cw)(),[a,o]=(0,e.useState)(!1),[l,p]=(0,e.useState)(!1),g=(0,i._U)((0,c.fC)("@100mslive/hms-noise-suppression")),{selectedDeviceIDs:v}=(0,Ft.L)(),r=g&&!a,_=(0,e.useCallback)(()=>xe(void 0,null,function*(){if(!s.current){const{HMSNoiseSuppressionPlugin:ne}=yield Promise.all([t.e(53),t.e(301)]).then(t.bind(t,2053));s.current=new ne({npm_package_devDependencies_prettier:"^2.5.1",npm_package_devDependencies_source_map_loader:"^3.0.1",TERM_PROGRAM:"vscode",npm_package_devDependencies_cssnano:"^5.0.15",NODE:"/usr/local/bin/node",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_package_dependencies_logrocket_react:"^5.0.1",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",TMPDIR:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T/",npm_package_dependencies_react_freeze:"^1.0.0",npm_package_dependencies__100mslive_react_icons:"0.1.4",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"1.69.0-insider",npm_package_dependencies_screenfull:"^5.1.0",npm_package_scripts_dev:"node ../../scripts/dev-webapp",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",npm_package_dependencies_uuid:"^8.3.2",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_react_dom:"^18.1.0",npm_package_readmeFilename:"README.md",USER:"rajesh",npm_package_description:"[![Documentation](https://img.shields.io/badge/Read-Documentation-blue)](https://docs.100ms.live/javascript/v2/foundation/basics) [![Discord](https://img.shields.io/badge/Community-Join%20on%20Discord-blue)](https://discord.gg/F8cNgbjSaQ) [![Email](https://img.shields.io/badge/Contact-Know%20More-blue)](mailto:founders@100ms.live)",npm_package_devDependencies_webpack:"^5.69.1",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_license:"MIT",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",COMMAND_MODE:"unix2003",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies_logrocket:"^2.2.0",npm_package_dependencies__100mslive_hms_noise_suppression:"0.2.4",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.yXvh3GvBBO/Listeners",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",npm_execpath:"/usr/local/lib/node_modules/yarn/bin/yarn.js",npm_package_dependencies__100mslive_react_ui:"0.1.4",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.3.2",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",PATH:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T/yarn--1658305433448-0.771102561960014:/Users/rajesh/Projects/Bitroot/100ms-web-vidcall/node_modules/.bin:/Users/rajesh/.config/yarn/link/node_modules/.bin:/usr/local/libexec/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/bin/node_modules/npm/bin/node-gyp-bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin:/Users/rajesh/Flutter-Dev/flutter/bin:/Users/rajesh/Flutter-Dev/flutter/.pub-cache/bin:/Users/rajesh/Flutter-Dev/flutter/bin:/Users/rajesh/Flutter-Dev/flutter/.pub-cache/bin",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["run","build"]}',_:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall/node_modules/.bin/webpack",npm_package_dependencies__tldraw_tldraw:"^1.5.0",__CFBundleIdentifier:"com.microsoft.VSCodeInsiders",npm_package_browserslist_production_1:"not dead",PWD:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall",npm_package_browserslist_production_0:">0.2%",JAVA_HOME:"/Library/Java/JavaVirtualMachines/jdk1.8.0_311.jdk/Contents/Home",npm_package_dependencies__100mslive_react_sdk:"0.1.4",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",LOCAL_GIT_DIRECTORY:"/Applications/GitHub Desktop.app/Contents/Resources/app/git",LANG:"en_US.UTF-8",npm_package_name:"100ms_edtech_template",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies__100mslive_hms_virtual_background:"1.4.4",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"webpack serve",npm_package_scripts_build:"webpack --node-env production",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_config_bin_links:"true",npm_package_main:"dist/index.cjs.js",XPC_SERVICE_NAME:"0",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.4",npm_package_devDependencies_autoprefixer:"^10.4.2",SHLVL:"2",HOME:"/Users/rajesh",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code - Insiders.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_package_dependencies_hls_js:"^1.1.1",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_config_version_git_message:"v%s",LOGNAME:"rajesh",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",npm_lifecycle_script:"webpack --node-env production",VSCODE_GIT_IPC_HANDLE:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T/vscode-git-49e2058bcb.sock",npm_package_dependencies_react:"^18.1.0",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.10 npm/? node/v14.15.1 darwin x64",GIT_ASKPASS:"/Applications/Visual Studio Code - Insiders.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code - Insiders.app/Contents/Frameworks/Code - Insiders Helper.app/Contents/MacOS/Code - Insiders Helper",npm_package_files_1:"src",npm_package_files_0:"dist",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",npm_package_devDependencies_css_loader:"^6.5.1",COLORTERM:"truecolor",npm_node_execpath:"/usr/local/bin/node",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",npm_config_version_tag_prefix:"v",NODE_ENV:"production",REACT_APP_TILE_SHAPE:"1-1",REACT_APP_THEME:"dark",REACT_APP_COLOR:"#2F80FF",REACT_APP_LOGO:"",REACT_APP_FONT:"Roboto",REACT_APP_SHOW_CHAT:"true",REACT_APP_SHOW_SCREENSHARE:"true",REACT_APP_VIDEO_AVATAR:"true",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/dopaminefit.app.100ms.live/",REACT_APP_ENV:"prod",REACT_APP_LOGROCKET_ID:"<Your Logrocket project ID>",REACT_APP_POLICY_CONFIG:'{"expert":{"center": ["customer"],"sidepane":["expert"]}}',REACT_APP_WEBINAR_PROPS:"{}",REACT_APP_DEFAULT_APP_DETAILS:"{}",REACT_APP_ENABLE_STATS_FOR_NERDS:"false",REACT_APP_PUSHER_APP_KEY:"",REACT_APP_PUSHER_AUTHENDPOINT:"",REACT_APP_HEADLESS_JOIN:"false"}.NS_DURATION_TIME_IN_MS)}}),[]),N=(0,e.useCallback)(()=>xe(void 0,null,function*(){s.current&&(yield n.removePluginFromAudioTrack(s.current),s.current=null)}),[n]),ue=(0,e.useCallback)(ne=>xe(void 0,null,function*(){let he="adding Noise Suppression plugin failed, see docs";ne.message&&(he=ne.message),ee.y.addToast({title:he}),o(!0),yield N(),s.current=null,console.error(ne)}),[N]),ve=(0,e.useCallback)(()=>xe(void 0,null,function*(){try{o(!1),yield _();const ne=n.validateAudioPluginSupport(s.current);if(ne.isSupported)yield n.addPluginToAudioTrack(s.current);else{const he=ne.errMsg;yield ue(he)}}catch(ne){yield ue(ne)}}),[n,ue,_]);return(0,e.useEffect)(()=>{xe(void 0,null,function*(){s.current||(yield _());const ne=n.validateAudioPluginSupport(s.current);p(ne.isSupported),o(!ne.isSupported)})},[v.audioInput,n,_]),l&&Me.T.showNS()?Ve.createElement(W.u,{title:`Turn ${r?"off":"on"} noise suppression`},Ve.createElement(T.h,{active:!r,disabled:a,onClick:()=>xe(void 0,null,function*(){r?yield N():yield ve()}),css:{mx:"$4"},"data-testid":"noise_suppression_btn"},Ve.createElement(Ht.Z,null))):null};var Qe=t(9121),Wt=t(6907);function Kt(){let s=["blur","https://www.100ms.live/images/vb-1.jpeg","https://www.100ms.live/images/vb-2.jpg","https://www.100ms.live/images/vb-3.png"];if({npm_package_devDependencies_prettier:"^2.5.1",npm_package_devDependencies_source_map_loader:"^3.0.1",TERM_PROGRAM:"vscode",npm_package_devDependencies_cssnano:"^5.0.15",NODE:"/usr/local/bin/node",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_package_dependencies_logrocket_react:"^5.0.1",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",TMPDIR:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T/",npm_package_dependencies_react_freeze:"^1.0.0",npm_package_dependencies__100mslive_react_icons:"0.1.4",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"1.69.0-insider",npm_package_dependencies_screenfull:"^5.1.0",npm_package_scripts_dev:"node ../../scripts/dev-webapp",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",npm_package_dependencies_uuid:"^8.3.2",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_react_dom:"^18.1.0",npm_package_readmeFilename:"README.md",USER:"rajesh",npm_package_description:"[![Documentation](https://img.shields.io/badge/Read-Documentation-blue)](https://docs.100ms.live/javascript/v2/foundation/basics) [![Discord](https://img.shields.io/badge/Community-Join%20on%20Discord-blue)](https://discord.gg/F8cNgbjSaQ) [![Email](https://img.shields.io/badge/Contact-Know%20More-blue)](mailto:founders@100ms.live)",npm_package_devDependencies_webpack:"^5.69.1",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_license:"MIT",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",COMMAND_MODE:"unix2003",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies_logrocket:"^2.2.0",npm_package_dependencies__100mslive_hms_noise_suppression:"0.2.4",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.yXvh3GvBBO/Listeners",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",npm_execpath:"/usr/local/lib/node_modules/yarn/bin/yarn.js",npm_package_dependencies__100mslive_react_ui:"0.1.4",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.3.2",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",PATH:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T/yarn--1658305433448-0.771102561960014:/Users/rajesh/Projects/Bitroot/100ms-web-vidcall/node_modules/.bin:/Users/rajesh/.config/yarn/link/node_modules/.bin:/usr/local/libexec/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/bin/node_modules/npm/bin/node-gyp-bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin:/Users/rajesh/Flutter-Dev/flutter/bin:/Users/rajesh/Flutter-Dev/flutter/.pub-cache/bin:/Users/rajesh/Flutter-Dev/flutter/bin:/Users/rajesh/Flutter-Dev/flutter/.pub-cache/bin",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["run","build"]}',_:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall/node_modules/.bin/webpack",npm_package_dependencies__tldraw_tldraw:"^1.5.0",__CFBundleIdentifier:"com.microsoft.VSCodeInsiders",npm_package_browserslist_production_1:"not dead",PWD:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall",npm_package_browserslist_production_0:">0.2%",JAVA_HOME:"/Library/Java/JavaVirtualMachines/jdk1.8.0_311.jdk/Contents/Home",npm_package_dependencies__100mslive_react_sdk:"0.1.4",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",LOCAL_GIT_DIRECTORY:"/Applications/GitHub Desktop.app/Contents/Resources/app/git",LANG:"en_US.UTF-8",npm_package_name:"100ms_edtech_template",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies__100mslive_hms_virtual_background:"1.4.4",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"webpack serve",npm_package_scripts_build:"webpack --node-env production",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_config_bin_links:"true",npm_package_main:"dist/index.cjs.js",XPC_SERVICE_NAME:"0",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.4",npm_package_devDependencies_autoprefixer:"^10.4.2",SHLVL:"2",HOME:"/Users/rajesh",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code - Insiders.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_package_dependencies_hls_js:"^1.1.1",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_config_version_git_message:"v%s",LOGNAME:"rajesh",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",npm_lifecycle_script:"webpack --node-env production",VSCODE_GIT_IPC_HANDLE:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T/vscode-git-49e2058bcb.sock",npm_package_dependencies_react:"^18.1.0",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.10 npm/? node/v14.15.1 darwin x64",GIT_ASKPASS:"/Applications/Visual Studio Code - Insiders.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code - Insiders.app/Contents/Frameworks/Code - Insiders Helper.app/Contents/MacOS/Code - Insiders Helper",npm_package_files_1:"src",npm_package_files_0:"dist",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",npm_package_devDependencies_css_loader:"^6.5.1",COLORTERM:"truecolor",npm_node_execpath:"/usr/local/bin/node",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",npm_config_version_tag_prefix:"v",NODE_ENV:"production",REACT_APP_TILE_SHAPE:"1-1",REACT_APP_THEME:"dark",REACT_APP_COLOR:"#2F80FF",REACT_APP_LOGO:"",REACT_APP_FONT:"Roboto",REACT_APP_SHOW_CHAT:"true",REACT_APP_SHOW_SCREENSHARE:"true",REACT_APP_VIDEO_AVATAR:"true",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/dopaminefit.app.100ms.live/",REACT_APP_ENV:"prod",REACT_APP_LOGROCKET_ID:"<Your Logrocket project ID>",REACT_APP_POLICY_CONFIG:'{"expert":{"center": ["customer"],"sidepane":["expert"]}}',REACT_APP_WEBINAR_PROPS:"{}",REACT_APP_DEFAULT_APP_DETAILS:"{}",REACT_APP_ENABLE_STATS_FOR_NERDS:"false",REACT_APP_PUSHER_APP_KEY:"",REACT_APP_PUSHER_AUTHENDPOINT:"",REACT_APP_HEADLESS_JOIN:"false"}.REACT_APP_VIDEO_VB){let a=["https://www.100ms.live/images/vb-1.gif"];s.push(...a)}let n=Math.floor(Math.random()*s.length);if(n===0)return"blur";if(n<=3){const a=document.createElement("img");return a.alt="VB",a.src=s[n],a}else if(n===4)return s[n]}var We=t(8160),Ke=(s,n,a)=>new Promise((o,l)=>{var p=r=>{try{v(a.next(r))}catch(_){l(_)}},g=r=>{try{v(a.throw(r))}catch(_){l(_)}},v=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,g);v((a=a.apply(s,n)).next())});const Zt=()=>{const s=(0,e.useRef)(null),n=(0,i.cw)(),a=(0,i._U)(c.xf),[o,l]=(0,e.useState)(!1),p=(0,i._U)((0,c.IX)("@100mslive/hms-virtual-background"));function g(){return Ke(this,null,function*(){if(!s.current){const{HMSVirtualBackgroundPlugin:_}=yield Promise.all([t.e(520),t.e(642)]).then(t.bind(t,7520));s.current=new _("none",!0)}})}(0,e.useEffect)(()=>{g().then(()=>{const _=n.validateVideoPluginSupport(s.current);l(_.isSupported)})},[n]);function v(){return Ke(this,null,function*(){try{yield g(),window.HMS.virtualBackground=s.current,yield s.current.setBackground(Kt()),yield n.addPluginToVideoTrack(s.current,15)}catch(_){console.error("add virtual background plugin failed",_)}})}function r(){return Ke(this,null,function*(){s.current&&(yield n.removePluginFromVideoTrack(s.current),s.current=null)})}return!a.video||!o?null:We.createElement(W.u,{title:`Turn ${p?"off":"on"} virtual background`},We.createElement(T.h,{active:!p,onClick:()=>{p?r():v()},css:{mx:"$4"},"data-testid":"virtual_bg_btn"},We.createElement(Wt.Z,null)))};var Gt=t(6922),zt=t(6722),Jt=t(8287),Yt=t(9057);function Xt(s){if(!s)return"";let n=Math.floor(s/60);n<10&&(n=`0${String(n)}`);let a=Math.floor(s%60);return a<10&&(a=`0${String(a)}`),`${n}:${a}`}const Qt=e.memo(({name:s,metadata:n,duration:a,selected:o,onClick:l})=>e.createElement(u.L.Item,{css:{flexDirection:"column",alignItems:"flex-start",h:"$18",p:"$8","&:hover":{cursor:"pointer",bg:"$menuBg"},"&:focus-visible":{bg:"$menuBg"}},onClick:l},e.createElement(A.k,{align:"center",justify:"between",css:{width:"100%",minHeight:0}},e.createElement(C.x,{variant:"md",css:{color:o?"$brandDefault":"$textPrimary"}},s),e.createElement(C.x,{variant:"xs"},Xt(a))),(n==null?void 0:n.description)&&e.createElement(C.x,{variant:"xs",css:{mt:"$4"}},n==null?void 0:n.description)));var qt=t(9990),en=t(8961),tn=Object.defineProperty,nn=Object.defineProperties,sn=Object.getOwnPropertyDescriptors,qe=Object.getOwnPropertySymbols,an=Object.prototype.hasOwnProperty,rn=Object.prototype.propertyIsEnumerable,et=(s,n,a)=>n in s?tn(s,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[n]=a,ln=(s,n)=>{for(var a in n||(n={}))an.call(n,a)&&et(s,a,n[a]);if(qe)for(var a of qe(n))rn.call(n,a)&&et(s,a,n[a]);return s},on=(s,n)=>nn(s,sn(n)),tt=(s,n,a)=>new Promise((o,l)=>{var p=r=>{try{v(a.next(r))}catch(_){l(_)}},g=r=>{try{v(a.throw(r))}catch(_){l(_)}},v=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,g);v((a=a.apply(s,n)).next())});const cn=({type:s,actions:n})=>e.createElement(e.Fragment,null,e.createElement(C.x,{as:"label",htmlFor:`${s}PlaylistBrowse`,variant:"sm",css:{cursor:"pointer",mr:"$2"}},"Browse"),e.createElement("input",{type:"file",id:`${s}PlaylistBrowse`,accept:s===c.Mv.audio?"audio/*":"video/*",onChange:a=>{const o=a.target.files[0],l=o.lastModified;n.setList([{type:s,id:l,name:o.name,url:URL.createObjectURL(o)}]),n.play(l)},style:{display:"none"}})),nt=({type:s})=>{const n=s===c.Mv.audio,{active:a,list:o,actions:l}=(0,en.Z)(s),[p,g]=(0,e.useState)(!1),[v,r]=(0,e.useState)(!1);return!(0,i._U)(c.xf).screen||o.length===0?null:e.createElement(e.Fragment,null,e.createElement(u.L.Root,{open:p,onOpenChange:g},e.createElement(u.L.Trigger,{asChild:!0,"data-testid":s===c.Mv.audio?"audio_playlist":"video_playlist"},e.createElement(T.h,{css:{mx:"$4"},active:!a},e.createElement(W.u,{title:n?"Audio Playlist":"Video Playlist"},e.createElement(k.x,null,n?e.createElement(zt.Z,null):e.createElement(Jt.Z,null))))),e.createElement(u.L.Content,{sideOffset:5,align:"center",css:{maxHeight:"unset",width:"$60",p:"$0",bg:"$bgSecondary",border:"1px solid $menuBg"}},e.createElement(A.k,{align:"center",css:{p:"$4 $8",borderBottom:"1px solid $borderLight",bg:"$menuBg"}},e.createElement(C.x,{variant:"md",css:{flex:"1 1 0"}},n?"Audio Player":"Video Playlist"),e.createElement(cn,{type:s,actions:l}),e.createElement(T.h,{css:{mr:"-$4"},onClick:()=>tt(void 0,null,function*(){a&&(yield l.stop()),g(!1),r(!1)})},e.createElement(Yt.Z,{width:24,height:24}))),!v&&e.createElement(k.x,{css:{maxHeight:"$96",overflowY:"auto"}},o.map(N=>e.createElement(Qt,on(ln({key:N.id},N),{onClick:ue=>tt(void 0,null,function*(){ue.preventDefault(),yield l.play(N.id),n||g(!1)})})))),n&&e.createElement(qt.iS,{onToggle:()=>r(N=>!N)}))))};var st=t(5213);const dn=e.lazy(()=>Promise.all([t.e(813),t.e(922)]).then(t.bind(t,4922))),pn=()=>{const{amIScreenSharing:s,screenShareVideoTrackId:n,screenShareAudioTrackId:a,toggleScreenShare:o}=(0,de.N)(),l=(0,i._U)(c.xf),p=s&&!n&&!!a,[g,v]=(0,e.useState)(!1);return!l.screen||!(0,$.Lo)()?null:e.createElement(e.Fragment,null,e.createElement(W.u,{title:`${p?"Stop":"Start"} audio sharing`,key:"shareAudio"},e.createElement(T.h,{active:!p,css:{mr:"$4"},onClick:()=>{s?o(!0):v(!0)},"data-testid":"screenshare_audio"},e.createElement(L.Z,null))),g&&e.createElement(Bt,{onClose:()=>v(!1)}))},at=({isMobile:s=!1})=>{const{isHandRaised:n,isBRBOn:a,toggleHandRaise:o,toggleBRB:l}=(0,Gt.W)();return e.createElement(A.k,{align:"center"},e.createElement(W.u,{title:`${n?"Unraise":"Raise"} hand`,css:{mx:"$4"}},e.createElement(T.h,{onClick:o,active:!n,"data-testid":`${s?"raise_hand_btn_mobile":"raise_hand_btn"}`},e.createElement(G.Z,null))),e.createElement(W.u,{title:`${a?"I'm back":"I'll be right back"}`},e.createElement(T.h,{css:{mx:"$4"},onClick:l,active:!a,"data-testid":"brb_btn"},e.createElement(z.Z,null))))},rt=()=>{const s=(0,i._U)(c.SI),n=(0,st.jc)(),a=(0,st.R)();return e.createElement(W.u,{key:"chat",title:`${n?"Close":"Open"} chat`},e.createElement(T.h,{css:{mx:"$4"},onClick:a,active:!n,"data-testid":"chat_btn"},s===0?e.createElement(J.Z,null):e.createElement(re.Z,{"data-testid":"chat_unread_btn"})))},mn=()=>e.createElement(A.k,{justify:"between",align:"center",css:{padding:"$2",position:"relative",height:"100%","@md":{flexWrap:"wrap"}}},e.createElement(A.k,{align:"center",css:{position:"absolute",left:"$7","@md":{position:"unset",justifyContent:"center",w:"100%",p:"$4 0"}}},e.createElement(pn,null),e.createElement(nt,{type:c.Mv.audio}),e.createElement(nt,{type:c.Mv.video}),Me.T.enableWhiteboard?e.createElement(Qe.VK,null):null,e.createElement(_n,null),e.createElement(Zt,null),e.createElement(Vt,null),Me.T.enableTranscription&&e.createElement(dn,null),e.createElement(A.k,{align:"center",css:{display:"none","@md":{display:"flex"}}},e.createElement(le.p,{space:4}),e.createElement(at,{isMobile:!0}))),e.createElement(A.k,{align:"center",justify:"center",css:{w:"100%"}},e.createElement(Q.l,null),e.createElement($t,{css:{mx:"$4"}}),e.createElement(Nt,null),e.createElement(le.p,{space:4}),e.createElement(O,null),e.createElement(A.k,{align:"center",css:{display:"none","@md":{display:"flex",ml:"$4"}}},e.createElement(rt,null))),e.createElement(A.k,{align:"center",css:{position:"absolute",right:"$7","@md":{display:"none"}}},e.createElement(at,null),e.createElement(le.p,{space:4}),e.createElement(rt,null))),_n=()=>{const s=(0,i._U)(c.xf);return e.createElement(e.Fragment,null,s.screen||Me.T.enableWhiteboard?e.createElement(le.p,{space:4}):null)};var lt=t(5374);const un=()=>{var s,n;const a=(0,i.cw)(),o=(0,ye.tQ)(),l=(0,i._U)(c.lj);return!(l==null?void 0:l.role)||o?null:e.createElement(E.wq,{title:"Role Change Request",onOpenChange:p=>!p&&a.rejectChangeRole(l),body:`${(s=l==null?void 0:l.requestedBy)==null?void 0:s.name} has requested you to change your role to ${(n=l==null?void 0:l.role)==null?void 0:n.name}.`,onAction:()=>{a.acceptChangeRole(l)},Icon:pe.Z,actionText:"Accept"})};var it=t(9655);const gn=()=>{const{maxTileCount:s,appPolicyConfig:{center:n=[],sidepane:a=[]},showStatsOnTiles:o}=(0,e.useContext)(F.I),l=(0,i._U)(c.BK),p=(0,i._U)(c.I3),g=l.filter(_=>n.includes(_.roleName)),v=l.filter(_=>a.includes(_.roleName));let r=g.length>0&&v.length>0;if(g.length===0){const _=l.length===1&&l[0].id===p,N=v.length===0;r=_||N}return e.createElement(A.k,{css:{size:"100%"},direction:{"@initial":"row","@md":"column"}},e.createElement(it.m,{peers:r?g:l,maxTileCount:s,allowRemoteMute:!1,hideSidePane:!r,totalPeers:l.length,showStatsOnTiles:o}),r&&e.createElement(it.O,{peers:v,totalPeers:l.length,showStatsOnTiles:o}))};var vn=t(535);const En=(s=5*60*1e3)=>{const n=(0,i._U)(c.ln),a=(0,i._U)(c.dA),[o,l]=(0,e.useState)(!1),p=(0,e.useRef)(null),g=n&&a===1;return(0,e.useEffect)(()=>{g&&!p.current?p.current=setTimeout(()=>{l(!0)},s):g||(p.current&&clearTimeout(p.current),p.current=null,l(!1))},[g,s]),(0,e.useEffect)(()=>()=>{clearTimeout(p.current)},[]),{alone:g,aloneForLong:o}},hn=()=>{const s=(0,i.cw)(),n=(0,i._U)(c.AI),a=(0,ye.tQ)(),{aloneForLong:o}=En(),l=(0,i._U)(c.Yt),p=(0,i._U)(c.A$),g=(0,i._U)(c.Go);(0,e.useEffect)(()=>{o&&a&&(n.endRoom?s.endRoom(!1,"Stop Beam"):(l.running&&n.streaming&&s.stopHLSStreaming(),(p.running&&n.streaming||g.browser.running&&n.recording)&&s.stopRTMPAndRecording()))},[o,a,s,n,l,g,p])},fn=e.lazy(()=>t.e(421).then(t.bind(t,9421))),Pn=e.lazy(()=>Promise.all([t.e(404),t.e(245)]).then(t.bind(t,3245))),An=e.lazy(()=>t.e(507).then(t.bind(t,507))),Cn=()=>{const s=(0,i._U)(c.fo),n=(0,i._U)(c.pk),a=(0,i._U)(c.Vq),o=(0,i._U)(c.Oq),l=(0,ye.L3)(Pe.JZ.isAudioOnly),{whiteboardOwner:p}=(0,Qe.l0)(),g=(0,i._U)(c.Pz);hn();const v=(0,i.cw)(),{audioPlaylist:r,videoPlaylist:_,uiViewMode:N,HLS_VIEWER_ROLE:ue,showStatsOnTiles:ve}=(0,e.useContext)(F.I);if((0,e.useEffect)(()=>{g===c.wk.Connected&&(_.length>0&&v.videoPlaylist.setList(_),r.length>0&&v.audioPlaylist.setList(r))},[g,_,r,v]),!s)return null;let ne;return s===ue?ne=Pn:p?ne=fn:(n&&n.id!==(a==null?void 0:a.id)||o)&&!l?ne=vn.Z:N===Pe.FU?ne=An:ne=gn,ne&&e.createElement(e.Suspense,{fallback:e.createElement(lt.Z,null)},e.createElement(ne,{showStats:ve}))},Sn=()=>{const s=(0,S.s0)(),{roomId:n,role:a}=(0,S.UO)(),o=(0,ye.tQ)(),l=(0,i._U)(c.Pz),p=(0,b.Z)(l),g=(0,i._U)(c.ln),v=(0,i.cw)();return(0,e.useEffect)(()=>{if(!n){s("/");return}!p&&!(l===c.wk.Connecting||l===c.wk.Reconnecting||g)&&s(a?`/preview/${n||""}/${a}`:`/preview/${n||""}`)},[g,p,l,s,a,n]),(0,e.useEffect)(()=>()=>{g&&v.leave()},[v,g]),g?e.createElement(A.k,{css:{size:"100%"},direction:"column"},!o&&e.createElement(k.x,{css:{h:"$18","@md":{h:"$17"}},"data-testid":"header"},e.createElement(j.h,null)),e.createElement(k.x,{css:{w:"100%",flex:"1 1 0",minHeight:0},"data-testid":"conferencing"},e.createElement(Cn,null)),!o&&e.createElement(k.x,{css:{flexShrink:0,minHeight:"$24"},"data-testid":"footer"},e.createElement(mn,null)),e.createElement(un,null)):e.createElement(lt.Z,null)}},9655:(Ae,q,t)=>{t.d(q,{m:()=>U,O:()=>oe});var e=t(8160),S=t(32),b=t(9290),i=t(6939),c=t(8485),A=t(8721),k=t(914);const j=e.memo(()=>e.createElement(i.x,{css:{position:"relative",overflow:"hidden",w:"37.5rem",maxWidth:"80%",h:"100%",r:"$3",m:"0 auto",backgroundImage:`url(${k})`,backgroundSize:"cover",backgroundRepeat:"no-repeat"},"data-testid":"first_person_img"},e.createElement(c.k,{align:"center",direction:"column",css:{position:"absolute",w:"100%",top:"33.33%",left:0,textAlign:"center"}},e.createElement(A.x,{color:"white",variant:"h4",css:{"@md":{fontSize:"$md"}}},"Welcome!"),e.createElement(A.x,{color:"white",variant:"h6",css:{mt:"$4","@md":{fontSize:"$sm"}}},"You\u2019re the first one here."),e.createElement(A.x,{color:"white",variant:"h6",css:{mt:"$2","@md":{fontSize:"$sm"}}},"Sit back and relax till the others join."))));var L=t(6500),G=t(8051),z=t(5213),J=t(9953);const re=(0,b.zo)("img",{width:"100%",height:"auto",r:"$3"});var de=Object.defineProperty,W=Object.defineProperties,T=Object.getOwnPropertyDescriptors,le=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,B=(x,w,Y)=>w in x?de(x,w,{enumerable:!0,configurable:!0,writable:!0,value:Y}):x[w]=Y,y=(x,w)=>{for(var Y in w||(w={}))Q.call(w,Y)&&B(x,Y,w[Y]);if(le)for(var Y of le(w))ie.call(w,Y)&&B(x,Y,w[Y]);return x},D=(x,w)=>W(x,T(w));const I=4,E=JSON.parse("{}"),h=(E==null?void 0:E.ROOM_IDS)||[],O=(E==null?void 0:E.IMAGE_FILE)||"",M=(E==null?void 0:E.LINK_HREF)||"https://100ms.live/",U=({peers:x,maxTileCount:w,hideSidePane:Y,showStatsOnTiles:R})=>{const m=b.vc.media.md,u=(0,S.Z)(m),C=(0,z.jc)();return e.createElement(e.Fragment,null,e.createElement(i.x,{css:{flex:"1 1 0",height:"100%","@md":{flex:"2 1 0"}}},x&&x.length>0?e.createElement(G.Z,{showStatsOnTiles:R,peers:x,maxTileCount:u?I:w}):h.some(Se=>window.location.href.includes(Se))?e.createElement(i.x,{css:{display:"grid",placeItems:"center",size:"100%",p:"$12"}},e.createElement("a",{href:M,target:"_blank",rel:"noreferrer"},e.createElement(re,{css:{p:"$4",boxShadow:"$sm"},alt:"Event template",src:O}))):e.createElement(j,null)),C&&Y&&e.createElement(c.k,{css:{height:"75%",flex:"0 0 20%",zIndex:40,mr:"$4",alignSelf:"flex-end","@md":J.S8,"@ls":{minHeight:"100%",bottom:"$7"}}},e.createElement(L.i,null)))},oe=({peers:x,showStatsOnTiles:w})=>{const Y=(0,z.jc)();return e.createElement(c.k,{direction:"column",css:{flex:"0 0 20%",mx:"$4","@lg":{flex:"0 0 25%"},"@md":{flex:"1 1 0"}}},e.createElement(c.k,{css:{flex:"1 1 0"},align:"end"},x&&x.length>0&&e.createElement(G.Z,{showStatsOnTiles:w,peers:x,maxColCount:2})),Y&&e.createElement(c.k,{align:"end",css:{flex:"1 1 0",h:"50%",p:"$4","@md":J.S8,"@ls":D(y({},J.S8),{minHeight:"85%"})}},e.createElement(L.i,null)))}},3844:(Ae,q,t)=>{t.d(q,{O:()=>b});const e="peerName",S=new Map([[[!0,"screen"].toString(),"Your Screen"],[[!0,"regular"].toString(),`You (${e})`],[[!1,"screen"].toString(),`${e}'s Screen`],[[!1,"regular"].toString(),e],[[!0,void 0].toString(),`You (${e})`],[[!1,void 0].toString(),`${e}`]]),b=({peerName:i,isLocal:c,track:A})=>{const k=i!==void 0;if(!k||!A)return k?S.get([c,void 0].toString()).replace(e,i):"";const j=A.volume===0;let L=S.get([c,A.source].toString());return L?L=L.replace(e,i):L=`${i} ${A.source}`,L=`${L}${A.degraded?"(Degraded)":""}`,`${L}${j?" (Muted for you)":""}`}},535:(Ae,q,t)=>{t.d(q,{s:()=>R,Z:()=>pe});var e=t(8160),S=t(32),b=t(3751),i=t(9130),c=t(9290),A=t(8485),k=t(6939),j=t(6500),L=t(4685),G=t(9057),z=t(8721),J=t(7688),re=(V,X,$)=>new Promise((F,ee)=>{var Ee=_e=>{try{K($.next(_e))}catch(fe){ee(fe)}},me=_e=>{try{K($.throw(_e))}catch(fe){ee(fe)}},K=_e=>_e.done?F(_e.value):Promise.resolve(_e.value).then(Ee,me);K(($=$.apply(V,X)).next())});const de=()=>{const V=(0,b.cw)();return e.createElement(A.k,{direction:"column",align:"center",justify:"center",css:{position:"relative",overflow:"hidden",w:"37.5rem",maxWidth:"80%",h:"100%",r:"$3",m:"0 auto",color:"$textPrimary",bg:"$tileBg",textAlign:"center"}},e.createElement(L.Z,{width:48,height:48}),e.createElement(z.x,{variant:"h5",css:{m:"$8 0"}},"You are sharing your screen"),e.createElement(J.z,{variant:"danger",onClick:()=>re(void 0,null,function*(){yield V.setScreenShareEnabled(!1)}),"data-testid":"stop_screen_share_btn"},e.createElement(G.Z,{width:18,height:18}),"\xA0 Stop screen share"))};var W=t(9477),T=t(8051),le=t(8329),Q=t(2843),ie=t(6118),B=t(8523),y=t.n(B),D=t(6532),I=t(7854),E=t(5861),h=t(3074),O=t(9990),M=t(5581),U=t(6773);const oe=e.memo(({peerId:V})=>{const X=(0,b._U)((0,i.CI)(V)),$=(0,b._U)(i.k0.selectedItem),F=(0,U.L3)(M.JZ.isAudioOnly),ee=(0,b.cw)(),Ee=(0,e.useRef)(null),[me,K]=(0,Q.Z)(!1),_e=(0,ie.Z)(Ee,me,{onClose:()=>K(!1)});return e.createElement(A.k,{direction:"column",justify:"center",css:{w:"100%",h:"100%"},ref:Ee},$&&e.createElement(A.k,{justify:"between",align:"center",css:{bg:"$menuBg",p:"$2 $2 $2 $6",borderTopLeftRadius:"$1",borderTopRightRadius:"$1"}},e.createElement(z.x,{css:{color:"$textPrimary"}},$.name),e.createElement(E.h,{css:{color:"$white"},onClick:()=>{ee.videoPlaylist.stop()},"data-testid":"videoplaylist_cross_btn"},e.createElement(G.Z,null))),e.createElement(h.n,{trackId:X==null?void 0:X.id,attach:!F,css:{"@lg":{objectFit:"contain",h:"auto"},r:"$1",borderTopLeftRadius:0,borderTopRightRadius:0}}),e.createElement(O.Nc,null,y().enabled&&e.createElement(E.h,{onClick:()=>K(),css:{color:"$white",height:"max-content",alignSelf:"center",cursor:"pointer"}},_e?e.createElement(D.Z,null):e.createElement(I.Z,null))))});var x=t(9953),w=t(5213);const Y=({showStats:V})=>{var X;const $=c.vc.media.lg,F=(0,S.Z)($),ee=(0,b._U)(i.BK),Ee=(0,b._U)(i.I3),me=(0,b._U)(i.fo),K=(0,b._U)(i.pk),_e=(0,b._U)(i.Oq),fe=((X=K==null?void 0:K.roleName)==null?void 0:X.toLowerCase())===(me==null?void 0:me.toLowerCase()),Te=Ee===(K==null?void 0:K.id),te=F||Te||fe,d=(0,e.useMemo)(()=>{const f=ee.filter(P=>P.id!==(K==null?void 0:K.id));return te&&K&&f.unshift(K),f},[ee,K,te]);return e.createElement(A.k,{css:{size:"100%"},direction:F?"column":"row"},e.createElement(m,{showStats:V,amIPresenting:Te,peerPresenting:K,peerSharingPlaylist:_e}),e.createElement(A.k,{direction:{"@initial":"column","@lg":"row"},css:{overflow:"hidden",p:"$4",flex:"0 0 20%","@lg":{flex:"1 1 0"}}},e.createElement(R,{showSidebarInBottom:F,showStats:V,peerScreenSharing:K,isPresenterInSmallTiles:te,smallTilePeers:d,totalPeers:ee.length})))},R=({showStats:V,isPresenterInSmallTiles:X,peerScreenSharing:$,smallTilePeers:F,totalPeers:ee,showSidebarInBottom:Ee})=>{const me=(0,e.useCallback)(K=>$&&K.id!==$.id,[$]);return e.createElement(e.Fragment,null,!X&&e.createElement(Se,{peerScreenSharing:$,showStatsOnTiles:V}),e.createElement(C,{showSidebarInBottom:Ee,smallTilePeers:F,shouldShowScreenFn:me,showStatsOnTiles:V}),e.createElement(u,{totalPeers:ee}))},m=({showStats:V,amIPresenting:X,peerPresenting:$,peerSharingPlaylist:F})=>{const ee=(0,b._U)((0,i.K6)($==null?void 0:$.id));return F?e.createElement(k.x,{css:{mx:"$4",flex:"3 1 0","@lg":{flex:"2 1 0",display:"flex",alignItems:"center"}}},e.createElement(oe,{peerId:F.id})):e.createElement(k.x,{css:{flex:"3 1 0",mx:"$4",ml:"$5","@lg":{ml:"$4",maxHeight:"80%"}}},$&&(X&&!["browser","window","application"].includes(ee==null?void 0:ee.displaySurface)?e.createElement(k.x,{css:{objectFit:"contain",h:"100%"}},e.createElement(de,null)):e.createElement(W.Z,{showStatsOnTiles:V,peerId:$==null?void 0:$.id})))},u=()=>(0,w.jc)()?e.createElement(k.x,{css:{h:"45%",flexShrink:0,"@lg":x.S8,"@ls":{position:"absolute",top:0,h:"100%",minHeight:300,zIndex:40}}},e.createElement(j.i,null)):null,C=({smallTilePeers:V,shouldShowScreenFn:X,showStatsOnTiles:$,showSidebarInBottom:F})=>e.createElement(A.k,{css:{flex:"2 1 0"}},V&&V.length>0&&e.createElement(T.Z,{peers:V,maxColCount:F?void 0:2,maxRowCount:F?1:void 0,includeScreenShareForPeer:X,showStatsOnTiles:$})),Se=({peerScreenSharing:V,showStatsOnTiles:X})=>V?e.createElement(k.x,{css:{flex:"1 1 0",minHeight:"25%",py:"$4","@lg":{mr:"$4",minHeight:"unset",py:0},"@sm":{height:"100%",maxHeight:"75%",alignSelf:"center"}}},e.createElement(le.Z,{showStatsOnTiles:X,width:"100%",height:"100%",peerId:V.id})):null,pe=Y},914:(Ae,q,t)=>{Ae.exports=t.p+"static/media/first_person.0917322d0bba25059a53.png"}}]);

//# sourceMappingURL=694.ae1c5be2.js.map