"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[694],{9112:(Ae,q,t)=>{t.d(q,{M:()=>i});var e=t(3751),S=t(9130),T=t(5581);const i=()=>(0,e._U)((0,S.EP)(T._8.appConfig))},5213:(Ae,q,t)=>{t.d(q,{jc:()=>c,R:()=>A,Kx:()=>D});var e=t(8160),S=t(3751),T=t(9130),i=t(5581);const c=()=>!!(0,S._U)((0,T.EP)(i._8.chatOpen)),A=()=>{const j=(0,S.cw)(),L=(0,S.gg)();return(0,e.useCallback)(()=>{const z=L.getState((0,T.EP)(i._8.chatOpen));j.setAppData(i._8.chatOpen,!z,!0)},[L,j])},D=()=>{const j=(0,S.cw)();let L=(0,S._U)((0,T.EP)(i._8.chatDraft));L==null&&(L="");const G=(0,e.useCallback)(z=>{j.setAppData(i._8.chatDraft,z,!0)},[j]);return[L,G]}},8961:(Ae,q,t)=>{t.d(q,{Z:()=>T});var e=t(9130),S=t(3751);const T=i=>{const c=i===e.Mv.audio,A=c?e.Hx:e.k0,D=(0,S._U)(A.selectedItem),j=(0,S._U)(A.selection),L=(0,S._U)(A.list),G=(0,S.cw)(),z=c?G.audioPlaylist:G.videoPlaylist;return{active:D,hasNext:j.hasNext,hasPrevious:j.hasPrevious,actions:z,list:L}}},9121:(Ae,q,t)=>{t.d(q,{VK:()=>J,nN:()=>M,l0:()=>le.l});var e=t(8160),S=t(4696),T=t(3751),i=t(9130),c=t(108),A=t.n(c),D=Object.defineProperty,j=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,z=(R,_,u)=>_ in R?D(R,_,{enumerable:!0,configurable:!0,writable:!0,value:u}):R[_]=u,Y=(R,_)=>{for(var u in _||(_={}))L.call(_,u)&&z(R,u,_[u]);if(j)for(var u of j(_))G.call(_,u)&&z(R,u,_[u]);return R},re=(R,_,u)=>(z(R,typeof _!="symbol"?_+"":_,u),u);const de=R=>JSON.stringify(R,(_,u)=>u===void 0?null:u);class W{constructor(){re(this,"init",(_="")=>{this.initialized||(this.pusher=new(A())("",{cluster:"ap2",authEndpoint:""}),this.channel=this.pusher.subscribe(`private-${_}`),this.channel.bind("pusher:subscription_succeeded",this.resendLastEvents),console.log("Whiteboard initialized communication through Pusher"),this.initialized=!0)}),re(this,"storeEvent",(_,u)=>{this.lastMessage[_]=Y({eventName:_},u)}),re(this,"getStoredEvent",_=>this.lastMessage[_]),re(this,"broadcastEvent",(_,u={})=>{this.storeEvent(_,u),this.channel.trigger(`client-${_}`,de(Y({eventName:_},u)))}),re(this,"subscribe",(_,u)=>(this.channel.bind(`client-${_}`,C=>this.storeEvent(_,C)),this.channel.bind(`client-${_}`,u),()=>{this.channel.unbind(`client-${_}`,u)})),re(this,"resendLastEvents",()=>{for(const _ in this.lastMessage)this.lastMessage[_]&&this.channel.trigger(`client-${_}`,this.lastMessage[_])}),this.initialized=!1,this.lastMessage={}}}const b=new W;var le=t(802);const Q={STATE_CHANGE:"state-change",CURRENT_STATE:"current-state",REQUEST_STATE:"request-state"},ie=()=>{const{amIWhiteboardOwner:R}=(0,le.l)();return{shouldRequestState:(0,T._U)((0,i._u)(850)),amIWhiteboardOwner:R}};function B(R){const[_,u]=(0,e.useState)(null),[C,Se]=(0,e.useState)(!1),{amIWhiteboardOwner:pe,shouldRequestState:V}=ie(),X=(0,e.useRef)(new Map),$=(0,e.useRef)(new Map),F=(0,e.useCallback)(()=>({shapes:X.current?Object.fromEntries(X.current):{},bindings:$.current?Object.fromEntries($.current):{}}),[]),ee=(0,e.useCallback)(()=>{pe&&C&&b.broadcastEvent(Q.CURRENT_STATE,F())},[pe,C,F]),ve=(0,e.useCallback)(({shapes:te,bindings:d,merge:f=!0})=>{if(!!(te&&d))if(f){const P=X.current,H=$.current;if(!(P&&H))return;Object.entries(te).forEach(([Z,se])=>{se?P.set(se.id,se):P.delete(Z)}),Object.entries(d).forEach(([Z,se])=>{se?H.set(se.id,se):H.delete(Z)})}else X.current=new Map(Object.entries(te)),$.current=new Map(Object.entries(d))},[]),_e=(0,e.useCallback)(te=>{_==null||_.replacePageContent(te.shapes,te.bindings,{})},[_]),K=(0,e.useCallback)(te=>{if(!te)return;const{shapes:d,bindings:f,eventName:P}=te;ve({shapes:d,bindings:f,merge:P===Q.STATE_CHANGE}),_e(F())},[_e,F,ve]),me=(0,e.useCallback)(()=>{!C||(pe?(K(b.getStoredEvent(Q.CURRENT_STATE)),ee()):V&&b.broadcastEvent(Q.REQUEST_STATE))},[C,pe,V,K,ee]),fe=(0,e.useCallback)(te=>{te.loadRoom(R),te.pause(),u(te)},[R]),be=(0,e.useCallback)((te,d,f,P)=>{ve({shapes:d,bindings:f}),b.broadcastEvent(Q.STATE_CHANGE,{shapes:d,bindings:f}),_e(F())},[ve,_e,F]);return(0,e.useEffect)(()=>{if(!_)return;const te=[];let d=!0;function f(){d&&(te.push(b.subscribe(Q.STATE_CHANGE,K)),te.push(b.subscribe(Q.CURRENT_STATE,K)),te.push(b.subscribe(Q.REQUEST_STATE,ee)),Se(!0))}return b.init(),f(),me(),()=>{d=!1,te.forEach(P=>P())}},[_,me,ee,K]),(0,e.useEffect)(()=>()=>{C&&!V&&(console.log("Whiteboard unmount storing",F()),b.storeEvent(Q.CURRENT_STATE,F()))},[C,V,F]),{onMount:fe,onChangePage:be}}var y=Object.defineProperty,O=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,h=(R,_,u)=>_ in R?y(R,_,{enumerable:!0,configurable:!0,writable:!0,value:u}):R[_]=u,k=(R,_)=>{for(var u in _||(_={}))I.call(_,u)&&h(R,u,_[u]);if(O)for(var u of O(_))v.call(_,u)&&h(R,u,_[u]);return R};const M=e.memo(({roomId:R})=>{const _=B(R);return e.createElement(S.Dr,k({autofocus:!0,disableAssets:!0,showSponsorLink:!1,showPages:!1,showMenu:!1},_))});var U=t(455),oe=t(5861),x=t(9168),N=t(8160);const J=()=>{const{whiteboardEnabled:R,whiteboardOwner:_,amIWhiteboardOwner:u,toggleWhiteboard:C}=(0,le.l)();return R?N.createElement(U.u,{title:`${_?u?"Stop whiteboard":"Can't stop whiteboard":"Start whiteboard"}`,key:"whiteboard"},N.createElement(oe.h,{css:{mx:"$4"},onClick:C,active:!_,disabled:_&&!u,"data-testid":"white_board_btn"},N.createElement(x.Z,null))):null}},9990:(Ae,q,t)=>{t.d(q,{iS:()=>B,Nc:()=>y});var e=t(8160),S=t(9130),T=t(3751),i=t(6905),c=t(4817),A=t(8338),D=t(4053),j=t(4334),L=t(7506),G=t(8651),z=t(6939),Y=t(8485),re=t(8721),de=t(5861),W=t(8961);const b=({type:O,duration:I})=>{const v=O===S.Mv.audio?S.Hx:S.k0,h=(0,T._U)(v.progress),k=(0,T.cw)(),M=O===S.Mv.audio?k.audioPlaylist:k.videoPlaylist;return I?e.createElement(G.i,{step:1,value:[h],onValueChange:U=>{M.seekTo(U[0]*.01*I)}}):null},le=({type:O,onToggle:I})=>{var v,h;const M=O===S.Mv.audio?S.Hx:S.k0,U=(0,T._U)(M.selectedItem);return U?e.createElement(z.x,{css:{mt:"$8"}},e.createElement(Y.k,{justify:"between",css:{w:"100%"}},e.createElement(z.x,null,e.createElement(re.x,{variant:"md"},U.name),((v=U.metadata)==null?void 0:v.description)&&e.createElement(re.x,{variant:"xs"},(h=U.metadata)==null?void 0:h.description)),e.createElement(de.h,{onClick:I,css:{alignSelf:"center"},"data-testid":"playlist_collapse_btn"},e.createElement(i.Z,null)))):null},Q=({type:O,css:I={}})=>{const{active:v,hasNext:h,hasPrevious:k,actions:M}=(0,W.Z)(O);return v?e.createElement(Y.k,{justify:"center",css:I},e.createElement(de.h,{disabled:!k,onClick:()=>{M.playPrevious()},"data-testid":"playlist_prev_btn"},e.createElement(c.Z,null)),e.createElement(de.h,{onClick:()=>{v.playing?M.pause():M.play(v.id)},"data-testid":"playlist_play_pause_btn"},v.playing?e.createElement(A.Z,{width:32,height:32}):e.createElement(D.Z,{width:32,height:32})),e.createElement(de.h,{disabled:!h,onClick:()=>{M.playNext()},"data-testid":"playlist_next_btn"},e.createElement(j.Z,null))):null},ie=()=>{const O=(0,T.cw)(),I=(0,T._U)(S.k0.volume),v=(0,T._U)(S.k0.selectedItem),h=(0,T._U)(S.Oq),k=(0,T._U)((0,S.n2)(h==null?void 0:h.id)),M=(0,T._U)((0,S.BF)(k==null?void 0:k.id)),U=v?I:M;return e.createElement(Y.k,{align:"center",css:{color:"$white"}},e.createElement(L.Z,null),e.createElement(G.i,{css:{mx:"$4",w:"$20"},min:0,max:100,step:1,value:[Math.floor(U)],onValueChange:oe=>{const x=oe[0];v?O.videoPlaylist.setVolume(x):k&&O.setVolume(x,k.id)},thumbStyles:{w:"$6",h:"$6"}}))},B=({onToggle:O})=>{const{active:I}=(0,W.Z)(S.Mv.audio);return I?e.createElement(z.x,{css:{p:"$8",borderTop:"1px solid $borderLight",bg:"$menuBg"}},e.createElement(Q,{type:S.Mv.audio}),e.createElement(b,{type:S.Mv.audio,duration:I.duration}),e.createElement(le,{type:S.Mv.audio,onToggle:O})):null},y=({children:O})=>{const{active:I}=(0,W.Z)(S.Mv.video);return e.createElement(z.x,{css:{p:"$8",mt:"-$24",w:"100%",zIndex:1,"@lg":{mt:0,p:"$6"}}},I&&e.createElement(b,{type:S.Mv.video,duration:I.duration}),e.createElement(Y.k,{align:"center",justify:"between"},e.createElement(ie,null),I&&e.createElement(Q,{css:{flex:"1 1 0"}}),O))}},9477:(Ae,q,t)=>{t.d(q,{Z:()=>ie});var e=t(8160),S=t(1280),T=t(4299),i=t(3074),c=t(3751),A=t(9130),D=t(6532),j=t(7854),L=t(6118),G=t(6567),z=t(3844),Y=t(8523),re=t.n(Y),de=t(5581),W=t(6773);const b={position:"unset",width:"100%",textAlign:"center",transform:"none",mt:"$2",flexShrink:0},le=({peerId:B,showStatsOnTiles:y,width:O="100%",height:I="100%"})=>{const v=(0,c._U)((0,A.K6)(B)),h=(0,c._U)((0,A.Nm)(B)),k=(0,W.L3)(de.JZ.isAudioOnly),M=(0,W.tQ)(),[U,oe]=(0,e.useState)(!1),x=(0,z.O)({peerName:h.name,isLocal:!1,track:v}),N=(0,e.useRef)(null),[J,R]=(0,e.useState)(!1),_=(0,L.Z)(N,J,{onClose:()=>R(!1)}),u=re().isEnabled,C=(0,c._U)((0,A.Qq)(h==null?void 0:h.id));return e.createElement(S.i.Root,{css:{width:O,height:I},"data-testid":"screenshare_tile"},h?e.createElement(S.i.Container,{transparentBg:!0,ref:N,css:{flexDirection:"column"},onMouseEnter:()=>oe(!0),onMouseLeave:()=>{oe(!1)}},y?e.createElement(T.q8,{audioTrackID:C==null?void 0:C.id,videoTrackID:v==null?void 0:v.id}):null,u&&!M?e.createElement(S.i.FullScreenButton,{onClick:()=>R(!J)},_?e.createElement(D.Z,null):e.createElement(j.Z,null)):null,v?e.createElement(i.n,{screenShare:!0,mirror:h.isLocal&&(v==null?void 0:v.source)==="regular",attach:!k,trackId:v.id}):null,e.createElement(S.i.Info,{css:b},x),U&&!M&&!(h==null?void 0:h.isLocal)?e.createElement(G.Z,{isScreenshare:!0,peerID:h==null?void 0:h.id,audioTrackID:C==null?void 0:C.id,videoTrackID:v==null?void 0:v.id}):null):null)},ie=e.memo(le)},6567:(Ae,q,t)=>{t.d(q,{Z:()=>le});var e=t(8160),S=t(4328),T=t(8111),i=t(7923),c=t(6548),A=t(8981),D=t(7506),j=t(9540),L=t(3751),G=t(9130),z=t(4866),Y=t(8414),re=t(8485),de=t(8651),W=(Q,ie,B)=>new Promise((y,O)=>{var I=k=>{try{h(B.next(k))}catch(M){O(M)}},v=k=>{try{h(B.throw(k))}catch(M){O(M)}},h=k=>k.done?y(k.value):Promise.resolve(k.value).then(I,v);h((B=B.apply(Q,ie)).next())});const le=({audioTrackID:Q,videoTrackID:ie,peerID:B,isScreenshare:y=!1})=>{const O=(0,L.cw)();let{removeOthers:I}=(0,L._U)(G.AI);I=I&&!y;const{isAudioEnabled:v,isVideoEnabled:h,setVolume:k,toggleAudio:M,toggleVideo:U,volume:oe}=(0,z.T)(Q,ie);return I||M||U||k?e.createElement(Y.R.Root,null,e.createElement(Y.R.Trigger,{"data-testid":"participant_menu_btn"},e.createElement(S.Z,null)),e.createElement(Y.R.Content,{side:"left",align:"start",sideOffset:10},U?e.createElement(Y.R.ItemButton,{onClick:U,"data-testid":h?"mute_video_participant_btn":"unmute_video_participant_btn"},h?e.createElement(T.Z,null):e.createElement(i.Z,null),e.createElement("span",null,`${h?"Mute":"Request Unmute"}`)):null,M?e.createElement(Y.R.ItemButton,{onClick:M,"data-testid":h?"mute_audio_participant_btn":"unmute_audio_participant_btn"},v?e.createElement(c.Z,null):e.createElement(A.Z,null),e.createElement("span",null,`${v?"Mute":"Request Unmute"}`)):null,Q?e.createElement(Y.R.VolumeItem,{"data-testid":"participant_volume_slider"},e.createElement(re.k,{align:"center",gap:1},e.createElement(D.Z,null)," ",e.createElement("span",null,"Volume (",oe,")")),e.createElement(de.i,{css:{my:"0.5rem"},step:5,value:[oe],onValueChange:x=>k(x[0])})):null,I?e.createElement(Y.R.RemoveItem,{onClick:()=>W(void 0,null,function*(){try{yield O.removePeer(B,"")}catch{}}),"data-testid":"remove_participant_btn"},e.createElement(j.Z,null),e.createElement("span",null,"Remove Participant")):null)):null}},8051:(Ae,q,t)=>{t.d(q,{Z:()=>ie});var e=t(8160),S=t(5683),T=t(9314),i=t(8613),c=t(8534),A=t(871),D=t(8329),j=t(9477),L=t(9478),G=t(4674),z=t(4718),Y=t(3385);const re=({page:B,setPage:y,numPages:O})=>{const I=B===0,v=B===O-1,h=()=>{y(Math.min(B+1,O-1))},k=()=>{y(Math.max(B-1,0))};return e.createElement(G.I.Root,null,e.createElement(G.I.Chevron,{disabled:I,onClick:k},e.createElement(z.Z,{width:16,height:16,style:{cursor:I?"not-allowed":"pointer"}})),e.createElement(G.I.Dots,null,[...Array(O)].map((M,U)=>e.createElement(G.I.Dot,{key:U,active:B===U,onClick:()=>y(U)}))),e.createElement(G.I.Chevron,{disabled:v,onClick:h},e.createElement(Y.Z,{width:16,height:16,style:{cursor:v?"not-allowed":"pointer"}})))};var de=t(9112),W=t(6773);const b=({maxTileCount:B,peers:y,showStatsOnTiles:O,maxColCount:I,maxRowCount:v,includeScreenShareForPeer:h})=>{const{aspectRatio:k}=(0,T.Fg)(),M=(0,de.M)(),U=(0,W.tQ)(),{ref:oe,pagesWithTiles:x}=(0,A.i)({peers:y,maxTileCount:B,maxColCount:I,maxRowCount:v,includeScreenShareForPeer:h,aspectRatio:k,offsetY:Q({isHeadless:U,appConfig:M})}),[N,J]=(0,e.useState)(0);(0,e.useEffect)(()=>{N>=x.length&&J(0)},[x.length,N]);const R=L.T.freezeVideoList();return e.createElement(i.d.Root,{ref:oe},e.createElement(i.d.Container,null,x&&x.length>0?x.map((_,u)=>e.createElement(S.f,{freeze:R&&N!==u,key:u},e.createElement(i.d.View,{css:{left:(0,c.I)(u,N),transition:"left 0.3s ease-in-out"}},_.map((C,Se)=>{var pe,V,X,$;return((pe=C.track)==null?void 0:pe.source)==="screen"?e.createElement(j.Z,{showStatsOnTiles:O,key:C.track.id,width:C.width,height:C.height,peerId:C.peer.id}):e.createElement(D.Z,{showStatsOnTiles:O,key:((V=C.track)==null?void 0:V.id)||C.peer.id,width:C.width,height:C.height,peerId:(X=C.peer)==null?void 0:X.id,trackId:($=C.track)==null?void 0:$.id})})))):null),x.length>1?e.createElement(re,{page:N,setPage:J,numPages:x.length}):null)},le=e.memo(b),Q=({appConfig:B,isHeadless:y})=>{var O;const I=(O=B==null?void 0:B.headlessConfig)==null?void 0:O.tileOffset;return!y||typeof I!="number"?32:I},ie=le},8329:(Ae,q,t)=>{t.d(q,{Z:()=>v});var e=t(8160),S=t(5470),T=t(1280),i=t(4299),c=t(3074),A=t(1959),D=t(9130),j=t(3751),L=t(8981),G=t(3712),z=t(3988),Y=t(6567),re=t(3844),de=t(853),W=t(5581),b=t(6773),le=t(9112);const Q=({peerId:h,trackId:k,showStatsOnTiles:M,width:U,height:oe})=>{var x,N;const J=k?(0,D.M)(k):(0,D.t$)(h),R=(0,j._U)(J),_=(0,j._U)((0,D.I_)(h)),u=(0,j._U)((0,D.L6)(h)),C=(0,j._U)(D.I3),Se=(0,b.L3)(W.JZ.isAudioOnly),pe=(0,b.tQ)(),V=!(0,j._U)((0,D.xn)(h)),X=!(R==null?void 0:R.enabled),[$,F]=(0,e.useState)(!1),ee=(0,S.W)(u==null?void 0:u.id),ve=R==null?void 0:R.degraded,_e=C===h,K=(0,re.O)({peerName:_,track:R,isLocal:_e}),me=(0,e.useCallback)(be=>{F(be.type==="mouseenter")},[]),fe=(0,le.M)();return e.createElement(T.i.Root,{css:{width:U,height:oe,padding:I({isHeadless:pe,appConfig:fe})},"data-testid":`participant_tile_${_}`},_!==void 0?e.createElement(T.i.Container,{onMouseEnter:me,onMouseLeave:me,ref:pe&&((x=fe==null?void 0:fe.headlessConfig)==null?void 0:x.hideAudioLevel)?void 0:ee},e.createElement(de.Y,{isTile:!0,peerId:h}),M?e.createElement(i.q8,{audioTrackID:u==null?void 0:u.id,videoTrackID:R==null?void 0:R.id,peerID:h}):null,R?e.createElement(c.n,{trackId:R==null?void 0:R.id,attach:_e?void 0:!Se,mirror:h===C&&(R==null?void 0:R.source)==="regular",degraded:ve,"data-testid":"participant_video_tile"}):null,X||ve||Se?e.createElement(A.q,{name:_||"","data-testid":"participant_avatar_icon"}):null,(!pe||pe&&!((N=fe==null?void 0:fe.headlessConfig)==null?void 0:N.hideTileName))&&e.createElement(T.i.Info,{"data-testid":"participant_name_onTile"},K),O({appConfig:fe,isHeadless:pe,isAudioMuted:V})?e.createElement(T.i.AudioIndicator,{"data-testid":"participant_audio_mute_icon"},e.createElement(L.Z,null)):null,$&&!pe&&!_e?e.createElement(Y.Z,{peerID:h,audioTrackID:u==null?void 0:u.id,videoTrackID:R==null?void 0:R.id}):null,e.createElement(B,{peerId:h})):null)},ie={left:"20px",bottom:"20px"},B=({peerId:h})=>{const k=(0,j._U)((0,D.cH)(h)),M=(k==null?void 0:k.isHandRaised)||!1,U=(k==null?void 0:k.isBRBOn)||!1;return e.createElement(e.Fragment,null,M?e.createElement(T.i.AttributeBox,{css:ie,"data-testid":"raiseHand_icon_onTile"},e.createElement(G.Z,{width:40,height:40})):null,U?e.createElement(T.i.AttributeBox,{css:ie,"data-testid":"brb_icon_onTile"},e.createElement(z.Z,{width:40,height:40})):null)},y=e.memo(Q),O=({appConfig:h,isHeadless:k,isAudioMuted:M})=>{var U;if(!k)return M;const oe=(U=h==null?void 0:h.headlessConfig)==null?void 0:U.hideTileAudioMute;return M&&!oe},I=({isHeadless:h,appConfig:k})=>{var M;const U=(M=k==null?void 0:k.headlessConfig)==null?void 0:M.tileOffset;if(!(!h||typeof U!="number"))return U===0?0:void 0},v=y},6500:(Ae,q,t)=>{t.d(q,{i:()=>te});var e=t(8160),S=t(5840),T=t(3133),i=t(3751),c=t(8485),A=t(6939),D=t(7688),j=t(9290),L=t(5861),G=t(7097),z=t(1745),Y=t(5213),re=(d,f,P)=>new Promise((H,Z)=>{var se=Ce=>{try{ae(P.next(Ce))}catch(ge){Z(ge)}},ce=Ce=>{try{ae(P.throw(Ce))}catch(ge){Z(ge)}},ae=Ce=>Ce.done?H(Ce.value):Promise.resolve(Ce.value).then(se,ce);ae((P=P.apply(d,f)).next())});const de=(0,j.zo)("textarea",{width:"100%",bg:"transparent",color:"$textPrimary",resize:"none",lineHeight:"1rem","&:focus":{boxShadow:"none",outline:"none"}}),W=({role:d,peerId:f,onSend:P,children:H})=>{const Z=(0,i.cw)(),se=(0,e.useRef)(null),[ce,ae]=(0,Y.Kx)(),Ce=(0,e.useCallback)(()=>re(void 0,null,function*(){const ge=se.current.value;if(!(!ge||!ge.trim().length))try{d?yield Z.sendGroupMessage(ge,[d]):f?yield Z.sendDirectMessage(ge,f):yield Z.sendBroadcastMessage(ge),se.current.value="",setTimeout(()=>{P()},0)}catch(je){G.y.addToast({title:je.message})}}),[d,f,Z,P]);return(0,e.useEffect)(()=>{const ge=se.current;ge&&(ge.value=ce)},[ce]),(0,e.useEffect)(()=>{const ge=se.current;return()=>{ae((ge==null?void 0:ge.value)||"")}},[ae]),e.createElement(c.k,{align:"center",css:{borderTop:"1px solid $borderDefault",bg:"$menuBg",minHeight:"$16",maxHeight:"$24",position:"relative",py:"$4",pl:"$8"}},H,e.createElement(de,{placeholder:"Write something here",ref:se,autoFocus:!0,onKeyPress:ge=>re(void 0,null,function*(){ge.key==="Enter"&&(ge.shiftKey||(ge.preventDefault(),yield Ce()))})}),e.createElement(L.h,{onClick:Ce,css:{ml:"auto",height:"max-content",mr:"$4"},"data-testid":"send_msg_btn"},e.createElement(z.Z,null)))};var b=t(8721),le=t(4740),Q=t(300),ie=t(9057);const B=e.memo(({selection:d,selectorOpen:f,onToggle:P})=>{const H=(0,Y.R)();return e.createElement(c.k,{onClick:P,align:"center",css:{bg:"$menuBg",color:"$textPrimary",h:"$16",borderTopLeftRadius:"$2",borderTopRightRadius:"$2",pl:"$8",pr:"$4"}},e.createElement(c.k,{align:"center",css:{cursor:"pointer"}},e.createElement(le.Z,null),e.createElement(b.x,{css:{mx:"$2"}},d),f?e.createElement(Q.Z,{width:18,height:18}):e.createElement(T.Z,{width:18,height:18})),e.createElement(L.h,{css:{ml:"auto"},onClick:Z=>{Z.stopPropagation(),f?P():H()},"data-testid":"close_chat"},e.createElement(ie.Z,null)))});var y=t(9130);const O=d=>{if(!(d instanceof Date))return"";let f=d.getHours(),P=d.getMinutes();return f<10&&(f="0"+f),P<10&&(P="0"+P),`${f}:${P}`},I=({roles:d,hasCurrentUserSent:f,receiver:P})=>{const H=(0,i._U)((0,y.I_)(P));return P?e.createElement(b.x,{variant:"sm",css:{mx:"$4"}},f?`to ${H}`:"to me",e.createElement(b.x,{as:"span",variant:"sm",css:{color:"$error",mx:"$4"}},"(Privately)")):d&&d.length?e.createElement(b.x,{variant:"sm",css:{mx:"$4"}},"to",e.createElement(b.x,{as:"span",variant:"sm",css:{color:"$error",mx:"$4"}},"(",d.join(","),")")):e.createElement(b.x,{variant:"sm",css:{mx:"$4"}},"to",e.createElement(b.x,{as:"span",variant:"sm",css:{color:"$brandDefault",mx:"$4"}},"Everyone"))},v=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,h=(0,j.zo)("a",{color:"$brandDefault",wordBreak:"break-all","&:hover":{textDecoration:"underline"}}),k=({message:d})=>d?e.createElement(e.Fragment,null,d.trim().split(" ").map(f=>v.test(f)?e.createElement(h,{href:f,key:f,target:"_blank",rel:"noopener noreferrer"},f," "):`${f} `)):e.createElement(e.Fragment,null),M=e.memo(({message:d})=>{const{ref:f,inView:P}=(0,S.YD)({threshold:.5,triggerOnce:!0}),H=(0,i.cw)(),Z=(0,i._U)(y.I3);return(0,e.useEffect)(()=>{d.id&&!d.read&&P&&H.setMessageRead(!0,d.id)},[d.read,H,P,d.id]),e.createElement(c.k,{ref:f,css:{flexWrap:"wrap",p:"$4 $8"},key:d.time,"data-testid":"chat_msg"},e.createElement(b.x,{variant:"sm",css:{color:"$textSecondary"}},d.senderName||"Anonymous"),e.createElement(I,{hasCurrentUserSent:d.sender===Z,receiver:d.recipientPeer,roles:d.recipientRoles}),e.createElement(b.x,{variant:"sm",css:{ml:"auto",color:"$textSecondary"}},O(d.time)),e.createElement(b.x,{css:{w:"100%",my:"$2",wordBreak:"break-word"}},e.createElement(k,{message:d.message})))}),U=({role:d,peerId:f})=>{const P=d?(0,y.a7)(d):f?(0,y.Ik)(f):y.SF,H=(0,i._U)(P)||[];return H.length===0?e.createElement(c.k,{css:{width:"100%",height:"calc(100% - 1px)",textAlign:"center",px:"$4"},align:"center",justify:"center"},e.createElement(b.x,null,"There are no messages here")):e.createElement(e.Fragment,null,H.map(Z=>e.createElement(M,{key:Z.id,message:Z})))};var oe=t(455),x=t(7273),N=t(7884),J=t(8565);const R=()=>e.createElement(A.x,{css:{size:"$6",bg:"$brandDefault",mx:"$2",r:"$round"}}),_=({value:d,active:f,onClick:P,unreadCount:H})=>e.createElement(c.k,{onClick:P,css:{cursor:"pointer",p:"$4 $8",flexShrink:0,"&:hover":{bg:"$menuBg"}},align:"center","data-testid":"chat_members"},e.createElement(b.x,{variant:"sm"},d),e.createElement(c.k,{align:"center",css:{ml:"auto",color:"$textPrimary"}},H>0&&e.createElement(oe.u,{title:`${H} unread`},e.createElement(A.x,{css:{mr:f?"$3":0}},e.createElement(R,null))),f&&e.createElement(J.Z,{width:16,height:16}))),u=e.memo(({children:d})=>e.createElement(A.x,{css:{flexShrink:0}},e.createElement(x.E,{space:4}),e.createElement(b.x,{variant:"md",css:{p:"$4 $8",fontWeight:"$semiBold"}},d))),C=e.memo(({onSelect:d,active:f})=>{const P=(0,i._U)(y.SI);return e.createElement(_,{value:"Everyone",active:f,unreadCount:P,onClick:()=>{d({role:"",peerId:"",selection:"Everyone"})}})}),Se=e.memo(({onSelect:d,role:f,active:P})=>{const H=(0,i._U)((0,y.ci)(f));return e.createElement(_,{value:f,active:P,unreadCount:H,onClick:()=>{d({role:f,selection:f})}})}),pe=({onSelect:d,peerId:f,name:P,active:H})=>{const Z=(0,i._U)((0,y.Do)(f));return e.createElement(_,{value:P,active:H,unreadCount:Z,onClick:()=>{d({role:"",peerId:f,selection:P})}})},V=({role:d,peerId:f,onSelect:P})=>{const H=(0,i._U)(y.on),Z=(0,i._U)(y.LY),[se,ce]=(0,e.useState)("");return e.createElement(c.k,{direction:"column",css:{size:"100%",position:"absolute",top:0,left:0,bg:"$bgSecondary",py:"$4",overflowY:"auto"}},e.createElement(A.x,{css:{p:"$4",flexShrink:0,position:"relative"}},e.createElement(N.I,{type:"text",autoCorrect:"off",autoComplete:"name",value:se,placeholder:"Search Participants",css:{bg:"$menuBg",w:"100%",pr:"$12","$:focus":{boxShadow:"none",outline:"none"}},onChange:ae=>{ce(ae.target.value)}}),e.createElement(c.k,{align:"center",css:{position:"absolute",right:0,top:0,mr:"$6",height:"100%"}},e.createElement(L.h,{onClick:()=>ce("")},e.createElement(ie.Z,{width:18,height:18})))),e.createElement(C,{onSelect:P,active:!d&&!f}),H.length>0&&e.createElement(u,null,"Roles"),H.map(ae=>e.createElement(Se,{key:ae,active:d===ae,role:ae,onSelect:P})),Z.length>0&&e.createElement(u,null,"Participants"),Z.filter(ae=>!se||ae.name.toLowerCase().includes(se)).map(ae=>e.createElement(pe,{key:ae.id,name:ae.name,peerId:ae.id,active:ae.id===f,onSelect:P})))},X=({role:d,peerId:f})=>{const P=d?(0,y.ci)(d):f?(0,y.Do)(f):y.SI;return(0,i._U)(P)};var $=Object.defineProperty,F=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,_e=(d,f,P)=>f in d?$(d,f,{enumerable:!0,configurable:!0,writable:!0,value:P}):d[f]=P,K=(d,f)=>{for(var P in f||(f={}))ee.call(f,P)&&_e(d,P,f[P]);if(F)for(var P of F(f))ve.call(f,P)&&_e(d,P,f[P]);return d};const me=()=>{const[d,f]=(0,e.useState)({role:"",peerId:"",selection:"Everyone"}),[P,H]=(0,e.useState)(!1),Z=(0,e.useRef)(null),se=(0,i.cw)(),ce=(0,e.useCallback)((ae=!1)=>{!Z.current||(Z.current.scrollTo({top:Z.current.scrollHeight,behavior:ae?"instant":"smooth"}),se.setMessageRead(!0))},[se]);return(0,e.useEffect)(()=>{ce(!0)},[ce]),e.createElement(c.k,{direction:"column",css:{size:"100%"}},e.createElement(B,{selectorOpen:P,selection:d.selection,onToggle:()=>{H(ae=>!ae)}}),e.createElement(A.x,{css:{flex:"1 1 0",overflowY:P?"hidden":"auto",bg:"$bgSecondary",pt:"$4",position:"relative"},ref:Z},P?e.createElement(V,{role:d.role,peerId:d.peerId,onSelect:ae=>{f(Ce=>K(K({},Ce),ae)),H(!1)}}):e.createElement(e.Fragment,null,e.createElement(U,{role:d.role,peerId:d.peerId}),e.createElement(be,{scrollToBottom:ce,role:d.role,peerId:d.peerId}))),e.createElement(W,{role:d.role,peerId:d.peerId,onSend:ce},!P&&e.createElement(fe,{role:d.role,peerId:d.peerId,scrollToBottom:ce})))},fe=({role:d,peerId:f,scrollToBottom:P})=>X({role:d,peerId:f})?e.createElement(c.k,{justify:"center",css:{width:"100%",left:0,bottom:"100%",position:"absolute"}},e.createElement(D.z,{onClick:()=>{P()},css:{p:"$2 $4","& > svg":{ml:"$4"}}},"New Messages",e.createElement(T.Z,{width:16,height:16}))):null,be=({scrollToBottom:d,role:f,peerId:P})=>{const{ref:H,inView:Z}=(0,S.YD)({threshold:.5}),se=X({role:f,peerId:P});return(0,e.useEffect)(()=>{Z&&se&&d()},[Z,se,d]),e.createElement("div",{ref:H,style:{height:1}})},te=()=>e.createElement(me,null)},8694:(Ae,q,t)=>{t.r(q),t.d(q,{default:()=>Sn});var e=t(8160),S=t(841),T=t(3738),i=t(3751),c=t(9130),A=t(8485),D=t(6939),j=t(1193),L=t(510),G=t(9163),z=t(3988),Y=t(9156),re=t(370),de=t(9660),W=t(455),b=t(5861),le=t(7273),Q=t(8275),ie=t(6545),B=t(4892),y=t(7688),O=t(622),I=t(9290),v=t(2266),h=t(8160);const k=()=>{const s=(0,S.s0)(),n=(0,S.UO)(),[a,o]=(0,e.useState)(!1),[l,p]=(0,e.useState)(!1),g=(0,i._U)(c.AI),E=(0,i.cw)(),r=()=>{n.role?s("/leave/"+n.roomId+"/"+n.role):s("/leave/"+n.roomId)},m=()=>{E.leave(),r()},w=()=>{E.endRoom(l,"End Room"),r()};return h.createElement(e.Fragment,null,g.endRoom?h.createElement(B.J.Root,null,h.createElement(B.J.Trigger,{asChild:!0},h.createElement(M,{variant:"danger",key:"LeaveRoom","data-testid":"leave_room_btn"},h.createElement(W.u,{title:"Leave Room"},h.createElement(D.x,null,h.createElement(ie.Z,{key:"hangUp"}))))),h.createElement(B.J.Content,{sideOffset:10},h.createElement(y.z,{variant:"standard",css:{w:"100%"},onClick:()=>{o(!0)},"data-testid":"end_room_btn"},"End Room"),h.createElement(y.z,{variant:"danger",css:{mt:"$4"},onClick:m,"data-testid":"just_leave_btn"},"Just Leave"))):h.createElement(M,{onClick:m,variant:"danger",key:"LeaveRoom"},h.createElement(W.u,{title:"Leave Room"},h.createElement(D.x,null,h.createElement(ie.Z,{key:"hangUp"})))),h.createElement(O.V.Root,{open:a,onOpenChange:ue=>{ue||p(!1),o(ue)}},h.createElement(v.cZ,{title:"End Room",Icon:ie.Z},h.createElement(v.Uj,{id:"lockRoom",title:"Disable future joins",value:l,onChange:p}),h.createElement(v.DP,{justify:"end"},h.createElement(y.z,{variant:"danger",onClick:w,"data-testid":"lock_end_room"},"End Room")))))},M=(0,I.zo)(b.h,{color:"$white",width:"$15",mx:"$4",bg:"$error","&:not([disabled]):hover":{bg:"$errorTint"},"&:not([disabled]):active":{bg:"$errorTint"}});var U=t(5408),oe=t(2216),x=t(8546),N=t(8981),J=t(9995),R=t(8230),_=t(7632),u=t(9024),C=t(8721),Se=t(32),pe=t(8953),V=t(5873),X=t(8565),$=t(9953),F=t(5431),ee=t(7097),ve=Object.defineProperty,_e=Object.defineProperties,K=Object.getOwnPropertyDescriptors,me=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,te=(s,n,a)=>n in s?ve(s,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[n]=a,d=(s,n)=>{for(var a in n||(n={}))fe.call(n,a)&&te(s,a,n[a]);if(me)for(var a of me(n))be.call(n,a)&&te(s,a,n[a]);return s},f=(s,n)=>_e(s,K(n)),P=(s,n,a)=>new Promise((o,l)=>{var p=r=>{try{E(a.next(r))}catch(m){l(m)}},g=r=>{try{E(a.throw(r))}catch(m){l(m)}},E=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,g);E((a=a.apply(s,n)).next())});const H=({css:s,onClick:n})=>{const a=(0,i._U)(c.on),o=(0,i._U)(c.AI),l=(0,i._U)(c.I3),p=(0,i._U)(c.fo),g=(0,i.cw)(),E=(0,Se.Z)(I.vc.media.sm),{appPolicyConfig:{selfRoleChangeTo:r}}=(0,e.useContext)(F.I),m=(0,e.useMemo)(()=>(0,$.tN)(r,a),[a,r]);return o.changeRole?E?e.createElement(u.L.Item,{css:s,onClick:n},e.createElement(pe.Z,null),e.createElement(C.x,{variant:"sm",css:{mx:"$4"}},"Change My Role")):e.createElement(u.L.Root,null,e.createElement(u.L.TriggerItem,{css:s,"data-testid":"change_my_role_btn"},e.createElement(pe.Z,null),e.createElement(C.x,{variant:"sm",css:{flex:"1 1 0",mx:"$4"}},"Change My Role"),e.createElement(V.Z,null)),e.createElement(u.L.Content,{sideOffset:2,alignOffset:-5,css:{maxHeight:"$64"}},m.map((w,ue)=>e.createElement(u.L.Item,{key:w,css:f(d({},s),{justifyContent:"space-between"}),onClick:()=>P(void 0,null,function*(){try{yield g.changeRole(l,w,!0)}catch(Ee){ee.y.addToast({title:Ee.message})}}),"data-testid":"change_to_role_"+w},e.createElement(C.x,{variant:"sm"},w),p===w&&e.createElement(X.Z,{width:16,height:16}))))):null};var Z=t(3210),se=t(8523),ce=t.n(se),ae=(s,n,a)=>new Promise((o,l)=>{var p=r=>{try{E(a.next(r))}catch(m){l(m)}},g=r=>{try{E(a.throw(r))}catch(m){l(m)}},E=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,g);E((a=a.apply(s,n)).next())});const Ce=()=>{const[s,n]=(0,e.useState)(ce().isFullscreen),a=(0,e.useCallback)(()=>ae(void 0,null,function*(){if(!ce().isEnabled){ee.y.addToast({title:"Fullscreen feature not supported"});return}try{s?yield ce().exit():yield ce().request()}catch(o){ee.y.addToast({title:o.message})}}),[s]);return(0,e.useEffect)(()=>{const o=()=>{n(ce().isFullscreen)};return ce().isEnabled&&ce().on("change",o),()=>{ce().isEnabled&&ce().off("change",o)}},[]),{allowed:ce().isEnabled,isFullscreen:s,toggleFullscreen:a}},ge=({hoverStyles:s})=>{const{allowed:n,isFullscreen:a,toggleFullscreen:o}=Ce();return n?e.createElement(u.L.Item,{onClick:()=>{o()},css:s,"data-testid":"full_screen_btn"},e.createElement(Z.Z,null),e.createElement(C.x,{variant:"sm",css:{ml:"$4"}},a?"Exit ":"","Full Screen")):null};var je=t(7281),$e=t(6081),pt=t(8651),Pe=t(5581),ye=t(6773),_t=(s,n,a)=>new Promise((o,l)=>{var p=r=>{try{E(a.next(r))}catch(m){l(m)}},g=r=>{try{E(a.throw(r))}catch(m){l(m)}},E=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,g);E((a=a.apply(s,n)).next())});const Ze={flexDirection:"column",alignItems:"flex-start"},Ne=({onClick:s,type:n,label:a,checked:o})=>e.createElement(A.k,{align:"center",key:n,css:{my:"$2"}},e.createElement(je.X.Root,{id:a,checked:o,onCheckedChange:l=>{s({type:n,isSubscribed:l})}},e.createElement(je.X.Indicator,null,e.createElement(X.Z,{width:16,height:16}))),e.createElement($e._,{htmlFor:a,css:{ml:"$4",fontSize:"$sm",cursor:"pointer"}},a)),mt=({open:s,onOpenChange:n})=>{const{setMaxTileCount:a,maxTileCount:o,subscribedNotifications:l,setSubscribedNotifications:p,uiViewMode:g,setuiViewMode:E}=(0,e.useContext)(F.I),r=(0,i.cw)(),m=(0,i._U)(c.um),w=(0,i._U)(c.VP),[ue,Ee]=(0,ye.iz)(Pe.JZ.isAudioOnly),ne=(0,e.useCallback)(he=>_t(void 0,null,function*(){he&&(m&&(yield r.setLocalVideoEnabled(!1)),w&&(yield r.setScreenShareEnabled(!1))),Ee(he)}),[r,m,w,Ee]);return e.createElement(O.V.Root,{open:s,onOpenChange:n},e.createElement(v.cZ,{title:"UI Settings",Icon:J.Z},e.createElement(v.DP,{css:Ze},e.createElement(C.x,{variant:"md",css:{mb:"$8",fontWeight:"$semiBold"}},"Configure Notifications"),e.createElement(A.k,{justify:"between",css:{w:"100%"}},e.createElement(D.x,{css:{flex:"1 1 0"}},e.createElement(Ne,{label:"Peer Joined",type:"PEER_JOINED",onClick:p,checked:l.PEER_JOINED}),e.createElement(Ne,{label:"Peer Leave",type:"PEER_LEFT",onClick:p,checked:l.PEER_LEFT}),e.createElement(Ne,{label:"New Message",type:"NEW_MESSAGE",onClick:p,checked:l.NEW_MESSAGE})),e.createElement(D.x,{css:{flex:"1 1 0",ml:"$4"}},e.createElement(Ne,{label:"Error",type:"ERROR",onClick:p,checked:l.ERROR}),e.createElement(Ne,{label:"Hand Raised",type:"METADATA_UPDATED",onClick:p,checked:l.METADATA_UPDATED})))),e.createElement(le.E,null),e.createElement(v.DP,{css:Ze},e.createElement(C.x,{variant:"md",css:{mb:"$4",fontWeight:"$semiBold"}},"View Layout"),e.createElement(v.Uj,{title:"Active Speaker Mode",id:"activeSpeakerMode",value:g===Pe.FU,onChange:he=>{E(he?Pe.FU:Pe.Je)},css:{margin:"0 0"}}),e.createElement(v.Uj,{title:"Audio Only Mode",id:"audioOnlyMode",value:ue,onChange:ne,css:{margin:"$4 0"}}),e.createElement(A.k,{css:{w:"100%","@md":{display:"none"}}},e.createElement(C.x,{variant:"md"},"Tiles In View"),e.createElement(A.k,{justify:"end",css:{flex:"1 1 0"}},e.createElement(pt.i,{step:1,value:[o],min:1,max:49,onValueChange:he=>{a(he[0])},css:{w:"70%"}}))))))};var ut=t(8876),gt=t(198),Ge=t(3620),Et=Object.defineProperty,vt=Object.defineProperties,ht=Object.getOwnPropertyDescriptors,ze=Object.getOwnPropertySymbols,ft=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable,Ye=(s,n,a)=>n in s?Et(s,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[n]=a,At=(s,n)=>{for(var a in n||(n={}))ft.call(n,a)&&Ye(s,a,n[a]);if(ze)for(var a of ze(n))Pt.call(n,a)&&Ye(s,a,n[a]);return s},Ct=(s,n)=>vt(s,ht(n)),Je=(s,n,a)=>new Promise((o,l)=>{var p=r=>{try{E(a.next(r))}catch(m){l(m)}},g=r=>{try{E(a.throw(r))}catch(m){l(m)}},E=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,g);E((a=a.apply(s,n)).next())});const St=({onOpenChange:s})=>{const[n,a]=(0,Ge.o)(Ge.l.PREVIEW),o=(0,i.cw)(),l=(0,i._U)(c.lA),[p,g]=(0,e.useState)(l),E=()=>Je(void 0,null,function*(){const r=p.trim();if(!(!r||r===l))try{yield o.changeName(r),a(Ct(At({},n||{}),{name:r}))}catch(m){console.error("failed to update name",m),ee.y.addToast({title:m.message})}finally{s(!1)}});return e.createElement(O.V.Root,{defaultOpen:!0,onOpenChange:s},e.createElement(v.cZ,{title:"Change my name",Icon:oe.Z},e.createElement("form",{onSubmit:r=>{r.preventDefault()}},e.createElement(v.OD,{title:"Name",value:p,onChange:g,autoComplete:"name",required:!0,"data-testid":"change_name_field"}),e.createElement(v.DP,{justify:"end"},e.createElement(y.z,{variant:"primary",type:"submit",disabled:!p.trim()||p.trim()===l,onClick:()=>Je(void 0,null,function*(){yield E()}),"data-testid":"popup_change_btn"},"Change")))))},Rt=({onOpenChange:s})=>{const n=Tt(),a=(0,e.useMemo)(()=>[{id:"local-peer",label:"Local Peer Stats"},...n],[n]),[o,l]=(0,e.useState)("local-peer"),{showStatsOnTiles:p,setShowStatsOnTiles:g}=(0,e.useContext)(F.I);return(0,e.useEffect)(()=>{o!=="local-peer"&&!n.find(E=>E.id===o)&&l("local-peer")},[n,o]),e.createElement(O.V.Root,{defaultOpen:!0,onOpenChange:s},e.createElement(v.cZ,{Icon:_.Z,title:"Stats For Nerds"},e.createElement(v.nr,{title:"Show Stats on Tiles",onChange:g,value:p}),e.createElement(v.z2,{title:"Stats For",options:a,keyField:"id",labelField:"label",selected:o,onChange:l}),o==="local-peer"?e.createElement(bt,null):e.createElement(kt,{trackID:o})))},Tt=()=>{const s=(0,i._U)(c.zK),n=(0,i._U)(c.iZ);return(0,e.useMemo)(()=>Object.values(s).map(o=>{var l;const p=(l=n[o.peerId])==null?void 0:l.name;return{id:o.id,label:`${p} ${o.source} ${o.type}`}}),[s,n])},bt=()=>{var s,n,a,o,l,p;const g=(0,i.p5)(c.fA.localPeerStats);return g?e.createElement(e.Fragment,null,e.createElement(Re,{label:"Packets Lost",value:(s=g.subscribe)==null?void 0:s.packetsLost}),e.createElement(Re,{label:"Jitter",value:(n=g.subscribe)==null?void 0:n.jitter}),e.createElement(Re,{label:"Publish Bitrate",value:Ie((a=g.publish)==null?void 0:a.bitrate,"b/s")}),e.createElement(Re,{label:"Subscribe Bitrate",value:Ie((o=g.subscribe)==null?void 0:o.bitrate,"b/s")}),e.createElement(Re,{label:"Total Bytes Sent",value:Ie((l=g.publish)==null?void 0:l.bytesSent)}),e.createElement(Re,{label:"Total Bytes Received",value:Ie((p=g.subscribe)==null?void 0:p.bytesReceived)})):null},kt=({trackID:s})=>{const n=(0,i.p5)(c.fA.trackStatsByID(s));if(!n)return null;const a=n.type.includes("inbound");return e.createElement(e.Fragment,null,e.createElement(Re,{label:"Type",value:n.type+" "+n.kind}),e.createElement(Re,{label:"Bitrate",value:Ie(n.bitrate,"b/s")}),e.createElement(Re,{label:"Packets Lost",value:n.packetsLost||"-"}),e.createElement(Re,{label:"Jitter",value:n.jitter||"-"}),e.createElement(Re,{label:a?"Bytes Received":"Bytes Sent",value:Ie(a?n.bytesReceived:n.bytesSent)}),n.kind==="video"&&e.createElement(e.Fragment,null,e.createElement(Re,{label:"Framerate",value:n.framesPerSecond}),!a&&e.createElement(Re,{label:"Quality Limitation Reason",value:n.qualityLimitationReason||"-"})))},Re=({label:s,value:n})=>e.createElement(v.DP,{justify:"between",css:{my:"0.5rem"}},e.createElement(C.x,null,s," "),e.createElement(C.x,null,n)),Ie=(s,n="B",a=2)=>{if(s===0)return"0 "+n;const o=1024,l=a<0?0:a,p=["","K","M","G","T","P","E","Z","Y"].map(E=>E+n),g=Math.floor(Math.log(s)/Math.log(o));return parseFloat((s/Math.pow(o,g)).toFixed(l))+" "+p[g]};var we=t(8673),Ot=(s,n,a)=>new Promise((o,l)=>{var p=r=>{try{E(a.next(r))}catch(m){l(m)}},g=r=>{try{E(a.throw(r))}catch(m){l(m)}},E=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,g);E((a=a.apply(s,n)).next())});const Dt=[{label:"All Track Sources",value:""},{label:"regular",value:"regular"},{label:"screen",value:"screen"},{label:"audioplaylist",value:"audioplaylist"},{label:"videoplaylist",value:"videoplaylist"}],yt=[{label:"All Track Types",value:""},{label:"audio",value:"audio"},{label:"video",value:"video"}],It=({onOpenChange:s})=>{const n=(0,i._U)(c.on),a=(0,i.cw)(),[o,l]=(0,e.useState)(!1),[p,g]=(0,e.useState)(),[E,r]=(0,e.useState)(),[m,w]=(0,e.useState)(),ue=(0,e.useCallback)(()=>Ot(void 0,null,function*(){yield a.setRemoteTracksEnabled({enabled:o,type:p,source:m,roles:E?[E]:void 0}),s(!1)}),[E,o,p,m,a,s]);return e.createElement(O.V.Root,{defaultOpen:!0,onOpenChange:s},e.createElement(v.cZ,{title:"Mute/Unmute Remote Tracks",Icon:N.Z},e.createElement(v.z2,{title:"Role",options:[{label:"All Roles",value:""},...n.map(Ee=>({label:Ee,value:Ee}))],selected:E,keyField:"value",labelField:"label",onChange:r}),e.createElement(v.z2,{title:"Track type",options:yt,selected:p,onChange:g,keyField:"value",labelField:"label"}),e.createElement(v.z2,{title:"Track source",options:Dt,selected:m,onChange:w,keyField:"value",labelField:"label"}),e.createElement(v.DP,null,e.createElement(C.x,{variant:"md"},"Track status"),e.createElement(we.E.Root,{value:o,onValueChange:l},e.createElement(A.k,{align:"center",css:{mr:"$8"}},e.createElement(we.E.Item,{value:!1,id:"trackDisableRadio",css:{mr:"$4"}},e.createElement(we.E.Indicator,null)),e.createElement($e._,{htmlFor:"trackDisableRadio"},"Mute")),e.createElement(A.k,{align:"center",css:{cursor:"pointer"}},e.createElement(we.E.Item,{value:!0,id:"trackEnableRadio",css:{mr:"$4"}},e.createElement(we.E.Indicator,null)),e.createElement($e._,{htmlFor:"trackEnableRadio"},"Request Unmute")))),e.createElement(v.DP,{justify:"end"},e.createElement(y.z,{variant:"primary",onClick:ue},"Apply"))))};var Mt=t(7158),Xe=t(7884);const xt=({onResolutionChange:s,disabled:n,tooltipText:a})=>{const[o,l]=(0,e.useState)(Pe.w7),p=(0,e.useCallback)(g=>{const{name:E,value:r}=g.target;let m=E==="resWidth"?Number(r):o.width,w=E==="resHeight"?Number(r):o.height;m===0&&(m=null),w===0&&(w=null);const ue={width:isNaN(m)?Pe.w7.width:m,height:isNaN(w)?Pe.w7.height:w};l(ue)},[o]);return e.createElement(v.DP,{breakSm:!0},e.createElement(A.k,{gap:1},e.createElement($e._,{css:{"@sm":{mb:"$8"}}},"Resolution"),e.createElement(W.u,{title:a},e.createElement("div",null,e.createElement(_.Z,{color:"#B0C3DB"})))),e.createElement(A.k,{justify:"between",css:{width:"70%","@sm":{width:"100%"}},gap:2,direction:"column"},e.createElement(A.k,{justify:"between",gap:2},e.createElement(A.k,{direction:"column",css:{width:"50%"}},e.createElement(C.x,{variant:"xs"},"Width"),e.createElement(Xe.I,{css:{width:"100%"},name:"resWidth",value:o.width,onChange:p,readOnly:n,min:Pe.c_,max:Pe.FO,onBlur:()=>s(o),type:"number"})),e.createElement(A.k,{direction:"column",css:{width:"50%"}},e.createElement(C.x,{variant:"xs"},"Height"),e.createElement(Xe.I,{css:{width:"100%"},name:"resHeight",value:o.height,onChange:p,onBlur:()=>s(o),readOnly:n,min:Pe.c_,max:Pe.FO,type:"number"})))))};var Lt=(s,n,a)=>new Promise((o,l)=>{var p=r=>{try{E(a.next(r))}catch(m){l(m)}},g=r=>{try{E(a.throw(r))}catch(m){l(m)}},E=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,g);E((a=a.apply(s,n)).next())});const Ut=window.location.href.replace("meeting","preview")+`?${Pe.z$}=true`,Nt=({onOpenChange:s})=>{const n=(0,i.cw)(),a=(0,i._U)(c.AI),{isHLSRecordingOn:o,isHLSRunning:l,isStreamingOn:p,isBrowserRecordingOn:g}=(0,Mt.v)(),E=(0,i._U)((0,c.EP)(Pe._8.recordingUrl)),[r,m]=(0,e.useState)(E||Ut),[w,ue]=(0,e.useState)(""),[Ee,ne]=(0,e.useState)(!1),[he,Be]=(0,e.useState)(Pe.w7),[Le,Fe]=(0,e.useState)(!1),Ue=g||o,De=Ue||p,Rn=(0,e.useMemo)(()=>{let Te="";return p&&(Te+="Streaming"),Ue&&(Te&&(Te+="/"),Te+="Recording"),Te+=" is running",Te},[p,Ue]),Tn=(0,e.useCallback)(Te=>Be(Te),[]),ot=Te=>Lt(void 0,null,function*(){try{if(Te==="start"){const ke=r.replace("app.100ms.live/meeting","app.100ms.live/preview");if(Ee)yield n.startHLSStreaming({variants:[{meetingURL:ke}],recording:Le?{hlsVod:!0,singleFilePerLayer:!0}:void 0});else{const ct={meetingURL:ke,rtmpURLs:w.length>0?[w]:void 0,record:Le},dt=bn();dt&&(ct.resolution=dt),yield n.startRTMPOrRecording(ct)}}else l?yield n.stopHLSStreaming():yield n.stopRTMPAndRecording();s(!1)}catch(ke){console.error(`failed to start/stop ${Ee?"hls streaming":"rtmp/recording"}`,ke),ee.y.addToast({title:ke.message})}function bn(){const ke={};if(he.width&&(ke.width=he.width),he.height&&(ke.height=he.height),Object.keys(ke).length>0)return ke}});return e.createElement(O.V.Root,{defaultOpen:!0,onOpenChange:s},e.createElement(v.cZ,{title:"Streaming/Recording",Icon:x.Z},e.createElement(D.x,{as:"form",onSubmit:Te=>Te.preventDefault()},e.createElement(v.OD,{title:"Meeting URL",value:r,onChange:m,placeholder:"Enter meeting url",disabled:De,"data-testid":"metting_url_field"}),a.streaming&&e.createElement(v.OD,{title:"RTMP Out",value:w,onChange:ue,placeholder:"Enter rtmp out url",disabled:De||Ee,"data-testid":"rtmp_url_field"}),e.createElement(xt,{onResolutionChange:Tn,disabled:Ee||l,tooltipText:Pe.uZ}),a.streaming&&e.createElement(v.Uj,{title:"HLS",id:"hlsCheckbox",value:Ee||l,onChange:ne,disabled:De||w[0]}),a.recording&&e.createElement(v.Uj,{title:"Recording",value:Le||Ue,disabled:De,id:"recordingCheckbox",onChange:Fe}),e.createElement(v.DP,{justify:"end"},De&&e.createElement(C.x,{variant:"sm",css:{color:"$error"}},Rn),e.createElement(y.z,{variant:"danger",type:"reset",css:{mx:"$4"},onClick:()=>ot("stop"),disabled:!De,"data-testid":"rtmp_recording_stop"},"Stop"),e.createElement(y.z,{variant:"primary",type:"submit",onClick:()=>ot("start"),disabled:De||!Ee&&!Le&&!w,"data-testid":"rtmp_recording_start"},"Start")))))};var Me=t(9478);const Oe={"&:hover":{cursor:"pointer",bg:"$iconHoverBg"},"&:focus-visible":{bg:"$iconHoverBg"}},wt=()=>{const s=(0,i._U)(c.AI),n=(0,i._U)(c.I3),[a,o]=(0,e.useState)(!1),[l,p]=(0,e.useState)(!1),[g,E]=(0,e.useState)(!1),[r,m]=(0,e.useState)(!1),[w,ue]=(0,e.useState)(!1),[Ee,ne]=(0,e.useState)(!1),[he,Be]=(0,e.useState)(!1),[Le,Fe]=(0,e.useState)(!1);return e.createElement(e.Fragment,null,e.createElement(u.L.Root,{open:a,onOpenChange:o},e.createElement(u.L.Trigger,{asChild:!0,"data-testid":"more_settings_btn"},e.createElement(b.h,{css:{mx:"$4"}},e.createElement(W.u,{title:"More Options"},e.createElement(D.x,null,e.createElement(U.Z,null))))),e.createElement(u.L.Content,{sideOffset:5,align:"center",css:{maxHeight:"$96"}},e.createElement(u.L.Item,{css:Oe,onClick:()=>p(Ue=>!Ue),"data-testid":"change_name_btn"},e.createElement(oe.Z,null),e.createElement(C.x,{variant:"sm",css:{ml:"$4"}},"Change Name")),e.createElement(H,{css:Oe,onClick:()=>Fe(!0)}),(s.streaming||s.recording)&&e.createElement(u.L.Item,{onClick:()=>E(!0),css:Oe,"data-testid":"streaming_recording_btn"},e.createElement(x.Z,null),e.createElement(C.x,{variant:"sm",css:{ml:"$4"}},"Streaming/Recording")),e.createElement(ge,{hoverStyles:Oe}),s.mute&&e.createElement(u.L.Item,{onClick:()=>m(!0),css:Oe,"data-testid":"mute_all_btn"},e.createElement(N.Z,null),e.createElement(C.x,{variant:"sm",css:{ml:"$4"}},"Mute All")),e.createElement(u.L.ItemSeparator,null),e.createElement(u.L.Item,{onClick:()=>Be(!0),css:Oe,"data-testid":"ui_settings_btn"},e.createElement(J.Z,null),e.createElement(C.x,{variant:"sm",css:{ml:"$4"}},"UI Settings")),e.createElement(u.L.Item,{onClick:()=>ue(!0),css:Oe,"data-testid":"device_settings_btn"},e.createElement(R.Z,null),e.createElement(C.x,{variant:"sm",css:{ml:"$4"}},"Device Settings")),Me.T.enableStatsForNerds&&e.createElement(u.L.Item,{onClick:()=>ne(!0),css:Oe,"data-testid":"stats_for_nreds_btn"},e.createElement(_.Z,null),e.createElement(C.x,{variant:"sm",css:{ml:"$4"}},"Stats for Nerds")))),r&&e.createElement(It,{onOpenChange:m}),l&&e.createElement(St,{onOpenChange:p}),g&&e.createElement(Nt,{onOpenChange:E}),w&&e.createElement(ut.Z,{open:!0,onOpenChange:ue}),Me.T.enableStatsForNerds&&Ee&&e.createElement(Rt,{open:Ee,onOpenChange:ne}),he&&e.createElement(mt,{open:he,onOpenChange:Be}),Le&&e.createElement(gt.t,{peerId:n,onOpenChange:Fe}))};var jt=t(4685),He=t(8160);const $t=({css:s})=>{const n=(0,i._U)(c.xf),a=(0,ye.L3)(Pe.JZ.isAudioOnly),{amIScreenSharing:o,screenShareVideoTrackId:l,toggleScreenShare:p}=(0,de.N)(),g=o&&!!l;return!n.screen||!(0,$.Lo)()?null:He.createElement(W.u,{title:`${g?"Stop":"Start"} Screen sharing`},He.createElement(b.h,{active:!g,css:s,disabled:a,onClick:()=>{p()},"data-testid":"screen_share_btn"},He.createElement(jt.Z,null)))},Bt=({onClose:s})=>{const n=(0,i.cw)();return e.createElement(O.V.Root,{defaultOpen:!0,onOpenChange:a=>!a&&s()},e.createElement(v.cZ,{title:"AudioOnly Screenshare"},e.createElement("img",{src:"/share-audio.png",alt:"AudioOnly Screenshare instructions"}),e.createElement(v.DP,{justify:"end"},e.createElement(y.z,{variant:"primary",onClick:()=>{n.setScreenShareEnabled(!0,!0),s()},"data-testid":"audio_screenshare_continue"},"Continue"))))};var Ft=t(550),Ht=t(1290),Ve=t(8160),xe=(s,n,a)=>new Promise((o,l)=>{var p=r=>{try{E(a.next(r))}catch(m){l(m)}},g=r=>{try{E(a.throw(r))}catch(m){l(m)}},E=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,g);E((a=a.apply(s,n)).next())});const Vt=()=>{const s=(0,e.useRef)(null),n=(0,i.cw)(),[a,o]=(0,e.useState)(!1),[l,p]=(0,e.useState)(!1),g=(0,i._U)((0,c.fC)("@100mslive/hms-noise-suppression")),{selectedDeviceIDs:E}=(0,Ft.L)(),r=g&&!a,m=(0,e.useCallback)(()=>xe(void 0,null,function*(){if(!s.current){const{HMSNoiseSuppressionPlugin:ne}=yield Promise.all([t.e(53),t.e(301)]).then(t.bind(t,2053));s.current=new ne({npm_package_devDependencies_prettier:"^2.5.1",npm_package_devDependencies_source_map_loader:"^3.0.1",TERM_PROGRAM:"vscode",npm_package_devDependencies_cssnano:"^5.0.15",NODE:"/usr/local/bin/node",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_package_dependencies_axios:"^0.26.1",npm_package_dependencies_logrocket_react:"^5.0.1",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",TMPDIR:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T/",npm_package_dependencies_react_freeze:"^1.0.0",npm_package_dependencies__100mslive_react_icons:"0.1.4",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"1.69.0-insider",npm_package_dependencies_screenfull:"^5.1.0",npm_package_scripts_dev:"node ../../scripts/dev-webapp",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",npm_package_dependencies_uuid:"^8.3.2",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_react_dom:"^18.1.0",npm_package_readmeFilename:"README.md",USER:"rajesh",npm_package_devDependencies_webpack:"^5.69.1",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_description:"updated edtech template",npm_package_license:"MIT",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",COMMAND_MODE:"unix2003",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies_compression:"^1.7.4",npm_package_dependencies_logrocket:"^2.2.0",npm_package_dependencies__100mslive_hms_noise_suppression:"0.2.4",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.3zbLvqYK0c/Listeners",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",npm_execpath:"/usr/local/lib/node_modules/yarn/bin/yarn.js",npm_package_dependencies__100mslive_react_ui:"0.1.4",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.3.2",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",PATH:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T/yarn--1658409032727-0.008154107722497805:/Users/rajesh/Projects/Bitroot/100ms-web-vidcall/node_modules/.bin:/Users/rajesh/.config/yarn/link/node_modules/.bin:/usr/local/libexec/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/bin/node_modules/npm/bin/node-gyp-bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin:/Users/rajesh/Flutter-Dev/flutter/bin:/Users/rajesh/Flutter-Dev/flutter/.pub-cache/bin:/Users/rajesh/Flutter-Dev/flutter/bin:/Users/rajesh/Flutter-Dev/flutter/.pub-cache/bin",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["run","build"]}',_:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall/node_modules/.bin/webpack",npm_package_dependencies__tldraw_tldraw:"^1.5.0",__CFBundleIdentifier:"com.microsoft.VSCodeInsiders",npm_package_browserslist_production_1:"not dead",PWD:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall",npm_package_browserslist_production_0:">0.2%",JAVA_HOME:"/Library/Java/JavaVirtualMachines/jdk1.8.0_311.jdk/Contents/Home",npm_package_dependencies__100mslive_react_sdk:"0.1.4",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",LANG:"en_US.UTF-8",npm_package_name:"100ms_edtech_template",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies_body_parser:"^1.19.2",npm_package_dependencies__100mslive_hms_virtual_background:"1.4.4",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"node server.js",npm_package_scripts_build:"webpack --node-env production",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_package_dependencies_crypto_js:"^4.1.1",npm_config_bin_links:"true",npm_package_main:"dist/index.cjs.js",XPC_SERVICE_NAME:"0",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.4",npm_package_devDependencies_autoprefixer:"^10.4.2",HOME:"/Users/rajesh",SHLVL:"2",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code - Insiders.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_package_dependencies_hls_js:"^1.1.1",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_config_version_git_message:"v%s",LOGNAME:"rajesh",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",npm_lifecycle_script:"webpack --node-env production",VSCODE_GIT_IPC_HANDLE:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T/vscode-git-49e2058bcb.sock",npm_package_dependencies_react:"^18.1.0",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.10 npm/? node/v14.15.1 darwin x64",GIT_ASKPASS:"/Applications/Visual Studio Code - Insiders.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code - Insiders.app/Contents/Frameworks/Code - Insiders Helper.app/Contents/MacOS/Code - Insiders Helper",npm_package_files_1:"src",npm_package_dependencies_express:"^4.17.3",npm_package_files_0:"dist",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",npm_package_devDependencies_css_loader:"^6.5.1",COLORTERM:"truecolor",npm_node_execpath:"/usr/local/bin/node",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",npm_config_version_tag_prefix:"v",NODE_ENV:"production",REACT_APP_TILE_SHAPE:"1-1",REACT_APP_THEME:"dark",REACT_APP_COLOR:"#2F80FF",REACT_APP_LOGO:"",REACT_APP_FONT:"Roboto",REACT_APP_SHOW_CHAT:"true",REACT_APP_SHOW_SCREENSHARE:"true",REACT_APP_VIDEO_AVATAR:"true",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/dopaminefit.app.100ms.live/",REACT_APP_ENV:"prod",REACT_APP_LOGROCKET_ID:"<Your Logrocket project ID>",REACT_APP_POLICY_CONFIG:"",REACT_APP_WEBINAR_PROPS:"{}",REACT_APP_DEFAULT_APP_DETAILS:"{}",REACT_APP_ENABLE_STATS_FOR_NERDS:"false",REACT_APP_PUSHER_APP_KEY:"",REACT_APP_PUSHER_AUTHENDPOINT:"",REACT_APP_HEADLESS_JOIN:"false"}.NS_DURATION_TIME_IN_MS)}}),[]),w=(0,e.useCallback)(()=>xe(void 0,null,function*(){s.current&&(yield n.removePluginFromAudioTrack(s.current),s.current=null)}),[n]),ue=(0,e.useCallback)(ne=>xe(void 0,null,function*(){let he="adding Noise Suppression plugin failed, see docs";ne.message&&(he=ne.message),ee.y.addToast({title:he}),o(!0),yield w(),s.current=null,console.error(ne)}),[w]),Ee=(0,e.useCallback)(()=>xe(void 0,null,function*(){try{o(!1),yield m();const ne=n.validateAudioPluginSupport(s.current);if(ne.isSupported)yield n.addPluginToAudioTrack(s.current);else{const he=ne.errMsg;yield ue(he)}}catch(ne){yield ue(ne)}}),[n,ue,m]);return(0,e.useEffect)(()=>{xe(void 0,null,function*(){s.current||(yield m());const ne=n.validateAudioPluginSupport(s.current);p(ne.isSupported),o(!ne.isSupported)})},[E.audioInput,n,m]),l&&Me.T.showNS()?Ve.createElement(W.u,{title:`Turn ${r?"off":"on"} noise suppression`},Ve.createElement(b.h,{active:!r,disabled:a,onClick:()=>xe(void 0,null,function*(){r?yield w():yield Ee()}),css:{mx:"$4"},"data-testid":"noise_suppression_btn"},Ve.createElement(Ht.Z,null))):null};var Qe=t(9121),Wt=t(6907);function Kt(){let s=["blur","https://www.100ms.live/images/vb-1.jpeg","https://www.100ms.live/images/vb-2.jpg","https://www.100ms.live/images/vb-3.png"];if({npm_package_devDependencies_prettier:"^2.5.1",npm_package_devDependencies_source_map_loader:"^3.0.1",TERM_PROGRAM:"vscode",npm_package_devDependencies_cssnano:"^5.0.15",NODE:"/usr/local/bin/node",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_package_dependencies_axios:"^0.26.1",npm_package_dependencies_logrocket_react:"^5.0.1",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",TMPDIR:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T/",npm_package_dependencies_react_freeze:"^1.0.0",npm_package_dependencies__100mslive_react_icons:"0.1.4",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"1.69.0-insider",npm_package_dependencies_screenfull:"^5.1.0",npm_package_scripts_dev:"node ../../scripts/dev-webapp",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",npm_package_dependencies_uuid:"^8.3.2",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_react_dom:"^18.1.0",npm_package_readmeFilename:"README.md",USER:"rajesh",npm_package_devDependencies_webpack:"^5.69.1",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_description:"updated edtech template",npm_package_license:"MIT",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",COMMAND_MODE:"unix2003",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies_compression:"^1.7.4",npm_package_dependencies_logrocket:"^2.2.0",npm_package_dependencies__100mslive_hms_noise_suppression:"0.2.4",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.3zbLvqYK0c/Listeners",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",npm_execpath:"/usr/local/lib/node_modules/yarn/bin/yarn.js",npm_package_dependencies__100mslive_react_ui:"0.1.4",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.3.2",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",PATH:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T/yarn--1658409032727-0.008154107722497805:/Users/rajesh/Projects/Bitroot/100ms-web-vidcall/node_modules/.bin:/Users/rajesh/.config/yarn/link/node_modules/.bin:/usr/local/libexec/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/bin/node_modules/npm/bin/node-gyp-bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin:/Users/rajesh/Flutter-Dev/flutter/bin:/Users/rajesh/Flutter-Dev/flutter/.pub-cache/bin:/Users/rajesh/Flutter-Dev/flutter/bin:/Users/rajesh/Flutter-Dev/flutter/.pub-cache/bin",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["run","build"]}',_:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall/node_modules/.bin/webpack",npm_package_dependencies__tldraw_tldraw:"^1.5.0",__CFBundleIdentifier:"com.microsoft.VSCodeInsiders",npm_package_browserslist_production_1:"not dead",PWD:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall",npm_package_browserslist_production_0:">0.2%",JAVA_HOME:"/Library/Java/JavaVirtualMachines/jdk1.8.0_311.jdk/Contents/Home",npm_package_dependencies__100mslive_react_sdk:"0.1.4",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",LANG:"en_US.UTF-8",npm_package_name:"100ms_edtech_template",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies_body_parser:"^1.19.2",npm_package_dependencies__100mslive_hms_virtual_background:"1.4.4",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"node server.js",npm_package_scripts_build:"webpack --node-env production",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_package_dependencies_crypto_js:"^4.1.1",npm_config_bin_links:"true",npm_package_main:"dist/index.cjs.js",XPC_SERVICE_NAME:"0",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.4",npm_package_devDependencies_autoprefixer:"^10.4.2",HOME:"/Users/rajesh",SHLVL:"2",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code - Insiders.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_package_dependencies_hls_js:"^1.1.1",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_config_version_git_message:"v%s",LOGNAME:"rajesh",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",npm_lifecycle_script:"webpack --node-env production",VSCODE_GIT_IPC_HANDLE:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T/vscode-git-49e2058bcb.sock",npm_package_dependencies_react:"^18.1.0",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.10 npm/? node/v14.15.1 darwin x64",GIT_ASKPASS:"/Applications/Visual Studio Code - Insiders.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code - Insiders.app/Contents/Frameworks/Code - Insiders Helper.app/Contents/MacOS/Code - Insiders Helper",npm_package_files_1:"src",npm_package_dependencies_express:"^4.17.3",npm_package_files_0:"dist",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",npm_package_devDependencies_css_loader:"^6.5.1",COLORTERM:"truecolor",npm_node_execpath:"/usr/local/bin/node",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",npm_config_version_tag_prefix:"v",NODE_ENV:"production",REACT_APP_TILE_SHAPE:"1-1",REACT_APP_THEME:"dark",REACT_APP_COLOR:"#2F80FF",REACT_APP_LOGO:"",REACT_APP_FONT:"Roboto",REACT_APP_SHOW_CHAT:"true",REACT_APP_SHOW_SCREENSHARE:"true",REACT_APP_VIDEO_AVATAR:"true",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/dopaminefit.app.100ms.live/",REACT_APP_ENV:"prod",REACT_APP_LOGROCKET_ID:"<Your Logrocket project ID>",REACT_APP_POLICY_CONFIG:"",REACT_APP_WEBINAR_PROPS:"{}",REACT_APP_DEFAULT_APP_DETAILS:"{}",REACT_APP_ENABLE_STATS_FOR_NERDS:"false",REACT_APP_PUSHER_APP_KEY:"",REACT_APP_PUSHER_AUTHENDPOINT:"",REACT_APP_HEADLESS_JOIN:"false"}.REACT_APP_VIDEO_VB){let a=["https://www.100ms.live/images/vb-1.gif"];s.push(...a)}let n=Math.floor(Math.random()*s.length);if(n===0)return"blur";if(n<=3){const a=document.createElement("img");return a.alt="VB",a.src=s[n],a}else if(n===4)return s[n]}var We=t(8160),Ke=(s,n,a)=>new Promise((o,l)=>{var p=r=>{try{E(a.next(r))}catch(m){l(m)}},g=r=>{try{E(a.throw(r))}catch(m){l(m)}},E=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,g);E((a=a.apply(s,n)).next())});const Zt=()=>{const s=(0,e.useRef)(null),n=(0,i.cw)(),a=(0,i._U)(c.xf),[o,l]=(0,e.useState)(!1),p=(0,i._U)((0,c.IX)("@100mslive/hms-virtual-background"));function g(){return Ke(this,null,function*(){if(!s.current){const{HMSVirtualBackgroundPlugin:m}=yield Promise.all([t.e(520),t.e(642)]).then(t.bind(t,7520));s.current=new m("none",!0)}})}(0,e.useEffect)(()=>{g().then(()=>{const m=n.validateVideoPluginSupport(s.current);l(m.isSupported)})},[n]);function E(){return Ke(this,null,function*(){try{yield g(),window.HMS.virtualBackground=s.current,yield s.current.setBackground(Kt()),yield n.addPluginToVideoTrack(s.current,15)}catch(m){console.error("add virtual background plugin failed",m)}})}function r(){return Ke(this,null,function*(){s.current&&(yield n.removePluginFromVideoTrack(s.current),s.current=null)})}return!a.video||!o?null:We.createElement(W.u,{title:`Turn ${p?"off":"on"} virtual background`},We.createElement(b.h,{active:!p,onClick:()=>{p?r():E()},css:{mx:"$4"},"data-testid":"virtual_bg_btn"},We.createElement(Wt.Z,null)))};var Gt=t(6922),zt=t(6722),Yt=t(8287),Jt=t(9057);function Xt(s){if(!s)return"";let n=Math.floor(s/60);n<10&&(n=`0${String(n)}`);let a=Math.floor(s%60);return a<10&&(a=`0${String(a)}`),`${n}:${a}`}const Qt=e.memo(({name:s,metadata:n,duration:a,selected:o,onClick:l})=>e.createElement(u.L.Item,{css:{flexDirection:"column",alignItems:"flex-start",h:"$18",p:"$8","&:hover":{cursor:"pointer",bg:"$menuBg"},"&:focus-visible":{bg:"$menuBg"}},onClick:l},e.createElement(A.k,{align:"center",justify:"between",css:{width:"100%",minHeight:0}},e.createElement(C.x,{variant:"md",css:{color:o?"$brandDefault":"$textPrimary"}},s),e.createElement(C.x,{variant:"xs"},Xt(a))),(n==null?void 0:n.description)&&e.createElement(C.x,{variant:"xs",css:{mt:"$4"}},n==null?void 0:n.description)));var qt=t(9990),en=t(8961),tn=Object.defineProperty,nn=Object.defineProperties,sn=Object.getOwnPropertyDescriptors,qe=Object.getOwnPropertySymbols,an=Object.prototype.hasOwnProperty,rn=Object.prototype.propertyIsEnumerable,et=(s,n,a)=>n in s?tn(s,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[n]=a,ln=(s,n)=>{for(var a in n||(n={}))an.call(n,a)&&et(s,a,n[a]);if(qe)for(var a of qe(n))rn.call(n,a)&&et(s,a,n[a]);return s},on=(s,n)=>nn(s,sn(n)),tt=(s,n,a)=>new Promise((o,l)=>{var p=r=>{try{E(a.next(r))}catch(m){l(m)}},g=r=>{try{E(a.throw(r))}catch(m){l(m)}},E=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,g);E((a=a.apply(s,n)).next())});const cn=({type:s,actions:n})=>e.createElement(e.Fragment,null,e.createElement(C.x,{as:"label",htmlFor:`${s}PlaylistBrowse`,variant:"sm",css:{cursor:"pointer",mr:"$2"}},"Browse"),e.createElement("input",{type:"file",id:`${s}PlaylistBrowse`,accept:s===c.Mv.audio?"audio/*":"video/*",onChange:a=>{const o=a.target.files[0],l=o.lastModified;n.setList([{type:s,id:l,name:o.name,url:URL.createObjectURL(o)}]),n.play(l)},style:{display:"none"}})),nt=({type:s})=>{const n=s===c.Mv.audio,{active:a,list:o,actions:l}=(0,en.Z)(s),[p,g]=(0,e.useState)(!1),[E,r]=(0,e.useState)(!1);return!(0,i._U)(c.xf).screen||o.length===0?null:e.createElement(e.Fragment,null,e.createElement(u.L.Root,{open:p,onOpenChange:g},e.createElement(u.L.Trigger,{asChild:!0,"data-testid":s===c.Mv.audio?"audio_playlist":"video_playlist"},e.createElement(b.h,{css:{mx:"$4"},active:!a},e.createElement(W.u,{title:n?"Audio Playlist":"Video Playlist"},e.createElement(D.x,null,n?e.createElement(zt.Z,null):e.createElement(Yt.Z,null))))),e.createElement(u.L.Content,{sideOffset:5,align:"center",css:{maxHeight:"unset",width:"$60",p:"$0",bg:"$bgSecondary",border:"1px solid $menuBg"}},e.createElement(A.k,{align:"center",css:{p:"$4 $8",borderBottom:"1px solid $borderLight",bg:"$menuBg"}},e.createElement(C.x,{variant:"md",css:{flex:"1 1 0"}},n?"Audio Player":"Video Playlist"),e.createElement(cn,{type:s,actions:l}),e.createElement(b.h,{css:{mr:"-$4"},onClick:()=>tt(void 0,null,function*(){a&&(yield l.stop()),g(!1),r(!1)})},e.createElement(Jt.Z,{width:24,height:24}))),!E&&e.createElement(D.x,{css:{maxHeight:"$96",overflowY:"auto"}},o.map(w=>e.createElement(Qt,on(ln({key:w.id},w),{onClick:ue=>tt(void 0,null,function*(){ue.preventDefault(),yield l.play(w.id),n||g(!1)})})))),n&&e.createElement(qt.iS,{onToggle:()=>r(w=>!w)}))))};var st=t(5213);const dn=e.lazy(()=>Promise.all([t.e(813),t.e(922)]).then(t.bind(t,4922))),pn=()=>{const{amIScreenSharing:s,screenShareVideoTrackId:n,screenShareAudioTrackId:a,toggleScreenShare:o}=(0,de.N)(),l=(0,i._U)(c.xf),p=s&&!n&&!!a,[g,E]=(0,e.useState)(!1);return!l.screen||!(0,$.Lo)()?null:e.createElement(e.Fragment,null,e.createElement(W.u,{title:`${p?"Stop":"Start"} audio sharing`,key:"shareAudio"},e.createElement(b.h,{active:!p,css:{mr:"$4"},onClick:()=>{s?o(!0):E(!0)},"data-testid":"screenshare_audio"},e.createElement(L.Z,null))),g&&e.createElement(Bt,{onClose:()=>E(!1)}))},at=({isMobile:s=!1})=>{const{isHandRaised:n,isBRBOn:a,toggleHandRaise:o,toggleBRB:l}=(0,Gt.W)();return e.createElement(A.k,{align:"center"},e.createElement(W.u,{title:`${n?"Unraise":"Raise"} hand`,css:{mx:"$4"}},e.createElement(b.h,{onClick:o,active:!n,"data-testid":`${s?"raise_hand_btn_mobile":"raise_hand_btn"}`},e.createElement(G.Z,null))),e.createElement(W.u,{title:`${a?"I'm back":"I'll be right back"}`},e.createElement(b.h,{css:{mx:"$4"},onClick:l,active:!a,"data-testid":"brb_btn"},e.createElement(z.Z,null))))},rt=()=>{const s=(0,i._U)(c.SI),n=(0,st.jc)(),a=(0,st.R)();return e.createElement(W.u,{key:"chat",title:`${n?"Close":"Open"} chat`},e.createElement(b.h,{css:{mx:"$4"},onClick:a,active:!n,"data-testid":"chat_btn"},s===0?e.createElement(Y.Z,null):e.createElement(re.Z,{"data-testid":"chat_unread_btn"})))},_n=()=>e.createElement(A.k,{justify:"between",align:"center",css:{padding:"$2",position:"relative",height:"100%","@md":{flexWrap:"wrap"}}},e.createElement(A.k,{align:"center",css:{position:"absolute",left:"$7","@md":{position:"unset",justifyContent:"center",w:"100%",p:"$4 0"}}},e.createElement(pn,null),e.createElement(nt,{type:c.Mv.audio}),e.createElement(nt,{type:c.Mv.video}),Me.T.enableWhiteboard?e.createElement(Qe.VK,null):null,e.createElement(mn,null),e.createElement(Zt,null),e.createElement(Vt,null),Me.T.enableTranscription&&e.createElement(dn,null),e.createElement(A.k,{align:"center",css:{display:"none","@md":{display:"flex"}}},e.createElement(le.p,{space:4}),e.createElement(at,{isMobile:!0}))),e.createElement(A.k,{align:"center",justify:"center",css:{w:"100%"}},e.createElement(Q.l,null),e.createElement($t,{css:{mx:"$4"}}),e.createElement(wt,null),e.createElement(le.p,{space:4}),e.createElement(k,null),e.createElement(A.k,{align:"center",css:{display:"none","@md":{display:"flex",ml:"$4"}}},e.createElement(rt,null))),e.createElement(A.k,{align:"center",css:{position:"absolute",right:"$7","@md":{display:"none"}}},e.createElement(at,null),e.createElement(le.p,{space:4}),e.createElement(rt,null))),mn=()=>{const s=(0,i._U)(c.xf);return e.createElement(e.Fragment,null,s.screen||Me.T.enableWhiteboard?e.createElement(le.p,{space:4}):null)};var lt=t(5374);const un=()=>{var s,n;const a=(0,i.cw)(),o=(0,ye.tQ)(),l=(0,i._U)(c.lj);return!(l==null?void 0:l.role)||o?null:e.createElement(v.wq,{title:"Role Change Request",onOpenChange:p=>!p&&a.rejectChangeRole(l),body:`${(s=l==null?void 0:l.requestedBy)==null?void 0:s.name} has requested you to change your role to ${(n=l==null?void 0:l.role)==null?void 0:n.name}.`,onAction:()=>{a.acceptChangeRole(l)},Icon:pe.Z,actionText:"Accept"})};var it=t(9655);const gn=()=>{const{maxTileCount:s,appPolicyConfig:{center:n=[],sidepane:a=[]},showStatsOnTiles:o}=(0,e.useContext)(F.I),l=(0,i._U)(c.BK),p=(0,i._U)(c.I3),g=l.filter(m=>n.includes(m.roleName)),E=l.filter(m=>a.includes(m.roleName));let r=g.length>0&&E.length>0;if(g.length===0){const m=l.length===1&&l[0].id===p,w=E.length===0;r=m||w}return e.createElement(A.k,{css:{size:"100%"},direction:{"@initial":"row","@md":"column"}},e.createElement(it.m,{peers:r?g:l,maxTileCount:s,allowRemoteMute:!1,hideSidePane:!r,totalPeers:l.length,showStatsOnTiles:o}),r&&e.createElement(it.O,{peers:E,totalPeers:l.length,showStatsOnTiles:o}))};var En=t(535);const vn=(s=5*60*1e3)=>{const n=(0,i._U)(c.ln),a=(0,i._U)(c.dA),[o,l]=(0,e.useState)(!1),p=(0,e.useRef)(null),g=n&&a===1;return(0,e.useEffect)(()=>{g&&!p.current?p.current=setTimeout(()=>{l(!0)},s):g||(p.current&&clearTimeout(p.current),p.current=null,l(!1))},[g,s]),(0,e.useEffect)(()=>()=>{clearTimeout(p.current)},[]),{alone:g,aloneForLong:o}},hn=()=>{const s=(0,i.cw)(),n=(0,i._U)(c.AI),a=(0,ye.tQ)(),{aloneForLong:o}=vn(),l=(0,i._U)(c.Yt),p=(0,i._U)(c.A$),g=(0,i._U)(c.Go);(0,e.useEffect)(()=>{o&&a&&(n.endRoom?s.endRoom(!1,"Stop Beam"):(l.running&&n.streaming&&s.stopHLSStreaming(),(p.running&&n.streaming||g.browser.running&&n.recording)&&s.stopRTMPAndRecording()))},[o,a,s,n,l,g,p])},fn=e.lazy(()=>t.e(421).then(t.bind(t,9421))),Pn=e.lazy(()=>Promise.all([t.e(404),t.e(245)]).then(t.bind(t,3245))),An=e.lazy(()=>t.e(507).then(t.bind(t,507))),Cn=()=>{const s=(0,i._U)(c.fo),n=(0,i._U)(c.pk),a=(0,i._U)(c.Vq),o=(0,i._U)(c.Oq),l=(0,ye.L3)(Pe.JZ.isAudioOnly),{whiteboardOwner:p}=(0,Qe.l0)(),g=(0,i._U)(c.Pz);hn();const E=(0,i.cw)(),{audioPlaylist:r,videoPlaylist:m,uiViewMode:w,HLS_VIEWER_ROLE:ue,showStatsOnTiles:Ee}=(0,e.useContext)(F.I);if((0,e.useEffect)(()=>{g===c.wk.Connected&&(m.length>0&&E.videoPlaylist.setList(m),r.length>0&&E.audioPlaylist.setList(r))},[g,m,r,E]),!s)return null;let ne;return s===ue?ne=Pn:p?ne=fn:(n&&n.id!==(a==null?void 0:a.id)||o)&&!l?ne=En.Z:w===Pe.FU?ne=An:ne=gn,ne&&e.createElement(e.Suspense,{fallback:e.createElement(lt.Z,null)},e.createElement(ne,{showStats:Ee}))},Sn=()=>{const s=(0,S.s0)(),{roomId:n,role:a}=(0,S.UO)(),o=(0,ye.tQ)(),l=(0,i._U)(c.Pz),p=(0,T.Z)(l),g=(0,i._U)(c.ln),E=(0,i.cw)();return(0,e.useEffect)(()=>{if(!n){s("/");return}!p&&!(l===c.wk.Connecting||l===c.wk.Reconnecting||g)&&s(a?`/preview/${n||""}/${a}`:`/preview/${n||""}`)},[g,p,l,s,a,n]),(0,e.useEffect)(()=>()=>{g&&E.leave()},[E,g]),g?e.createElement(A.k,{css:{size:"100%"},direction:"column"},!o&&e.createElement(D.x,{css:{h:"$18","@md":{h:"$17"}},"data-testid":"header"},e.createElement(j.h,null)),e.createElement(D.x,{css:{w:"100%",flex:"1 1 0",minHeight:0},"data-testid":"conferencing"},e.createElement(Cn,null)),!o&&e.createElement(D.x,{css:{flexShrink:0,minHeight:"$24"},"data-testid":"footer"},e.createElement(_n,null)),e.createElement(un,null)):e.createElement(lt.Z,null)}},9655:(Ae,q,t)=>{t.d(q,{m:()=>U,O:()=>oe});var e=t(8160),S=t(32),T=t(9290),i=t(6939),c=t(8485),A=t(8721),D=t(914);const j=e.memo(()=>e.createElement(i.x,{css:{position:"relative",overflow:"hidden",w:"37.5rem",maxWidth:"80%",h:"100%",r:"$3",m:"0 auto",backgroundImage:`url(${D})`,backgroundSize:"cover",backgroundRepeat:"no-repeat"},"data-testid":"first_person_img"},e.createElement(c.k,{align:"center",direction:"column",css:{position:"absolute",w:"100%",top:"33.33%",left:0,textAlign:"center"}},e.createElement(A.x,{color:"white",variant:"h4",css:{"@md":{fontSize:"$md"}}},"Welcome!"),e.createElement(A.x,{color:"white",variant:"h6",css:{mt:"$4","@md":{fontSize:"$sm"}}},"You\u2019re the first one here."),e.createElement(A.x,{color:"white",variant:"h6",css:{mt:"$2","@md":{fontSize:"$sm"}}},"Sit back and relax till the others join."))));var L=t(6500),G=t(8051),z=t(5213),Y=t(9953);const re=(0,T.zo)("img",{width:"100%",height:"auto",r:"$3"});var de=Object.defineProperty,W=Object.defineProperties,b=Object.getOwnPropertyDescriptors,le=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,B=(x,N,J)=>N in x?de(x,N,{enumerable:!0,configurable:!0,writable:!0,value:J}):x[N]=J,y=(x,N)=>{for(var J in N||(N={}))Q.call(N,J)&&B(x,J,N[J]);if(le)for(var J of le(N))ie.call(N,J)&&B(x,J,N[J]);return x},O=(x,N)=>W(x,b(N));const I=4,v=JSON.parse("{}"),h=(v==null?void 0:v.ROOM_IDS)||[],k=(v==null?void 0:v.IMAGE_FILE)||"",M=(v==null?void 0:v.LINK_HREF)||"https://100ms.live/",U=({peers:x,maxTileCount:N,hideSidePane:J,showStatsOnTiles:R})=>{const _=T.vc.media.md,u=(0,S.Z)(_),C=(0,z.jc)();return e.createElement(e.Fragment,null,e.createElement(i.x,{css:{flex:"1 1 0",height:"100%","@md":{flex:"2 1 0"}}},x&&x.length>0?e.createElement(G.Z,{showStatsOnTiles:R,peers:x,maxTileCount:u?I:N}):h.some(Se=>window.location.href.includes(Se))?e.createElement(i.x,{css:{display:"grid",placeItems:"center",size:"100%",p:"$12"}},e.createElement("a",{href:M,target:"_blank",rel:"noreferrer"},e.createElement(re,{css:{p:"$4",boxShadow:"$sm"},alt:"Event template",src:k}))):e.createElement(j,null)),C&&J&&e.createElement(c.k,{css:{height:"75%",flex:"0 0 20%",zIndex:40,mr:"$4",alignSelf:"flex-end","@md":Y.S8,"@ls":{minHeight:"100%",bottom:"$7"}}},e.createElement(L.i,null)))},oe=({peers:x,showStatsOnTiles:N})=>{const J=(0,z.jc)();return e.createElement(c.k,{direction:"column",css:{flex:"0 0 20%",mx:"$4","@lg":{flex:"0 0 25%"},"@md":{flex:"1 1 0"}}},e.createElement(c.k,{css:{flex:"1 1 0"},align:"end"},x&&x.length>0&&e.createElement(G.Z,{showStatsOnTiles:N,peers:x,maxColCount:2})),J&&e.createElement(c.k,{align:"end",css:{flex:"1 1 0",h:"50%",p:"$4","@md":Y.S8,"@ls":O(y({},Y.S8),{minHeight:"85%"})}},e.createElement(L.i,null)))}},3844:(Ae,q,t)=>{t.d(q,{O:()=>T});const e="peerName",S=new Map([[[!0,"screen"].toString(),"Your Screen"],[[!0,"regular"].toString(),`You (${e})`],[[!1,"screen"].toString(),`${e}'s Screen`],[[!1,"regular"].toString(),e],[[!0,void 0].toString(),`You (${e})`],[[!1,void 0].toString(),`${e}`]]),T=({peerName:i,isLocal:c,track:A})=>{const D=i!==void 0;if(!D||!A)return D?S.get([c,void 0].toString()).replace(e,i):"";const j=A.volume===0;let L=S.get([c,A.source].toString());return L?L=L.replace(e,i):L=`${i} ${A.source}`,L=`${L}${A.degraded?"(Degraded)":""}`,`${L}${j?" (Muted for you)":""}`}},535:(Ae,q,t)=>{t.d(q,{s:()=>R,Z:()=>pe});var e=t(8160),S=t(32),T=t(3751),i=t(9130),c=t(9290),A=t(8485),D=t(6939),j=t(6500),L=t(4685),G=t(9057),z=t(8721),Y=t(7688),re=(V,X,$)=>new Promise((F,ee)=>{var ve=me=>{try{K($.next(me))}catch(fe){ee(fe)}},_e=me=>{try{K($.throw(me))}catch(fe){ee(fe)}},K=me=>me.done?F(me.value):Promise.resolve(me.value).then(ve,_e);K(($=$.apply(V,X)).next())});const de=()=>{const V=(0,T.cw)();return e.createElement(A.k,{direction:"column",align:"center",justify:"center",css:{position:"relative",overflow:"hidden",w:"37.5rem",maxWidth:"80%",h:"100%",r:"$3",m:"0 auto",color:"$textPrimary",bg:"$tileBg",textAlign:"center"}},e.createElement(L.Z,{width:48,height:48}),e.createElement(z.x,{variant:"h5",css:{m:"$8 0"}},"You are sharing your screen"),e.createElement(Y.z,{variant:"danger",onClick:()=>re(void 0,null,function*(){yield V.setScreenShareEnabled(!1)}),"data-testid":"stop_screen_share_btn"},e.createElement(G.Z,{width:18,height:18}),"\xA0 Stop screen share"))};var W=t(9477),b=t(8051),le=t(8329),Q=t(2843),ie=t(6118),B=t(8523),y=t.n(B),O=t(6532),I=t(7854),v=t(5861),h=t(3074),k=t(9990),M=t(5581),U=t(6773);const oe=e.memo(({peerId:V})=>{const X=(0,T._U)((0,i.CI)(V)),$=(0,T._U)(i.k0.selectedItem),F=(0,U.L3)(M.JZ.isAudioOnly),ee=(0,T.cw)(),ve=(0,e.useRef)(null),[_e,K]=(0,Q.Z)(!1),me=(0,ie.Z)(ve,_e,{onClose:()=>K(!1)});return e.createElement(A.k,{direction:"column",justify:"center",css:{w:"100%",h:"100%"},ref:ve},$&&e.createElement(A.k,{justify:"between",align:"center",css:{bg:"$menuBg",p:"$2 $2 $2 $6",borderTopLeftRadius:"$1",borderTopRightRadius:"$1"}},e.createElement(z.x,{css:{color:"$textPrimary"}},$.name),e.createElement(v.h,{css:{color:"$white"},onClick:()=>{ee.videoPlaylist.stop()},"data-testid":"videoplaylist_cross_btn"},e.createElement(G.Z,null))),e.createElement(h.n,{trackId:X==null?void 0:X.id,attach:!F,css:{"@lg":{objectFit:"contain",h:"auto"},r:"$1",borderTopLeftRadius:0,borderTopRightRadius:0}}),e.createElement(k.Nc,null,y().enabled&&e.createElement(v.h,{onClick:()=>K(),css:{color:"$white",height:"max-content",alignSelf:"center",cursor:"pointer"}},me?e.createElement(O.Z,null):e.createElement(I.Z,null))))});var x=t(9953),N=t(5213);const J=({showStats:V})=>{var X;const $=c.vc.media.lg,F=(0,S.Z)($),ee=(0,T._U)(i.BK),ve=(0,T._U)(i.I3),_e=(0,T._U)(i.fo),K=(0,T._U)(i.pk),me=(0,T._U)(i.Oq),fe=((X=K==null?void 0:K.roleName)==null?void 0:X.toLowerCase())===(_e==null?void 0:_e.toLowerCase()),be=ve===(K==null?void 0:K.id),te=F||be||fe,d=(0,e.useMemo)(()=>{const f=ee.filter(P=>P.id!==(K==null?void 0:K.id));return te&&K&&f.unshift(K),f},[ee,K,te]);return e.createElement(A.k,{css:{size:"100%"},direction:F?"column":"row"},e.createElement(_,{showStats:V,amIPresenting:be,peerPresenting:K,peerSharingPlaylist:me}),e.createElement(A.k,{direction:{"@initial":"column","@lg":"row"},css:{overflow:"hidden",p:"$4",flex:"0 0 20%","@lg":{flex:"1 1 0"}}},e.createElement(R,{showSidebarInBottom:F,showStats:V,peerScreenSharing:K,isPresenterInSmallTiles:te,smallTilePeers:d,totalPeers:ee.length})))},R=({showStats:V,isPresenterInSmallTiles:X,peerScreenSharing:$,smallTilePeers:F,totalPeers:ee,showSidebarInBottom:ve})=>{const _e=(0,e.useCallback)(K=>$&&K.id!==$.id,[$]);return e.createElement(e.Fragment,null,!X&&e.createElement(Se,{peerScreenSharing:$,showStatsOnTiles:V}),e.createElement(C,{showSidebarInBottom:ve,smallTilePeers:F,shouldShowScreenFn:_e,showStatsOnTiles:V}),e.createElement(u,{totalPeers:ee}))},_=({showStats:V,amIPresenting:X,peerPresenting:$,peerSharingPlaylist:F})=>{const ee=(0,T._U)((0,i.K6)($==null?void 0:$.id));return F?e.createElement(D.x,{css:{mx:"$4",flex:"3 1 0","@lg":{flex:"2 1 0",display:"flex",alignItems:"center"}}},e.createElement(oe,{peerId:F.id})):e.createElement(D.x,{css:{flex:"3 1 0",mx:"$4",ml:"$5","@lg":{ml:"$4",maxHeight:"80%"}}},$&&(X&&!["browser","window","application"].includes(ee==null?void 0:ee.displaySurface)?e.createElement(D.x,{css:{objectFit:"contain",h:"100%"}},e.createElement(de,null)):e.createElement(W.Z,{showStatsOnTiles:V,peerId:$==null?void 0:$.id})))},u=()=>(0,N.jc)()?e.createElement(D.x,{css:{h:"45%",flexShrink:0,"@lg":x.S8,"@ls":{position:"absolute",top:0,h:"100%",minHeight:300,zIndex:40}}},e.createElement(j.i,null)):null,C=({smallTilePeers:V,shouldShowScreenFn:X,showStatsOnTiles:$,showSidebarInBottom:F})=>e.createElement(A.k,{css:{flex:"2 1 0"}},V&&V.length>0&&e.createElement(b.Z,{peers:V,maxColCount:F?void 0:2,maxRowCount:F?1:void 0,includeScreenShareForPeer:X,showStatsOnTiles:$})),Se=({peerScreenSharing:V,showStatsOnTiles:X})=>V?e.createElement(D.x,{css:{flex:"1 1 0",minHeight:"25%",py:"$4","@lg":{mr:"$4",minHeight:"unset",py:0},"@sm":{height:"100%",maxHeight:"75%",alignSelf:"center"}}},e.createElement(le.Z,{showStatsOnTiles:X,width:"100%",height:"100%",peerId:V.id})):null,pe=J},914:(Ae,q,t)=>{Ae.exports=t.p+"static/media/first_person.0917322d0bba25059a53.png"}}]);

//# sourceMappingURL=694.4231587d.js.map