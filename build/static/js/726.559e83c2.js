"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[726],{9112:(re,G,n)=>{n.d(G,{M:()=>l});var e=n(3751),A=n(8081),h=n(5581);const l=(...d)=>(0,e._U)((0,A.Dv)(h._8.appConfig,...d))},8961:(re,G,n)=>{n.d(G,{Z:()=>h});var e=n(8081),A=n(3751);const h=l=>{const d=l===e.Mv.audio,f=d?e.Hx:e.k0,T=(0,A._U)(f.selectedItem),V=(0,A._U)(f.selection),S=(0,A._U)(f.list),M=(0,A.cw)(),Z=d?M.audioPlaylist:M.videoPlaylist;return{active:T,hasNext:V.hasNext,hasPrevious:V.hasPrevious,actions:Z,list:S}}},9121:(re,G,n)=>{n.d(G,{VK:()=>_e,nN:()=>I,l0:()=>te.l});var e=n(8160),A=n(3512),h=n(3751),l=n(8081),d=n(108),f=n.n(d),T=Object.defineProperty,V=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,Z=(C,g,m)=>g in C?T(C,g,{enumerable:!0,configurable:!0,writable:!0,value:m}):C[g]=m,L=(C,g)=>{for(var m in g||(g={}))S.call(g,m)&&Z(C,m,g[m]);if(V)for(var m of V(g))M.call(g,m)&&Z(C,m,g[m]);return C},U=(C,g,m)=>(Z(C,typeof g!="symbol"?g+"":g,m),m);const z=C=>JSON.stringify(C,(g,m)=>m===void 0?null:m);class ne{constructor(){U(this,"init",(g="")=>{this.initialized||(this.pusher=new(f())("",{cluster:"ap2",authEndpoint:""}),this.channel=this.pusher.subscribe(`private-${g}`),this.channel.bind("pusher:subscription_succeeded",this.resendLastEvents),console.log("Whiteboard initialized communication through Pusher"),this.initialized=!0)}),U(this,"storeEvent",(g,m)=>{this.lastMessage[g]=L({eventName:g},m)}),U(this,"getStoredEvent",g=>this.lastMessage[g]),U(this,"broadcastEvent",(g,m={})=>{this.storeEvent(g,m),this.channel.trigger(`client-${g}`,z(L({eventName:g},m)))}),U(this,"subscribe",(g,m)=>(this.channel.bind(`client-${g}`,k=>this.storeEvent(g,k)),this.channel.bind(`client-${g}`,m),()=>{this.channel.unbind(`client-${g}`,m)})),U(this,"resendLastEvents",()=>{for(const g in this.lastMessage)this.lastMessage[g]&&this.channel.trigger(`client-${g}`,this.lastMessage[g])}),this.initialized=!1,this.lastMessage={}}}const K=new ne;var te=n(802);const x={STATE_CHANGE:"state-change",CURRENT_STATE:"current-state",REQUEST_STATE:"request-state"},se=()=>{const{amIWhiteboardOwner:C}=(0,te.l)();return{shouldRequestState:(0,h._U)((0,l._u)(850)),amIWhiteboardOwner:C}};function j(C){const[g,m]=(0,e.useState)(null),[k,N]=(0,e.useState)(!1),{amIWhiteboardOwner:B,shouldRequestState:b}=se(),O=(0,e.useRef)(new Map),$=(0,e.useRef)(new Map),J=(0,e.useCallback)(()=>({shapes:O.current?Object.fromEntries(O.current):{},bindings:$.current?Object.fromEntries($.current):{}}),[]),Q=(0,e.useCallback)(()=>{B&&k&&K.broadcastEvent(x.CURRENT_STATE,J())},[B,k,J]),oe=(0,e.useCallback)(({shapes:ee,bindings:pe,merge:ie=!0})=>{if(!!(ee&&pe))if(ie){const fe=O.current,Se=$.current;if(!(fe&&Se))return;Object.entries(ee).forEach(([Re,ve])=>{ve?fe.set(ve.id,ve):fe.delete(Re)}),Object.entries(pe).forEach(([Re,ve])=>{ve?Se.set(ve.id,ve):Se.delete(Re)})}else O.current=new Map(Object.entries(ee)),$.current=new Map(Object.entries(pe))},[]),le=(0,e.useCallback)(ee=>{g?.replacePageContent(ee.shapes,ee.bindings,{})},[g]),q=(0,e.useCallback)(ee=>{if(!ee)return;const{shapes:pe,bindings:ie,eventName:fe}=ee;oe({shapes:pe,bindings:ie,merge:fe===x.STATE_CHANGE}),le(J())},[le,J,oe]),ge=(0,e.useCallback)(()=>{!k||(B?(q(K.getStoredEvent(x.CURRENT_STATE)),Q()):b&&K.broadcastEvent(x.REQUEST_STATE))},[k,B,b,q,Q]),Pe=(0,e.useCallback)(ee=>{ee.loadRoom(C),ee.pause(),m(ee)},[C]),xe=(0,e.useCallback)((ee,pe,ie,fe)=>{oe({shapes:pe,bindings:ie}),K.broadcastEvent(x.STATE_CHANGE,{shapes:pe,bindings:ie}),le(J())},[oe,le,J]);return(0,e.useEffect)(()=>{if(!g)return;const ee=[];let pe=!0;function ie(){pe&&(ee.push(K.subscribe(x.STATE_CHANGE,q)),ee.push(K.subscribe(x.CURRENT_STATE,q)),ee.push(K.subscribe(x.REQUEST_STATE,Q)),N(!0))}return K.init(),ie(),ge(),()=>{pe=!1,ee.forEach(fe=>fe())}},[g,ge,Q,q]),(0,e.useEffect)(()=>()=>{k&&!b&&(console.log("Whiteboard unmount storing",J()),K.storeEvent(x.CURRENT_STATE,J()))},[k,b,J]),{onMount:Pe,onChangePage:xe}}var F=Object.defineProperty,D=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,v=(C,g,m)=>g in C?F(C,g,{enumerable:!0,configurable:!0,writable:!0,value:m}):C[g]=m,E=(C,g)=>{for(var m in g||(g={}))P.call(g,m)&&v(C,m,g[m]);if(D)for(var m of D(g))y.call(g,m)&&v(C,m,g[m]);return C};const I=e.memo(({roomId:C})=>{const g=j(C);return e.createElement(A.Dr,E({autofocus:!0,disableAssets:!0,showSponsorLink:!1,showPages:!1,showMenu:!1},g))});var w=n(455),X=n(9168),R=n(7777),W=n(8160);const _e=()=>{const{whiteboardEnabled:C,whiteboardOwner:g,amIWhiteboardOwner:m,toggleWhiteboard:k}=(0,te.l)();return C?W.createElement(w.u,{title:`${g?m?"Stop whiteboard":"Can't stop whiteboard":"Start whiteboard"}`,key:"whiteboard"},W.createElement(R.Z,{onClick:k,active:!g,disabled:g&&!m,"data-testid":"white_board_btn"},W.createElement(X.Z,null))):null}},9990:(re,G,n)=>{n.d(G,{iS:()=>j,Nc:()=>F});var e=n(8160),A=n(8081),h=n(3751),l=n(6905),d=n(4817),f=n(8338),T=n(4053),V=n(4334),S=n(7506),M=n(8651),Z=n(6939),L=n(8485),U=n(8721),z=n(5861),ne=n(8961);const K=({type:D,duration:P})=>{const y=D===A.Mv.audio?A.Hx:A.k0,v=(0,h._U)(y.progress),E=(0,h.cw)(),I=D===A.Mv.audio?E.audioPlaylist:E.videoPlaylist;return P?e.createElement(M.i,{step:1,value:[v],onValueChange:w=>{I.seekTo(w[0]*.01*P)}}):null},te=({type:D,onToggle:P})=>{var y,v;const I=D===A.Mv.audio?A.Hx:A.k0,w=(0,h._U)(I.selectedItem);return w?e.createElement(Z.x,{css:{mt:"$8"}},e.createElement(L.k,{justify:"between",css:{w:"100%"}},e.createElement(Z.x,null,e.createElement(U.x,{variant:"md"},w.name),((y=w.metadata)==null?void 0:y.description)&&e.createElement(U.x,{variant:"xs"},(v=w.metadata)==null?void 0:v.description)),e.createElement(z.h,{onClick:P,css:{alignSelf:"center"},"data-testid":"playlist_collapse_btn"},e.createElement(l.Z,null)))):null},x=({type:D,css:P={}})=>{const{active:y,hasNext:v,hasPrevious:E,actions:I}=(0,ne.Z)(D);return y?e.createElement(L.k,{justify:"center",css:P},e.createElement(z.h,{disabled:!E,onClick:()=>{I.playPrevious()},"data-testid":"playlist_prev_btn"},e.createElement(d.Z,null)),e.createElement(z.h,{onClick:()=>{y.playing?I.pause():I.play(y.id)},"data-testid":"playlist_play_pause_btn"},y.playing?e.createElement(f.Z,{width:32,height:32}):e.createElement(T.Z,{width:32,height:32})),e.createElement(z.h,{disabled:!v,onClick:()=>{I.playNext()},"data-testid":"playlist_next_btn"},e.createElement(V.Z,null))):null},se=()=>{const D=(0,h.cw)(),P=(0,h._U)(A.k0.volume),y=(0,h._U)(A.k0.selectedItem),v=(0,h._U)(A.Oq),E=(0,h._U)((0,A.n2)(v?.id)),I=(0,h._U)((0,A.BF)(E?.id)),w=y?P:I;return e.createElement(L.k,{align:"center",css:{color:"$white"}},e.createElement(S.Z,null),e.createElement(M.i,{css:{mx:"$4",w:"$20"},min:0,max:100,step:1,value:[Math.floor(w)],onValueChange:X=>{const R=X[0];y?D.videoPlaylist.setVolume(R):E&&D.setVolume(R,E.id)},thumbStyles:{w:"$6",h:"$6"}}))},j=({onToggle:D})=>{const{active:P}=(0,ne.Z)(A.Mv.audio);return P?e.createElement(Z.x,{css:{p:"$8",borderTop:"1px solid $borderLight",bg:"$menuBg"}},e.createElement(x,{type:A.Mv.audio}),e.createElement(K,{type:A.Mv.audio,duration:P.duration}),e.createElement(te,{type:A.Mv.audio,onToggle:D})):null},F=({children:D})=>{const{active:P}=(0,ne.Z)(A.Mv.video);return e.createElement(Z.x,{css:{p:"$8",mt:"-$24",w:"100%",zIndex:1,"@lg":{mt:0,p:"$6"}}},P&&e.createElement(K,{type:A.Mv.video,duration:P.duration}),e.createElement(L.k,{align:"center",justify:"between"},e.createElement(se,null),P&&e.createElement(x,{css:{flex:"1 1 0"}}),D))}},9477:(re,G,n)=>{n.d(G,{Z:()=>se});var e=n(8160),A=n(8523),h=n.n(A),l=n(8379),d=n(3751),f=n(8081),T=n(6532),V=n(7854),S=n(1280),M=n(4299),Z=n(3074),L=n(6567),U=n(6773),z=n(3844),ne=n(5581);const K={position:"unset",width:"100%",textAlign:"center",transform:"none",mt:"$2",flexShrink:0},te=({peerId:j,width:F="100%",height:D="100%"})=>{const P=(0,d._U)((0,f.K6)(j)),y=(0,d._U)((0,f.Nm)(j)),v=(0,U.L3)(ne.JZ.isAudioOnly),E=(0,U.tQ)(),[I,w]=(0,e.useState)(!1),X=(0,U.L3)(ne.JZ.showStatsOnTiles),R=(0,z.O)({peerName:y.name,isLocal:!1,track:P}),W=(0,e.useRef)(null),[_e,C]=(0,e.useState)(!1),g=(0,l.Z)(W,_e,{onClose:()=>C(!1)}),m=h().isEnabled,k=(0,d._U)((0,f.Qq)(y?.id));return e.createElement(S.i.Root,{css:{width:F,height:D},"data-testid":"screenshare_tile"},y?e.createElement(S.i.Container,{transparentBg:!0,ref:W,css:{flexDirection:"column"},onMouseEnter:()=>w(!0),onMouseLeave:()=>{w(!1)}},X?e.createElement(M.q8,{audioTrackID:k?.id,videoTrackID:P?.id}):null,m&&!E?e.createElement(S.i.FullScreenButton,{onClick:()=>C(!_e)},g?e.createElement(T.Z,null):e.createElement(V.Z,null)):null,P?e.createElement(Z.n,{screenShare:!0,mirror:y.isLocal&&P?.source==="regular",attach:!v,trackId:P.id}):null,e.createElement(S.i.Info,{css:K},R),I&&!E&&!y?.isLocal?e.createElement(L.Z,{isScreenshare:!0,peerID:y?.id,audioTrackID:k?.id,videoTrackID:P?.id}):null):null)},se=e.memo(te)},6567:(re,G,n)=>{n.d(G,{Z:()=>te});var e=n(8160),A=n(4328),h=n(8111),l=n(7923),d=n(6548),f=n(8981),T=n(7506),V=n(9540),S=n(3751),M=n(8081),Z=n(4866),L=n(8414),U=n(8485),z=n(8651),ne=(x,se,j)=>new Promise((F,D)=>{var P=E=>{try{v(j.next(E))}catch(I){D(I)}},y=E=>{try{v(j.throw(E))}catch(I){D(I)}},v=E=>E.done?F(E.value):Promise.resolve(E.value).then(P,y);v((j=j.apply(x,se)).next())});const te=({audioTrackID:x,videoTrackID:se,peerID:j,isScreenshare:F=!1})=>{const D=(0,S.cw)();let{removeOthers:P}=(0,S._U)(M.AI);P=P&&!F;const{isAudioEnabled:y,isVideoEnabled:v,setVolume:E,toggleAudio:I,toggleVideo:w,volume:X}=(0,Z.T)(x,se);return P||I||w||E?e.createElement(L.R.Root,null,e.createElement(L.R.Trigger,{"data-testid":"participant_menu_btn"},e.createElement(A.Z,null)),e.createElement(L.R.Content,{side:"top",align:"end",sideOffset:8},w?e.createElement(L.R.ItemButton,{onClick:w,"data-testid":v?"mute_video_participant_btn":"unmute_video_participant_btn"},v?e.createElement(h.Z,null):e.createElement(l.Z,null),e.createElement("span",null,`${v?"Mute":"Request Unmute"}`)):null,I?e.createElement(L.R.ItemButton,{onClick:I,"data-testid":v?"mute_audio_participant_btn":"unmute_audio_participant_btn"},y?e.createElement(d.Z,null):e.createElement(f.Z,null),e.createElement("span",null,`${y?"Mute":"Request Unmute"}`)):null,x?e.createElement(L.R.VolumeItem,{"data-testid":"participant_volume_slider"},e.createElement(U.k,{align:"center",gap:1},e.createElement(T.Z,null)," ",e.createElement("span",null,"Volume (",X,")")),e.createElement(z.i,{css:{my:"0.5rem"},step:5,value:[X],onValueChange:R=>E(R[0])})):null,P?e.createElement(L.R.RemoveItem,{onClick:()=>ne(void 0,null,function*(){try{yield D.removePeer(j,"")}catch{}}),"data-testid":"remove_participant_btn"},e.createElement(V.Z,null),e.createElement("span",null,"Remove Participant")):null)):null}},8051:(re,G,n)=>{n.d(G,{Z:()=>se});var e=n(8160),A=n(5683),h=n(9314),l=n(8613),d=n(8534),f=n(871),T=n(8329),V=n(9477),S=n(9478),M=n(4674),Z=n(4718),L=n(3385);const U=({page:j,setPage:F,numPages:D})=>{const P=j===0,y=j===D-1,v=()=>{F(Math.min(j+1,D-1))},E=()=>{F(Math.max(j-1,0))};return e.createElement(M.I.Root,null,e.createElement(M.I.Chevron,{disabled:P,onClick:E},e.createElement(Z.Z,{width:16,height:16,style:{cursor:P?"not-allowed":"pointer"}})),e.createElement(M.I.Dots,null,[...Array(D)].map((I,w)=>e.createElement(M.I.Dot,{key:w,active:j===w,onClick:()=>F(w)}))),e.createElement(M.I.Chevron,{disabled:y,onClick:v},e.createElement(L.Z,{width:16,height:16,style:{cursor:y?"not-allowed":"pointer"}})))};var z=n(9112),ne=n(6773);const K=({maxTileCount:j,peers:F,maxColCount:D,maxRowCount:P,includeScreenShareForPeer:y})=>{const{aspectRatio:v}=(0,h.Fg)(),E=(0,z.M)("headlessConfig","tileOffset"),I=(0,ne.tQ)(),{ref:w,pagesWithTiles:X}=(0,f.i)({peers:F,maxTileCount:j,maxColCount:D,maxRowCount:P,includeScreenShareForPeer:y,aspectRatio:v,offsetY:x({isHeadless:I,tileOffset:E})}),[R,W]=(0,e.useState)(0);(0,e.useEffect)(()=>{R>=X.length&&W(0)},[X.length,R]);const _e=S.T.freezeVideoList();return e.createElement(l.d.Root,{ref:w},e.createElement(l.d.Container,null,X&&X.length>0?X.map((C,g)=>e.createElement(A.f,{freeze:_e&&R!==g,key:g},e.createElement(l.d.View,{css:{left:(0,d.I)(g,R),transition:"left 0.3s ease-in-out"}},C.map((m,k)=>{var N,B,b,O;return((N=m.track)==null?void 0:N.source)==="screen"?e.createElement(V.Z,{key:m.track.id,width:m.width,height:m.height,peerId:m.peer.id}):e.createElement(T.Z,{key:((B=m.track)==null?void 0:B.id)||m.peer.id,width:m.width,height:m.height,peerId:(b=m.peer)==null?void 0:b.id,trackId:(O=m.track)==null?void 0:O.id})})))):null),X.length>1?e.createElement(U,{page:R,setPage:W,numPages:X.length}):null)},te=e.memo(K),x=({offset:j,isHeadless:F})=>!F||typeof j!="number"?32:j,se=te},8329:(re,G,n)=>{n.d(G,{Z:()=>y});var e=n(8160),A=n(5470),h=n(1280),l=n(4299),d=n(3074),f=n(1959),T=n(8081),V=n(3751),S=n(8981),M=n(3712),Z=n(3988),L=n(6567),U=n(2173),z=n(6773),ne=n(9112),K=n(3844),te=n(5581);const x=({peerId:v,trackId:E,width:I,height:w})=>{const X=E?(0,T.M)(E):(0,T.t$)(v),R=(0,V._U)(X),W=(0,V._U)((0,T.I_)(v)),_e=(0,V._U)((0,T.L6)(v)),C=(0,V._U)(T.I3),g=(0,z.L3)(te.JZ.isAudioOnly),m=(0,z.L3)(te.JZ.showStatsOnTiles),k=(0,z.tQ)(),N=!(0,V._U)((0,T.xn)(v)),B=!R?.enabled,[b,O]=(0,e.useState)(!1),$=(0,A.W)(_e?.id),J=R?.degraded,Q=C===v,oe=(0,K.O)({peerName:W,track:R,isLocal:Q}),le=(0,e.useCallback)(Pe=>{O(Pe.type==="mouseenter")},[]),q=(0,ne.M)("headlessConfig"),ge=k&&q?.hideTileName;return e.createElement(h.i.Root,{css:{width:I,height:w,padding:P({isHeadless:k,offset:q?.tileOffset})},"data-testid":`participant_tile_${W}`},W!==void 0?e.createElement(h.i.Container,{onMouseEnter:le,onMouseLeave:le,ref:k&&q?.hideAudioLevel?void 0:$},e.createElement(U.Z,{hideLabel:ge,name:oe,isTile:!0,peerId:v,width:I}),m?e.createElement(l.q8,{audioTrackID:_e?.id,videoTrackID:R?.id,peerID:v}):null,R?e.createElement(d.n,{trackId:R?.id,attach:Q?void 0:!g,mirror:v===C&&R?.source==="regular",degraded:J,"data-testid":"participant_video_tile"}):null,e.createElement(h.i.AvatarContainer,null,B||J||g?e.createElement(f.q,{name:W||"","data-testid":"participant_avatar_icon"}):null),D({hideTileAudioMute:q?.hideTileAudioMute,isHeadless:k,isAudioMuted:N})?e.createElement(h.i.AudioIndicator,{"data-testid":"participant_audio_mute_icon"},e.createElement(S.Z,null)):null,b&&!k&&!Q?e.createElement(L.Z,{peerID:v,audioTrackID:_e?.id,videoTrackID:R?.id}):null,e.createElement(j,{peerId:v})):null)},se={top:"$4",left:"$4"},j=({peerId:v})=>{const E=(0,V._U)((0,T.cH)(v)),I=E?.isHandRaised||!1,w=E?.isBRBOn||!1;return e.createElement(e.Fragment,null,I?e.createElement(h.i.AttributeBox,{css:se,"data-testid":"raiseHand_icon_onTile"},e.createElement(M.Z,{width:40,height:40})):null,w?e.createElement(h.i.AttributeBox,{css:se,"data-testid":"brb_icon_onTile"},e.createElement(Z.Z,{width:40,height:40})):null)},F=e.memo(x),D=({hideTileAudioMute:v,isHeadless:E,isAudioMuted:I})=>E?I&&!v:I,P=({isHeadless:v,offset:E})=>{if(!(!v||typeof E!="number"))return E===0?0:void 0},y=F},1726:(re,G,n)=>{n.r(G),n.d(G,{default:()=>ft});var e=n(8160),A=n(841),h=n(3738),l=n(3751),d=n(8081),f=n(8485),T=n(6939),V=n(5374),S=n(4778),M=n(6773);const Z=()=>{var i,t;const s=(0,l.cw)(),a=(0,M.tQ)(),_=(0,l._U)(d.lj);return!_?.role||a?null:e.createElement(S.wq,{title:"Role Change Request",onOpenChange:o=>!o&&s.rejectChangeRole(_),body:`${(i=_?.requestedBy)==null?void 0:i.name} has requested you to change your role to ${(t=_?.role)==null?void 0:t.name}.`,onAction:()=>{s.acceptChangeRole(_)},actionText:"Accept"})};var L=n(9655),U=n(5581);const z=i=>(0,l._U)((0,d.Dv)(U._8.appLayout,i)),ne=()=>{const i=z("center")||[],t=z("sidepane")||[],s=(0,M.L3)(U.JZ.maxTileCount),a=(0,l._U)(d.BK),_=(0,l._U)(d.I3),o=a.filter(c=>i.includes(c.roleName)),r=a.filter(c=>t.includes(c.roleName));let p=o.length>0&&r.length>0;if(o.length===0){const c=a.length===1&&a[0].id===_,u=r.length===0;p=c||u}return e.createElement(f.k,{css:{size:"100%"},direction:{"@initial":"row","@md":"column"}},e.createElement(L.m,{peers:p?o:a,maxTileCount:s,allowRemoteMute:!1,hideSidePane:!p,totalPeers:a.length}),p&&e.createElement(L.O,{peers:r,totalPeers:a.length}))};var K=n(6154),te=n(535),x=n(7158);const se=(i=5*60*1e3)=>{const t=(0,l._U)(d.ln),s=(0,l._U)(d.dA),[a,_]=(0,e.useState)(!1),o=(0,e.useRef)(null),r=t&&s===1;return(0,e.useEffect)(()=>{r&&!o.current?o.current=setTimeout(()=>{_(!0)},i):r||(o.current&&clearTimeout(o.current),o.current=null,_(!1))},[r,i]),(0,e.useEffect)(()=>()=>{o.current&&clearTimeout(o.current)},[]),{alone:r,aloneForLong:a}},j=()=>{const i=(0,l.cw)(),t=(0,l._U)(d.AI),s=(0,M.tQ)(),{aloneForLong:a}=se(),{isHLSRunning:_,isRTMPRunning:o,isBrowserRecordingOn:r}=(0,x.v)();(0,e.useEffect)(()=>{a&&s&&(t?.endRoom?i.endRoom(!1,"Stop Beam"):(_&&t?.hlsStreaming&&i.stopHLSStreaming(),(o&&t?.rtmpStreaming||r&&t?.browserRecording)&&i.stopRTMPAndRecording()))},[a,s,i,t,_,o,r])};var F=n(9121),D=n(9112);const P=e.lazy(()=>n.e(421).then(n.bind(n,9421))),y=e.lazy(()=>Promise.all([n.e(404),n.e(352)]).then(n.bind(n,3352))),v=e.lazy(()=>n.e(507).then(n.bind(n,507))),E=()=>{const i=(0,l._U)(d.fo),t=(0,l._U)(d.pk),s=(0,l._U)(d.Vq),a=(0,l._U)(d.Oq),{whiteboardOwner:_}=(0,F.l0)(),o=(0,l._U)(d.ln);j();const r=(0,l.cw)(),p=(0,M.tQ)(),c=(0,D.M)("headlessConfig","uiMode"),{uiViewMode:u,isAudioOnly:Y}=(0,M.L3)(),H=(0,M.ZP)();if((0,e.useEffect)(()=>{if(!o)return;const ae=JSON.parse({npm_config_save_dev:"",npm_config_legacy_bundling:"",npm_config_dry_run:"",npm_package_dependencies_emoji_mart:"^5.1.0",npm_config_viewer:"man",npm_config_only:"",npm_config_commit_hooks:"true",npm_config_browser:"",npm_package_gitHead:"068b9d8e44c013d061fcfb7d5fa826d5efc7abef",npm_package_devDependencies_prettier:"^2.5.1",npm_config_also:"",npm_package_devDependencies_source_map_loader:"^3.0.1",npm_config_sign_git_commit:"",npm_config_rollback:"true",npm_package_devDependencies_cssnano:"^5.0.15",TERM_PROGRAM:"vscode",NODE:"/usr/local/bin/node",npm_config_usage:"",npm_config_audit:"true",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_package_dependencies_axios:"^0.26.1",npm_package_dependencies_logrocket_react:"^5.0.1",npm_config_globalignorefile:"/usr/local/etc/npmignore",TERM:"xterm-256color",SHELL:"/bin/zsh",npm_config_shell:"/bin/zsh",npm_config_maxsockets:"50",npm_config_init_author_url:"",npm_package_dependencies_eventemitter2:"^6.4.7",npm_config_shrinkwrap:"true",npm_config_parseable:"",npm_config_metrics_registry:"https://registry.npmjs.org/",npm_package_dependencies_react_freeze:"^1.0.0",npm_package_dependencies__100mslive_react_icons:"0.3.1-alpha.0",TMPDIR:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T/",npm_config_timing:"",npm_config_init_license:"ISC",npm_config_if_present:"",npm_package_dependencies_screenfull:"^5.1.0",TERM_PROGRAM_VERSION:"1.75.0-insider",npm_package_scripts_dev:"node ../../scripts/dev-webapp",npm_config_sign_git_tag:"",npm_config_init_author_email:"",npm_config_cache_max:"Infinity",npm_package_dependencies_uuid:"^8.3.2",ZDOTDIR:"/Users/rajesh",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",npm_config_preid:"",npm_config_long:"",npm_config_local_address:"",npm_config_git_tag_version:"true",npm_config_cert:"",npm_config_registry:"https://registry.npmjs.org/",npm_config_noproxy:"",npm_config_fetch_retries:"2",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_package_dependencies_react_dom:"^18.1.0",npm_config_versions:"",npm_config_message:"%s",npm_config_key:"",npm_package_readmeFilename:"README.md",npm_package_devDependencies_webpack:"^5.69.1",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_description:"eb deploy -l v-vid-20",USER:"rajesh",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/usr/local/etc/npmrc",npm_package_browserslist_development_1:"last 1 firefox version",npm_config_prefer_online:"",npm_config_logs_max:"10",npm_config_always_auth:"",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies_compression:"^1.7.4",npm_package_dependencies_logrocket:"^2.2.0",npm_package_dependencies__100mslive_hms_noise_suppression:"0.4.1",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.LGYNGI5OzU/Listeners",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",npm_config_global_style:"",npm_config_cache_lock_retries:"10",npm_package_dependencies__100mslive_react_ui:"0.3.1-alpha.0",npm_config_update_notifier:"true",npm_config_cafile:"",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.3.2",npm_config_heading:"npm",npm_config_audit_level:"low",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",npm_config_searchlimit:"20",npm_config_read_only:"",npm_config_offline:"",npm_config_fetch_retry_mintimeout:"10000",npm_config_json:"",npm_config_access:"",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["run","build"]}',PATH:"/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/rajesh/Projects/Bitroot/100ms-web-vidcall/node_modules/.bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin:/Users/rajesh/Flutter-Dev/flutter/bin:/Users/rajesh/Flutter-Dev/flutter/.pub-cache/bin:/Users/rajesh/Flutter-Dev/flutter/bin:/Users/rajesh/Flutter-Dev/flutter/.pub-cache/bin",npm_config_allow_same_version:"",npm_config_https_proxy:"",npm_config_engine_strict:"",npm_config_description:"true",npm_package_dependencies__tldraw_tldraw:"^1.5.0",_:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall/node_modules/.bin/webpack",npm_config_userconfig:"/Users/rajesh/.npmrc",npm_config_init_module:"/Users/rajesh/.npm-init.js",npm_package_browserslist_production_1:"not dead",USER_ZDOTDIR:"/Users/rajesh",__CFBundleIdentifier:"com.microsoft.VSCodeInsiders",npm_config_cidr:"",npm_package_browserslist_production_0:">0.2%",PWD:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall",npm_config_user:"",npm_config_node_version:"14.15.1",npm_package_dependencies__100mslive_react_sdk:"0.3.1-alpha.0",JAVA_HOME:"/Library/Java/JavaVirtualMachines/jdk1.8.0_311.jdk/Contents/Home",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",npm_config_save:"true",npm_config_ignore_prepublish:"",npm_config_editor:"vi",npm_config_auth_type:"legacy",npm_package_name:"100ms_edtech_template",LANG:"en_US.UTF-8",LOCAL_GIT_DIRECTORY:"/Applications/GitHub Desktop.app/Contents/Resources/app/git",npm_config_tag:"latest",npm_config_script_shell:"",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies_body_parser:"^1.19.2",npm_package_dependencies__100mslive_hms_virtual_background:"1.6.1-alpha.0",npm_config_progress:"true",npm_config_global:"",npm_config_before:"",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"node server.js",npm_package_scripts_build:"webpack --node-env production",npm_config_searchstaleness:"900",npm_config_optional:"true",npm_config_ham_it_up:"",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",XPC_FLAGS:"0x0",npm_config_save_prod:"",npm_config_force:"",npm_config_bin_links:"true",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_package_dependencies_crypto_js:"^4.1.1",npm_config_searchopts:"",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_config_depth:"Infinity",npm_package_main:"dist/index.cjs.js",npm_config_sso_poll_frequency:"500",npm_config_rebuild_bundle:"true",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.5",XPC_SERVICE_NAME:"0",npm_config_unicode:"true",npm_package_devDependencies_autoprefixer:"^10.4.2",VSCODE_INJECTION:"1",npm_package_dependencies_react_window:"^1.8.7",HOME:"/Users/rajesh",SHLVL:"2",npm_config_fetch_retry_maxtimeout:"60000",npm_package_dependencies_hls_js:"^1.1.1",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code - Insiders.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_config_tag_version_prefix:"v",npm_config_strict_ssl:"true",npm_config_sso_type:"oauth",npm_config_scripts_prepend_node_path:"warn-only",npm_config_save_prefix:"^",npm_config_loglevel:"notice",npm_config_ca:"",npm_config_save_exact:"",npm_config_group:"20",npm_config_fetch_retry_factor:"10",npm_config_dev:"",npm_package_dependencies__emoji_mart_data:"^1.0.3",npm_config_version:"",npm_config_prefer_offline:"",npm_config_cache_lock_stale:"60000",npm_config_otp:"",npm_config_cache_min:"10",npm_config_searchexclude:"",npm_config_cache:"/Users/rajesh/.npm",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",LOGNAME:"rajesh",npm_lifecycle_script:"webpack --node-env production",npm_config_color:"true",npm_config_proxy:"",npm_config_package_lock:"true",npm_config__webassemblyjs_registry:"https://registry.npmjs.org",VSCODE_GIT_IPC_HANDLE:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T/vscode-git-49e2058bcb.sock",npm_config_package_lock_only:"",npm_config_fund:"true",npm_package_dependencies_react:"^18.1.0",npm_config_save_optional:"",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_ignore_scripts:"",npm_config_user_agent:"npm/6.14.8 node/v14.15.1 darwin x64",npm_config_cache_lock_wait:"10000",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code - Insiders.app/Contents/Frameworks/Code - Insiders Helper (Plugin).app/Contents/MacOS/Code - Insiders Helper (Plugin)",GIT_ASKPASS:"/Applications/Visual Studio Code - Insiders.app/Contents/Resources/app/extensions/git/dist/askpass.sh",npm_config_production:"",npm_package_files_1:"src",npm_config_send_metrics:"",npm_config_save_bundle:"",npm_package_dependencies_express:"^4.17.3",npm_package_files_0:"dist",npm_config_umask:"0022",npm_config_node_options:"",npm_config_init_version:"1.0.0",npm_config_init_author_name:"",npm_config_git:"git",npm_config_scope:"",npm_package_devDependencies_css_loader:"^6.5.1",npm_config_unsafe_perm:"true",npm_config_tmp:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T",npm_config_onload_script:"",npm_node_execpath:"/usr/local/bin/node",npm_config_prefix:"/usr/local",npm_config_link:"",npm_config_format_package_lock:"true",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",COLORTERM:"truecolor",NODE_ENV:"production",REACT_APP_TILE_SHAPE:"1-1",REACT_APP_THEME:"dark",REACT_APP_COLOR:"#2F80FF",REACT_APP_LOGO:"https://dopamine.fit/static/media/logo.b73d8f83491044d425df2cdba52bbc36.svg",REACT_APP_FONT:"Roboto",REACT_APP_SHOW_CHAT:"true",REACT_APP_SHOW_SCREENSHARE:"true",REACT_APP_VIDEO_AVATAR:"true",REACT_APP_HOST_NAME:"https://sessions.dopamine.fit",REACT_APP_PROD_BACKEND_API:"https://prod-in2.100ms.live/hmsapi/dopaminefit.app.100ms.live/",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/dopaminefit.app.100ms.live/",REACT_APP_ENV:"prod",REACT_APP_LOGROCKET_ID:"<Your Logrocket project ID>",REACT_APP_POLICY_CONFIG:"",REACT_APP_WEBINAR_PROPS:"{}",REACT_APP_DEFAULT_APP_DETAILS:"{}",REACT_APP_ENABLE_STATS_FOR_NERDS:"false",REACT_APP_PUSHER_APP_KEY:"",REACT_APP_PUSHER_AUTHENDPOINT:"",REACT_APP_HEADLESS_JOIN:"false"}.REACT_APP_AUDIO_PLAYLIST||"[]"),Ee=JSON.parse({npm_config_save_dev:"",npm_config_legacy_bundling:"",npm_config_dry_run:"",npm_package_dependencies_emoji_mart:"^5.1.0",npm_config_viewer:"man",npm_config_only:"",npm_config_commit_hooks:"true",npm_config_browser:"",npm_package_gitHead:"068b9d8e44c013d061fcfb7d5fa826d5efc7abef",npm_package_devDependencies_prettier:"^2.5.1",npm_config_also:"",npm_package_devDependencies_source_map_loader:"^3.0.1",npm_config_sign_git_commit:"",npm_config_rollback:"true",npm_package_devDependencies_cssnano:"^5.0.15",TERM_PROGRAM:"vscode",NODE:"/usr/local/bin/node",npm_config_usage:"",npm_config_audit:"true",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_package_dependencies_axios:"^0.26.1",npm_package_dependencies_logrocket_react:"^5.0.1",npm_config_globalignorefile:"/usr/local/etc/npmignore",TERM:"xterm-256color",SHELL:"/bin/zsh",npm_config_shell:"/bin/zsh",npm_config_maxsockets:"50",npm_config_init_author_url:"",npm_package_dependencies_eventemitter2:"^6.4.7",npm_config_shrinkwrap:"true",npm_config_parseable:"",npm_config_metrics_registry:"https://registry.npmjs.org/",npm_package_dependencies_react_freeze:"^1.0.0",npm_package_dependencies__100mslive_react_icons:"0.3.1-alpha.0",TMPDIR:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T/",npm_config_timing:"",npm_config_init_license:"ISC",npm_config_if_present:"",npm_package_dependencies_screenfull:"^5.1.0",TERM_PROGRAM_VERSION:"1.75.0-insider",npm_package_scripts_dev:"node ../../scripts/dev-webapp",npm_config_sign_git_tag:"",npm_config_init_author_email:"",npm_config_cache_max:"Infinity",npm_package_dependencies_uuid:"^8.3.2",ZDOTDIR:"/Users/rajesh",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",npm_config_preid:"",npm_config_long:"",npm_config_local_address:"",npm_config_git_tag_version:"true",npm_config_cert:"",npm_config_registry:"https://registry.npmjs.org/",npm_config_noproxy:"",npm_config_fetch_retries:"2",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_package_dependencies_react_dom:"^18.1.0",npm_config_versions:"",npm_config_message:"%s",npm_config_key:"",npm_package_readmeFilename:"README.md",npm_package_devDependencies_webpack:"^5.69.1",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_description:"eb deploy -l v-vid-20",USER:"rajesh",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/usr/local/etc/npmrc",npm_package_browserslist_development_1:"last 1 firefox version",npm_config_prefer_online:"",npm_config_logs_max:"10",npm_config_always_auth:"",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies_compression:"^1.7.4",npm_package_dependencies_logrocket:"^2.2.0",npm_package_dependencies__100mslive_hms_noise_suppression:"0.4.1",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.LGYNGI5OzU/Listeners",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",npm_config_global_style:"",npm_config_cache_lock_retries:"10",npm_package_dependencies__100mslive_react_ui:"0.3.1-alpha.0",npm_config_update_notifier:"true",npm_config_cafile:"",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.3.2",npm_config_heading:"npm",npm_config_audit_level:"low",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",npm_config_searchlimit:"20",npm_config_read_only:"",npm_config_offline:"",npm_config_fetch_retry_mintimeout:"10000",npm_config_json:"",npm_config_access:"",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["run","build"]}',PATH:"/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/rajesh/Projects/Bitroot/100ms-web-vidcall/node_modules/.bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin:/Users/rajesh/Flutter-Dev/flutter/bin:/Users/rajesh/Flutter-Dev/flutter/.pub-cache/bin:/Users/rajesh/Flutter-Dev/flutter/bin:/Users/rajesh/Flutter-Dev/flutter/.pub-cache/bin",npm_config_allow_same_version:"",npm_config_https_proxy:"",npm_config_engine_strict:"",npm_config_description:"true",npm_package_dependencies__tldraw_tldraw:"^1.5.0",_:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall/node_modules/.bin/webpack",npm_config_userconfig:"/Users/rajesh/.npmrc",npm_config_init_module:"/Users/rajesh/.npm-init.js",npm_package_browserslist_production_1:"not dead",USER_ZDOTDIR:"/Users/rajesh",__CFBundleIdentifier:"com.microsoft.VSCodeInsiders",npm_config_cidr:"",npm_package_browserslist_production_0:">0.2%",PWD:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall",npm_config_user:"",npm_config_node_version:"14.15.1",npm_package_dependencies__100mslive_react_sdk:"0.3.1-alpha.0",JAVA_HOME:"/Library/Java/JavaVirtualMachines/jdk1.8.0_311.jdk/Contents/Home",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",npm_config_save:"true",npm_config_ignore_prepublish:"",npm_config_editor:"vi",npm_config_auth_type:"legacy",npm_package_name:"100ms_edtech_template",LANG:"en_US.UTF-8",LOCAL_GIT_DIRECTORY:"/Applications/GitHub Desktop.app/Contents/Resources/app/git",npm_config_tag:"latest",npm_config_script_shell:"",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies_body_parser:"^1.19.2",npm_package_dependencies__100mslive_hms_virtual_background:"1.6.1-alpha.0",npm_config_progress:"true",npm_config_global:"",npm_config_before:"",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"node server.js",npm_package_scripts_build:"webpack --node-env production",npm_config_searchstaleness:"900",npm_config_optional:"true",npm_config_ham_it_up:"",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",XPC_FLAGS:"0x0",npm_config_save_prod:"",npm_config_force:"",npm_config_bin_links:"true",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_package_dependencies_crypto_js:"^4.1.1",npm_config_searchopts:"",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_config_depth:"Infinity",npm_package_main:"dist/index.cjs.js",npm_config_sso_poll_frequency:"500",npm_config_rebuild_bundle:"true",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.5",XPC_SERVICE_NAME:"0",npm_config_unicode:"true",npm_package_devDependencies_autoprefixer:"^10.4.2",VSCODE_INJECTION:"1",npm_package_dependencies_react_window:"^1.8.7",HOME:"/Users/rajesh",SHLVL:"2",npm_config_fetch_retry_maxtimeout:"60000",npm_package_dependencies_hls_js:"^1.1.1",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code - Insiders.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_config_tag_version_prefix:"v",npm_config_strict_ssl:"true",npm_config_sso_type:"oauth",npm_config_scripts_prepend_node_path:"warn-only",npm_config_save_prefix:"^",npm_config_loglevel:"notice",npm_config_ca:"",npm_config_save_exact:"",npm_config_group:"20",npm_config_fetch_retry_factor:"10",npm_config_dev:"",npm_package_dependencies__emoji_mart_data:"^1.0.3",npm_config_version:"",npm_config_prefer_offline:"",npm_config_cache_lock_stale:"60000",npm_config_otp:"",npm_config_cache_min:"10",npm_config_searchexclude:"",npm_config_cache:"/Users/rajesh/.npm",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",LOGNAME:"rajesh",npm_lifecycle_script:"webpack --node-env production",npm_config_color:"true",npm_config_proxy:"",npm_config_package_lock:"true",npm_config__webassemblyjs_registry:"https://registry.npmjs.org",VSCODE_GIT_IPC_HANDLE:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T/vscode-git-49e2058bcb.sock",npm_config_package_lock_only:"",npm_config_fund:"true",npm_package_dependencies_react:"^18.1.0",npm_config_save_optional:"",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_ignore_scripts:"",npm_config_user_agent:"npm/6.14.8 node/v14.15.1 darwin x64",npm_config_cache_lock_wait:"10000",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code - Insiders.app/Contents/Frameworks/Code - Insiders Helper (Plugin).app/Contents/MacOS/Code - Insiders Helper (Plugin)",GIT_ASKPASS:"/Applications/Visual Studio Code - Insiders.app/Contents/Resources/app/extensions/git/dist/askpass.sh",npm_config_production:"",npm_package_files_1:"src",npm_config_send_metrics:"",npm_config_save_bundle:"",npm_package_dependencies_express:"^4.17.3",npm_package_files_0:"dist",npm_config_umask:"0022",npm_config_node_options:"",npm_config_init_version:"1.0.0",npm_config_init_author_name:"",npm_config_git:"git",npm_config_scope:"",npm_package_devDependencies_css_loader:"^6.5.1",npm_config_unsafe_perm:"true",npm_config_tmp:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T",npm_config_onload_script:"",npm_node_execpath:"/usr/local/bin/node",npm_config_prefix:"/usr/local",npm_config_link:"",npm_config_format_package_lock:"true",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",COLORTERM:"truecolor",NODE_ENV:"production",REACT_APP_TILE_SHAPE:"1-1",REACT_APP_THEME:"dark",REACT_APP_COLOR:"#2F80FF",REACT_APP_LOGO:"https://dopamine.fit/static/media/logo.b73d8f83491044d425df2cdba52bbc36.svg",REACT_APP_FONT:"Roboto",REACT_APP_SHOW_CHAT:"true",REACT_APP_SHOW_SCREENSHARE:"true",REACT_APP_VIDEO_AVATAR:"true",REACT_APP_HOST_NAME:"https://sessions.dopamine.fit",REACT_APP_PROD_BACKEND_API:"https://prod-in2.100ms.live/hmsapi/dopaminefit.app.100ms.live/",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/dopaminefit.app.100ms.live/",REACT_APP_ENV:"prod",REACT_APP_LOGROCKET_ID:"<Your Logrocket project ID>",REACT_APP_POLICY_CONFIG:"",REACT_APP_WEBINAR_PROPS:"{}",REACT_APP_DEFAULT_APP_DETAILS:"{}",REACT_APP_ENABLE_STATS_FOR_NERDS:"false",REACT_APP_PUSHER_APP_KEY:"",REACT_APP_PUSHER_AUTHENDPOINT:"",REACT_APP_HEADLESS_JOIN:"false"}.REACT_APP_VIDEO_PLAYLIST||"[]");Ee.length>0&&r.videoPlaylist.setList(Ee),ae.length>0&&r.audioPlaylist.setList(ae)},[o,r]),!i)return null;let de;return i===H?de=y:_?de=P:(t&&t.id!==s?.id||a)&&!Y?de=te.Z:u===U.FU||p&&c===U.FU?de=v:de=ne,e.createElement(e.Suspense,{fallback:e.createElement(V.Z,null)},e.createElement(f.k,{css:{size:"100%",position:"relative"}},e.createElement(de,null),e.createElement(K.Z,null)))};var I=n(610),w=n(510),X=n(9660),R=n(455),W=n(1554),_e=n(8275),C=n(6079),g=n(4241),m=n(8703),k=n(8981),N=n(3510),B=n(7632),b=n(9024),O=n(8721),$=n(32),J=n(8953),Q=n(5873),oe=n(8565),le=n(9290),q=n(7097),ge=n(9953),Pe=(i,t,s)=>new Promise((a,_)=>{var o=c=>{try{p(s.next(c))}catch(u){_(u)}},r=c=>{try{p(s.throw(c))}catch(u){_(u)}},p=c=>c.done?a(c.value):Promise.resolve(c.value).then(o,r);p((s=s.apply(i,t)).next())});const xe=({onClick:i})=>{const t=(0,l._U)(d.on),s=(0,l._U)(d.AI),a=(0,l._U)(d.I3),_=(0,l._U)(d.fo),o=(0,l.cw)(),r=(0,$.Z)(le.vc.media.sm),p=z("selfRoleChangeTo"),c=(0,e.useMemo)(()=>(0,ge.tN)(p,t),[t,p]);return s.changeRole?r?e.createElement(b.L.Item,{onClick:i},e.createElement(J.Z,null),e.createElement(O.x,{variant:"sm",css:{mx:"$4"}},"Change My Role")):e.createElement(b.L.Root,null,e.createElement(b.L.TriggerItem,{"data-testid":"change_my_role_btn"},e.createElement(J.Z,null),e.createElement(O.x,{variant:"sm",css:{flex:"1 1 0",mx:"$4"}},"Change My Role"),e.createElement(Q.Z,null)),e.createElement(b.L.Content,{sideOffset:2,alignOffset:-5,css:{maxHeight:"$64"}},c.map((u,Y)=>e.createElement(b.L.Item,{key:u,css:{justifyContent:"space-between"},onClick:()=>Pe(void 0,null,function*(){try{yield o.changeRole(a,u,!0)}catch(H){q.y.addToast({title:H.message})}}),"data-testid":"change_to_role_"+u},e.createElement(O.x,{variant:"sm"},u),_===u&&e.createElement(oe.Z,{width:16,height:16}))))):null};var ee=n(7854),pe=n(8523),ie=n.n(pe),fe=(i,t,s)=>new Promise((a,_)=>{var o=c=>{try{p(s.next(c))}catch(u){_(u)}},r=c=>{try{p(s.throw(c))}catch(u){_(u)}},p=c=>c.done?a(c.value):Promise.resolve(c.value).then(o,r);p((s=s.apply(i,t)).next())});const Se=()=>{const[i,t]=(0,e.useState)(ie().isFullscreen),s=(0,e.useCallback)(()=>fe(void 0,null,function*(){if(!ie().isEnabled){q.y.addToast({title:"Fullscreen feature not supported"});return}try{i?yield ie().exit():yield ie().request()}catch(a){q.y.addToast({title:a.message})}}),[i]);return(0,e.useEffect)(()=>{const a=()=>{t(ie().isFullscreen)};return ie().isEnabled&&ie().on("change",a),()=>{ie().isEnabled&&ie().off("change",a)}},[]),{allowed:ie().isEnabled,isFullscreen:i,toggleFullscreen:s}},Re=()=>{const{allowed:i,isFullscreen:t,toggleFullscreen:s}=Se();return i?e.createElement(b.L.Item,{onClick:()=>{s()},"data-testid":"full_screen_btn"},e.createElement(ee.Z,null),e.createElement(O.x,{variant:"sm",css:{ml:"$4"}},t?"Exit ":"Go ","Fullscreen")):null};var ve=n(9111),en=n(198),ce=n(622),nn=n(7884),De=n(7688),Ne=n(3620),tn=Object.defineProperty,sn=Object.defineProperties,an=Object.getOwnPropertyDescriptors,Ve=Object.getOwnPropertySymbols,_n=Object.prototype.hasOwnProperty,on=Object.prototype.propertyIsEnumerable,He=(i,t,s)=>t in i?tn(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s,cn=(i,t)=>{for(var s in t||(t={}))_n.call(t,s)&&He(i,s,t[s]);if(Ve)for(var s of Ve(t))on.call(t,s)&&He(i,s,t[s]);return i},rn=(i,t)=>sn(i,an(t)),Fe=(i,t,s)=>new Promise((a,_)=>{var o=c=>{try{p(s.next(c))}catch(u){_(u)}},r=c=>{try{p(s.throw(c))}catch(u){_(u)}},p=c=>c.done?a(c.value):Promise.resolve(c.value).then(o,r);p((s=s.apply(i,t)).next())});const ln=({onOpenChange:i})=>{const[t,s]=(0,Ne.o4)(Ne.lN.PREVIEW),a=(0,l.cw)(),_=(0,l._U)(d.lA),[o,r]=(0,e.useState)(_),p=()=>Fe(void 0,null,function*(){const c=o.trim();if(!(!c||c===_))try{yield a.changeName(c),s(rn(cn({},t||{}),{name:c}))}catch(u){console.error("failed to update name",u),q.y.addToast({title:u.message})}finally{i(!1)}});return e.createElement(ce.V.Root,{defaultOpen:!0,onOpenChange:i},e.createElement(ce.V.Portal,null,e.createElement(ce.V.Overlay,null),e.createElement(ce.V.Content,{css:{width:"min(400px,80%)",p:"$10"}},e.createElement(ce.V.Title,{css:{p:"0 $4"}},e.createElement(O.x,{variant:"h6"}," Change Name")),e.createElement("form",{onSubmit:c=>{c.preventDefault()}},e.createElement(f.k,{justify:"center",align:"center",css:{my:"$8",w:"100%"}},e.createElement(nn.I,{css:{width:"100%"},value:o,onChange:c=>{r(c.target.value)},autoComplete:"name",required:!0,"data-testid":"change_name_field"})),e.createElement(f.k,{justify:"between",align:"center",css:{width:"100%",gap:"$md",mt:"$10"}},e.createElement(T.x,{css:{w:"50%"}},e.createElement(ce.V.Close,{css:{w:"100%"}},e.createElement(De.z,{variant:"standard",css:{w:"100%"},outlined:!0,type:"submit",disabled:!_},"Cancel"))),e.createElement(T.x,{css:{w:"50%"}},e.createElement(De.z,{variant:"primary",css:{width:"100%"},type:"submit",disabled:!o.trim()||o.trim()===_,onClick:()=>Fe(void 0,null,function*(){yield p()}),"data-testid":"popup_change_btn"},"Change")))))))};var pn=n(7273),mn=n(1118),Le=n(6081),dn=n(4634),gn=n(4791);const un=({onOpenChange:i})=>{var t;const s=fn(),a=(0,e.useMemo)(()=>[{id:"local-peer",label:"Local Peer Stats"},...s],[s]),[_,o]=(0,e.useState)("local-peer"),[r,p]=(0,M.iz)(U.JZ.showStatsOnTiles),[c,u]=(0,e.useState)(!1),Y=(0,gn.s)();return(0,e.useEffect)(()=>{_!=="local-peer"&&!s.find(H=>H.id===_)&&o("local-peer")},[s,_]),e.createElement(ce.V.Root,{defaultOpen:!0,onOpenChange:i},e.createElement(ce.V.Portal,null,e.createElement(ce.V.Overlay,null),e.createElement(ce.V.Content,{css:{width:"min(500px, 95%)"}},e.createElement(ce.V.Title,{css:{p:"$4 0"}},e.createElement(f.k,{justify:"between"},e.createElement(f.k,{align:"center",css:{mb:"$1"}},e.createElement(O.x,{variant:"h6",inline:!0},"Stats For Nerds")),e.createElement(ce.V.DefaultClose,{"data-testid":"stats_dialog_close_icon"}))),e.createElement(pn.E,{css:{mt:"0.8rem"}}),e.createElement(f.k,{justify:"start",gap:4,css:{m:"$10 0"}},e.createElement(mn.r,{checked:r,onCheckedChange:p}),e.createElement(O.x,{variant:"body2",css:{fontWeight:"$semiBold"}},"Show Stats on Tiles")),e.createElement(f.k,{direction:"column",css:{mb:"$12",position:"relative",minWidth:0,"[data-radix-popper-content-wrapper]":{w:"100%",minWidth:"0 !important",mt:"$4",transform:"translateY($space$20) !important",zIndex:11}}},e.createElement(Le._,{variant:"body2"},"Stats For"),e.createElement(b.L.Root,{"data-testid":"dialog_select_Stats For",open:c,onOpenChange:u},e.createElement(dn.l,{title:((t=a.find(({id:H})=>H===_))==null?void 0:t.label)||"Select Stats",css:{mt:"$4"},open:c}),e.createElement(b.L.Content,{align:"start",sideOffset:8,css:{w:"100%"},portalled:!1},a.map(H=>e.createElement(b.L.Item,{key:H.id,onClick:()=>{o(H.id)},css:{bg:H.id===_?Y:void 0,c:H.id===_?"$white":"$textPrimary"}},H.label))))),_==="local-peer"?e.createElement(vn,null):e.createElement(En,{trackID:_}))))},fn=()=>{const i=(0,l._U)(d.zK),t=(0,l._U)(d.iZ);return(0,e.useMemo)(()=>Object.values(i).map(a=>{var _;const o=(_=t[a.peerId])==null?void 0:_.name;return{id:a.id,label:`${o} ${a.source} ${a.type}`}}),[i,t])},vn=()=>{var i,t,s,a,_,o;const r=(0,l.p5)(d.fA.localPeerStats);return r?e.createElement(f.k,{css:{flexWrap:"wrap",gap:"$10"}},e.createElement(me,{label:"Packets Lost",value:(i=r.subscribe)==null?void 0:i.packetsLost}),e.createElement(me,{label:"Jitter",value:(t=r.subscribe)==null?void 0:t.jitter}),e.createElement(me,{label:"Publish Bitrate",value:ke((s=r.publish)==null?void 0:s.bitrate,"b/s")}),e.createElement(me,{label:"Subscribe Bitrate",value:ke((a=r.subscribe)==null?void 0:a.bitrate,"b/s")}),e.createElement(me,{label:"Total Bytes Sent",value:ke((_=r.publish)==null?void 0:_.bytesSent)}),e.createElement(me,{label:"Total Bytes Received",value:ke((o=r.subscribe)==null?void 0:o.bytesReceived)})):null},En=({trackID:i})=>{const t=(0,l.p5)(d.fA.trackStatsByID(i));if(!t)return null;const s=t.type.includes("inbound");return e.createElement(f.k,{css:{flexWrap:"wrap",gap:"$10"}},e.createElement(me,{label:"Type",value:t.type+" "+t.kind}),e.createElement(me,{label:"Bitrate",value:ke(t.bitrate,"b/s")}),e.createElement(me,{label:"Packets Lost",value:t.packetsLost||"-"}),e.createElement(me,{label:"Jitter",value:t.jitter||"-"}),e.createElement(me,{label:s?"Bytes Received":"Bytes Sent",value:ke(s?t.bytesReceived:t.bytesSent)}),t.kind==="video"&&e.createElement(e.Fragment,null,e.createElement(me,{label:"Framerate",value:t.framesPerSecond}),!s&&e.createElement(me,{label:"Quality Limitation Reason",value:t.qualityLimitationReason||"-"})))},me=({label:i,value:t})=>e.createElement(T.x,{css:{bg:"$surfaceLight",w:"calc(50% - $6)",p:"$8",r:"$3"}},e.createElement(O.x,{variant:"overline",css:{fontWeight:"$semiBold",color:"$textMedEmp",textTransform:"uppercase"}},i," "),e.createElement(O.x,{variant:"sub1",css:{fontWeight:"$semiBold",color:"$textHighEmp"}},t)),ke=(i,t="B",s=2)=>{if(i===0)return"0 "+t;const a=1024,_=s<0?0:s,o=["","K","M","G","T","P","E","Z","Y"].map(p=>p+t),r=Math.floor(Math.log(i)/Math.log(a));return parseFloat((i/Math.pow(a,r)).toFixed(_))+" "+o[r]};var ye=n(8673),hn=(i,t,s)=>new Promise((a,_)=>{var o=c=>{try{p(s.next(c))}catch(u){_(u)}},r=c=>{try{p(s.throw(c))}catch(u){_(u)}},p=c=>c.done?a(c.value):Promise.resolve(c.value).then(o,r);p((s=s.apply(i,t)).next())});const Pn=[{label:"All Track Sources",value:""},{label:"regular",value:"regular"},{label:"screen",value:"screen"},{label:"audioplaylist",value:"audioplaylist"},{label:"videoplaylist",value:"videoplaylist"}],An=[{label:"All Track Types",value:""},{label:"audio",value:"audio"},{label:"video",value:"video"}],kn=({onOpenChange:i})=>{const t=(0,l._U)(d.on),s=(0,l.cw)(),[a,_]=(0,e.useState)(!1),[o,r]=(0,e.useState)(),[p,c]=(0,e.useState)(),[u,Y]=(0,e.useState)(),H=(0,e.useCallback)(()=>hn(void 0,null,function*(){yield s.setRemoteTracksEnabled({enabled:a,type:o,source:u,roles:p?[p]:void 0}),i(!1)}),[p,a,o,u,s,i]);return e.createElement(ce.V.Root,{defaultOpen:!0,onOpenChange:i},e.createElement(S.cZ,{title:"Mute/Unmute Remote Tracks",Icon:k.Z},e.createElement(S.z2,{title:"Role",options:[{label:"All Roles",value:""},...t.map(de=>({label:de,value:de}))],selected:p,keyField:"value",labelField:"label",onChange:c}),e.createElement(S.z2,{title:"Track type",options:An,selected:o,onChange:r,keyField:"value",labelField:"label"}),e.createElement(S.z2,{title:"Track source",options:Pn,selected:u,onChange:Y,keyField:"value",labelField:"label"}),e.createElement(S.DP,null,e.createElement(O.x,{variant:"md"},"Track status"),e.createElement(ye.E.Root,{value:a,onValueChange:_},e.createElement(f.k,{align:"center",css:{mr:"$8"}},e.createElement(ye.E.Item,{value:!1,id:"trackDisableRadio",css:{mr:"$4"}},e.createElement(ye.E.Indicator,null)),e.createElement(Le._,{htmlFor:"trackDisableRadio"},"Mute")),e.createElement(f.k,{align:"center",css:{cursor:"pointer"}},e.createElement(ye.E.Item,{value:!0,id:"trackEnableRadio",css:{mr:"$4"}},e.createElement(ye.E.Indicator,null)),e.createElement(Le._,{htmlFor:"trackEnableRadio"},"Request Unmute")))),e.createElement(S.DP,{justify:"end"},e.createElement(De.z,{variant:"primary",onClick:H},"Apply"))))};var Oe=n(9478),he=n(7777);const Be=()=>{const i=(0,l._U)(d.AI),t=(0,l._U)(d.I3),[s,a]=(0,e.useState)(!1),[_,o]=(0,e.useState)(!1),[r,p]=(0,e.useState)(!1),[c,u]=(0,e.useState)(!1),[Y,H]=(0,e.useState)(!1),[de,ae]=(0,e.useState)(!1);return e.createElement(e.Fragment,null,e.createElement(b.L.Root,{open:s,onOpenChange:a},e.createElement(b.L.Trigger,{asChild:!0,"data-testid":"more_settings_btn"},e.createElement(he.Z,null,e.createElement(R.u,{title:"More options"},e.createElement(T.x,null,e.createElement(g.Z,null))))),e.createElement(b.L.Content,{sideOffset:5,align:"center",css:{maxHeight:"$96","@md":{w:"$64"}}},e.createElement(b.L.Item,{onClick:()=>o(Ee=>!Ee),"data-testid":"change_name_btn"},e.createElement(m.Z,null),e.createElement(O.x,{variant:"sm",css:{ml:"$4"}},"Change Name")),e.createElement(xe,{onClick:()=>ae(!0)}),e.createElement(Re,null),i.mute&&e.createElement(b.L.Item,{onClick:()=>p(!0),"data-testid":"mute_all_btn"},e.createElement(k.Z,null),e.createElement(O.x,{variant:"sm",css:{ml:"$4"}},"Mute All")),e.createElement(b.L.ItemSeparator,null),e.createElement(b.L.Item,{onClick:()=>u(!0),"data-testid":"device_settings_btn"},e.createElement(N.Z,null),e.createElement(O.x,{variant:"sm",css:{ml:"$4"}},"Settings")),Oe.T.enableStatsForNerds&&e.createElement(b.L.Item,{onClick:()=>H(!0),"data-testid":"stats_for_nreds_btn"},e.createElement(B.Z,null),e.createElement(O.x,{variant:"sm",css:{ml:"$4"}},"Stats for Nerds")))),r&&e.createElement(kn,{onOpenChange:p}),_&&e.createElement(ln,{onOpenChange:o}),c&&e.createElement(ve.Z,{open:!0,onOpenChange:u}),Oe.T.enableStatsForNerds&&Y&&e.createElement(un,{open:Y,onOpenChange:H}),de&&e.createElement(en.t,{peerId:t,onOpenChange:ae}))};var bn=n(4685),Ue=n(8160);const $e=({css:i})=>{const t=(0,l._U)(d.xf),s=(0,M.L3)(U.JZ.isAudioOnly),{amIScreenSharing:a,screenShareVideoTrackId:_,toggleScreenShare:o}=(0,X.N)(),r=a&&!!_;return!t.screen||!(0,ge.Lo)()?null:Ue.createElement(R.u,{title:`${r?"Stop":"Start"} screen sharing`},Ue.createElement(he.Z,{active:!r,css:i,disabled:s,onClick:()=>{o()},"data-testid":"screen_share_btn"},Ue.createElement(bn.Z,null)))},Tn=({onClose:i})=>{const t=(0,l.cw)();return e.createElement(ce.V.Root,{defaultOpen:!0,onOpenChange:s=>!s&&i()},e.createElement(S.cZ,{title:"AudioOnly Screenshare"},e.createElement("img",{src:"/share-audio.png",alt:"AudioOnly Screenshare instructions"}),e.createElement(S.DP,{justify:"end"},e.createElement(De.z,{variant:"primary",onClick:()=>{t.setScreenShareEnabled(!0,!0),i()},"data-testid":"audio_screenshare_continue"},"Continue"))))};var Cn=n(1182),Ge=n(5106);function Sn(i,t){let s=i.filter(Y=>Y.srcObject!==null).length;const a=t.getContext("2d");a.fillStyle="#000000";const _=t.width,o=t.height;if(s===0){a.fillRect(0,0,_,o);return}else if(s===1||s===2){a.drawImage(i[0],0,0,_,o);return}const r=s<=2?1:2,p=Number(Math.ceil(s/r)),c=o/r,u=_/p;yn(r,p,c,u,i,a)}function Rn(i){const t=i.getContext("2d");t.fillStyle="#000000";const s=i.width,a=i.height;t.fillRect(0,0,s,a)}function yn(i,t,s,a,_,o){let r=0;for(let p=0;p<i;p++){const c=p*s;for(let u=0;u<t;u++){const Y=u*a,H=_[r];!H||H.srcObject===null?o.fillRect(Y,c,a,s):o.drawImage(H,Y,c,a,s),r++}}}var On=Object.defineProperty,Dn=(i,t,s)=>t in i?On(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s,In=(i,t,s)=>(Dn(i,typeof t!="symbol"?t+"":t,s),s),Ae=(i,t,s)=>new Promise((a,_)=>{var o=c=>{try{p(s.next(c))}catch(u){_(u)}},r=c=>{try{p(s.throw(c))}catch(u){_(u)}},p=c=>c.done?a(c.value):Promise.resolve(c.value).then(o,r);p((s=s.apply(i,t)).next())});const Ke=4,Mn=30,xn=900,Ln=600,We="leavepictureinpicture",ue={starting:"starting",started:"started",stopping:"stopping",stopped:"stopped"};class Un{constructor(){In(this,"stop",()=>Ae(this,null,function*(){var t;this.state!==ue.stopped&&(this.state=ue.stopping,(t=this.pipVideo)==null||t.removeEventListener(We,this.stop),this.timeoutRef&&Ge.gr(this.timeoutRef),this.isOn()&&this.exitPIP(),yield this.detachOldAttachNewTracks(this.tracksToShow,[]),this.onStateChange(!1),this.reset(),this.state=ue.stopped)})),this.reset()}reset(){console.debug("resetting PIP state"),this.canvas=null,this.pipVideo=null,this.timeoutRef=null,this.hmsActions=null,this.videoElements=[],this.tracksToShow=[],this.onStateChange=()=>{},this.state=ue.stopped}isSupported(){return!!document.pictureInPictureEnabled}isOn(){return!!document.pictureInPictureElement}start(t,s){return Ae(this,null,function*(){if(!this.isSupported())throw new Error("pip is not supported on this browser");if(console.debug("starting PIP, current state",this.state),this.state===ue.started)yield this.stop();else if(this.state===ue.starting)return;this.state=ue.starting;try{yield this.init(t,s),this.pipVideo.addEventListener(We,this.stop),this.renderLoop(),this.isOn()||(yield this.requestPIP()),console.debug("pip started"),this.state=ue.started,this.onStateChange(!0)}catch(a){console.error("error in request pip",a),this.state=ue.stopped}})}updatePeersAndTracks(t,s){return Ae(this,null,function*(){if(!this.canvas)return;const a=this.pickTracksToShow(t,s),_=this.tracksToShow;this.tracksToShow=this.orderNewTracksToShow(a,_);try{yield this.detachOldAttachNewTracks(_,this.tracksToShow,s)}catch(o){console.error("error in detaching/attaching tracks",o)}})}init(t,s){return Ae(this,null,function*(){yield this.initMediaElements(),this.hmsActions=t,this.onStateChange=s})}initMediaElements(){return Ae(this,null,function*(){if(!this.canvas){const{canvas:t,pipVideo:s}=this.initializeCanvasAndVideoElement();this.canvas=t,this.pipVideo=s,this.videoElements=this.initializeVideoElements();const a=this.pipVideo.play();Rn(this.canvas),yield a}})}initializeCanvasAndVideoElement(){const t=document.createElement("canvas");t.width=xn,t.height=Ln;const s=document.createElement("video");return s.muted=!0,s.srcObject=t.captureStream(),{canvas:t,pipVideo:s}}initializeVideoElements(){let t=[];for(let s=0;s<Ke;s++){const a=document.createElement("video");a.autoplay=!0,a.playsinline=!0,t.push(a)}return t}renderLoop(){const t=1e3/Mn;this.timeoutRef=Ge.iK(()=>{this.state===ue.stopping||this.state===ue.stopped||(this.state===ue.started&&Sn(this.videoElements,this.canvas),this.renderLoop())},t)}requestPIP(){return Ae(this,null,function*(){try{this.isOn()&&this.exitPIP(),yield this.pipVideo.requestPictureInPicture()}catch(t){throw console.error("error in requestpip",t,"state",this.state),t}})}exitPIP(){document.exitPictureInPicture()}pickTracksToShow(t,s){var a;const _=[];for(const o of t){if(_.length===Ke)break;o.videoTrack&&((a=s[o.videoTrack])==null?void 0:a.enabled)&&_.push(o.videoTrack)}return _}orderNewTracksToShow(t,s){const a=[],_=[];t.forEach(o=>{const r=s.indexOf(o);r!==-1&&r<t.length?a[r]=o:_.push(o)});for(let o=0;o<t.length;o++)a[o]||(a[o]=_.shift());return a}detachOldAttachNewTracks(t,s,a=null){return Ae(this,null,function*(){const _=Math.max(t.length,s.length);for(let o=0;o<_;o++)t[o]!==s[o]&&(t[o]&&((!a||a[t[o]])&&(yield this.hmsActions.detachVideo(t[o],this.videoElements[o])),this.videoElements[o]&&(this.videoElements[o].srcObject=null)),s[o]&&(yield this.hmsActions.attachVideo(s[o],this.videoElements[o])))})}}const be=new Un;var jn=Object.defineProperty,wn=(i,t,s)=>t in i?jn(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s,Te=(i,t,s)=>(wn(i,typeof t!="symbol"?t+"":t,s),s),Ze=(i,t,s)=>new Promise((a,_)=>{var o=c=>{try{p(s.next(c))}catch(u){_(u)}},r=c=>{try{p(s.throw(c))}catch(u){_(u)}},p=c=>c.done?a(c.value):Promise.resolve(c.value).then(o,r);p((s=s.apply(i,t)).next())});class Nn{constructor(){Te(this,"setup",(t,s)=>{this.actions=t,this.store=s,this.initState(),this.setUpHandlers()}),Te(this,"initState",()=>{var t,s,a,_;const o=this.store.getState(d.uX),r=this.store.getState(d.um);(s=(t=navigator.mediaSession)==null?void 0:t.setMicrophoneActive)==null||s.call(t,o),(_=(a=navigator.mediaSession)==null?void 0:a.setCameraActive)==null||_.call(a,r),this.store.subscribe(p=>{var c,u;(u=(c=navigator.mediaSession)==null?void 0:c.setMicrophoneActive)==null||u.call(c,p)},d.uX),this.store.subscribe(p=>{var c,u;(u=(c=navigator.mediaSession)==null?void 0:c.setCameraActive)==null||u.call(c,p)},d.um)}),Te(this,"toggleMic",()=>Ze(this,null,function*(){console.log("toggle mic clicked in pip");const t=this.store.getState(d.uX);yield this.actions.setLocalAudioEnabled(!t)})),Te(this,"toggleCam",()=>Ze(this,null,function*(){console.log("toggle cam clicked in pip");const t=this.store.getState(d.um);yield this.actions.setLocalVideoEnabled(!t)})),Te(this,"leave",()=>{console.log("leave called from pip"),this.actions.leave()}),Te(this,"setUpHandlers",()=>{if(navigator.mediaSession)try{navigator.mediaSession.setActionHandler("togglemicrophone",this.toggleMic),navigator.mediaSession.setActionHandler("togglecamera",this.toggleCam),navigator.mediaSession.setActionHandler("hangup",this.leave)}catch(t){console.error("error in setting media session handlers",t)}})}}const Vn=new Nn,Hn=()=>{const i=(0,l._U)(d.fo),[t,s]=(0,e.useState)(be.isOn()),a=(0,l.cw)(),_=(0,l.gg)(),o=(0,e.useCallback)(()=>{t?be.stop().catch(r=>console.error("error in stopping pip",r)):(be.start(a,s).catch(r=>console.error("error in starting pip",r)),Vn.setup(a,_))},[a,t,_]);return(0,e.useEffect)(()=>()=>{be.stop().catch(r=>console.error("error in stopping pip on unmount",r))},[]),!be.isSupported()||i===U.Pj?null:e.createElement(e.Fragment,null,e.createElement(R.u,{title:`${t?"Deactivate":"Activate"} picture in picture view`},e.createElement(he.Z,{active:!t,key:"pip",onClick:()=>o(),"data-testid":"pip_btn"},e.createElement(Cn.Z,null))),t&&e.createElement(Fn,{setIsPipOn:s}))},Fn=()=>{const i=(0,l._U)(d.zK),t=(0,l._U)(d.LY);return(0,e.useEffect)(()=>{be.updatePeersAndTracks(t,i).catch(s=>{console.error("error in updating pip",s)})},[i,t]),null},ze=Hn;var je=n(1243),Bn=n(9156),$n=n(370),Je=n(3600),Ie=n(8160);const Me=()=>{const i=(0,l._U)(d.SI),t=(0,Je.fg)(U.yb.CHAT),s=(0,Je.Jp)(U.yb.CHAT);return Ie.createElement(R.u,{key:"chat",title:`${t?"Close":"Open"} chat`},Ie.createElement(he.Z,{onClick:s,active:!t,"data-testid":"chat_btn"},i===0?Ie.createElement(Bn.Z,null):Ie.createElement($n.Z,{"data-testid":"chat_unread_btn"})))};var Gn=n(6722),Kn=n(8287),Wn=n(9057);function Zn(i){if(!i)return"";let t=Math.floor(i/60);t<10&&(t=`0${String(t)}`);let s=Math.floor(i%60);return s<10&&(s=`0${String(s)}`),`${t}:${s}`}const zn=e.memo(({name:i,metadata:t,duration:s,selected:a,onClick:_})=>e.createElement(b.L.Item,{css:{flexDirection:"column",alignItems:"flex-start",h:"$18",p:"$8","&:hover":{cursor:"pointer",bg:"$menuBg"},"&:focus-visible":{bg:"$menuBg"}},onClick:_},e.createElement(f.k,{align:"center",justify:"between",css:{width:"100%",minHeight:0}},e.createElement(O.x,{variant:"md",css:{color:a?"$brandDefault":"$textPrimary"}},i),e.createElement(O.x,{variant:"xs"},Zn(s))),t?.description&&e.createElement(O.x,{variant:"xs",css:{mt:"$4"}},t?.description)));var Jn=n(9990),Yn=n(8961),Xn=Object.defineProperty,Qn=Object.defineProperties,qn=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,et=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,Xe=(i,t,s)=>t in i?Xn(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s,tt=(i,t)=>{for(var s in t||(t={}))et.call(t,s)&&Xe(i,s,t[s]);if(Ye)for(var s of Ye(t))nt.call(t,s)&&Xe(i,s,t[s]);return i},st=(i,t)=>Qn(i,qn(t)),Qe=(i,t,s)=>new Promise((a,_)=>{var o=c=>{try{p(s.next(c))}catch(u){_(u)}},r=c=>{try{p(s.throw(c))}catch(u){_(u)}},p=c=>c.done?a(c.value):Promise.resolve(c.value).then(o,r);p((s=s.apply(i,t)).next())});const it=({type:i,actions:t})=>e.createElement(e.Fragment,null,e.createElement(O.x,{as:"label",htmlFor:`${i}PlaylistBrowse`,variant:"sm",css:{cursor:"pointer",mr:"$2"}},"Browse"),e.createElement("input",{type:"file",id:`${i}PlaylistBrowse`,accept:i===d.Mv.audio?"audio/*":"video/*",onChange:s=>{const a=s.target.files[0],_=a.lastModified;t.setList([{type:i,id:_,name:a.name,url:URL.createObjectURL(a)}]),t.play(_)},style:{display:"none"}})),qe=({type:i})=>{const t=i===d.Mv.audio,{active:s,list:a,actions:_}=(0,Yn.Z)(i),[o,r]=(0,e.useState)(!1),[p,c]=(0,e.useState)(!1);return!(0,l._U)(d.xf).screen||a.length===0?null:e.createElement(e.Fragment,null,e.createElement(b.L.Root,{open:o,onOpenChange:r},e.createElement(b.L.Trigger,{asChild:!0,"data-testid":i===d.Mv.audio?"audio_playlist":"video_playlist"},e.createElement(he.Z,{active:!s},e.createElement(R.u,{title:t?"Audio Playlist":"Video Playlist"},e.createElement(T.x,null,t?e.createElement(Gn.Z,null):e.createElement(Kn.Z,null))))),e.createElement(b.L.Content,{sideOffset:5,align:"center",css:{maxHeight:"unset",width:"$60",p:"$0",bg:"$bgSecondary",border:"1px solid $menuBg"}},e.createElement(f.k,{align:"center",css:{p:"$4 $8",borderBottom:"1px solid $borderLight",bg:"$menuBg"}},e.createElement(O.x,{variant:"md",css:{flex:"1 1 0"}},t?"Audio Player":"Video Playlist"),e.createElement(it,{type:i,actions:_}),e.createElement(he.Z,{css:{mr:"-$4"},onClick:()=>Qe(void 0,null,function*(){s&&(yield _.stop()),r(!1),c(!1)})},e.createElement(Wn.Z,{width:24,height:24}))),!p&&e.createElement(T.x,{css:{maxHeight:"$96",overflowY:"auto"}},a.map(Y=>e.createElement(zn,st(tt({key:Y.id},Y),{onClick:H=>Qe(void 0,null,function*(){H.preventDefault(),yield _.play(Y.id),t||r(!1)})})))),t&&e.createElement(Jn.iS,{onToggle:()=>c(Y=>!Y)}))))};var at=n(550),_t=n(1290),we=n(8160),Ce=(i,t,s)=>new Promise((a,_)=>{var o=c=>{try{p(s.next(c))}catch(u){_(u)}},r=c=>{try{p(s.throw(c))}catch(u){_(u)}},p=c=>c.done?a(c.value):Promise.resolve(c.value).then(o,r);p((s=s.apply(i,t)).next())});const ot=()=>{const i=(0,e.useRef)(null),t=(0,l.cw)(),[s,a]=(0,e.useState)(!1),[_,o]=(0,e.useState)(!1),r=(0,l._U)((0,d.fC)("@100mslive/hms-noise-suppression")),{selectedDeviceIDs:p}=(0,at.L)(),c=r&&!s,u=(0,e.useCallback)(()=>Ce(void 0,null,function*(){if(!i.current){const{HMSNoiseSuppressionPlugin:ae}=yield Promise.all([n.e(53),n.e(301)]).then(n.bind(n,2053));i.current=new ae({npm_config_save_dev:"",npm_config_legacy_bundling:"",npm_config_dry_run:"",npm_package_dependencies_emoji_mart:"^5.1.0",npm_config_viewer:"man",npm_config_only:"",npm_config_commit_hooks:"true",npm_config_browser:"",npm_package_gitHead:"068b9d8e44c013d061fcfb7d5fa826d5efc7abef",npm_package_devDependencies_prettier:"^2.5.1",npm_config_also:"",npm_package_devDependencies_source_map_loader:"^3.0.1",npm_config_sign_git_commit:"",npm_config_rollback:"true",npm_package_devDependencies_cssnano:"^5.0.15",TERM_PROGRAM:"vscode",NODE:"/usr/local/bin/node",npm_config_usage:"",npm_config_audit:"true",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_package_dependencies_axios:"^0.26.1",npm_package_dependencies_logrocket_react:"^5.0.1",npm_config_globalignorefile:"/usr/local/etc/npmignore",TERM:"xterm-256color",SHELL:"/bin/zsh",npm_config_shell:"/bin/zsh",npm_config_maxsockets:"50",npm_config_init_author_url:"",npm_package_dependencies_eventemitter2:"^6.4.7",npm_config_shrinkwrap:"true",npm_config_parseable:"",npm_config_metrics_registry:"https://registry.npmjs.org/",npm_package_dependencies_react_freeze:"^1.0.0",npm_package_dependencies__100mslive_react_icons:"0.3.1-alpha.0",TMPDIR:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T/",npm_config_timing:"",npm_config_init_license:"ISC",npm_config_if_present:"",npm_package_dependencies_screenfull:"^5.1.0",TERM_PROGRAM_VERSION:"1.75.0-insider",npm_package_scripts_dev:"node ../../scripts/dev-webapp",npm_config_sign_git_tag:"",npm_config_init_author_email:"",npm_config_cache_max:"Infinity",npm_package_dependencies_uuid:"^8.3.2",ZDOTDIR:"/Users/rajesh",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",npm_config_preid:"",npm_config_long:"",npm_config_local_address:"",npm_config_git_tag_version:"true",npm_config_cert:"",npm_config_registry:"https://registry.npmjs.org/",npm_config_noproxy:"",npm_config_fetch_retries:"2",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_package_dependencies_react_dom:"^18.1.0",npm_config_versions:"",npm_config_message:"%s",npm_config_key:"",npm_package_readmeFilename:"README.md",npm_package_devDependencies_webpack:"^5.69.1",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_description:"eb deploy -l v-vid-20",USER:"rajesh",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/usr/local/etc/npmrc",npm_package_browserslist_development_1:"last 1 firefox version",npm_config_prefer_online:"",npm_config_logs_max:"10",npm_config_always_auth:"",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies_compression:"^1.7.4",npm_package_dependencies_logrocket:"^2.2.0",npm_package_dependencies__100mslive_hms_noise_suppression:"0.4.1",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.LGYNGI5OzU/Listeners",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",npm_config_global_style:"",npm_config_cache_lock_retries:"10",npm_package_dependencies__100mslive_react_ui:"0.3.1-alpha.0",npm_config_update_notifier:"true",npm_config_cafile:"",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.3.2",npm_config_heading:"npm",npm_config_audit_level:"low",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",npm_config_searchlimit:"20",npm_config_read_only:"",npm_config_offline:"",npm_config_fetch_retry_mintimeout:"10000",npm_config_json:"",npm_config_access:"",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["run","build"]}',PATH:"/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/rajesh/Projects/Bitroot/100ms-web-vidcall/node_modules/.bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin:/Users/rajesh/Flutter-Dev/flutter/bin:/Users/rajesh/Flutter-Dev/flutter/.pub-cache/bin:/Users/rajesh/Flutter-Dev/flutter/bin:/Users/rajesh/Flutter-Dev/flutter/.pub-cache/bin",npm_config_allow_same_version:"",npm_config_https_proxy:"",npm_config_engine_strict:"",npm_config_description:"true",npm_package_dependencies__tldraw_tldraw:"^1.5.0",_:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall/node_modules/.bin/webpack",npm_config_userconfig:"/Users/rajesh/.npmrc",npm_config_init_module:"/Users/rajesh/.npm-init.js",npm_package_browserslist_production_1:"not dead",USER_ZDOTDIR:"/Users/rajesh",__CFBundleIdentifier:"com.microsoft.VSCodeInsiders",npm_config_cidr:"",npm_package_browserslist_production_0:">0.2%",PWD:"/Users/rajesh/Projects/Bitroot/100ms-web-vidcall",npm_config_user:"",npm_config_node_version:"14.15.1",npm_package_dependencies__100mslive_react_sdk:"0.3.1-alpha.0",JAVA_HOME:"/Library/Java/JavaVirtualMachines/jdk1.8.0_311.jdk/Contents/Home",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",npm_config_save:"true",npm_config_ignore_prepublish:"",npm_config_editor:"vi",npm_config_auth_type:"legacy",npm_package_name:"100ms_edtech_template",LANG:"en_US.UTF-8",LOCAL_GIT_DIRECTORY:"/Applications/GitHub Desktop.app/Contents/Resources/app/git",npm_config_tag:"latest",npm_config_script_shell:"",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies_body_parser:"^1.19.2",npm_package_dependencies__100mslive_hms_virtual_background:"1.6.1-alpha.0",npm_config_progress:"true",npm_config_global:"",npm_config_before:"",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"node server.js",npm_package_scripts_build:"webpack --node-env production",npm_config_searchstaleness:"900",npm_config_optional:"true",npm_config_ham_it_up:"",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",XPC_FLAGS:"0x0",npm_config_save_prod:"",npm_config_force:"",npm_config_bin_links:"true",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_package_dependencies_crypto_js:"^4.1.1",npm_config_searchopts:"",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_config_depth:"Infinity",npm_package_main:"dist/index.cjs.js",npm_config_sso_poll_frequency:"500",npm_config_rebuild_bundle:"true",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.5",XPC_SERVICE_NAME:"0",npm_config_unicode:"true",npm_package_devDependencies_autoprefixer:"^10.4.2",VSCODE_INJECTION:"1",npm_package_dependencies_react_window:"^1.8.7",HOME:"/Users/rajesh",SHLVL:"2",npm_config_fetch_retry_maxtimeout:"60000",npm_package_dependencies_hls_js:"^1.1.1",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code - Insiders.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_config_tag_version_prefix:"v",npm_config_strict_ssl:"true",npm_config_sso_type:"oauth",npm_config_scripts_prepend_node_path:"warn-only",npm_config_save_prefix:"^",npm_config_loglevel:"notice",npm_config_ca:"",npm_config_save_exact:"",npm_config_group:"20",npm_config_fetch_retry_factor:"10",npm_config_dev:"",npm_package_dependencies__emoji_mart_data:"^1.0.3",npm_config_version:"",npm_config_prefer_offline:"",npm_config_cache_lock_stale:"60000",npm_config_otp:"",npm_config_cache_min:"10",npm_config_searchexclude:"",npm_config_cache:"/Users/rajesh/.npm",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",LOGNAME:"rajesh",npm_lifecycle_script:"webpack --node-env production",npm_config_color:"true",npm_config_proxy:"",npm_config_package_lock:"true",npm_config__webassemblyjs_registry:"https://registry.npmjs.org",VSCODE_GIT_IPC_HANDLE:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T/vscode-git-49e2058bcb.sock",npm_config_package_lock_only:"",npm_config_fund:"true",npm_package_dependencies_react:"^18.1.0",npm_config_save_optional:"",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_ignore_scripts:"",npm_config_user_agent:"npm/6.14.8 node/v14.15.1 darwin x64",npm_config_cache_lock_wait:"10000",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code - Insiders.app/Contents/Frameworks/Code - Insiders Helper (Plugin).app/Contents/MacOS/Code - Insiders Helper (Plugin)",GIT_ASKPASS:"/Applications/Visual Studio Code - Insiders.app/Contents/Resources/app/extensions/git/dist/askpass.sh",npm_config_production:"",npm_package_files_1:"src",npm_config_send_metrics:"",npm_config_save_bundle:"",npm_package_dependencies_express:"^4.17.3",npm_package_files_0:"dist",npm_config_umask:"0022",npm_config_node_options:"",npm_config_init_version:"1.0.0",npm_config_init_author_name:"",npm_config_git:"git",npm_config_scope:"",npm_package_devDependencies_css_loader:"^6.5.1",npm_config_unsafe_perm:"true",npm_config_tmp:"/var/folders/zd/_38ky47x4sg55g0ng1pjgz5h0000gn/T",npm_config_onload_script:"",npm_node_execpath:"/usr/local/bin/node",npm_config_prefix:"/usr/local",npm_config_link:"",npm_config_format_package_lock:"true",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",COLORTERM:"truecolor",NODE_ENV:"production",REACT_APP_TILE_SHAPE:"1-1",REACT_APP_THEME:"dark",REACT_APP_COLOR:"#2F80FF",REACT_APP_LOGO:"https://dopamine.fit/static/media/logo.b73d8f83491044d425df2cdba52bbc36.svg",REACT_APP_FONT:"Roboto",REACT_APP_SHOW_CHAT:"true",REACT_APP_SHOW_SCREENSHARE:"true",REACT_APP_VIDEO_AVATAR:"true",REACT_APP_HOST_NAME:"https://sessions.dopamine.fit",REACT_APP_PROD_BACKEND_API:"https://prod-in2.100ms.live/hmsapi/dopaminefit.app.100ms.live/",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/dopaminefit.app.100ms.live/",REACT_APP_ENV:"prod",REACT_APP_LOGROCKET_ID:"<Your Logrocket project ID>",REACT_APP_POLICY_CONFIG:"",REACT_APP_WEBINAR_PROPS:"{}",REACT_APP_DEFAULT_APP_DETAILS:"{}",REACT_APP_ENABLE_STATS_FOR_NERDS:"false",REACT_APP_PUSHER_APP_KEY:"",REACT_APP_PUSHER_AUTHENDPOINT:"",REACT_APP_HEADLESS_JOIN:"false"}.NS_DURATION_TIME_IN_MS)}}),[]),Y=(0,e.useCallback)(()=>Ce(void 0,null,function*(){i.current&&(yield t.removePluginFromAudioTrack(i.current),i.current=null)}),[t]),H=(0,e.useCallback)(ae=>Ce(void 0,null,function*(){let Ee="adding Noise Suppression plugin failed, see docs";ae.message&&(Ee=ae.message),q.y.addToast({title:Ee}),a(!0),yield Y(),i.current=null,console.error(ae)}),[Y]),de=(0,e.useCallback)(()=>Ce(void 0,null,function*(){try{a(!1),yield u();const ae=t.validateAudioPluginSupport(i.current);if(ae.isSupported)yield t.addPluginToAudioTrack(i.current);else{const Ee=ae.errMsg;yield H(Ee)}}catch(ae){yield H(ae)}}),[t,H,u]);return(0,e.useEffect)(()=>{Ce(void 0,null,function*(){i.current||(yield u());const ae=t.validateAudioPluginSupport(i.current);o(ae.isSupported),a(!ae.isSupported)})},[p.audioInput,t,u]),_&&Oe.T.showNS()?we.createElement(R.u,{title:`Turn ${c?"off":"on"} noise suppression`},we.createElement(he.Z,{active:!c,disabled:s,onClick:()=>Ce(void 0,null,function*(){c?yield Y():yield de()}),"data-testid":"noise_suppression_btn"},we.createElement(_t.Z,null))):null};var ct=n(3951);const rt=e.lazy(()=>Promise.all([n.e(813),n.e(922)]).then(n.bind(n,4922))),lt=()=>{const{amIScreenSharing:i,screenShareVideoTrackId:t,screenShareAudioTrackId:s,toggleScreenShare:a}=(0,X.N)(),_=(0,l._U)(d.xf),o=i&&!t&&!!s,[r,p]=(0,e.useState)(!1);return!_.screen||!(0,ge.Lo)()?null:e.createElement(e.Fragment,null,e.createElement(R.u,{title:`${o?"Stop":"Start"} audio sharing`,key:"shareAudio"},e.createElement(he.Z,{active:!o,onClick:()=>{i?a(!0):p(!0)},"data-testid":"screenshare_audio"},e.createElement(w.Z,null))),r&&e.createElement(Tn,{onClose:()=>p(!1)}))},pt=()=>e.createElement(W.$.Root,null,e.createElement(W.$.Left,null,e.createElement(lt,null),e.createElement(qe,{type:d.Mv.audio}),e.createElement(qe,{type:d.Mv.video}),Oe.T.enableWhiteboard?e.createElement(F.VK,null):null,e.createElement(ct.f,null),e.createElement(ot,null),Oe.T.enableTranscription&&e.createElement(rt,null),e.createElement(f.k,{align:"center",css:{display:"none","@md":{display:"flex"}}},e.createElement(je.Z,{isMobile:!0}))),e.createElement(W.$.Center,null,e.createElement(_e.l,null),e.createElement($e,null),e.createElement(ze,null),e.createElement(Be,null),e.createElement(C.R,null),e.createElement(f.k,{align:"center",css:{display:"none","@md":{display:"flex"}}},e.createElement(Me,null))),e.createElement(W.$.Right,null,e.createElement(je.Z,null),e.createElement(Me,null)));var mt=n(9209);const dt=()=>e.createElement(W.$.Root,{css:{flexWrap:"nowrap","@md":{justifyContent:"center"}}},e.createElement(W.$.Left,{css:{"@md":{w:"unset",p:"0"}}},e.createElement(_e.l,null)),e.createElement(W.$.Center,{css:{"@md":{w:"unset"}}},e.createElement($e,{css:{"@sm":{display:"none"}}}),e.createElement(T.x,{css:{"@md":{display:"none"}}},e.createElement(ze,null)),e.createElement(T.x,{css:{display:"none","@md":{display:"flex",alignItems:"center",mx:"$4"}}},e.createElement(mt.Q$,null)),e.createElement(Be,null),e.createElement(T.x,{css:{"@md":{display:"none"}}},e.createElement(C.R,null)),e.createElement(f.k,{align:"center",css:{display:"none","@md":{display:"flex"}}},e.createElement(Me,null))),e.createElement(W.$.Right,null,e.createElement(je.Z,null),e.createElement(Me,null))),gt=()=>(0,ge.ZM)()?e.createElement(dt,null):e.createElement(pt,null);var ut=n(8760);const ft=()=>{const i=(0,ut.H)(),{roomId:t,role:s}=(0,A.UO)(),a=(0,M.tQ)(),_=(0,l._U)(d.Pz),o=(0,h.Z)(_),r=(0,l._U)(d.ln),p=(0,l.cw)();return(0,e.useEffect)(()=>{if(!t){i("/");return}!o&&!(_===d.wk.Connecting||_===d.wk.Reconnecting||r)&&i(s?`/preview/${t||""}/${s}`:`/preview/${t||""}`)},[r,o,_,i,s,t]),(0,e.useEffect)(()=>{a&&p.ignoreMessageTypes(["chat"])},[a,p]),(0,e.useEffect)(()=>()=>{r&&p.leave()},[p,r]),r?e.createElement(f.k,{css:{size:"100%"},direction:"column"},!a&&e.createElement(T.x,{css:{h:"$18","@md":{h:"$17"}},"data-testid":"header"},e.createElement(I.h,null)),e.createElement(T.x,{css:{w:"100%",flex:"1 1 0",minHeight:0},"data-testid":"conferencing"},e.createElement(E,null)),!a&&e.createElement(T.x,{css:{flexShrink:0,minHeight:"$24"},"data-testid":"footer"},e.createElement(gt,null)),e.createElement(Z,null)):e.createElement(V.Z,null)}},9655:(re,G,n)=>{n.d(G,{m:()=>K,O:()=>te});var e=n(8160),A=n(32),h=n(9290),l=n(6939),d=n(8485),f=n(8721),T=n(914);const V=e.memo(()=>e.createElement(l.x,{css:{position:"relative",overflow:"hidden",w:"37.5rem",maxWidth:"80%",h:"100%",r:"$3",m:"0 auto",backgroundImage:`url(${T})`,backgroundSize:"cover",backgroundRepeat:"no-repeat"},"data-testid":"first_person_img"},e.createElement(d.k,{align:"center",direction:"column",css:{position:"absolute",w:"100%",top:"33.33%",left:0,textAlign:"center"}},e.createElement(f.x,{color:"white",variant:"h4",css:{"@md":{fontSize:"$md"}}},"Welcome!"),e.createElement(f.x,{color:"white",variant:"h6",css:{mt:"$4","@md":{fontSize:"$sm"}}},"You\u2019re the first one here."),e.createElement(f.x,{color:"white",variant:"h6",css:{mt:"$2","@md":{fontSize:"$sm"}}},"Sit back and relax till the others join."))));var S=n(8051);const M=(0,h.zo)("img",{width:"100%",height:"auto",r:"$3"}),Z=4,L=JSON.parse("{}"),U=L?.ROOM_IDS||[],z=L?.IMAGE_FILE||"",ne=L?.LINK_HREF||"https://100ms.live/",K=({peers:x,maxTileCount:se})=>{const j=h.vc.media.md,F=(0,A.Z)(j);return e.createElement(e.Fragment,null,e.createElement(l.x,{css:{flex:"1 1 0",height:"100%",mx:"$8","@md":{flex:"2 1 0"}}},x&&x.length>0?e.createElement(S.Z,{peers:x,maxTileCount:F?Z:se}):U.some(D=>window.location.href.includes(D))?e.createElement(l.x,{css:{display:"grid",placeItems:"center",size:"100%",p:"$12"}},e.createElement("a",{href:ne,target:"_blank",rel:"noreferrer"},e.createElement(M,{css:{p:"$4",boxShadow:"$sm"},alt:"Event template",src:z}))):e.createElement(V,null)))},te=({peers:x})=>e.createElement(d.k,{direction:"column",css:{flex:"0 0 20%",mx:"$8","@lg":{flex:"0 0 25%"},"@md":{flex:"1 1 0"}}},e.createElement(d.k,{css:{flex:"1 1 0"},align:"end"},x&&x.length>0&&e.createElement(S.Z,{peers:x,maxColCount:2})))},3844:(re,G,n)=>{n.d(G,{O:()=>h});const e="peerName",A=new Map([[[!0,"screen"].toString(),"Your Screen"],[[!0,"regular"].toString(),`You (${e})`],[[!1,"screen"].toString(),`${e}'s Screen`],[[!1,"regular"].toString(),e],[[!0,void 0].toString(),`You (${e})`],[[!1,void 0].toString(),`${e}`]]),h=({peerName:l,isLocal:d,track:f})=>{const T=l!==void 0;if(!T||!f)return T?A.get([d,void 0].toString()).replace(e,l):"";const V=f.volume===0;let S=A.get([d,f.source].toString());return S?S=S.replace(e,l):S=`${l} ${f.source}`,S=`${S}${f.degraded?"(Degraded)":""}`,`${S}${V?" (Muted for you)":""}`}},535:(re,G,n)=>{n.d(G,{s:()=>R,Z:()=>g});var e=n(8160),A=n(32),h=n(3751),l=n(8081),d=n(9290),f=n(8485),T=n(6939),V=n(4685),S=n(9057),M=n(8721),Z=n(7688),L=(m,k,N)=>new Promise((B,b)=>{var O=Q=>{try{J(N.next(Q))}catch(oe){b(oe)}},$=Q=>{try{J(N.throw(Q))}catch(oe){b(oe)}},J=Q=>Q.done?B(Q.value):Promise.resolve(Q.value).then(O,$);J((N=N.apply(m,k)).next())});const U=()=>{const m=(0,h.cw)();return e.createElement(f.k,{direction:"column",align:"center",justify:"center",css:{position:"relative",overflow:"hidden",w:"37.5rem",maxWidth:"80%",h:"100%",r:"$3",m:"0 auto",color:"$textPrimary",bg:"$surfaceDefault",textAlign:"center"}},e.createElement(V.Z,{width:48,height:48}),e.createElement(M.x,{variant:"h5",css:{m:"$8 0"}},"You are sharing your screen"),e.createElement(Z.z,{variant:"danger",onClick:()=>L(void 0,null,function*(){yield m.setScreenShareEnabled(!1)}),"data-testid":"stop_screen_share_btn"},e.createElement(S.Z,{width:18,height:18}),"\xA0 Stop screen share"))};var z=n(9477),ne=n(8051),K=n(8329),te=n(2843),x=n(8379),se=n(8523),j=n.n(se),F=n(6532),D=n(7854),P=n(5861),y=n(3074),v=n(9990),E=n(5581),I=n(6773);const w=e.memo(({peerId:m})=>{const k=(0,h._U)((0,l.CI)(m)),N=(0,h._U)(l.k0.selectedItem),B=(0,I.L3)(E.JZ.isAudioOnly),b=(0,h.cw)(),O=(0,e.useRef)(null),[$,J]=(0,te.Z)(!1),Q=(0,x.Z)(O,$,{onClose:()=>J(!1)});return e.createElement(f.k,{direction:"column",justify:"center",css:{w:"100%",h:"100%"},ref:O},N&&e.createElement(f.k,{justify:"between",align:"center",css:{bg:"$menuBg",p:"$2 $2 $2 $6",borderTopLeftRadius:"$1",borderTopRightRadius:"$1"}},e.createElement(M.x,{css:{color:"$textPrimary"}},N.name),e.createElement(P.h,{css:{color:"$white"},onClick:()=>{b.videoPlaylist.stop()},"data-testid":"videoplaylist_cross_btn"},e.createElement(S.Z,null))),e.createElement(y.n,{trackId:k?.id,attach:!B,css:{"@lg":{objectFit:"contain",h:"auto"},r:"$1",borderTopLeftRadius:0,borderTopRightRadius:0}}),e.createElement(v.Nc,null,j().enabled&&e.createElement(P.h,{onClick:()=>J(),css:{color:"$white",height:"max-content",alignSelf:"center",cursor:"pointer"}},Q?e.createElement(F.Z,null):e.createElement(D.Z,null))))}),X=()=>{var m;const k=d.vc.media.lg,N=(0,A.Z)(k),B=(0,h._U)(l.BK),b=(0,h._U)(l.I3),O=(0,h._U)(l.fo),$=(0,h._U)(l.pk),J=(0,h._U)(l.Oq),Q=((m=$?.roleName)==null?void 0:m.toLowerCase())===O?.toLowerCase(),oe=b===$?.id,le=N||oe||Q,q=(0,e.useMemo)(()=>{const ge=B.filter(Pe=>Pe.id!==$?.id);return le&&$&&ge.unshift($),ge},[B,$,le]);return e.createElement(f.k,{css:{size:"100%"},direction:N?"column":"row"},e.createElement(W,{amIPresenting:oe,peerPresenting:$,peerSharingPlaylist:J}),e.createElement(f.k,{direction:{"@initial":"column","@lg":"row"},css:{overflow:"hidden",p:"$4 $8",flex:"0 0 20%","@lg":{flex:"1 1 0"}}},e.createElement(R,{showSidebarInBottom:N,peerScreenSharing:$,isPresenterInSmallTiles:le,smallTilePeers:q,totalPeers:B.length})))},R=({isPresenterInSmallTiles:m,peerScreenSharing:k,smallTilePeers:N,totalPeers:B,showSidebarInBottom:b})=>{const O=(0,e.useCallback)($=>k&&$.id!==k.id,[k]);return e.createElement(e.Fragment,null,!m&&e.createElement(C,{peerScreenSharing:k}),e.createElement(_e,{showSidebarInBottom:b,smallTilePeers:N,shouldShowScreenFn:O}))},W=({showStats:m,amIPresenting:k,peerPresenting:N,peerSharingPlaylist:B})=>{const b=(0,h._U)((0,l.K6)(N?.id));return B?e.createElement(T.x,{css:{mx:"$8",flex:"3 1 0","@lg":{flex:"2 1 0",display:"flex",alignItems:"center"}}},e.createElement(w,{peerId:B.id})):e.createElement(T.x,{css:{flex:"3 1 0",mx:"$8","@lg":{ml:"$4",maxHeight:"80%"}}},N&&(k&&!["browser","window","application"].includes(b?.displaySurface)?e.createElement(T.x,{css:{objectFit:"contain",h:"100%"}},e.createElement(U,null)):e.createElement(z.Z,{peerId:N?.id})))},_e=({smallTilePeers:m,shouldShowScreenFn:k,showStatsOnTiles:N,showSidebarInBottom:B})=>e.createElement(f.k,{css:{flex:"2 1 0"}},m&&m.length>0&&e.createElement(ne.Z,{peers:m,maxColCount:B?void 0:2,maxRowCount:B?1:void 0,includeScreenShareForPeer:k,showStatsOnTiles:N})),C=({peerScreenSharing:m,showStatsOnTiles:k})=>m?e.createElement(T.x,{css:{flex:"1 1 0",minHeight:"25%",py:"$4","@lg":{mr:"$4",minHeight:"unset",py:0},"@sm":{height:"100%",maxHeight:"75%",alignSelf:"center"}}},e.createElement(K.Z,{showStatsOnTiles:k,width:"100%",height:"100%",peerId:m.id})):null,g=X},914:(re,G,n)=>{re.exports=n.p+"static/media/first_person.0917322d0bba25059a53.png"}}]);

//# sourceMappingURL=726.559e83c2.js.map